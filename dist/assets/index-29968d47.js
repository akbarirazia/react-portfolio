var gJ=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var rje=gJ((Qs,Ks)=>{function oV(e,t){for(var r=0;r<t.length;r++){const i=t[r];if(typeof i!="string"&&!Array.isArray(i)){for(const n in i)if(n!=="default"&&!(n in e)){const a=Object.getOwnPropertyDescriptor(i,n);a&&Object.defineProperty(e,n,a.get?a:{enumerable:!0,get:()=>i[n]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function r(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(n){if(n.ep)return;n.ep=!0;const a=r(n);fetch(n.href,a)}})();var zm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function K3(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Z3(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function i(){return this instanceof i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(i){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(r,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})}),r}var lV={exports:{}},u2={},uV={exports:{}},gr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D1=Symbol.for("react.element"),vJ=Symbol.for("react.portal"),yJ=Symbol.for("react.fragment"),xJ=Symbol.for("react.strict_mode"),bJ=Symbol.for("react.profiler"),wJ=Symbol.for("react.provider"),_J=Symbol.for("react.context"),SJ=Symbol.for("react.forward_ref"),EJ=Symbol.for("react.suspense"),MJ=Symbol.for("react.memo"),CJ=Symbol.for("react.lazy"),rB=Symbol.iterator;function AJ(e){return e===null||typeof e!="object"?null:(e=rB&&e[rB]||e["@@iterator"],typeof e=="function"?e:null)}var cV={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},hV=Object.assign,dV={};function Jg(e,t,r){this.props=e,this.context=t,this.refs=dV,this.updater=r||cV}Jg.prototype.isReactComponent={};Jg.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Jg.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function fV(){}fV.prototype=Jg.prototype;function J3(e,t,r){this.props=e,this.context=t,this.refs=dV,this.updater=r||cV}var eO=J3.prototype=new fV;eO.constructor=J3;hV(eO,Jg.prototype);eO.isPureReactComponent=!0;var iB=Array.isArray,pV=Object.prototype.hasOwnProperty,tO={current:null},mV={key:!0,ref:!0,__self:!0,__source:!0};function gV(e,t,r){var i,n={},a=null,s=null;if(t!=null)for(i in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(a=""+t.key),t)pV.call(t,i)&&!mV.hasOwnProperty(i)&&(n[i]=t[i]);var o=arguments.length-2;if(o===1)n.children=r;else if(1<o){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+2];n.children=l}if(e&&e.defaultProps)for(i in o=e.defaultProps,o)n[i]===void 0&&(n[i]=o[i]);return{$$typeof:D1,type:e,key:a,ref:s,props:n,_owner:tO.current}}function TJ(e,t){return{$$typeof:D1,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function rO(e){return typeof e=="object"&&e!==null&&e.$$typeof===D1}function PJ(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var nB=/\/+/g;function SM(e,t){return typeof e=="object"&&e!==null&&e.key!=null?PJ(""+e.key):t.toString(36)}function pw(e,t,r,i,n){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(a){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case D1:case vJ:s=!0}}if(s)return s=e,n=n(s),e=i===""?"."+SM(s,0):i,iB(n)?(r="",e!=null&&(r=e.replace(nB,"$&/")+"/"),pw(n,t,r,"",function(u){return u})):n!=null&&(rO(n)&&(n=TJ(n,r+(!n.key||s&&s.key===n.key?"":(""+n.key).replace(nB,"$&/")+"/")+e)),t.push(n)),1;if(s=0,i=i===""?".":i+":",iB(e))for(var o=0;o<e.length;o++){a=e[o];var l=i+SM(a,o);s+=pw(a,t,r,l,n)}else if(l=AJ(e),typeof l=="function")for(e=l.call(e),o=0;!(a=e.next()).done;)a=a.value,l=i+SM(a,o++),s+=pw(a,t,r,l,n);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function mx(e,t,r){if(e==null)return e;var i=[],n=0;return pw(e,i,"","",function(a){return t.call(r,a,n++)}),i}function DJ(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var is={current:null},mw={transition:null},OJ={ReactCurrentDispatcher:is,ReactCurrentBatchConfig:mw,ReactCurrentOwner:tO};gr.Children={map:mx,forEach:function(e,t,r){mx(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return mx(e,function(){t++}),t},toArray:function(e){return mx(e,function(t){return t})||[]},only:function(e){if(!rO(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};gr.Component=Jg;gr.Fragment=yJ;gr.Profiler=bJ;gr.PureComponent=J3;gr.StrictMode=xJ;gr.Suspense=EJ;gr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=OJ;gr.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=hV({},e.props),n=e.key,a=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,s=tO.current),t.key!==void 0&&(n=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(l in t)pV.call(t,l)&&!mV.hasOwnProperty(l)&&(i[l]=t[l]===void 0&&o!==void 0?o[l]:t[l])}var l=arguments.length-2;if(l===1)i.children=r;else if(1<l){o=Array(l);for(var u=0;u<l;u++)o[u]=arguments[u+2];i.children=o}return{$$typeof:D1,type:e.type,key:n,ref:a,props:i,_owner:s}};gr.createContext=function(e){return e={$$typeof:_J,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:wJ,_context:e},e.Consumer=e};gr.createElement=gV;gr.createFactory=function(e){var t=gV.bind(null,e);return t.type=e,t};gr.createRef=function(){return{current:null}};gr.forwardRef=function(e){return{$$typeof:SJ,render:e}};gr.isValidElement=rO;gr.lazy=function(e){return{$$typeof:CJ,_payload:{_status:-1,_result:e},_init:DJ}};gr.memo=function(e,t){return{$$typeof:MJ,type:e,compare:t===void 0?null:t}};gr.startTransition=function(e){var t=mw.transition;mw.transition={};try{e()}finally{mw.transition=t}};gr.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};gr.useCallback=function(e,t){return is.current.useCallback(e,t)};gr.useContext=function(e){return is.current.useContext(e)};gr.useDebugValue=function(){};gr.useDeferredValue=function(e){return is.current.useDeferredValue(e)};gr.useEffect=function(e,t){return is.current.useEffect(e,t)};gr.useId=function(){return is.current.useId()};gr.useImperativeHandle=function(e,t,r){return is.current.useImperativeHandle(e,t,r)};gr.useInsertionEffect=function(e,t){return is.current.useInsertionEffect(e,t)};gr.useLayoutEffect=function(e,t){return is.current.useLayoutEffect(e,t)};gr.useMemo=function(e,t){return is.current.useMemo(e,t)};gr.useReducer=function(e,t,r){return is.current.useReducer(e,t,r)};gr.useRef=function(e){return is.current.useRef(e)};gr.useState=function(e){return is.current.useState(e)};gr.useSyncExternalStore=function(e,t,r){return is.current.useSyncExternalStore(e,t,r)};gr.useTransition=function(){return is.current.useTransition()};gr.version="18.2.0";uV.exports=gr;var X=uV.exports;const jn=K3(X),Jw=oV({__proto__:null,default:jn},[X]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IJ=X,RJ=Symbol.for("react.element"),kJ=Symbol.for("react.fragment"),LJ=Object.prototype.hasOwnProperty,BJ=IJ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,NJ={key:!0,ref:!0,__self:!0,__source:!0};function vV(e,t,r){var i,n={},a=null,s=null;r!==void 0&&(a=""+r),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(s=t.ref);for(i in t)LJ.call(t,i)&&!NJ.hasOwnProperty(i)&&(n[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)n[i]===void 0&&(n[i]=t[i]);return{$$typeof:RJ,type:e,key:a,ref:s,props:n,_owner:BJ.current}}u2.Fragment=kJ;u2.jsx=vV;u2.jsxs=vV;lV.exports=u2;var iO=lV.exports;const ad=iO.Fragment,Q=iO.jsx,ct=iO.jsxs,zJ=Object.freeze(Object.defineProperty({__proto__:null,Fragment:ad,jsx:Q,jsxs:ct},Symbol.toStringTag,{value:"Module"}));var yV={exports:{}},io={},xV={exports:{}},bV={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(B,V){var R=B.length;B.push(V);e:for(;0<R;){var H=R-1>>>1,W=B[H];if(0<n(W,V))B[H]=V,B[R]=W,R=H;else break e}}function r(B){return B.length===0?null:B[0]}function i(B){if(B.length===0)return null;var V=B[0],R=B.pop();if(R!==V){B[0]=R;e:for(var H=0,W=B.length,te=W>>>1;H<te;){var G=2*(H+1)-1,ie=B[G],q=G+1,le=B[q];if(0>n(ie,R))q<W&&0>n(le,ie)?(B[H]=le,B[q]=R,H=q):(B[H]=ie,B[G]=R,H=G);else if(q<W&&0>n(le,R))B[H]=le,B[q]=R,H=q;else break e}}return V}function n(B,V){var R=B.sortIndex-V.sortIndex;return R!==0?R:B.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();e.unstable_now=function(){return s.now()-o}}var l=[],u=[],h=1,c=null,d=3,f=!1,m=!1,p=!1,g=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(B){for(var V=r(u);V!==null;){if(V.callback===null)i(u);else if(V.startTime<=B)i(u),V.sortIndex=V.expirationTime,t(l,V);else break;V=r(u)}}function b(B){if(p=!1,x(B),!m)if(r(l)!==null)m=!0,F(_);else{var V=r(u);V!==null&&z(b,V.startTime-B)}}function _(B,V){m=!1,p&&(p=!1,v(S),S=-1),f=!0;var R=d;try{for(x(V),c=r(l);c!==null&&(!(c.expirationTime>V)||B&&!P());){var H=c.callback;if(typeof H=="function"){c.callback=null,d=c.priorityLevel;var W=H(c.expirationTime<=V);V=e.unstable_now(),typeof W=="function"?c.callback=W:c===r(l)&&i(l),x(V)}else i(l);c=r(l)}if(c!==null)var te=!0;else{var G=r(u);G!==null&&z(b,G.startTime-V),te=!1}return te}finally{c=null,d=R,f=!1}}var w=!1,E=null,S=-1,C=5,M=-1;function P(){return!(e.unstable_now()-M<C)}function I(){if(E!==null){var B=e.unstable_now();M=B;var V=!0;try{V=E(!0,B)}finally{V?k():(w=!1,E=null)}}else w=!1}var k;if(typeof y=="function")k=function(){y(I)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,O=L.port2;L.port1.onmessage=I,k=function(){O.postMessage(null)}}else k=function(){g(I,0)};function F(B){E=B,w||(w=!0,k())}function z(B,V){S=g(function(){B(e.unstable_now())},V)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(B){B.callback=null},e.unstable_continueExecution=function(){m||f||(m=!0,F(_))},e.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<B?Math.floor(1e3/B):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(B){switch(d){case 1:case 2:case 3:var V=3;break;default:V=d}var R=d;d=V;try{return B()}finally{d=R}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(B,V){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var R=d;d=B;try{return V()}finally{d=R}},e.unstable_scheduleCallback=function(B,V,R){var H=e.unstable_now();switch(typeof R=="object"&&R!==null?(R=R.delay,R=typeof R=="number"&&0<R?H+R:H):R=H,B){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=R+W,B={id:h++,callback:V,priorityLevel:B,startTime:R,expirationTime:W,sortIndex:-1},R>H?(B.sortIndex=R,t(u,B),r(l)===null&&B===r(u)&&(p?(v(S),S=-1):p=!0,z(b,R-H))):(B.sortIndex=W,t(l,B),m||f||(m=!0,F(_))),B},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(B){var V=d;return function(){var R=d;d=V;try{return B.apply(this,arguments)}finally{d=R}}}})(bV);xV.exports=bV;var FJ=xV.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wV=X,to=FJ;function He(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _V=new Set,Dy={};function Wf(e,t){vg(e,t),vg(e+"Capture",t)}function vg(e,t){for(Dy[e]=t,e=0;e<t.length;e++)_V.add(t[e])}var wc=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),MT=Object.prototype.hasOwnProperty,UJ=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,aB={},sB={};function jJ(e){return MT.call(sB,e)?!0:MT.call(aB,e)?!1:UJ.test(e)?sB[e]=!0:(aB[e]=!0,!1)}function VJ(e,t,r,i){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function HJ(e,t,r,i){if(t===null||typeof t>"u"||VJ(e,t,r,i))return!0;if(i)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ns(e,t,r,i,n,a,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=n,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=s}var aa={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){aa[e]=new ns(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];aa[t]=new ns(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){aa[e]=new ns(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){aa[e]=new ns(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){aa[e]=new ns(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){aa[e]=new ns(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){aa[e]=new ns(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){aa[e]=new ns(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){aa[e]=new ns(e,5,!1,e.toLowerCase(),null,!1,!1)});var nO=/[\-:]([a-z])/g;function aO(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(nO,aO);aa[t]=new ns(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(nO,aO);aa[t]=new ns(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(nO,aO);aa[t]=new ns(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){aa[e]=new ns(e,1,!1,e.toLowerCase(),null,!1,!1)});aa.xlinkHref=new ns("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){aa[e]=new ns(e,1,!1,e.toLowerCase(),null,!0,!0)});function sO(e,t,r,i){var n=aa.hasOwnProperty(t)?aa[t]:null;(n!==null?n.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(HJ(t,r,n,i)&&(r=null),i||n===null?jJ(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):n.mustUseProperty?e[n.propertyName]=r===null?n.type===3?!1:"":r:(t=n.attributeName,i=n.attributeNamespace,r===null?e.removeAttribute(t):(n=n.type,r=n===3||n===4&&r===!0?"":""+r,i?e.setAttributeNS(i,t,r):e.setAttribute(t,r))))}var Rc=wV.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,gx=Symbol.for("react.element"),pm=Symbol.for("react.portal"),mm=Symbol.for("react.fragment"),oO=Symbol.for("react.strict_mode"),CT=Symbol.for("react.profiler"),SV=Symbol.for("react.provider"),EV=Symbol.for("react.context"),lO=Symbol.for("react.forward_ref"),AT=Symbol.for("react.suspense"),TT=Symbol.for("react.suspense_list"),uO=Symbol.for("react.memo"),nh=Symbol.for("react.lazy"),MV=Symbol.for("react.offscreen"),oB=Symbol.iterator;function Ov(e){return e===null||typeof e!="object"?null:(e=oB&&e[oB]||e["@@iterator"],typeof e=="function"?e:null)}var Ci=Object.assign,EM;function A0(e){if(EM===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);EM=t&&t[1]||""}return`
`+EM+e}var MM=!1;function CM(e,t){if(!e||MM)return"";MM=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var i=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){i=u}e.call(t.prototype)}else{try{throw Error()}catch(u){i=u}e()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var n=u.stack.split(`
`),a=i.stack.split(`
`),s=n.length-1,o=a.length-1;1<=s&&0<=o&&n[s]!==a[o];)o--;for(;1<=s&&0<=o;s--,o--)if(n[s]!==a[o]){if(s!==1||o!==1)do if(s--,o--,0>o||n[s]!==a[o]){var l=`
`+n[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=s&&0<=o);break}}}finally{MM=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?A0(e):""}function GJ(e){switch(e.tag){case 5:return A0(e.type);case 16:return A0("Lazy");case 13:return A0("Suspense");case 19:return A0("SuspenseList");case 0:case 2:case 15:return e=CM(e.type,!1),e;case 11:return e=CM(e.type.render,!1),e;case 1:return e=CM(e.type,!0),e;default:return""}}function PT(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case mm:return"Fragment";case pm:return"Portal";case CT:return"Profiler";case oO:return"StrictMode";case AT:return"Suspense";case TT:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case EV:return(e.displayName||"Context")+".Consumer";case SV:return(e._context.displayName||"Context")+".Provider";case lO:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case uO:return t=e.displayName||null,t!==null?t:PT(e.type)||"Memo";case nh:t=e._payload,e=e._init;try{return PT(e(t))}catch{}}return null}function WJ(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return PT(t);case 8:return t===oO?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Xh(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function CV(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function $J(e){var t=CV(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var n=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(s){i=""+s,a.call(this,s)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(s){i=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function vx(e){e._valueTracker||(e._valueTracker=$J(e))}function AV(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),i="";return e&&(i=CV(e)?e.checked?"true":"false":e.value),e=i,e!==r?(t.setValue(e),!0):!1}function e_(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function DT(e,t){var r=t.checked;return Ci({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function lB(e,t){var r=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;r=Xh(t.value!=null?t.value:r),e._wrapperState={initialChecked:i,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function TV(e,t){t=t.checked,t!=null&&sO(e,"checked",t,!1)}function OT(e,t){TV(e,t);var r=Xh(t.value),i=t.type;if(r!=null)i==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?IT(e,t.type,r):t.hasOwnProperty("defaultValue")&&IT(e,t.type,Xh(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function uB(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function IT(e,t,r){(t!=="number"||e_(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var T0=Array.isArray;function Fm(e,t,r,i){if(e=e.options,t){t={};for(var n=0;n<r.length;n++)t["$"+r[n]]=!0;for(r=0;r<e.length;r++)n=t.hasOwnProperty("$"+e[r].value),e[r].selected!==n&&(e[r].selected=n),n&&i&&(e[r].defaultSelected=!0)}else{for(r=""+Xh(r),t=null,n=0;n<e.length;n++){if(e[n].value===r){e[n].selected=!0,i&&(e[n].defaultSelected=!0);return}t!==null||e[n].disabled||(t=e[n])}t!==null&&(t.selected=!0)}}function RT(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(He(91));return Ci({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function cB(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(He(92));if(T0(r)){if(1<r.length)throw Error(He(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Xh(r)}}function PV(e,t){var r=Xh(t.value),i=Xh(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),i!=null&&(e.defaultValue=""+i)}function hB(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function DV(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function kT(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?DV(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var yx,OV=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,i,n){MSApp.execUnsafeLocalFunction(function(){return e(t,r,i,n)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(yx=yx||document.createElement("div"),yx.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=yx.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Oy(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var q0={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},YJ=["Webkit","ms","Moz","O"];Object.keys(q0).forEach(function(e){YJ.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),q0[t]=q0[e]})});function IV(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||q0.hasOwnProperty(e)&&q0[e]?(""+t).trim():t+"px"}function RV(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var i=r.indexOf("--")===0,n=IV(r,t[r],i);r==="float"&&(r="cssFloat"),i?e.setProperty(r,n):e[r]=n}}var qJ=Ci({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function LT(e,t){if(t){if(qJ[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(He(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(He(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(He(61))}if(t.style!=null&&typeof t.style!="object")throw Error(He(62))}}function BT(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var NT=null;function cO(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var zT=null,Um=null,jm=null;function dB(e){if(e=R1(e)){if(typeof zT!="function")throw Error(He(280));var t=e.stateNode;t&&(t=p2(t),zT(e.stateNode,e.type,t))}}function kV(e){Um?jm?jm.push(e):jm=[e]:Um=e}function LV(){if(Um){var e=Um,t=jm;if(jm=Um=null,dB(e),t)for(e=0;e<t.length;e++)dB(t[e])}}function BV(e,t){return e(t)}function NV(){}var AM=!1;function zV(e,t,r){if(AM)return e(t,r);AM=!0;try{return BV(e,t,r)}finally{AM=!1,(Um!==null||jm!==null)&&(NV(),LV())}}function Iy(e,t){var r=e.stateNode;if(r===null)return null;var i=p2(r);if(i===null)return null;r=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(He(231,t,typeof r));return r}var FT=!1;if(wc)try{var Iv={};Object.defineProperty(Iv,"passive",{get:function(){FT=!0}}),window.addEventListener("test",Iv,Iv),window.removeEventListener("test",Iv,Iv)}catch{FT=!1}function XJ(e,t,r,i,n,a,s,o,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(h){this.onError(h)}}var X0=!1,t_=null,r_=!1,UT=null,QJ={onError:function(e){X0=!0,t_=e}};function KJ(e,t,r,i,n,a,s,o,l){X0=!1,t_=null,XJ.apply(QJ,arguments)}function ZJ(e,t,r,i,n,a,s,o,l){if(KJ.apply(this,arguments),X0){if(X0){var u=t_;X0=!1,t_=null}else throw Error(He(198));r_||(r_=!0,UT=u)}}function $f(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function FV(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function fB(e){if($f(e)!==e)throw Error(He(188))}function JJ(e){var t=e.alternate;if(!t){if(t=$f(e),t===null)throw Error(He(188));return t!==e?null:e}for(var r=e,i=t;;){var n=r.return;if(n===null)break;var a=n.alternate;if(a===null){if(i=n.return,i!==null){r=i;continue}break}if(n.child===a.child){for(a=n.child;a;){if(a===r)return fB(n),e;if(a===i)return fB(n),t;a=a.sibling}throw Error(He(188))}if(r.return!==i.return)r=n,i=a;else{for(var s=!1,o=n.child;o;){if(o===r){s=!0,r=n,i=a;break}if(o===i){s=!0,i=n,r=a;break}o=o.sibling}if(!s){for(o=a.child;o;){if(o===r){s=!0,r=a,i=n;break}if(o===i){s=!0,i=a,r=n;break}o=o.sibling}if(!s)throw Error(He(189))}}if(r.alternate!==i)throw Error(He(190))}if(r.tag!==3)throw Error(He(188));return r.stateNode.current===r?e:t}function UV(e){return e=JJ(e),e!==null?jV(e):null}function jV(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=jV(e);if(t!==null)return t;e=e.sibling}return null}var VV=to.unstable_scheduleCallback,pB=to.unstable_cancelCallback,eee=to.unstable_shouldYield,tee=to.unstable_requestPaint,Wi=to.unstable_now,ree=to.unstable_getCurrentPriorityLevel,hO=to.unstable_ImmediatePriority,HV=to.unstable_UserBlockingPriority,i_=to.unstable_NormalPriority,iee=to.unstable_LowPriority,GV=to.unstable_IdlePriority,c2=null,pu=null;function nee(e){if(pu&&typeof pu.onCommitFiberRoot=="function")try{pu.onCommitFiberRoot(c2,e,void 0,(e.current.flags&128)===128)}catch{}}var vl=Math.clz32?Math.clz32:oee,aee=Math.log,see=Math.LN2;function oee(e){return e>>>=0,e===0?32:31-(aee(e)/see|0)|0}var xx=64,bx=4194304;function P0(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function n_(e,t){var r=e.pendingLanes;if(r===0)return 0;var i=0,n=e.suspendedLanes,a=e.pingedLanes,s=r&268435455;if(s!==0){var o=s&~n;o!==0?i=P0(o):(a&=s,a!==0&&(i=P0(a)))}else s=r&~n,s!==0?i=P0(s):a!==0&&(i=P0(a));if(i===0)return 0;if(t!==0&&t!==i&&!(t&n)&&(n=i&-i,a=t&-t,n>=a||n===16&&(a&4194240)!==0))return t;if(i&4&&(i|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)r=31-vl(t),n=1<<r,i|=e[r],t&=~n;return i}function lee(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function uee(e,t){for(var r=e.suspendedLanes,i=e.pingedLanes,n=e.expirationTimes,a=e.pendingLanes;0<a;){var s=31-vl(a),o=1<<s,l=n[s];l===-1?(!(o&r)||o&i)&&(n[s]=lee(o,t)):l<=t&&(e.expiredLanes|=o),a&=~o}}function jT(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function WV(){var e=xx;return xx<<=1,!(xx&4194240)&&(xx=64),e}function TM(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function O1(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-vl(t),e[t]=r}function cee(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<r;){var n=31-vl(r),a=1<<n;t[n]=0,i[n]=-1,e[n]=-1,r&=~a}}function dO(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var i=31-vl(r),n=1<<i;n&t|e[i]&t&&(e[i]|=t),r&=~n}}var qr=0;function $V(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var YV,fO,qV,XV,QV,VT=!1,wx=[],Dh=null,Oh=null,Ih=null,Ry=new Map,ky=new Map,oh=[],hee="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function mB(e,t){switch(e){case"focusin":case"focusout":Dh=null;break;case"dragenter":case"dragleave":Oh=null;break;case"mouseover":case"mouseout":Ih=null;break;case"pointerover":case"pointerout":Ry.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ky.delete(t.pointerId)}}function Rv(e,t,r,i,n,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:i,nativeEvent:a,targetContainers:[n]},t!==null&&(t=R1(t),t!==null&&fO(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),e)}function dee(e,t,r,i,n){switch(t){case"focusin":return Dh=Rv(Dh,e,t,r,i,n),!0;case"dragenter":return Oh=Rv(Oh,e,t,r,i,n),!0;case"mouseover":return Ih=Rv(Ih,e,t,r,i,n),!0;case"pointerover":var a=n.pointerId;return Ry.set(a,Rv(Ry.get(a)||null,e,t,r,i,n)),!0;case"gotpointercapture":return a=n.pointerId,ky.set(a,Rv(ky.get(a)||null,e,t,r,i,n)),!0}return!1}function KV(e){var t=Qd(e.target);if(t!==null){var r=$f(t);if(r!==null){if(t=r.tag,t===13){if(t=FV(r),t!==null){e.blockedOn=t,QV(e.priority,function(){qV(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function gw(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=HT(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var i=new r.constructor(r.type,r);NT=i,r.target.dispatchEvent(i),NT=null}else return t=R1(r),t!==null&&fO(t),e.blockedOn=r,!1;t.shift()}return!0}function gB(e,t,r){gw(e)&&r.delete(t)}function fee(){VT=!1,Dh!==null&&gw(Dh)&&(Dh=null),Oh!==null&&gw(Oh)&&(Oh=null),Ih!==null&&gw(Ih)&&(Ih=null),Ry.forEach(gB),ky.forEach(gB)}function kv(e,t){e.blockedOn===t&&(e.blockedOn=null,VT||(VT=!0,to.unstable_scheduleCallback(to.unstable_NormalPriority,fee)))}function Ly(e){function t(n){return kv(n,e)}if(0<wx.length){kv(wx[0],e);for(var r=1;r<wx.length;r++){var i=wx[r];i.blockedOn===e&&(i.blockedOn=null)}}for(Dh!==null&&kv(Dh,e),Oh!==null&&kv(Oh,e),Ih!==null&&kv(Ih,e),Ry.forEach(t),ky.forEach(t),r=0;r<oh.length;r++)i=oh[r],i.blockedOn===e&&(i.blockedOn=null);for(;0<oh.length&&(r=oh[0],r.blockedOn===null);)KV(r),r.blockedOn===null&&oh.shift()}var Vm=Rc.ReactCurrentBatchConfig,a_=!0;function pee(e,t,r,i){var n=qr,a=Vm.transition;Vm.transition=null;try{qr=1,pO(e,t,r,i)}finally{qr=n,Vm.transition=a}}function mee(e,t,r,i){var n=qr,a=Vm.transition;Vm.transition=null;try{qr=4,pO(e,t,r,i)}finally{qr=n,Vm.transition=a}}function pO(e,t,r,i){if(a_){var n=HT(e,t,r,i);if(n===null)zM(e,t,i,s_,r),mB(e,i);else if(dee(n,e,t,r,i))i.stopPropagation();else if(mB(e,i),t&4&&-1<hee.indexOf(e)){for(;n!==null;){var a=R1(n);if(a!==null&&YV(a),a=HT(e,t,r,i),a===null&&zM(e,t,i,s_,r),a===n)break;n=a}n!==null&&i.stopPropagation()}else zM(e,t,i,null,r)}}var s_=null;function HT(e,t,r,i){if(s_=null,e=cO(i),e=Qd(e),e!==null)if(t=$f(e),t===null)e=null;else if(r=t.tag,r===13){if(e=FV(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return s_=e,null}function ZV(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ree()){case hO:return 1;case HV:return 4;case i_:case iee:return 16;case GV:return 536870912;default:return 16}default:return 16}}var ph=null,mO=null,vw=null;function JV(){if(vw)return vw;var e,t=mO,r=t.length,i,n="value"in ph?ph.value:ph.textContent,a=n.length;for(e=0;e<r&&t[e]===n[e];e++);var s=r-e;for(i=1;i<=s&&t[r-i]===n[a-i];i++);return vw=n.slice(e,1<i?1-i:void 0)}function yw(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function _x(){return!0}function vB(){return!1}function no(e){function t(r,i,n,a,s){this._reactName=r,this._targetInst=n,this.type=i,this.nativeEvent=a,this.target=s,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(r=e[o],this[o]=r?r(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?_x:vB,this.isPropagationStopped=vB,this}return Ci(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=_x)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=_x)},persist:function(){},isPersistent:_x}),t}var ev={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gO=no(ev),I1=Ci({},ev,{view:0,detail:0}),gee=no(I1),PM,DM,Lv,h2=Ci({},I1,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vO,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Lv&&(Lv&&e.type==="mousemove"?(PM=e.screenX-Lv.screenX,DM=e.screenY-Lv.screenY):DM=PM=0,Lv=e),PM)},movementY:function(e){return"movementY"in e?e.movementY:DM}}),yB=no(h2),vee=Ci({},h2,{dataTransfer:0}),yee=no(vee),xee=Ci({},I1,{relatedTarget:0}),OM=no(xee),bee=Ci({},ev,{animationName:0,elapsedTime:0,pseudoElement:0}),wee=no(bee),_ee=Ci({},ev,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),See=no(_ee),Eee=Ci({},ev,{data:0}),xB=no(Eee),Mee={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cee={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Aee={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tee(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Aee[e])?!!t[e]:!1}function vO(){return Tee}var Pee=Ci({},I1,{key:function(e){if(e.key){var t=Mee[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=yw(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Cee[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vO,charCode:function(e){return e.type==="keypress"?yw(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?yw(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Dee=no(Pee),Oee=Ci({},h2,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bB=no(Oee),Iee=Ci({},I1,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vO}),Ree=no(Iee),kee=Ci({},ev,{propertyName:0,elapsedTime:0,pseudoElement:0}),Lee=no(kee),Bee=Ci({},h2,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Nee=no(Bee),zee=[9,13,27,32],yO=wc&&"CompositionEvent"in window,Q0=null;wc&&"documentMode"in document&&(Q0=document.documentMode);var Fee=wc&&"TextEvent"in window&&!Q0,e8=wc&&(!yO||Q0&&8<Q0&&11>=Q0),wB=String.fromCharCode(32),_B=!1;function t8(e,t){switch(e){case"keyup":return zee.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function r8(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var gm=!1;function Uee(e,t){switch(e){case"compositionend":return r8(t);case"keypress":return t.which!==32?null:(_B=!0,wB);case"textInput":return e=t.data,e===wB&&_B?null:e;default:return null}}function jee(e,t){if(gm)return e==="compositionend"||!yO&&t8(e,t)?(e=JV(),vw=mO=ph=null,gm=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return e8&&t.locale!=="ko"?null:t.data;default:return null}}var Vee={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function SB(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Vee[e.type]:t==="textarea"}function i8(e,t,r,i){kV(i),t=o_(t,"onChange"),0<t.length&&(r=new gO("onChange","change",null,r,i),e.push({event:r,listeners:t}))}var K0=null,By=null;function Hee(e){p8(e,0)}function d2(e){var t=xm(e);if(AV(t))return e}function Gee(e,t){if(e==="change")return t}var n8=!1;if(wc){var IM;if(wc){var RM="oninput"in document;if(!RM){var EB=document.createElement("div");EB.setAttribute("oninput","return;"),RM=typeof EB.oninput=="function"}IM=RM}else IM=!1;n8=IM&&(!document.documentMode||9<document.documentMode)}function MB(){K0&&(K0.detachEvent("onpropertychange",a8),By=K0=null)}function a8(e){if(e.propertyName==="value"&&d2(By)){var t=[];i8(t,By,e,cO(e)),zV(Hee,t)}}function Wee(e,t,r){e==="focusin"?(MB(),K0=t,By=r,K0.attachEvent("onpropertychange",a8)):e==="focusout"&&MB()}function $ee(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return d2(By)}function Yee(e,t){if(e==="click")return d2(t)}function qee(e,t){if(e==="input"||e==="change")return d2(t)}function Xee(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Sl=typeof Object.is=="function"?Object.is:Xee;function Ny(e,t){if(Sl(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++){var n=r[i];if(!MT.call(t,n)||!Sl(e[n],t[n]))return!1}return!0}function CB(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function AB(e,t){var r=CB(e);e=0;for(var i;r;){if(r.nodeType===3){if(i=e+r.textContent.length,e<=t&&i>=t)return{node:r,offset:t-e};e=i}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=CB(r)}}function s8(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?s8(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function o8(){for(var e=window,t=e_();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=e_(e.document)}return t}function xO(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Qee(e){var t=o8(),r=e.focusedElem,i=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&s8(r.ownerDocument.documentElement,r)){if(i!==null&&xO(r)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var n=r.textContent.length,a=Math.min(i.start,n);i=i.end===void 0?a:Math.min(i.end,n),!e.extend&&a>i&&(n=i,i=a,a=n),n=AB(r,a);var s=AB(r,i);n&&s&&(e.rangeCount!==1||e.anchorNode!==n.node||e.anchorOffset!==n.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(n.node,n.offset),e.removeAllRanges(),a>i?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Kee=wc&&"documentMode"in document&&11>=document.documentMode,vm=null,GT=null,Z0=null,WT=!1;function TB(e,t,r){var i=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;WT||vm==null||vm!==e_(i)||(i=vm,"selectionStart"in i&&xO(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Z0&&Ny(Z0,i)||(Z0=i,i=o_(GT,"onSelect"),0<i.length&&(t=new gO("onSelect","select",null,t,r),e.push({event:t,listeners:i}),t.target=vm)))}function Sx(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var ym={animationend:Sx("Animation","AnimationEnd"),animationiteration:Sx("Animation","AnimationIteration"),animationstart:Sx("Animation","AnimationStart"),transitionend:Sx("Transition","TransitionEnd")},kM={},l8={};wc&&(l8=document.createElement("div").style,"AnimationEvent"in window||(delete ym.animationend.animation,delete ym.animationiteration.animation,delete ym.animationstart.animation),"TransitionEvent"in window||delete ym.transitionend.transition);function f2(e){if(kM[e])return kM[e];if(!ym[e])return e;var t=ym[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in l8)return kM[e]=t[r];return e}var u8=f2("animationend"),c8=f2("animationiteration"),h8=f2("animationstart"),d8=f2("transitionend"),f8=new Map,PB="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function sd(e,t){f8.set(e,t),Wf(t,[e])}for(var LM=0;LM<PB.length;LM++){var BM=PB[LM],Zee=BM.toLowerCase(),Jee=BM[0].toUpperCase()+BM.slice(1);sd(Zee,"on"+Jee)}sd(u8,"onAnimationEnd");sd(c8,"onAnimationIteration");sd(h8,"onAnimationStart");sd("dblclick","onDoubleClick");sd("focusin","onFocus");sd("focusout","onBlur");sd(d8,"onTransitionEnd");vg("onMouseEnter",["mouseout","mouseover"]);vg("onMouseLeave",["mouseout","mouseover"]);vg("onPointerEnter",["pointerout","pointerover"]);vg("onPointerLeave",["pointerout","pointerover"]);Wf("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Wf("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Wf("onBeforeInput",["compositionend","keypress","textInput","paste"]);Wf("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Wf("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Wf("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var D0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ete=new Set("cancel close invalid load scroll toggle".split(" ").concat(D0));function DB(e,t,r){var i=e.type||"unknown-event";e.currentTarget=r,ZJ(i,t,void 0,e),e.currentTarget=null}function p8(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var i=e[r],n=i.event;i=i.listeners;e:{var a=void 0;if(t)for(var s=i.length-1;0<=s;s--){var o=i[s],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==a&&n.isPropagationStopped())break e;DB(n,o,u),a=l}else for(s=0;s<i.length;s++){if(o=i[s],l=o.instance,u=o.currentTarget,o=o.listener,l!==a&&n.isPropagationStopped())break e;DB(n,o,u),a=l}}}if(r_)throw e=UT,r_=!1,UT=null,e}function fi(e,t){var r=t[QT];r===void 0&&(r=t[QT]=new Set);var i=e+"__bubble";r.has(i)||(m8(t,e,2,!1),r.add(i))}function NM(e,t,r){var i=0;t&&(i|=4),m8(r,e,i,t)}var Ex="_reactListening"+Math.random().toString(36).slice(2);function zy(e){if(!e[Ex]){e[Ex]=!0,_V.forEach(function(r){r!=="selectionchange"&&(ete.has(r)||NM(r,!1,e),NM(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ex]||(t[Ex]=!0,NM("selectionchange",!1,t))}}function m8(e,t,r,i){switch(ZV(t)){case 1:var n=pee;break;case 4:n=mee;break;default:n=pO}r=n.bind(null,t,r,e),n=void 0,!FT||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),i?n!==void 0?e.addEventListener(t,r,{capture:!0,passive:n}):e.addEventListener(t,r,!0):n!==void 0?e.addEventListener(t,r,{passive:n}):e.addEventListener(t,r,!1)}function zM(e,t,r,i,n){var a=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var s=i.tag;if(s===3||s===4){var o=i.stateNode.containerInfo;if(o===n||o.nodeType===8&&o.parentNode===n)break;if(s===4)for(s=i.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===n||l.nodeType===8&&l.parentNode===n))return;s=s.return}for(;o!==null;){if(s=Qd(o),s===null)return;if(l=s.tag,l===5||l===6){i=a=s;continue e}o=o.parentNode}}i=i.return}zV(function(){var u=a,h=cO(r),c=[];e:{var d=f8.get(e);if(d!==void 0){var f=gO,m=e;switch(e){case"keypress":if(yw(r)===0)break e;case"keydown":case"keyup":f=Dee;break;case"focusin":m="focus",f=OM;break;case"focusout":m="blur",f=OM;break;case"beforeblur":case"afterblur":f=OM;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=yB;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=yee;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=Ree;break;case u8:case c8:case h8:f=wee;break;case d8:f=Lee;break;case"scroll":f=gee;break;case"wheel":f=Nee;break;case"copy":case"cut":case"paste":f=See;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=bB}var p=(t&4)!==0,g=!p&&e==="scroll",v=p?d!==null?d+"Capture":null:d;p=[];for(var y=u,x;y!==null;){x=y;var b=x.stateNode;if(x.tag===5&&b!==null&&(x=b,v!==null&&(b=Iy(y,v),b!=null&&p.push(Fy(y,b,x)))),g)break;y=y.return}0<p.length&&(d=new f(d,m,null,r,h),c.push({event:d,listeners:p}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",f=e==="mouseout"||e==="pointerout",d&&r!==NT&&(m=r.relatedTarget||r.fromElement)&&(Qd(m)||m[_c]))break e;if((f||d)&&(d=h.window===h?h:(d=h.ownerDocument)?d.defaultView||d.parentWindow:window,f?(m=r.relatedTarget||r.toElement,f=u,m=m?Qd(m):null,m!==null&&(g=$f(m),m!==g||m.tag!==5&&m.tag!==6)&&(m=null)):(f=null,m=u),f!==m)){if(p=yB,b="onMouseLeave",v="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(p=bB,b="onPointerLeave",v="onPointerEnter",y="pointer"),g=f==null?d:xm(f),x=m==null?d:xm(m),d=new p(b,y+"leave",f,r,h),d.target=g,d.relatedTarget=x,b=null,Qd(h)===u&&(p=new p(v,y+"enter",m,r,h),p.target=x,p.relatedTarget=g,b=p),g=b,f&&m)t:{for(p=f,v=m,y=0,x=p;x;x=hp(x))y++;for(x=0,b=v;b;b=hp(b))x++;for(;0<y-x;)p=hp(p),y--;for(;0<x-y;)v=hp(v),x--;for(;y--;){if(p===v||v!==null&&p===v.alternate)break t;p=hp(p),v=hp(v)}p=null}else p=null;f!==null&&OB(c,d,f,p,!1),m!==null&&g!==null&&OB(c,g,m,p,!0)}}e:{if(d=u?xm(u):window,f=d.nodeName&&d.nodeName.toLowerCase(),f==="select"||f==="input"&&d.type==="file")var _=Gee;else if(SB(d))if(n8)_=qee;else{_=$ee;var w=Wee}else(f=d.nodeName)&&f.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(_=Yee);if(_&&(_=_(e,u))){i8(c,_,r,h);break e}w&&w(e,d,u),e==="focusout"&&(w=d._wrapperState)&&w.controlled&&d.type==="number"&&IT(d,"number",d.value)}switch(w=u?xm(u):window,e){case"focusin":(SB(w)||w.contentEditable==="true")&&(vm=w,GT=u,Z0=null);break;case"focusout":Z0=GT=vm=null;break;case"mousedown":WT=!0;break;case"contextmenu":case"mouseup":case"dragend":WT=!1,TB(c,r,h);break;case"selectionchange":if(Kee)break;case"keydown":case"keyup":TB(c,r,h)}var E;if(yO)e:{switch(e){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else gm?t8(e,r)&&(S="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(S="onCompositionStart");S&&(e8&&r.locale!=="ko"&&(gm||S!=="onCompositionStart"?S==="onCompositionEnd"&&gm&&(E=JV()):(ph=h,mO="value"in ph?ph.value:ph.textContent,gm=!0)),w=o_(u,S),0<w.length&&(S=new xB(S,e,null,r,h),c.push({event:S,listeners:w}),E?S.data=E:(E=r8(r),E!==null&&(S.data=E)))),(E=Fee?Uee(e,r):jee(e,r))&&(u=o_(u,"onBeforeInput"),0<u.length&&(h=new xB("onBeforeInput","beforeinput",null,r,h),c.push({event:h,listeners:u}),h.data=E))}p8(c,t)})}function Fy(e,t,r){return{instance:e,listener:t,currentTarget:r}}function o_(e,t){for(var r=t+"Capture",i=[];e!==null;){var n=e,a=n.stateNode;n.tag===5&&a!==null&&(n=a,a=Iy(e,r),a!=null&&i.unshift(Fy(e,a,n)),a=Iy(e,t),a!=null&&i.push(Fy(e,a,n))),e=e.return}return i}function hp(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function OB(e,t,r,i,n){for(var a=t._reactName,s=[];r!==null&&r!==i;){var o=r,l=o.alternate,u=o.stateNode;if(l!==null&&l===i)break;o.tag===5&&u!==null&&(o=u,n?(l=Iy(r,a),l!=null&&s.unshift(Fy(r,l,o))):n||(l=Iy(r,a),l!=null&&s.push(Fy(r,l,o)))),r=r.return}s.length!==0&&e.push({event:t,listeners:s})}var tte=/\r\n?/g,rte=/\u0000|\uFFFD/g;function IB(e){return(typeof e=="string"?e:""+e).replace(tte,`
`).replace(rte,"")}function Mx(e,t,r){if(t=IB(t),IB(e)!==t&&r)throw Error(He(425))}function l_(){}var $T=null,YT=null;function qT(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var XT=typeof setTimeout=="function"?setTimeout:void 0,ite=typeof clearTimeout=="function"?clearTimeout:void 0,RB=typeof Promise=="function"?Promise:void 0,nte=typeof queueMicrotask=="function"?queueMicrotask:typeof RB<"u"?function(e){return RB.resolve(null).then(e).catch(ate)}:XT;function ate(e){setTimeout(function(){throw e})}function FM(e,t){var r=t,i=0;do{var n=r.nextSibling;if(e.removeChild(r),n&&n.nodeType===8)if(r=n.data,r==="/$"){if(i===0){e.removeChild(n),Ly(t);return}i--}else r!=="$"&&r!=="$?"&&r!=="$!"||i++;r=n}while(r);Ly(t)}function Rh(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function kB(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var tv=Math.random().toString(36).slice(2),eu="__reactFiber$"+tv,Uy="__reactProps$"+tv,_c="__reactContainer$"+tv,QT="__reactEvents$"+tv,ste="__reactListeners$"+tv,ote="__reactHandles$"+tv;function Qd(e){var t=e[eu];if(t)return t;for(var r=e.parentNode;r;){if(t=r[_c]||r[eu]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=kB(e);e!==null;){if(r=e[eu])return r;e=kB(e)}return t}e=r,r=e.parentNode}return null}function R1(e){return e=e[eu]||e[_c],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function xm(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(He(33))}function p2(e){return e[Uy]||null}var KT=[],bm=-1;function od(e){return{current:e}}function gi(e){0>bm||(e.current=KT[bm],KT[bm]=null,bm--)}function di(e,t){bm++,KT[bm]=e.current,e.current=t}var Qh={},Sa=od(Qh),bs=od(!1),Cf=Qh;function yg(e,t){var r=e.type.contextTypes;if(!r)return Qh;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var n={},a;for(a in r)n[a]=t[a];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=n),n}function ws(e){return e=e.childContextTypes,e!=null}function u_(){gi(bs),gi(Sa)}function LB(e,t,r){if(Sa.current!==Qh)throw Error(He(168));di(Sa,t),di(bs,r)}function g8(e,t,r){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return r;i=i.getChildContext();for(var n in i)if(!(n in t))throw Error(He(108,WJ(e)||"Unknown",n));return Ci({},r,i)}function c_(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Qh,Cf=Sa.current,di(Sa,e),di(bs,bs.current),!0}function BB(e,t,r){var i=e.stateNode;if(!i)throw Error(He(169));r?(e=g8(e,t,Cf),i.__reactInternalMemoizedMergedChildContext=e,gi(bs),gi(Sa),di(Sa,e)):gi(bs),di(bs,r)}var tc=null,m2=!1,UM=!1;function v8(e){tc===null?tc=[e]:tc.push(e)}function lte(e){m2=!0,v8(e)}function ld(){if(!UM&&tc!==null){UM=!0;var e=0,t=qr;try{var r=tc;for(qr=1;e<r.length;e++){var i=r[e];do i=i(!0);while(i!==null)}tc=null,m2=!1}catch(n){throw tc!==null&&(tc=tc.slice(e+1)),VV(hO,ld),n}finally{qr=t,UM=!1}}return null}var wm=[],_m=0,h_=null,d_=0,wo=[],_o=0,Af=null,oc=1,lc="";function Id(e,t){wm[_m++]=d_,wm[_m++]=h_,h_=e,d_=t}function y8(e,t,r){wo[_o++]=oc,wo[_o++]=lc,wo[_o++]=Af,Af=e;var i=oc;e=lc;var n=32-vl(i)-1;i&=~(1<<n),r+=1;var a=32-vl(t)+n;if(30<a){var s=n-n%5;a=(i&(1<<s)-1).toString(32),i>>=s,n-=s,oc=1<<32-vl(t)+n|r<<n|i,lc=a+e}else oc=1<<a|r<<n|i,lc=e}function bO(e){e.return!==null&&(Id(e,1),y8(e,1,0))}function wO(e){for(;e===h_;)h_=wm[--_m],wm[_m]=null,d_=wm[--_m],wm[_m]=null;for(;e===Af;)Af=wo[--_o],wo[_o]=null,lc=wo[--_o],wo[_o]=null,oc=wo[--_o],wo[_o]=null}var Zs=null,$s=null,yi=!1,ll=null;function x8(e,t){var r=To(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function NB(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Zs=e,$s=Rh(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Zs=e,$s=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Af!==null?{id:oc,overflow:lc}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=To(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Zs=e,$s=null,!0):!1;default:return!1}}function ZT(e){return(e.mode&1)!==0&&(e.flags&128)===0}function JT(e){if(yi){var t=$s;if(t){var r=t;if(!NB(e,t)){if(ZT(e))throw Error(He(418));t=Rh(r.nextSibling);var i=Zs;t&&NB(e,t)?x8(i,r):(e.flags=e.flags&-4097|2,yi=!1,Zs=e)}}else{if(ZT(e))throw Error(He(418));e.flags=e.flags&-4097|2,yi=!1,Zs=e}}}function zB(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Zs=e}function Cx(e){if(e!==Zs)return!1;if(!yi)return zB(e),yi=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!qT(e.type,e.memoizedProps)),t&&(t=$s)){if(ZT(e))throw b8(),Error(He(418));for(;t;)x8(e,t),t=Rh(t.nextSibling)}if(zB(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(He(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){$s=Rh(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}$s=null}}else $s=Zs?Rh(e.stateNode.nextSibling):null;return!0}function b8(){for(var e=$s;e;)e=Rh(e.nextSibling)}function xg(){$s=Zs=null,yi=!1}function _O(e){ll===null?ll=[e]:ll.push(e)}var ute=Rc.ReactCurrentBatchConfig;function sl(e,t){if(e&&e.defaultProps){t=Ci({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}var f_=od(null),p_=null,Sm=null,SO=null;function EO(){SO=Sm=p_=null}function MO(e){var t=f_.current;gi(f_),e._currentValue=t}function eP(e,t,r){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===r)break;e=e.return}}function Hm(e,t){p_=e,SO=Sm=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ms=!0),e.firstContext=null)}function No(e){var t=e._currentValue;if(SO!==e)if(e={context:e,memoizedValue:t,next:null},Sm===null){if(p_===null)throw Error(He(308));Sm=e,p_.dependencies={lanes:0,firstContext:e}}else Sm=Sm.next=e;return t}var Kd=null;function CO(e){Kd===null?Kd=[e]:Kd.push(e)}function w8(e,t,r,i){var n=t.interleaved;return n===null?(r.next=r,CO(t)):(r.next=n.next,n.next=r),t.interleaved=r,Sc(e,i)}function Sc(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var ah=!1;function AO(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _8(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function fc(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function kh(e,t,r){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,Tr&2){var n=i.pending;return n===null?t.next=t:(t.next=n.next,n.next=t),i.pending=t,Sc(e,r)}return n=i.interleaved,n===null?(t.next=t,CO(i)):(t.next=n.next,n.next=t),i.interleaved=t,Sc(e,r)}function xw(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,dO(e,r)}}function FB(e,t){var r=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,r===i)){var n=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var s={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?n=a=s:a=a.next=s,r=r.next}while(r!==null);a===null?n=a=t:a=a.next=t}else n=a=t;r={baseState:i.baseState,firstBaseUpdate:n,lastBaseUpdate:a,shared:i.shared,effects:i.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function m_(e,t,r,i){var n=e.updateQueue;ah=!1;var a=n.firstBaseUpdate,s=n.lastBaseUpdate,o=n.shared.pending;if(o!==null){n.shared.pending=null;var l=o,u=l.next;l.next=null,s===null?a=u:s.next=u,s=l;var h=e.alternate;h!==null&&(h=h.updateQueue,o=h.lastBaseUpdate,o!==s&&(o===null?h.firstBaseUpdate=u:o.next=u,h.lastBaseUpdate=l))}if(a!==null){var c=n.baseState;s=0,h=u=l=null,o=a;do{var d=o.lane,f=o.eventTime;if((i&d)===d){h!==null&&(h=h.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=e,p=o;switch(d=t,f=r,p.tag){case 1:if(m=p.payload,typeof m=="function"){c=m.call(f,c,d);break e}c=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=p.payload,d=typeof m=="function"?m.call(f,c,d):m,d==null)break e;c=Ci({},c,d);break e;case 2:ah=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,d=n.effects,d===null?n.effects=[o]:d.push(o))}else f={eventTime:f,lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},h===null?(u=h=f,l=c):h=h.next=f,s|=d;if(o=o.next,o===null){if(o=n.shared.pending,o===null)break;d=o,o=d.next,d.next=null,n.lastBaseUpdate=d,n.shared.pending=null}}while(1);if(h===null&&(l=c),n.baseState=l,n.firstBaseUpdate=u,n.lastBaseUpdate=h,t=n.shared.interleaved,t!==null){n=t;do s|=n.lane,n=n.next;while(n!==t)}else a===null&&(n.shared.lanes=0);Pf|=s,e.lanes=s,e.memoizedState=c}}function UB(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],n=i.callback;if(n!==null){if(i.callback=null,i=r,typeof n!="function")throw Error(He(191,n));n.call(i)}}}var S8=new wV.Component().refs;function tP(e,t,r,i){t=e.memoizedState,r=r(i,t),r=r==null?t:Ci({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var g2={isMounted:function(e){return(e=e._reactInternals)?$f(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var i=Ka(),n=Bh(e),a=fc(i,n);a.payload=t,r!=null&&(a.callback=r),t=kh(e,a,n),t!==null&&(yl(t,e,n,i),xw(t,e,n))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var i=Ka(),n=Bh(e),a=fc(i,n);a.tag=1,a.payload=t,r!=null&&(a.callback=r),t=kh(e,a,n),t!==null&&(yl(t,e,n,i),xw(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Ka(),i=Bh(e),n=fc(r,i);n.tag=2,t!=null&&(n.callback=t),t=kh(e,n,i),t!==null&&(yl(t,e,i,r),xw(t,e,i))}};function jB(e,t,r,i,n,a,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,a,s):t.prototype&&t.prototype.isPureReactComponent?!Ny(r,i)||!Ny(n,a):!0}function E8(e,t,r){var i=!1,n=Qh,a=t.contextType;return typeof a=="object"&&a!==null?a=No(a):(n=ws(t)?Cf:Sa.current,i=t.contextTypes,a=(i=i!=null)?yg(e,n):Qh),t=new t(r,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=g2,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=a),t}function VB(e,t,r,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,i),t.state!==e&&g2.enqueueReplaceState(t,t.state,null)}function rP(e,t,r,i){var n=e.stateNode;n.props=r,n.state=e.memoizedState,n.refs=S8,AO(e);var a=t.contextType;typeof a=="object"&&a!==null?n.context=No(a):(a=ws(t)?Cf:Sa.current,n.context=yg(e,a)),n.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(tP(e,t,a,r),n.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(t=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),t!==n.state&&g2.enqueueReplaceState(n,n.state,null),m_(e,r,n,i),n.state=e.memoizedState),typeof n.componentDidMount=="function"&&(e.flags|=4194308)}function Bv(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(He(309));var i=r.stateNode}if(!i)throw Error(He(147,e));var n=i,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(s){var o=n.refs;o===S8&&(o=n.refs={}),s===null?delete o[a]:o[a]=s},t._stringRef=a,t)}if(typeof e!="string")throw Error(He(284));if(!r._owner)throw Error(He(290,e))}return e}function Ax(e,t){throw e=Object.prototype.toString.call(t),Error(He(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function HB(e){var t=e._init;return t(e._payload)}function M8(e){function t(v,y){if(e){var x=v.deletions;x===null?(v.deletions=[y],v.flags|=16):x.push(y)}}function r(v,y){if(!e)return null;for(;y!==null;)t(v,y),y=y.sibling;return null}function i(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function n(v,y){return v=Nh(v,y),v.index=0,v.sibling=null,v}function a(v,y,x){return v.index=x,e?(x=v.alternate,x!==null?(x=x.index,x<y?(v.flags|=2,y):x):(v.flags|=2,y)):(v.flags|=1048576,y)}function s(v){return e&&v.alternate===null&&(v.flags|=2),v}function o(v,y,x,b){return y===null||y.tag!==6?(y=YM(x,v.mode,b),y.return=v,y):(y=n(y,x),y.return=v,y)}function l(v,y,x,b){var _=x.type;return _===mm?h(v,y,x.props.children,b,x.key):y!==null&&(y.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===nh&&HB(_)===y.type)?(b=n(y,x.props),b.ref=Bv(v,y,x),b.return=v,b):(b=Mw(x.type,x.key,x.props,null,v.mode,b),b.ref=Bv(v,y,x),b.return=v,b)}function u(v,y,x,b){return y===null||y.tag!==4||y.stateNode.containerInfo!==x.containerInfo||y.stateNode.implementation!==x.implementation?(y=qM(x,v.mode,b),y.return=v,y):(y=n(y,x.children||[]),y.return=v,y)}function h(v,y,x,b,_){return y===null||y.tag!==7?(y=cf(x,v.mode,b,_),y.return=v,y):(y=n(y,x),y.return=v,y)}function c(v,y,x){if(typeof y=="string"&&y!==""||typeof y=="number")return y=YM(""+y,v.mode,x),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case gx:return x=Mw(y.type,y.key,y.props,null,v.mode,x),x.ref=Bv(v,null,y),x.return=v,x;case pm:return y=qM(y,v.mode,x),y.return=v,y;case nh:var b=y._init;return c(v,b(y._payload),x)}if(T0(y)||Ov(y))return y=cf(y,v.mode,x,null),y.return=v,y;Ax(v,y)}return null}function d(v,y,x,b){var _=y!==null?y.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return _!==null?null:o(v,y,""+x,b);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case gx:return x.key===_?l(v,y,x,b):null;case pm:return x.key===_?u(v,y,x,b):null;case nh:return _=x._init,d(v,y,_(x._payload),b)}if(T0(x)||Ov(x))return _!==null?null:h(v,y,x,b,null);Ax(v,x)}return null}function f(v,y,x,b,_){if(typeof b=="string"&&b!==""||typeof b=="number")return v=v.get(x)||null,o(y,v,""+b,_);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case gx:return v=v.get(b.key===null?x:b.key)||null,l(y,v,b,_);case pm:return v=v.get(b.key===null?x:b.key)||null,u(y,v,b,_);case nh:var w=b._init;return f(v,y,x,w(b._payload),_)}if(T0(b)||Ov(b))return v=v.get(x)||null,h(y,v,b,_,null);Ax(y,b)}return null}function m(v,y,x,b){for(var _=null,w=null,E=y,S=y=0,C=null;E!==null&&S<x.length;S++){E.index>S?(C=E,E=null):C=E.sibling;var M=d(v,E,x[S],b);if(M===null){E===null&&(E=C);break}e&&E&&M.alternate===null&&t(v,E),y=a(M,y,S),w===null?_=M:w.sibling=M,w=M,E=C}if(S===x.length)return r(v,E),yi&&Id(v,S),_;if(E===null){for(;S<x.length;S++)E=c(v,x[S],b),E!==null&&(y=a(E,y,S),w===null?_=E:w.sibling=E,w=E);return yi&&Id(v,S),_}for(E=i(v,E);S<x.length;S++)C=f(E,v,S,x[S],b),C!==null&&(e&&C.alternate!==null&&E.delete(C.key===null?S:C.key),y=a(C,y,S),w===null?_=C:w.sibling=C,w=C);return e&&E.forEach(function(P){return t(v,P)}),yi&&Id(v,S),_}function p(v,y,x,b){var _=Ov(x);if(typeof _!="function")throw Error(He(150));if(x=_.call(x),x==null)throw Error(He(151));for(var w=_=null,E=y,S=y=0,C=null,M=x.next();E!==null&&!M.done;S++,M=x.next()){E.index>S?(C=E,E=null):C=E.sibling;var P=d(v,E,M.value,b);if(P===null){E===null&&(E=C);break}e&&E&&P.alternate===null&&t(v,E),y=a(P,y,S),w===null?_=P:w.sibling=P,w=P,E=C}if(M.done)return r(v,E),yi&&Id(v,S),_;if(E===null){for(;!M.done;S++,M=x.next())M=c(v,M.value,b),M!==null&&(y=a(M,y,S),w===null?_=M:w.sibling=M,w=M);return yi&&Id(v,S),_}for(E=i(v,E);!M.done;S++,M=x.next())M=f(E,v,S,M.value,b),M!==null&&(e&&M.alternate!==null&&E.delete(M.key===null?S:M.key),y=a(M,y,S),w===null?_=M:w.sibling=M,w=M);return e&&E.forEach(function(I){return t(v,I)}),yi&&Id(v,S),_}function g(v,y,x,b){if(typeof x=="object"&&x!==null&&x.type===mm&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case gx:e:{for(var _=x.key,w=y;w!==null;){if(w.key===_){if(_=x.type,_===mm){if(w.tag===7){r(v,w.sibling),y=n(w,x.props.children),y.return=v,v=y;break e}}else if(w.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===nh&&HB(_)===w.type){r(v,w.sibling),y=n(w,x.props),y.ref=Bv(v,w,x),y.return=v,v=y;break e}r(v,w);break}else t(v,w);w=w.sibling}x.type===mm?(y=cf(x.props.children,v.mode,b,x.key),y.return=v,v=y):(b=Mw(x.type,x.key,x.props,null,v.mode,b),b.ref=Bv(v,y,x),b.return=v,v=b)}return s(v);case pm:e:{for(w=x.key;y!==null;){if(y.key===w)if(y.tag===4&&y.stateNode.containerInfo===x.containerInfo&&y.stateNode.implementation===x.implementation){r(v,y.sibling),y=n(y,x.children||[]),y.return=v,v=y;break e}else{r(v,y);break}else t(v,y);y=y.sibling}y=qM(x,v.mode,b),y.return=v,v=y}return s(v);case nh:return w=x._init,g(v,y,w(x._payload),b)}if(T0(x))return m(v,y,x,b);if(Ov(x))return p(v,y,x,b);Ax(v,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,y!==null&&y.tag===6?(r(v,y.sibling),y=n(y,x),y.return=v,v=y):(r(v,y),y=YM(x,v.mode,b),y.return=v,v=y),s(v)):r(v,y)}return g}var bg=M8(!0),C8=M8(!1),k1={},mu=od(k1),jy=od(k1),Vy=od(k1);function Zd(e){if(e===k1)throw Error(He(174));return e}function TO(e,t){switch(di(Vy,t),di(jy,e),di(mu,k1),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:kT(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=kT(t,e)}gi(mu),di(mu,t)}function wg(){gi(mu),gi(jy),gi(Vy)}function A8(e){Zd(Vy.current);var t=Zd(mu.current),r=kT(t,e.type);t!==r&&(di(jy,e),di(mu,r))}function PO(e){jy.current===e&&(gi(mu),gi(jy))}var bi=od(0);function g_(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var jM=[];function DO(){for(var e=0;e<jM.length;e++)jM[e]._workInProgressVersionPrimary=null;jM.length=0}var bw=Rc.ReactCurrentDispatcher,VM=Rc.ReactCurrentBatchConfig,Tf=0,Mi=null,wn=null,Fn=null,v_=!1,J0=!1,Hy=0,cte=0;function ua(){throw Error(He(321))}function OO(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Sl(e[r],t[r]))return!1;return!0}function IO(e,t,r,i,n,a){if(Tf=a,Mi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,bw.current=e===null||e.memoizedState===null?pte:mte,e=r(i,n),J0){a=0;do{if(J0=!1,Hy=0,25<=a)throw Error(He(301));a+=1,Fn=wn=null,t.updateQueue=null,bw.current=gte,e=r(i,n)}while(J0)}if(bw.current=y_,t=wn!==null&&wn.next!==null,Tf=0,Fn=wn=Mi=null,v_=!1,t)throw Error(He(300));return e}function RO(){var e=Hy!==0;return Hy=0,e}function Gl(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fn===null?Mi.memoizedState=Fn=e:Fn=Fn.next=e,Fn}function zo(){if(wn===null){var e=Mi.alternate;e=e!==null?e.memoizedState:null}else e=wn.next;var t=Fn===null?Mi.memoizedState:Fn.next;if(t!==null)Fn=t,wn=e;else{if(e===null)throw Error(He(310));wn=e,e={memoizedState:wn.memoizedState,baseState:wn.baseState,baseQueue:wn.baseQueue,queue:wn.queue,next:null},Fn===null?Mi.memoizedState=Fn=e:Fn=Fn.next=e}return Fn}function Gy(e,t){return typeof t=="function"?t(e):t}function HM(e){var t=zo(),r=t.queue;if(r===null)throw Error(He(311));r.lastRenderedReducer=e;var i=wn,n=i.baseQueue,a=r.pending;if(a!==null){if(n!==null){var s=n.next;n.next=a.next,a.next=s}i.baseQueue=n=a,r.pending=null}if(n!==null){a=n.next,i=i.baseState;var o=s=null,l=null,u=a;do{var h=u.lane;if((Tf&h)===h)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:e(i,u.action);else{var c={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(o=l=c,s=i):l=l.next=c,Mi.lanes|=h,Pf|=h}u=u.next}while(u!==null&&u!==a);l===null?s=i:l.next=o,Sl(i,t.memoizedState)||(ms=!0),t.memoizedState=i,t.baseState=s,t.baseQueue=l,r.lastRenderedState=i}if(e=r.interleaved,e!==null){n=e;do a=n.lane,Mi.lanes|=a,Pf|=a,n=n.next;while(n!==e)}else n===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function GM(e){var t=zo(),r=t.queue;if(r===null)throw Error(He(311));r.lastRenderedReducer=e;var i=r.dispatch,n=r.pending,a=t.memoizedState;if(n!==null){r.pending=null;var s=n=n.next;do a=e(a,s.action),s=s.next;while(s!==n);Sl(a,t.memoizedState)||(ms=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),r.lastRenderedState=a}return[a,i]}function T8(){}function P8(e,t){var r=Mi,i=zo(),n=t(),a=!Sl(i.memoizedState,n);if(a&&(i.memoizedState=n,ms=!0),i=i.queue,kO(I8.bind(null,r,i,e),[e]),i.getSnapshot!==t||a||Fn!==null&&Fn.memoizedState.tag&1){if(r.flags|=2048,Wy(9,O8.bind(null,r,i,n,t),void 0,null),Wn===null)throw Error(He(349));Tf&30||D8(r,t,n)}return n}function D8(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Mi.updateQueue,t===null?(t={lastEffect:null,stores:null},Mi.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function O8(e,t,r,i){t.value=r,t.getSnapshot=i,R8(t)&&k8(e)}function I8(e,t,r){return r(function(){R8(t)&&k8(e)})}function R8(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Sl(e,r)}catch{return!0}}function k8(e){var t=Sc(e,1);t!==null&&yl(t,e,1,-1)}function GB(e){var t=Gl();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Gy,lastRenderedState:e},t.queue=e,e=e.dispatch=fte.bind(null,Mi,e),[t.memoizedState,e]}function Wy(e,t,r,i){return e={tag:e,create:t,destroy:r,deps:i,next:null},t=Mi.updateQueue,t===null?(t={lastEffect:null,stores:null},Mi.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(i=r.next,r.next=e,e.next=i,t.lastEffect=e)),e}function L8(){return zo().memoizedState}function ww(e,t,r,i){var n=Gl();Mi.flags|=e,n.memoizedState=Wy(1|t,r,void 0,i===void 0?null:i)}function v2(e,t,r,i){var n=zo();i=i===void 0?null:i;var a=void 0;if(wn!==null){var s=wn.memoizedState;if(a=s.destroy,i!==null&&OO(i,s.deps)){n.memoizedState=Wy(t,r,a,i);return}}Mi.flags|=e,n.memoizedState=Wy(1|t,r,a,i)}function WB(e,t){return ww(8390656,8,e,t)}function kO(e,t){return v2(2048,8,e,t)}function B8(e,t){return v2(4,2,e,t)}function N8(e,t){return v2(4,4,e,t)}function z8(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function F8(e,t,r){return r=r!=null?r.concat([e]):null,v2(4,4,z8.bind(null,t,e),r)}function LO(){}function U8(e,t){var r=zo();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&OO(t,i[1])?i[0]:(r.memoizedState=[e,t],e)}function j8(e,t){var r=zo();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&OO(t,i[1])?i[0]:(e=e(),r.memoizedState=[e,t],e)}function V8(e,t,r){return Tf&21?(Sl(r,t)||(r=WV(),Mi.lanes|=r,Pf|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ms=!0),e.memoizedState=r)}function hte(e,t){var r=qr;qr=r!==0&&4>r?r:4,e(!0);var i=VM.transition;VM.transition={};try{e(!1),t()}finally{qr=r,VM.transition=i}}function H8(){return zo().memoizedState}function dte(e,t,r){var i=Bh(e);if(r={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null},G8(e))W8(t,r);else if(r=w8(e,t,r,i),r!==null){var n=Ka();yl(r,e,i,n),$8(r,t,i)}}function fte(e,t,r){var i=Bh(e),n={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null};if(G8(e))W8(t,n);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var s=t.lastRenderedState,o=a(s,r);if(n.hasEagerState=!0,n.eagerState=o,Sl(o,s)){var l=t.interleaved;l===null?(n.next=n,CO(t)):(n.next=l.next,l.next=n),t.interleaved=n;return}}catch{}finally{}r=w8(e,t,n,i),r!==null&&(n=Ka(),yl(r,e,i,n),$8(r,t,i))}}function G8(e){var t=e.alternate;return e===Mi||t!==null&&t===Mi}function W8(e,t){J0=v_=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function $8(e,t,r){if(r&4194240){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,dO(e,r)}}var y_={readContext:No,useCallback:ua,useContext:ua,useEffect:ua,useImperativeHandle:ua,useInsertionEffect:ua,useLayoutEffect:ua,useMemo:ua,useReducer:ua,useRef:ua,useState:ua,useDebugValue:ua,useDeferredValue:ua,useTransition:ua,useMutableSource:ua,useSyncExternalStore:ua,useId:ua,unstable_isNewReconciler:!1},pte={readContext:No,useCallback:function(e,t){return Gl().memoizedState=[e,t===void 0?null:t],e},useContext:No,useEffect:WB,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,ww(4194308,4,z8.bind(null,t,e),r)},useLayoutEffect:function(e,t){return ww(4194308,4,e,t)},useInsertionEffect:function(e,t){return ww(4,2,e,t)},useMemo:function(e,t){var r=Gl();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var i=Gl();return t=r!==void 0?r(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=dte.bind(null,Mi,e),[i.memoizedState,e]},useRef:function(e){var t=Gl();return e={current:e},t.memoizedState=e},useState:GB,useDebugValue:LO,useDeferredValue:function(e){return Gl().memoizedState=e},useTransition:function(){var e=GB(!1),t=e[0];return e=hte.bind(null,e[1]),Gl().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var i=Mi,n=Gl();if(yi){if(r===void 0)throw Error(He(407));r=r()}else{if(r=t(),Wn===null)throw Error(He(349));Tf&30||D8(i,t,r)}n.memoizedState=r;var a={value:r,getSnapshot:t};return n.queue=a,WB(I8.bind(null,i,a,e),[e]),i.flags|=2048,Wy(9,O8.bind(null,i,a,r,t),void 0,null),r},useId:function(){var e=Gl(),t=Wn.identifierPrefix;if(yi){var r=lc,i=oc;r=(i&~(1<<32-vl(i)-1)).toString(32)+r,t=":"+t+"R"+r,r=Hy++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=cte++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},mte={readContext:No,useCallback:U8,useContext:No,useEffect:kO,useImperativeHandle:F8,useInsertionEffect:B8,useLayoutEffect:N8,useMemo:j8,useReducer:HM,useRef:L8,useState:function(){return HM(Gy)},useDebugValue:LO,useDeferredValue:function(e){var t=zo();return V8(t,wn.memoizedState,e)},useTransition:function(){var e=HM(Gy)[0],t=zo().memoizedState;return[e,t]},useMutableSource:T8,useSyncExternalStore:P8,useId:H8,unstable_isNewReconciler:!1},gte={readContext:No,useCallback:U8,useContext:No,useEffect:kO,useImperativeHandle:F8,useInsertionEffect:B8,useLayoutEffect:N8,useMemo:j8,useReducer:GM,useRef:L8,useState:function(){return GM(Gy)},useDebugValue:LO,useDeferredValue:function(e){var t=zo();return wn===null?t.memoizedState=e:V8(t,wn.memoizedState,e)},useTransition:function(){var e=GM(Gy)[0],t=zo().memoizedState;return[e,t]},useMutableSource:T8,useSyncExternalStore:P8,useId:H8,unstable_isNewReconciler:!1};function _g(e,t){try{var r="",i=t;do r+=GJ(i),i=i.return;while(i);var n=r}catch(a){n=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:n,digest:null}}function WM(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function iP(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var vte=typeof WeakMap=="function"?WeakMap:Map;function Y8(e,t,r){r=fc(-1,r),r.tag=3,r.payload={element:null};var i=t.value;return r.callback=function(){b_||(b_=!0,fP=i),iP(e,t)},r}function q8(e,t,r){r=fc(-1,r),r.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var n=t.value;r.payload=function(){return i(n)},r.callback=function(){iP(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){iP(e,t),typeof i!="function"&&(Lh===null?Lh=new Set([this]):Lh.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),r}function $B(e,t,r){var i=e.pingCache;if(i===null){i=e.pingCache=new vte;var n=new Set;i.set(t,n)}else n=i.get(t),n===void 0&&(n=new Set,i.set(t,n));n.has(r)||(n.add(r),e=Ote.bind(null,e,t,r),t.then(e,e))}function YB(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function qB(e,t,r,i,n){return e.mode&1?(e.flags|=65536,e.lanes=n,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=fc(-1,1),t.tag=2,kh(r,t,1))),r.lanes|=1),e)}var yte=Rc.ReactCurrentOwner,ms=!1;function Ba(e,t,r,i){t.child=e===null?C8(t,null,r,i):bg(t,e.child,r,i)}function XB(e,t,r,i,n){r=r.render;var a=t.ref;return Hm(t,n),i=IO(e,t,r,i,a,n),r=RO(),e!==null&&!ms?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,Ec(e,t,n)):(yi&&r&&bO(t),t.flags|=1,Ba(e,t,i,n),t.child)}function QB(e,t,r,i,n){if(e===null){var a=r.type;return typeof a=="function"&&!HO(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=a,X8(e,t,a,i,n)):(e=Mw(r.type,null,i,t,t.mode,n),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&n)){var s=a.memoizedProps;if(r=r.compare,r=r!==null?r:Ny,r(s,i)&&e.ref===t.ref)return Ec(e,t,n)}return t.flags|=1,e=Nh(a,i),e.ref=t.ref,e.return=t,t.child=e}function X8(e,t,r,i,n){if(e!==null){var a=e.memoizedProps;if(Ny(a,i)&&e.ref===t.ref)if(ms=!1,t.pendingProps=i=a,(e.lanes&n)!==0)e.flags&131072&&(ms=!0);else return t.lanes=e.lanes,Ec(e,t,n)}return nP(e,t,r,i,n)}function Q8(e,t,r){var i=t.pendingProps,n=i.children,a=e!==null?e.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},di(Mm,zs),zs|=r;else{if(!(r&1073741824))return e=a!==null?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,di(Mm,zs),zs|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=a!==null?a.baseLanes:r,di(Mm,zs),zs|=i}else a!==null?(i=a.baseLanes|r,t.memoizedState=null):i=r,di(Mm,zs),zs|=i;return Ba(e,t,n,r),t.child}function K8(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function nP(e,t,r,i,n){var a=ws(r)?Cf:Sa.current;return a=yg(t,a),Hm(t,n),r=IO(e,t,r,i,a,n),i=RO(),e!==null&&!ms?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,Ec(e,t,n)):(yi&&i&&bO(t),t.flags|=1,Ba(e,t,r,n),t.child)}function KB(e,t,r,i,n){if(ws(r)){var a=!0;c_(t)}else a=!1;if(Hm(t,n),t.stateNode===null)_w(e,t),E8(t,r,i),rP(t,r,i,n),i=!0;else if(e===null){var s=t.stateNode,o=t.memoizedProps;s.props=o;var l=s.context,u=r.contextType;typeof u=="object"&&u!==null?u=No(u):(u=ws(r)?Cf:Sa.current,u=yg(t,u));var h=r.getDerivedStateFromProps,c=typeof h=="function"||typeof s.getSnapshotBeforeUpdate=="function";c||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==i||l!==u)&&VB(t,s,i,u),ah=!1;var d=t.memoizedState;s.state=d,m_(t,i,s,n),l=t.memoizedState,o!==i||d!==l||bs.current||ah?(typeof h=="function"&&(tP(t,r,h,i),l=t.memoizedState),(o=ah||jB(t,r,o,i,d,l,u))?(c||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),s.props=i,s.state=l,s.context=u,i=o):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{s=t.stateNode,_8(e,t),o=t.memoizedProps,u=t.type===t.elementType?o:sl(t.type,o),s.props=u,c=t.pendingProps,d=s.context,l=r.contextType,typeof l=="object"&&l!==null?l=No(l):(l=ws(r)?Cf:Sa.current,l=yg(t,l));var f=r.getDerivedStateFromProps;(h=typeof f=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==c||d!==l)&&VB(t,s,i,l),ah=!1,d=t.memoizedState,s.state=d,m_(t,i,s,n);var m=t.memoizedState;o!==c||d!==m||bs.current||ah?(typeof f=="function"&&(tP(t,r,f,i),m=t.memoizedState),(u=ah||jB(t,r,u,i,d,m,l)||!1)?(h||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(i,m,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(i,m,l)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=m),s.props=i,s.state=m,s.context=l,i=u):(typeof s.componentDidUpdate!="function"||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),i=!1)}return aP(e,t,r,i,a,n)}function aP(e,t,r,i,n,a){K8(e,t);var s=(t.flags&128)!==0;if(!i&&!s)return n&&BB(t,r,!1),Ec(e,t,a);i=t.stateNode,yte.current=t;var o=s&&typeof r.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&s?(t.child=bg(t,e.child,null,a),t.child=bg(t,null,o,a)):Ba(e,t,o,a),t.memoizedState=i.state,n&&BB(t,r,!0),t.child}function Z8(e){var t=e.stateNode;t.pendingContext?LB(e,t.pendingContext,t.pendingContext!==t.context):t.context&&LB(e,t.context,!1),TO(e,t.containerInfo)}function ZB(e,t,r,i,n){return xg(),_O(n),t.flags|=256,Ba(e,t,r,i),t.child}var sP={dehydrated:null,treeContext:null,retryLane:0};function oP(e){return{baseLanes:e,cachePool:null,transitions:null}}function J8(e,t,r){var i=t.pendingProps,n=bi.current,a=!1,s=(t.flags&128)!==0,o;if((o=s)||(o=e!==null&&e.memoizedState===null?!1:(n&2)!==0),o?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(n|=1),di(bi,n&1),e===null)return JT(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=i.children,e=i.fallback,a?(i=t.mode,a=t.child,s={mode:"hidden",children:s},!(i&1)&&a!==null?(a.childLanes=0,a.pendingProps=s):a=b2(s,i,0,null),e=cf(e,i,r,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=oP(r),t.memoizedState=sP,e):BO(t,s));if(n=e.memoizedState,n!==null&&(o=n.dehydrated,o!==null))return xte(e,t,s,i,o,n,r);if(a){a=i.fallback,s=t.mode,n=e.child,o=n.sibling;var l={mode:"hidden",children:i.children};return!(s&1)&&t.child!==n?(i=t.child,i.childLanes=0,i.pendingProps=l,t.deletions=null):(i=Nh(n,l),i.subtreeFlags=n.subtreeFlags&14680064),o!==null?a=Nh(o,a):(a=cf(a,s,r,null),a.flags|=2),a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,s=e.child.memoizedState,s=s===null?oP(r):{baseLanes:s.baseLanes|r,cachePool:null,transitions:s.transitions},a.memoizedState=s,a.childLanes=e.childLanes&~r,t.memoizedState=sP,i}return a=e.child,e=a.sibling,i=Nh(a,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=r),i.return=t,i.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=i,t.memoizedState=null,i}function BO(e,t){return t=b2({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Tx(e,t,r,i){return i!==null&&_O(i),bg(t,e.child,null,r),e=BO(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function xte(e,t,r,i,n,a,s){if(r)return t.flags&256?(t.flags&=-257,i=WM(Error(He(422))),Tx(e,t,s,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=i.fallback,n=t.mode,i=b2({mode:"visible",children:i.children},n,0,null),a=cf(a,n,s,null),a.flags|=2,i.return=t,a.return=t,i.sibling=a,t.child=i,t.mode&1&&bg(t,e.child,null,s),t.child.memoizedState=oP(s),t.memoizedState=sP,a);if(!(t.mode&1))return Tx(e,t,s,null);if(n.data==="$!"){if(i=n.nextSibling&&n.nextSibling.dataset,i)var o=i.dgst;return i=o,a=Error(He(419)),i=WM(a,i,void 0),Tx(e,t,s,i)}if(o=(s&e.childLanes)!==0,ms||o){if(i=Wn,i!==null){switch(s&-s){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(i.suspendedLanes|s)?0:n,n!==0&&n!==a.retryLane&&(a.retryLane=n,Sc(e,n),yl(i,e,n,-1))}return VO(),i=WM(Error(He(421))),Tx(e,t,s,i)}return n.data==="$?"?(t.flags|=128,t.child=e.child,t=Ite.bind(null,e),n._reactRetry=t,null):(e=a.treeContext,$s=Rh(n.nextSibling),Zs=t,yi=!0,ll=null,e!==null&&(wo[_o++]=oc,wo[_o++]=lc,wo[_o++]=Af,oc=e.id,lc=e.overflow,Af=t),t=BO(t,i.children),t.flags|=4096,t)}function JB(e,t,r){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),eP(e.return,t,r)}function $M(e,t,r,i,n){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:n}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=i,a.tail=r,a.tailMode=n)}function eH(e,t,r){var i=t.pendingProps,n=i.revealOrder,a=i.tail;if(Ba(e,t,i.children,r),i=bi.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&JB(e,r,t);else if(e.tag===19)JB(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(di(bi,i),!(t.mode&1))t.memoizedState=null;else switch(n){case"forwards":for(r=t.child,n=null;r!==null;)e=r.alternate,e!==null&&g_(e)===null&&(n=r),r=r.sibling;r=n,r===null?(n=t.child,t.child=null):(n=r.sibling,r.sibling=null),$M(t,!1,n,r,a);break;case"backwards":for(r=null,n=t.child,t.child=null;n!==null;){if(e=n.alternate,e!==null&&g_(e)===null){t.child=n;break}e=n.sibling,n.sibling=r,r=n,n=e}$M(t,!0,r,null,a);break;case"together":$M(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function _w(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ec(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Pf|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(He(153));if(t.child!==null){for(e=t.child,r=Nh(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Nh(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function bte(e,t,r){switch(t.tag){case 3:Z8(t),xg();break;case 5:A8(t);break;case 1:ws(t.type)&&c_(t);break;case 4:TO(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,n=t.memoizedProps.value;di(f_,i._currentValue),i._currentValue=n;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(di(bi,bi.current&1),t.flags|=128,null):r&t.child.childLanes?J8(e,t,r):(di(bi,bi.current&1),e=Ec(e,t,r),e!==null?e.sibling:null);di(bi,bi.current&1);break;case 19:if(i=(r&t.childLanes)!==0,e.flags&128){if(i)return eH(e,t,r);t.flags|=128}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),di(bi,bi.current),i)break;return null;case 22:case 23:return t.lanes=0,Q8(e,t,r)}return Ec(e,t,r)}var tH,lP,rH,iH;tH=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};lP=function(){};rH=function(e,t,r,i){var n=e.memoizedProps;if(n!==i){e=t.stateNode,Zd(mu.current);var a=null;switch(r){case"input":n=DT(e,n),i=DT(e,i),a=[];break;case"select":n=Ci({},n,{value:void 0}),i=Ci({},i,{value:void 0}),a=[];break;case"textarea":n=RT(e,n),i=RT(e,i),a=[];break;default:typeof n.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=l_)}LT(r,i);var s;r=null;for(u in n)if(!i.hasOwnProperty(u)&&n.hasOwnProperty(u)&&n[u]!=null)if(u==="style"){var o=n[u];for(s in o)o.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Dy.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in i){var l=i[u];if(o=n!=null?n[u]:void 0,i.hasOwnProperty(u)&&l!==o&&(l!=null||o!=null))if(u==="style")if(o){for(s in o)!o.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in l)l.hasOwnProperty(s)&&o[s]!==l[s]&&(r||(r={}),r[s]=l[s])}else r||(a||(a=[]),a.push(u,r)),r=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(a=a||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(a=a||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Dy.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&fi("scroll",e),a||o===l||(a=[])):(a=a||[]).push(u,l))}r&&(a=a||[]).push("style",r);var u=a;(t.updateQueue=u)&&(t.flags|=4)}};iH=function(e,t,r,i){r!==i&&(t.flags|=4)};function Nv(e,t){if(!yi)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function ca(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,i=0;if(t)for(var n=e.child;n!==null;)r|=n.lanes|n.childLanes,i|=n.subtreeFlags&14680064,i|=n.flags&14680064,n.return=e,n=n.sibling;else for(n=e.child;n!==null;)r|=n.lanes|n.childLanes,i|=n.subtreeFlags,i|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=i,e.childLanes=r,t}function wte(e,t,r){var i=t.pendingProps;switch(wO(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ca(t),null;case 1:return ws(t.type)&&u_(),ca(t),null;case 3:return i=t.stateNode,wg(),gi(bs),gi(Sa),DO(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(Cx(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ll!==null&&(gP(ll),ll=null))),lP(e,t),ca(t),null;case 5:PO(t);var n=Zd(Vy.current);if(r=t.type,e!==null&&t.stateNode!=null)rH(e,t,r,i,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(He(166));return ca(t),null}if(e=Zd(mu.current),Cx(t)){i=t.stateNode,r=t.type;var a=t.memoizedProps;switch(i[eu]=t,i[Uy]=a,e=(t.mode&1)!==0,r){case"dialog":fi("cancel",i),fi("close",i);break;case"iframe":case"object":case"embed":fi("load",i);break;case"video":case"audio":for(n=0;n<D0.length;n++)fi(D0[n],i);break;case"source":fi("error",i);break;case"img":case"image":case"link":fi("error",i),fi("load",i);break;case"details":fi("toggle",i);break;case"input":lB(i,a),fi("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!a.multiple},fi("invalid",i);break;case"textarea":cB(i,a),fi("invalid",i)}LT(r,a),n=null;for(var s in a)if(a.hasOwnProperty(s)){var o=a[s];s==="children"?typeof o=="string"?i.textContent!==o&&(a.suppressHydrationWarning!==!0&&Mx(i.textContent,o,e),n=["children",o]):typeof o=="number"&&i.textContent!==""+o&&(a.suppressHydrationWarning!==!0&&Mx(i.textContent,o,e),n=["children",""+o]):Dy.hasOwnProperty(s)&&o!=null&&s==="onScroll"&&fi("scroll",i)}switch(r){case"input":vx(i),uB(i,a,!0);break;case"textarea":vx(i),hB(i);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(i.onclick=l_)}i=n,t.updateQueue=i,i!==null&&(t.flags|=4)}else{s=n.nodeType===9?n:n.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=DV(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=s.createElement(r,{is:i.is}):(e=s.createElement(r),r==="select"&&(s=e,i.multiple?s.multiple=!0:i.size&&(s.size=i.size))):e=s.createElementNS(e,r),e[eu]=t,e[Uy]=i,tH(e,t,!1,!1),t.stateNode=e;e:{switch(s=BT(r,i),r){case"dialog":fi("cancel",e),fi("close",e),n=i;break;case"iframe":case"object":case"embed":fi("load",e),n=i;break;case"video":case"audio":for(n=0;n<D0.length;n++)fi(D0[n],e);n=i;break;case"source":fi("error",e),n=i;break;case"img":case"image":case"link":fi("error",e),fi("load",e),n=i;break;case"details":fi("toggle",e),n=i;break;case"input":lB(e,i),n=DT(e,i),fi("invalid",e);break;case"option":n=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},n=Ci({},i,{value:void 0}),fi("invalid",e);break;case"textarea":cB(e,i),n=RT(e,i),fi("invalid",e);break;default:n=i}LT(r,n),o=n;for(a in o)if(o.hasOwnProperty(a)){var l=o[a];a==="style"?RV(e,l):a==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&OV(e,l)):a==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&Oy(e,l):typeof l=="number"&&Oy(e,""+l):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Dy.hasOwnProperty(a)?l!=null&&a==="onScroll"&&fi("scroll",e):l!=null&&sO(e,a,l,s))}switch(r){case"input":vx(e),uB(e,i,!1);break;case"textarea":vx(e),hB(e);break;case"option":i.value!=null&&e.setAttribute("value",""+Xh(i.value));break;case"select":e.multiple=!!i.multiple,a=i.value,a!=null?Fm(e,!!i.multiple,a,!1):i.defaultValue!=null&&Fm(e,!!i.multiple,i.defaultValue,!0);break;default:typeof n.onClick=="function"&&(e.onclick=l_)}switch(r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ca(t),null;case 6:if(e&&t.stateNode!=null)iH(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(He(166));if(r=Zd(Vy.current),Zd(mu.current),Cx(t)){if(i=t.stateNode,r=t.memoizedProps,i[eu]=t,(a=i.nodeValue!==r)&&(e=Zs,e!==null))switch(e.tag){case 3:Mx(i.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Mx(i.nodeValue,r,(e.mode&1)!==0)}a&&(t.flags|=4)}else i=(r.nodeType===9?r:r.ownerDocument).createTextNode(i),i[eu]=t,t.stateNode=i}return ca(t),null;case 13:if(gi(bi),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(yi&&$s!==null&&t.mode&1&&!(t.flags&128))b8(),xg(),t.flags|=98560,a=!1;else if(a=Cx(t),i!==null&&i.dehydrated!==null){if(e===null){if(!a)throw Error(He(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(He(317));a[eu]=t}else xg(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ca(t),a=!1}else ll!==null&&(gP(ll),ll=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(e===null||bi.current&1?En===0&&(En=3):VO())),t.updateQueue!==null&&(t.flags|=4),ca(t),null);case 4:return wg(),lP(e,t),e===null&&zy(t.stateNode.containerInfo),ca(t),null;case 10:return MO(t.type._context),ca(t),null;case 17:return ws(t.type)&&u_(),ca(t),null;case 19:if(gi(bi),a=t.memoizedState,a===null)return ca(t),null;if(i=(t.flags&128)!==0,s=a.rendering,s===null)if(i)Nv(a,!1);else{if(En!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=g_(e),s!==null){for(t.flags|=128,Nv(a,!1),i=s.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=r,r=t.child;r!==null;)a=r,e=i,a.flags&=14680066,s=a.alternate,s===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,a.type=s.type,e=s.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return di(bi,bi.current&1|2),t.child}e=e.sibling}a.tail!==null&&Wi()>Sg&&(t.flags|=128,i=!0,Nv(a,!1),t.lanes=4194304)}else{if(!i)if(e=g_(s),e!==null){if(t.flags|=128,i=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Nv(a,!0),a.tail===null&&a.tailMode==="hidden"&&!s.alternate&&!yi)return ca(t),null}else 2*Wi()-a.renderingStartTime>Sg&&r!==1073741824&&(t.flags|=128,i=!0,Nv(a,!1),t.lanes=4194304);a.isBackwards?(s.sibling=t.child,t.child=s):(r=a.last,r!==null?r.sibling=s:t.child=s,a.last=s)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Wi(),t.sibling=null,r=bi.current,di(bi,i?r&1|2:r&1),t):(ca(t),null);case 22:case 23:return jO(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?zs&1073741824&&(ca(t),t.subtreeFlags&6&&(t.flags|=8192)):ca(t),null;case 24:return null;case 25:return null}throw Error(He(156,t.tag))}function _te(e,t){switch(wO(t),t.tag){case 1:return ws(t.type)&&u_(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return wg(),gi(bs),gi(Sa),DO(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return PO(t),null;case 13:if(gi(bi),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(He(340));xg()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return gi(bi),null;case 4:return wg(),null;case 10:return MO(t.type._context),null;case 22:case 23:return jO(),null;case 24:return null;default:return null}}var Px=!1,pa=!1,Ste=typeof WeakSet=="function"?WeakSet:Set,ft=null;function Em(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(i){Oi(e,t,i)}else r.current=null}function uP(e,t,r){try{r()}catch(i){Oi(e,t,i)}}var eN=!1;function Ete(e,t){if($T=a_,e=o8(),xO(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var i=r.getSelection&&r.getSelection();if(i&&i.rangeCount!==0){r=i.anchorNode;var n=i.anchorOffset,a=i.focusNode;i=i.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var s=0,o=-1,l=-1,u=0,h=0,c=e,d=null;t:for(;;){for(var f;c!==r||n!==0&&c.nodeType!==3||(o=s+n),c!==a||i!==0&&c.nodeType!==3||(l=s+i),c.nodeType===3&&(s+=c.nodeValue.length),(f=c.firstChild)!==null;)d=c,c=f;for(;;){if(c===e)break t;if(d===r&&++u===n&&(o=s),d===a&&++h===i&&(l=s),(f=c.nextSibling)!==null)break;c=d,d=c.parentNode}c=f}r=o===-1||l===-1?null:{start:o,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(YT={focusedElem:e,selectionRange:r},a_=!1,ft=t;ft!==null;)if(t=ft,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ft=e;else for(;ft!==null;){t=ft;try{var m=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var p=m.memoizedProps,g=m.memoizedState,v=t.stateNode,y=v.getSnapshotBeforeUpdate(t.elementType===t.type?p:sl(t.type,p),g);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(He(163))}}catch(b){Oi(t,t.return,b)}if(e=t.sibling,e!==null){e.return=t.return,ft=e;break}ft=t.return}return m=eN,eN=!1,m}function ey(e,t,r){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var n=i=i.next;do{if((n.tag&e)===e){var a=n.destroy;n.destroy=void 0,a!==void 0&&uP(t,r,a)}n=n.next}while(n!==i)}}function y2(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var i=r.create;r.destroy=i()}r=r.next}while(r!==t)}}function cP(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function nH(e){var t=e.alternate;t!==null&&(e.alternate=null,nH(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[eu],delete t[Uy],delete t[QT],delete t[ste],delete t[ote])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function aH(e){return e.tag===5||e.tag===3||e.tag===4}function tN(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||aH(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function hP(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=l_));else if(i!==4&&(e=e.child,e!==null))for(hP(e,t,r),e=e.sibling;e!==null;)hP(e,t,r),e=e.sibling}function dP(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(dP(e,t,r),e=e.sibling;e!==null;)dP(e,t,r),e=e.sibling}var Jn=null,ol=!1;function jc(e,t,r){for(r=r.child;r!==null;)sH(e,t,r),r=r.sibling}function sH(e,t,r){if(pu&&typeof pu.onCommitFiberUnmount=="function")try{pu.onCommitFiberUnmount(c2,r)}catch{}switch(r.tag){case 5:pa||Em(r,t);case 6:var i=Jn,n=ol;Jn=null,jc(e,t,r),Jn=i,ol=n,Jn!==null&&(ol?(e=Jn,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Jn.removeChild(r.stateNode));break;case 18:Jn!==null&&(ol?(e=Jn,r=r.stateNode,e.nodeType===8?FM(e.parentNode,r):e.nodeType===1&&FM(e,r),Ly(e)):FM(Jn,r.stateNode));break;case 4:i=Jn,n=ol,Jn=r.stateNode.containerInfo,ol=!0,jc(e,t,r),Jn=i,ol=n;break;case 0:case 11:case 14:case 15:if(!pa&&(i=r.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){n=i=i.next;do{var a=n,s=a.destroy;a=a.tag,s!==void 0&&(a&2||a&4)&&uP(r,t,s),n=n.next}while(n!==i)}jc(e,t,r);break;case 1:if(!pa&&(Em(r,t),i=r.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=r.memoizedProps,i.state=r.memoizedState,i.componentWillUnmount()}catch(o){Oi(r,t,o)}jc(e,t,r);break;case 21:jc(e,t,r);break;case 22:r.mode&1?(pa=(i=pa)||r.memoizedState!==null,jc(e,t,r),pa=i):jc(e,t,r);break;default:jc(e,t,r)}}function rN(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Ste),t.forEach(function(i){var n=Rte.bind(null,e,i);r.has(i)||(r.add(i),i.then(n,n))})}}function Yo(e,t){var r=t.deletions;if(r!==null)for(var i=0;i<r.length;i++){var n=r[i];try{var a=e,s=t,o=s;e:for(;o!==null;){switch(o.tag){case 5:Jn=o.stateNode,ol=!1;break e;case 3:Jn=o.stateNode.containerInfo,ol=!0;break e;case 4:Jn=o.stateNode.containerInfo,ol=!0;break e}o=o.return}if(Jn===null)throw Error(He(160));sH(a,s,n),Jn=null,ol=!1;var l=n.alternate;l!==null&&(l.return=null),n.return=null}catch(u){Oi(n,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)oH(t,e),t=t.sibling}function oH(e,t){var r=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Yo(t,e),Ol(e),i&4){try{ey(3,e,e.return),y2(3,e)}catch(p){Oi(e,e.return,p)}try{ey(5,e,e.return)}catch(p){Oi(e,e.return,p)}}break;case 1:Yo(t,e),Ol(e),i&512&&r!==null&&Em(r,r.return);break;case 5:if(Yo(t,e),Ol(e),i&512&&r!==null&&Em(r,r.return),e.flags&32){var n=e.stateNode;try{Oy(n,"")}catch(p){Oi(e,e.return,p)}}if(i&4&&(n=e.stateNode,n!=null)){var a=e.memoizedProps,s=r!==null?r.memoizedProps:a,o=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{o==="input"&&a.type==="radio"&&a.name!=null&&TV(n,a),BT(o,s);var u=BT(o,a);for(s=0;s<l.length;s+=2){var h=l[s],c=l[s+1];h==="style"?RV(n,c):h==="dangerouslySetInnerHTML"?OV(n,c):h==="children"?Oy(n,c):sO(n,h,c,u)}switch(o){case"input":OT(n,a);break;case"textarea":PV(n,a);break;case"select":var d=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!a.multiple;var f=a.value;f!=null?Fm(n,!!a.multiple,f,!1):d!==!!a.multiple&&(a.defaultValue!=null?Fm(n,!!a.multiple,a.defaultValue,!0):Fm(n,!!a.multiple,a.multiple?[]:"",!1))}n[Uy]=a}catch(p){Oi(e,e.return,p)}}break;case 6:if(Yo(t,e),Ol(e),i&4){if(e.stateNode===null)throw Error(He(162));n=e.stateNode,a=e.memoizedProps;try{n.nodeValue=a}catch(p){Oi(e,e.return,p)}}break;case 3:if(Yo(t,e),Ol(e),i&4&&r!==null&&r.memoizedState.isDehydrated)try{Ly(t.containerInfo)}catch(p){Oi(e,e.return,p)}break;case 4:Yo(t,e),Ol(e);break;case 13:Yo(t,e),Ol(e),n=e.child,n.flags&8192&&(a=n.memoizedState!==null,n.stateNode.isHidden=a,!a||n.alternate!==null&&n.alternate.memoizedState!==null||(FO=Wi())),i&4&&rN(e);break;case 22:if(h=r!==null&&r.memoizedState!==null,e.mode&1?(pa=(u=pa)||h,Yo(t,e),pa=u):Yo(t,e),Ol(e),i&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!h&&e.mode&1)for(ft=e,h=e.child;h!==null;){for(c=ft=h;ft!==null;){switch(d=ft,f=d.child,d.tag){case 0:case 11:case 14:case 15:ey(4,d,d.return);break;case 1:Em(d,d.return);var m=d.stateNode;if(typeof m.componentWillUnmount=="function"){i=d,r=d.return;try{t=i,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(p){Oi(i,r,p)}}break;case 5:Em(d,d.return);break;case 22:if(d.memoizedState!==null){nN(c);continue}}f!==null?(f.return=d,ft=f):nN(c)}h=h.sibling}e:for(h=null,c=e;;){if(c.tag===5){if(h===null){h=c;try{n=c.stateNode,u?(a=n.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(o=c.stateNode,l=c.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=IV("display",s))}catch(p){Oi(e,e.return,p)}}}else if(c.tag===6){if(h===null)try{c.stateNode.nodeValue=u?"":c.memoizedProps}catch(p){Oi(e,e.return,p)}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===e)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===e)break e;for(;c.sibling===null;){if(c.return===null||c.return===e)break e;h===c&&(h=null),c=c.return}h===c&&(h=null),c.sibling.return=c.return,c=c.sibling}}break;case 19:Yo(t,e),Ol(e),i&4&&rN(e);break;case 21:break;default:Yo(t,e),Ol(e)}}function Ol(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(aH(r)){var i=r;break e}r=r.return}throw Error(He(160))}switch(i.tag){case 5:var n=i.stateNode;i.flags&32&&(Oy(n,""),i.flags&=-33);var a=tN(e);dP(e,a,n);break;case 3:case 4:var s=i.stateNode.containerInfo,o=tN(e);hP(e,o,s);break;default:throw Error(He(161))}}catch(l){Oi(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Mte(e,t,r){ft=e,lH(e)}function lH(e,t,r){for(var i=(e.mode&1)!==0;ft!==null;){var n=ft,a=n.child;if(n.tag===22&&i){var s=n.memoizedState!==null||Px;if(!s){var o=n.alternate,l=o!==null&&o.memoizedState!==null||pa;o=Px;var u=pa;if(Px=s,(pa=l)&&!u)for(ft=n;ft!==null;)s=ft,l=s.child,s.tag===22&&s.memoizedState!==null?aN(n):l!==null?(l.return=s,ft=l):aN(n);for(;a!==null;)ft=a,lH(a),a=a.sibling;ft=n,Px=o,pa=u}iN(e)}else n.subtreeFlags&8772&&a!==null?(a.return=n,ft=a):iN(e)}}function iN(e){for(;ft!==null;){var t=ft;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:pa||y2(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!pa)if(r===null)i.componentDidMount();else{var n=t.elementType===t.type?r.memoizedProps:sl(t.type,r.memoizedProps);i.componentDidUpdate(n,r.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&UB(t,a,i);break;case 3:var s=t.updateQueue;if(s!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}UB(t,s,r)}break;case 5:var o=t.stateNode;if(r===null&&t.flags&4){r=o;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var c=h.dehydrated;c!==null&&Ly(c)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(He(163))}pa||t.flags&512&&cP(t)}catch(d){Oi(t,t.return,d)}}if(t===e){ft=null;break}if(r=t.sibling,r!==null){r.return=t.return,ft=r;break}ft=t.return}}function nN(e){for(;ft!==null;){var t=ft;if(t===e){ft=null;break}var r=t.sibling;if(r!==null){r.return=t.return,ft=r;break}ft=t.return}}function aN(e){for(;ft!==null;){var t=ft;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{y2(4,t)}catch(l){Oi(t,r,l)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var n=t.return;try{i.componentDidMount()}catch(l){Oi(t,n,l)}}var a=t.return;try{cP(t)}catch(l){Oi(t,a,l)}break;case 5:var s=t.return;try{cP(t)}catch(l){Oi(t,s,l)}}}catch(l){Oi(t,t.return,l)}if(t===e){ft=null;break}var o=t.sibling;if(o!==null){o.return=t.return,ft=o;break}ft=t.return}}var Cte=Math.ceil,x_=Rc.ReactCurrentDispatcher,NO=Rc.ReactCurrentOwner,Io=Rc.ReactCurrentBatchConfig,Tr=0,Wn=null,on=null,na=0,zs=0,Mm=od(0),En=0,$y=null,Pf=0,x2=0,zO=0,ty=null,cs=null,FO=0,Sg=1/0,Qu=null,b_=!1,fP=null,Lh=null,Dx=!1,mh=null,w_=0,ry=0,pP=null,Sw=-1,Ew=0;function Ka(){return Tr&6?Wi():Sw!==-1?Sw:Sw=Wi()}function Bh(e){return e.mode&1?Tr&2&&na!==0?na&-na:ute.transition!==null?(Ew===0&&(Ew=WV()),Ew):(e=qr,e!==0||(e=window.event,e=e===void 0?16:ZV(e.type)),e):1}function yl(e,t,r,i){if(50<ry)throw ry=0,pP=null,Error(He(185));O1(e,r,i),(!(Tr&2)||e!==Wn)&&(e===Wn&&(!(Tr&2)&&(x2|=r),En===4&&lh(e,na)),_s(e,i),r===1&&Tr===0&&!(t.mode&1)&&(Sg=Wi()+500,m2&&ld()))}function _s(e,t){var r=e.callbackNode;uee(e,t);var i=n_(e,e===Wn?na:0);if(i===0)r!==null&&pB(r),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(r!=null&&pB(r),t===1)e.tag===0?lte(sN.bind(null,e)):v8(sN.bind(null,e)),nte(function(){!(Tr&6)&&ld()}),r=null;else{switch($V(i)){case 1:r=hO;break;case 4:r=HV;break;case 16:r=i_;break;case 536870912:r=GV;break;default:r=i_}r=gH(r,uH.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function uH(e,t){if(Sw=-1,Ew=0,Tr&6)throw Error(He(327));var r=e.callbackNode;if(Gm()&&e.callbackNode!==r)return null;var i=n_(e,e===Wn?na:0);if(i===0)return null;if(i&30||i&e.expiredLanes||t)t=__(e,i);else{t=i;var n=Tr;Tr|=2;var a=hH();(Wn!==e||na!==t)&&(Qu=null,Sg=Wi()+500,uf(e,t));do try{Pte();break}catch(o){cH(e,o)}while(1);EO(),x_.current=a,Tr=n,on!==null?t=0:(Wn=null,na=0,t=En)}if(t!==0){if(t===2&&(n=jT(e),n!==0&&(i=n,t=mP(e,n))),t===1)throw r=$y,uf(e,0),lh(e,i),_s(e,Wi()),r;if(t===6)lh(e,i);else{if(n=e.current.alternate,!(i&30)&&!Ate(n)&&(t=__(e,i),t===2&&(a=jT(e),a!==0&&(i=a,t=mP(e,a))),t===1))throw r=$y,uf(e,0),lh(e,i),_s(e,Wi()),r;switch(e.finishedWork=n,e.finishedLanes=i,t){case 0:case 1:throw Error(He(345));case 2:Rd(e,cs,Qu);break;case 3:if(lh(e,i),(i&130023424)===i&&(t=FO+500-Wi(),10<t)){if(n_(e,0)!==0)break;if(n=e.suspendedLanes,(n&i)!==i){Ka(),e.pingedLanes|=e.suspendedLanes&n;break}e.timeoutHandle=XT(Rd.bind(null,e,cs,Qu),t);break}Rd(e,cs,Qu);break;case 4:if(lh(e,i),(i&4194240)===i)break;for(t=e.eventTimes,n=-1;0<i;){var s=31-vl(i);a=1<<s,s=t[s],s>n&&(n=s),i&=~a}if(i=n,i=Wi()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Cte(i/1960))-i,10<i){e.timeoutHandle=XT(Rd.bind(null,e,cs,Qu),i);break}Rd(e,cs,Qu);break;case 5:Rd(e,cs,Qu);break;default:throw Error(He(329))}}}return _s(e,Wi()),e.callbackNode===r?uH.bind(null,e):null}function mP(e,t){var r=ty;return e.current.memoizedState.isDehydrated&&(uf(e,t).flags|=256),e=__(e,t),e!==2&&(t=cs,cs=r,t!==null&&gP(t)),e}function gP(e){cs===null?cs=e:cs.push.apply(cs,e)}function Ate(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var i=0;i<r.length;i++){var n=r[i],a=n.getSnapshot;n=n.value;try{if(!Sl(a(),n))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function lh(e,t){for(t&=~zO,t&=~x2,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-vl(t),i=1<<r;e[r]=-1,t&=~i}}function sN(e){if(Tr&6)throw Error(He(327));Gm();var t=n_(e,0);if(!(t&1))return _s(e,Wi()),null;var r=__(e,t);if(e.tag!==0&&r===2){var i=jT(e);i!==0&&(t=i,r=mP(e,i))}if(r===1)throw r=$y,uf(e,0),lh(e,t),_s(e,Wi()),r;if(r===6)throw Error(He(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Rd(e,cs,Qu),_s(e,Wi()),null}function UO(e,t){var r=Tr;Tr|=1;try{return e(t)}finally{Tr=r,Tr===0&&(Sg=Wi()+500,m2&&ld())}}function Df(e){mh!==null&&mh.tag===0&&!(Tr&6)&&Gm();var t=Tr;Tr|=1;var r=Io.transition,i=qr;try{if(Io.transition=null,qr=1,e)return e()}finally{qr=i,Io.transition=r,Tr=t,!(Tr&6)&&ld()}}function jO(){zs=Mm.current,gi(Mm)}function uf(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,ite(r)),on!==null)for(r=on.return;r!==null;){var i=r;switch(wO(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&u_();break;case 3:wg(),gi(bs),gi(Sa),DO();break;case 5:PO(i);break;case 4:wg();break;case 13:gi(bi);break;case 19:gi(bi);break;case 10:MO(i.type._context);break;case 22:case 23:jO()}r=r.return}if(Wn=e,on=e=Nh(e.current,null),na=zs=t,En=0,$y=null,zO=x2=Pf=0,cs=ty=null,Kd!==null){for(t=0;t<Kd.length;t++)if(r=Kd[t],i=r.interleaved,i!==null){r.interleaved=null;var n=i.next,a=r.pending;if(a!==null){var s=a.next;a.next=n,i.next=s}r.pending=i}Kd=null}return e}function cH(e,t){do{var r=on;try{if(EO(),bw.current=y_,v_){for(var i=Mi.memoizedState;i!==null;){var n=i.queue;n!==null&&(n.pending=null),i=i.next}v_=!1}if(Tf=0,Fn=wn=Mi=null,J0=!1,Hy=0,NO.current=null,r===null||r.return===null){En=1,$y=t,on=null;break}e:{var a=e,s=r.return,o=r,l=t;if(t=na,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,h=o,c=h.tag;if(!(h.mode&1)&&(c===0||c===11||c===15)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var f=YB(s);if(f!==null){f.flags&=-257,qB(f,s,o,a,t),f.mode&1&&$B(a,u,t),t=f,l=u;var m=t.updateQueue;if(m===null){var p=new Set;p.add(l),t.updateQueue=p}else m.add(l);break e}else{if(!(t&1)){$B(a,u,t),VO();break e}l=Error(He(426))}}else if(yi&&o.mode&1){var g=YB(s);if(g!==null){!(g.flags&65536)&&(g.flags|=256),qB(g,s,o,a,t),_O(_g(l,o));break e}}a=l=_g(l,o),En!==4&&(En=2),ty===null?ty=[a]:ty.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var v=Y8(a,l,t);FB(a,v);break e;case 1:o=l;var y=a.type,x=a.stateNode;if(!(a.flags&128)&&(typeof y.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Lh===null||!Lh.has(x)))){a.flags|=65536,t&=-t,a.lanes|=t;var b=q8(a,o,t);FB(a,b);break e}}a=a.return}while(a!==null)}fH(r)}catch(_){t=_,on===r&&r!==null&&(on=r=r.return);continue}break}while(1)}function hH(){var e=x_.current;return x_.current=y_,e===null?y_:e}function VO(){(En===0||En===3||En===2)&&(En=4),Wn===null||!(Pf&268435455)&&!(x2&268435455)||lh(Wn,na)}function __(e,t){var r=Tr;Tr|=2;var i=hH();(Wn!==e||na!==t)&&(Qu=null,uf(e,t));do try{Tte();break}catch(n){cH(e,n)}while(1);if(EO(),Tr=r,x_.current=i,on!==null)throw Error(He(261));return Wn=null,na=0,En}function Tte(){for(;on!==null;)dH(on)}function Pte(){for(;on!==null&&!eee();)dH(on)}function dH(e){var t=mH(e.alternate,e,zs);e.memoizedProps=e.pendingProps,t===null?fH(e):on=t,NO.current=null}function fH(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=_te(r,t),r!==null){r.flags&=32767,on=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{En=6,on=null;return}}else if(r=wte(r,t,zs),r!==null){on=r;return}if(t=t.sibling,t!==null){on=t;return}on=t=e}while(t!==null);En===0&&(En=5)}function Rd(e,t,r){var i=qr,n=Io.transition;try{Io.transition=null,qr=1,Dte(e,t,r,i)}finally{Io.transition=n,qr=i}return null}function Dte(e,t,r,i){do Gm();while(mh!==null);if(Tr&6)throw Error(He(327));r=e.finishedWork;var n=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(He(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(cee(e,a),e===Wn&&(on=Wn=null,na=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Dx||(Dx=!0,gH(i_,function(){return Gm(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=Io.transition,Io.transition=null;var s=qr;qr=1;var o=Tr;Tr|=4,NO.current=null,Ete(e,r),oH(r,e),Qee(YT),a_=!!$T,YT=$T=null,e.current=r,Mte(r),tee(),Tr=o,qr=s,Io.transition=a}else e.current=r;if(Dx&&(Dx=!1,mh=e,w_=n),a=e.pendingLanes,a===0&&(Lh=null),nee(r.stateNode),_s(e,Wi()),t!==null)for(i=e.onRecoverableError,r=0;r<t.length;r++)n=t[r],i(n.value,{componentStack:n.stack,digest:n.digest});if(b_)throw b_=!1,e=fP,fP=null,e;return w_&1&&e.tag!==0&&Gm(),a=e.pendingLanes,a&1?e===pP?ry++:(ry=0,pP=e):ry=0,ld(),null}function Gm(){if(mh!==null){var e=$V(w_),t=Io.transition,r=qr;try{if(Io.transition=null,qr=16>e?16:e,mh===null)var i=!1;else{if(e=mh,mh=null,w_=0,Tr&6)throw Error(He(331));var n=Tr;for(Tr|=4,ft=e.current;ft!==null;){var a=ft,s=a.child;if(ft.flags&16){var o=a.deletions;if(o!==null){for(var l=0;l<o.length;l++){var u=o[l];for(ft=u;ft!==null;){var h=ft;switch(h.tag){case 0:case 11:case 15:ey(8,h,a)}var c=h.child;if(c!==null)c.return=h,ft=c;else for(;ft!==null;){h=ft;var d=h.sibling,f=h.return;if(nH(h),h===u){ft=null;break}if(d!==null){d.return=f,ft=d;break}ft=f}}}var m=a.alternate;if(m!==null){var p=m.child;if(p!==null){m.child=null;do{var g=p.sibling;p.sibling=null,p=g}while(p!==null)}}ft=a}}if(a.subtreeFlags&2064&&s!==null)s.return=a,ft=s;else e:for(;ft!==null;){if(a=ft,a.flags&2048)switch(a.tag){case 0:case 11:case 15:ey(9,a,a.return)}var v=a.sibling;if(v!==null){v.return=a.return,ft=v;break e}ft=a.return}}var y=e.current;for(ft=y;ft!==null;){s=ft;var x=s.child;if(s.subtreeFlags&2064&&x!==null)x.return=s,ft=x;else e:for(s=y;ft!==null;){if(o=ft,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:y2(9,o)}}catch(_){Oi(o,o.return,_)}if(o===s){ft=null;break e}var b=o.sibling;if(b!==null){b.return=o.return,ft=b;break e}ft=o.return}}if(Tr=n,ld(),pu&&typeof pu.onPostCommitFiberRoot=="function")try{pu.onPostCommitFiberRoot(c2,e)}catch{}i=!0}return i}finally{qr=r,Io.transition=t}}return!1}function oN(e,t,r){t=_g(r,t),t=Y8(e,t,1),e=kh(e,t,1),t=Ka(),e!==null&&(O1(e,1,t),_s(e,t))}function Oi(e,t,r){if(e.tag===3)oN(e,e,r);else for(;t!==null;){if(t.tag===3){oN(t,e,r);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Lh===null||!Lh.has(i))){e=_g(r,e),e=q8(t,e,1),t=kh(t,e,1),e=Ka(),t!==null&&(O1(t,1,e),_s(t,e));break}}t=t.return}}function Ote(e,t,r){var i=e.pingCache;i!==null&&i.delete(t),t=Ka(),e.pingedLanes|=e.suspendedLanes&r,Wn===e&&(na&r)===r&&(En===4||En===3&&(na&130023424)===na&&500>Wi()-FO?uf(e,0):zO|=r),_s(e,t)}function pH(e,t){t===0&&(e.mode&1?(t=bx,bx<<=1,!(bx&130023424)&&(bx=4194304)):t=1);var r=Ka();e=Sc(e,t),e!==null&&(O1(e,t,r),_s(e,r))}function Ite(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),pH(e,r)}function Rte(e,t){var r=0;switch(e.tag){case 13:var i=e.stateNode,n=e.memoizedState;n!==null&&(r=n.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(He(314))}i!==null&&i.delete(t),pH(e,r)}var mH;mH=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||bs.current)ms=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return ms=!1,bte(e,t,r);ms=!!(e.flags&131072)}else ms=!1,yi&&t.flags&1048576&&y8(t,d_,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;_w(e,t),e=t.pendingProps;var n=yg(t,Sa.current);Hm(t,r),n=IO(null,t,i,e,n,r);var a=RO();return t.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ws(i)?(a=!0,c_(t)):a=!1,t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,AO(t),n.updater=g2,t.stateNode=n,n._reactInternals=t,rP(t,i,e,r),t=aP(null,t,i,!0,a,r)):(t.tag=0,yi&&a&&bO(t),Ba(null,t,n,r),t=t.child),t;case 16:i=t.elementType;e:{switch(_w(e,t),e=t.pendingProps,n=i._init,i=n(i._payload),t.type=i,n=t.tag=Lte(i),e=sl(i,e),n){case 0:t=nP(null,t,i,e,r);break e;case 1:t=KB(null,t,i,e,r);break e;case 11:t=XB(null,t,i,e,r);break e;case 14:t=QB(null,t,i,sl(i.type,e),r);break e}throw Error(He(306,i,""))}return t;case 0:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:sl(i,n),nP(e,t,i,n,r);case 1:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:sl(i,n),KB(e,t,i,n,r);case 3:e:{if(Z8(t),e===null)throw Error(He(387));i=t.pendingProps,a=t.memoizedState,n=a.element,_8(e,t),m_(t,i,null,r);var s=t.memoizedState;if(i=s.element,a.isDehydrated)if(a={element:i,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){n=_g(Error(He(423)),t),t=ZB(e,t,i,r,n);break e}else if(i!==n){n=_g(Error(He(424)),t),t=ZB(e,t,i,r,n);break e}else for($s=Rh(t.stateNode.containerInfo.firstChild),Zs=t,yi=!0,ll=null,r=C8(t,null,i,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(xg(),i===n){t=Ec(e,t,r);break e}Ba(e,t,i,r)}t=t.child}return t;case 5:return A8(t),e===null&&JT(t),i=t.type,n=t.pendingProps,a=e!==null?e.memoizedProps:null,s=n.children,qT(i,n)?s=null:a!==null&&qT(i,a)&&(t.flags|=32),K8(e,t),Ba(e,t,s,r),t.child;case 6:return e===null&&JT(t),null;case 13:return J8(e,t,r);case 4:return TO(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=bg(t,null,i,r):Ba(e,t,i,r),t.child;case 11:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:sl(i,n),XB(e,t,i,n,r);case 7:return Ba(e,t,t.pendingProps,r),t.child;case 8:return Ba(e,t,t.pendingProps.children,r),t.child;case 12:return Ba(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(i=t.type._context,n=t.pendingProps,a=t.memoizedProps,s=n.value,di(f_,i._currentValue),i._currentValue=s,a!==null)if(Sl(a.value,s)){if(a.children===n.children&&!bs.current){t=Ec(e,t,r);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var o=a.dependencies;if(o!==null){s=a.child;for(var l=o.firstContext;l!==null;){if(l.context===i){if(a.tag===1){l=fc(-1,r&-r),l.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}a.lanes|=r,l=a.alternate,l!==null&&(l.lanes|=r),eP(a.return,r,t),o.lanes|=r;break}l=l.next}}else if(a.tag===10)s=a.type===t.type?null:a.child;else if(a.tag===18){if(s=a.return,s===null)throw Error(He(341));s.lanes|=r,o=s.alternate,o!==null&&(o.lanes|=r),eP(s,r,t),s=a.sibling}else s=a.child;if(s!==null)s.return=a;else for(s=a;s!==null;){if(s===t){s=null;break}if(a=s.sibling,a!==null){a.return=s.return,s=a;break}s=s.return}a=s}Ba(e,t,n.children,r),t=t.child}return t;case 9:return n=t.type,i=t.pendingProps.children,Hm(t,r),n=No(n),i=i(n),t.flags|=1,Ba(e,t,i,r),t.child;case 14:return i=t.type,n=sl(i,t.pendingProps),n=sl(i.type,n),QB(e,t,i,n,r);case 15:return X8(e,t,t.type,t.pendingProps,r);case 17:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:sl(i,n),_w(e,t),t.tag=1,ws(i)?(e=!0,c_(t)):e=!1,Hm(t,r),E8(t,i,n),rP(t,i,n,r),aP(null,t,i,!0,e,r);case 19:return eH(e,t,r);case 22:return Q8(e,t,r)}throw Error(He(156,t.tag))};function gH(e,t){return VV(e,t)}function kte(e,t,r,i){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function To(e,t,r,i){return new kte(e,t,r,i)}function HO(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Lte(e){if(typeof e=="function")return HO(e)?1:0;if(e!=null){if(e=e.$$typeof,e===lO)return 11;if(e===uO)return 14}return 2}function Nh(e,t){var r=e.alternate;return r===null?(r=To(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Mw(e,t,r,i,n,a){var s=2;if(i=e,typeof e=="function")HO(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case mm:return cf(r.children,n,a,t);case oO:s=8,n|=8;break;case CT:return e=To(12,r,t,n|2),e.elementType=CT,e.lanes=a,e;case AT:return e=To(13,r,t,n),e.elementType=AT,e.lanes=a,e;case TT:return e=To(19,r,t,n),e.elementType=TT,e.lanes=a,e;case MV:return b2(r,n,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case SV:s=10;break e;case EV:s=9;break e;case lO:s=11;break e;case uO:s=14;break e;case nh:s=16,i=null;break e}throw Error(He(130,e==null?e:typeof e,""))}return t=To(s,r,t,n),t.elementType=e,t.type=i,t.lanes=a,t}function cf(e,t,r,i){return e=To(7,e,i,t),e.lanes=r,e}function b2(e,t,r,i){return e=To(22,e,i,t),e.elementType=MV,e.lanes=r,e.stateNode={isHidden:!1},e}function YM(e,t,r){return e=To(6,e,null,t),e.lanes=r,e}function qM(e,t,r){return t=To(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bte(e,t,r,i,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=TM(0),this.expirationTimes=TM(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=TM(0),this.identifierPrefix=i,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function GO(e,t,r,i,n,a,s,o,l){return e=new Bte(e,t,r,o,l),t===1?(t=1,a===!0&&(t|=8)):t=0,a=To(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:i,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},AO(a),e}function Nte(e,t,r){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:pm,key:i==null?null:""+i,children:e,containerInfo:t,implementation:r}}function vH(e){if(!e)return Qh;e=e._reactInternals;e:{if($f(e)!==e||e.tag!==1)throw Error(He(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ws(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(He(171))}if(e.tag===1){var r=e.type;if(ws(r))return g8(e,r,t)}return t}function yH(e,t,r,i,n,a,s,o,l){return e=GO(r,i,!0,e,n,a,s,o,l),e.context=vH(null),r=e.current,i=Ka(),n=Bh(r),a=fc(i,n),a.callback=t??null,kh(r,a,n),e.current.lanes=n,O1(e,n,i),_s(e,i),e}function w2(e,t,r,i){var n=t.current,a=Ka(),s=Bh(n);return r=vH(r),t.context===null?t.context=r:t.pendingContext=r,t=fc(a,s),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=kh(n,t,s),e!==null&&(yl(e,n,s,a),xw(e,n,s)),s}function S_(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function lN(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function WO(e,t){lN(e,t),(e=e.alternate)&&lN(e,t)}function zte(){return null}var xH=typeof reportError=="function"?reportError:function(e){console.error(e)};function $O(e){this._internalRoot=e}_2.prototype.render=$O.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(He(409));w2(e,t,null,null)};_2.prototype.unmount=$O.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Df(function(){w2(null,e,null,null)}),t[_c]=null}};function _2(e){this._internalRoot=e}_2.prototype.unstable_scheduleHydration=function(e){if(e){var t=XV();e={blockedOn:null,target:e,priority:t};for(var r=0;r<oh.length&&t!==0&&t<oh[r].priority;r++);oh.splice(r,0,e),r===0&&KV(e)}};function YO(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function S2(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function uN(){}function Fte(e,t,r,i,n){if(n){if(typeof i=="function"){var a=i;i=function(){var u=S_(s);a.call(u)}}var s=yH(t,i,e,0,null,!1,!1,"",uN);return e._reactRootContainer=s,e[_c]=s.current,zy(e.nodeType===8?e.parentNode:e),Df(),s}for(;n=e.lastChild;)e.removeChild(n);if(typeof i=="function"){var o=i;i=function(){var u=S_(l);o.call(u)}}var l=GO(e,0,!1,null,null,!1,!1,"",uN);return e._reactRootContainer=l,e[_c]=l.current,zy(e.nodeType===8?e.parentNode:e),Df(function(){w2(t,l,r,i)}),l}function E2(e,t,r,i,n){var a=r._reactRootContainer;if(a){var s=a;if(typeof n=="function"){var o=n;n=function(){var l=S_(s);o.call(l)}}w2(t,s,e,n)}else s=Fte(r,t,e,n,i);return S_(s)}YV=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=P0(t.pendingLanes);r!==0&&(dO(t,r|1),_s(t,Wi()),!(Tr&6)&&(Sg=Wi()+500,ld()))}break;case 13:Df(function(){var i=Sc(e,1);if(i!==null){var n=Ka();yl(i,e,1,n)}}),WO(e,1)}};fO=function(e){if(e.tag===13){var t=Sc(e,134217728);if(t!==null){var r=Ka();yl(t,e,134217728,r)}WO(e,134217728)}};qV=function(e){if(e.tag===13){var t=Bh(e),r=Sc(e,t);if(r!==null){var i=Ka();yl(r,e,t,i)}WO(e,t)}};XV=function(){return qr};QV=function(e,t){var r=qr;try{return qr=e,t()}finally{qr=r}};zT=function(e,t,r){switch(t){case"input":if(OT(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var i=r[t];if(i!==e&&i.form===e.form){var n=p2(i);if(!n)throw Error(He(90));AV(i),OT(i,n)}}}break;case"textarea":PV(e,r);break;case"select":t=r.value,t!=null&&Fm(e,!!r.multiple,t,!1)}};BV=UO;NV=Df;var Ute={usingClientEntryPoint:!1,Events:[R1,xm,p2,kV,LV,UO]},zv={findFiberByHostInstance:Qd,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},jte={bundleType:zv.bundleType,version:zv.version,rendererPackageName:zv.rendererPackageName,rendererConfig:zv.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Rc.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=UV(e),e===null?null:e.stateNode},findFiberByHostInstance:zv.findFiberByHostInstance||zte,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ox=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ox.isDisabled&&Ox.supportsFiber)try{c2=Ox.inject(jte),pu=Ox}catch{}}io.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ute;io.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!YO(t))throw Error(He(200));return Nte(e,t,null,r)};io.createRoot=function(e,t){if(!YO(e))throw Error(He(299));var r=!1,i="",n=xH;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(n=t.onRecoverableError)),t=GO(e,1,!1,null,null,r,!1,i,n),e[_c]=t.current,zy(e.nodeType===8?e.parentNode:e),new $O(t)};io.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(He(188)):(e=Object.keys(e).join(","),Error(He(268,e)));return e=UV(t),e=e===null?null:e.stateNode,e};io.flushSync=function(e){return Df(e)};io.hydrate=function(e,t,r){if(!S2(t))throw Error(He(200));return E2(null,e,t,!0,r)};io.hydrateRoot=function(e,t,r){if(!YO(e))throw Error(He(405));var i=r!=null&&r.hydratedSources||null,n=!1,a="",s=xH;if(r!=null&&(r.unstable_strictMode===!0&&(n=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(s=r.onRecoverableError)),t=yH(t,null,e,1,r??null,n,!1,a,s),e[_c]=t.current,zy(e),i)for(e=0;e<i.length;e++)r=i[e],n=r._getVersion,n=n(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,n]:t.mutableSourceEagerHydrationData.push(r,n);return new _2(t)};io.render=function(e,t,r){if(!S2(t))throw Error(He(200));return E2(null,e,t,!1,r)};io.unmountComponentAtNode=function(e){if(!S2(e))throw Error(He(40));return e._reactRootContainer?(Df(function(){E2(null,null,e,!1,function(){e._reactRootContainer=null,e[_c]=null})}),!0):!1};io.unstable_batchedUpdates=UO;io.unstable_renderSubtreeIntoContainer=function(e,t,r,i){if(!S2(r))throw Error(He(200));if(e==null||e._reactInternals===void 0)throw Error(He(38));return E2(e,t,r,!1,i)};io.version="18.2.0-next-9e3b772b8-20220608";function bH(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(bH)}catch(e){console.error(e)}}bH(),yV.exports=io;var qO=yV.exports;const Ix=K3(qO);var wH,cN=qO;wH=cN.createRoot,cN.hydrateRoot;/**
 * @remix-run/router v1.9.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Yy(){return Yy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Yy.apply(this,arguments)}var gh;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(gh||(gh={}));const hN="popstate";function Vte(e){e===void 0&&(e={});function t(i,n){let{pathname:a,search:s,hash:o}=i.location;return vP("",{pathname:a,search:s,hash:o},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function r(i,n){return typeof n=="string"?n:E_(n)}return Gte(t,r,null,e)}function un(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function XO(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Hte(){return Math.random().toString(36).substr(2,8)}function dN(e,t){return{usr:e.state,key:e.key,idx:t}}function vP(e,t,r,i){return r===void 0&&(r=null),Yy({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?rv(t):t,{state:r,key:t&&t.key||i||Hte()})}function E_(e){let{pathname:t="/",search:r="",hash:i=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),i&&i!=="#"&&(t+=i.charAt(0)==="#"?i:"#"+i),t}function rv(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let i=e.indexOf("?");i>=0&&(t.search=e.substr(i),e=e.substr(0,i)),e&&(t.pathname=e)}return t}function Gte(e,t,r,i){i===void 0&&(i={});let{window:n=document.defaultView,v5Compat:a=!1}=i,s=n.history,o=gh.Pop,l=null,u=h();u==null&&(u=0,s.replaceState(Yy({},s.state,{idx:u}),""));function h(){return(s.state||{idx:null}).idx}function c(){o=gh.Pop;let g=h(),v=g==null?null:g-u;u=g,l&&l({action:o,location:p.location,delta:v})}function d(g,v){o=gh.Push;let y=vP(p.location,g,v);r&&r(y,g),u=h()+1;let x=dN(y,u),b=p.createHref(y);try{s.pushState(x,"",b)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;n.location.assign(b)}a&&l&&l({action:o,location:p.location,delta:1})}function f(g,v){o=gh.Replace;let y=vP(p.location,g,v);r&&r(y,g),u=h();let x=dN(y,u),b=p.createHref(y);s.replaceState(x,"",b),a&&l&&l({action:o,location:p.location,delta:0})}function m(g){let v=n.location.origin!=="null"?n.location.origin:n.location.href,y=typeof g=="string"?g:E_(g);return un(v,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,v)}let p={get action(){return o},get location(){return e(n,s)},listen(g){if(l)throw new Error("A history only accepts one active listener");return n.addEventListener(hN,c),l=g,()=>{n.removeEventListener(hN,c),l=null}},createHref(g){return t(n,g)},createURL:m,encodeLocation(g){let v=m(g);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:d,replace:f,go(g){return s.go(g)}};return p}var fN;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(fN||(fN={}));function Wte(e,t,r){r===void 0&&(r="/");let i=typeof t=="string"?rv(t):t,n=QO(i.pathname||"/",r);if(n==null)return null;let a=_H(e);$te(a);let s=null;for(let o=0;s==null&&o<a.length;++o)s=tre(a[o],nre(n));return s}function _H(e,t,r,i){t===void 0&&(t=[]),r===void 0&&(r=[]),i===void 0&&(i="");let n=(a,s,o)=>{let l={relativePath:o===void 0?a.path||"":o,caseSensitive:a.caseSensitive===!0,childrenIndex:s,route:a};l.relativePath.startsWith("/")&&(un(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let u=zh([i,l.relativePath]),h=r.concat(l);a.children&&a.children.length>0&&(un(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),_H(a.children,t,h,u)),!(a.path==null&&!a.index)&&t.push({path:u,score:Jte(u,a.index),routesMeta:h})};return e.forEach((a,s)=>{var o;if(a.path===""||!((o=a.path)!=null&&o.includes("?")))n(a,s);else for(let l of SH(a.path))n(a,s,l)}),t}function SH(e){let t=e.split("/");if(t.length===0)return[];let[r,...i]=t,n=r.endsWith("?"),a=r.replace(/\?$/,"");if(i.length===0)return n?[a,""]:[a];let s=SH(i.join("/")),o=[];return o.push(...s.map(l=>l===""?a:[a,l].join("/"))),n&&o.push(...s),o.map(l=>e.startsWith("/")&&l===""?"/":l)}function $te(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:ere(t.routesMeta.map(i=>i.childrenIndex),r.routesMeta.map(i=>i.childrenIndex)))}const Yte=/^:\w+$/,qte=3,Xte=2,Qte=1,Kte=10,Zte=-2,pN=e=>e==="*";function Jte(e,t){let r=e.split("/"),i=r.length;return r.some(pN)&&(i+=Zte),t&&(i+=Xte),r.filter(n=>!pN(n)).reduce((n,a)=>n+(Yte.test(a)?qte:a===""?Qte:Kte),i)}function ere(e,t){return e.length===t.length&&e.slice(0,-1).every((i,n)=>i===t[n])?e[e.length-1]-t[t.length-1]:0}function tre(e,t){let{routesMeta:r}=e,i={},n="/",a=[];for(let s=0;s<r.length;++s){let o=r[s],l=s===r.length-1,u=n==="/"?t:t.slice(n.length)||"/",h=rre({path:o.relativePath,caseSensitive:o.caseSensitive,end:l},u);if(!h)return null;Object.assign(i,h.params);let c=o.route;a.push({params:i,pathname:zh([n,h.pathname]),pathnameBase:lre(zh([n,h.pathnameBase])),route:c}),h.pathnameBase!=="/"&&(n=zh([n,h.pathnameBase]))}return a}function rre(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,i]=ire(e.path,e.caseSensitive,e.end),n=t.match(r);if(!n)return null;let a=n[0],s=a.replace(/(.)\/+$/,"$1"),o=n.slice(1);return{params:i.reduce((u,h,c)=>{if(h==="*"){let d=o[c]||"";s=a.slice(0,a.length-d.length).replace(/(.)\/+$/,"$1")}return u[h]=are(o[c]||"",h),u},{}),pathname:a,pathnameBase:s,pattern:e}}function ire(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),XO(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let i=[],n="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(s,o)=>(i.push(o),"/([^\\/]+)"));return e.endsWith("*")?(i.push("*"),n+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?n+="\\/*$":e!==""&&e!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,t?void 0:"i"),i]}function nre(e){try{return decodeURI(e)}catch(t){return XO(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function are(e,t){try{return decodeURIComponent(e)}catch(r){return XO(!1,'The value for the URL param "'+t+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+r+").")),e}}function QO(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,i=e.charAt(r);return i&&i!=="/"?null:e.slice(r)||"/"}function sre(e,t){t===void 0&&(t="/");let{pathname:r,search:i="",hash:n=""}=typeof e=="string"?rv(e):e;return{pathname:r?r.startsWith("/")?r:ore(r,t):t,search:ure(i),hash:cre(n)}}function ore(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(n=>{n===".."?r.length>1&&r.pop():n!=="."&&r.push(n)}),r.length>1?r.join("/"):"/"}function XM(e,t,r,i){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function EH(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function MH(e,t,r,i){i===void 0&&(i=!1);let n;typeof e=="string"?n=rv(e):(n=Yy({},e),un(!n.pathname||!n.pathname.includes("?"),XM("?","pathname","search",n)),un(!n.pathname||!n.pathname.includes("#"),XM("#","pathname","hash",n)),un(!n.search||!n.search.includes("#"),XM("#","search","hash",n)));let a=e===""||n.pathname==="",s=a?"/":n.pathname,o;if(i||s==null)o=r;else{let c=t.length-1;if(s.startsWith("..")){let d=s.split("/");for(;d[0]==="..";)d.shift(),c-=1;n.pathname=d.join("/")}o=c>=0?t[c]:"/"}let l=sre(n,o),u=s&&s!=="/"&&s.endsWith("/"),h=(a||s===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(u||h)&&(l.pathname+="/"),l}const zh=e=>e.join("/").replace(/\/\/+/g,"/"),lre=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),ure=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,cre=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function hre(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const CH=["post","put","patch","delete"];new Set(CH);const dre=["get",...CH];new Set(dre);/**
 * React Router v6.16.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function M_(){return M_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},M_.apply(this,arguments)}const KO=X.createContext(null),fre=X.createContext(null),iv=X.createContext(null),M2=X.createContext(null),Yf=X.createContext({outlet:null,matches:[],isDataRoute:!1}),AH=X.createContext(null);function pre(e,t){let{relative:r}=t===void 0?{}:t;L1()||un(!1);let{basename:i,navigator:n}=X.useContext(iv),{hash:a,pathname:s,search:o}=PH(e,{relative:r}),l=s;return i!=="/"&&(l=s==="/"?i:zh([i,s])),n.createHref({pathname:l,search:o,hash:a})}function L1(){return X.useContext(M2)!=null}function C2(){return L1()||un(!1),X.useContext(M2).location}function TH(e){X.useContext(iv).static||X.useLayoutEffect(e)}function mre(){let{isDataRoute:e}=X.useContext(Yf);return e?Tre():gre()}function gre(){L1()||un(!1);let e=X.useContext(KO),{basename:t,navigator:r}=X.useContext(iv),{matches:i}=X.useContext(Yf),{pathname:n}=C2(),a=JSON.stringify(EH(i).map(l=>l.pathnameBase)),s=X.useRef(!1);return TH(()=>{s.current=!0}),X.useCallback(function(l,u){if(u===void 0&&(u={}),!s.current)return;if(typeof l=="number"){r.go(l);return}let h=MH(l,JSON.parse(a),n,u.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:zh([t,h.pathname])),(u.replace?r.replace:r.push)(h,u.state,u)},[t,r,a,n,e])}function PH(e,t){let{relative:r}=t===void 0?{}:t,{matches:i}=X.useContext(Yf),{pathname:n}=C2(),a=JSON.stringify(EH(i).map(s=>s.pathnameBase));return X.useMemo(()=>MH(e,JSON.parse(a),n,r==="path"),[e,a,n,r])}function vre(e,t){return yre(e,t)}function yre(e,t,r){L1()||un(!1);let{navigator:i}=X.useContext(iv),{matches:n}=X.useContext(Yf),a=n[n.length-1],s=a?a.params:{};a&&a.pathname;let o=a?a.pathnameBase:"/";a&&a.route;let l=C2(),u;if(t){var h;let p=typeof t=="string"?rv(t):t;o==="/"||(h=p.pathname)!=null&&h.startsWith(o)||un(!1),u=p}else u=l;let c=u.pathname||"/",d=o==="/"?c:c.slice(o.length)||"/",f=Wte(e,{pathname:d}),m=Sre(f&&f.map(p=>Object.assign({},p,{params:Object.assign({},s,p.params),pathname:zh([o,i.encodeLocation?i.encodeLocation(p.pathname).pathname:p.pathname]),pathnameBase:p.pathnameBase==="/"?o:zh([o,i.encodeLocation?i.encodeLocation(p.pathnameBase).pathname:p.pathnameBase])})),n,r);return t&&m?X.createElement(M2.Provider,{value:{location:M_({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:gh.Pop}},m):m}function xre(){let e=Are(),t=hre(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},a=null;return X.createElement(X.Fragment,null,X.createElement("h2",null,"Unexpected Application Error!"),X.createElement("h3",{style:{fontStyle:"italic"}},t),r?X.createElement("pre",{style:n},r):null,a)}const bre=X.createElement(xre,null);class wre extends X.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error||r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error?X.createElement(Yf.Provider,{value:this.props.routeContext},X.createElement(AH.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function _re(e){let{routeContext:t,match:r,children:i}=e,n=X.useContext(KO);return n&&n.static&&n.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=r.route.id),X.createElement(Yf.Provider,{value:t},i)}function Sre(e,t,r){var i;if(t===void 0&&(t=[]),r===void 0&&(r=null),e==null){var n;if((n=r)!=null&&n.errors)e=r.matches;else return null}let a=e,s=(i=r)==null?void 0:i.errors;if(s!=null){let o=a.findIndex(l=>l.route.id&&(s==null?void 0:s[l.route.id]));o>=0||un(!1),a=a.slice(0,Math.min(a.length,o+1))}return a.reduceRight((o,l,u)=>{let h=l.route.id?s==null?void 0:s[l.route.id]:null,c=null;r&&(c=l.route.errorElement||bre);let d=t.concat(a.slice(0,u+1)),f=()=>{let m;return h?m=c:l.route.Component?m=X.createElement(l.route.Component,null):l.route.element?m=l.route.element:m=o,X.createElement(_re,{match:l,routeContext:{outlet:o,matches:d,isDataRoute:r!=null},children:m})};return r&&(l.route.ErrorBoundary||l.route.errorElement||u===0)?X.createElement(wre,{location:r.location,revalidation:r.revalidation,component:c,error:h,children:f(),routeContext:{outlet:null,matches:d,isDataRoute:!0}}):f()},null)}var DH=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(DH||{}),C_=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(C_||{});function Ere(e){let t=X.useContext(KO);return t||un(!1),t}function Mre(e){let t=X.useContext(fre);return t||un(!1),t}function Cre(e){let t=X.useContext(Yf);return t||un(!1),t}function OH(e){let t=Cre(),r=t.matches[t.matches.length-1];return r.route.id||un(!1),r.route.id}function Are(){var e;let t=X.useContext(AH),r=Mre(C_.UseRouteError),i=OH(C_.UseRouteError);return t||((e=r.errors)==null?void 0:e[i])}function Tre(){let{router:e}=Ere(DH.UseNavigateStable),t=OH(C_.UseNavigateStable),r=X.useRef(!1);return TH(()=>{r.current=!0}),X.useCallback(function(n,a){a===void 0&&(a={}),r.current&&(typeof n=="number"?e.navigate(n):e.navigate(n,M_({fromRouteId:t},a)))},[e,t])}function O0(e){un(!1)}function Pre(e){let{basename:t="/",children:r=null,location:i,navigationType:n=gh.Pop,navigator:a,static:s=!1}=e;L1()&&un(!1);let o=t.replace(/^\/*/,"/"),l=X.useMemo(()=>({basename:o,navigator:a,static:s}),[o,a,s]);typeof i=="string"&&(i=rv(i));let{pathname:u="/",search:h="",hash:c="",state:d=null,key:f="default"}=i,m=X.useMemo(()=>{let p=QO(u,o);return p==null?null:{location:{pathname:p,search:h,hash:c,state:d,key:f},navigationType:n}},[o,u,h,c,d,f,n]);return m==null?null:X.createElement(iv.Provider,{value:l},X.createElement(M2.Provider,{children:r,value:m}))}function Dre(e){let{children:t,location:r}=e;return vre(yP(t),r)}new Promise(()=>{});function yP(e,t){t===void 0&&(t=[]);let r=[];return X.Children.forEach(e,(i,n)=>{if(!X.isValidElement(i))return;let a=[...t,n];if(i.type===X.Fragment){r.push.apply(r,yP(i.props.children,a));return}i.type!==O0&&un(!1),!i.props.index||!i.props.children||un(!1);let s={id:i.props.id||a.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(s.children=yP(i.props.children,a)),r.push(s)}),r}/**
 * React Router DOM v6.16.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xP(){return xP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},xP.apply(this,arguments)}function Ore(e,t){if(e==null)return{};var r={},i=Object.keys(e),n,a;for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&(r[n]=e[n]);return r}function Ire(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Rre(e,t){return e.button===0&&(!t||t==="_self")&&!Ire(e)}const kre=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],Lre="startTransition",mN=Jw[Lre];function Bre(e){let{basename:t,children:r,future:i,window:n}=e,a=X.useRef();a.current==null&&(a.current=Vte({window:n,v5Compat:!0}));let s=a.current,[o,l]=X.useState({action:s.action,location:s.location}),{v7_startTransition:u}=i||{},h=X.useCallback(c=>{u&&mN?mN(()=>l(c)):l(c)},[l,u]);return X.useLayoutEffect(()=>s.listen(h),[s,h]),X.createElement(Pre,{basename:t,children:r,location:o.location,navigationType:o.action,navigator:s})}const Nre=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",zre=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,hf=X.forwardRef(function(t,r){let{onClick:i,relative:n,reloadDocument:a,replace:s,state:o,target:l,to:u,preventScrollReset:h}=t,c=Ore(t,kre),{basename:d}=X.useContext(iv),f,m=!1;if(typeof u=="string"&&zre.test(u)&&(f=u,Nre))try{let y=new URL(window.location.href),x=u.startsWith("//")?new URL(y.protocol+u):new URL(u),b=QO(x.pathname,d);x.origin===y.origin&&b!=null?u=b+x.search+x.hash:m=!0}catch{}let p=pre(u,{relative:n}),g=Fre(u,{replace:s,state:o,target:l,preventScrollReset:h,relative:n});function v(y){i&&i(y),y.defaultPrevented||g(y)}return X.createElement("a",xP({},c,{href:f||p,onClick:m||a?i:v,ref:r,target:l}))});var gN;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher"})(gN||(gN={}));var vN;(function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(vN||(vN={}));function Fre(e,t){let{target:r,replace:i,state:n,preventScrollReset:a,relative:s}=t===void 0?{}:t,o=mre(),l=C2(),u=PH(e,{relative:s});return X.useCallback(h=>{if(Rre(h,r)){h.preventDefault();let c=i!==void 0?i:E_(l)===E_(u);o(e,{replace:c,state:n,preventScrollReset:a,relative:s})}},[l,o,u,i,n,r,e,a,s])}var IH={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},yN=jn.createContext&&jn.createContext(IH),Fh=globalThis&&globalThis.__assign||function(){return Fh=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},Fh.apply(this,arguments)},Ure=globalThis&&globalThis.__rest||function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]]);return r};function RH(e){return e&&e.map(function(t,r){return jn.createElement(t.tag,Fh({key:r},t.attr),RH(t.child))})}function qf(e){return function(t){return jn.createElement(jre,Fh({attr:Fh({},e.attr)},t),RH(e.child))}}function jre(e){var t=function(r){var i=e.attr,n=e.size,a=e.title,s=Ure(e,["attr","size","title"]),o=n||r.size||"1em",l;return r.className&&(l=r.className),e.className&&(l=(l?l+" ":"")+e.className),jn.createElement("svg",Fh({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,i,s,{className:l,style:Fh(Fh({color:e.color||r.color},r.style),e.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),a&&jn.createElement("title",null,a),e.children)};return yN!==void 0?jn.createElement(yN.Consumer,null,function(r){return t(r)}):t(IH)}function Vre(e){return qf({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M524.531,69.836a1.5,1.5,0,0,0-.764-.7A485.065,485.065,0,0,0,404.081,32.03a1.816,1.816,0,0,0-1.923.91,337.461,337.461,0,0,0-14.9,30.6,447.848,447.848,0,0,0-134.426,0,309.541,309.541,0,0,0-15.135-30.6,1.89,1.89,0,0,0-1.924-.91A483.689,483.689,0,0,0,116.085,69.137a1.712,1.712,0,0,0-.788.676C39.068,183.651,18.186,294.69,28.43,404.354a2.016,2.016,0,0,0,.765,1.375A487.666,487.666,0,0,0,176.02,479.918a1.9,1.9,0,0,0,2.063-.676A348.2,348.2,0,0,0,208.12,430.4a1.86,1.86,0,0,0-1.019-2.588,321.173,321.173,0,0,1-45.868-21.853,1.885,1.885,0,0,1-.185-3.126c3.082-2.309,6.166-4.711,9.109-7.137a1.819,1.819,0,0,1,1.9-.256c96.229,43.917,200.41,43.917,295.5,0a1.812,1.812,0,0,1,1.924.233c2.944,2.426,6.027,4.851,9.132,7.16a1.884,1.884,0,0,1-.162,3.126,301.407,301.407,0,0,1-45.89,21.83,1.875,1.875,0,0,0-1,2.611,391.055,391.055,0,0,0,30.014,48.815,1.864,1.864,0,0,0,2.063.7A486.048,486.048,0,0,0,610.7,405.729a1.882,1.882,0,0,0,.765-1.352C623.729,277.594,590.933,167.465,524.531,69.836ZM222.491,337.58c-28.972,0-52.844-26.587-52.844-59.239S193.056,219.1,222.491,219.1c29.665,0,53.306,26.82,52.843,59.239C275.334,310.993,251.924,337.58,222.491,337.58Zm195.38,0c-28.971,0-52.843-26.587-52.843-59.239S388.437,219.1,417.871,219.1c29.667,0,53.307,26.82,52.844,59.239C470.715,310.993,447.538,337.58,417.871,337.58Z"}}]})(e)}function Hre(e){return qf({tag:"svg",attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"}}]})(e)}function Gre(e){return qf({tag:"svg",attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M248,8C111.033,8,0,119.033,0,256S111.033,504,248,504,496,392.967,496,256,384.967,8,248,8ZM362.952,176.66c-3.732,39.215-19.881,134.378-28.1,178.3-3.476,18.584-10.322,24.816-16.948,25.425-14.4,1.326-25.338-9.517-39.287-18.661-21.827-14.308-34.158-23.215-55.346-37.177-24.485-16.135-8.612-25,5.342-39.5,3.652-3.793,67.107-61.51,68.335-66.746.153-.655.3-3.1-1.154-4.384s-3.59-.849-5.135-.5q-3.283.746-104.608,69.142-14.845,10.194-26.894,9.934c-8.855-.191-25.888-5.006-38.551-9.123-15.531-5.048-27.875-7.717-26.8-16.291q.84-6.7,18.45-13.7,108.446-47.248,144.628-62.3c68.872-28.647,83.183-33.623,92.511-33.789,2.052-.034,6.639.474,9.61,2.885a10.452,10.452,0,0,1,3.53,6.716A43.765,43.765,0,0,1,362.952,176.66Z"}}]})(e)}function Wre(e){return qf({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"}}]})(e)}function $re(e){return qf({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"title",attr:{},child:[]},{tag:"path",attr:{d:"M24 5.457v13.909c0 .904-.732 1.636-1.636 1.636h-3.819V11.73L12 16.64l-6.545-4.91v9.273H1.636A1.636 1.636 0 0 1 0 19.366V5.457c0-2.023 2.309-3.178 3.927-1.964L5.455 4.64 12 9.548l6.545-4.91 1.528-1.145C21.69 2.28 24 3.434 24 5.457z"}}]})(e)}function Yre(){return Q("div",{className:"links-wrapper ",children:ct("div",{className:"container flex justify-between",children:[Q(hf,{to:"/",className:"link",children:Q("p",{children:"WoMan.of.God"})}),ct("div",{className:"links flex gap-1x",children:[Q("a",{href:"https://github.com/akbarirazia",className:"green",target:"_blank",children:Q(Hre,{})}),Q("a",{href:"mailto:akbariharis14@gmail.com",target:"_blank",children:Q($re,{})}),Q("a",{href:"https://discordapp.com/users/eccedentesiast.ra",className:"green",target:"_blank",children:Q(Vre,{})}),Q("a",{href:"https://twitter.com/akbari_razia",target:"_blank",children:Q(Wre,{})}),Q("a",{href:"https://t.me/eccedentesiast_ra",className:"green",children:Q(Gre,{})})]})]})})}function Ee(){return Ee=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Ee.apply(this,arguments)}function Gd(e){return e!==null&&typeof e=="object"&&e.constructor===Object}function kH(e){if(!Gd(e))return e;const t={};return Object.keys(e).forEach(r=>{t[r]=kH(e[r])}),t}function xl(e,t,r={clone:!0}){const i=r.clone?Ee({},e):e;return Gd(e)&&Gd(t)&&Object.keys(t).forEach(n=>{n!=="__proto__"&&(Gd(t[n])&&n in e&&Gd(e[n])?i[n]=xl(e[n],t[n],r):r.clone?i[n]=Gd(t[n])?kH(t[n]):t[n]:i[n]=t[n])}),i}function Eg(e){let t="https://mui.com/production-error/?code="+e;for(let r=1;r<arguments.length;r+=1)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}var ti={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZO=Symbol.for("react.element"),JO=Symbol.for("react.portal"),A2=Symbol.for("react.fragment"),T2=Symbol.for("react.strict_mode"),P2=Symbol.for("react.profiler"),D2=Symbol.for("react.provider"),O2=Symbol.for("react.context"),qre=Symbol.for("react.server_context"),I2=Symbol.for("react.forward_ref"),R2=Symbol.for("react.suspense"),k2=Symbol.for("react.suspense_list"),L2=Symbol.for("react.memo"),B2=Symbol.for("react.lazy"),Xre=Symbol.for("react.offscreen"),LH;LH=Symbol.for("react.module.reference");function Ho(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case ZO:switch(e=e.type,e){case A2:case P2:case T2:case R2:case k2:return e;default:switch(e=e&&e.$$typeof,e){case qre:case O2:case I2:case B2:case L2:case D2:return e;default:return t}}case JO:return t}}}ti.ContextConsumer=O2;ti.ContextProvider=D2;ti.Element=ZO;ti.ForwardRef=I2;ti.Fragment=A2;ti.Lazy=B2;ti.Memo=L2;ti.Portal=JO;ti.Profiler=P2;ti.StrictMode=T2;ti.Suspense=R2;ti.SuspenseList=k2;ti.isAsyncMode=function(){return!1};ti.isConcurrentMode=function(){return!1};ti.isContextConsumer=function(e){return Ho(e)===O2};ti.isContextProvider=function(e){return Ho(e)===D2};ti.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===ZO};ti.isForwardRef=function(e){return Ho(e)===I2};ti.isFragment=function(e){return Ho(e)===A2};ti.isLazy=function(e){return Ho(e)===B2};ti.isMemo=function(e){return Ho(e)===L2};ti.isPortal=function(e){return Ho(e)===JO};ti.isProfiler=function(e){return Ho(e)===P2};ti.isStrictMode=function(e){return Ho(e)===T2};ti.isSuspense=function(e){return Ho(e)===R2};ti.isSuspenseList=function(e){return Ho(e)===k2};ti.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===A2||e===P2||e===T2||e===R2||e===k2||e===Xre||typeof e=="object"&&e!==null&&(e.$$typeof===B2||e.$$typeof===L2||e.$$typeof===D2||e.$$typeof===O2||e.$$typeof===I2||e.$$typeof===LH||e.getModuleId!==void 0)};ti.typeOf=Ho;function zt(e){if(typeof e!="string")throw new Error(Eg(7));return e.charAt(0).toUpperCase()+e.slice(1)}function bP(...e){return e.reduce((t,r)=>r==null?t:function(...n){t.apply(this,n),r.apply(this,n)},()=>{})}function Qre(e,t=166){let r;function i(...n){const a=()=>{e.apply(this,n)};clearTimeout(r),r=setTimeout(a,t)}return i.clear=()=>{clearTimeout(r)},i}function Kre(e,t){return()=>null}function Zre(e,t){return X.isValidElement(e)&&t.indexOf(e.type.muiName)!==-1}function pc(e){return e&&e.ownerDocument||document}function N2(e){return pc(e).defaultView||window}function Jre(e,t){return()=>null}function A_(e,t){typeof e=="function"?e(t):e&&(e.current=t)}const eie=typeof window<"u"?X.useLayoutEffect:X.useEffect,T_=eie;let xN=0;function tie(e){const[t,r]=X.useState(e),i=e||t;return X.useEffect(()=>{t==null&&(xN+=1,r(`mui-${xN}`))},[t]),i}const bN=Jw["useId".toString()];function BH(e){if(bN!==void 0){const t=bN();return e??t}return tie(e)}function rie(e,t,r,i,n){return null}function NH({controlled:e,default:t,name:r,state:i="value"}){const{current:n}=X.useRef(e!==void 0),[a,s]=X.useState(t),o=n?e:a,l=X.useCallback(u=>{n||s(u)},[]);return[o,l]}function Jd(e){const t=X.useRef(e);return T_(()=>{t.current=e}),X.useCallback((...r)=>(0,t.current)(...r),[])}function Kh(...e){return X.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(r=>{A_(r,t)})},e)}let z2=!0,wP=!1,wN;const iie={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function nie(e){const{type:t,tagName:r}=e;return!!(r==="INPUT"&&iie[t]&&!e.readOnly||r==="TEXTAREA"&&!e.readOnly||e.isContentEditable)}function aie(e){e.metaKey||e.altKey||e.ctrlKey||(z2=!0)}function QM(){z2=!1}function sie(){this.visibilityState==="hidden"&&wP&&(z2=!0)}function oie(e){e.addEventListener("keydown",aie,!0),e.addEventListener("mousedown",QM,!0),e.addEventListener("pointerdown",QM,!0),e.addEventListener("touchstart",QM,!0),e.addEventListener("visibilitychange",sie,!0)}function lie(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch{}return z2||nie(t)}function zH(){const e=X.useCallback(n=>{n!=null&&oie(n.ownerDocument)},[]),t=X.useRef(!1);function r(){return t.current?(wP=!0,window.clearTimeout(wN),wN=window.setTimeout(()=>{wP=!1},100),t.current=!1,!0):!1}function i(n){return lie(n)?(t.current=!0,!0):!1}return{isFocusVisibleRef:t,onFocus:i,onBlur:r,ref:e}}function uie(e){const t=e.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}function FH(e,t){const r=Ee({},t);return Object.keys(e).forEach(i=>{if(i.toString().match(/^(components|slots)$/))r[i]=Ee({},e[i],r[i]);else if(i.toString().match(/^(componentsProps|slotProps)$/)){const n=e[i]||{},a=t[i];r[i]={},!a||!Object.keys(a)?r[i]=n:!n||!Object.keys(n)?r[i]=a:(r[i]=Ee({},a),Object.keys(n).forEach(s=>{r[i][s]=FH(n[s],a[s])}))}else r[i]===void 0&&(r[i]=e[i])}),r}function dn(e,t,r=void 0){const i={};return Object.keys(e).forEach(n=>{i[n]=e[n].reduce((a,s)=>{if(s){const o=t(s);o!==""&&a.push(o),r&&r[s]&&a.push(r[s])}return a},[]).join(" ")}),i}const _N=e=>e,cie=()=>{let e=_N;return{configure(t){e=t},generate(t){return e(t)},reset(){e=_N}}},hie=cie(),eI=hie,die={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Zi(e,t,r="Mui"){const i=die[t];return i?`${r}-${i}`:`${eI.generate(e)}-${t}`}function fn(e,t,r="Mui"){const i={};return t.forEach(n=>{i[n]=Zi(e,n,r)}),i}const F2="$$material";function Er(e,t){if(e==null)return{};var r={},i=Object.keys(e),n,a;for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&(r[n]=e[n]);return r}function UH(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var fie=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,pie=UH(function(e){return fie.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91});function mie(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function gie(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var vie=function(){function e(r){var i=this;this._insertTag=function(n){var a;i.tags.length===0?i.insertionPoint?a=i.insertionPoint.nextSibling:i.prepend?a=i.container.firstChild:a=i.before:a=i.tags[i.tags.length-1].nextSibling,i.container.insertBefore(n,a),i.tags.push(n)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(i){i.forEach(this._insertTag)},t.insert=function(i){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(gie(this));var n=this.tags[this.tags.length-1];if(this.isSpeedy){var a=mie(n);try{a.insertRule(i,a.cssRules.length)}catch{}}else n.appendChild(document.createTextNode(i));this.ctr++},t.flush=function(){this.tags.forEach(function(i){return i.parentNode&&i.parentNode.removeChild(i)}),this.tags=[],this.ctr=0},e}(),da="-ms-",P_="-moz-",Br="-webkit-",jH="comm",tI="rule",rI="decl",yie="@import",VH="@keyframes",xie="@layer",bie=Math.abs,U2=String.fromCharCode,wie=Object.assign;function _ie(e,t){return ta(e,0)^45?(((t<<2^ta(e,0))<<2^ta(e,1))<<2^ta(e,2))<<2^ta(e,3):0}function HH(e){return e.trim()}function Sie(e,t){return(e=t.exec(e))?e[0]:e}function Nr(e,t,r){return e.replace(t,r)}function _P(e,t){return e.indexOf(t)}function ta(e,t){return e.charCodeAt(t)|0}function qy(e,t,r){return e.slice(t,r)}function ql(e){return e.length}function iI(e){return e.length}function Rx(e,t){return t.push(e),e}function Eie(e,t){return e.map(t).join("")}var j2=1,Mg=1,GH=0,Ts=0,sn=0,nv="";function V2(e,t,r,i,n,a,s){return{value:e,root:t,parent:r,type:i,props:n,children:a,line:j2,column:Mg,length:s,return:""}}function Fv(e,t){return wie(V2("",null,null,"",null,null,0),e,{length:-e.length},t)}function Mie(){return sn}function Cie(){return sn=Ts>0?ta(nv,--Ts):0,Mg--,sn===10&&(Mg=1,j2--),sn}function Js(){return sn=Ts<GH?ta(nv,Ts++):0,Mg++,sn===10&&(Mg=1,j2++),sn}function gu(){return ta(nv,Ts)}function Cw(){return Ts}function B1(e,t){return qy(nv,e,t)}function Xy(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function WH(e){return j2=Mg=1,GH=ql(nv=e),Ts=0,[]}function $H(e){return nv="",e}function Aw(e){return HH(B1(Ts-1,SP(e===91?e+2:e===40?e+1:e)))}function Aie(e){for(;(sn=gu())&&sn<33;)Js();return Xy(e)>2||Xy(sn)>3?"":" "}function Tie(e,t){for(;--t&&Js()&&!(sn<48||sn>102||sn>57&&sn<65||sn>70&&sn<97););return B1(e,Cw()+(t<6&&gu()==32&&Js()==32))}function SP(e){for(;Js();)switch(sn){case e:return Ts;case 34:case 39:e!==34&&e!==39&&SP(sn);break;case 40:e===41&&SP(e);break;case 92:Js();break}return Ts}function Pie(e,t){for(;Js()&&e+sn!==47+10;)if(e+sn===42+42&&gu()===47)break;return"/*"+B1(t,Ts-1)+"*"+U2(e===47?e:Js())}function Die(e){for(;!Xy(gu());)Js();return B1(e,Ts)}function Oie(e){return $H(Tw("",null,null,null,[""],e=WH(e),0,[0],e))}function Tw(e,t,r,i,n,a,s,o,l){for(var u=0,h=0,c=s,d=0,f=0,m=0,p=1,g=1,v=1,y=0,x="",b=n,_=a,w=i,E=x;g;)switch(m=y,y=Js()){case 40:if(m!=108&&ta(E,c-1)==58){_P(E+=Nr(Aw(y),"&","&\f"),"&\f")!=-1&&(v=-1);break}case 34:case 39:case 91:E+=Aw(y);break;case 9:case 10:case 13:case 32:E+=Aie(m);break;case 92:E+=Tie(Cw()-1,7);continue;case 47:switch(gu()){case 42:case 47:Rx(Iie(Pie(Js(),Cw()),t,r),l);break;default:E+="/"}break;case 123*p:o[u++]=ql(E)*v;case 125*p:case 59:case 0:switch(y){case 0:case 125:g=0;case 59+h:v==-1&&(E=Nr(E,/\f/g,"")),f>0&&ql(E)-c&&Rx(f>32?EN(E+";",i,r,c-1):EN(Nr(E," ","")+";",i,r,c-2),l);break;case 59:E+=";";default:if(Rx(w=SN(E,t,r,u,h,n,o,x,b=[],_=[],c),a),y===123)if(h===0)Tw(E,t,w,w,b,a,c,o,_);else switch(d===99&&ta(E,3)===110?100:d){case 100:case 108:case 109:case 115:Tw(e,w,w,i&&Rx(SN(e,w,w,0,0,n,o,x,n,b=[],c),_),n,_,c,o,i?b:_);break;default:Tw(E,w,w,w,[""],_,0,o,_)}}u=h=f=0,p=v=1,x=E="",c=s;break;case 58:c=1+ql(E),f=m;default:if(p<1){if(y==123)--p;else if(y==125&&p++==0&&Cie()==125)continue}switch(E+=U2(y),y*p){case 38:v=h>0?1:(E+="\f",-1);break;case 44:o[u++]=(ql(E)-1)*v,v=1;break;case 64:gu()===45&&(E+=Aw(Js())),d=gu(),h=c=ql(x=E+=Die(Cw())),y++;break;case 45:m===45&&ql(E)==2&&(p=0)}}return a}function SN(e,t,r,i,n,a,s,o,l,u,h){for(var c=n-1,d=n===0?a:[""],f=iI(d),m=0,p=0,g=0;m<i;++m)for(var v=0,y=qy(e,c+1,c=bie(p=s[m])),x=e;v<f;++v)(x=HH(p>0?d[v]+" "+y:Nr(y,/&\f/g,d[v])))&&(l[g++]=x);return V2(e,t,r,n===0?tI:o,l,u,h)}function Iie(e,t,r){return V2(e,t,r,jH,U2(Mie()),qy(e,2,-2),0)}function EN(e,t,r,i){return V2(e,t,r,rI,qy(e,0,i),qy(e,i+1,-1),i)}function Wm(e,t){for(var r="",i=iI(e),n=0;n<i;n++)r+=t(e[n],n,e,t)||"";return r}function Rie(e,t,r,i){switch(e.type){case xie:if(e.children.length)break;case yie:case rI:return e.return=e.return||e.value;case jH:return"";case VH:return e.return=e.value+"{"+Wm(e.children,i)+"}";case tI:e.value=e.props.join(",")}return ql(r=Wm(e.children,i))?e.return=e.value+"{"+r+"}":""}function kie(e){var t=iI(e);return function(r,i,n,a){for(var s="",o=0;o<t;o++)s+=e[o](r,i,n,a)||"";return s}}function Lie(e){return function(t){t.root||(t=t.return)&&e(t)}}var Bie=function(t,r,i){for(var n=0,a=0;n=a,a=gu(),n===38&&a===12&&(r[i]=1),!Xy(a);)Js();return B1(t,Ts)},Nie=function(t,r){var i=-1,n=44;do switch(Xy(n)){case 0:n===38&&gu()===12&&(r[i]=1),t[i]+=Bie(Ts-1,r,i);break;case 2:t[i]+=Aw(n);break;case 4:if(n===44){t[++i]=gu()===58?"&\f":"",r[i]=t[i].length;break}default:t[i]+=U2(n)}while(n=Js());return t},zie=function(t,r){return $H(Nie(WH(t),r))},MN=new WeakMap,Fie=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var r=t.value,i=t.parent,n=t.column===i.column&&t.line===i.line;i.type!=="rule";)if(i=i.parent,!i)return;if(!(t.props.length===1&&r.charCodeAt(0)!==58&&!MN.get(i))&&!n){MN.set(t,!0);for(var a=[],s=zie(r,a),o=i.props,l=0,u=0;l<s.length;l++)for(var h=0;h<o.length;h++,u++)t.props[u]=a[l]?s[l].replace(/&\f/g,o[h]):o[h]+" "+s[l]}}},Uie=function(t){if(t.type==="decl"){var r=t.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(t.return="",t.value="")}};function YH(e,t){switch(_ie(e,t)){case 5103:return Br+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Br+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Br+e+P_+e+da+e+e;case 6828:case 4268:return Br+e+da+e+e;case 6165:return Br+e+da+"flex-"+e+e;case 5187:return Br+e+Nr(e,/(\w+).+(:[^]+)/,Br+"box-$1$2"+da+"flex-$1$2")+e;case 5443:return Br+e+da+"flex-item-"+Nr(e,/flex-|-self/,"")+e;case 4675:return Br+e+da+"flex-line-pack"+Nr(e,/align-content|flex-|-self/,"")+e;case 5548:return Br+e+da+Nr(e,"shrink","negative")+e;case 5292:return Br+e+da+Nr(e,"basis","preferred-size")+e;case 6060:return Br+"box-"+Nr(e,"-grow","")+Br+e+da+Nr(e,"grow","positive")+e;case 4554:return Br+Nr(e,/([^-])(transform)/g,"$1"+Br+"$2")+e;case 6187:return Nr(Nr(Nr(e,/(zoom-|grab)/,Br+"$1"),/(image-set)/,Br+"$1"),e,"")+e;case 5495:case 3959:return Nr(e,/(image-set\([^]*)/,Br+"$1$`$1");case 4968:return Nr(Nr(e,/(.+:)(flex-)?(.*)/,Br+"box-pack:$3"+da+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Br+e+e;case 4095:case 3583:case 4068:case 2532:return Nr(e,/(.+)-inline(.+)/,Br+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(ql(e)-1-t>6)switch(ta(e,t+1)){case 109:if(ta(e,t+4)!==45)break;case 102:return Nr(e,/(.+:)(.+)-([^]+)/,"$1"+Br+"$2-$3$1"+P_+(ta(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~_P(e,"stretch")?YH(Nr(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(ta(e,t+1)!==115)break;case 6444:switch(ta(e,ql(e)-3-(~_P(e,"!important")&&10))){case 107:return Nr(e,":",":"+Br)+e;case 101:return Nr(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Br+(ta(e,14)===45?"inline-":"")+"box$3$1"+Br+"$2$3$1"+da+"$2box$3")+e}break;case 5936:switch(ta(e,t+11)){case 114:return Br+e+da+Nr(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Br+e+da+Nr(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Br+e+da+Nr(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Br+e+da+e+e}return e}var jie=function(t,r,i,n){if(t.length>-1&&!t.return)switch(t.type){case rI:t.return=YH(t.value,t.length);break;case VH:return Wm([Fv(t,{value:Nr(t.value,"@","@"+Br)})],n);case tI:if(t.length)return Eie(t.props,function(a){switch(Sie(a,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Wm([Fv(t,{props:[Nr(a,/:(read-\w+)/,":"+P_+"$1")]})],n);case"::placeholder":return Wm([Fv(t,{props:[Nr(a,/:(plac\w+)/,":"+Br+"input-$1")]}),Fv(t,{props:[Nr(a,/:(plac\w+)/,":"+P_+"$1")]}),Fv(t,{props:[Nr(a,/:(plac\w+)/,da+"input-$1")]})],n)}return""})}},Vie=[jie],Hie=function(t){var r=t.key;if(r==="css"){var i=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(i,function(p){var g=p.getAttribute("data-emotion");g.indexOf(" ")!==-1&&(document.head.appendChild(p),p.setAttribute("data-s",""))})}var n=t.stylisPlugins||Vie,a={},s,o=[];s=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(p){for(var g=p.getAttribute("data-emotion").split(" "),v=1;v<g.length;v++)a[g[v]]=!0;o.push(p)});var l,u=[Fie,Uie];{var h,c=[Rie,Lie(function(p){h.insert(p)})],d=kie(u.concat(n,c)),f=function(g){return Wm(Oie(g),d)};l=function(g,v,y,x){h=y,f(g?g+"{"+v.styles+"}":v.styles),x&&(m.inserted[v.name]=!0)}}var m={key:r,sheet:new vie({key:r,container:s,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:a,registered:{},insert:l};return m.sheet.hydrate(o),m},qH={exports:{}},Qr={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qn=typeof Symbol=="function"&&Symbol.for,nI=qn?Symbol.for("react.element"):60103,aI=qn?Symbol.for("react.portal"):60106,H2=qn?Symbol.for("react.fragment"):60107,G2=qn?Symbol.for("react.strict_mode"):60108,W2=qn?Symbol.for("react.profiler"):60114,$2=qn?Symbol.for("react.provider"):60109,Y2=qn?Symbol.for("react.context"):60110,sI=qn?Symbol.for("react.async_mode"):60111,q2=qn?Symbol.for("react.concurrent_mode"):60111,X2=qn?Symbol.for("react.forward_ref"):60112,Q2=qn?Symbol.for("react.suspense"):60113,Gie=qn?Symbol.for("react.suspense_list"):60120,K2=qn?Symbol.for("react.memo"):60115,Z2=qn?Symbol.for("react.lazy"):60116,Wie=qn?Symbol.for("react.block"):60121,$ie=qn?Symbol.for("react.fundamental"):60117,Yie=qn?Symbol.for("react.responder"):60118,qie=qn?Symbol.for("react.scope"):60119;function ao(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case nI:switch(e=e.type,e){case sI:case q2:case H2:case W2:case G2:case Q2:return e;default:switch(e=e&&e.$$typeof,e){case Y2:case X2:case Z2:case K2:case $2:return e;default:return t}}case aI:return t}}}function XH(e){return ao(e)===q2}Qr.AsyncMode=sI;Qr.ConcurrentMode=q2;Qr.ContextConsumer=Y2;Qr.ContextProvider=$2;Qr.Element=nI;Qr.ForwardRef=X2;Qr.Fragment=H2;Qr.Lazy=Z2;Qr.Memo=K2;Qr.Portal=aI;Qr.Profiler=W2;Qr.StrictMode=G2;Qr.Suspense=Q2;Qr.isAsyncMode=function(e){return XH(e)||ao(e)===sI};Qr.isConcurrentMode=XH;Qr.isContextConsumer=function(e){return ao(e)===Y2};Qr.isContextProvider=function(e){return ao(e)===$2};Qr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===nI};Qr.isForwardRef=function(e){return ao(e)===X2};Qr.isFragment=function(e){return ao(e)===H2};Qr.isLazy=function(e){return ao(e)===Z2};Qr.isMemo=function(e){return ao(e)===K2};Qr.isPortal=function(e){return ao(e)===aI};Qr.isProfiler=function(e){return ao(e)===W2};Qr.isStrictMode=function(e){return ao(e)===G2};Qr.isSuspense=function(e){return ao(e)===Q2};Qr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===H2||e===q2||e===W2||e===G2||e===Q2||e===Gie||typeof e=="object"&&e!==null&&(e.$$typeof===Z2||e.$$typeof===K2||e.$$typeof===$2||e.$$typeof===Y2||e.$$typeof===X2||e.$$typeof===$ie||e.$$typeof===Yie||e.$$typeof===qie||e.$$typeof===Wie)};Qr.typeOf=ao;qH.exports=Qr;var Xie=qH.exports,QH=Xie,Qie={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Kie={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},KH={};KH[QH.ForwardRef]=Qie;KH[QH.Memo]=Kie;var Zie=!0;function Jie(e,t,r){var i="";return r.split(" ").forEach(function(n){e[n]!==void 0?t.push(e[n]+";"):i+=n+" "}),i}var ZH=function(t,r,i){var n=t.key+"-"+r.name;(i===!1||Zie===!1)&&t.registered[n]===void 0&&(t.registered[n]=r.styles)},ene=function(t,r,i){ZH(t,r,i);var n=t.key+"-"+r.name;if(t.inserted[r.name]===void 0){var a=r;do t.insert(r===a?"."+n:"",a,t.sheet,!0),a=a.next;while(a!==void 0)}};function tne(e){for(var t=0,r,i=0,n=e.length;n>=4;++i,n-=4)r=e.charCodeAt(i)&255|(e.charCodeAt(++i)&255)<<8|(e.charCodeAt(++i)&255)<<16|(e.charCodeAt(++i)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,t=(r&65535)*1540483477+((r>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(n){case 3:t^=(e.charCodeAt(i+2)&255)<<16;case 2:t^=(e.charCodeAt(i+1)&255)<<8;case 1:t^=e.charCodeAt(i)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var rne={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},ine=/[A-Z]|^ms/g,nne=/_EMO_([^_]+?)_([^]*?)_EMO_/g,JH=function(t){return t.charCodeAt(1)===45},CN=function(t){return t!=null&&typeof t!="boolean"},KM=UH(function(e){return JH(e)?e:e.replace(ine,"-$&").toLowerCase()}),AN=function(t,r){switch(t){case"animation":case"animationName":if(typeof r=="string")return r.replace(nne,function(i,n,a){return Xl={name:n,styles:a,next:Xl},n})}return rne[t]!==1&&!JH(t)&&typeof r=="number"&&r!==0?r+"px":r};function Qy(e,t,r){if(r==null)return"";if(r.__emotion_styles!==void 0)return r;switch(typeof r){case"boolean":return"";case"object":{if(r.anim===1)return Xl={name:r.name,styles:r.styles,next:Xl},r.name;if(r.styles!==void 0){var i=r.next;if(i!==void 0)for(;i!==void 0;)Xl={name:i.name,styles:i.styles,next:Xl},i=i.next;var n=r.styles+";";return n}return ane(e,t,r)}case"function":{if(e!==void 0){var a=Xl,s=r(e);return Xl=a,Qy(e,t,s)}break}}if(t==null)return r;var o=t[r];return o!==void 0?o:r}function ane(e,t,r){var i="";if(Array.isArray(r))for(var n=0;n<r.length;n++)i+=Qy(e,t,r[n])+";";else for(var a in r){var s=r[a];if(typeof s!="object")t!=null&&t[s]!==void 0?i+=a+"{"+t[s]+"}":CN(s)&&(i+=KM(a)+":"+AN(a,s)+";");else if(Array.isArray(s)&&typeof s[0]=="string"&&(t==null||t[s[0]]===void 0))for(var o=0;o<s.length;o++)CN(s[o])&&(i+=KM(a)+":"+AN(a,s[o])+";");else{var l=Qy(e,t,s);switch(a){case"animation":case"animationName":{i+=KM(a)+":"+l+";";break}default:i+=a+"{"+l+"}"}}}return i}var TN=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Xl,eG=function(t,r,i){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var n=!0,a="";Xl=void 0;var s=t[0];s==null||s.raw===void 0?(n=!1,a+=Qy(i,r,s)):a+=s[0];for(var o=1;o<t.length;o++)a+=Qy(i,r,t[o]),n&&(a+=s[o]);TN.lastIndex=0;for(var l="",u;(u=TN.exec(a))!==null;)l+="-"+u[1];var h=tne(a)+l;return{name:h,styles:a,next:Xl}},sne=function(t){return t()},one=Jw["useInsertionEffect"]?Jw["useInsertionEffect"]:!1,lne=one||sne,tG=X.createContext(typeof HTMLElement<"u"?Hie({key:"css"}):null);tG.Provider;var une=function(t){return X.forwardRef(function(r,i){var n=X.useContext(tG);return t(r,n,i)})},rG=X.createContext({});function av(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return eG(t)}var ud=function(){var t=av.apply(void 0,arguments),r="animation-"+t.name;return{name:r,styles:"@keyframes "+r+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},cne=pie,hne=function(t){return t!=="theme"},PN=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?cne:hne},DN=function(t,r,i){var n;if(r){var a=r.shouldForwardProp;n=t.__emotion_forwardProp&&a?function(s){return t.__emotion_forwardProp(s)&&a(s)}:a}return typeof n!="function"&&i&&(n=t.__emotion_forwardProp),n},dne=function(t){var r=t.cache,i=t.serialized,n=t.isStringTag;return ZH(r,i,n),lne(function(){return ene(r,i,n)}),null},fne=function e(t,r){var i=t.__emotion_real===t,n=i&&t.__emotion_base||t,a,s;r!==void 0&&(a=r.label,s=r.target);var o=DN(t,r,i),l=o||PN(n),u=!l("as");return function(){var h=arguments,c=i&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(a!==void 0&&c.push("label:"+a+";"),h[0]==null||h[0].raw===void 0)c.push.apply(c,h);else{c.push(h[0][0]);for(var d=h.length,f=1;f<d;f++)c.push(h[f],h[0][f])}var m=une(function(p,g,v){var y=u&&p.as||n,x="",b=[],_=p;if(p.theme==null){_={};for(var w in p)_[w]=p[w];_.theme=X.useContext(rG)}typeof p.className=="string"?x=Jie(g.registered,b,p.className):p.className!=null&&(x=p.className+" ");var E=eG(c.concat(b),g.registered,_);x+=g.key+"-"+E.name,s!==void 0&&(x+=" "+s);var S=u&&o===void 0?PN(y):l,C={};for(var M in p)u&&M==="as"||S(M)&&(C[M]=p[M]);return C.className=x,C.ref=v,X.createElement(X.Fragment,null,X.createElement(dne,{cache:g,serialized:E,isStringTag:typeof y=="string"}),X.createElement(y,C))});return m.displayName=a!==void 0?a:"Styled("+(typeof n=="string"?n:n.displayName||n.name||"Component")+")",m.defaultProps=t.defaultProps,m.__emotion_real=m,m.__emotion_base=n,m.__emotion_styles=c,m.__emotion_forwardProp=o,Object.defineProperty(m,"toString",{value:function(){return"."+s}}),m.withComponent=function(p,g){return e(p,Ee({},r,g,{shouldForwardProp:DN(m,g,!0)})).apply(void 0,c)},m}},pne=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],EP=fne.bind();pne.forEach(function(e){EP[e]=EP(e)});/**
 * @mui/styled-engine v5.14.10
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function iG(e,t){return EP(e,t)}const mne=(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))},gne=["values","unit","step"],vne=e=>{const t=Object.keys(e).map(r=>({key:r,val:e[r]}))||[];return t.sort((r,i)=>r.val-i.val),t.reduce((r,i)=>Ee({},r,{[i.key]:i.val}),{})};function yne(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:r="px",step:i=5}=e,n=Er(e,gne),a=vne(t),s=Object.keys(a);function o(d){return`@media (min-width:${typeof t[d]=="number"?t[d]:d}${r})`}function l(d){return`@media (max-width:${(typeof t[d]=="number"?t[d]:d)-i/100}${r})`}function u(d,f){const m=s.indexOf(f);return`@media (min-width:${typeof t[d]=="number"?t[d]:d}${r}) and (max-width:${(m!==-1&&typeof t[s[m]]=="number"?t[s[m]]:f)-i/100}${r})`}function h(d){return s.indexOf(d)+1<s.length?u(d,s[s.indexOf(d)+1]):o(d)}function c(d){const f=s.indexOf(d);return f===0?o(s[1]):f===s.length-1?l(s[f]):u(d,s[s.indexOf(d)+1]).replace("@media","@media not all and")}return Ee({keys:s,values:a,up:o,down:l,between:u,only:h,not:c,unit:r},n)}const xne={borderRadius:4},bne=xne;function iy(e,t){return t?xl(e,t,{clone:!1}):e}const oI={xs:0,sm:600,md:900,lg:1200,xl:1536},ON={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${oI[e]}px)`};function El(e,t,r){const i=e.theme||{};if(Array.isArray(t)){const a=i.breakpoints||ON;return t.reduce((s,o,l)=>(s[a.up(a.keys[l])]=r(t[l]),s),{})}if(typeof t=="object"){const a=i.breakpoints||ON;return Object.keys(t).reduce((s,o)=>{if(Object.keys(a.values||oI).indexOf(o)!==-1){const l=a.up(o);s[l]=r(t[o],o)}else{const l=o;s[l]=t[l]}return s},{})}return r(t)}function nG(e={}){var t;return((t=e.keys)==null?void 0:t.reduce((i,n)=>{const a=e.up(n);return i[a]={},i},{}))||{}}function aG(e,t){return e.reduce((r,i)=>{const n=r[i];return(!n||Object.keys(n).length===0)&&delete r[i],r},t)}function wne(e,...t){const r=nG(e),i=[r,...t].reduce((n,a)=>xl(n,a),{});return aG(Object.keys(r),i)}function _ne(e,t){if(typeof e!="object")return{};const r={},i=Object.keys(t);return Array.isArray(e)?i.forEach((n,a)=>{a<e.length&&(r[n]=!0)}):i.forEach(n=>{e[n]!=null&&(r[n]=!0)}),r}function ZM({values:e,breakpoints:t,base:r}){const i=r||_ne(e,t),n=Object.keys(i);if(n.length===0)return e;let a;return n.reduce((s,o,l)=>(Array.isArray(e)?(s[o]=e[l]!=null?e[l]:e[a],a=l):typeof e=="object"?(s[o]=e[o]!=null?e[o]:e[a],a=o):s[o]=e,s),{})}function J2(e,t,r=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&r){const i=`vars.${t}`.split(".").reduce((n,a)=>n&&n[a]?n[a]:null,e);if(i!=null)return i}return t.split(".").reduce((i,n)=>i&&i[n]!=null?i[n]:null,e)}function D_(e,t,r,i=r){let n;return typeof e=="function"?n=e(r):Array.isArray(e)?n=e[r]||i:n=J2(e,r)||i,t&&(n=t(n,i,e)),n}function Vr(e){const{prop:t,cssProperty:r=e.prop,themeKey:i,transform:n}=e,a=s=>{if(s[t]==null)return null;const o=s[t],l=s.theme,u=J2(l,i)||{};return El(s,o,c=>{let d=D_(u,n,c);return c===d&&typeof c=="string"&&(d=D_(u,n,`${t}${c==="default"?"":zt(c)}`,c)),r===!1?d:{[r]:d}})};return a.propTypes={},a.filterProps=[t],a}function Sne(e){const t={};return r=>(t[r]===void 0&&(t[r]=e(r)),t[r])}const Ene={m:"margin",p:"padding"},Mne={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},IN={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},Cne=Sne(e=>{if(e.length>2)if(IN[e])e=IN[e];else return[e];const[t,r]=e.split(""),i=Ene[t],n=Mne[r]||"";return Array.isArray(n)?n.map(a=>i+a):[i+n]}),lI=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],uI=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...lI,...uI];function N1(e,t,r,i){var n;const a=(n=J2(e,t,!1))!=null?n:r;return typeof a=="number"?s=>typeof s=="string"?s:a*s:Array.isArray(a)?s=>typeof s=="string"?s:a[s]:typeof a=="function"?a:()=>{}}function cI(e){return N1(e,"spacing",8)}function Of(e,t){if(typeof t=="string"||t==null)return t;const r=Math.abs(t),i=e(r);return t>=0?i:typeof i=="number"?-i:`-${i}`}function Ane(e,t){return r=>e.reduce((i,n)=>(i[n]=Of(t,r),i),{})}function Tne(e,t,r,i){if(t.indexOf(r)===-1)return null;const n=Cne(r),a=Ane(n,i),s=e[r];return El(e,s,a)}function sG(e,t){const r=cI(e.theme);return Object.keys(e).map(i=>Tne(e,t,i,r)).reduce(iy,{})}function Ti(e){return sG(e,lI)}Ti.propTypes={};Ti.filterProps=lI;function Pi(e){return sG(e,uI)}Pi.propTypes={};Pi.filterProps=uI;function Pne(e=8){if(e.mui)return e;const t=cI({spacing:e}),r=(...i)=>(i.length===0?[1]:i).map(a=>{const s=t(a);return typeof s=="number"?`${s}px`:s}).join(" ");return r.mui=!0,r}function eE(...e){const t=e.reduce((i,n)=>(n.filterProps.forEach(a=>{i[a]=n}),i),{}),r=i=>Object.keys(i).reduce((n,a)=>t[a]?iy(n,t[a](i)):n,{});return r.propTypes={},r.filterProps=e.reduce((i,n)=>i.concat(n.filterProps),[]),r}function tu(e){return typeof e!="number"?e:`${e}px solid`}const Dne=Vr({prop:"border",themeKey:"borders",transform:tu}),One=Vr({prop:"borderTop",themeKey:"borders",transform:tu}),Ine=Vr({prop:"borderRight",themeKey:"borders",transform:tu}),Rne=Vr({prop:"borderBottom",themeKey:"borders",transform:tu}),kne=Vr({prop:"borderLeft",themeKey:"borders",transform:tu}),Lne=Vr({prop:"borderColor",themeKey:"palette"}),Bne=Vr({prop:"borderTopColor",themeKey:"palette"}),Nne=Vr({prop:"borderRightColor",themeKey:"palette"}),zne=Vr({prop:"borderBottomColor",themeKey:"palette"}),Fne=Vr({prop:"borderLeftColor",themeKey:"palette"}),tE=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=N1(e.theme,"shape.borderRadius",4),r=i=>({borderRadius:Of(t,i)});return El(e,e.borderRadius,r)}return null};tE.propTypes={};tE.filterProps=["borderRadius"];eE(Dne,One,Ine,Rne,kne,Lne,Bne,Nne,zne,Fne,tE);const rE=e=>{if(e.gap!==void 0&&e.gap!==null){const t=N1(e.theme,"spacing",8),r=i=>({gap:Of(t,i)});return El(e,e.gap,r)}return null};rE.propTypes={};rE.filterProps=["gap"];const iE=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=N1(e.theme,"spacing",8),r=i=>({columnGap:Of(t,i)});return El(e,e.columnGap,r)}return null};iE.propTypes={};iE.filterProps=["columnGap"];const nE=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=N1(e.theme,"spacing",8),r=i=>({rowGap:Of(t,i)});return El(e,e.rowGap,r)}return null};nE.propTypes={};nE.filterProps=["rowGap"];const Une=Vr({prop:"gridColumn"}),jne=Vr({prop:"gridRow"}),Vne=Vr({prop:"gridAutoFlow"}),Hne=Vr({prop:"gridAutoColumns"}),Gne=Vr({prop:"gridAutoRows"}),Wne=Vr({prop:"gridTemplateColumns"}),$ne=Vr({prop:"gridTemplateRows"}),Yne=Vr({prop:"gridTemplateAreas"}),qne=Vr({prop:"gridArea"});eE(rE,iE,nE,Une,jne,Vne,Hne,Gne,Wne,$ne,Yne,qne);function $m(e,t){return t==="grey"?t:e}const Xne=Vr({prop:"color",themeKey:"palette",transform:$m}),Qne=Vr({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:$m}),Kne=Vr({prop:"backgroundColor",themeKey:"palette",transform:$m});eE(Xne,Qne,Kne);function Hs(e){return e<=1&&e!==0?`${e*100}%`:e}const Zne=Vr({prop:"width",transform:Hs}),hI=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=r=>{var i,n;const a=((i=e.theme)==null||(i=i.breakpoints)==null||(i=i.values)==null?void 0:i[r])||oI[r];return a?((n=e.theme)==null||(n=n.breakpoints)==null?void 0:n.unit)!=="px"?{maxWidth:`${a}${e.theme.breakpoints.unit}`}:{maxWidth:a}:{maxWidth:Hs(r)}};return El(e,e.maxWidth,t)}return null};hI.filterProps=["maxWidth"];const Jne=Vr({prop:"minWidth",transform:Hs}),eae=Vr({prop:"height",transform:Hs}),tae=Vr({prop:"maxHeight",transform:Hs}),rae=Vr({prop:"minHeight",transform:Hs});Vr({prop:"size",cssProperty:"width",transform:Hs});Vr({prop:"size",cssProperty:"height",transform:Hs});const iae=Vr({prop:"boxSizing"});eE(Zne,hI,Jne,eae,tae,rae,iae);const nae={border:{themeKey:"borders",transform:tu},borderTop:{themeKey:"borders",transform:tu},borderRight:{themeKey:"borders",transform:tu},borderBottom:{themeKey:"borders",transform:tu},borderLeft:{themeKey:"borders",transform:tu},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:tE},color:{themeKey:"palette",transform:$m},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:$m},backgroundColor:{themeKey:"palette",transform:$m},p:{style:Pi},pt:{style:Pi},pr:{style:Pi},pb:{style:Pi},pl:{style:Pi},px:{style:Pi},py:{style:Pi},padding:{style:Pi},paddingTop:{style:Pi},paddingRight:{style:Pi},paddingBottom:{style:Pi},paddingLeft:{style:Pi},paddingX:{style:Pi},paddingY:{style:Pi},paddingInline:{style:Pi},paddingInlineStart:{style:Pi},paddingInlineEnd:{style:Pi},paddingBlock:{style:Pi},paddingBlockStart:{style:Pi},paddingBlockEnd:{style:Pi},m:{style:Ti},mt:{style:Ti},mr:{style:Ti},mb:{style:Ti},ml:{style:Ti},mx:{style:Ti},my:{style:Ti},margin:{style:Ti},marginTop:{style:Ti},marginRight:{style:Ti},marginBottom:{style:Ti},marginLeft:{style:Ti},marginX:{style:Ti},marginY:{style:Ti},marginInline:{style:Ti},marginInlineStart:{style:Ti},marginInlineEnd:{style:Ti},marginBlock:{style:Ti},marginBlockStart:{style:Ti},marginBlockEnd:{style:Ti},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:rE},rowGap:{style:nE},columnGap:{style:iE},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Hs},maxWidth:{style:hI},minWidth:{transform:Hs},height:{transform:Hs},maxHeight:{transform:Hs},minHeight:{transform:Hs},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}},aE=nae;function aae(...e){const t=e.reduce((i,n)=>i.concat(Object.keys(n)),[]),r=new Set(t);return e.every(i=>r.size===Object.keys(i).length)}function sae(e,t){return typeof e=="function"?e(t):e}function oae(){function e(r,i,n,a){const s={[r]:i,theme:n},o=a[r];if(!o)return{[r]:i};const{cssProperty:l=r,themeKey:u,transform:h,style:c}=o;if(i==null)return null;if(u==="typography"&&i==="inherit")return{[r]:i};const d=J2(n,u)||{};return c?c(s):El(s,i,m=>{let p=D_(d,h,m);return m===p&&typeof m=="string"&&(p=D_(d,h,`${r}${m==="default"?"":zt(m)}`,m)),l===!1?p:{[l]:p}})}function t(r){var i;const{sx:n,theme:a={}}=r||{};if(!n)return null;const s=(i=a.unstable_sxConfig)!=null?i:aE;function o(l){let u=l;if(typeof l=="function")u=l(a);else if(typeof l!="object")return l;if(!u)return null;const h=nG(a.breakpoints),c=Object.keys(h);let d=h;return Object.keys(u).forEach(f=>{const m=sae(u[f],a);if(m!=null)if(typeof m=="object")if(s[f])d=iy(d,e(f,m,a,s));else{const p=El({theme:a},m,g=>({[f]:g}));aae(p,m)?d[f]=t({sx:m,theme:a}):d=iy(d,p)}else d=iy(d,e(f,m,a,s))}),aG(c,d)}return Array.isArray(n)?n.map(o):o(n)}return t}const oG=oae();oG.filterProps=["sx"];const sE=oG,lae=["breakpoints","palette","spacing","shape"];function oE(e={},...t){const{breakpoints:r={},palette:i={},spacing:n,shape:a={}}=e,s=Er(e,lae),o=yne(r),l=Pne(n);let u=xl({breakpoints:o,direction:"ltr",components:{},palette:Ee({mode:"light"},i),spacing:l,shape:Ee({},bne,a)},s);return u=t.reduce((h,c)=>xl(h,c),u),u.unstable_sxConfig=Ee({},aE,s==null?void 0:s.unstable_sxConfig),u.unstable_sx=function(c){return sE({sx:c,theme:this})},u}function uae(e){return Object.keys(e).length===0}function cae(e=null){const t=X.useContext(rG);return!t||uae(t)?e:t}const hae=oE();function dI(e=hae){return cae(e)}const dae=["sx"],fae=e=>{var t,r;const i={systemProps:{},otherProps:{}},n=(t=e==null||(r=e.theme)==null?void 0:r.unstable_sxConfig)!=null?t:aE;return Object.keys(e).forEach(a=>{n[a]?i.systemProps[a]=e[a]:i.otherProps[a]=e[a]}),i};function fI(e){const{sx:t}=e,r=Er(e,dae),{systemProps:i,otherProps:n}=fae(r);let a;return Array.isArray(t)?a=[i,...t]:typeof t=="function"?a=(...s)=>{const o=t(...s);return Gd(o)?Ee({},i,o):i}:a=Ee({},i,t),Ee({},n,{sx:a})}function lG(e){var t,r,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=lG(e[t]))&&(i&&(i+=" "),i+=r);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}function fr(){for(var e,t,r=0,i="";r<arguments.length;)(e=arguments[r++])&&(t=lG(e))&&(i&&(i+=" "),i+=t);return i}const pae=["className","component"];function mae(e={}){const{themeId:t,defaultTheme:r,defaultClassName:i="MuiBox-root",generateClassName:n}=e,a=iG("div",{shouldForwardProp:o=>o!=="theme"&&o!=="sx"&&o!=="as"})(sE);return X.forwardRef(function(l,u){const h=dI(r),c=fI(l),{className:d,component:f="div"}=c,m=Er(c,pae);return Q(a,Ee({as:f,ref:u,className:fr(d,n?n(i):i),theme:t&&h[t]||h},m))})}const gae=["variant"];function RN(e){return e.length===0}function uG(e){const{variant:t}=e,r=Er(e,gae);let i=t||"";return Object.keys(r).sort().forEach(n=>{n==="color"?i+=RN(i)?e[n]:zt(e[n]):i+=`${RN(i)?n:zt(n)}${zt(e[n].toString())}`}),i}const vae=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function yae(e){return Object.keys(e).length===0}function xae(e){return typeof e=="string"&&e.charCodeAt(0)>96}const bae=(e,t)=>t.components&&t.components[e]&&t.components[e].styleOverrides?t.components[e].styleOverrides:null,wae=(e,t)=>{let r=[];t&&t.components&&t.components[e]&&t.components[e].variants&&(r=t.components[e].variants);const i={};return r.forEach(n=>{const a=uG(n.props);i[a]=n.style}),i},_ae=(e,t,r,i)=>{var n;const{ownerState:a={}}=e,s=[],o=r==null||(n=r.components)==null||(n=n[i])==null?void 0:n.variants;return o&&o.forEach(l=>{let u=!0;Object.keys(l.props).forEach(h=>{a[h]!==l.props[h]&&e[h]!==l.props[h]&&(u=!1)}),u&&s.push(t[uG(l.props)])}),s};function Pw(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const Sae=oE(),Eae=e=>e&&e.charAt(0).toLowerCase()+e.slice(1);function Uv({defaultTheme:e,theme:t,themeId:r}){return yae(t)?e:t[r]||t}function Mae(e){return e?(t,r)=>r[e]:null}function cG(e={}){const{themeId:t,defaultTheme:r=Sae,rootShouldForwardProp:i=Pw,slotShouldForwardProp:n=Pw}=e,a=s=>sE(Ee({},s,{theme:Uv(Ee({},s,{defaultTheme:r,themeId:t}))}));return a.__mui_systemSx=!0,(s,o={})=>{mne(s,b=>b.filter(_=>!(_!=null&&_.__mui_systemSx)));const{name:l,slot:u,skipVariantsResolver:h,skipSx:c,overridesResolver:d=Mae(Eae(u))}=o,f=Er(o,vae),m=h!==void 0?h:u&&u!=="Root"&&u!=="root"||!1,p=c||!1;let g,v=Pw;u==="Root"||u==="root"?v=i:u?v=n:xae(s)&&(v=void 0);const y=iG(s,Ee({shouldForwardProp:v,label:g},f)),x=(b,..._)=>{const w=_?_.map(M=>typeof M=="function"&&M.__emotion_real!==M?P=>M(Ee({},P,{theme:Uv(Ee({},P,{defaultTheme:r,themeId:t}))})):M):[];let E=b;l&&d&&w.push(M=>{const P=Uv(Ee({},M,{defaultTheme:r,themeId:t})),I=bae(l,P);if(I){const k={};return Object.entries(I).forEach(([L,O])=>{k[L]=typeof O=="function"?O(Ee({},M,{theme:P})):O}),d(M,k)}return null}),l&&!m&&w.push(M=>{const P=Uv(Ee({},M,{defaultTheme:r,themeId:t}));return _ae(M,wae(l,P),P,l)}),p||w.push(a);const S=w.length-_.length;if(Array.isArray(b)&&S>0){const M=new Array(S).fill("");E=[...b,...M],E.raw=[...b.raw,...M]}else typeof b=="function"&&b.__emotion_real!==b&&(E=M=>b(Ee({},M,{theme:Uv(Ee({},M,{defaultTheme:r,themeId:t}))})));const C=y(E,...w);return s.muiName&&(C.muiName=s.muiName),C};return y.withConfig&&(x.withConfig=y.withConfig),x}}const Cae=cG(),Aae=Cae;function Tae(e){const{theme:t,name:r,props:i}=e;return!t||!t.components||!t.components[r]||!t.components[r].defaultProps?i:FH(t.components[r].defaultProps,i)}function hG({props:e,name:t,defaultTheme:r,themeId:i}){let n=dI(r);return i&&(n=n[i]||n),Tae({theme:n,name:t,props:e})}function pI(e,t=0,r=1){return Math.min(Math.max(t,e),r)}function Pae(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let r=e.match(t);return r&&r[0].length===1&&(r=r.map(i=>i+i)),r?`rgb${r.length===4?"a":""}(${r.map((i,n)=>n<3?parseInt(i,16):Math.round(parseInt(i,16)/255*1e3)/1e3).join(", ")})`:""}function If(e){if(e.type)return e;if(e.charAt(0)==="#")return If(Pae(e));const t=e.indexOf("("),r=e.substring(0,t);if(["rgb","rgba","hsl","hsla","color"].indexOf(r)===-1)throw new Error(Eg(9,e));let i=e.substring(t+1,e.length-1),n;if(r==="color"){if(i=i.split(" "),n=i.shift(),i.length===4&&i[3].charAt(0)==="/"&&(i[3]=i[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(n)===-1)throw new Error(Eg(10,n))}else i=i.split(",");return i=i.map(a=>parseFloat(a)),{type:r,values:i,colorSpace:n}}function lE(e){const{type:t,colorSpace:r}=e;let{values:i}=e;return t.indexOf("rgb")!==-1?i=i.map((n,a)=>a<3?parseInt(n,10):n):t.indexOf("hsl")!==-1&&(i[1]=`${i[1]}%`,i[2]=`${i[2]}%`),t.indexOf("color")!==-1?i=`${r} ${i.join(" ")}`:i=`${i.join(", ")}`,`${t}(${i})`}function Dae(e){e=If(e);const{values:t}=e,r=t[0],i=t[1]/100,n=t[2]/100,a=i*Math.min(n,1-n),s=(u,h=(u+r/30)%12)=>n-a*Math.max(Math.min(h-3,9-h,1),-1);let o="rgb";const l=[Math.round(s(0)*255),Math.round(s(8)*255),Math.round(s(4)*255)];return e.type==="hsla"&&(o+="a",l.push(t[3])),lE({type:o,values:l})}function kN(e){e=If(e);let t=e.type==="hsl"||e.type==="hsla"?If(Dae(e)).values:e.values;return t=t.map(r=>(e.type!=="color"&&(r/=255),r<=.03928?r/12.92:((r+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function Oae(e,t){const r=kN(e),i=kN(t);return(Math.max(r,i)+.05)/(Math.min(r,i)+.05)}function uu(e,t){return e=If(e),t=pI(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,lE(e)}function mI(e,t){if(e=If(e),t=pI(t),e.type.indexOf("hsl")!==-1)e.values[2]*=1-t;else if(e.type.indexOf("rgb")!==-1||e.type.indexOf("color")!==-1)for(let r=0;r<3;r+=1)e.values[r]*=1-t;return lE(e)}function gI(e,t){if(e=If(e),t=pI(t),e.type.indexOf("hsl")!==-1)e.values[2]+=(100-e.values[2])*t;else if(e.type.indexOf("rgb")!==-1)for(let r=0;r<3;r+=1)e.values[r]+=(255-e.values[r])*t;else if(e.type.indexOf("color")!==-1)for(let r=0;r<3;r+=1)e.values[r]+=(1-e.values[r])*t;return lE(e)}const Iae=["component","direction","spacing","divider","children","className","useFlexGap"],Rae=oE(),kae=Aae("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root});function Lae(e){return hG({props:e,name:"MuiStack",defaultTheme:Rae})}function Bae(e,t){const r=X.Children.toArray(e).filter(Boolean);return r.reduce((i,n,a)=>(i.push(n),a<r.length-1&&i.push(X.cloneElement(t,{key:`separator-${a}`})),i),[])}const Nae=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],zae=({ownerState:e,theme:t})=>{let r=Ee({display:"flex",flexDirection:"column"},El({theme:t},ZM({values:e.direction,breakpoints:t.breakpoints.values}),i=>({flexDirection:i})));if(e.spacing){const i=cI(t),n=Object.keys(t.breakpoints.values).reduce((l,u)=>((typeof e.spacing=="object"&&e.spacing[u]!=null||typeof e.direction=="object"&&e.direction[u]!=null)&&(l[u]=!0),l),{}),a=ZM({values:e.direction,base:n}),s=ZM({values:e.spacing,base:n});typeof a=="object"&&Object.keys(a).forEach((l,u,h)=>{if(!a[l]){const d=u>0?a[h[u-1]]:"column";a[l]=d}}),r=xl(r,El({theme:t},s,(l,u)=>e.useFlexGap?{gap:Of(i,l)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${Nae(u?a[u]:e.direction)}`]:Of(i,l)}}))}return r=wne(t.breakpoints,r),r};function Fae(e={}){const{createStyledComponent:t=kae,useThemeProps:r=Lae,componentName:i="MuiStack"}=e,n=()=>dn({root:["root"]},l=>Zi(i,l),{}),a=t(zae);return X.forwardRef(function(l,u){const h=r(l),c=fI(h),{component:d="div",direction:f="column",spacing:m=0,divider:p,children:g,className:v,useFlexGap:y=!1}=c,x=Er(c,Iae),b={direction:f,spacing:m,useFlexGap:y},_=n();return Q(a,Ee({as:d,ownerState:b,ref:u,className:fr(_.root,v)},x,{children:p?Bae(g,p):g}))})}function Uae(e,t){return Ee({toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}}},t)}const jae={black:"#000",white:"#fff"},Ky=jae,Vae={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},Hae=Vae,Gae={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},dp=Gae,Wae={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},fp=Wae,$ae={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},jv=$ae,Yae={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},pp=Yae,qae={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},mp=qae,Xae={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},gp=Xae,Qae=["mode","contrastThreshold","tonalOffset"],LN={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Ky.white,default:Ky.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},JM={text:{primary:Ky.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Ky.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function BN(e,t,r,i){const n=i.light||i,a=i.dark||i*1.5;e[t]||(e.hasOwnProperty(r)?e[t]=e[r]:t==="light"?e.light=gI(e.main,n):t==="dark"&&(e.dark=mI(e.main,a)))}function Kae(e="light"){return e==="dark"?{main:pp[200],light:pp[50],dark:pp[400]}:{main:pp[700],light:pp[400],dark:pp[800]}}function Zae(e="light"){return e==="dark"?{main:dp[200],light:dp[50],dark:dp[400]}:{main:dp[500],light:dp[300],dark:dp[700]}}function Jae(e="light"){return e==="dark"?{main:fp[500],light:fp[300],dark:fp[700]}:{main:fp[700],light:fp[400],dark:fp[800]}}function ese(e="light"){return e==="dark"?{main:mp[400],light:mp[300],dark:mp[700]}:{main:mp[700],light:mp[500],dark:mp[900]}}function tse(e="light"){return e==="dark"?{main:gp[400],light:gp[300],dark:gp[700]}:{main:gp[800],light:gp[500],dark:gp[900]}}function rse(e="light"){return e==="dark"?{main:jv[400],light:jv[300],dark:jv[700]}:{main:"#ed6c02",light:jv[500],dark:jv[900]}}function ise(e){const{mode:t="light",contrastThreshold:r=3,tonalOffset:i=.2}=e,n=Er(e,Qae),a=e.primary||Kae(t),s=e.secondary||Zae(t),o=e.error||Jae(t),l=e.info||ese(t),u=e.success||tse(t),h=e.warning||rse(t);function c(p){return Oae(p,JM.text.primary)>=r?JM.text.primary:LN.text.primary}const d=({color:p,name:g,mainShade:v=500,lightShade:y=300,darkShade:x=700})=>{if(p=Ee({},p),!p.main&&p[v]&&(p.main=p[v]),!p.hasOwnProperty("main"))throw new Error(Eg(11,g?` (${g})`:"",v));if(typeof p.main!="string")throw new Error(Eg(12,g?` (${g})`:"",JSON.stringify(p.main)));return BN(p,"light",y,i),BN(p,"dark",x,i),p.contrastText||(p.contrastText=c(p.main)),p},f={dark:JM,light:LN};return xl(Ee({common:Ee({},Ky),mode:t,primary:d({color:a,name:"primary"}),secondary:d({color:s,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:d({color:o,name:"error"}),warning:d({color:h,name:"warning"}),info:d({color:l,name:"info"}),success:d({color:u,name:"success"}),grey:Hae,contrastThreshold:r,getContrastText:c,augmentColor:d,tonalOffset:i},f[t]),n)}const nse=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function ase(e){return Math.round(e*1e5)/1e5}const NN={textTransform:"uppercase"},zN='"Roboto", "Helvetica", "Arial", sans-serif';function sse(e,t){const r=typeof t=="function"?t(e):t,{fontFamily:i=zN,fontSize:n=14,fontWeightLight:a=300,fontWeightRegular:s=400,fontWeightMedium:o=500,fontWeightBold:l=700,htmlFontSize:u=16,allVariants:h,pxToRem:c}=r,d=Er(r,nse),f=n/14,m=c||(v=>`${v/u*f}rem`),p=(v,y,x,b,_)=>Ee({fontFamily:i,fontWeight:v,fontSize:m(y),lineHeight:x},i===zN?{letterSpacing:`${ase(b/y)}em`}:{},_,h),g={h1:p(a,96,1.167,-1.5),h2:p(a,60,1.2,-.5),h3:p(s,48,1.167,0),h4:p(s,34,1.235,.25),h5:p(s,24,1.334,0),h6:p(o,20,1.6,.15),subtitle1:p(s,16,1.75,.15),subtitle2:p(o,14,1.57,.1),body1:p(s,16,1.5,.15),body2:p(s,14,1.43,.15),button:p(o,14,1.75,.4,NN),caption:p(s,12,1.66,.4),overline:p(s,12,2.66,1,NN),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return xl(Ee({htmlFontSize:u,pxToRem:m,fontFamily:i,fontSize:n,fontWeightLight:a,fontWeightRegular:s,fontWeightMedium:o,fontWeightBold:l},g),d,{clone:!1})}const ose=.2,lse=.14,use=.12;function vi(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${ose})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${lse})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${use})`].join(",")}const cse=["none",vi(0,2,1,-1,0,1,1,0,0,1,3,0),vi(0,3,1,-2,0,2,2,0,0,1,5,0),vi(0,3,3,-2,0,3,4,0,0,1,8,0),vi(0,2,4,-1,0,4,5,0,0,1,10,0),vi(0,3,5,-1,0,5,8,0,0,1,14,0),vi(0,3,5,-1,0,6,10,0,0,1,18,0),vi(0,4,5,-2,0,7,10,1,0,2,16,1),vi(0,5,5,-3,0,8,10,1,0,3,14,2),vi(0,5,6,-3,0,9,12,1,0,3,16,2),vi(0,6,6,-3,0,10,14,1,0,4,18,3),vi(0,6,7,-4,0,11,15,1,0,4,20,3),vi(0,7,8,-4,0,12,17,2,0,5,22,4),vi(0,7,8,-4,0,13,19,2,0,5,24,4),vi(0,7,9,-4,0,14,21,2,0,5,26,4),vi(0,8,9,-5,0,15,22,2,0,6,28,5),vi(0,8,10,-5,0,16,24,2,0,6,30,5),vi(0,8,11,-5,0,17,26,2,0,6,32,5),vi(0,9,11,-5,0,18,28,2,0,7,34,6),vi(0,9,12,-6,0,19,29,2,0,7,36,6),vi(0,10,13,-6,0,20,31,3,0,8,38,7),vi(0,10,13,-6,0,21,33,3,0,8,40,7),vi(0,10,14,-6,0,22,35,3,0,8,42,7),vi(0,11,14,-7,0,23,36,3,0,9,44,8),vi(0,11,15,-7,0,24,38,3,0,9,46,8)],hse=cse,dse=["duration","easing","delay"],fse={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},pse={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function FN(e){return`${Math.round(e)}ms`}function mse(e){if(!e)return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function gse(e){const t=Ee({},fse,e.easing),r=Ee({},pse,e.duration);return Ee({getAutoHeightDuration:mse,create:(n=["all"],a={})=>{const{duration:s=r.standard,easing:o=t.easeInOut,delay:l=0}=a;return Er(a,dse),(Array.isArray(n)?n:[n]).map(u=>`${u} ${typeof s=="string"?s:FN(s)} ${o} ${typeof l=="string"?l:FN(l)}`).join(",")}},e,{easing:t,duration:r})}const vse={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},yse=vse,xse=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function dG(e={},...t){const{mixins:r={},palette:i={},transitions:n={},typography:a={}}=e,s=Er(e,xse);if(e.vars)throw new Error(Eg(18));const o=ise(i),l=oE(e);let u=xl(l,{mixins:Uae(l.breakpoints,r),palette:o,shadows:hse.slice(),typography:sse(o,a),transitions:gse(n),zIndex:Ee({},yse)});return u=xl(u,s),u=t.reduce((h,c)=>xl(h,c),u),u.unstable_sxConfig=Ee({},aE,s==null?void 0:s.unstable_sxConfig),u.unstable_sx=function(c){return sE({sx:c,theme:this})},u}const bse=dG(),vI=bse;function yI(){const e=dI(vI);return e[F2]||e}function pn({props:e,name:t}){return hG({props:e,name:t,defaultTheme:vI,themeId:F2})}const wse=e=>Pw(e)&&e!=="classes",_se=cG({themeId:F2,defaultTheme:vI,rootShouldForwardProp:wse}),nr=_se,Sse=e=>{let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,(t/100).toFixed(2)},UN=Sse;function Ese(e){return Zi("MuiFormGroup",e)}fn("MuiFormGroup",["root","row","error"]);const Mse=X.createContext(void 0),Cse=Mse;function xI(){return X.useContext(Cse)}function fG({props:e,states:t,muiFormControl:r}){return t.reduce((i,n)=>(i[n]=e[n],r&&typeof e[n]>"u"&&(i[n]=r[n]),i),{})}const Ase=["className","row"],Tse=e=>{const{classes:t,row:r,error:i}=e;return dn({root:["root",r&&"row",i&&"error"]},Ese,t)},Pse=nr("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.row&&t.row]}})(({ownerState:e})=>Ee({display:"flex",flexDirection:"column",flexWrap:"wrap"},e.row&&{flexDirection:"row"})),Dse=X.forwardRef(function(t,r){const i=pn({props:t,name:"MuiFormGroup"}),{className:n,row:a=!1}=i,s=Er(i,Ase),o=xI(),l=fG({props:i,muiFormControl:o,states:["error"]}),u=Ee({},i,{row:a,error:l.error}),h=Tse(u);return Q(Pse,Ee({className:fr(h.root,n),ownerState:u,ref:r},s))}),Ose=Dse,Ise=Fae({createStyledComponent:nr("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root}),useThemeProps:e=>pn({props:e,name:"MuiStack"})}),Rse=Ise;function kse(e){return Zi("MuiTypography",e)}fn("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const Lse=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],Bse=e=>{const{align:t,gutterBottom:r,noWrap:i,paragraph:n,variant:a,classes:s}=e,o={root:["root",a,e.align!=="inherit"&&`align${zt(t)}`,r&&"gutterBottom",i&&"noWrap",n&&"paragraph"]};return dn(o,kse,s)},Nse=nr("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.variant&&t[r.variant],r.align!=="inherit"&&t[`align${zt(r.align)}`],r.noWrap&&t.noWrap,r.gutterBottom&&t.gutterBottom,r.paragraph&&t.paragraph]}})(({theme:e,ownerState:t})=>Ee({margin:0},t.variant==="inherit"&&{font:"inherit"},t.variant!=="inherit"&&e.typography[t.variant],t.align!=="inherit"&&{textAlign:t.align},t.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t.gutterBottom&&{marginBottom:"0.35em"},t.paragraph&&{marginBottom:16})),jN={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},zse={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},Fse=e=>zse[e]||e,Use=X.forwardRef(function(t,r){const i=pn({props:t,name:"MuiTypography"}),n=Fse(i.color),a=fI(Ee({},i,{color:n})),{align:s="inherit",className:o,component:l,gutterBottom:u=!1,noWrap:h=!1,paragraph:c=!1,variant:d="body1",variantMapping:f=jN}=a,m=Er(a,Lse),p=Ee({},a,{align:s,color:n,className:o,component:l,gutterBottom:u,noWrap:h,paragraph:c,variant:d,variantMapping:f}),g=l||(c?"p":f[d]||jN[d])||"span",v=Bse(p);return Q(Nse,Ee({as:g,ref:r,ownerState:p,className:fr(v.root,o)},m))}),O_=Use;function jse(e){return Zi("MuiFormControlLabel",e)}const Vse=fn("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),I0=Vse,Hse=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],Gse=e=>{const{classes:t,disabled:r,labelPlacement:i,error:n,required:a}=e,s={root:["root",r&&"disabled",`labelPlacement${zt(i)}`,n&&"error",a&&"required"],label:["label",r&&"disabled"],asterisk:["asterisk",n&&"error"]};return dn(s,jse,t)},Wse=nr("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{[`& .${I0.label}`]:t.label},t.root,t[`labelPlacement${zt(r.labelPlacement)}`]]}})(({theme:e,ownerState:t})=>Ee({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${I0.disabled}`]:{cursor:"default"}},t.labelPlacement==="start"&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},t.labelPlacement==="top"&&{flexDirection:"column-reverse",marginLeft:16},t.labelPlacement==="bottom"&&{flexDirection:"column",marginLeft:16},{[`& .${I0.label}`]:{[`&.${I0.disabled}`]:{color:(e.vars||e).palette.text.disabled}}})),$se=nr("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})(({theme:e})=>({[`&.${I0.error}`]:{color:(e.vars||e).palette.error.main}})),Yse=X.forwardRef(function(t,r){var i,n;const a=pn({props:t,name:"MuiFormControlLabel"}),{className:s,componentsProps:o={},control:l,disabled:u,disableTypography:h,label:c,labelPlacement:d="end",required:f,slotProps:m={}}=a,p=Er(a,Hse),g=xI(),v=(i=u??l.props.disabled)!=null?i:g==null?void 0:g.disabled,y=f??l.props.required,x={disabled:v,required:y};["checked","name","onChange","value","inputRef"].forEach(C=>{typeof l.props[C]>"u"&&typeof a[C]<"u"&&(x[C]=a[C])});const b=fG({props:a,muiFormControl:g,states:["error"]}),_=Ee({},a,{disabled:v,labelPlacement:d,required:y,error:b.error}),w=Gse(_),E=(n=m.typography)!=null?n:o.typography;let S=c;return S!=null&&S.type!==O_&&!h&&(S=Q(O_,Ee({component:"span"},E,{className:fr(w.label,E==null?void 0:E.className),children:S}))),ct(Wse,Ee({className:fr(w.root,s),ownerState:_,ref:r},p,{children:[X.cloneElement(l,x),y?ct(Rse,{direction:"row",alignItems:"center",children:[S,ct($se,{ownerState:_,"aria-hidden":!0,className:w.asterisk,children:[" ","*"]})]}):S]}))}),qse=Yse;function I_(e,t){return I_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},I_(e,t)}function pG(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,I_(e,t)}const VN={disabled:!1},R_=jn.createContext(null);var Xse=function(t){return t.scrollTop},R0="unmounted",kd="exited",Ld="entering",im="entered",MP="exiting",kc=function(e){pG(t,e);function t(i,n){var a;a=e.call(this,i,n)||this;var s=n,o=s&&!s.isMounting?i.enter:i.appear,l;return a.appearStatus=null,i.in?o?(l=kd,a.appearStatus=Ld):l=im:i.unmountOnExit||i.mountOnEnter?l=R0:l=kd,a.state={status:l},a.nextCallback=null,a}t.getDerivedStateFromProps=function(n,a){var s=n.in;return s&&a.status===R0?{status:kd}:null};var r=t.prototype;return r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(n){var a=null;if(n!==this.props){var s=this.state.status;this.props.in?s!==Ld&&s!==im&&(a=Ld):(s===Ld||s===im)&&(a=MP)}this.updateStatus(!1,a)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var n=this.props.timeout,a,s,o;return a=s=o=n,n!=null&&typeof n!="number"&&(a=n.exit,s=n.enter,o=n.appear!==void 0?n.appear:s),{exit:a,enter:s,appear:o}},r.updateStatus=function(n,a){if(n===void 0&&(n=!1),a!==null)if(this.cancelNextCallback(),a===Ld){if(this.props.unmountOnExit||this.props.mountOnEnter){var s=this.props.nodeRef?this.props.nodeRef.current:Ix.findDOMNode(this);s&&Xse(s)}this.performEnter(n)}else this.performExit();else this.props.unmountOnExit&&this.state.status===kd&&this.setState({status:R0})},r.performEnter=function(n){var a=this,s=this.props.enter,o=this.context?this.context.isMounting:n,l=this.props.nodeRef?[o]:[Ix.findDOMNode(this),o],u=l[0],h=l[1],c=this.getTimeouts(),d=o?c.appear:c.enter;if(!n&&!s||VN.disabled){this.safeSetState({status:im},function(){a.props.onEntered(u)});return}this.props.onEnter(u,h),this.safeSetState({status:Ld},function(){a.props.onEntering(u,h),a.onTransitionEnd(d,function(){a.safeSetState({status:im},function(){a.props.onEntered(u,h)})})})},r.performExit=function(){var n=this,a=this.props.exit,s=this.getTimeouts(),o=this.props.nodeRef?void 0:Ix.findDOMNode(this);if(!a||VN.disabled){this.safeSetState({status:kd},function(){n.props.onExited(o)});return}this.props.onExit(o),this.safeSetState({status:MP},function(){n.props.onExiting(o),n.onTransitionEnd(s.exit,function(){n.safeSetState({status:kd},function(){n.props.onExited(o)})})})},r.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(n,a){a=this.setNextCallback(a),this.setState(n,a)},r.setNextCallback=function(n){var a=this,s=!0;return this.nextCallback=function(o){s&&(s=!1,a.nextCallback=null,n(o))},this.nextCallback.cancel=function(){s=!1},this.nextCallback},r.onTransitionEnd=function(n,a){this.setNextCallback(a);var s=this.props.nodeRef?this.props.nodeRef.current:Ix.findDOMNode(this),o=n==null&&!this.props.addEndListener;if(!s||o){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[s,this.nextCallback],u=l[0],h=l[1];this.props.addEndListener(u,h)}n!=null&&setTimeout(this.nextCallback,n)},r.render=function(){var n=this.state.status;if(n===R0)return null;var a=this.props,s=a.children;a.in,a.mountOnEnter,a.unmountOnExit,a.appear,a.enter,a.exit,a.timeout,a.addEndListener,a.onEnter,a.onEntering,a.onEntered,a.onExit,a.onExiting,a.onExited,a.nodeRef;var o=Er(a,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return jn.createElement(R_.Provider,{value:null},typeof s=="function"?s(n,o):jn.cloneElement(jn.Children.only(s),o))},t}(jn.Component);kc.contextType=R_;kc.propTypes={};function vp(){}kc.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:vp,onEntering:vp,onEntered:vp,onExit:vp,onExiting:vp,onExited:vp};kc.UNMOUNTED=R0;kc.EXITED=kd;kc.ENTERING=Ld;kc.ENTERED=im;kc.EXITING=MP;const Qse=kc;function ht(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bI(e,t){var r=function(a){return t&&X.isValidElement(a)?t(a):a},i=Object.create(null);return e&&X.Children.map(e,function(n){return n}).forEach(function(n){i[n.key]=r(n)}),i}function Kse(e,t){e=e||{},t=t||{};function r(h){return h in t?t[h]:e[h]}var i=Object.create(null),n=[];for(var a in e)a in t?n.length&&(i[a]=n,n=[]):n.push(a);var s,o={};for(var l in t){if(i[l])for(s=0;s<i[l].length;s++){var u=i[l][s];o[i[l][s]]=r(u)}o[l]=r(l)}for(s=0;s<n.length;s++)o[n[s]]=r(n[s]);return o}function ef(e,t,r){return r[t]!=null?r[t]:e.props[t]}function Zse(e,t){return bI(e.children,function(r){return X.cloneElement(r,{onExited:t.bind(null,r),in:!0,appear:ef(r,"appear",e),enter:ef(r,"enter",e),exit:ef(r,"exit",e)})})}function Jse(e,t,r){var i=bI(e.children),n=Kse(t,i);return Object.keys(n).forEach(function(a){var s=n[a];if(X.isValidElement(s)){var o=a in t,l=a in i,u=t[a],h=X.isValidElement(u)&&!u.props.in;l&&(!o||h)?n[a]=X.cloneElement(s,{onExited:r.bind(null,s),in:!0,exit:ef(s,"exit",e),enter:ef(s,"enter",e)}):!l&&o&&!h?n[a]=X.cloneElement(s,{in:!1}):l&&o&&X.isValidElement(u)&&(n[a]=X.cloneElement(s,{onExited:r.bind(null,s),in:u.props.in,exit:ef(s,"exit",e),enter:ef(s,"enter",e)}))}}),n}var eoe=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},toe={component:"div",childFactory:function(t){return t}},wI=function(e){pG(t,e);function t(i,n){var a;a=e.call(this,i,n)||this;var s=a.handleExited.bind(ht(a));return a.state={contextValue:{isMounting:!0},handleExited:s,firstRender:!0},a}var r=t.prototype;return r.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},r.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(n,a){var s=a.children,o=a.handleExited,l=a.firstRender;return{children:l?Zse(n,o):Jse(n,s,o),firstRender:!1}},r.handleExited=function(n,a){var s=bI(this.props.children);n.key in s||(n.props.onExited&&n.props.onExited(a),this.mounted&&this.setState(function(o){var l=Ee({},o.children);return delete l[n.key],{children:l}}))},r.render=function(){var n=this.props,a=n.component,s=n.childFactory,o=Er(n,["component","childFactory"]),l=this.state.contextValue,u=eoe(this.state.children).map(s);return delete o.appear,delete o.enter,delete o.exit,a===null?jn.createElement(R_.Provider,{value:l},u):jn.createElement(R_.Provider,{value:l},jn.createElement(a,o,u))},t}(jn.Component);wI.propTypes={};wI.defaultProps=toe;const roe=wI;function ioe(e){const{className:t,classes:r,pulsate:i=!1,rippleX:n,rippleY:a,rippleSize:s,in:o,onExited:l,timeout:u}=e,[h,c]=X.useState(!1),d=fr(t,r.ripple,r.rippleVisible,i&&r.ripplePulsate),f={width:s,height:s,top:-(s/2)+a,left:-(s/2)+n},m=fr(r.child,h&&r.childLeaving,i&&r.childPulsate);return!o&&!h&&c(!0),X.useEffect(()=>{if(!o&&l!=null){const p=setTimeout(l,u);return()=>{clearTimeout(p)}}},[l,o,u]),Q("span",{className:d,style:f,children:Q("span",{className:m})})}const noe=fn("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),bo=noe,aoe=["center","classes","className"];let uE=e=>e,HN,GN,WN,$N;const CP=550,soe=80,ooe=ud(HN||(HN=uE`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),loe=ud(GN||(GN=uE`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),uoe=ud(WN||(WN=uE`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),coe=nr("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),hoe=nr(ioe,{name:"MuiTouchRipple",slot:"Ripple"})($N||($N=uE`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),bo.rippleVisible,ooe,CP,({theme:e})=>e.transitions.easing.easeInOut,bo.ripplePulsate,({theme:e})=>e.transitions.duration.shorter,bo.child,bo.childLeaving,loe,CP,({theme:e})=>e.transitions.easing.easeInOut,bo.childPulsate,uoe,({theme:e})=>e.transitions.easing.easeInOut),doe=X.forwardRef(function(t,r){const i=pn({props:t,name:"MuiTouchRipple"}),{center:n=!1,classes:a={},className:s}=i,o=Er(i,aoe),[l,u]=X.useState([]),h=X.useRef(0),c=X.useRef(null);X.useEffect(()=>{c.current&&(c.current(),c.current=null)},[l]);const d=X.useRef(!1),f=X.useRef(0),m=X.useRef(null),p=X.useRef(null);X.useEffect(()=>()=>{f.current&&clearTimeout(f.current)},[]);const g=X.useCallback(b=>{const{pulsate:_,rippleX:w,rippleY:E,rippleSize:S,cb:C}=b;u(M=>[...M,Q(hoe,{classes:{ripple:fr(a.ripple,bo.ripple),rippleVisible:fr(a.rippleVisible,bo.rippleVisible),ripplePulsate:fr(a.ripplePulsate,bo.ripplePulsate),child:fr(a.child,bo.child),childLeaving:fr(a.childLeaving,bo.childLeaving),childPulsate:fr(a.childPulsate,bo.childPulsate)},timeout:CP,pulsate:_,rippleX:w,rippleY:E,rippleSize:S},h.current)]),h.current+=1,c.current=C},[a]),v=X.useCallback((b={},_={},w=()=>{})=>{const{pulsate:E=!1,center:S=n||_.pulsate,fakeElement:C=!1}=_;if((b==null?void 0:b.type)==="mousedown"&&d.current){d.current=!1;return}(b==null?void 0:b.type)==="touchstart"&&(d.current=!0);const M=C?null:p.current,P=M?M.getBoundingClientRect():{width:0,height:0,left:0,top:0};let I,k,L;if(S||b===void 0||b.clientX===0&&b.clientY===0||!b.clientX&&!b.touches)I=Math.round(P.width/2),k=Math.round(P.height/2);else{const{clientX:O,clientY:F}=b.touches&&b.touches.length>0?b.touches[0]:b;I=Math.round(O-P.left),k=Math.round(F-P.top)}if(S)L=Math.sqrt((2*P.width**2+P.height**2)/3),L%2===0&&(L+=1);else{const O=Math.max(Math.abs((M?M.clientWidth:0)-I),I)*2+2,F=Math.max(Math.abs((M?M.clientHeight:0)-k),k)*2+2;L=Math.sqrt(O**2+F**2)}b!=null&&b.touches?m.current===null&&(m.current=()=>{g({pulsate:E,rippleX:I,rippleY:k,rippleSize:L,cb:w})},f.current=setTimeout(()=>{m.current&&(m.current(),m.current=null)},soe)):g({pulsate:E,rippleX:I,rippleY:k,rippleSize:L,cb:w})},[n,g]),y=X.useCallback(()=>{v({},{pulsate:!0})},[v]),x=X.useCallback((b,_)=>{if(clearTimeout(f.current),(b==null?void 0:b.type)==="touchend"&&m.current){m.current(),m.current=null,f.current=setTimeout(()=>{x(b,_)});return}m.current=null,u(w=>w.length>0?w.slice(1):w),c.current=_},[]);return X.useImperativeHandle(r,()=>({pulsate:y,start:v,stop:x}),[y,v,x]),Q(coe,Ee({className:fr(bo.root,a.root,s),ref:p},o,{children:Q(roe,{component:null,exit:!0,children:l})}))}),foe=doe;function poe(e){return Zi("MuiButtonBase",e)}const moe=fn("MuiButtonBase",["root","disabled","focusVisible"]),goe=moe,voe=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],yoe=e=>{const{disabled:t,focusVisible:r,focusVisibleClassName:i,classes:n}=e,s=dn({root:["root",t&&"disabled",r&&"focusVisible"]},poe,n);return r&&i&&(s.root+=` ${i}`),s},xoe=nr("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${goe.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),boe=X.forwardRef(function(t,r){const i=pn({props:t,name:"MuiButtonBase"}),{action:n,centerRipple:a=!1,children:s,className:o,component:l="button",disabled:u=!1,disableRipple:h=!1,disableTouchRipple:c=!1,focusRipple:d=!1,LinkComponent:f="a",onBlur:m,onClick:p,onContextMenu:g,onDragLeave:v,onFocus:y,onFocusVisible:x,onKeyDown:b,onKeyUp:_,onMouseDown:w,onMouseLeave:E,onMouseUp:S,onTouchEnd:C,onTouchMove:M,onTouchStart:P,tabIndex:I=0,TouchRippleProps:k,touchRippleRef:L,type:O}=i,F=Er(i,voe),z=X.useRef(null),B=X.useRef(null),V=Kh(B,L),{isFocusVisibleRef:R,onFocus:H,onBlur:W,ref:te}=zH(),[G,ie]=X.useState(!1);u&&G&&ie(!1),X.useImperativeHandle(n,()=>({focusVisible:()=>{ie(!0),z.current.focus()}}),[]);const[q,le]=X.useState(!1);X.useEffect(()=>{le(!0)},[]);const ae=q&&!h&&!u;X.useEffect(()=>{G&&d&&!h&&q&&B.current.pulsate()},[h,d,G,q]);function Z(Pe,we,Ze=c){return Jd(Ke=>(we&&we(Ke),!Ze&&B.current&&B.current[Pe](Ke),!0))}const he=Z("start",w),ge=Z("stop",g),xe=Z("stop",v),ye=Z("stop",S),Ne=Z("stop",Pe=>{G&&Pe.preventDefault(),E&&E(Pe)}),Re=Z("start",P),qe=Z("stop",C),se=Z("stop",M),ke=Z("stop",Pe=>{W(Pe),R.current===!1&&ie(!1),m&&m(Pe)},!1),Be=Jd(Pe=>{z.current||(z.current=Pe.currentTarget),H(Pe),R.current===!0&&(ie(!0),x&&x(Pe)),y&&y(Pe)}),at=()=>{const Pe=z.current;return l&&l!=="button"&&!(Pe.tagName==="A"&&Pe.href)},Ge=X.useRef(!1),$=Jd(Pe=>{d&&!Ge.current&&G&&B.current&&Pe.key===" "&&(Ge.current=!0,B.current.stop(Pe,()=>{B.current.start(Pe)})),Pe.target===Pe.currentTarget&&at()&&Pe.key===" "&&Pe.preventDefault(),b&&b(Pe),Pe.target===Pe.currentTarget&&at()&&Pe.key==="Enter"&&!u&&(Pe.preventDefault(),p&&p(Pe))}),U=Jd(Pe=>{d&&Pe.key===" "&&B.current&&G&&!Pe.defaultPrevented&&(Ge.current=!1,B.current.stop(Pe,()=>{B.current.pulsate(Pe)})),_&&_(Pe),p&&Pe.target===Pe.currentTarget&&at()&&Pe.key===" "&&!Pe.defaultPrevented&&p(Pe)});let fe=l;fe==="button"&&(F.href||F.to)&&(fe=f);const Te={};fe==="button"?(Te.type=O===void 0?"button":O,Te.disabled=u):(!F.href&&!F.to&&(Te.role="button"),u&&(Te["aria-disabled"]=u));const Ae=Kh(r,te,z),Fe=Ee({},i,{centerRipple:a,component:l,disabled:u,disableRipple:h,disableTouchRipple:c,focusRipple:d,tabIndex:I,focusVisible:G}),et=yoe(Fe);return ct(xoe,Ee({as:fe,className:fr(et.root,o),ownerState:Fe,onBlur:ke,onClick:p,onContextMenu:ge,onFocus:Be,onKeyDown:$,onKeyUp:U,onMouseDown:he,onMouseLeave:Ne,onMouseUp:ye,onDragLeave:xe,onTouchEnd:qe,onTouchMove:se,onTouchStart:Re,ref:Ae,tabIndex:u?-1:I,type:O},Te,F,{children:[s,ae?Q(foe,Ee({ref:V,center:a},k)):null]}))}),_I=boe;function woe(e){return Zi("PrivateSwitchBase",e)}fn("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const _oe=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],Soe=e=>{const{classes:t,checked:r,disabled:i,edge:n}=e,a={root:["root",r&&"checked",i&&"disabled",n&&`edge${zt(n)}`],input:["input"]};return dn(a,woe,t)},Eoe=nr(_I)(({ownerState:e})=>Ee({padding:9,borderRadius:"50%"},e.edge==="start"&&{marginLeft:e.size==="small"?-3:-12},e.edge==="end"&&{marginRight:e.size==="small"?-3:-12})),Moe=nr("input")({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),Coe=X.forwardRef(function(t,r){const{autoFocus:i,checked:n,checkedIcon:a,className:s,defaultChecked:o,disabled:l,disableFocusRipple:u=!1,edge:h=!1,icon:c,id:d,inputProps:f,inputRef:m,name:p,onBlur:g,onChange:v,onFocus:y,readOnly:x,required:b=!1,tabIndex:_,type:w,value:E}=t,S=Er(t,_oe),[C,M]=NH({controlled:n,default:!!o,name:"SwitchBase",state:"checked"}),P=xI(),I=V=>{y&&y(V),P&&P.onFocus&&P.onFocus(V)},k=V=>{g&&g(V),P&&P.onBlur&&P.onBlur(V)},L=V=>{if(V.nativeEvent.defaultPrevented)return;const R=V.target.checked;M(R),v&&v(V,R)};let O=l;P&&typeof O>"u"&&(O=P.disabled);const F=w==="checkbox"||w==="radio",z=Ee({},t,{checked:C,disabled:O,disableFocusRipple:u,edge:h}),B=Soe(z);return ct(Eoe,Ee({component:"span",className:fr(B.root,s),centerRipple:!0,focusRipple:!u,disabled:O,tabIndex:null,role:void 0,onFocus:I,onBlur:k,ownerState:z,ref:r},S,{children:[Q(Moe,Ee({autoFocus:i,checked:n,defaultChecked:o,className:B.input,disabled:O,id:F?d:void 0,name:p,onChange:L,readOnly:x,ref:m,required:b,ownerState:z,tabIndex:_,type:w},w==="checkbox"&&E===void 0?{}:{value:E},f)),C?a:c]}))}),Aoe=Coe;function Toe(e){return Zi("MuiSwitch",e)}const Poe=fn("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),La=Poe,Doe=["className","color","edge","size","sx"],Ooe=e=>{const{classes:t,edge:r,size:i,color:n,checked:a,disabled:s}=e,o={root:["root",r&&`edge${zt(r)}`,`size${zt(i)}`],switchBase:["switchBase",`color${zt(n)}`,a&&"checked",s&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},l=dn(o,Toe,t);return Ee({},t,l)},Ioe=nr("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.edge&&t[`edge${zt(r.edge)}`],t[`size${zt(r.size)}`]]}})(({ownerState:e})=>Ee({display:"inline-flex",width:34+12*2,height:14+12*2,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"}},e.edge==="start"&&{marginLeft:-8},e.edge==="end"&&{marginRight:-8},e.size==="small"&&{width:40,height:24,padding:7,[`& .${La.thumb}`]:{width:16,height:16},[`& .${La.switchBase}`]:{padding:4,[`&.${La.checked}`]:{transform:"translateX(16px)"}}})),Roe=nr(Aoe,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.switchBase,{[`& .${La.input}`]:t.input},r.color!=="default"&&t[`color${zt(r.color)}`]]}})(({theme:e})=>({position:"absolute",top:0,left:0,zIndex:1,color:e.vars?e.vars.palette.Switch.defaultColor:`${e.palette.mode==="light"?e.palette.common.white:e.palette.grey[300]}`,transition:e.transitions.create(["left","transform"],{duration:e.transitions.duration.shortest}),[`&.${La.checked}`]:{transform:"translateX(20px)"},[`&.${La.disabled}`]:{color:e.vars?e.vars.palette.Switch.defaultDisabledColor:`${e.palette.mode==="light"?e.palette.grey[100]:e.palette.grey[600]}`},[`&.${La.checked} + .${La.track}`]:{opacity:.5},[`&.${La.disabled} + .${La.track}`]:{opacity:e.vars?e.vars.opacity.switchTrackDisabled:`${e.palette.mode==="light"?.12:.2}`},[`& .${La.input}`]:{left:"-100%",width:"300%"}}),({theme:e,ownerState:t})=>Ee({"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:uu(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},t.color!=="default"&&{[`&.${La.checked}`]:{color:(e.vars||e).palette[t.color].main,"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:uu(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${La.disabled}`]:{color:e.vars?e.vars.palette.Switch[`${t.color}DisabledColor`]:`${e.palette.mode==="light"?gI(e.palette[t.color].main,.62):mI(e.palette[t.color].main,.55)}`}},[`&.${La.checked} + .${La.track}`]:{backgroundColor:(e.vars||e).palette[t.color].main}})),koe=nr("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(e,t)=>t.track})(({theme:e})=>({height:"100%",width:"100%",borderRadius:14/2,zIndex:-1,transition:e.transitions.create(["opacity","background-color"],{duration:e.transitions.duration.shortest}),backgroundColor:e.vars?e.vars.palette.common.onBackground:`${e.palette.mode==="light"?e.palette.common.black:e.palette.common.white}`,opacity:e.vars?e.vars.opacity.switchTrack:`${e.palette.mode==="light"?.38:.3}`})),Loe=nr("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(e,t)=>t.thumb})(({theme:e})=>({boxShadow:(e.vars||e).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"})),Boe=X.forwardRef(function(t,r){const i=pn({props:t,name:"MuiSwitch"}),{className:n,color:a="primary",edge:s=!1,size:o="medium",sx:l}=i,u=Er(i,Doe),h=Ee({},i,{color:a,edge:s,size:o}),c=Ooe(h),d=Q(Loe,{className:c.thumb,ownerState:h});return ct(Ioe,{className:fr(c.root,n),sx:l,ownerState:h,children:[Q(Roe,Ee({type:"checkbox",icon:d,checkedIcon:d,ref:r,ownerState:h},u,{classes:Ee({},c,{root:c.switchBase})})),Q(koe,{className:c.track,ownerState:h})]})}),Noe=Boe;function mG({option:e}){const t=nr(Noe)(({theme:a})=>({width:60,height:34,padding:9,"& .MuiSwitch-switchBase":{margin:1,padding:0,transform:"translateX(6px)","&.Mui-checked":{color:"#fff",transform:"translateX(22px)","& .MuiSwitch-thumb:before":{backgroundImage:`url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="20" width="20" viewBox="0 0 20 20"><path fill="${encodeURIComponent("#fff")}" d="M4.2 2.5l-.7 1.8-1.8.7 1.8.7.7 1.8.6-1.8L6.7 5l-1.9-.7-.6-1.8zm15 8.3a6.7 6.7 0 11-6.6-6.6 5.8 5.8 0 006.6 6.6z"/></svg>')`},"& + .MuiSwitch-track":{opacity:1,backgroundColor:a.palette.mode==="dark"?"#8796A5":"#aab4be"}}},"& .MuiSwitch-thumb":{backgroundColor:a.palette.mode==="dark"?"#003892":" #682ae9",width:29,height:29,"&:before":{content:"''",position:"absolute",width:"100%",height:"100%",left:0,top:0,backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundImage:`url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="20" width="20" viewBox="0 0 20 20"><path fill="${encodeURIComponent("#fff")}" d="M9.305 1.667V3.75h1.389V1.667h-1.39zm-4.707 1.95l-.982.982L5.09 6.072l.982-.982-1.473-1.473zm10.802 0L13.927 5.09l.982.982 1.473-1.473-.982-.982zM10 5.139a4.872 4.872 0 00-4.862 4.86A4.872 4.872 0 0010 14.862 4.872 4.872 0 0014.86 10 4.872 4.872 0 0010 5.139zm0 1.389A3.462 3.462 0 0113.471 10a3.462 3.462 0 01-3.473 3.472A3.462 3.462 0 016.527 10 3.462 3.462 0 0110 6.528zM1.665 9.305v1.39h2.083v-1.39H1.666zm14.583 0v1.39h2.084v-1.39h-2.084zM5.09 13.928L3.616 15.4l.982.982 1.473-1.473-.982-.982zm9.82 0l-.982.982 1.473 1.473.982-.982-1.473-1.473zM9.305 16.25v2.083h1.389V16.25h-1.39z"/></svg>')`}},"& .MuiSwitch-track":{opacity:1,backgroundColor:a.palette.mode==="dark"?"#8796A5":"#aab4be",borderRadius:10}})),[r,i]=X.useState(localStorage.getItem("isDark")==="true"||!1);return X.useEffect(()=>{const a=document.body,s=document.querySelectorAll(".div");r?(a.classList.add("dark-mode"),s.forEach(o=>{o.classList.add("dark")})):(a.classList.remove("dark-mode"),s.forEach(o=>{o.classList.remove("dark")})),localStorage.setItem("isDark",r)},[r,e]),Q(Ose,{children:Q(qse,{control:Q(t,{sx:{m:0},checked:r,onChange:()=>{i(!r)}})})})}function SI({option:e}){return ct("div",{className:"navbar container",children:[Q(mG,{option:e}),ct("ul",{children:[Q("li",{children:Q(hf,{to:"/pages/what",children:".what()"})}),Q("li",{children:Q(hf,{to:"/pages/whome",children:".who()"})}),Q("li",{children:Q(hf,{to:"/pages/where",children:".where()"})})]})]})}const zoe="/assets/razia_back-184b58cf.png",Foe="/assets/poetry-0b68728e.jpg",Uoe="/assets/intro-649a55fe.jpg",joe=X.forwardRef(function({content:t,title:r},i){const n=X.useRef();X.useImperativeHandle(i,()=>({content:Q("img",{src:Foe,height:"100%",width:"100%"}),content1:Q("img",{src:Uoe,height:"100%",width:"100%"}),content2:Q("iframe",{width:"560",height:"315",src:"https://www.youtube.com/embed/UZCHdc-a5cQ?si=moY4NQLyFm3Tk7-T",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowfullscreen:!0}),title:"Who is better the Rumi?",title1:"Introvets issues 😆",title2:"No K-pop, we ain't the same",open(){n.current.showModal()},dialog:n}));function a(){n.current.close()}return ct("dialog",{ref:n,id:"dialog",children:[ct("div",{className:"top",children:[Q("h3",{children:r})," ",Q("button",{onClick:a,"aria-label":"close",className:"x",children:"❌"})]}),Q("div",{className:"content",children:t})]})});function Voe(){if(console&&console.warn){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];typeof t[0]=="string"&&(t[0]=`react-i18next:: ${t[0]}`),console.warn(...t)}}const YN={};function AP(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];typeof t[0]=="string"&&YN[t[0]]||(typeof t[0]=="string"&&(YN[t[0]]=new Date),Voe(...t))}const gG=(e,t)=>()=>{if(e.isInitialized)t();else{const r=()=>{setTimeout(()=>{e.off("initialized",r)},0),t()};e.on("initialized",r)}};function qN(e,t,r){e.loadNamespaces(t,gG(e,r))}function XN(e,t,r,i){typeof r=="string"&&(r=[r]),r.forEach(n=>{e.options.ns.indexOf(n)<0&&e.options.ns.push(n)}),e.loadLanguages(t,gG(e,i))}function Hoe(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=t.languages[0],n=t.options?t.options.fallbackLng:!1,a=t.languages[t.languages.length-1];if(i.toLowerCase()==="cimode")return!0;const s=(o,l)=>{const u=t.services.backendConnector.state[`${o}|${l}`];return u===-1||u===2};return r.bindI18n&&r.bindI18n.indexOf("languageChanging")>-1&&t.services.backendConnector.backend&&t.isLanguageChangingTo&&!s(t.isLanguageChangingTo,e)?!1:!!(t.hasResourceBundle(i,e)||!t.services.backendConnector.backend||t.options.resources&&!t.options.partialBundledLanguages||s(i,e)&&(!n||s(a,e)))}function Goe(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return!t.languages||!t.languages.length?(AP("i18n.languages were undefined or empty",t.languages),!0):t.options.ignoreJSONStructure!==void 0?t.hasLoadedNamespace(e,{lng:r.lng,precheck:(n,a)=>{if(r.bindI18n&&r.bindI18n.indexOf("languageChanging")>-1&&n.services.backendConnector.backend&&n.isLanguageChangingTo&&!a(n.isLanguageChangingTo,e))return!1}}):Hoe(e,t,r)}const Woe=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,$oe={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},Yoe=e=>$oe[e],qoe=e=>e.replace(Woe,Yoe);let TP={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:qoe};function Xoe(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};TP={...TP,...e}}function Qoe(){return TP}let vG;function Koe(e){vG=e}function Zoe(){return vG}const Joe={type:"3rdParty",init(e){Xoe(e.options.react),Koe(e)}},ele=X.createContext();class tle{constructor(){this.usedNamespaces={}}addUsedNamespaces(t){t.forEach(r=>{this.usedNamespaces[r]||(this.usedNamespaces[r]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const rle=(e,t)=>{const r=X.useRef();return X.useEffect(()=>{r.current=t?r.current:e},[e,t]),r.current};function z1(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{i18n:r}=t,{i18n:i,defaultNS:n}=X.useContext(ele)||{},a=r||i||Zoe();if(a&&!a.reportNamespaces&&(a.reportNamespaces=new tle),!a){AP("You will need to pass in an i18next instance by using initReactI18next");const x=(_,w)=>typeof w=="string"?w:w&&typeof w=="object"&&typeof w.defaultValue=="string"?w.defaultValue:Array.isArray(_)?_[_.length-1]:_,b=[x,{},!1];return b.t=x,b.i18n={},b.ready=!1,b}a.options.react&&a.options.react.wait!==void 0&&AP("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const s={...Qoe(),...a.options.react,...t},{useSuspense:o,keyPrefix:l}=s;let u=e||n||a.options&&a.options.defaultNS;u=typeof u=="string"?[u]:u||["translation"],a.reportNamespaces.addUsedNamespaces&&a.reportNamespaces.addUsedNamespaces(u);const h=(a.isInitialized||a.initializedStoreOnce)&&u.every(x=>Goe(x,a,s));function c(){return a.getFixedT(t.lng||null,s.nsMode==="fallback"?u:u[0],l)}const[d,f]=X.useState(c);let m=u.join();t.lng&&(m=`${t.lng}${m}`);const p=rle(m),g=X.useRef(!0);X.useEffect(()=>{const{bindI18n:x,bindI18nStore:b}=s;g.current=!0,!h&&!o&&(t.lng?XN(a,t.lng,u,()=>{g.current&&f(c)}):qN(a,u,()=>{g.current&&f(c)})),h&&p&&p!==m&&g.current&&f(c);function _(){g.current&&f(c)}return x&&a&&a.on(x,_),b&&a&&a.store.on(b,_),()=>{g.current=!1,x&&a&&x.split(" ").forEach(w=>a.off(w,_)),b&&a&&b.split(" ").forEach(w=>a.store.off(w,_))}},[a,m]);const v=X.useRef(!0);X.useEffect(()=>{g.current&&!v.current&&f(c),v.current=!1},[a,l]);const y=[d,a,h];if(y.t=d,y.i18n=a,y.ready=h,h||!h&&!o)return y;throw new Promise(x=>{t.lng?XN(a,t.lng,u,()=>x()):qN(a,u,()=>x())})}const ile="/assets/html-b4da79c4.png",nle="/assets/css-bdcc009a.png",ale="/assets/Js-d60709c9.png",sle="/assets/react-00838373.png",ole="/assets/git-70728093.png",lle="/assets/tailwindcss-3aadc5a7.png",ule="/assets/bootstrap-b1ab896d.png",cle="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAABPlBMVEVMaXH9PfX/Yr5Nf//WSfZCgP+Nm+7/wxy/e87/OfNPhPxHg/3+OvX5QPbsQvn9O/X/vSZB88vsQvn/OvX/xR1xytJTh/r/xh2UY/v/xx3/wiORrttFgP9Hgf5Dgf9ycP0809u6Y/PUYfH/xB3+xB3/xhr+xB3/xR3+hIj/jXg91tv/OvNCgP9Af/9EgP86/sVHf/88+MdMff5dd/5Ue/5AhvzyPvToQvQ/j/f6O/M/mvM+pu38RPRldP0+sOg68cuvWPh6bPylXPlzb/w9u+SCafveRvXMTPZscfw76c+KZvo8yt2dX/k809k72tU74dKwjeGQY/rFT/eWYfk9w+Bo0tCcodziXe2/UvdI8chR6MrvUPB8v9WLsdi2Vfdb383BfOW7U/fWaer/Ruz/rz3Lc+j/i3j/epX/Udr+m15xqtfhAAAAaXRSTlMAT/4u/vwJ/gL9UL/Jejaz+tka51P7dSDdOX3N0IXssKXBm8LQt8XFvLx2//////////////////////////////////////////////////////////////////////////////////0hww2uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFiklEQVRYhZVXaVfaWhS9gIEbwNa5r7WTdnhDQhAQRQggKtaAIChDmZQKiP3/f+Ctc6fchFTb80XXgr3Ze59zk3MR8izM/gSDwSD/3/ubXkW++sq3vLu9vQr18eNWOCg+eLYwoN/8+zgYj+4S8eJV9SyXzaTfR7YCv0WBEcIbX1bmk25j2I/HrXorl00rSiwW05VIGD59Fr/xObQyNwk+USR4PabruqLouvE2/DQDRuj1pxDFU/2tQjYdIz+vG4aiGEYk8AQFRuhNKBQKPZiD8ajdiyeuqoVsRge8rhuGYeztJZPJd79kwOjV34D/+WjedzZ78YRVO8tl0hI+uZ9K5VORgDcDRq9XAD/1CwNVakCnBIDPn5bK5VNPBow2AB4Kzc3BrNPmAmwDgL84LTdvLi+b4UUGzPFgoDHsSwkKAan8abl5cnz7/cfxCzcDRq8pfuo3B+NfCKD479+WlpauXQwYvSL+Q6GHiRDAEuAE+6mLUuUS8OeHh4dLay4NX4WAriQg7RJwc/Lj29LhwcHR0UHUKeANxa/MJ4P7xpC3wOGACrgmeFVT1WVbAuYBQIJUQLxYtyOEGUjup6iA88ODI03VVE2TY/hkJ0gFeEbIBBxpGmGILnRw5YEI2OzHWYQuB82TWxCgasCgqppPPHc+MwNEwOgOIiTH0B4C6uD4+9I5EUAotCh2CpjOJ1TA8w6YCS7hizAAAkiEiz3IlyrEARcAFC/Z0y9E8X4TBNAIuQNpispN6IFwAH1QoRGYzsD0p39CBZAIXQdZRCAckBw1Ogv/TFem0wfAEwE9eJKBg5hnBKQHtgeE0Jp//vAw909MszsDAdSBu4n5UuXy9lqOADysryGEfOaj3/84Mc3BPRUgOVicAokAKHwIoWXTnExMEwwwAeBARCBOIstQtgAhILQ7MKEG3VmDCqAOpAggw4vyzQnJUCJgIex0B4PBoAt4IoA6cDSRHmVXEzgB3h7fd7vd+9m4M9pkAriDp5sAFqIYBbcb49lsNm50RkMqwKqBA9YDqQkLBJqqrQdRcHPUaTQaFA8CmINFAuiiF8Hq5qjT6YxGw/ZdjwioV51N5E1Y6CIn6LeHw+Fwk+JBADhIu5rwawK8mujftdvtuz7gmQDaA/mNQo+Sa47oI2E1nuj1+32KpwJyGWcE4nno7CKbg48gvNdLUDwIkBw4n+jOQeQE/1kAJZUoWle1Fqw0IEB6KbM5chGwUQ7XiowhUSxegQDmwCZI5U8rHgTsMAXP6sUEqWLRqlMBsgMxR+6jwI8zirTqVhHKsuo1pwB7DDwIWAQYbeWq9SvLsqwris86CUgX+SQvnGaMEApkCq1avV6v12rVlhP/FAF/qCKEIpnCWatarVZbZwWbQN6MLkpNDwXssY5ROJ3NFc6gCjkH3iYoN09unQTyiwW/TWeyuUIB4NlM2hmhWE1cBParDWEUjimZLC2OFw7EbuQkcLxcEYrElHSGFMeTCO3lrnzDCGQB0oISgHU4DaWz35cEcAJYbuQXm7RgYPROV+iP2nCJ4KJUEcuJSFBacaAiMVjpeZH93JC6WLk5lggc+wkpjALvdcWJZwKgCWy/4wSAX3eteRgFFMHA8EIANMEmUAHPZ1BmCBu6AiHocgKC4AROM1nQyIYmdZAXRmEFGIBEEkAjoF08PzxS4QRoqgcesRwUXTFsPBVAmsDnSFW19QX9tDAKRAxKweDGXlJEQHbcIxjAqHtNFoURekdvRqyIgTxxwDKkj8GnLk2BiE0BeHLJqFzSCA5ULfri2Xtb+O3eHnDADWufXHIqRAA4iPp+5+KIw5H9JNQ+3LFOSyKBl77nL57sdhvYiqRSqVQ+D/rp779cfvFHt2e0Ft768OEvqJ2d3WUfPL/xn17gXdd/b/j/mp5pXSONC6IAAAAASUVORK5CYII=",hle="/assets/Java-82786427.png",dle="/assets/github-6251e535.png",fle="/assets/Razia Akbari's CV-0b1753d3.pdf";function Ku(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yG(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}/*!
 * GSAP 3.12.2
 * https://greensock.com
 *
 * @license Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var eo={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Cg={duration:.5,overwrite:!1,delay:0},EI,xa,Ri,Po=1e8,ai=1/Po,PP=Math.PI*2,ple=PP/4,mle=0,xG=Math.sqrt,gle=Math.cos,vle=Math.sin,$n=function(t){return typeof t=="string"},Ni=function(t){return typeof t=="function"},Mc=function(t){return typeof t=="number"},MI=function(t){return typeof t>"u"},wu=function(t){return typeof t=="object"},Ss=function(t){return t!==!1},CI=function(){return typeof window<"u"},kx=function(t){return Ni(t)||$n(t)},bG=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},ba=Array.isArray,DP=/(?:-?\.?\d|\.)+/gi,wG=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Cm=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,eC=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,_G=/[+-]=-?[.\d]+/,SG=/[^,'"\[\]\s]+/gi,yle=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,wi,go,OP,AI,ro={},k_={},EG,MG=function(t){return(k_=Rf(t,ro))&&Ps},TI=function(t,r){return console.warn("Invalid property",t,"set to",r,"Missing plugin? gsap.registerPlugin()")},L_=function(t,r){return!r&&console.warn(t)},CG=function(t,r){return t&&(ro[t]=r)&&k_&&(k_[t]=r)||ro},Zy=function(){return 0},xle={suppressEvents:!0,isStart:!0,kill:!1},Dw={suppressEvents:!0,kill:!1},ble={suppressEvents:!0},PI={},Uh=[],IP={},AG,Us={},tC={},QN=30,Ow=[],DI="",OI=function(t){var r=t[0],i,n;if(wu(r)||Ni(r)||(t=[t]),!(i=(r._gsap||{}).harness)){for(n=Ow.length;n--&&!Ow[n].targetTest(r););i=Ow[n]}for(n=t.length;n--;)t[n]&&(t[n]._gsap||(t[n]._gsap=new KG(t[n],i)))||t.splice(n,1);return t},df=function(t){return t._gsap||OI(Do(t))[0]._gsap},TG=function(t,r,i){return(i=t[r])&&Ni(i)?t[r]():MI(i)&&t.getAttribute&&t.getAttribute(r)||i},Es=function(t,r){return(t=t.split(",")).forEach(r)||t},Hi=function(t){return Math.round(t*1e5)/1e5||0},ra=function(t){return Math.round(t*1e7)/1e7||0},Ym=function(t,r){var i=r.charAt(0),n=parseFloat(r.substr(2));return t=parseFloat(t),i==="+"?t+n:i==="-"?t-n:i==="*"?t*n:t/n},wle=function(t,r){for(var i=r.length,n=0;t.indexOf(r[n])<0&&++n<i;);return n<i},B_=function(){var t=Uh.length,r=Uh.slice(0),i,n;for(IP={},Uh.length=0,i=0;i<t;i++)n=r[i],n&&n._lazy&&(n.render(n._lazy[0],n._lazy[1],!0)._lazy=0)},PG=function(t,r,i,n){Uh.length&&!xa&&B_(),t.render(r,i,n||xa&&r<0&&(t._initted||t._startAt)),Uh.length&&!xa&&B_()},DG=function(t){var r=parseFloat(t);return(r||r===0)&&(t+"").match(SG).length<2?r:$n(t)?t.trim():t},OG=function(t){return t},Fo=function(t,r){for(var i in r)i in t||(t[i]=r[i]);return t},_le=function(t){return function(r,i){for(var n in i)n in r||n==="duration"&&t||n==="ease"||(r[n]=i[n])}},Rf=function(t,r){for(var i in r)t[i]=r[i];return t},KN=function e(t,r){for(var i in r)i!=="__proto__"&&i!=="constructor"&&i!=="prototype"&&(t[i]=wu(r[i])?e(t[i]||(t[i]={}),r[i]):r[i]);return t},N_=function(t,r){var i={},n;for(n in t)n in r||(i[n]=t[n]);return i},ny=function(t){var r=t.parent||wi,i=t.keyframes?_le(ba(t.keyframes)):Fo;if(Ss(t.inherit))for(;r;)i(t,r.vars.defaults),r=r.parent||r._dp;return t},Sle=function(t,r){for(var i=t.length,n=i===r.length;n&&i--&&t[i]===r[i];);return i<0},IG=function(t,r,i,n,a){i===void 0&&(i="_first"),n===void 0&&(n="_last");var s=t[n],o;if(a)for(o=r[a];s&&s[a]>o;)s=s._prev;return s?(r._next=s._next,s._next=r):(r._next=t[i],t[i]=r),r._next?r._next._prev=r:t[n]=r,r._prev=s,r.parent=r._dp=t,r},cE=function(t,r,i,n){i===void 0&&(i="_first"),n===void 0&&(n="_last");var a=r._prev,s=r._next;a?a._next=s:t[i]===r&&(t[i]=s),s?s._prev=a:t[n]===r&&(t[n]=a),r._next=r._prev=r.parent=null},Zh=function(t,r){t.parent&&(!r||t.parent.autoRemoveChildren)&&t.parent.remove&&t.parent.remove(t),t._act=0},ff=function(t,r){if(t&&(!r||r._end>t._dur||r._start<0))for(var i=t;i;)i._dirty=1,i=i.parent;return t},Ele=function(t){for(var r=t.parent;r&&r.parent;)r._dirty=1,r.totalDuration(),r=r.parent;return t},RP=function(t,r,i,n){return t._startAt&&(xa?t._startAt.revert(Dw):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(r,!0,n))},Mle=function e(t){return!t||t._ts&&e(t.parent)},ZN=function(t){return t._repeat?Ag(t._tTime,t=t.duration()+t._rDelay)*t:0},Ag=function(t,r){var i=Math.floor(t/=r);return t&&i===t?i-1:i},z_=function(t,r){return(t-r._start)*r._ts+(r._ts>=0?0:r._dirty?r.totalDuration():r._tDur)},hE=function(t){return t._end=ra(t._start+(t._tDur/Math.abs(t._ts||t._rts||ai)||0))},dE=function(t,r){var i=t._dp;return i&&i.smoothChildTiming&&t._ts&&(t._start=ra(i._time-(t._ts>0?r/t._ts:((t._dirty?t.totalDuration():t._tDur)-r)/-t._ts)),hE(t),i._dirty||ff(i,t)),t},RG=function(t,r){var i;if((r._time||!r._dur&&r._initted||r._start<t._time&&(r._dur||!r.add))&&(i=z_(t.rawTime(),r),(!r._dur||F1(0,r.totalDuration(),i)-r._tTime>ai)&&r.render(i,!0)),ff(t,r)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(i=t;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;t._zTime=-ai}},ru=function(t,r,i,n){return r.parent&&Zh(r),r._start=ra((Mc(i)?i:i||t!==wi?mo(t,i,r):t._time)+r._delay),r._end=ra(r._start+(r.totalDuration()/Math.abs(r.timeScale())||0)),IG(t,r,"_first","_last",t._sort?"_start":0),kP(r)||(t._recent=r),n||RG(t,r),t._ts<0&&dE(t,t._tTime),t},kG=function(t,r){return(ro.ScrollTrigger||TI("scrollTrigger",r))&&ro.ScrollTrigger.create(r,t)},LG=function(t,r,i,n,a){if(RI(t,r,a),!t._initted)return 1;if(!i&&t._pt&&!xa&&(t._dur&&t.vars.lazy!==!1||!t._dur&&t.vars.lazy)&&AG!==Gs.frame)return Uh.push(t),t._lazy=[a,n],1},Cle=function e(t){var r=t.parent;return r&&r._ts&&r._initted&&!r._lock&&(r.rawTime()<0||e(r))},kP=function(t){var r=t.data;return r==="isFromStart"||r==="isStart"},Ale=function(t,r,i,n){var a=t.ratio,s=r<0||!r&&(!t._start&&Cle(t)&&!(!t._initted&&kP(t))||(t._ts<0||t._dp._ts<0)&&!kP(t))?0:1,o=t._rDelay,l=0,u,h,c;if(o&&t._repeat&&(l=F1(0,t._tDur,r),h=Ag(l,o),t._yoyo&&h&1&&(s=1-s),h!==Ag(t._tTime,o)&&(a=1-s,t.vars.repeatRefresh&&t._initted&&t.invalidate())),s!==a||xa||n||t._zTime===ai||!r&&t._zTime){if(!t._initted&&LG(t,r,n,i,l))return;for(c=t._zTime,t._zTime=r||(i?ai:0),i||(i=r&&!c),t.ratio=s,t._from&&(s=1-s),t._time=0,t._tTime=l,u=t._pt;u;)u.r(s,u.d),u=u._next;r<0&&RP(t,r,i,!0),t._onUpdate&&!i&&Oo(t,"onUpdate"),l&&t._repeat&&!i&&t.parent&&Oo(t,"onRepeat"),(r>=t._tDur||r<0)&&t.ratio===s&&(s&&Zh(t,1),!i&&!xa&&(Oo(t,s?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=r)},Tle=function(t,r,i){var n;if(i>r)for(n=t._first;n&&n._start<=i;){if(n.data==="isPause"&&n._start>r)return n;n=n._next}else for(n=t._last;n&&n._start>=i;){if(n.data==="isPause"&&n._start<r)return n;n=n._prev}},Tg=function(t,r,i,n){var a=t._repeat,s=ra(r)||0,o=t._tTime/t._tDur;return o&&!n&&(t._time*=s/t._dur),t._dur=s,t._tDur=a?a<0?1e10:ra(s*(a+1)+t._rDelay*a):s,o>0&&!n&&dE(t,t._tTime=t._tDur*o),t.parent&&hE(t),i||ff(t.parent,t),t},JN=function(t){return t instanceof Va?ff(t):Tg(t,t._dur)},Ple={_start:0,endTime:Zy,totalDuration:Zy},mo=function e(t,r,i){var n=t.labels,a=t._recent||Ple,s=t.duration()>=Po?a.endTime(!1):t._dur,o,l,u;return $n(r)&&(isNaN(r)||r in n)?(l=r.charAt(0),u=r.substr(-1)==="%",o=r.indexOf("="),l==="<"||l===">"?(o>=0&&(r=r.replace(/=/,"")),(l==="<"?a._start:a.endTime(a._repeat>=0))+(parseFloat(r.substr(1))||0)*(u?(o<0?a:i).totalDuration()/100:1)):o<0?(r in n||(n[r]=s),n[r]):(l=parseFloat(r.charAt(o-1)+r.substr(o+1)),u&&i&&(l=l/100*(ba(i)?i[0]:i).totalDuration()),o>1?e(t,r.substr(0,o-1),i)+l:s+l)):r==null?s:+r},ay=function(t,r,i){var n=Mc(r[1]),a=(n?2:1)+(t<2?0:1),s=r[a],o,l;if(n&&(s.duration=r[1]),s.parent=i,t){for(o=s,l=i;l&&!("immediateRender"in o);)o=l.vars.defaults||{},l=Ss(l.vars.inherit)&&l.parent;s.immediateRender=Ss(o.immediateRender),t<2?s.runBackwards=1:s.startAt=r[a-1]}return new Gi(r[0],s,r[a+1])},cd=function(t,r){return t||t===0?r(t):r},F1=function(t,r,i){return i<t?t:i>r?r:i},ga=function(t,r){return!$n(t)||!(r=yle.exec(t))?"":r[1]},Dle=function(t,r,i){return cd(i,function(n){return F1(t,r,n)})},LP=[].slice,BG=function(t,r){return t&&wu(t)&&"length"in t&&(!r&&!t.length||t.length-1 in t&&wu(t[0]))&&!t.nodeType&&t!==go},Ole=function(t,r,i){return i===void 0&&(i=[]),t.forEach(function(n){var a;return $n(n)&&!r||BG(n,1)?(a=i).push.apply(a,Do(n)):i.push(n)})||i},Do=function(t,r,i){return Ri&&!r&&Ri.selector?Ri.selector(t):$n(t)&&!i&&(OP||!Pg())?LP.call((r||AI).querySelectorAll(t),0):ba(t)?Ole(t,i):BG(t)?LP.call(t,0):t?[t]:[]},BP=function(t){return t=Do(t)[0]||L_("Invalid scope")||{},function(r){var i=t.current||t.nativeElement||t;return Do(r,i.querySelectorAll?i:i===t?L_("Invalid scope")||AI.createElement("div"):t)}},NG=function(t){return t.sort(function(){return .5-Math.random()})},zG=function(t){if(Ni(t))return t;var r=wu(t)?t:{each:t},i=pf(r.ease),n=r.from||0,a=parseFloat(r.base)||0,s={},o=n>0&&n<1,l=isNaN(n)||o,u=r.axis,h=n,c=n;return $n(n)?h=c={center:.5,edges:.5,end:1}[n]||0:!o&&l&&(h=n[0],c=n[1]),function(d,f,m){var p=(m||r).length,g=s[p],v,y,x,b,_,w,E,S,C;if(!g){if(C=r.grid==="auto"?0:(r.grid||[1,Po])[1],!C){for(E=-Po;E<(E=m[C++].getBoundingClientRect().left)&&C<p;);C--}for(g=s[p]=[],v=l?Math.min(C,p)*h-.5:n%C,y=C===Po?0:l?p*c/C-.5:n/C|0,E=0,S=Po,w=0;w<p;w++)x=w%C-v,b=y-(w/C|0),g[w]=_=u?Math.abs(u==="y"?b:x):xG(x*x+b*b),_>E&&(E=_),_<S&&(S=_);n==="random"&&NG(g),g.max=E-S,g.min=S,g.v=p=(parseFloat(r.amount)||parseFloat(r.each)*(C>p?p-1:u?u==="y"?p/C:C:Math.max(C,p/C))||0)*(n==="edges"?-1:1),g.b=p<0?a-p:a,g.u=ga(r.amount||r.each)||0,i=i&&p<0?qG(i):i}return p=(g[d]-g.min)/g.max||0,ra(g.b+(i?i(p):p)*g.v)+g.u}},NP=function(t){var r=Math.pow(10,((t+"").split(".")[1]||"").length);return function(i){var n=ra(Math.round(parseFloat(i)/t)*t*r);return(n-n%1)/r+(Mc(i)?0:ga(i))}},FG=function(t,r){var i=ba(t),n,a;return!i&&wu(t)&&(n=i=t.radius||Po,t.values?(t=Do(t.values),(a=!Mc(t[0]))&&(n*=n)):t=NP(t.increment)),cd(r,i?Ni(t)?function(s){return a=t(s),Math.abs(a-s)<=n?a:s}:function(s){for(var o=parseFloat(a?s.x:s),l=parseFloat(a?s.y:0),u=Po,h=0,c=t.length,d,f;c--;)a?(d=t[c].x-o,f=t[c].y-l,d=d*d+f*f):d=Math.abs(t[c]-o),d<u&&(u=d,h=c);return h=!n||u<=n?t[h]:s,a||h===s||Mc(s)?h:h+ga(s)}:NP(t))},UG=function(t,r,i,n){return cd(ba(t)?!r:i===!0?!!(i=0):!n,function(){return ba(t)?t[~~(Math.random()*t.length)]:(i=i||1e-5)&&(n=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((t-i/2+Math.random()*(r-t+i*.99))/i)*i*n)/n})},Ile=function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return function(n){return r.reduce(function(a,s){return s(a)},n)}},Rle=function(t,r){return function(i){return t(parseFloat(i))+(r||ga(i))}},kle=function(t,r,i){return VG(t,r,0,1,i)},jG=function(t,r,i){return cd(i,function(n){return t[~~r(n)]})},Lle=function e(t,r,i){var n=r-t;return ba(t)?jG(t,e(0,t.length),r):cd(i,function(a){return(n+(a-t)%n)%n+t})},Ble=function e(t,r,i){var n=r-t,a=n*2;return ba(t)?jG(t,e(0,t.length-1),r):cd(i,function(s){return s=(a+(s-t)%a)%a||0,t+(s>n?a-s:s)})},Jy=function(t){for(var r=0,i="",n,a,s,o;~(n=t.indexOf("random(",r));)s=t.indexOf(")",n),o=t.charAt(n+7)==="[",a=t.substr(n+7,s-n-7).match(o?SG:DP),i+=t.substr(r,n-r)+UG(o?a:+a[0],o?0:+a[1],+a[2]||1e-5),r=s+1;return i+t.substr(r,t.length-r)},VG=function(t,r,i,n,a){var s=r-t,o=n-i;return cd(a,function(l){return i+((l-t)/s*o||0)})},Nle=function e(t,r,i,n){var a=isNaN(t+r)?0:function(f){return(1-f)*t+f*r};if(!a){var s=$n(t),o={},l,u,h,c,d;if(i===!0&&(n=1)&&(i=null),s)t={p:t},r={p:r};else if(ba(t)&&!ba(r)){for(h=[],c=t.length,d=c-2,u=1;u<c;u++)h.push(e(t[u-1],t[u]));c--,a=function(m){m*=c;var p=Math.min(d,~~m);return h[p](m-p)},i=r}else n||(t=Rf(ba(t)?[]:{},t));if(!h){for(l in r)II.call(o,t,l,"get",r[l]);a=function(m){return BI(m,o)||(s?t.p:t)}}}return cd(i,a)},e4=function(t,r,i){var n=t.labels,a=Po,s,o,l;for(s in n)o=n[s]-r,o<0==!!i&&o&&a>(o=Math.abs(o))&&(l=s,a=o);return l},Oo=function(t,r,i){var n=t.vars,a=n[r],s=Ri,o=t._ctx,l,u,h;if(a)return l=n[r+"Params"],u=n.callbackScope||t,i&&Uh.length&&B_(),o&&(Ri=o),h=l?a.apply(u,l):a.call(u),Ri=s,h},k0=function(t){return Zh(t),t.scrollTrigger&&t.scrollTrigger.kill(!!xa),t.progress()<1&&Oo(t,"onInterrupt"),t},Am,HG=[],GG=function(t){if(CI()&&t){t=!t.name&&t.default||t;var r=t.name,i=Ni(t),n=r&&!i&&t.init?function(){this._props=[]}:t,a={init:Zy,render:BI,add:II,kill:Jle,modifier:Zle,rawVars:0},s={targetTest:0,get:0,getSetter:LI,aliases:{},register:0};if(Pg(),t!==n){if(Us[r])return;Fo(n,Fo(N_(t,a),s)),Rf(n.prototype,Rf(a,N_(t,s))),Us[n.prop=r]=n,t.targetTest&&(Ow.push(n),PI[r]=1),r=(r==="css"?"CSS":r.charAt(0).toUpperCase()+r.substr(1))+"Plugin"}CG(r,n),t.register&&t.register(Ps,n,Ms)}else t&&HG.push(t)},ii=255,L0={aqua:[0,ii,ii],lime:[0,ii,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,ii],navy:[0,0,128],white:[ii,ii,ii],olive:[128,128,0],yellow:[ii,ii,0],orange:[ii,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[ii,0,0],pink:[ii,192,203],cyan:[0,ii,ii],transparent:[ii,ii,ii,0]},rC=function(t,r,i){return t+=t<0?1:t>1?-1:0,(t*6<1?r+(i-r)*t*6:t<.5?i:t*3<2?r+(i-r)*(2/3-t)*6:r)*ii+.5|0},WG=function(t,r,i){var n=t?Mc(t)?[t>>16,t>>8&ii,t&ii]:0:L0.black,a,s,o,l,u,h,c,d,f,m;if(!n){if(t.substr(-1)===","&&(t=t.substr(0,t.length-1)),L0[t])n=L0[t];else if(t.charAt(0)==="#"){if(t.length<6&&(a=t.charAt(1),s=t.charAt(2),o=t.charAt(3),t="#"+a+a+s+s+o+o+(t.length===5?t.charAt(4)+t.charAt(4):"")),t.length===9)return n=parseInt(t.substr(1,6),16),[n>>16,n>>8&ii,n&ii,parseInt(t.substr(7),16)/255];t=parseInt(t.substr(1),16),n=[t>>16,t>>8&ii,t&ii]}else if(t.substr(0,3)==="hsl"){if(n=m=t.match(DP),!r)l=+n[0]%360/360,u=+n[1]/100,h=+n[2]/100,s=h<=.5?h*(u+1):h+u-h*u,a=h*2-s,n.length>3&&(n[3]*=1),n[0]=rC(l+1/3,a,s),n[1]=rC(l,a,s),n[2]=rC(l-1/3,a,s);else if(~t.indexOf("="))return n=t.match(wG),i&&n.length<4&&(n[3]=1),n}else n=t.match(DP)||L0.transparent;n=n.map(Number)}return r&&!m&&(a=n[0]/ii,s=n[1]/ii,o=n[2]/ii,c=Math.max(a,s,o),d=Math.min(a,s,o),h=(c+d)/2,c===d?l=u=0:(f=c-d,u=h>.5?f/(2-c-d):f/(c+d),l=c===a?(s-o)/f+(s<o?6:0):c===s?(o-a)/f+2:(a-s)/f+4,l*=60),n[0]=~~(l+.5),n[1]=~~(u*100+.5),n[2]=~~(h*100+.5)),i&&n.length<4&&(n[3]=1),n},$G=function(t){var r=[],i=[],n=-1;return t.split(jh).forEach(function(a){var s=a.match(Cm)||[];r.push.apply(r,s),i.push(n+=s.length+1)}),r.c=i,r},t4=function(t,r,i){var n="",a=(t+n).match(jh),s=r?"hsla(":"rgba(",o=0,l,u,h,c;if(!a)return t;if(a=a.map(function(d){return(d=WG(d,r,1))&&s+(r?d[0]+","+d[1]+"%,"+d[2]+"%,"+d[3]:d.join(","))+")"}),i&&(h=$G(t),l=i.c,l.join(n)!==h.c.join(n)))for(u=t.replace(jh,"1").split(Cm),c=u.length-1;o<c;o++)n+=u[o]+(~l.indexOf(o)?a.shift()||s+"0,0,0,0)":(h.length?h:a.length?a:i).shift());if(!u)for(u=t.split(jh),c=u.length-1;o<c;o++)n+=u[o]+a[o];return n+u[c]},jh=function(){var e="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",t;for(t in L0)e+="|"+t+"\\b";return new RegExp(e+")","gi")}(),zle=/hsl[a]?\(/,YG=function(t){var r=t.join(" "),i;if(jh.lastIndex=0,jh.test(r))return i=zle.test(r),t[1]=t4(t[1],i),t[0]=t4(t[0],i,$G(t[1])),!0},e1,Gs=function(){var e=Date.now,t=500,r=33,i=e(),n=i,a=1e3/240,s=a,o=[],l,u,h,c,d,f,m=function p(g){var v=e()-n,y=g===!0,x,b,_,w;if(v>t&&(i+=v-r),n+=v,_=n-i,x=_-s,(x>0||y)&&(w=++c.frame,d=_-c.time*1e3,c.time=_=_/1e3,s+=x+(x>=a?4:a-x),b=1),y||(l=u(p)),b)for(f=0;f<o.length;f++)o[f](_,d,w,g)};return c={time:0,frame:0,tick:function(){m(!0)},deltaRatio:function(g){return d/(1e3/(g||60))},wake:function(){EG&&(!OP&&CI()&&(go=OP=window,AI=go.document||{},ro.gsap=Ps,(go.gsapVersions||(go.gsapVersions=[])).push(Ps.version),MG(k_||go.GreenSockGlobals||!go.gsap&&go||{}),h=go.requestAnimationFrame,HG.forEach(GG)),l&&c.sleep(),u=h||function(g){return setTimeout(g,s-c.time*1e3+1|0)},e1=1,m(2))},sleep:function(){(h?go.cancelAnimationFrame:clearTimeout)(l),e1=0,u=Zy},lagSmoothing:function(g,v){t=g||1/0,r=Math.min(v||33,t)},fps:function(g){a=1e3/(g||240),s=c.time*1e3+a},add:function(g,v,y){var x=v?function(b,_,w,E){g(b,_,w,E),c.remove(x)}:g;return c.remove(g),o[y?"unshift":"push"](x),Pg(),x},remove:function(g,v){~(v=o.indexOf(g))&&o.splice(v,1)&&f>=v&&f--},_listeners:o},c}(),Pg=function(){return!e1&&Gs.wake()},Sr={},Fle=/^[\d.\-M][\d.\-,\s]/,Ule=/["']/g,jle=function(t){for(var r={},i=t.substr(1,t.length-3).split(":"),n=i[0],a=1,s=i.length,o,l,u;a<s;a++)l=i[a],o=a!==s-1?l.lastIndexOf(","):l.length,u=l.substr(0,o),r[n]=isNaN(u)?u.replace(Ule,"").trim():+u,n=l.substr(o+1).trim();return r},Vle=function(t){var r=t.indexOf("(")+1,i=t.indexOf(")"),n=t.indexOf("(",r);return t.substring(r,~n&&n<i?t.indexOf(")",i+1):i)},Hle=function(t){var r=(t+"").split("("),i=Sr[r[0]];return i&&r.length>1&&i.config?i.config.apply(null,~t.indexOf("{")?[jle(r[1])]:Vle(t).split(",").map(DG)):Sr._CE&&Fle.test(t)?Sr._CE("",t):i},qG=function(t){return function(r){return 1-t(1-r)}},XG=function e(t,r){for(var i=t._first,n;i;)i instanceof Va?e(i,r):i.vars.yoyoEase&&(!i._yoyo||!i._repeat)&&i._yoyo!==r&&(i.timeline?e(i.timeline,r):(n=i._ease,i._ease=i._yEase,i._yEase=n,i._yoyo=r)),i=i._next},pf=function(t,r){return t&&(Ni(t)?t:Sr[t]||Hle(t))||r},Xf=function(t,r,i,n){i===void 0&&(i=function(l){return 1-r(1-l)}),n===void 0&&(n=function(l){return l<.5?r(l*2)/2:1-r((1-l)*2)/2});var a={easeIn:r,easeOut:i,easeInOut:n},s;return Es(t,function(o){Sr[o]=ro[o]=a,Sr[s=o.toLowerCase()]=i;for(var l in a)Sr[s+(l==="easeIn"?".in":l==="easeOut"?".out":".inOut")]=Sr[o+"."+l]=a[l]}),a},QG=function(t){return function(r){return r<.5?(1-t(1-r*2))/2:.5+t((r-.5)*2)/2}},iC=function e(t,r,i){var n=r>=1?r:1,a=(i||(t?.3:.45))/(r<1?r:1),s=a/PP*(Math.asin(1/n)||0),o=function(h){return h===1?1:n*Math.pow(2,-10*h)*vle((h-s)*a)+1},l=t==="out"?o:t==="in"?function(u){return 1-o(1-u)}:QG(o);return a=PP/a,l.config=function(u,h){return e(t,u,h)},l},nC=function e(t,r){r===void 0&&(r=1.70158);var i=function(s){return s?--s*s*((r+1)*s+r)+1:0},n=t==="out"?i:t==="in"?function(a){return 1-i(1-a)}:QG(i);return n.config=function(a){return e(t,a)},n};Es("Linear,Quad,Cubic,Quart,Quint,Strong",function(e,t){var r=t<5?t+1:t;Xf(e+",Power"+(r-1),t?function(i){return Math.pow(i,r)}:function(i){return i},function(i){return 1-Math.pow(1-i,r)},function(i){return i<.5?Math.pow(i*2,r)/2:1-Math.pow((1-i)*2,r)/2})});Sr.Linear.easeNone=Sr.none=Sr.Linear.easeIn;Xf("Elastic",iC("in"),iC("out"),iC());(function(e,t){var r=1/t,i=2*r,n=2.5*r,a=function(o){return o<r?e*o*o:o<i?e*Math.pow(o-1.5/t,2)+.75:o<n?e*(o-=2.25/t)*o+.9375:e*Math.pow(o-2.625/t,2)+.984375};Xf("Bounce",function(s){return 1-a(1-s)},a)})(7.5625,2.75);Xf("Expo",function(e){return e?Math.pow(2,10*(e-1)):0});Xf("Circ",function(e){return-(xG(1-e*e)-1)});Xf("Sine",function(e){return e===1?1:-gle(e*ple)+1});Xf("Back",nC("in"),nC("out"),nC());Sr.SteppedEase=Sr.steps=ro.SteppedEase={config:function(t,r){t===void 0&&(t=1);var i=1/t,n=t+(r?0:1),a=r?1:0,s=1-ai;return function(o){return((n*F1(0,s,o)|0)+a)*i}}};Cg.ease=Sr["quad.out"];Es("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(e){return DI+=e+","+e+"Params,"});var KG=function(t,r){this.id=mle++,t._gsap=this,this.target=t,this.harness=r,this.get=r?r.get:TG,this.set=r?r.getSetter:LI},t1=function(){function e(r){this.vars=r,this._delay=+r.delay||0,(this._repeat=r.repeat===1/0?-2:r.repeat||0)&&(this._rDelay=r.repeatDelay||0,this._yoyo=!!r.yoyo||!!r.yoyoEase),this._ts=1,Tg(this,+r.duration,1,1),this.data=r.data,Ri&&(this._ctx=Ri,Ri.data.push(this)),e1||Gs.wake()}var t=e.prototype;return t.delay=function(i){return i||i===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+i-this._delay),this._delay=i,this):this._delay},t.duration=function(i){return arguments.length?this.totalDuration(this._repeat>0?i+(i+this._rDelay)*this._repeat:i):this.totalDuration()&&this._dur},t.totalDuration=function(i){return arguments.length?(this._dirty=0,Tg(this,this._repeat<0?i:(i-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(i,n){if(Pg(),!arguments.length)return this._tTime;var a=this._dp;if(a&&a.smoothChildTiming&&this._ts){for(dE(this,i),!a._dp||a.parent||RG(a,this);a&&a.parent;)a.parent._time!==a._start+(a._ts>=0?a._tTime/a._ts:(a.totalDuration()-a._tTime)/-a._ts)&&a.totalTime(a._tTime,!0),a=a.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&i<this._tDur||this._ts<0&&i>0||!this._tDur&&!i)&&ru(this._dp,this,this._start-this._delay)}return(this._tTime!==i||!this._dur&&!n||this._initted&&Math.abs(this._zTime)===ai||!i&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=i),PG(this,i,n)),this},t.time=function(i,n){return arguments.length?this.totalTime(Math.min(this.totalDuration(),i+ZN(this))%(this._dur+this._rDelay)||(i?this._dur:0),n):this._time},t.totalProgress=function(i,n){return arguments.length?this.totalTime(this.totalDuration()*i,n):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},t.progress=function(i,n){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-i:i)+ZN(this),n):this.duration()?Math.min(1,this._time/this._dur):this.ratio},t.iteration=function(i,n){var a=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(i-1)*a,n):this._repeat?Ag(this._tTime,a)+1:1},t.timeScale=function(i){if(!arguments.length)return this._rts===-ai?0:this._rts;if(this._rts===i)return this;var n=this.parent&&this._ts?z_(this.parent._time,this):this._tTime;return this._rts=+i||0,this._ts=this._ps||i===-ai?0:this._rts,this.totalTime(F1(-Math.abs(this._delay),this._tDur,n),!0),hE(this),Ele(this)},t.paused=function(i){return arguments.length?(this._ps!==i&&(this._ps=i,i?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Pg(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==ai&&(this._tTime-=ai)))),this):this._ps},t.startTime=function(i){if(arguments.length){this._start=i;var n=this.parent||this._dp;return n&&(n._sort||!this.parent)&&ru(n,this,i-this._delay),this}return this._start},t.endTime=function(i){return this._start+(Ss(i)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(i){var n=this.parent||this._dp;return n?i&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?z_(n.rawTime(i),this):this._tTime:this._tTime},t.revert=function(i){i===void 0&&(i=ble);var n=xa;return xa=i,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(i),this.totalTime(-.01,i.suppressEvents)),this.data!=="nested"&&i.kill!==!1&&this.kill(),xa=n,this},t.globalTime=function(i){for(var n=this,a=arguments.length?i:n.rawTime();n;)a=n._start+a/(n._ts||1),n=n._dp;return!this.parent&&this._sat?this._sat.vars.immediateRender?-1/0:this._sat.globalTime(i):a},t.repeat=function(i){return arguments.length?(this._repeat=i===1/0?-2:i,JN(this)):this._repeat===-2?1/0:this._repeat},t.repeatDelay=function(i){if(arguments.length){var n=this._time;return this._rDelay=i,JN(this),n?this.time(n):this}return this._rDelay},t.yoyo=function(i){return arguments.length?(this._yoyo=i,this):this._yoyo},t.seek=function(i,n){return this.totalTime(mo(this,i),Ss(n))},t.restart=function(i,n){return this.play().totalTime(i?-this._delay:0,Ss(n))},t.play=function(i,n){return i!=null&&this.seek(i,n),this.reversed(!1).paused(!1)},t.reverse=function(i,n){return i!=null&&this.seek(i||this.totalDuration(),n),this.reversed(!0).paused(!1)},t.pause=function(i,n){return i!=null&&this.seek(i,n),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(i){return arguments.length?(!!i!==this.reversed()&&this.timeScale(-this._rts||(i?-ai:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-ai,this},t.isActive=function(){var i=this.parent||this._dp,n=this._start,a;return!!(!i||this._ts&&this._initted&&i.isActive()&&(a=i.rawTime(!0))>=n&&a<this.endTime(!0)-ai)},t.eventCallback=function(i,n,a){var s=this.vars;return arguments.length>1?(n?(s[i]=n,a&&(s[i+"Params"]=a),i==="onUpdate"&&(this._onUpdate=n)):delete s[i],this):s[i]},t.then=function(i){var n=this;return new Promise(function(a){var s=Ni(i)?i:OG,o=function(){var u=n.then;n.then=null,Ni(s)&&(s=s(n))&&(s.then||s===n)&&(n.then=u),a(s),n.then=u};n._initted&&n.totalProgress()===1&&n._ts>=0||!n._tTime&&n._ts<0?o():n._prom=o})},t.kill=function(){k0(this)},e}();Fo(t1.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-ai,_prom:0,_ps:!1,_rts:1});var Va=function(e){yG(t,e);function t(i,n){var a;return i===void 0&&(i={}),a=e.call(this,i)||this,a.labels={},a.smoothChildTiming=!!i.smoothChildTiming,a.autoRemoveChildren=!!i.autoRemoveChildren,a._sort=Ss(i.sortChildren),wi&&ru(i.parent||wi,Ku(a),n),i.reversed&&a.reverse(),i.paused&&a.paused(!0),i.scrollTrigger&&kG(Ku(a),i.scrollTrigger),a}var r=t.prototype;return r.to=function(n,a,s){return ay(0,arguments,this),this},r.from=function(n,a,s){return ay(1,arguments,this),this},r.fromTo=function(n,a,s,o){return ay(2,arguments,this),this},r.set=function(n,a,s){return a.duration=0,a.parent=this,ny(a).repeatDelay||(a.repeat=0),a.immediateRender=!!a.immediateRender,new Gi(n,a,mo(this,s),1),this},r.call=function(n,a,s){return ru(this,Gi.delayedCall(0,n,a),s)},r.staggerTo=function(n,a,s,o,l,u,h){return s.duration=a,s.stagger=s.stagger||o,s.onComplete=u,s.onCompleteParams=h,s.parent=this,new Gi(n,s,mo(this,l)),this},r.staggerFrom=function(n,a,s,o,l,u,h){return s.runBackwards=1,ny(s).immediateRender=Ss(s.immediateRender),this.staggerTo(n,a,s,o,l,u,h)},r.staggerFromTo=function(n,a,s,o,l,u,h,c){return o.startAt=s,ny(o).immediateRender=Ss(o.immediateRender),this.staggerTo(n,a,o,l,u,h,c)},r.render=function(n,a,s){var o=this._time,l=this._dirty?this.totalDuration():this._tDur,u=this._dur,h=n<=0?0:ra(n),c=this._zTime<0!=n<0&&(this._initted||!u),d,f,m,p,g,v,y,x,b,_,w,E;if(this!==wi&&h>l&&n>=0&&(h=l),h!==this._tTime||s||c){if(o!==this._time&&u&&(h+=this._time-o,n+=this._time-o),d=h,b=this._start,x=this._ts,v=!x,c&&(u||(o=this._zTime),(n||!a)&&(this._zTime=n)),this._repeat){if(w=this._yoyo,g=u+this._rDelay,this._repeat<-1&&n<0)return this.totalTime(g*100+n,a,s);if(d=ra(h%g),h===l?(p=this._repeat,d=u):(p=~~(h/g),p&&p===h/g&&(d=u,p--),d>u&&(d=u)),_=Ag(this._tTime,g),!o&&this._tTime&&_!==p&&this._tTime-_*g-this._dur<=0&&(_=p),w&&p&1&&(d=u-d,E=1),p!==_&&!this._lock){var S=w&&_&1,C=S===(w&&p&1);if(p<_&&(S=!S),o=S?0:h%u?u:h,this._lock=1,this.render(o||(E?0:ra(p*g)),a,!u)._lock=0,this._tTime=h,!a&&this.parent&&Oo(this,"onRepeat"),this.vars.repeatRefresh&&!E&&(this.invalidate()._lock=1),o&&o!==this._time||v!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(u=this._dur,l=this._tDur,C&&(this._lock=2,o=S?u:-1e-4,this.render(o,!0),this.vars.repeatRefresh&&!E&&this.invalidate()),this._lock=0,!this._ts&&!v)return this;XG(this,E)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(y=Tle(this,ra(o),ra(d)),y&&(h-=d-(d=y._start))),this._tTime=h,this._time=d,this._act=!x,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=n,o=0),!o&&d&&!a&&!p&&(Oo(this,"onStart"),this._tTime!==h))return this;if(d>=o&&n>=0)for(f=this._first;f;){if(m=f._next,(f._act||d>=f._start)&&f._ts&&y!==f){if(f.parent!==this)return this.render(n,a,s);if(f.render(f._ts>0?(d-f._start)*f._ts:(f._dirty?f.totalDuration():f._tDur)+(d-f._start)*f._ts,a,s),d!==this._time||!this._ts&&!v){y=0,m&&(h+=this._zTime=-ai);break}}f=m}else{f=this._last;for(var M=n<0?n:d;f;){if(m=f._prev,(f._act||M<=f._end)&&f._ts&&y!==f){if(f.parent!==this)return this.render(n,a,s);if(f.render(f._ts>0?(M-f._start)*f._ts:(f._dirty?f.totalDuration():f._tDur)+(M-f._start)*f._ts,a,s||xa&&(f._initted||f._startAt)),d!==this._time||!this._ts&&!v){y=0,m&&(h+=this._zTime=M?-ai:ai);break}}f=m}}if(y&&!a&&(this.pause(),y.render(d>=o?0:-ai)._zTime=d>=o?1:-1,this._ts))return this._start=b,hE(this),this.render(n,a,s);this._onUpdate&&!a&&Oo(this,"onUpdate",!0),(h===l&&this._tTime>=this.totalDuration()||!h&&o)&&(b===this._start||Math.abs(x)!==Math.abs(this._ts))&&(this._lock||((n||!u)&&(h===l&&this._ts>0||!h&&this._ts<0)&&Zh(this,1),!a&&!(n<0&&!o)&&(h||o||!l)&&(Oo(this,h===l&&n>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(h<l&&this.timeScale()>0)&&this._prom())))}return this},r.add=function(n,a){var s=this;if(Mc(a)||(a=mo(this,a,n)),!(n instanceof t1)){if(ba(n))return n.forEach(function(o){return s.add(o,a)}),this;if($n(n))return this.addLabel(n,a);if(Ni(n))n=Gi.delayedCall(0,n);else return this}return this!==n?ru(this,n,a):this},r.getChildren=function(n,a,s,o){n===void 0&&(n=!0),a===void 0&&(a=!0),s===void 0&&(s=!0),o===void 0&&(o=-Po);for(var l=[],u=this._first;u;)u._start>=o&&(u instanceof Gi?a&&l.push(u):(s&&l.push(u),n&&l.push.apply(l,u.getChildren(!0,a,s)))),u=u._next;return l},r.getById=function(n){for(var a=this.getChildren(1,1,1),s=a.length;s--;)if(a[s].vars.id===n)return a[s]},r.remove=function(n){return $n(n)?this.removeLabel(n):Ni(n)?this.killTweensOf(n):(cE(this,n),n===this._recent&&(this._recent=this._last),ff(this))},r.totalTime=function(n,a){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=ra(Gs.time-(this._ts>0?n/this._ts:(this.totalDuration()-n)/-this._ts))),e.prototype.totalTime.call(this,n,a),this._forcing=0,this):this._tTime},r.addLabel=function(n,a){return this.labels[n]=mo(this,a),this},r.removeLabel=function(n){return delete this.labels[n],this},r.addPause=function(n,a,s){var o=Gi.delayedCall(0,a||Zy,s);return o.data="isPause",this._hasPause=1,ru(this,o,mo(this,n))},r.removePause=function(n){var a=this._first;for(n=mo(this,n);a;)a._start===n&&a.data==="isPause"&&Zh(a),a=a._next},r.killTweensOf=function(n,a,s){for(var o=this.getTweensOf(n,s),l=o.length;l--;)vh!==o[l]&&o[l].kill(n,a);return this},r.getTweensOf=function(n,a){for(var s=[],o=Do(n),l=this._first,u=Mc(a),h;l;)l instanceof Gi?wle(l._targets,o)&&(u?(!vh||l._initted&&l._ts)&&l.globalTime(0)<=a&&l.globalTime(l.totalDuration())>a:!a||l.isActive())&&s.push(l):(h=l.getTweensOf(o,a)).length&&s.push.apply(s,h),l=l._next;return s},r.tweenTo=function(n,a){a=a||{};var s=this,o=mo(s,n),l=a,u=l.startAt,h=l.onStart,c=l.onStartParams,d=l.immediateRender,f,m=Gi.to(s,Fo({ease:a.ease||"none",lazy:!1,immediateRender:!1,time:o,overwrite:"auto",duration:a.duration||Math.abs((o-(u&&"time"in u?u.time:s._time))/s.timeScale())||ai,onStart:function(){if(s.pause(),!f){var g=a.duration||Math.abs((o-(u&&"time"in u?u.time:s._time))/s.timeScale());m._dur!==g&&Tg(m,g,0,1).render(m._time,!0,!0),f=1}h&&h.apply(m,c||[])}},a));return d?m.render(0):m},r.tweenFromTo=function(n,a,s){return this.tweenTo(a,Fo({startAt:{time:mo(this,n)}},s))},r.recent=function(){return this._recent},r.nextLabel=function(n){return n===void 0&&(n=this._time),e4(this,mo(this,n))},r.previousLabel=function(n){return n===void 0&&(n=this._time),e4(this,mo(this,n),1)},r.currentLabel=function(n){return arguments.length?this.seek(n,!0):this.previousLabel(this._time+ai)},r.shiftChildren=function(n,a,s){s===void 0&&(s=0);for(var o=this._first,l=this.labels,u;o;)o._start>=s&&(o._start+=n,o._end+=n),o=o._next;if(a)for(u in l)l[u]>=s&&(l[u]+=n);return ff(this)},r.invalidate=function(n){var a=this._first;for(this._lock=0;a;)a.invalidate(n),a=a._next;return e.prototype.invalidate.call(this,n)},r.clear=function(n){n===void 0&&(n=!0);for(var a=this._first,s;a;)s=a._next,this.remove(a),a=s;return this._dp&&(this._time=this._tTime=this._pTime=0),n&&(this.labels={}),ff(this)},r.totalDuration=function(n){var a=0,s=this,o=s._last,l=Po,u,h,c;if(arguments.length)return s.timeScale((s._repeat<0?s.duration():s.totalDuration())/(s.reversed()?-n:n));if(s._dirty){for(c=s.parent;o;)u=o._prev,o._dirty&&o.totalDuration(),h=o._start,h>l&&s._sort&&o._ts&&!s._lock?(s._lock=1,ru(s,o,h-o._delay,1)._lock=0):l=h,h<0&&o._ts&&(a-=h,(!c&&!s._dp||c&&c.smoothChildTiming)&&(s._start+=h/s._ts,s._time-=h,s._tTime-=h),s.shiftChildren(-h,!1,-1/0),l=0),o._end>a&&o._ts&&(a=o._end),o=u;Tg(s,s===wi&&s._time>a?s._time:a,1,1),s._dirty=0}return s._tDur},t.updateRoot=function(n){if(wi._ts&&(PG(wi,z_(n,wi)),AG=Gs.frame),Gs.frame>=QN){QN+=eo.autoSleep||120;var a=wi._first;if((!a||!a._ts)&&eo.autoSleep&&Gs._listeners.length<2){for(;a&&!a._ts;)a=a._next;a||Gs.sleep()}}},t}(t1);Fo(Va.prototype,{_lock:0,_hasPause:0,_forcing:0});var Gle=function(t,r,i,n,a,s,o){var l=new Ms(this._pt,t,r,0,1,iW,null,a),u=0,h=0,c,d,f,m,p,g,v,y;for(l.b=i,l.e=n,i+="",n+="",(v=~n.indexOf("random("))&&(n=Jy(n)),s&&(y=[i,n],s(y,t,r),i=y[0],n=y[1]),d=i.match(eC)||[];c=eC.exec(n);)m=c[0],p=n.substring(u,c.index),f?f=(f+1)%5:p.substr(-5)==="rgba("&&(f=1),m!==d[h++]&&(g=parseFloat(d[h-1])||0,l._pt={_next:l._pt,p:p||h===1?p:",",s:g,c:m.charAt(1)==="="?Ym(g,m)-g:parseFloat(m)-g,m:f&&f<4?Math.round:0},u=eC.lastIndex);return l.c=u<n.length?n.substring(u,n.length):"",l.fp=o,(_G.test(n)||v)&&(l.e=0),this._pt=l,l},II=function(t,r,i,n,a,s,o,l,u,h){Ni(n)&&(n=n(a||0,t,s));var c=t[r],d=i!=="get"?i:Ni(c)?u?t[r.indexOf("set")||!Ni(t["get"+r.substr(3)])?r:"get"+r.substr(3)](u):t[r]():c,f=Ni(c)?u?Xle:tW:kI,m;if($n(n)&&(~n.indexOf("random(")&&(n=Jy(n)),n.charAt(1)==="="&&(m=Ym(d,n)+(ga(d)||0),(m||m===0)&&(n=m))),!h||d!==n||zP)return!isNaN(d*n)&&n!==""?(m=new Ms(this._pt,t,r,+d||0,n-(d||0),typeof c=="boolean"?Kle:rW,0,f),u&&(m.fp=u),o&&m.modifier(o,this,t),this._pt=m):(!c&&!(r in t)&&TI(r,n),Gle.call(this,t,r,d,n,f,l||eo.stringFilter,u))},Wle=function(t,r,i,n,a){if(Ni(t)&&(t=sy(t,a,r,i,n)),!wu(t)||t.style&&t.nodeType||ba(t)||bG(t))return $n(t)?sy(t,a,r,i,n):t;var s={},o;for(o in t)s[o]=sy(t[o],a,r,i,n);return s},ZG=function(t,r,i,n,a,s){var o,l,u,h;if(Us[t]&&(o=new Us[t]).init(a,o.rawVars?r[t]:Wle(r[t],n,a,s,i),i,n,s)!==!1&&(i._pt=l=new Ms(i._pt,a,t,0,1,o.render,o,0,o.priority),i!==Am))for(u=i._ptLookup[i._targets.indexOf(a)],h=o._props.length;h--;)u[o._props[h]]=l;return o},vh,zP,RI=function e(t,r,i){var n=t.vars,a=n.ease,s=n.startAt,o=n.immediateRender,l=n.lazy,u=n.onUpdate,h=n.onUpdateParams,c=n.callbackScope,d=n.runBackwards,f=n.yoyoEase,m=n.keyframes,p=n.autoRevert,g=t._dur,v=t._startAt,y=t._targets,x=t.parent,b=x&&x.data==="nested"?x.vars.targets:y,_=t._overwrite==="auto"&&!EI,w=t.timeline,E,S,C,M,P,I,k,L,O,F,z,B,V;if(w&&(!m||!a)&&(a="none"),t._ease=pf(a,Cg.ease),t._yEase=f?qG(pf(f===!0?a:f,Cg.ease)):0,f&&t._yoyo&&!t._repeat&&(f=t._yEase,t._yEase=t._ease,t._ease=f),t._from=!w&&!!n.runBackwards,!w||m&&!n.stagger){if(L=y[0]?df(y[0]).harness:0,B=L&&n[L.prop],E=N_(n,PI),v&&(v._zTime<0&&v.progress(1),r<0&&d&&o&&!p?v.render(-1,!0):v.revert(d&&g?Dw:xle),v._lazy=0),s){if(Zh(t._startAt=Gi.set(y,Fo({data:"isStart",overwrite:!1,parent:x,immediateRender:!0,lazy:!v&&Ss(l),startAt:null,delay:0,onUpdate:u,onUpdateParams:h,callbackScope:c,stagger:0},s))),t._startAt._dp=0,t._startAt._sat=t,r<0&&(xa||!o&&!p)&&t._startAt.revert(Dw),o&&g&&r<=0&&i<=0){r&&(t._zTime=r);return}}else if(d&&g&&!v){if(r&&(o=!1),C=Fo({overwrite:!1,data:"isFromStart",lazy:o&&!v&&Ss(l),immediateRender:o,stagger:0,parent:x},E),B&&(C[L.prop]=B),Zh(t._startAt=Gi.set(y,C)),t._startAt._dp=0,t._startAt._sat=t,r<0&&(xa?t._startAt.revert(Dw):t._startAt.render(-1,!0)),t._zTime=r,!o)e(t._startAt,ai,ai);else if(!r)return}for(t._pt=t._ptCache=0,l=g&&Ss(l)||l&&!g,S=0;S<y.length;S++){if(P=y[S],k=P._gsap||OI(y)[S]._gsap,t._ptLookup[S]=F={},IP[k.id]&&Uh.length&&B_(),z=b===y?S:b.indexOf(P),L&&(O=new L).init(P,B||E,t,z,b)!==!1&&(t._pt=M=new Ms(t._pt,P,O.name,0,1,O.render,O,0,O.priority),O._props.forEach(function(R){F[R]=M}),O.priority&&(I=1)),!L||B)for(C in E)Us[C]&&(O=ZG(C,E,t,z,P,b))?O.priority&&(I=1):F[C]=M=II.call(t,P,C,"get",E[C],z,b,0,n.stringFilter);t._op&&t._op[S]&&t.kill(P,t._op[S]),_&&t._pt&&(vh=t,wi.killTweensOf(P,F,t.globalTime(r)),V=!t.parent,vh=0),t._pt&&l&&(IP[k.id]=1)}I&&nW(t),t._onInit&&t._onInit(t)}t._onUpdate=u,t._initted=(!t._op||t._pt)&&!V,m&&r<=0&&w.render(Po,!0,!0)},$le=function(t,r,i,n,a,s,o){var l=(t._pt&&t._ptCache||(t._ptCache={}))[r],u,h,c,d;if(!l)for(l=t._ptCache[r]=[],c=t._ptLookup,d=t._targets.length;d--;){if(u=c[d][r],u&&u.d&&u.d._pt)for(u=u.d._pt;u&&u.p!==r&&u.fp!==r;)u=u._next;if(!u)return zP=1,t.vars[r]="+=0",RI(t,o),zP=0,1;l.push(u)}for(d=l.length;d--;)h=l[d],u=h._pt||h,u.s=(n||n===0)&&!a?n:u.s+(n||0)+s*u.c,u.c=i-u.s,h.e&&(h.e=Hi(i)+ga(h.e)),h.b&&(h.b=u.s+ga(h.b))},Yle=function(t,r){var i=t[0]?df(t[0]).harness:0,n=i&&i.aliases,a,s,o,l;if(!n)return r;a=Rf({},r);for(s in n)if(s in a)for(l=n[s].split(","),o=l.length;o--;)a[l[o]]=a[s];return a},qle=function(t,r,i,n){var a=r.ease||n||"power1.inOut",s,o;if(ba(r))o=i[t]||(i[t]=[]),r.forEach(function(l,u){return o.push({t:u/(r.length-1)*100,v:l,e:a})});else for(s in r)o=i[s]||(i[s]=[]),s==="ease"||o.push({t:parseFloat(t),v:r[s],e:a})},sy=function(t,r,i,n,a){return Ni(t)?t.call(r,i,n,a):$n(t)&&~t.indexOf("random(")?Jy(t):t},JG=DI+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",eW={};Es(JG+",id,stagger,delay,duration,paused,scrollTrigger",function(e){return eW[e]=1});var Gi=function(e){yG(t,e);function t(i,n,a,s){var o;typeof n=="number"&&(a.duration=n,n=a,a=null),o=e.call(this,s?n:ny(n))||this;var l=o.vars,u=l.duration,h=l.delay,c=l.immediateRender,d=l.stagger,f=l.overwrite,m=l.keyframes,p=l.defaults,g=l.scrollTrigger,v=l.yoyoEase,y=n.parent||wi,x=(ba(i)||bG(i)?Mc(i[0]):"length"in n)?[i]:Do(i),b,_,w,E,S,C,M,P;if(o._targets=x.length?OI(x):L_("GSAP target "+i+" not found. https://greensock.com",!eo.nullTargetWarn)||[],o._ptLookup=[],o._overwrite=f,m||d||kx(u)||kx(h)){if(n=o.vars,b=o.timeline=new Va({data:"nested",defaults:p||{},targets:y&&y.data==="nested"?y.vars.targets:x}),b.kill(),b.parent=b._dp=Ku(o),b._start=0,d||kx(u)||kx(h)){if(E=x.length,M=d&&zG(d),wu(d))for(S in d)~JG.indexOf(S)&&(P||(P={}),P[S]=d[S]);for(_=0;_<E;_++)w=N_(n,eW),w.stagger=0,v&&(w.yoyoEase=v),P&&Rf(w,P),C=x[_],w.duration=+sy(u,Ku(o),_,C,x),w.delay=(+sy(h,Ku(o),_,C,x)||0)-o._delay,!d&&E===1&&w.delay&&(o._delay=h=w.delay,o._start+=h,w.delay=0),b.to(C,w,M?M(_,C,x):0),b._ease=Sr.none;b.duration()?u=h=0:o.timeline=0}else if(m){ny(Fo(b.vars.defaults,{ease:"none"})),b._ease=pf(m.ease||n.ease||"none");var I=0,k,L,O;if(ba(m))m.forEach(function(F){return b.to(x,F,">")}),b.duration();else{w={};for(S in m)S==="ease"||S==="easeEach"||qle(S,m[S],w,m.easeEach);for(S in w)for(k=w[S].sort(function(F,z){return F.t-z.t}),I=0,_=0;_<k.length;_++)L=k[_],O={ease:L.e,duration:(L.t-(_?k[_-1].t:0))/100*u},O[S]=L.v,b.to(x,O,I),I+=O.duration;b.duration()<u&&b.to({},{duration:u-b.duration()})}}u||o.duration(u=b.duration())}else o.timeline=0;return f===!0&&!EI&&(vh=Ku(o),wi.killTweensOf(x),vh=0),ru(y,Ku(o),a),n.reversed&&o.reverse(),n.paused&&o.paused(!0),(c||!u&&!m&&o._start===ra(y._time)&&Ss(c)&&Mle(Ku(o))&&y.data!=="nested")&&(o._tTime=-ai,o.render(Math.max(0,-h)||0)),g&&kG(Ku(o),g),o}var r=t.prototype;return r.render=function(n,a,s){var o=this._time,l=this._tDur,u=this._dur,h=n<0,c=n>l-ai&&!h?l:n<ai?0:n,d,f,m,p,g,v,y,x,b;if(!u)Ale(this,n,a,s);else if(c!==this._tTime||!n||s||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==h){if(d=c,x=this.timeline,this._repeat){if(p=u+this._rDelay,this._repeat<-1&&h)return this.totalTime(p*100+n,a,s);if(d=ra(c%p),c===l?(m=this._repeat,d=u):(m=~~(c/p),m&&m===c/p&&(d=u,m--),d>u&&(d=u)),v=this._yoyo&&m&1,v&&(b=this._yEase,d=u-d),g=Ag(this._tTime,p),d===o&&!s&&this._initted)return this._tTime=c,this;m!==g&&(x&&this._yEase&&XG(x,v),this.vars.repeatRefresh&&!v&&!this._lock&&(this._lock=s=1,this.render(ra(p*m),!0).invalidate()._lock=0))}if(!this._initted){if(LG(this,h?n:d,s,a,c))return this._tTime=0,this;if(o!==this._time)return this;if(u!==this._dur)return this.render(n,a,s)}if(this._tTime=c,this._time=d,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=y=(b||this._ease)(d/u),this._from&&(this.ratio=y=1-y),d&&!o&&!a&&!m&&(Oo(this,"onStart"),this._tTime!==c))return this;for(f=this._pt;f;)f.r(y,f.d),f=f._next;x&&x.render(n<0?n:!d&&v?-ai:x._dur*x._ease(d/this._dur),a,s)||this._startAt&&(this._zTime=n),this._onUpdate&&!a&&(h&&RP(this,n,a,s),Oo(this,"onUpdate")),this._repeat&&m!==g&&this.vars.onRepeat&&!a&&this.parent&&Oo(this,"onRepeat"),(c===this._tDur||!c)&&this._tTime===c&&(h&&!this._onUpdate&&RP(this,n,!0,!0),(n||!u)&&(c===this._tDur&&this._ts>0||!c&&this._ts<0)&&Zh(this,1),!a&&!(h&&!o)&&(c||o||v)&&(Oo(this,c===l?"onComplete":"onReverseComplete",!0),this._prom&&!(c<l&&this.timeScale()>0)&&this._prom()))}return this},r.targets=function(){return this._targets},r.invalidate=function(n){return(!n||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(n),e.prototype.invalidate.call(this,n)},r.resetTo=function(n,a,s,o){e1||Gs.wake(),this._ts||this.play();var l=Math.min(this._dur,(this._dp._time-this._start)*this._ts),u;return this._initted||RI(this,l),u=this._ease(l/this._dur),$le(this,n,a,s,o,u,l)?this.resetTo(n,a,s,o):(dE(this,0),this.parent||IG(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},r.kill=function(n,a){if(a===void 0&&(a="all"),!n&&(!a||a==="all"))return this._lazy=this._pt=0,this.parent?k0(this):this;if(this.timeline){var s=this.timeline.totalDuration();return this.timeline.killTweensOf(n,a,vh&&vh.vars.overwrite!==!0)._first||k0(this),this.parent&&s!==this.timeline.totalDuration()&&Tg(this,this._dur*this.timeline._tDur/s,0,1),this}var o=this._targets,l=n?Do(n):o,u=this._ptLookup,h=this._pt,c,d,f,m,p,g,v;if((!a||a==="all")&&Sle(o,l))return a==="all"&&(this._pt=0),k0(this);for(c=this._op=this._op||[],a!=="all"&&($n(a)&&(p={},Es(a,function(y){return p[y]=1}),a=p),a=Yle(o,a)),v=o.length;v--;)if(~l.indexOf(o[v])){d=u[v],a==="all"?(c[v]=a,m=d,f={}):(f=c[v]=c[v]||{},m=a);for(p in m)g=d&&d[p],g&&((!("kill"in g.d)||g.d.kill(p)===!0)&&cE(this,g,"_pt"),delete d[p]),f!=="all"&&(f[p]=1)}return this._initted&&!this._pt&&h&&k0(this),this},t.to=function(n,a){return new t(n,a,arguments[2])},t.from=function(n,a){return ay(1,arguments)},t.delayedCall=function(n,a,s,o){return new t(a,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:n,onComplete:a,onReverseComplete:a,onCompleteParams:s,onReverseCompleteParams:s,callbackScope:o})},t.fromTo=function(n,a,s){return ay(2,arguments)},t.set=function(n,a){return a.duration=0,a.repeatDelay||(a.repeat=0),new t(n,a)},t.killTweensOf=function(n,a,s){return wi.killTweensOf(n,a,s)},t}(t1);Fo(Gi.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Es("staggerTo,staggerFrom,staggerFromTo",function(e){Gi[e]=function(){var t=new Va,r=LP.call(arguments,0);return r.splice(e==="staggerFromTo"?5:4,0,0),t[e].apply(t,r)}});var kI=function(t,r,i){return t[r]=i},tW=function(t,r,i){return t[r](i)},Xle=function(t,r,i,n){return t[r](n.fp,i)},Qle=function(t,r,i){return t.setAttribute(r,i)},LI=function(t,r){return Ni(t[r])?tW:MI(t[r])&&t.setAttribute?Qle:kI},rW=function(t,r){return r.set(r.t,r.p,Math.round((r.s+r.c*t)*1e6)/1e6,r)},Kle=function(t,r){return r.set(r.t,r.p,!!(r.s+r.c*t),r)},iW=function(t,r){var i=r._pt,n="";if(!t&&r.b)n=r.b;else if(t===1&&r.e)n=r.e;else{for(;i;)n=i.p+(i.m?i.m(i.s+i.c*t):Math.round((i.s+i.c*t)*1e4)/1e4)+n,i=i._next;n+=r.c}r.set(r.t,r.p,n,r)},BI=function(t,r){for(var i=r._pt;i;)i.r(t,i.d),i=i._next},Zle=function(t,r,i,n){for(var a=this._pt,s;a;)s=a._next,a.p===n&&a.modifier(t,r,i),a=s},Jle=function(t){for(var r=this._pt,i,n;r;)n=r._next,r.p===t&&!r.op||r.op===t?cE(this,r,"_pt"):r.dep||(i=1),r=n;return!i},eue=function(t,r,i,n){n.mSet(t,r,n.m.call(n.tween,i,n.mt),n)},nW=function(t){for(var r=t._pt,i,n,a,s;r;){for(i=r._next,n=a;n&&n.pr>r.pr;)n=n._next;(r._prev=n?n._prev:s)?r._prev._next=r:a=r,(r._next=n)?n._prev=r:s=r,r=i}t._pt=a},Ms=function(){function e(r,i,n,a,s,o,l,u,h){this.t=i,this.s=a,this.c=s,this.p=n,this.r=o||rW,this.d=l||this,this.set=u||kI,this.pr=h||0,this._next=r,r&&(r._prev=this)}var t=e.prototype;return t.modifier=function(i,n,a){this.mSet=this.mSet||this.set,this.set=eue,this.m=i,this.mt=a,this.tween=n},e}();Es(DI+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(e){return PI[e]=1});ro.TweenMax=ro.TweenLite=Gi;ro.TimelineLite=ro.TimelineMax=Va;wi=new Va({sortChildren:!1,defaults:Cg,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});eo.stringFilter=YG;var mf=[],Iw={},tue=[],r4=0,rue=0,aC=function(t){return(Iw[t]||tue).map(function(r){return r()})},FP=function(){var t=Date.now(),r=[];t-r4>2&&(aC("matchMediaInit"),mf.forEach(function(i){var n=i.queries,a=i.conditions,s,o,l,u;for(o in n)s=go.matchMedia(n[o]).matches,s&&(l=1),s!==a[o]&&(a[o]=s,u=1);u&&(i.revert(),l&&r.push(i))}),aC("matchMediaRevert"),r.forEach(function(i){return i.onMatch(i)}),r4=t,aC("matchMedia"))},aW=function(){function e(r,i){this.selector=i&&BP(i),this.data=[],this._r=[],this.isReverted=!1,this.id=rue++,r&&this.add(r)}var t=e.prototype;return t.add=function(i,n,a){Ni(i)&&(a=n,n=i,i=Ni);var s=this,o=function(){var u=Ri,h=s.selector,c;return u&&u!==s&&u.data.push(s),a&&(s.selector=BP(a)),Ri=s,c=n.apply(s,arguments),Ni(c)&&s._r.push(c),Ri=u,s.selector=h,s.isReverted=!1,c};return s.last=o,i===Ni?o(s):i?s[i]=o:o},t.ignore=function(i){var n=Ri;Ri=null,i(this),Ri=n},t.getTweens=function(){var i=[];return this.data.forEach(function(n){return n instanceof e?i.push.apply(i,n.getTweens()):n instanceof Gi&&!(n.parent&&n.parent.data==="nested")&&i.push(n)}),i},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(i,n){var a=this;if(i){var s=this.getTweens();this.data.forEach(function(l){l.data==="isFlip"&&(l.revert(),l.getChildren(!0,!0,!1).forEach(function(u){return s.splice(s.indexOf(u),1)}))}),s.map(function(l){return{g:l.globalTime(0),t:l}}).sort(function(l,u){return u.g-l.g||-1/0}).forEach(function(l){return l.t.revert(i)}),this.data.forEach(function(l){return!(l instanceof Gi)&&l.revert&&l.revert(i)}),this._r.forEach(function(l){return l(i,a)}),this.isReverted=!0}else this.data.forEach(function(l){return l.kill&&l.kill()});if(this.clear(),n)for(var o=mf.length;o--;)mf[o].id===this.id&&mf.splice(o,1)},t.revert=function(i){this.kill(i||{})},e}(),iue=function(){function e(r){this.contexts=[],this.scope=r}var t=e.prototype;return t.add=function(i,n,a){wu(i)||(i={matches:i});var s=new aW(0,a||this.scope),o=s.conditions={},l,u,h;Ri&&!s.selector&&(s.selector=Ri.selector),this.contexts.push(s),n=s.add("onMatch",n),s.queries=i;for(u in i)u==="all"?h=1:(l=go.matchMedia(i[u]),l&&(mf.indexOf(s)<0&&mf.push(s),(o[u]=l.matches)&&(h=1),l.addListener?l.addListener(FP):l.addEventListener("change",FP)));return h&&n(s),this},t.revert=function(i){this.kill(i||{})},t.kill=function(i){this.contexts.forEach(function(n){return n.kill(i,!0)})},e}(),F_={registerPlugin:function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];r.forEach(function(n){return GG(n)})},timeline:function(t){return new Va(t)},getTweensOf:function(t,r){return wi.getTweensOf(t,r)},getProperty:function(t,r,i,n){$n(t)&&(t=Do(t)[0]);var a=df(t||{}).get,s=i?OG:DG;return i==="native"&&(i=""),t&&(r?s((Us[r]&&Us[r].get||a)(t,r,i,n)):function(o,l,u){return s((Us[o]&&Us[o].get||a)(t,o,l,u))})},quickSetter:function(t,r,i){if(t=Do(t),t.length>1){var n=t.map(function(h){return Ps.quickSetter(h,r,i)}),a=n.length;return function(h){for(var c=a;c--;)n[c](h)}}t=t[0]||{};var s=Us[r],o=df(t),l=o.harness&&(o.harness.aliases||{})[r]||r,u=s?function(h){var c=new s;Am._pt=0,c.init(t,i?h+i:h,Am,0,[t]),c.render(1,c),Am._pt&&BI(1,Am)}:o.set(t,l);return s?u:function(h){return u(t,l,i?h+i:h,o,1)}},quickTo:function(t,r,i){var n,a=Ps.to(t,Rf((n={},n[r]="+=0.1",n.paused=!0,n),i||{})),s=function(l,u,h){return a.resetTo(r,l,u,h)};return s.tween=a,s},isTweening:function(t){return wi.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=pf(t.ease,Cg.ease)),KN(Cg,t||{})},config:function(t){return KN(eo,t||{})},registerEffect:function(t){var r=t.name,i=t.effect,n=t.plugins,a=t.defaults,s=t.extendTimeline;(n||"").split(",").forEach(function(o){return o&&!Us[o]&&!ro[o]&&L_(r+" effect requires "+o+" plugin.")}),tC[r]=function(o,l,u){return i(Do(o),Fo(l||{},a),u)},s&&(Va.prototype[r]=function(o,l,u){return this.add(tC[r](o,wu(l)?l:(u=l)&&{},this),u)})},registerEase:function(t,r){Sr[t]=pf(r)},parseEase:function(t,r){return arguments.length?pf(t,r):Sr},getById:function(t){return wi.getById(t)},exportRoot:function(t,r){t===void 0&&(t={});var i=new Va(t),n,a;for(i.smoothChildTiming=Ss(t.smoothChildTiming),wi.remove(i),i._dp=0,i._time=i._tTime=wi._time,n=wi._first;n;)a=n._next,(r||!(!n._dur&&n instanceof Gi&&n.vars.onComplete===n._targets[0]))&&ru(i,n,n._start-n._delay),n=a;return ru(wi,i,0),i},context:function(t,r){return t?new aW(t,r):Ri},matchMedia:function(t){return new iue(t)},matchMediaRefresh:function(){return mf.forEach(function(t){var r=t.conditions,i,n;for(n in r)r[n]&&(r[n]=!1,i=1);i&&t.revert()})||FP()},addEventListener:function(t,r){var i=Iw[t]||(Iw[t]=[]);~i.indexOf(r)||i.push(r)},removeEventListener:function(t,r){var i=Iw[t],n=i&&i.indexOf(r);n>=0&&i.splice(n,1)},utils:{wrap:Lle,wrapYoyo:Ble,distribute:zG,random:UG,snap:FG,normalize:kle,getUnit:ga,clamp:Dle,splitColor:WG,toArray:Do,selector:BP,mapRange:VG,pipe:Ile,unitize:Rle,interpolate:Nle,shuffle:NG},install:MG,effects:tC,ticker:Gs,updateRoot:Va.updateRoot,plugins:Us,globalTimeline:wi,core:{PropTween:Ms,globals:CG,Tween:Gi,Timeline:Va,Animation:t1,getCache:df,_removeLinkedListItem:cE,reverting:function(){return xa},context:function(t){return t&&Ri&&(Ri.data.push(t),t._ctx=Ri),Ri},suppressOverwrites:function(t){return EI=t}}};Es("to,from,fromTo,delayedCall,set,killTweensOf",function(e){return F_[e]=Gi[e]});Gs.add(Va.updateRoot);Am=F_.to({},{duration:0});var nue=function(t,r){for(var i=t._pt;i&&i.p!==r&&i.op!==r&&i.fp!==r;)i=i._next;return i},aue=function(t,r){var i=t._targets,n,a,s;for(n in r)for(a=i.length;a--;)s=t._ptLookup[a][n],s&&(s=s.d)&&(s._pt&&(s=nue(s,n)),s&&s.modifier&&s.modifier(r[n],t,i[a],n))},sC=function(t,r){return{name:t,rawVars:1,init:function(n,a,s){s._onInit=function(o){var l,u;if($n(a)&&(l={},Es(a,function(h){return l[h]=1}),a=l),r){l={};for(u in a)l[u]=r(a[u]);a=l}aue(o,a)}}}},Ps=F_.registerPlugin({name:"attr",init:function(t,r,i,n,a){var s,o,l;this.tween=i;for(s in r)l=t.getAttribute(s)||"",o=this.add(t,"setAttribute",(l||0)+"",r[s],n,a,0,0,s),o.op=s,o.b=l,this._props.push(s)},render:function(t,r){for(var i=r._pt;i;)xa?i.set(i.t,i.p,i.b,i):i.r(t,i.d),i=i._next}},{name:"endArray",init:function(t,r){for(var i=r.length;i--;)this.add(t,i,t[i]||0,r[i],0,0,0,0,0,1)}},sC("roundProps",NP),sC("modifiers"),sC("snap",FG))||F_;Gi.version=Va.version=Ps.version="3.12.2";EG=1;CI()&&Pg();Sr.Power0;var qo=Sr.Power1;Sr.Power2;Sr.Power3;Sr.Power4;Sr.Linear;Sr.Quad;Sr.Cubic;Sr.Quart;Sr.Quint;Sr.Strong;Sr.Elastic;Sr.Back;Sr.SteppedEase;Sr.Bounce;Sr.Sine;Sr.Expo;Sr.Circ;/*!
 * CSSPlugin 3.12.2
 * https://greensock.com
 *
 * Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var i4,yh,qm,NI,tf,n4,zI,sue=function(){return typeof window<"u"},Cc={},Bd=180/Math.PI,Xm=Math.PI/180,yp=Math.atan2,a4=1e8,FI=/([A-Z])/g,oue=/(left|right|width|margin|padding|x)/i,lue=/[\s,\(]\S/,cu={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},UP=function(t,r){return r.set(r.t,r.p,Math.round((r.s+r.c*t)*1e4)/1e4+r.u,r)},uue=function(t,r){return r.set(r.t,r.p,t===1?r.e:Math.round((r.s+r.c*t)*1e4)/1e4+r.u,r)},cue=function(t,r){return r.set(r.t,r.p,t?Math.round((r.s+r.c*t)*1e4)/1e4+r.u:r.b,r)},hue=function(t,r){var i=r.s+r.c*t;r.set(r.t,r.p,~~(i+(i<0?-.5:.5))+r.u,r)},sW=function(t,r){return r.set(r.t,r.p,t?r.e:r.b,r)},oW=function(t,r){return r.set(r.t,r.p,t!==1?r.b:r.e,r)},due=function(t,r,i){return t.style[r]=i},fue=function(t,r,i){return t.style.setProperty(r,i)},pue=function(t,r,i){return t._gsap[r]=i},mue=function(t,r,i){return t._gsap.scaleX=t._gsap.scaleY=i},gue=function(t,r,i,n,a){var s=t._gsap;s.scaleX=s.scaleY=i,s.renderTransform(a,s)},vue=function(t,r,i,n,a){var s=t._gsap;s[r]=i,s.renderTransform(a,s)},_i="transform",bl=_i+"Origin",yue=function e(t,r){var i=this,n=this.target,a=n.style;if(t in Cc&&a){if(this.tfm=this.tfm||{},t!=="transform")t=cu[t]||t,~t.indexOf(",")?t.split(",").forEach(function(s){return i.tfm[s]=rc(n,s)}):this.tfm[t]=n._gsap.x?n._gsap[t]:rc(n,t);else return cu.transform.split(",").forEach(function(s){return e.call(i,s,r)});if(this.props.indexOf(_i)>=0)return;n._gsap.svg&&(this.svgo=n.getAttribute("data-svg-origin"),this.props.push(bl,r,"")),t=_i}(a||r)&&this.props.push(t,r,a[t])},lW=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},xue=function(){var t=this.props,r=this.target,i=r.style,n=r._gsap,a,s;for(a=0;a<t.length;a+=3)t[a+1]?r[t[a]]=t[a+2]:t[a+2]?i[t[a]]=t[a+2]:i.removeProperty(t[a].substr(0,2)==="--"?t[a]:t[a].replace(FI,"-$1").toLowerCase());if(this.tfm){for(s in this.tfm)n[s]=this.tfm[s];n.svg&&(n.renderTransform(),r.setAttribute("data-svg-origin",this.svgo||"")),a=zI(),(!a||!a.isStart)&&!i[_i]&&(lW(i),n.uncache=1)}},uW=function(t,r){var i={target:t,props:[],revert:xue,save:yue};return t._gsap||Ps.core.getCache(t),r&&r.split(",").forEach(function(n){return i.save(n)}),i},cW,jP=function(t,r){var i=yh.createElementNS?yh.createElementNS((r||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):yh.createElement(t);return i.style?i:yh.createElement(t)},vu=function e(t,r,i){var n=getComputedStyle(t);return n[r]||n.getPropertyValue(r.replace(FI,"-$1").toLowerCase())||n.getPropertyValue(r)||!i&&e(t,Dg(r)||r,1)||""},s4="O,Moz,ms,Ms,Webkit".split(","),Dg=function(t,r,i){var n=r||tf,a=n.style,s=5;if(t in a&&!i)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);s--&&!(s4[s]+t in a););return s<0?null:(s===3?"ms":s>=0?s4[s]:"")+t},VP=function(){sue()&&window.document&&(i4=window,yh=i4.document,qm=yh.documentElement,tf=jP("div")||{style:{}},jP("div"),_i=Dg(_i),bl=_i+"Origin",tf.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",cW=!!Dg("perspective"),zI=Ps.core.reverting,NI=1)},oC=function e(t){var r=jP("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,n=this.nextSibling,a=this.style.cssText,s;if(qm.appendChild(r),r.appendChild(this),this.style.display="block",t)try{s=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=e}catch{}else this._gsapBBox&&(s=this._gsapBBox());return i&&(n?i.insertBefore(this,n):i.appendChild(this)),qm.removeChild(r),this.style.cssText=a,s},o4=function(t,r){for(var i=r.length;i--;)if(t.hasAttribute(r[i]))return t.getAttribute(r[i])},hW=function(t){var r;try{r=t.getBBox()}catch{r=oC.call(t,!0)}return r&&(r.width||r.height)||t.getBBox===oC||(r=oC.call(t,!0)),r&&!r.width&&!r.x&&!r.y?{x:+o4(t,["x","cx","x1"])||0,y:+o4(t,["y","cy","y1"])||0,width:0,height:0}:r},dW=function(t){return!!(t.getCTM&&(!t.parentNode||t.ownerSVGElement)&&hW(t))},r1=function(t,r){if(r){var i=t.style;r in Cc&&r!==bl&&(r=_i),i.removeProperty?((r.substr(0,2)==="ms"||r.substr(0,6)==="webkit")&&(r="-"+r),i.removeProperty(r.replace(FI,"-$1").toLowerCase())):i.removeAttribute(r)}},xh=function(t,r,i,n,a,s){var o=new Ms(t._pt,r,i,0,1,s?oW:sW);return t._pt=o,o.b=n,o.e=a,t._props.push(i),o},l4={deg:1,rad:1,turn:1},bue={grid:1,flex:1},Jh=function e(t,r,i,n){var a=parseFloat(i)||0,s=(i+"").trim().substr((a+"").length)||"px",o=tf.style,l=oue.test(r),u=t.tagName.toLowerCase()==="svg",h=(u?"client":"offset")+(l?"Width":"Height"),c=100,d=n==="px",f=n==="%",m,p,g,v;return n===s||!a||l4[n]||l4[s]?a:(s!=="px"&&!d&&(a=e(t,r,i,"px")),v=t.getCTM&&dW(t),(f||s==="%")&&(Cc[r]||~r.indexOf("adius"))?(m=v?t.getBBox()[l?"width":"height"]:t[h],Hi(f?a/m*c:a/100*m)):(o[l?"width":"height"]=c+(d?s:n),p=~r.indexOf("adius")||n==="em"&&t.appendChild&&!u?t:t.parentNode,v&&(p=(t.ownerSVGElement||{}).parentNode),(!p||p===yh||!p.appendChild)&&(p=yh.body),g=p._gsap,g&&f&&g.width&&l&&g.time===Gs.time&&!g.uncache?Hi(a/g.width*c):((f||s==="%")&&!bue[vu(p,"display")]&&(o.position=vu(t,"position")),p===t&&(o.position="static"),p.appendChild(tf),m=tf[h],p.removeChild(tf),o.position="absolute",l&&f&&(g=df(p),g.time=Gs.time,g.width=p[h]),Hi(d?m*a/c:m&&a?c/m*a:0))))},rc=function(t,r,i,n){var a;return NI||VP(),r in cu&&r!=="transform"&&(r=cu[r],~r.indexOf(",")&&(r=r.split(",")[0])),Cc[r]&&r!=="transform"?(a=n1(t,n),a=r!=="transformOrigin"?a[r]:a.svg?a.origin:j_(vu(t,bl))+" "+a.zOrigin+"px"):(a=t.style[r],(!a||a==="auto"||n||~(a+"").indexOf("calc("))&&(a=U_[r]&&U_[r](t,r,i)||vu(t,r)||TG(t,r)||(r==="opacity"?1:0))),i&&!~(a+"").trim().indexOf(" ")?Jh(t,r,a,i)+i:a},wue=function(t,r,i,n){if(!i||i==="none"){var a=Dg(r,t,1),s=a&&vu(t,a,1);s&&s!==i?(r=a,i=s):r==="borderColor"&&(i=vu(t,"borderTopColor"))}var o=new Ms(this._pt,t.style,r,0,1,iW),l=0,u=0,h,c,d,f,m,p,g,v,y,x,b,_;if(o.b=i,o.e=n,i+="",n+="",n==="auto"&&(t.style[r]=n,n=vu(t,r)||n,t.style[r]=i),h=[i,n],YG(h),i=h[0],n=h[1],d=i.match(Cm)||[],_=n.match(Cm)||[],_.length){for(;c=Cm.exec(n);)g=c[0],y=n.substring(l,c.index),m?m=(m+1)%5:(y.substr(-5)==="rgba("||y.substr(-5)==="hsla(")&&(m=1),g!==(p=d[u++]||"")&&(f=parseFloat(p)||0,b=p.substr((f+"").length),g.charAt(1)==="="&&(g=Ym(f,g)+b),v=parseFloat(g),x=g.substr((v+"").length),l=Cm.lastIndex-x.length,x||(x=x||eo.units[r]||b,l===n.length&&(n+=x,o.e+=x)),b!==x&&(f=Jh(t,r,p,x)||0),o._pt={_next:o._pt,p:y||u===1?y:",",s:f,c:v-f,m:m&&m<4||r==="zIndex"?Math.round:0});o.c=l<n.length?n.substring(l,n.length):""}else o.r=r==="display"&&n==="none"?oW:sW;return _G.test(n)&&(o.e=0),this._pt=o,o},u4={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},_ue=function(t){var r=t.split(" "),i=r[0],n=r[1]||"50%";return(i==="top"||i==="bottom"||n==="left"||n==="right")&&(t=i,i=n,n=t),r[0]=u4[i]||i,r[1]=u4[n]||n,r.join(" ")},Sue=function(t,r){if(r.tween&&r.tween._time===r.tween._dur){var i=r.t,n=i.style,a=r.u,s=i._gsap,o,l,u;if(a==="all"||a===!0)n.cssText="",l=1;else for(a=a.split(","),u=a.length;--u>-1;)o=a[u],Cc[o]&&(l=1,o=o==="transformOrigin"?bl:_i),r1(i,o);l&&(r1(i,_i),s&&(s.svg&&i.removeAttribute("transform"),n1(i,1),s.uncache=1,lW(n)))}},U_={clearProps:function(t,r,i,n,a){if(a.data!=="isFromStart"){var s=t._pt=new Ms(t._pt,r,i,0,0,Sue);return s.u=n,s.pr=-10,s.tween=a,t._props.push(i),1}}},i1=[1,0,0,1,0,0],fW={},pW=function(t){return t==="matrix(1, 0, 0, 1, 0, 0)"||t==="none"||!t},c4=function(t){var r=vu(t,_i);return pW(r)?i1:r.substr(7).match(wG).map(Hi)},UI=function(t,r){var i=t._gsap||df(t),n=t.style,a=c4(t),s,o,l,u;return i.svg&&t.getAttribute("transform")?(l=t.transform.baseVal.consolidate().matrix,a=[l.a,l.b,l.c,l.d,l.e,l.f],a.join(",")==="1,0,0,1,0,0"?i1:a):(a===i1&&!t.offsetParent&&t!==qm&&!i.svg&&(l=n.display,n.display="block",s=t.parentNode,(!s||!t.offsetParent)&&(u=1,o=t.nextElementSibling,qm.appendChild(t)),a=c4(t),l?n.display=l:r1(t,"display"),u&&(o?s.insertBefore(t,o):s?s.appendChild(t):qm.removeChild(t))),r&&a.length>6?[a[0],a[1],a[4],a[5],a[12],a[13]]:a)},HP=function(t,r,i,n,a,s){var o=t._gsap,l=a||UI(t,!0),u=o.xOrigin||0,h=o.yOrigin||0,c=o.xOffset||0,d=o.yOffset||0,f=l[0],m=l[1],p=l[2],g=l[3],v=l[4],y=l[5],x=r.split(" "),b=parseFloat(x[0])||0,_=parseFloat(x[1])||0,w,E,S,C;i?l!==i1&&(E=f*g-m*p)&&(S=b*(g/E)+_*(-p/E)+(p*y-g*v)/E,C=b*(-m/E)+_*(f/E)-(f*y-m*v)/E,b=S,_=C):(w=hW(t),b=w.x+(~x[0].indexOf("%")?b/100*w.width:b),_=w.y+(~(x[1]||x[0]).indexOf("%")?_/100*w.height:_)),n||n!==!1&&o.smooth?(v=b-u,y=_-h,o.xOffset=c+(v*f+y*p)-v,o.yOffset=d+(v*m+y*g)-y):o.xOffset=o.yOffset=0,o.xOrigin=b,o.yOrigin=_,o.smooth=!!n,o.origin=r,o.originIsAbsolute=!!i,t.style[bl]="0px 0px",s&&(xh(s,o,"xOrigin",u,b),xh(s,o,"yOrigin",h,_),xh(s,o,"xOffset",c,o.xOffset),xh(s,o,"yOffset",d,o.yOffset)),t.setAttribute("data-svg-origin",b+" "+_)},n1=function(t,r){var i=t._gsap||new KG(t);if("x"in i&&!r&&!i.uncache)return i;var n=t.style,a=i.scaleX<0,s="px",o="deg",l=getComputedStyle(t),u=vu(t,bl)||"0",h,c,d,f,m,p,g,v,y,x,b,_,w,E,S,C,M,P,I,k,L,O,F,z,B,V,R,H,W,te,G,ie;return h=c=d=p=g=v=y=x=b=0,f=m=1,i.svg=!!(t.getCTM&&dW(t)),l.translate&&((l.translate!=="none"||l.scale!=="none"||l.rotate!=="none")&&(n[_i]=(l.translate!=="none"?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(l.rotate!=="none"?"rotate("+l.rotate+") ":"")+(l.scale!=="none"?"scale("+l.scale.split(" ").join(",")+") ":"")+(l[_i]!=="none"?l[_i]:"")),n.scale=n.rotate=n.translate="none"),E=UI(t,i.svg),i.svg&&(i.uncache?(B=t.getBBox(),u=i.xOrigin-B.x+"px "+(i.yOrigin-B.y)+"px",z=""):z=!r&&t.getAttribute("data-svg-origin"),HP(t,z||u,!!z||i.originIsAbsolute,i.smooth!==!1,E)),_=i.xOrigin||0,w=i.yOrigin||0,E!==i1&&(P=E[0],I=E[1],k=E[2],L=E[3],h=O=E[4],c=F=E[5],E.length===6?(f=Math.sqrt(P*P+I*I),m=Math.sqrt(L*L+k*k),p=P||I?yp(I,P)*Bd:0,y=k||L?yp(k,L)*Bd+p:0,y&&(m*=Math.abs(Math.cos(y*Xm))),i.svg&&(h-=_-(_*P+w*k),c-=w-(_*I+w*L))):(ie=E[6],te=E[7],R=E[8],H=E[9],W=E[10],G=E[11],h=E[12],c=E[13],d=E[14],S=yp(ie,W),g=S*Bd,S&&(C=Math.cos(-S),M=Math.sin(-S),z=O*C+R*M,B=F*C+H*M,V=ie*C+W*M,R=O*-M+R*C,H=F*-M+H*C,W=ie*-M+W*C,G=te*-M+G*C,O=z,F=B,ie=V),S=yp(-k,W),v=S*Bd,S&&(C=Math.cos(-S),M=Math.sin(-S),z=P*C-R*M,B=I*C-H*M,V=k*C-W*M,G=L*M+G*C,P=z,I=B,k=V),S=yp(I,P),p=S*Bd,S&&(C=Math.cos(S),M=Math.sin(S),z=P*C+I*M,B=O*C+F*M,I=I*C-P*M,F=F*C-O*M,P=z,O=B),g&&Math.abs(g)+Math.abs(p)>359.9&&(g=p=0,v=180-v),f=Hi(Math.sqrt(P*P+I*I+k*k)),m=Hi(Math.sqrt(F*F+ie*ie)),S=yp(O,F),y=Math.abs(S)>2e-4?S*Bd:0,b=G?1/(G<0?-G:G):0),i.svg&&(z=t.getAttribute("transform"),i.forceCSS=t.setAttribute("transform","")||!pW(vu(t,_i)),z&&t.setAttribute("transform",z))),Math.abs(y)>90&&Math.abs(y)<270&&(a?(f*=-1,y+=p<=0?180:-180,p+=p<=0?180:-180):(m*=-1,y+=y<=0?180:-180)),r=r||i.uncache,i.x=h-((i.xPercent=h&&(!r&&i.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-h)?-50:0)))?t.offsetWidth*i.xPercent/100:0)+s,i.y=c-((i.yPercent=c&&(!r&&i.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-c)?-50:0)))?t.offsetHeight*i.yPercent/100:0)+s,i.z=d+s,i.scaleX=Hi(f),i.scaleY=Hi(m),i.rotation=Hi(p)+o,i.rotationX=Hi(g)+o,i.rotationY=Hi(v)+o,i.skewX=y+o,i.skewY=x+o,i.transformPerspective=b+s,(i.zOrigin=parseFloat(u.split(" ")[2])||0)&&(n[bl]=j_(u)),i.xOffset=i.yOffset=0,i.force3D=eo.force3D,i.renderTransform=i.svg?Mue:cW?mW:Eue,i.uncache=0,i},j_=function(t){return(t=t.split(" "))[0]+" "+t[1]},lC=function(t,r,i){var n=ga(r);return Hi(parseFloat(r)+parseFloat(Jh(t,"x",i+"px",n)))+n},Eue=function(t,r){r.z="0px",r.rotationY=r.rotationX="0deg",r.force3D=0,mW(t,r)},wd="0deg",Vv="0px",_d=") ",mW=function(t,r){var i=r||this,n=i.xPercent,a=i.yPercent,s=i.x,o=i.y,l=i.z,u=i.rotation,h=i.rotationY,c=i.rotationX,d=i.skewX,f=i.skewY,m=i.scaleX,p=i.scaleY,g=i.transformPerspective,v=i.force3D,y=i.target,x=i.zOrigin,b="",_=v==="auto"&&t&&t!==1||v===!0;if(x&&(c!==wd||h!==wd)){var w=parseFloat(h)*Xm,E=Math.sin(w),S=Math.cos(w),C;w=parseFloat(c)*Xm,C=Math.cos(w),s=lC(y,s,E*C*-x),o=lC(y,o,-Math.sin(w)*-x),l=lC(y,l,S*C*-x+x)}g!==Vv&&(b+="perspective("+g+_d),(n||a)&&(b+="translate("+n+"%, "+a+"%) "),(_||s!==Vv||o!==Vv||l!==Vv)&&(b+=l!==Vv||_?"translate3d("+s+", "+o+", "+l+") ":"translate("+s+", "+o+_d),u!==wd&&(b+="rotate("+u+_d),h!==wd&&(b+="rotateY("+h+_d),c!==wd&&(b+="rotateX("+c+_d),(d!==wd||f!==wd)&&(b+="skew("+d+", "+f+_d),(m!==1||p!==1)&&(b+="scale("+m+", "+p+_d),y.style[_i]=b||"translate(0, 0)"},Mue=function(t,r){var i=r||this,n=i.xPercent,a=i.yPercent,s=i.x,o=i.y,l=i.rotation,u=i.skewX,h=i.skewY,c=i.scaleX,d=i.scaleY,f=i.target,m=i.xOrigin,p=i.yOrigin,g=i.xOffset,v=i.yOffset,y=i.forceCSS,x=parseFloat(s),b=parseFloat(o),_,w,E,S,C;l=parseFloat(l),u=parseFloat(u),h=parseFloat(h),h&&(h=parseFloat(h),u+=h,l+=h),l||u?(l*=Xm,u*=Xm,_=Math.cos(l)*c,w=Math.sin(l)*c,E=Math.sin(l-u)*-d,S=Math.cos(l-u)*d,u&&(h*=Xm,C=Math.tan(u-h),C=Math.sqrt(1+C*C),E*=C,S*=C,h&&(C=Math.tan(h),C=Math.sqrt(1+C*C),_*=C,w*=C)),_=Hi(_),w=Hi(w),E=Hi(E),S=Hi(S)):(_=c,S=d,w=E=0),(x&&!~(s+"").indexOf("px")||b&&!~(o+"").indexOf("px"))&&(x=Jh(f,"x",s,"px"),b=Jh(f,"y",o,"px")),(m||p||g||v)&&(x=Hi(x+m-(m*_+p*E)+g),b=Hi(b+p-(m*w+p*S)+v)),(n||a)&&(C=f.getBBox(),x=Hi(x+n/100*C.width),b=Hi(b+a/100*C.height)),C="matrix("+_+","+w+","+E+","+S+","+x+","+b+")",f.setAttribute("transform",C),y&&(f.style[_i]=C)},Cue=function(t,r,i,n,a){var s=360,o=$n(a),l=parseFloat(a)*(o&&~a.indexOf("rad")?Bd:1),u=l-n,h=n+u+"deg",c,d;return o&&(c=a.split("_")[1],c==="short"&&(u%=s,u!==u%(s/2)&&(u+=u<0?s:-s)),c==="cw"&&u<0?u=(u+s*a4)%s-~~(u/s)*s:c==="ccw"&&u>0&&(u=(u-s*a4)%s-~~(u/s)*s)),t._pt=d=new Ms(t._pt,r,i,n,u,uue),d.e=h,d.u="deg",t._props.push(i),d},h4=function(t,r){for(var i in r)t[i]=r[i];return t},Aue=function(t,r,i){var n=h4({},i._gsap),a="perspective,force3D,transformOrigin,svgOrigin",s=i.style,o,l,u,h,c,d,f,m;n.svg?(u=i.getAttribute("transform"),i.setAttribute("transform",""),s[_i]=r,o=n1(i,1),r1(i,_i),i.setAttribute("transform",u)):(u=getComputedStyle(i)[_i],s[_i]=r,o=n1(i,1),s[_i]=u);for(l in Cc)u=n[l],h=o[l],u!==h&&a.indexOf(l)<0&&(f=ga(u),m=ga(h),c=f!==m?Jh(i,l,u,m):parseFloat(u),d=parseFloat(h),t._pt=new Ms(t._pt,o,l,c,d-c,UP),t._pt.u=m||0,t._props.push(l));h4(o,n)};Es("padding,margin,Width,Radius",function(e,t){var r="Top",i="Right",n="Bottom",a="Left",s=(t<3?[r,i,n,a]:[r+a,r+i,n+i,n+a]).map(function(o){return t<2?e+o:"border"+o+e});U_[t>1?"border"+e:e]=function(o,l,u,h,c){var d,f;if(arguments.length<4)return d=s.map(function(m){return rc(o,m,u)}),f=d.join(" "),f.split(d[0]).length===5?d[0]:f;d=(h+"").split(" "),f={},s.forEach(function(m,p){return f[m]=d[p]=d[p]||d[(p-1)/2|0]}),o.init(l,f,c)}});var gW={name:"css",register:VP,targetTest:function(t){return t.style&&t.nodeType},init:function(t,r,i,n,a){var s=this._props,o=t.style,l=i.vars.startAt,u,h,c,d,f,m,p,g,v,y,x,b,_,w,E,S;NI||VP(),this.styles=this.styles||uW(t),S=this.styles.props,this.tween=i;for(p in r)if(p!=="autoRound"&&(h=r[p],!(Us[p]&&ZG(p,r,i,n,t,a)))){if(f=typeof h,m=U_[p],f==="function"&&(h=h.call(i,n,t,a),f=typeof h),f==="string"&&~h.indexOf("random(")&&(h=Jy(h)),m)m(this,t,p,h,i)&&(E=1);else if(p.substr(0,2)==="--")u=(getComputedStyle(t).getPropertyValue(p)+"").trim(),h+="",jh.lastIndex=0,jh.test(u)||(g=ga(u),v=ga(h)),v?g!==v&&(u=Jh(t,p,u,v)+v):g&&(h+=g),this.add(o,"setProperty",u,h,n,a,0,0,p),s.push(p),S.push(p,0,o[p]);else if(f!=="undefined"){if(l&&p in l?(u=typeof l[p]=="function"?l[p].call(i,n,t,a):l[p],$n(u)&&~u.indexOf("random(")&&(u=Jy(u)),ga(u+"")||(u+=eo.units[p]||ga(rc(t,p))||""),(u+"").charAt(1)==="="&&(u=rc(t,p))):u=rc(t,p),d=parseFloat(u),y=f==="string"&&h.charAt(1)==="="&&h.substr(0,2),y&&(h=h.substr(2)),c=parseFloat(h),p in cu&&(p==="autoAlpha"&&(d===1&&rc(t,"visibility")==="hidden"&&c&&(d=0),S.push("visibility",0,o.visibility),xh(this,o,"visibility",d?"inherit":"hidden",c?"inherit":"hidden",!c)),p!=="scale"&&p!=="transform"&&(p=cu[p],~p.indexOf(",")&&(p=p.split(",")[0]))),x=p in Cc,x){if(this.styles.save(p),b||(_=t._gsap,_.renderTransform&&!r.parseTransform||n1(t,r.parseTransform),w=r.smoothOrigin!==!1&&_.smooth,b=this._pt=new Ms(this._pt,o,_i,0,1,_.renderTransform,_,0,-1),b.dep=1),p==="scale")this._pt=new Ms(this._pt,_,"scaleY",_.scaleY,(y?Ym(_.scaleY,y+c):c)-_.scaleY||0,UP),this._pt.u=0,s.push("scaleY",p),p+="X";else if(p==="transformOrigin"){S.push(bl,0,o[bl]),h=_ue(h),_.svg?HP(t,h,0,w,0,this):(v=parseFloat(h.split(" ")[2])||0,v!==_.zOrigin&&xh(this,_,"zOrigin",_.zOrigin,v),xh(this,o,p,j_(u),j_(h)));continue}else if(p==="svgOrigin"){HP(t,h,1,w,0,this);continue}else if(p in fW){Cue(this,_,p,d,y?Ym(d,y+h):h);continue}else if(p==="smoothOrigin"){xh(this,_,"smooth",_.smooth,h);continue}else if(p==="force3D"){_[p]=h;continue}else if(p==="transform"){Aue(this,h,t);continue}}else p in o||(p=Dg(p)||p);if(x||(c||c===0)&&(d||d===0)&&!lue.test(h)&&p in o)g=(u+"").substr((d+"").length),c||(c=0),v=ga(h)||(p in eo.units?eo.units[p]:g),g!==v&&(d=Jh(t,p,u,v)),this._pt=new Ms(this._pt,x?_:o,p,d,(y?Ym(d,y+c):c)-d,!x&&(v==="px"||p==="zIndex")&&r.autoRound!==!1?hue:UP),this._pt.u=v||0,g!==v&&v!=="%"&&(this._pt.b=u,this._pt.r=cue);else if(p in o)wue.call(this,t,p,u,y?y+h:h);else if(p in t)this.add(t,p,u||t[p],y?y+h:h,n,a);else if(p!=="parseTransform"){TI(p,h);continue}x||(p in o?S.push(p,0,o[p]):S.push(p,1,u||t[p])),s.push(p)}}E&&nW(this)},render:function(t,r){if(r.tween._time||!zI())for(var i=r._pt;i;)i.r(t,i.d),i=i._next;else r.styles.revert()},get:rc,aliases:cu,getSetter:function(t,r,i){var n=cu[r];return n&&n.indexOf(",")<0&&(r=n),r in Cc&&r!==bl&&(t._gsap.x||rc(t,"x"))?i&&n4===i?r==="scale"?mue:pue:(n4=i||{})&&(r==="scale"?gue:vue):t.style&&!MI(t.style[r])?due:~r.indexOf("-")?fue:LI(t,r)},core:{_removeProperty:r1,_getMatrix:UI}};Ps.utils.checkPrefix=Dg;Ps.core.getStyleSaver=uW;(function(e,t,r,i){var n=Es(e+","+t+","+r,function(a){Cc[a]=1});Es(t,function(a){eo.units[a]="deg",fW[a]=1}),cu[n[13]]=e+","+t,Es(i,function(a){var s=a.split(":");cu[s[1]]=n[s[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");Es("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(e){eo.units[e]="px"});Ps.registerPlugin(gW);var U1=Ps.registerPlugin(gW)||Ps;U1.core.Tween;function V_({children:e,type:t="button",onClick:r}){return Q("button",{style:{padding:".8rem",borderRadius:"5px",border:"none",background:"linear-gradient(45deg, hotpink , chartreuse , #682ae9 )",fontFamily:"Montserrat",cursor:"pointer",color:"white",textShadow:"0px 0px 2px #682ae9 ",boxShadow:"0px 0px 2px #682ae9 "},onClick:r,children:e})}const Tue=dG(),Pue=mae({themeId:F2,defaultTheme:Tue,defaultClassName:"MuiBox-root",generateClassName:eI.generate}),Due=Pue;function Oue(e){return Zi("MuiLinearProgress",e)}const Iue=fn("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]),d4=Iue,Rue=["className","color","value","valueBuffer","variant"];let sv=e=>e,f4,p4,m4,g4,v4,y4;const GP=4,kue=ud(f4||(f4=sv`
  0% {
    left: -35%;
    right: 100%;
  }

  60% {
    left: 100%;
    right: -90%;
  }

  100% {
    left: 100%;
    right: -90%;
  }
`)),Lue=ud(p4||(p4=sv`
  0% {
    left: -200%;
    right: 100%;
  }

  60% {
    left: 107%;
    right: -8%;
  }

  100% {
    left: 107%;
    right: -8%;
  }
`)),Bue=ud(m4||(m4=sv`
  0% {
    opacity: 1;
    background-position: 0 -23px;
  }

  60% {
    opacity: 0;
    background-position: 0 -23px;
  }

  100% {
    opacity: 1;
    background-position: -200px -23px;
  }
`)),Nue=e=>{const{classes:t,variant:r,color:i}=e,n={root:["root",`color${zt(i)}`,r],dashed:["dashed",`dashedColor${zt(i)}`],bar1:["bar",`barColor${zt(i)}`,(r==="indeterminate"||r==="query")&&"bar1Indeterminate",r==="determinate"&&"bar1Determinate",r==="buffer"&&"bar1Buffer"],bar2:["bar",r!=="buffer"&&`barColor${zt(i)}`,r==="buffer"&&`color${zt(i)}`,(r==="indeterminate"||r==="query")&&"bar2Indeterminate",r==="buffer"&&"bar2Buffer"]};return dn(n,Oue,t)},jI=(e,t)=>t==="inherit"?"currentColor":e.vars?e.vars.palette.LinearProgress[`${t}Bg`]:e.palette.mode==="light"?gI(e.palette[t].main,.62):mI(e.palette[t].main,.5),zue=nr("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`color${zt(r.color)}`],t[r.variant]]}})(({ownerState:e,theme:t})=>Ee({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},backgroundColor:jI(t,e.color)},e.color==="inherit"&&e.variant!=="buffer"&&{backgroundColor:"none","&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}},e.variant==="buffer"&&{backgroundColor:"transparent"},e.variant==="query"&&{transform:"rotate(180deg)"})),Fue=nr("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.dashed,t[`dashedColor${zt(r.color)}`]]}})(({ownerState:e,theme:t})=>{const r=jI(t,e.color);return Ee({position:"absolute",marginTop:0,height:"100%",width:"100%"},e.color==="inherit"&&{opacity:.3},{backgroundImage:`radial-gradient(${r} 0%, ${r} 16%, transparent 42%)`,backgroundSize:"10px 10px",backgroundPosition:"0 -23px"})},av(g4||(g4=sv`
    animation: ${0} 3s infinite linear;
  `),Bue)),Uue=nr("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.bar,t[`barColor${zt(r.color)}`],(r.variant==="indeterminate"||r.variant==="query")&&t.bar1Indeterminate,r.variant==="determinate"&&t.bar1Determinate,r.variant==="buffer"&&t.bar1Buffer]}})(({ownerState:e,theme:t})=>Ee({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",backgroundColor:e.color==="inherit"?"currentColor":(t.vars||t).palette[e.color].main},e.variant==="determinate"&&{transition:`transform .${GP}s linear`},e.variant==="buffer"&&{zIndex:1,transition:`transform .${GP}s linear`}),({ownerState:e})=>(e.variant==="indeterminate"||e.variant==="query")&&av(v4||(v4=sv`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
    `),kue)),jue=nr("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.bar,t[`barColor${zt(r.color)}`],(r.variant==="indeterminate"||r.variant==="query")&&t.bar2Indeterminate,r.variant==="buffer"&&t.bar2Buffer]}})(({ownerState:e,theme:t})=>Ee({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left"},e.variant!=="buffer"&&{backgroundColor:e.color==="inherit"?"currentColor":(t.vars||t).palette[e.color].main},e.color==="inherit"&&{opacity:.3},e.variant==="buffer"&&{backgroundColor:jI(t,e.color),transition:`transform .${GP}s linear`}),({ownerState:e})=>(e.variant==="indeterminate"||e.variant==="query")&&av(y4||(y4=sv`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;
    `),Lue)),Vue=X.forwardRef(function(t,r){const i=pn({props:t,name:"MuiLinearProgress"}),{className:n,color:a="primary",value:s,valueBuffer:o,variant:l="indeterminate"}=i,u=Er(i,Rue),h=Ee({},i,{color:a,variant:l}),c=Nue(h),d=yI(),f={},m={bar1:{},bar2:{}};if((l==="determinate"||l==="buffer")&&s!==void 0){f["aria-valuenow"]=Math.round(s),f["aria-valuemin"]=0,f["aria-valuemax"]=100;let p=s-100;d.direction==="rtl"&&(p=-p),m.bar1.transform=`translateX(${p}%)`}if(l==="buffer"&&o!==void 0){let p=(o||0)-100;d.direction==="rtl"&&(p=-p),m.bar2.transform=`translateX(${p}%)`}return ct(zue,Ee({className:fr(c.root,n),ownerState:h,role:"progressbar"},f,{ref:r},u,{children:[l==="buffer"?Q(Fue,{className:c.dashed,ownerState:h}):null,Q(Uue,{className:c.bar1,ownerState:h,style:m.bar1}),l==="determinate"?null:Q(jue,{className:c.bar2,ownerState:h,style:m.bar2})]}))}),Hue=Vue,Gue=nr(Hue)(({theme:e})=>({height:20,borderRadius:50,[`&.${d4.colorPrimary}`]:{backgroundColor:e.palette.grey[e.palette.mode==="light"?300:800]},[`& .${d4.bar}`]:{borderRadius:50,background:"linear-gradient(45deg, hotpink, chartreuse, #682ae9);"}}));function Wue({value:e}){return Q("div",{style:{width:"80%",margin:"0 auto"},children:Q(Due,{sx:{flexGrow:1},children:Q(Gue,{variant:"determinate",value:e})})})}function $ue({para:e,firstBlock:t,secondBlock:r,thirdBlock:i,para1:n}){const{t:a}=z1(),[s,o]=X.useState(0);X.useEffect(()=>{const h=new Va({repeat:-1});h.to(" .span",3,{y:"-=10",x:"+=15",rotation:"-=3",ease:qo.easeInOut}).to(".span",4,{y:"+=5",x:"-=20",rotation:"-=5",ease:qo.easeInOut}).to(".span",3,{y:"-=10",rotation:"+=3",ease:qo.easeInOut}).to(".span",3,{y:"+=15",rotation:"+=2",ease:qo.easeInOut}).to(".span",3,{y:"-=10",ease:qo.easeInOut}).to(".span",3,{y:"+=15",ease:qo.easeInOut}).to(".span",3,{y:"-=5",ease:qo.easeInOut}).to(".span",3,{y:"+=17",ease:qo.easeInOut}).to(".span",2,{y:"-=3",ease:qo.easeInOut}).to(".span",2,{y:"+=16",ease:qo.easeInOut}),Gi.to(h,5,{ease:qo.easeInOut})},[]);function l(h){const c=h.target.alt;c=="html"?o(95):c=="css"?o(90):c=="js"?o(85):c=="react"?o(60):c=="git"?o(80):c=="tailwindcss"?o(90):c=="bootstrap"?o(70):c=="spline"?o(40):c=="java"?o(66):c=="github"&&o(85)}function u(){o(0)}return Q("div",{className:"container",children:ct("div",{className:" skill-wrapper",children:[ct("div",{className:"skills",children:[ct("div",{className:"first",ref:t,children:[Q("span",{className:"hotpink span",children:Q("img",{src:ile,alt:"html",onMouseOver:l,onMouseOut:u})}),Q("span",{className:"span",children:Q("img",{src:nle,alt:"css",onMouseOver:l,onMouseOut:u})}),Q("span",{className:"purple span",children:Q("img",{src:ale,alt:"js",onMouseOver:l,onMouseOut:u})})]}),ct("div",{className:"second",ref:r,children:[Q("span",{className:"span",children:Q("img",{src:sle,alt:"react",onMouseOver:l,onMouseOut:u})}),Q("span",{className:"purple span",children:Q("img",{src:ole,alt:"git",onMouseOver:l,onMouseOut:u})}),Q("span",{className:"span",children:Q("img",{src:lle,alt:"tailwindcss",className:"tailwind",onMouseOver:l,onMouseOut:u})}),Q("span",{className:"hotpink span",children:Q("img",{src:ule,alt:"bootstrap",style:{width:"2.5rem",height:"2.5rem"},onMouseOver:l,onMouseOut:u})})]}),ct("div",{className:"third",ref:i,children:[Q("span",{className:"hotpink span",children:Q("img",{src:cle,alt:"spline",onMouseOver:l,onMouseOut:u})}),Q("span",{className:"span",children:Q("img",{src:hle,alt:"java",onMouseOver:l,onMouseOut:u})}),Q("span",{className:"purple span",children:Q("img",{src:dle,alt:"github",onMouseOver:l,onMouseOut:u})})]})]}),ct("div",{style:{marginLeft:"1rem",marginRight:"1rem"},children:[Q("div",{ref:e,children:Q("small",{style:{textAlign:"center",display:"block",marginBottom:"0.5rem"},children:a("ABOUT_PAGE.SKILL.SUB_1")})}),Q(Wue,{value:s}),Q("br",{}),Q("div",{ref:n,style:{textAlign:"center"},children:Q("small",{children:a("ABOUT_PAGE.SKILL.SUB_2")})})]}),Q("br",{}),Q("a",{href:fle,download:!0,children:Q(V_,{children:a("ABOUT_PAGE.SKILL.BUTTON")})}),Q("br",{}),Q("br",{})]})})}function x4(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Yue(e,t,r){return t&&x4(e.prototype,t),r&&x4(e,r),e}/*!
 * Observer 3.12.2
 * https://greensock.com
 *
 * @license Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var ia,WP,Ws,bh,wh,Qm,vW,Nd,oy,yW,uc,al,xW,bW=function(){return ia||typeof window<"u"&&(ia=window.gsap)&&ia.registerPlugin&&ia},wW=1,Tm=[],dr=[],yu=[],ly=Date.now,$P=function(t,r){return r},que=function(){var t=oy.core,r=t.bridge||{},i=t._scrollers,n=t._proxies;i.push.apply(i,dr),n.push.apply(n,yu),dr=i,yu=n,$P=function(s,o){return r[s](o)}},Vh=function(t,r){return~yu.indexOf(t)&&yu[yu.indexOf(t)+1][r]},uy=function(t){return!!~yW.indexOf(t)},Ra=function(t,r,i,n,a){return t.addEventListener(r,i,{passive:!n,capture:!!a})},Ta=function(t,r,i,n){return t.removeEventListener(r,i,!!n)},Lx="scrollLeft",Bx="scrollTop",YP=function(){return uc&&uc.isPressed||dr.cache++},H_=function(t,r){var i=function n(a){if(a||a===0){wW&&(Ws.history.scrollRestoration="manual");var s=uc&&uc.isPressed;a=n.v=Math.round(a)||(uc&&uc.iOS?1:0),t(a),n.cacheID=dr.cache,s&&$P("ss",a)}else(r||dr.cache!==n.cacheID||$P("ref"))&&(n.cacheID=dr.cache,n.v=t());return n.v+n.offset};return i.offset=0,t&&i},Ha={s:Lx,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:H_(function(e){return arguments.length?Ws.scrollTo(e,_n.sc()):Ws.pageXOffset||bh[Lx]||wh[Lx]||Qm[Lx]||0})},_n={s:Bx,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:Ha,sc:H_(function(e){return arguments.length?Ws.scrollTo(Ha.sc(),e):Ws.pageYOffset||bh[Bx]||wh[Bx]||Qm[Bx]||0})},ls=function(t,r){return(r&&r._ctx&&r._ctx.selector||ia.utils.toArray)(t)[0]||(typeof t=="string"&&ia.config().nullTargetWarn!==!1?console.warn("Element not found:",t):null)},ed=function(t,r){var i=r.s,n=r.sc;uy(t)&&(t=bh.scrollingElement||wh);var a=dr.indexOf(t),s=n===_n.sc?1:2;!~a&&(a=dr.push(t)-1),dr[a+s]||Ra(t,"scroll",YP);var o=dr[a+s],l=o||(dr[a+s]=H_(Vh(t,i),!0)||(uy(t)?n:H_(function(u){return arguments.length?t[i]=u:t[i]})));return l.target=t,o||(l.smooth=ia.getProperty(t,"scrollBehavior")==="smooth"),l},qP=function(t,r,i){var n=t,a=t,s=ly(),o=s,l=r||50,u=Math.max(500,l*3),h=function(m,p){var g=ly();p||g-s>l?(a=n,n=m,o=s,s=g):i?n+=m:n=a+(m-a)/(g-o)*(s-o)},c=function(){a=n=i?0:n,o=s=0},d=function(m){var p=o,g=a,v=ly();return(m||m===0)&&m!==n&&h(m),s===o||v-o>u?0:(n+(i?g:-g))/((i?v:s)-p)*1e3};return{update:h,reset:c,getVelocity:d}},Hv=function(t,r){return r&&!t._gsapAllow&&t.preventDefault(),t.changedTouches?t.changedTouches[0]:t},b4=function(t){var r=Math.max.apply(Math,t),i=Math.min.apply(Math,t);return Math.abs(r)>=Math.abs(i)?r:i},_W=function(){oy=ia.core.globals().ScrollTrigger,oy&&oy.core&&que()},SW=function(t){return ia=t||bW(),ia&&typeof document<"u"&&document.body&&(Ws=window,bh=document,wh=bh.documentElement,Qm=bh.body,yW=[Ws,bh,wh,Qm],ia.utils.clamp,xW=ia.core.context||function(){},Nd="onpointerenter"in Qm?"pointer":"mouse",vW=cn.isTouch=Ws.matchMedia&&Ws.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in Ws||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,al=cn.eventTypes=("ontouchstart"in wh?"touchstart,touchmove,touchcancel,touchend":"onpointerdown"in wh?"pointerdown,pointermove,pointercancel,pointerup":"mousedown,mousemove,mouseup,mouseup").split(","),setTimeout(function(){return wW=0},500),_W(),WP=1),WP};Ha.op=_n;dr.cache=0;var cn=function(){function e(r){this.init(r)}var t=e.prototype;return t.init=function(i){WP||SW(ia)||console.warn("Please gsap.registerPlugin(Observer)"),oy||_W();var n=i.tolerance,a=i.dragMinimum,s=i.type,o=i.target,l=i.lineHeight,u=i.debounce,h=i.preventDefault,c=i.onStop,d=i.onStopDelay,f=i.ignore,m=i.wheelSpeed,p=i.event,g=i.onDragStart,v=i.onDragEnd,y=i.onDrag,x=i.onPress,b=i.onRelease,_=i.onRight,w=i.onLeft,E=i.onUp,S=i.onDown,C=i.onChangeX,M=i.onChangeY,P=i.onChange,I=i.onToggleX,k=i.onToggleY,L=i.onHover,O=i.onHoverEnd,F=i.onMove,z=i.ignoreCheck,B=i.isNormalizer,V=i.onGestureStart,R=i.onGestureEnd,H=i.onWheel,W=i.onEnable,te=i.onDisable,G=i.onClick,ie=i.scrollSpeed,q=i.capture,le=i.allowClicks,ae=i.lockAxis,Z=i.onLockAxis;this.target=o=ls(o)||wh,this.vars=i,f&&(f=ia.utils.toArray(f)),n=n||1e-9,a=a||0,m=m||1,ie=ie||1,s=s||"wheel,touch,pointer",u=u!==!1,l||(l=parseFloat(Ws.getComputedStyle(Qm).lineHeight)||22);var he,ge,xe,ye,Ne,Re,qe,se=this,ke=0,Be=0,at=ed(o,Ha),Ge=ed(o,_n),$=at(),U=Ge(),fe=~s.indexOf("touch")&&!~s.indexOf("pointer")&&al[0]==="pointerdown",Te=uy(o),Ae=o.ownerDocument||bh,Fe=[0,0,0],et=[0,0,0],Pe=0,we=function(){return Pe=ly()},Ze=function(Je,qt){return(se.event=Je)&&f&&~f.indexOf(Je.target)||qt&&fe&&Je.pointerType!=="touch"||z&&z(Je,qt)},Ke=function(){se._vx.reset(),se._vy.reset(),ge.pause(),c&&c(se)},st=function(){var Je=se.deltaX=b4(Fe),qt=se.deltaY=b4(et),ur=Math.abs(Je)>=n,ut=Math.abs(qt)>=n;P&&(ur||ut)&&P(se,Je,qt,Fe,et),ur&&(_&&se.deltaX>0&&_(se),w&&se.deltaX<0&&w(se),C&&C(se),I&&se.deltaX<0!=ke<0&&I(se),ke=se.deltaX,Fe[0]=Fe[1]=Fe[2]=0),ut&&(S&&se.deltaY>0&&S(se),E&&se.deltaY<0&&E(se),M&&M(se),k&&se.deltaY<0!=Be<0&&k(se),Be=se.deltaY,et[0]=et[1]=et[2]=0),(ye||xe)&&(F&&F(se),xe&&(y(se),xe=!1),ye=!1),Re&&!(Re=!1)&&Z&&Z(se),Ne&&(H(se),Ne=!1),he=0},xt=function(Je,qt,ur){Fe[ur]+=Je,et[ur]+=qt,se._vx.update(Je),se._vy.update(qt),u?he||(he=requestAnimationFrame(st)):st()},vt=function(Je,qt){ae&&!qe&&(se.axis=qe=Math.abs(Je)>Math.abs(qt)?"x":"y",Re=!0),qe!=="y"&&(Fe[2]+=Je,se._vx.update(Je,!0)),qe!=="x"&&(et[2]+=qt,se._vy.update(qt,!0)),u?he||(he=requestAnimationFrame(st)):st()},$t=function(Je){if(!Ze(Je,1)){Je=Hv(Je,h);var qt=Je.clientX,ur=Je.clientY,ut=qt-se.x,Jt=ur-se.y,Dt=se.isDragging;se.x=qt,se.y=ur,(Dt||Math.abs(se.startX-qt)>=a||Math.abs(se.startY-ur)>=a)&&(y&&(xe=!0),Dt||(se.isDragging=!0),vt(ut,Jt),Dt||g&&g(se))}},ar=se.onPress=function(Pt){Ze(Pt,1)||Pt&&Pt.button||(se.axis=qe=null,ge.pause(),se.isPressed=!0,Pt=Hv(Pt),ke=Be=0,se.startX=se.x=Pt.clientX,se.startY=se.y=Pt.clientY,se._vx.reset(),se._vy.reset(),Ra(B?o:Ae,al[1],$t,h,!0),se.deltaX=se.deltaY=0,x&&x(se))},Or=se.onRelease=function(Pt){if(!Ze(Pt,1)){Ta(B?o:Ae,al[1],$t,!0);var Je=!isNaN(se.y-se.startY),qt=se.isDragging&&(Math.abs(se.x-se.startX)>3||Math.abs(se.y-se.startY)>3),ur=Hv(Pt);!qt&&Je&&(se._vx.reset(),se._vy.reset(),h&&le&&ia.delayedCall(.08,function(){if(ly()-Pe>300&&!Pt.defaultPrevented){if(Pt.target.click)Pt.target.click();else if(Ae.createEvent){var ut=Ae.createEvent("MouseEvents");ut.initMouseEvent("click",!0,!0,Ws,1,ur.screenX,ur.screenY,ur.clientX,ur.clientY,!1,!1,!1,!1,0,null),Pt.target.dispatchEvent(ut)}}})),se.isDragging=se.isGesturing=se.isPressed=!1,c&&!B&&ge.restart(!0),v&&qt&&v(se),b&&b(se,qt)}},J=function(Je){return Je.touches&&Je.touches.length>1&&(se.isGesturing=!0)&&V(Je,se.isDragging)},Me=function(){return(se.isGesturing=!1)||R(se)},De=function(Je){if(!Ze(Je)){var qt=at(),ur=Ge();xt((qt-$)*ie,(ur-U)*ie,1),$=qt,U=ur,c&&ge.restart(!0)}},We=function(Je){if(!Ze(Je)){Je=Hv(Je,h),H&&(Ne=!0);var qt=(Je.deltaMode===1?l:Je.deltaMode===2?Ws.innerHeight:1)*m;xt(Je.deltaX*qt,Je.deltaY*qt,0),c&&!B&&ge.restart(!0)}},gt=function(Je){if(!Ze(Je)){var qt=Je.clientX,ur=Je.clientY,ut=qt-se.x,Jt=ur-se.y;se.x=qt,se.y=ur,ye=!0,(ut||Jt)&&vt(ut,Jt)}},jt=function(Je){se.event=Je,L(se)},ri=function(Je){se.event=Je,O(se)},Zr=function(Je){return Ze(Je)||Hv(Je,h)&&G(se)};ge=se._dc=ia.delayedCall(d||.25,Ke).pause(),se.deltaX=se.deltaY=0,se._vx=qP(0,50,!0),se._vy=qP(0,50,!0),se.scrollX=at,se.scrollY=Ge,se.isDragging=se.isGesturing=se.isPressed=!1,xW(this),se.enable=function(Pt){return se.isEnabled||(Ra(Te?Ae:o,"scroll",YP),s.indexOf("scroll")>=0&&Ra(Te?Ae:o,"scroll",De,h,q),s.indexOf("wheel")>=0&&Ra(o,"wheel",We,h,q),(s.indexOf("touch")>=0&&vW||s.indexOf("pointer")>=0)&&(Ra(o,al[0],ar,h,q),Ra(Ae,al[2],Or),Ra(Ae,al[3],Or),le&&Ra(o,"click",we,!1,!0),G&&Ra(o,"click",Zr),V&&Ra(Ae,"gesturestart",J),R&&Ra(Ae,"gestureend",Me),L&&Ra(o,Nd+"enter",jt),O&&Ra(o,Nd+"leave",ri),F&&Ra(o,Nd+"move",gt)),se.isEnabled=!0,Pt&&Pt.type&&ar(Pt),W&&W(se)),se},se.disable=function(){se.isEnabled&&(Tm.filter(function(Pt){return Pt!==se&&uy(Pt.target)}).length||Ta(Te?Ae:o,"scroll",YP),se.isPressed&&(se._vx.reset(),se._vy.reset(),Ta(B?o:Ae,al[1],$t,!0)),Ta(Te?Ae:o,"scroll",De,q),Ta(o,"wheel",We,q),Ta(o,al[0],ar,q),Ta(Ae,al[2],Or),Ta(Ae,al[3],Or),Ta(o,"click",we,!0),Ta(o,"click",Zr),Ta(Ae,"gesturestart",J),Ta(Ae,"gestureend",Me),Ta(o,Nd+"enter",jt),Ta(o,Nd+"leave",ri),Ta(o,Nd+"move",gt),se.isEnabled=se.isPressed=se.isDragging=!1,te&&te(se))},se.kill=se.revert=function(){se.disable();var Pt=Tm.indexOf(se);Pt>=0&&Tm.splice(Pt,1),uc===se&&(uc=0)},Tm.push(se),B&&uy(o)&&(uc=se),se.enable(p)},Yue(e,[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}]),e}();cn.version="3.12.2";cn.create=function(e){return new cn(e)};cn.register=SW;cn.getAll=function(){return Tm.slice()};cn.getById=function(e){return Tm.filter(function(t){return t.vars.id===e})[0]};bW()&&ia.registerPlugin(cn);/*!
 * ScrollTrigger 3.12.2
 * https://greensock.com
 *
 * @license Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var mt,nm,_r,xi,ul,mi,EW,G_,W_,Pm,Rw,Nx,fa,fE,XP,Na,w4,_4,am,MW,uC,CW,Bs,AW,TW,PW,ih,QP,VI,Km,HI,cC,zx=1,Fa=Date.now,hC=Fa(),Ro=0,B0=0,S4=function(t,r,i){var n=Fs(t)&&(t.substr(0,6)==="clamp("||t.indexOf("max")>-1);return i["_"+r+"Clamp"]=n,n?t.substr(6,t.length-7):t},E4=function(t,r){return r&&(!Fs(t)||t.substr(0,6)!=="clamp(")?"clamp("+t+")":t},Xue=function e(){return B0&&requestAnimationFrame(e)},M4=function(){return fE=1},C4=function(){return fE=0},$l=function(t){return t},N0=function(t){return Math.round(t*1e5)/1e5||0},DW=function(){return typeof window<"u"},OW=function(){return mt||DW()&&(mt=window.gsap)&&mt.registerPlugin&&mt},kf=function(t){return!!~EW.indexOf(t)},IW=function(t){return(t==="Height"?HI:_r["inner"+t])||ul["client"+t]||mi["client"+t]},RW=function(t){return Vh(t,"getBoundingClientRect")||(kf(t)?function(){return Fw.width=_r.innerWidth,Fw.height=HI,Fw}:function(){return ac(t)})},Que=function(t,r,i){var n=i.d,a=i.d2,s=i.a;return(s=Vh(t,"getBoundingClientRect"))?function(){return s()[n]}:function(){return(r?IW(a):t["client"+a])||0}},Kue=function(t,r){return!r||~yu.indexOf(t)?RW(t):function(){return Fw}},cc=function(t,r){var i=r.s,n=r.d2,a=r.d,s=r.a;return Math.max(0,(i="scroll"+n)&&(s=Vh(t,i))?s()-RW(t)()[a]:kf(t)?(ul[i]||mi[i])-IW(n):t[i]-t["offset"+n])},Fx=function(t,r){for(var i=0;i<am.length;i+=3)(!r||~r.indexOf(am[i+1]))&&t(am[i],am[i+1],am[i+2])},Fs=function(t){return typeof t=="string"},Ga=function(t){return typeof t=="function"},kw=function(t){return typeof t=="number"},zd=function(t){return typeof t=="object"},Gv=function(t,r,i){return t&&t.progress(r?0:1)&&i&&t.pause()},dC=function(t,r){if(t.enabled){var i=r(t);i&&i.totalTime&&(t.callbackAnimation=i)}},xp=Math.abs,kW="left",LW="top",GI="right",WI="bottom",gf="width",vf="height",cy="Right",hy="Left",dy="Top",fy="Bottom",an="padding",So="margin",Og="Width",$I="Height",Zn="px",Eo=function(t){return _r.getComputedStyle(t)},Zue=function(t){var r=Eo(t).position;t.style.position=r==="absolute"||r==="fixed"?r:"relative"},A4=function(t,r){for(var i in r)i in t||(t[i]=r[i]);return t},ac=function(t,r){var i=r&&Eo(t)[XP]!=="matrix(1, 0, 0, 1, 0, 0)"&&mt.to(t,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),n=t.getBoundingClientRect();return i&&i.progress(0).kill(),n},KP=function(t,r){var i=r.d2;return t["offset"+i]||t["client"+i]||0},BW=function(t){var r=[],i=t.labels,n=t.duration(),a;for(a in i)r.push(i[a]/n);return r},Jue=function(t){return function(r){return mt.utils.snap(BW(t),r)}},YI=function(t){var r=mt.utils.snap(t),i=Array.isArray(t)&&t.slice(0).sort(function(n,a){return n-a});return i?function(n,a,s){s===void 0&&(s=.001);var o;if(!a)return r(n);if(a>0){for(n-=s,o=0;o<i.length;o++)if(i[o]>=n)return i[o];return i[o-1]}else for(o=i.length,n+=s;o--;)if(i[o]<=n)return i[o];return i[0]}:function(n,a,s){s===void 0&&(s=.001);var o=r(n);return!a||Math.abs(o-n)<s||o-n<0==a<0?o:r(a<0?n-t:n+t)}},ece=function(t){return function(r,i){return YI(BW(t))(r,i.direction)}},Ux=function(t,r,i,n){return i.split(",").forEach(function(a){return t(r,a,n)})},zn=function(t,r,i,n,a){return t.addEventListener(r,i,{passive:!n,capture:!!a})},Bn=function(t,r,i,n){return t.removeEventListener(r,i,!!n)},jx=function(t,r,i){i=i&&i.wheelHandler,i&&(t(r,"wheel",i),t(r,"touchmove",i))},T4={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},Vx={toggleActions:"play",anticipatePin:0},$_={top:0,left:0,center:.5,bottom:1,right:1},Lw=function(t,r){if(Fs(t)){var i=t.indexOf("="),n=~i?+(t.charAt(i-1)+1)*parseFloat(t.substr(i+1)):0;~i&&(t.indexOf("%")>i&&(n*=r/100),t=t.substr(0,i-1)),t=n+(t in $_?$_[t]*r:~t.indexOf("%")?parseFloat(t)*r/100:parseFloat(t)||0)}return t},Hx=function(t,r,i,n,a,s,o,l){var u=a.startColor,h=a.endColor,c=a.fontSize,d=a.indent,f=a.fontWeight,m=xi.createElement("div"),p=kf(i)||Vh(i,"pinType")==="fixed",g=t.indexOf("scroller")!==-1,v=p?mi:i,y=t.indexOf("start")!==-1,x=y?u:h,b="border-color:"+x+";font-size:"+c+";color:"+x+";font-weight:"+f+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return b+="position:"+((g||l)&&p?"fixed;":"absolute;"),(g||l||!p)&&(b+=(n===_n?GI:WI)+":"+(s+parseFloat(d))+"px;"),o&&(b+="box-sizing:border-box;text-align:left;width:"+o.offsetWidth+"px;"),m._isStart=y,m.setAttribute("class","gsap-marker-"+t+(r?" marker-"+r:"")),m.style.cssText=b,m.innerText=r||r===0?t+"-"+r:t,v.children[0]?v.insertBefore(m,v.children[0]):v.appendChild(m),m._offset=m["offset"+n.op.d2],Bw(m,0,n,y),m},Bw=function(t,r,i,n){var a={display:"block"},s=i[n?"os2":"p2"],o=i[n?"p2":"os2"];t._isFlipped=n,a[i.a+"Percent"]=n?-100:0,a[i.a]=n?"1px":0,a["border"+s+Og]=1,a["border"+o+Og]=0,a[i.p]=r+"px",mt.set(t,a)},lr=[],ZP={},a1,P4=function(){return Fa()-Ro>34&&(a1||(a1=requestAnimationFrame(mc)))},bp=function(){(!Bs||!Bs.isPressed||Bs.startX>mi.clientWidth)&&(dr.cache++,Bs?a1||(a1=requestAnimationFrame(mc)):mc(),Ro||Bf("scrollStart"),Ro=Fa())},fC=function(){PW=_r.innerWidth,TW=_r.innerHeight},z0=function(){dr.cache++,!fa&&!CW&&!xi.fullscreenElement&&!xi.webkitFullscreenElement&&(!AW||PW!==_r.innerWidth||Math.abs(_r.innerHeight-TW)>_r.innerHeight*.25)&&G_.restart(!0)},Lf={},tce=[],NW=function e(){return Bn(mr,"scrollEnd",e)||rf(!0)},Bf=function(t){return Lf[t]&&Lf[t].map(function(r){return r()})||tce},Ns=[],zW=function(t){for(var r=0;r<Ns.length;r+=5)(!t||Ns[r+4]&&Ns[r+4].query===t)&&(Ns[r].style.cssText=Ns[r+1],Ns[r].getBBox&&Ns[r].setAttribute("transform",Ns[r+2]||""),Ns[r+3].uncache=1)},qI=function(t,r){var i;for(Na=0;Na<lr.length;Na++)i=lr[Na],i&&(!r||i._ctx===r)&&(t?i.kill(1):i.revert(!0,!0));r&&zW(r),r||Bf("revert")},FW=function(t,r){dr.cache++,(r||!za)&&dr.forEach(function(i){return Ga(i)&&i.cacheID++&&(i.rec=0)}),Fs(t)&&(_r.history.scrollRestoration=VI=t)},za,yf=0,D4,rce=function(){if(D4!==yf){var t=D4=yf;requestAnimationFrame(function(){return t===yf&&rf(!0)})}},UW=function(){mi.appendChild(Km),HI=Km.offsetHeight||_r.innerHeight,mi.removeChild(Km)},rf=function(t,r){if(Ro&&!t){zn(mr,"scrollEnd",NW);return}UW(),za=mr.isRefreshing=!0,dr.forEach(function(n){return Ga(n)&&++n.cacheID&&(n.rec=n())});var i=Bf("refreshInit");MW&&mr.sort(),r||qI(),dr.forEach(function(n){Ga(n)&&(n.smooth&&(n.target.style.scrollBehavior="auto"),n(0))}),lr.slice(0).forEach(function(n){return n.refresh()}),lr.forEach(function(n,a){if(n._subPinOffset&&n.pin){var s=n.vars.horizontal?"offsetWidth":"offsetHeight",o=n.pin[s];n.revert(!0,1),n.adjustPinSpacing(n.pin[s]-o),n.refresh()}}),lr.forEach(function(n){var a=cc(n.scroller,n._dir);(n.vars.end==="max"||n._endClamp&&n.end>a)&&n.setPositions(n.start,Math.max(n.start+1,a),!0)}),i.forEach(function(n){return n&&n.render&&n.render(-1)}),dr.forEach(function(n){Ga(n)&&(n.smooth&&requestAnimationFrame(function(){return n.target.style.scrollBehavior="smooth"}),n.rec&&n(n.rec))}),FW(VI,1),G_.pause(),yf++,za=2,mc(2),lr.forEach(function(n){return Ga(n.vars.onRefresh)&&n.vars.onRefresh(n)}),za=mr.isRefreshing=!1,Bf("refresh")},JP=0,Nw=1,py,mc=function(t){if(!za||t===2){mr.isUpdating=!0,py&&py.update(0);var r=lr.length,i=Fa(),n=i-hC>=50,a=r&&lr[0].scroll();if(Nw=JP>a?-1:1,za||(JP=a),n&&(Ro&&!fE&&i-Ro>200&&(Ro=0,Bf("scrollEnd")),Rw=hC,hC=i),Nw<0){for(Na=r;Na-- >0;)lr[Na]&&lr[Na].update(0,n);Nw=1}else for(Na=0;Na<r;Na++)lr[Na]&&lr[Na].update(0,n);mr.isUpdating=!1}a1=0},eD=[kW,LW,WI,GI,So+fy,So+cy,So+dy,So+hy,"display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],zw=eD.concat([gf,vf,"boxSizing","max"+Og,"max"+$I,"position",So,an,an+dy,an+cy,an+fy,an+hy]),ice=function(t,r,i){Zm(i);var n=t._gsap;if(n.spacerIsNative)Zm(n.spacerState);else if(t._gsap.swappedIn){var a=r.parentNode;a&&(a.insertBefore(t,r),a.removeChild(r))}t._gsap.swappedIn=!1},pC=function(t,r,i,n){if(!t._gsap.swappedIn){for(var a=eD.length,s=r.style,o=t.style,l;a--;)l=eD[a],s[l]=i[l];s.position=i.position==="absolute"?"absolute":"relative",i.display==="inline"&&(s.display="inline-block"),o[WI]=o[GI]="auto",s.flexBasis=i.flexBasis||"auto",s.overflow="visible",s.boxSizing="border-box",s[gf]=KP(t,Ha)+Zn,s[vf]=KP(t,_n)+Zn,s[an]=o[So]=o[LW]=o[kW]="0",Zm(n),o[gf]=o["max"+Og]=i[gf],o[vf]=o["max"+$I]=i[vf],o[an]=i[an],t.parentNode!==r&&(t.parentNode.insertBefore(r,t),r.appendChild(t)),t._gsap.swappedIn=!0}},nce=/([A-Z])/g,Zm=function(t){if(t){var r=t.t.style,i=t.length,n=0,a,s;for((t.t._gsap||mt.core.getCache(t.t)).uncache=1;n<i;n+=2)s=t[n+1],a=t[n],s?r[a]=s:r[a]&&r.removeProperty(a.replace(nce,"-$1").toLowerCase())}},Gx=function(t){for(var r=zw.length,i=t.style,n=[],a=0;a<r;a++)n.push(zw[a],i[zw[a]]);return n.t=t,n},ace=function(t,r,i){for(var n=[],a=t.length,s=i?8:0,o;s<a;s+=2)o=t[s],n.push(o,o in r?r[o]:t[s+1]);return n.t=t.t,n},Fw={left:0,top:0},O4=function(t,r,i,n,a,s,o,l,u,h,c,d,f,m){Ga(t)&&(t=t(l)),Fs(t)&&t.substr(0,3)==="max"&&(t=d+(t.charAt(4)==="="?Lw("0"+t.substr(3),i):0));var p=f?f.time():0,g,v,y;if(f&&f.seek(0),isNaN(t)||(t=+t),kw(t))f&&(t=mt.utils.mapRange(f.scrollTrigger.start,f.scrollTrigger.end,0,d,t)),o&&Bw(o,i,n,!0);else{Ga(r)&&(r=r(l));var x=(t||"0").split(" "),b,_,w,E;y=ls(r,l)||mi,b=ac(y)||{},(!b||!b.left&&!b.top)&&Eo(y).display==="none"&&(E=y.style.display,y.style.display="block",b=ac(y),E?y.style.display=E:y.style.removeProperty("display")),_=Lw(x[0],b[n.d]),w=Lw(x[1]||"0",i),t=b[n.p]-u[n.p]-h+_+a-w,o&&Bw(o,w,n,i-w<20||o._isStart&&w>20),i-=i-w}if(m&&(l[m]=t||-.001,t<0&&(t=0)),s){var S=t+i,C=s._isStart;g="scroll"+n.d2,Bw(s,S,n,C&&S>20||!C&&(c?Math.max(mi[g],ul[g]):s.parentNode[g])<=S+1),c&&(u=ac(o),c&&(s.style[n.op.p]=u[n.op.p]-n.op.m-s._offset+Zn))}return f&&y&&(g=ac(y),f.seek(d),v=ac(y),f._caScrollDist=g[n.p]-v[n.p],t=t/f._caScrollDist*d),f&&f.seek(p),f?t:Math.round(t)},sce=/(webkit|moz|length|cssText|inset)/i,I4=function(t,r,i,n){if(t.parentNode!==r){var a=t.style,s,o;if(r===mi){t._stOrig=a.cssText,o=Eo(t);for(s in o)!+s&&!sce.test(s)&&o[s]&&typeof a[s]=="string"&&s!=="0"&&(a[s]=o[s]);a.top=i,a.left=n}else a.cssText=t._stOrig;mt.core.getCache(t).uncache=1,r.appendChild(t)}},jW=function(t,r,i){var n=r,a=n;return function(s){var o=Math.round(t());return o!==n&&o!==a&&Math.abs(o-n)>3&&Math.abs(o-a)>3&&(s=o,i&&i()),a=n,n=s,s}},Wx=function(t,r,i){var n={};n[r.p]="+="+i,mt.set(t,n)},R4=function(t,r){var i=ed(t,r),n="_scroll"+r.p2,a=function s(o,l,u,h,c){var d=s.tween,f=l.onComplete,m={};u=u||i();var p=jW(i,u,function(){d.kill(),s.tween=0});return c=h&&c||0,h=h||o-u,d&&d.kill(),l[n]=o,l.modifiers=m,m[n]=function(){return p(u+h*d.ratio+c*d.ratio*d.ratio)},l.onUpdate=function(){dr.cache++,mc()},l.onComplete=function(){s.tween=0,f&&f.call(d)},d=s.tween=mt.to(t,l),d};return t[n]=i,i.wheelHandler=function(){return a.tween&&a.tween.kill()&&(a.tween=0)},zn(t,"wheel",i.wheelHandler),mr.isTouch&&zn(t,"touchmove",i.wheelHandler),a},mr=function(){function e(r,i){nm||e.register(mt)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),QP(this),this.init(r,i)}var t=e.prototype;return t.init=function(i,n){if(this.progress=this.start=0,this.vars&&this.kill(!0,!0),!B0){this.update=this.refresh=this.kill=$l;return}i=A4(Fs(i)||kw(i)||i.nodeType?{trigger:i}:i,Vx);var a=i,s=a.onUpdate,o=a.toggleClass,l=a.id,u=a.onToggle,h=a.onRefresh,c=a.scrub,d=a.trigger,f=a.pin,m=a.pinSpacing,p=a.invalidateOnRefresh,g=a.anticipatePin,v=a.onScrubComplete,y=a.onSnapComplete,x=a.once,b=a.snap,_=a.pinReparent,w=a.pinSpacer,E=a.containerAnimation,S=a.fastScrollEnd,C=a.preventOverlaps,M=i.horizontal||i.containerAnimation&&i.horizontal!==!1?Ha:_n,P=!c&&c!==0,I=ls(i.scroller||_r),k=mt.core.getCache(I),L=kf(I),O=("pinType"in i?i.pinType:Vh(I,"pinType")||L&&"fixed")==="fixed",F=[i.onEnter,i.onLeave,i.onEnterBack,i.onLeaveBack],z=P&&i.toggleActions.split(" "),B="markers"in i?i.markers:Vx.markers,V=L?0:parseFloat(Eo(I)["border"+M.p2+Og])||0,R=this,H=i.onRefreshInit&&function(){return i.onRefreshInit(R)},W=Que(I,L,M),te=Kue(I,L),G=0,ie=0,q=0,le=ed(I,M),ae,Z,he,ge,xe,ye,Ne,Re,qe,se,ke,Be,at,Ge,$,U,fe,Te,Ae,Fe,et,Pe,we,Ze,Ke,st,xt,vt,$t,ar,Or,J,Me,De,We,gt,jt,ri,Zr;if(R._startClamp=R._endClamp=!1,R._dir=M,g*=45,R.scroller=I,R.scroll=E?E.time.bind(E):le,ge=le(),R.vars=i,n=n||i.animation,"refreshPriority"in i&&(MW=1,i.refreshPriority===-9999&&(py=R)),k.tweenScroll=k.tweenScroll||{top:R4(I,_n),left:R4(I,Ha)},R.tweenTo=ae=k.tweenScroll[M.p],R.scrubDuration=function(ut){Me=kw(ut)&&ut,Me?J?J.duration(ut):J=mt.to(n,{ease:"expo",totalProgress:"+=0",duration:Me,paused:!0,onComplete:function(){return v&&v(R)}}):(J&&J.progress(1).kill(),J=0)},n&&(n.vars.lazy=!1,n._initted&&!R.isReverted||n.vars.immediateRender!==!1&&i.immediateRender!==!1&&n.duration()&&n.render(0,!0,!0),R.animation=n.pause(),n.scrollTrigger=R,R.scrubDuration(c),ar=0,l||(l=n.vars.id)),b&&((!zd(b)||b.push)&&(b={snapTo:b}),"scrollBehavior"in mi.style&&mt.set(L?[mi,ul]:I,{scrollBehavior:"auto"}),dr.forEach(function(ut){return Ga(ut)&&ut.target===(L?xi.scrollingElement||ul:I)&&(ut.smooth=!1)}),he=Ga(b.snapTo)?b.snapTo:b.snapTo==="labels"?Jue(n):b.snapTo==="labelsDirectional"?ece(n):b.directional!==!1?function(ut,Jt){return YI(b.snapTo)(ut,Fa()-ie<500?0:Jt.direction)}:mt.utils.snap(b.snapTo),De=b.duration||{min:.1,max:2},De=zd(De)?Pm(De.min,De.max):Pm(De,De),We=mt.delayedCall(b.delay||Me/2||.1,function(){var ut=le(),Jt=Fa()-ie<500,Dt=ae.tween;if((Jt||Math.abs(R.getVelocity())<10)&&!Dt&&!fE&&G!==ut){var Zt=(ut-ye)/Ge,j=n&&!P?n.totalProgress():Zt,ce=Jt?0:(j-Or)/(Fa()-Rw)*1e3||0,be=mt.utils.clamp(-Zt,1-Zt,xp(ce/2)*ce/.185),de=Zt+(b.inertia===!1?0:be),Se=Pm(0,1,he(de,R)),Ye=Math.round(ye+Se*Ge),tt=b,Ot=tt.onStart,yt=tt.onInterrupt,Xt=tt.onComplete;if(ut<=Ne&&ut>=ye&&Ye!==ut){if(Dt&&!Dt._initted&&Dt.data<=xp(Ye-ut))return;b.inertia===!1&&(be=Se-Zt),ae(Ye,{duration:De(xp(Math.max(xp(de-j),xp(Se-j))*.185/ce/.05||0)),ease:b.ease||"power3",data:xp(Ye-ut),onInterrupt:function(){return We.restart(!0)&&yt&&yt(R)},onComplete:function(){R.update(),G=le(),ar=Or=n&&!P?n.totalProgress():R.progress,y&&y(R),Xt&&Xt(R)}},ut,be*Ge,Ye-ut-be*Ge),Ot&&Ot(R,ae.tween)}}else R.isActive&&G!==ut&&We.restart(!0)}).pause()),l&&(ZP[l]=R),d=R.trigger=ls(d||f!==!0&&f),Zr=d&&d._gsap&&d._gsap.stRevert,Zr&&(Zr=Zr(R)),f=f===!0?d:ls(f),Fs(o)&&(o={targets:d,className:o}),f&&(m===!1||m===So||(m=!m&&f.parentNode&&f.parentNode.style&&Eo(f.parentNode).display==="flex"?!1:an),R.pin=f,Z=mt.core.getCache(f),Z.spacer?$=Z.pinState:(w&&(w=ls(w),w&&!w.nodeType&&(w=w.current||w.nativeElement),Z.spacerIsNative=!!w,w&&(Z.spacerState=Gx(w))),Z.spacer=Te=w||xi.createElement("div"),Te.classList.add("pin-spacer"),l&&Te.classList.add("pin-spacer-"+l),Z.pinState=$=Gx(f)),i.force3D!==!1&&mt.set(f,{force3D:!0}),R.spacer=Te=Z.spacer,$t=Eo(f),Ze=$t[m+M.os2],Fe=mt.getProperty(f),et=mt.quickSetter(f,M.a,Zn),pC(f,Te,$t),fe=Gx(f)),B){Be=zd(B)?A4(B,T4):T4,se=Hx("scroller-start",l,I,M,Be,0),ke=Hx("scroller-end",l,I,M,Be,0,se),Ae=se["offset"+M.op.d2];var Pt=ls(Vh(I,"content")||I);Re=this.markerStart=Hx("start",l,Pt,M,Be,Ae,0,E),qe=this.markerEnd=Hx("end",l,Pt,M,Be,Ae,0,E),E&&(ri=mt.quickSetter([Re,qe],M.a,Zn)),!O&&!(yu.length&&Vh(I,"fixedMarkers")===!0)&&(Zue(L?mi:I),mt.set([se,ke],{force3D:!0}),st=mt.quickSetter(se,M.a,Zn),vt=mt.quickSetter(ke,M.a,Zn))}if(E){var Je=E.vars.onUpdate,qt=E.vars.onUpdateParams;E.eventCallback("onUpdate",function(){R.update(0,0,1),Je&&Je.apply(E,qt||[])})}if(R.previous=function(){return lr[lr.indexOf(R)-1]},R.next=function(){return lr[lr.indexOf(R)+1]},R.revert=function(ut,Jt){if(!Jt)return R.kill(!0);var Dt=ut!==!1||!R.enabled,Zt=fa;Dt!==R.isReverted&&(Dt&&(gt=Math.max(le(),R.scroll.rec||0),q=R.progress,jt=n&&n.progress()),Re&&[Re,qe,se,ke].forEach(function(j){return j.style.display=Dt?"none":"block"}),Dt&&(fa=R,R.update(Dt)),f&&(!_||!R.isActive)&&(Dt?ice(f,Te,$):pC(f,Te,Eo(f),Ke)),Dt||R.update(Dt),fa=Zt,R.isReverted=Dt)},R.refresh=function(ut,Jt,Dt,Zt){if(!((fa||!R.enabled)&&!Jt)){if(f&&ut&&Ro){zn(e,"scrollEnd",NW);return}!za&&H&&H(R),fa=R,ae.tween&&!Dt&&(ae.tween.kill(),ae.tween=0),J&&J.pause(),p&&n&&n.revert({kill:!1}).invalidate(),R.isReverted||R.revert(!0,!0),R._subPinOffset=!1;var j=W(),ce=te(),be=E?E.duration():cc(I,M),de=Ge<=.01,Se=0,Ye=Zt||0,tt=zd(Dt)?Dt.end:i.end,Ot=i.endTrigger||d,yt=zd(Dt)?Dt.start:i.start||(i.start===0||!d?0:f?"0 0":"0 100%"),Xt=R.pinnedContainer=i.pinnedContainer&&ls(i.pinnedContainer,R),Ft=d&&Math.max(0,lr.indexOf(R))||0,Nt=Ft,cr,Ir,gn,Ca,er,_t,oa,Ou,so,Dl,Ji,la,li;for(B&&zd(Dt)&&(la=mt.getProperty(se,M.p),li=mt.getProperty(ke,M.p));Nt--;)_t=lr[Nt],_t.end||_t.refresh(0,1)||(fa=R),oa=_t.pin,oa&&(oa===d||oa===f||oa===Xt)&&!_t.isReverted&&(Dl||(Dl=[]),Dl.unshift(_t),_t.revert(!0,!0)),_t!==lr[Nt]&&(Ft--,Nt--);for(Ga(yt)&&(yt=yt(R)),yt=S4(yt,"start",R),ye=O4(yt,d,j,M,le(),Re,se,R,ce,V,O,be,E,R._startClamp&&"_startClamp")||(f?-.001:0),Ga(tt)&&(tt=tt(R)),Fs(tt)&&!tt.indexOf("+=")&&(~tt.indexOf(" ")?tt=(Fs(yt)?yt.split(" ")[0]:"")+tt:(Se=Lw(tt.substr(2),j),tt=Fs(yt)?yt:(E?mt.utils.mapRange(0,E.duration(),E.scrollTrigger.start,E.scrollTrigger.end,ye):ye)+Se,Ot=d)),tt=S4(tt,"end",R),Ne=Math.max(ye,O4(tt||(Ot?"100% 0":be),Ot,j,M,le()+Se,qe,ke,R,ce,V,O,be,E,R._endClamp&&"_endClamp"))||-.001,Se=0,Nt=Ft;Nt--;)_t=lr[Nt],oa=_t.pin,oa&&_t.start-_t._pinPush<=ye&&!E&&_t.end>0&&(cr=_t.end-(R._startClamp?Math.max(0,_t.start):_t.start),(oa===d&&_t.start-_t._pinPush<ye||oa===Xt)&&isNaN(yt)&&(Se+=cr*(1-_t.progress)),oa===f&&(Ye+=cr));if(ye+=Se,Ne+=Se,R._startClamp&&(R._startClamp+=Se),R._endClamp&&!za&&(R._endClamp=Ne||-.001,Ne=Math.min(Ne,cc(I,M))),Ge=Ne-ye||(ye-=.01)&&.001,de&&(q=mt.utils.clamp(0,1,mt.utils.normalize(ye,Ne,gt))),R._pinPush=Ye,Re&&Se&&(cr={},cr[M.a]="+="+Se,Xt&&(cr[M.p]="-="+le()),mt.set([Re,qe],cr)),f)cr=Eo(f),Ca=M===_n,gn=le(),Pe=parseFloat(Fe(M.a))+Ye,!be&&Ne>1&&(Ji=(L?xi.scrollingElement||ul:I).style,Ji={style:Ji,value:Ji["overflow"+M.a.toUpperCase()]},L&&Eo(mi)["overflow"+M.a.toUpperCase()]!=="scroll"&&(Ji.style["overflow"+M.a.toUpperCase()]="scroll")),pC(f,Te,cr),fe=Gx(f),Ir=ac(f,!0),Ou=O&&ed(I,Ca?Ha:_n)(),m&&(Ke=[m+M.os2,Ge+Ye+Zn],Ke.t=Te,Nt=m===an?KP(f,M)+Ge+Ye:0,Nt&&Ke.push(M.d,Nt+Zn),Zm(Ke),Xt&&lr.forEach(function(en){en.pin===Xt&&en.vars.pinSpacing!==!1&&(en._subPinOffset=!0)}),O&&le(gt)),O&&(er={top:Ir.top+(Ca?gn-ye:Ou)+Zn,left:Ir.left+(Ca?Ou:gn-ye)+Zn,boxSizing:"border-box",position:"fixed"},er[gf]=er["max"+Og]=Math.ceil(Ir.width)+Zn,er[vf]=er["max"+$I]=Math.ceil(Ir.height)+Zn,er[So]=er[So+dy]=er[So+cy]=er[So+fy]=er[So+hy]="0",er[an]=cr[an],er[an+dy]=cr[an+dy],er[an+cy]=cr[an+cy],er[an+fy]=cr[an+fy],er[an+hy]=cr[an+hy],U=ace($,er,_),za&&le(0)),n?(so=n._initted,uC(1),n.render(n.duration(),!0,!0),we=Fe(M.a)-Pe+Ge+Ye,xt=Math.abs(Ge-we)>1,O&&xt&&U.splice(U.length-2,2),n.render(0,!0,!0),so||n.invalidate(!0),n.parent||n.totalTime(n.totalTime()),uC(0)):we=Ge,Ji&&(Ji.value?Ji.style["overflow"+M.a.toUpperCase()]=Ji.value:Ji.style.removeProperty("overflow-"+M.a));else if(d&&le()&&!E)for(Ir=d.parentNode;Ir&&Ir!==mi;)Ir._pinOffset&&(ye-=Ir._pinOffset,Ne-=Ir._pinOffset),Ir=Ir.parentNode;Dl&&Dl.forEach(function(en){return en.revert(!1,!0)}),R.start=ye,R.end=Ne,ge=xe=za?gt:le(),!E&&!za&&(ge<gt&&le(gt),R.scroll.rec=0),R.revert(!1,!0),ie=Fa(),We&&(G=-1,We.restart(!0)),fa=0,n&&P&&(n._initted||jt)&&n.progress()!==jt&&n.progress(jt||0,!0).render(n.time(),!0,!0),(de||q!==R.progress||E)&&(n&&!P&&n.totalProgress(E&&ye<-.001&&!q?mt.utils.normalize(ye,Ne,0):q,!0),R.progress=de||(ge-ye)/Ge===q?0:q),f&&m&&(Te._pinOffset=Math.round(R.progress*we)),J&&J.invalidate(),isNaN(la)||(la-=mt.getProperty(se,M.p),li-=mt.getProperty(ke,M.p),Wx(se,M,la),Wx(Re,M,la-(Zt||0)),Wx(ke,M,li),Wx(qe,M,li-(Zt||0))),de&&!za&&R.update(),h&&!za&&!at&&(at=!0,h(R),at=!1)}},R.getVelocity=function(){return(le()-xe)/(Fa()-Rw)*1e3||0},R.endAnimation=function(){Gv(R.callbackAnimation),n&&(J?J.progress(1):n.paused()?P||Gv(n,R.direction<0,1):Gv(n,n.reversed()))},R.labelToScroll=function(ut){return n&&n.labels&&(ye||R.refresh()||ye)+n.labels[ut]/n.duration()*Ge||0},R.getTrailing=function(ut){var Jt=lr.indexOf(R),Dt=R.direction>0?lr.slice(0,Jt).reverse():lr.slice(Jt+1);return(Fs(ut)?Dt.filter(function(Zt){return Zt.vars.preventOverlaps===ut}):Dt).filter(function(Zt){return R.direction>0?Zt.end<=ye:Zt.start>=Ne})},R.update=function(ut,Jt,Dt){if(!(E&&!Dt&&!ut)){var Zt=za===!0?gt:R.scroll(),j=ut?0:(Zt-ye)/Ge,ce=j<0?0:j>1?1:j||0,be=R.progress,de,Se,Ye,tt,Ot,yt,Xt,Ft;if(Jt&&(xe=ge,ge=E?le():Zt,b&&(Or=ar,ar=n&&!P?n.totalProgress():ce)),g&&!ce&&f&&!fa&&!zx&&Ro&&ye<Zt+(Zt-xe)/(Fa()-Rw)*g&&(ce=1e-4),ce!==be&&R.enabled){if(de=R.isActive=!!ce&&ce<1,Se=!!be&&be<1,yt=de!==Se,Ot=yt||!!ce!=!!be,R.direction=ce>be?1:-1,R.progress=ce,Ot&&!fa&&(Ye=ce&&!be?0:ce===1?1:be===1?2:3,P&&(tt=!yt&&z[Ye+1]!=="none"&&z[Ye+1]||z[Ye],Ft=n&&(tt==="complete"||tt==="reset"||tt in n))),C&&(yt||Ft)&&(Ft||c||!n)&&(Ga(C)?C(R):R.getTrailing(C).forEach(function(gn){return gn.endAnimation()})),P||(J&&!fa&&!zx?(J._dp._time-J._start!==J._time&&J.render(J._dp._time-J._start),J.resetTo?J.resetTo("totalProgress",ce,n._tTime/n._tDur):(J.vars.totalProgress=ce,J.invalidate().restart())):n&&n.totalProgress(ce,!!(fa&&(ie||ut)))),f){if(ut&&m&&(Te.style[m+M.os2]=Ze),!O)et(N0(Pe+we*ce));else if(Ot){if(Xt=!ut&&ce>be&&Ne+1>Zt&&Zt+1>=cc(I,M),_)if(!ut&&(de||Xt)){var Nt=ac(f,!0),cr=Zt-ye;I4(f,mi,Nt.top+(M===_n?cr:0)+Zn,Nt.left+(M===_n?0:cr)+Zn)}else I4(f,Te);Zm(de||Xt?U:fe),xt&&ce<1&&de||et(Pe+(ce===1&&!Xt?we:0))}}b&&!ae.tween&&!fa&&!zx&&We.restart(!0),o&&(yt||x&&ce&&(ce<1||!cC))&&W_(o.targets).forEach(function(gn){return gn.classList[de||x?"add":"remove"](o.className)}),s&&!P&&!ut&&s(R),Ot&&!fa?(P&&(Ft&&(tt==="complete"?n.pause().totalProgress(1):tt==="reset"?n.restart(!0).pause():tt==="restart"?n.restart(!0):n[tt]()),s&&s(R)),(yt||!cC)&&(u&&yt&&dC(R,u),F[Ye]&&dC(R,F[Ye]),x&&(ce===1?R.kill(!1,1):F[Ye]=0),yt||(Ye=ce===1?1:3,F[Ye]&&dC(R,F[Ye]))),S&&!de&&Math.abs(R.getVelocity())>(kw(S)?S:2500)&&(Gv(R.callbackAnimation),J?J.progress(1):Gv(n,tt==="reverse"?1:!ce,1))):P&&s&&!fa&&s(R)}if(vt){var Ir=E?Zt/E.duration()*(E._caScrollDist||0):Zt;st(Ir+(se._isFlipped?1:0)),vt(Ir)}ri&&ri(-Zt/E.duration()*(E._caScrollDist||0))}},R.enable=function(ut,Jt){R.enabled||(R.enabled=!0,zn(I,"resize",z0),L||zn(I,"scroll",bp),H&&zn(e,"refreshInit",H),ut!==!1&&(R.progress=q=0,ge=xe=G=le()),Jt!==!1&&R.refresh())},R.getTween=function(ut){return ut&&ae?ae.tween:J},R.setPositions=function(ut,Jt,Dt,Zt){if(E){var j=E.scrollTrigger,ce=E.duration(),be=j.end-j.start;ut=j.start+be*ut/ce,Jt=j.start+be*Jt/ce}R.refresh(!1,!1,{start:E4(ut,Dt&&!!R._startClamp),end:E4(Jt,Dt&&!!R._endClamp)},Zt),R.update()},R.adjustPinSpacing=function(ut){if(Ke&&ut){var Jt=Ke.indexOf(M.d)+1;Ke[Jt]=parseFloat(Ke[Jt])+ut+Zn,Ke[1]=parseFloat(Ke[1])+ut+Zn,Zm(Ke)}},R.disable=function(ut,Jt){if(R.enabled&&(ut!==!1&&R.revert(!0,!0),R.enabled=R.isActive=!1,Jt||J&&J.pause(),gt=0,Z&&(Z.uncache=1),H&&Bn(e,"refreshInit",H),We&&(We.pause(),ae.tween&&ae.tween.kill()&&(ae.tween=0)),!L)){for(var Dt=lr.length;Dt--;)if(lr[Dt].scroller===I&&lr[Dt]!==R)return;Bn(I,"resize",z0),L||Bn(I,"scroll",bp)}},R.kill=function(ut,Jt){R.disable(ut,Jt),J&&!Jt&&J.kill(),l&&delete ZP[l];var Dt=lr.indexOf(R);Dt>=0&&lr.splice(Dt,1),Dt===Na&&Nw>0&&Na--,Dt=0,lr.forEach(function(Zt){return Zt.scroller===R.scroller&&(Dt=1)}),Dt||za||(R.scroll.rec=0),n&&(n.scrollTrigger=null,ut&&n.revert({kill:!1}),Jt||n.kill()),Re&&[Re,qe,se,ke].forEach(function(Zt){return Zt.parentNode&&Zt.parentNode.removeChild(Zt)}),py===R&&(py=0),f&&(Z&&(Z.uncache=1),Dt=0,lr.forEach(function(Zt){return Zt.pin===f&&Dt++}),Dt||(Z.spacer=0)),i.onKill&&i.onKill(R)},lr.push(R),R.enable(!1,!1),Zr&&Zr(R),n&&n.add&&!Ge){var ur=R.update;R.update=function(){R.update=ur,ye||Ne||R.refresh()},mt.delayedCall(.01,R.update),Ge=.01,ye=Ne=0}else R.refresh();f&&rce()},e.register=function(i){return nm||(mt=i||OW(),DW()&&window.document&&e.enable(),nm=B0),nm},e.defaults=function(i){if(i)for(var n in i)Vx[n]=i[n];return Vx},e.disable=function(i,n){B0=0,lr.forEach(function(s){return s[n?"kill":"disable"](i)}),Bn(_r,"wheel",bp),Bn(xi,"scroll",bp),clearInterval(Nx),Bn(xi,"touchcancel",$l),Bn(mi,"touchstart",$l),Ux(Bn,xi,"pointerdown,touchstart,mousedown",M4),Ux(Bn,xi,"pointerup,touchend,mouseup",C4),G_.kill(),Fx(Bn);for(var a=0;a<dr.length;a+=3)jx(Bn,dr[a],dr[a+1]),jx(Bn,dr[a],dr[a+2])},e.enable=function(){if(_r=window,xi=document,ul=xi.documentElement,mi=xi.body,mt&&(W_=mt.utils.toArray,Pm=mt.utils.clamp,QP=mt.core.context||$l,uC=mt.core.suppressOverwrites||$l,VI=_r.history.scrollRestoration||"auto",JP=_r.pageYOffset,mt.core.globals("ScrollTrigger",e),mi)){B0=1,Km=document.createElement("div"),Km.style.height="100vh",Km.style.position="absolute",UW(),Xue(),cn.register(mt),e.isTouch=cn.isTouch,ih=cn.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),zn(_r,"wheel",bp),EW=[_r,xi,ul,mi],mt.matchMedia?(e.matchMedia=function(l){var u=mt.matchMedia(),h;for(h in l)u.add(h,l[h]);return u},mt.addEventListener("matchMediaInit",function(){return qI()}),mt.addEventListener("matchMediaRevert",function(){return zW()}),mt.addEventListener("matchMedia",function(){rf(0,1),Bf("matchMedia")}),mt.matchMedia("(orientation: portrait)",function(){return fC(),fC})):console.warn("Requires GSAP 3.11.0 or later"),fC(),zn(xi,"scroll",bp);var i=mi.style,n=i.borderTopStyle,a=mt.core.Animation.prototype,s,o;for(a.revert||Object.defineProperty(a,"revert",{value:function(){return this.time(-.01,!0)}}),i.borderTopStyle="solid",s=ac(mi),_n.m=Math.round(s.top+_n.sc())||0,Ha.m=Math.round(s.left+Ha.sc())||0,n?i.borderTopStyle=n:i.removeProperty("border-top-style"),Nx=setInterval(P4,250),mt.delayedCall(.5,function(){return zx=0}),zn(xi,"touchcancel",$l),zn(mi,"touchstart",$l),Ux(zn,xi,"pointerdown,touchstart,mousedown",M4),Ux(zn,xi,"pointerup,touchend,mouseup",C4),XP=mt.utils.checkPrefix("transform"),zw.push(XP),nm=Fa(),G_=mt.delayedCall(.2,rf).pause(),am=[xi,"visibilitychange",function(){var l=_r.innerWidth,u=_r.innerHeight;xi.hidden?(w4=l,_4=u):(w4!==l||_4!==u)&&z0()},xi,"DOMContentLoaded",rf,_r,"load",rf,_r,"resize",z0],Fx(zn),lr.forEach(function(l){return l.enable(0,1)}),o=0;o<dr.length;o+=3)jx(Bn,dr[o],dr[o+1]),jx(Bn,dr[o],dr[o+2])}},e.config=function(i){"limitCallbacks"in i&&(cC=!!i.limitCallbacks);var n=i.syncInterval;n&&clearInterval(Nx)||(Nx=n)&&setInterval(P4,n),"ignoreMobileResize"in i&&(AW=e.isTouch===1&&i.ignoreMobileResize),"autoRefreshEvents"in i&&(Fx(Bn)||Fx(zn,i.autoRefreshEvents||"none"),CW=(i.autoRefreshEvents+"").indexOf("resize")===-1)},e.scrollerProxy=function(i,n){var a=ls(i),s=dr.indexOf(a),o=kf(a);~s&&dr.splice(s,o?6:2),n&&(o?yu.unshift(_r,n,mi,n,ul,n):yu.unshift(a,n))},e.clearMatchMedia=function(i){lr.forEach(function(n){return n._ctx&&n._ctx.query===i&&n._ctx.kill(!0,!0)})},e.isInViewport=function(i,n,a){var s=(Fs(i)?ls(i):i).getBoundingClientRect(),o=s[a?gf:vf]*n||0;return a?s.right-o>0&&s.left+o<_r.innerWidth:s.bottom-o>0&&s.top+o<_r.innerHeight},e.positionInViewport=function(i,n,a){Fs(i)&&(i=ls(i));var s=i.getBoundingClientRect(),o=s[a?gf:vf],l=n==null?o/2:n in $_?$_[n]*o:~n.indexOf("%")?parseFloat(n)*o/100:parseFloat(n)||0;return a?(s.left+l)/_r.innerWidth:(s.top+l)/_r.innerHeight},e.killAll=function(i){if(lr.slice(0).forEach(function(a){return a.vars.id!=="ScrollSmoother"&&a.kill()}),i!==!0){var n=Lf.killAll||[];Lf={},n.forEach(function(a){return a()})}},e}();mr.version="3.12.2";mr.saveStyles=function(e){return e?W_(e).forEach(function(t){if(t&&t.style){var r=Ns.indexOf(t);r>=0&&Ns.splice(r,5),Ns.push(t,t.style.cssText,t.getBBox&&t.getAttribute("transform"),mt.core.getCache(t),QP())}}):Ns};mr.revert=function(e,t){return qI(!e,t)};mr.create=function(e,t){return new mr(e,t)};mr.refresh=function(e){return e?z0():(nm||mr.register())&&rf(!0)};mr.update=function(e){return++dr.cache&&mc(e===!0?2:0)};mr.clearScrollMemory=FW;mr.maxScroll=function(e,t){return cc(e,t?Ha:_n)};mr.getScrollFunc=function(e,t){return ed(ls(e),t?Ha:_n)};mr.getById=function(e){return ZP[e]};mr.getAll=function(){return lr.filter(function(e){return e.vars.id!=="ScrollSmoother"})};mr.isScrolling=function(){return!!Ro};mr.snapDirectional=YI;mr.addEventListener=function(e,t){var r=Lf[e]||(Lf[e]=[]);~r.indexOf(t)||r.push(t)};mr.removeEventListener=function(e,t){var r=Lf[e],i=r&&r.indexOf(t);i>=0&&r.splice(i,1)};mr.batch=function(e,t){var r=[],i={},n=t.interval||.016,a=t.batchMax||1e9,s=function(u,h){var c=[],d=[],f=mt.delayedCall(n,function(){h(c,d),c=[],d=[]}).pause();return function(m){c.length||f.restart(!0),c.push(m.trigger),d.push(m),a<=c.length&&f.progress(1)}},o;for(o in t)i[o]=o.substr(0,2)==="on"&&Ga(t[o])&&o!=="onRefreshInit"?s(o,t[o]):t[o];return Ga(a)&&(a=a(),zn(mr,"refresh",function(){return a=t.batchMax()})),W_(e).forEach(function(l){var u={};for(o in i)u[o]=i[o];u.trigger=l,r.push(mr.create(u))}),r};var k4=function(t,r,i,n){return r>n?t(n):r<0&&t(0),i>n?(n-r)/(i-r):i<0?r/(r-i):1},mC=function e(t,r){r===!0?t.style.removeProperty("touch-action"):t.style.touchAction=r===!0?"auto":r?"pan-"+r+(cn.isTouch?" pinch-zoom":""):"none",t===ul&&e(mi,r)},$x={auto:1,scroll:1},oce=function(t){var r=t.event,i=t.target,n=t.axis,a=(r.changedTouches?r.changedTouches[0]:r).target,s=a._gsap||mt.core.getCache(a),o=Fa(),l;if(!s._isScrollT||o-s._isScrollT>2e3){for(;a&&a!==mi&&(a.scrollHeight<=a.clientHeight&&a.scrollWidth<=a.clientWidth||!($x[(l=Eo(a)).overflowY]||$x[l.overflowX]));)a=a.parentNode;s._isScroll=a&&a!==i&&!kf(a)&&($x[(l=Eo(a)).overflowY]||$x[l.overflowX]),s._isScrollT=o}(s._isScroll||n==="x")&&(r.stopPropagation(),r._gsapAllow=!0)},VW=function(t,r,i,n){return cn.create({target:t,capture:!0,debounce:!1,lockAxis:!0,type:r,onWheel:n=n&&oce,onPress:n,onDrag:n,onScroll:n,onEnable:function(){return i&&zn(xi,cn.eventTypes[0],B4,!1,!0)},onDisable:function(){return Bn(xi,cn.eventTypes[0],B4,!0)}})},lce=/(input|label|select|textarea)/i,L4,B4=function(t){var r=lce.test(t.target.tagName);(r||L4)&&(t._gsapAllow=!0,L4=r)},uce=function(t){zd(t)||(t={}),t.preventDefault=t.isNormalizer=t.allowClicks=!0,t.type||(t.type="wheel,touch"),t.debounce=!!t.debounce,t.id=t.id||"normalizer";var r=t,i=r.normalizeScrollX,n=r.momentum,a=r.allowNestedScroll,s=r.onRelease,o,l,u=ls(t.target)||ul,h=mt.core.globals().ScrollSmoother,c=h&&h.get(),d=ih&&(t.content&&ls(t.content)||c&&t.content!==!1&&!c.smooth()&&c.content()),f=ed(u,_n),m=ed(u,Ha),p=1,g=(cn.isTouch&&_r.visualViewport?_r.visualViewport.scale*_r.visualViewport.width:_r.outerWidth)/_r.innerWidth,v=0,y=Ga(n)?function(){return n(o)}:function(){return n||2.8},x,b,_=VW(u,t.type,!0,a),w=function(){return b=!1},E=$l,S=$l,C=function(){l=cc(u,_n),S=Pm(ih?1:0,l),i&&(E=Pm(0,cc(u,Ha))),x=yf},M=function(){d._gsap.y=N0(parseFloat(d._gsap.y)+f.offset)+"px",d.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+parseFloat(d._gsap.y)+", 0, 1)",f.offset=f.cacheID=0},P=function(){if(b){requestAnimationFrame(w);var B=N0(o.deltaY/2),V=S(f.v-B);if(d&&V!==f.v+f.offset){f.offset=V-f.v;var R=N0((parseFloat(d&&d._gsap.y)||0)-f.offset);d.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+R+", 0, 1)",d._gsap.y=R+"px",f.cacheID=dr.cache,mc()}return!0}f.offset&&M(),b=!0},I,k,L,O,F=function(){C(),I.isActive()&&I.vars.scrollY>l&&(f()>l?I.progress(1)&&f(l):I.resetTo("scrollY",l))};return d&&mt.set(d,{y:"+=0"}),t.ignoreCheck=function(z){return ih&&z.type==="touchmove"&&P()||p>1.05&&z.type!=="touchstart"||o.isGesturing||z.touches&&z.touches.length>1},t.onPress=function(){b=!1;var z=p;p=N0((_r.visualViewport&&_r.visualViewport.scale||1)/g),I.pause(),z!==p&&mC(u,p>1.01?!0:i?!1:"x"),k=m(),L=f(),C(),x=yf},t.onRelease=t.onGestureStart=function(z,B){if(f.offset&&M(),!B)O.restart(!0);else{dr.cache++;var V=y(),R,H;i&&(R=m(),H=R+V*.05*-z.velocityX/.227,V*=k4(m,R,H,cc(u,Ha)),I.vars.scrollX=E(H)),R=f(),H=R+V*.05*-z.velocityY/.227,V*=k4(f,R,H,cc(u,_n)),I.vars.scrollY=S(H),I.invalidate().duration(V).play(.01),(ih&&I.vars.scrollY>=l||R>=l-1)&&mt.to({},{onUpdate:F,duration:V})}s&&s(z)},t.onWheel=function(){I._ts&&I.pause(),Fa()-v>1e3&&(x=0,v=Fa())},t.onChange=function(z,B,V,R,H){if(yf!==x&&C(),B&&i&&m(E(R[2]===B?k+(z.startX-z.x):m()+B-R[1])),V){f.offset&&M();var W=H[2]===V,te=W?L+z.startY-z.y:f()+V-H[1],G=S(te);W&&te!==G&&(L+=G-te),f(G)}(V||B)&&mc()},t.onEnable=function(){mC(u,i?!1:"x"),mr.addEventListener("refresh",F),zn(_r,"resize",F),f.smooth&&(f.target.style.scrollBehavior="auto",f.smooth=m.smooth=!1),_.enable()},t.onDisable=function(){mC(u,!0),Bn(_r,"resize",F),mr.removeEventListener("refresh",F),_.kill()},t.lockAxis=t.lockAxis!==!1,o=new cn(t),o.iOS=ih,ih&&!f()&&f(1),ih&&mt.ticker.add($l),O=o._dc,I=mt.to(o,{ease:"power4",paused:!0,scrollX:i?"+=0.1":"+=0",scrollY:"+=0.1",modifiers:{scrollY:jW(f,f(),function(){return I.pause()})},onUpdate:mc,onComplete:O.vars.onComplete}),o};mr.sort=function(e){return lr.sort(e||function(t,r){return(t.vars.refreshPriority||0)*-1e6+t.start-(r.start+(r.vars.refreshPriority||0)*-1e6)})};mr.observe=function(e){return new cn(e)};mr.normalizeScroll=function(e){if(typeof e>"u")return Bs;if(e===!0&&Bs)return Bs.enable();if(e===!1)return Bs&&Bs.kill();var t=e instanceof cn?e:uce(e);return Bs&&Bs.target===t.target&&Bs.kill(),kf(t.target)&&(Bs=t),t};mr.core={_getVelocityProp:qP,_inputObserver:VW,_scrollers:dr,_proxies:yu,bridge:{ss:function(){Ro||Bf("scrollStart"),Ro=Fa()},ref:function(){return fa}}};OW()&&mt.registerPlugin(mr);U1.registerPlugin(mr);const Ii=Animation=(e,t,r,i="play",n,a=0,s=0,o=0)=>{U1.fromTo(e.current,{x:r,opacity:o,y:n,display:"hidden"},{display:"visible",delay:s,x:0,y:a,opacity:1,duration:t,ease:"power3.out",scrollTrigger:{trigger:e.current,toggleActions:`${i} none none none`}})},HW=e=>{U1.fromTo(e.current,{scale:1},{scale:1.3,repeat:-1,yoyo:!0})};function Yx({cls:e,title:t,year:r,description:i}){localStorage.getItem("isDark");const n=X.useRef(null);return X.useEffect(()=>{Ii(n,3,0,"play",150)},[]),Q("div",{className:`tl-container ${e}`,children:ct("div",{className:"tl-content div",ref:n,children:[Q("h3",{className:"colorful",children:t}),Q("h6",{children:Q("i",{children:r})}),Q("p",{children:i})]})})}function cce(){const{t:e}=z1(),t=[{title:e("ABOUT_PAGE.EXPERIENCE.EX_1.TITLE"),year:"2023 - present",description:e("ABOUT_PAGE.EXPERIENCE.EX_1.DESCRIPTION")},{title:e("ABOUT_PAGE.EXPERIENCE.EX_2.TITLE"),year:"2023",description:e("ABOUT_PAGE.EXPERIENCE.EX_2.DESCRIPTION")},{title:e("ABOUT_PAGE.EXPERIENCE.EX_3.TITLE"),year:"2022",description:e("ABOUT_PAGE.EXPERIENCE.EX_3.DESCRIPTION")},{title:e("ABOUT_PAGE.EXPERIENCE.EX_4.TITLE"),year:"2020 - 2021",description:e("ABOUT_PAGE.EXPERIENCE.EX_4.DESCRIPTION")}];return ct("div",{className:"tl",children:[Q(Yx,{cls:"tl-left",title:e("ABOUT_PAGE.EXPERIENCE.EX_1.TITLE"),year:"2023 - present",description:t[0].description}),Q(Yx,{cls:"tl-right",title:t[1].title,year:t[1].year,description:t[1].description}),Q(Yx,{cls:"tl-left",title:t[2].title,year:t[2].year,description:t[2].description}),Q(Yx,{cls:"tl-right",title:t[3].title,year:t[3].year,description:t[3].description})]})}function hce(){const{t:e}=z1(),t=X.useRef(null),r=X.useRef(null),i=X.useRef(null),n=X.useRef(null),a=X.useRef(null),s=X.useRef(),o=X.useRef(null),l=X.useRef(null),u=X.useRef(null),h=X.useRef(null),[c,d]=X.useState(""),[f,m]=X.useState("");X.useEffect(()=>{Ii(t,1,100),Ii(r,2,-100),Ii(i,3,100),Ii(n,4,-50),Ii(a,2,50),Ii(o,5,80,"restart"),Ii(l,3,-80,"restart"),Ii(u,4,-130,"restart"),HW(h)});function p(g){g=="poetry"?(d(s.current.content),m(s.current.title)):g=="humor"?(d(s.current.content1),m(s.current.title1)):(d(s.current.content2),m(s.current.title2)),s.current.open()}return ct(ad,{children:[Q(SI,{}),Q(joe,{ref:s,content:c,title:f}),Q("br",{}),ct("div",{className:"container section-wrapper",children:[ct("div",{className:"img-wrapper",children:[Q("p",{className:"flip-text",children:e("ABOUT_PAGE.WHO_IS_SHE")}),Q("img",{src:zoe,draggable:!1}),Q("p",{className:"flip-text",children:e("ABOUT_PAGE.I_WISH_I_KNEW")})]}),ct("div",{className:"about",children:[ct("p",{ref:t,children:[e("ABOUT_PAGE.DESCRIPTION.PART_1")," ",Q("span",{className:"colorful",style:{fontWeight:"bold"},children:e("ABOUT_PAGE.DESCRIPTION.PART_1_2")}),e("ABOUT_PAGE.DESCRIPTION.PART_2")]})," ",Q("br",{}),ct("p",{ref:r,children:[e("ABOUT_PAGE.DESCRIPTION.PART_3")," ",Q("span",{className:"colorful",style:{fontWeight:"bold"},children:"frontend web developer"})," ",e("ABOUT_PAGE.DESCRIPTION.PART_4")]}),Q("br",{}),ct("p",{ref:i,children:[e("ABOUT_PAGE.LAST.PART_5"),Q("span",{style:{borderBottom:"3px solid #682ae9"},className:"pointer",onClick:()=>p("poetry"),children:e("ABOUT_PAGE.LAST.PART_6")})," ",Q("span",{style:{borderBottom:"3px solid chartreuse"},onClick:()=>p("music"),className:"pointer",children:e("ABOUT_PAGE.LAST.PART_7")})," ",e("ABOUT_PAGE.LAST.PART_8"),Q("span",{style:{borderBottom:"3px solid hotpink"},className:"pointer",onClick:()=>p("humor"),children:e("ABOUT_PAGE.LAST.PART_9")}),e("ABOUT_PAGE.LAST.PART_10")]})," ",Q("br",{}),ct("strong",{children:["- ",e("ABOUT_PAGE.LAST.RAZIA_AKBARI")," ",Q("span",{ref:h,style:{display:"inline-block"},children:"🖤"})]})]})]}),Q("br",{}),Q("br",{}),ct("div",{className:"container",style:{marginBottom:"2rem"},children:[Q("h2",{style:{textAlign:"center",marginBottom:"1rem"},children:Q("span",{className:"colorful",children:e("ABOUT_PAGE.EXPERIENCE.TITLE")})}),Q("small",{className:"small",children:e("ABOUT_PAGE.EXPERIENCE.SUB_TITLE")})]}),Q(cce,{}),Q("br",{}),Q("br",{}),ct("div",{className:"container",children:[Q("h2",{style:{textAlign:"center",margin:"1rem auto"},children:Q("span",{className:"colorful",children:e("ABOUT_PAGE.SKILL.TITLE")})}),Q("small",{className:"small",children:e("ABOUT_PAGE.SKILL.SUB_TITLE")})]}),Q($ue,{para:n,firstBlock:o,secondBlock:l,thirdBlock:u,para1:a}),Q("br",{})]})}const dce="/assets/testosterone-6de8a98e.jpg",fce="/assets/glycogen-fa11beb8.jpg",pce="/assets/bones-a08d0ca4.jpg",mce="/assets/female-01ec9481.jpg",gce="/assets/fast-721f114d.jpg",vce="/assets/eye-4265ce72.jpg",N4=[{title:"Testosterone and its side effects on behaviour",imageSrc:dce,description:"Why are men more aggressive and depressed than women? It's a mystery! But did you know that testosterone might be the culprit? Let's explore the fascinating world of hormones and emotions! Check it out here and prepare to be amazed!",link:"https://drive.google.com/drive/folders/1mnBJQ_1eNzO2ZDXDeB_NhTSPDOoTUZib?usp=sharing",tags:["Medicine","Hormonology","Testosterone"]},{title:"Glycogen Storage Disease",imageSrc:fce,description:"Glycogen Storage Disease is a rare genetic disorder that affects the body's ability to store and use glycogen, a form of glucose that is stored in the liver and muscles. This can lead to a variety of symptoms, including low blood sugar, muscle weakness, and enlarged liver. ",link:"https://docs.google.com/presentation/d/1nyiEZpIdXecfUifuGG5PhLAUmlP_-DHo9tYv64QzDDY/edit?usp=sharing",tags:["Medicine","Biochemistry","Disease"]},{title:"Osseous (Bone) Histology",imageSrc:pce,description:"Osseous histology is the study of the microscopic structure of bone tissue. It involves examining the mineralized matrix, osteocytes, and canals that make up bones. Go through the resources below to learn more about the bones!",link:"https://docs.google.com/presentation/d/1F1WmvsiP4m0qE8_RRZMy3YsRIauYvYrPpQO99ZFdMbA/edit?usp=sharing",tags:["Medicine","Histology","Osseous"]},{title:"Female Reproductive System",imageSrc:mce,description:"Ovaries, fallopian tubes, uterus, cervix, and vagina. Eggs produced in ovaries, travel through fallopian tubes to uterus. Fertilized egg implants in uterus, cervix connects to vagina. Hormones like estrogen and progesterone regulate the system.  ",link:"https://docs.google.com/presentation/d/1Sb8Z5XWpdE2X-17sQIWc9N1IHaWbYWPjLlIsiJqxZAw/edit?usp=sharing",tags:["Medicine","Histology","Gynecology"]},{title:"FAST Scan In Trauma",imageSrc:gce,description:"Learn about this life-saving diagnostic tool that uses ultrasound to quickly assess for internal bleeding and other injuries in trauma patients. With its fast and accurate results, FAST Scan has revolutionized the way medical professionals approach trauma care. Learn more over here! ",link:"https://docs.google.com/presentation/d/1S5k08io_TIIwPIKBsgf71VVxuhN69q4yGI_-DlFqLNA/edit?usp=sharing",tags:["Medicine","Trauma","Primary Assessment"]},{title:"The Human Eye",imageSrc:vce,description:"The human eye is a complex organ consisting of the cornea, iris, pupil, lens, retina, and optic nerve. It allows us to see by focusing light onto the retina, which contains photoreceptor cells that convert light into electrical signals sent to the brain.",link:"https://docs.google.com/presentation/d/16FotaO-hUUqdku0IrBqdUrx_JvYZ18BFvWunbh-Rs84/edit?usp=sharing",tags:["Medicine","Ophtalmology","Eye"]}],yce="/assets/port-8b761f2c.JPG",xce="/assets/game-5b4daefd.JPG",bce="/assets/invoice-8d197b45.JPG",wce="/assets/bookstore-26dd92a5.JPG",_ce="/assets/AyKash-4c157c3b.jpg",Sce="/assets/avatar-c0d485ff.JPG",gC=[{title:"Ay Kash -Under The Starry Afghan Sky",imageSrc:_ce,description:"Ay Kash is a theatre and art performance featuring the work of eleven young women from Afghanistan.",link:"http://www.underthestarryafghansky.com/",tags:["Tailwindcss","JS","HTML"]},{title:"Invoice App",imageSrc:bce,description:"Invoice App is a project that creates invoices for goods or services using Bootstrap for responsive design and JavaScript for functionality.",link:"https://akbarirazia.github.io/invoice-app/",tags:["Vanilla","Bootstrap","JS"]},{title:"My Avatar",imageSrc:Sce,description:"My Avatar is a 3D website portraying the creator's avatar using various 3D tools such as Blender, Three JS, and React JS.",link:"https://my-avatar-xi.vercel.app/",tags:["ReactJS","ThreeJS","blender"]},{title:"Bookstore Landing Page",imageSrc:wce,description:"Bookstore Landing Page is a responsive landing page for book lovers worldwide, created using Tailwind CSS.",link:"https://akbarirazia.github.io/Bookstore-Landing-Page/",tags:["Tailwindcss","RWD","HTML"]},{title:"Personal Portfolio",imageSrc:yce,description:"Personal Portfolio is a portfolio page containing personal information and contact details, created using Tailwind CSS and JavaScript.",link:"https://akbarirazia.github.io/portfolio/",tags:["Tailwindcss","HTML","RWD"]},{title:"Rock, Paper, Scissors Game",imageSrc:xce,description:"Rock, Paper, Scissors Game is a classic hand gesture game using JavaScript to play against the computer.",link:"https://3w17p8.csb.app/",tags:["Game","JavaScript","HTML"]}];function Ece({onchange:e,value:t}){return Q(ad,{children:Q("div",{className:"searchBox",style:{display:"flex",justifyContent:"center"},children:Q("input",{value:t,className:"searchInput",type:"text",name:"",placeholder:"Search",style:{padding:"0.8rem",display:"block",margin:"0"},onChange:e})})})}function Mce({children:e,index:t,style:r}){const i=X.useRef(null);return X.useEffect(()=>{Ii(i,t+1,0,"play",100,0,0,0)}),Q("span",{className:"inline-block bg-gray-200 rounded-full px-3 py-1 text-sm font-semibold text-gray-700 mr-2 tag",ref:i,style:r,children:ct("small",{children:["#",e]})})}function Cce(e){return qf({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"}}]})(e)}function Ace({title:e,description:t,img:r,tags:i,link:n,delay:a}){const s=localStorage.getItem("isDark")==="true",o={color:"black",textShadow:"none"},l=X.useRef(null);return X.useEffect(()=>{Ii(l,1,0,"play",100,0,a/9,0)}),Q(ad,{children:Q("div",{className:"cont max-w-sm",ref:l,children:ct("div",{className:" rounded overflow-hidden shadow-lg gray div",children:[Q("img",{className:"w-full",src:r,alt:e}),ct("div",{className:"px-6 py-4",children:[Q("div",{className:"font-bold text-xl mb-2 card colorful",children:e}),Q("p",{className:"text-gray-700 text-base ",children:t}),Q("div",{children:ct("a",{href:n,children:[Q("span",{children:"View Project "}),Q("span",{children:Q(Cce,{})})]})})]}),Q("div",{className:"px-6 py-4",children:i.map((u,h)=>Q(Mce,{index:h,style:s?o:{},children:u},h))})]})})})}function Tce(e){return qf({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"}}]})(e)}function Pce({onFilter:e}){const[t,r]=X.useState("Web Development");function i(n){r(n.target.dataset.value),e(n.target.dataset.value)}return ct("div",{className:"dropdown",children:[Q(V_,{children:ct("div",{className:"chevron",children:[t," ",Q("span",{children:Q(Tce,{style:{display:"block"}})})]})}),ct("div",{className:"dropdown-content",children:[Q("a",{"data-value":"All Portfolios",onClick:i,children:"All Portfolios"}),Q("a",{"data-value":"Medical",onClick:i,children:"Medical"}),Q("a",{"data-value":"Web Development",onClick:i,children:"Web Development"})]})]})}var GW={},pE={},WW={exports:{}};/**
 * chroma.js - JavaScript library for color conversions
 *
 * Copyright (c) 2011-2019, Gregor Aisch
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 * list of conditions and the following disclaimer.
 *
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 * this list of conditions and the following disclaimer in the documentation
 * and/or other materials provided with the distribution.
 *
 * 3. The name Gregor Aisch may not be used to endorse or promote products
 * derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * -------------------------------------------------------
 *
 * chroma.js includes colors from colorbrewer2.org, which are released under
 * the following license:
 *
 * Copyright (c) 2002 Cynthia Brewer, Mark Harrower,
 * and The Pennsylvania State University.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
 * either express or implied. See the License for the specific
 * language governing permissions and limitations under the License.
 *
 * ------------------------------------------------------
 *
 * Named colors are taken from X11 Color Names.
 * http://www.w3.org/TR/css3-color/#svg-color
 *
 * @preserve
 */(function(e,t){(function(r,i){e.exports=i()})(zm,function(){for(var r=function(A,D,N){return D===void 0&&(D=0),N===void 0&&(N=1),A<D?D:A>N?N:A},i=r,n=function(A){A._clipped=!1,A._unclipped=A.slice(0);for(var D=0;D<=3;D++)D<3?((A[D]<0||A[D]>255)&&(A._clipped=!0),A[D]=i(A[D],0,255)):D===3&&(A[D]=i(A[D],0,1));return A},a={},s=0,o=["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"];s<o.length;s+=1){var l=o[s];a["[object "+l+"]"]=l.toLowerCase()}var u=function(A){return a[Object.prototype.toString.call(A)]||"object"},h=u,c=function(A,D){return D===void 0&&(D=null),A.length>=3?Array.prototype.slice.call(A):h(A[0])=="object"&&D?D.split("").filter(function(N){return A[0][N]!==void 0}).map(function(N){return A[0][N]}):A[0]},d=u,f=function(A){if(A.length<2)return null;var D=A.length-1;return d(A[D])=="string"?A[D].toLowerCase():null},m=Math.PI,p={clip_rgb:n,limit:r,type:u,unpack:c,last:f,PI:m,TWOPI:m*2,PITHIRD:m/3,DEG2RAD:m/180,RAD2DEG:180/m},g={format:{},autodetect:[]},v=p.last,y=p.clip_rgb,x=p.type,b=g,_=function(){for(var D=[],N=arguments.length;N--;)D[N]=arguments[N];var Y=this;if(x(D[0])==="object"&&D[0].constructor&&D[0].constructor===this.constructor)return D[0];var ne=v(D),oe=!1;if(!ne){oe=!0,b.sorted||(b.autodetect=b.autodetect.sort(function(Ue,rt){return rt.p-Ue.p}),b.sorted=!0);for(var ee=0,pe=b.autodetect;ee<pe.length;ee+=1){var ve=pe[ee];if(ne=ve.test.apply(ve,D),ne)break}}if(b.format[ne]){var Oe=b.format[ne].apply(null,oe?D:D.slice(0,-1));Y._rgb=y(Oe)}else throw new Error("unknown format: "+D);Y._rgb.length===3&&Y._rgb.push(1)};_.prototype.toString=function(){return x(this.hex)=="function"?this.hex():"["+this._rgb.join(",")+"]"};var w=_,E=function(){for(var A=[],D=arguments.length;D--;)A[D]=arguments[D];return new(Function.prototype.bind.apply(E.Color,[null].concat(A)))};E.Color=w,E.version="2.4.2";var S=E,C=p.unpack,M=Math.max,P=function(){for(var A=[],D=arguments.length;D--;)A[D]=arguments[D];var N=C(A,"rgb"),Y=N[0],ne=N[1],oe=N[2];Y=Y/255,ne=ne/255,oe=oe/255;var ee=1-M(Y,M(ne,oe)),pe=ee<1?1/(1-ee):0,ve=(1-Y-ee)*pe,Oe=(1-ne-ee)*pe,Ue=(1-oe-ee)*pe;return[ve,Oe,Ue,ee]},I=P,k=p.unpack,L=function(){for(var A=[],D=arguments.length;D--;)A[D]=arguments[D];A=k(A,"cmyk");var N=A[0],Y=A[1],ne=A[2],oe=A[3],ee=A.length>4?A[4]:1;return oe===1?[0,0,0,ee]:[N>=1?0:255*(1-N)*(1-oe),Y>=1?0:255*(1-Y)*(1-oe),ne>=1?0:255*(1-ne)*(1-oe),ee]},O=L,F=S,z=w,B=g,V=p.unpack,R=p.type,H=I;z.prototype.cmyk=function(){return H(this._rgb)},F.cmyk=function(){for(var A=[],D=arguments.length;D--;)A[D]=arguments[D];return new(Function.prototype.bind.apply(z,[null].concat(A,["cmyk"])))},B.format.cmyk=O,B.autodetect.push({p:2,test:function(){for(var A=[],D=arguments.length;D--;)A[D]=arguments[D];if(A=V(A,"cmyk"),R(A)==="array"&&A.length===4)return"cmyk"}});var W=p.unpack,te=p.last,G=function(A){return Math.round(A*100)/100},ie=function(){for(var A=[],D=arguments.length;D--;)A[D]=arguments[D];var N=W(A,"hsla"),Y=te(A)||"lsa";return N[0]=G(N[0]||0),N[1]=G(N[1]*100)+"%",N[2]=G(N[2]*100)+"%",Y==="hsla"||N.length>3&&N[3]<1?(N[3]=N.length>3?N[3]:1,Y="hsla"):N.length=3,Y+"("+N.join(",")+")"},q=ie,le=p.unpack,ae=function(){for(var A=[],D=arguments.length;D--;)A[D]=arguments[D];A=le(A,"rgba");var N=A[0],Y=A[1],ne=A[2];N/=255,Y/=255,ne/=255;var oe=Math.min(N,Y,ne),ee=Math.max(N,Y,ne),pe=(ee+oe)/2,ve,Oe;return ee===oe?(ve=0,Oe=Number.NaN):ve=pe<.5?(ee-oe)/(ee+oe):(ee-oe)/(2-ee-oe),N==ee?Oe=(Y-ne)/(ee-oe):Y==ee?Oe=2+(ne-N)/(ee-oe):ne==ee&&(Oe=4+(N-Y)/(ee-oe)),Oe*=60,Oe<0&&(Oe+=360),A.length>3&&A[3]!==void 0?[Oe,ve,pe,A[3]]:[Oe,ve,pe]},Z=ae,he=p.unpack,ge=p.last,xe=q,ye=Z,Ne=Math.round,Re=function(){for(var A=[],D=arguments.length;D--;)A[D]=arguments[D];var N=he(A,"rgba"),Y=ge(A)||"rgb";return Y.substr(0,3)=="hsl"?xe(ye(N),Y):(N[0]=Ne(N[0]),N[1]=Ne(N[1]),N[2]=Ne(N[2]),(Y==="rgba"||N.length>3&&N[3]<1)&&(N[3]=N.length>3?N[3]:1,Y="rgba"),Y+"("+N.slice(0,Y==="rgb"?3:4).join(",")+")")},qe=Re,se=p.unpack,ke=Math.round,Be=function(){for(var A,D=[],N=arguments.length;N--;)D[N]=arguments[N];D=se(D,"hsl");var Y=D[0],ne=D[1],oe=D[2],ee,pe,ve;if(ne===0)ee=pe=ve=oe*255;else{var Oe=[0,0,0],Ue=[0,0,0],rt=oe<.5?oe*(1+ne):oe+ne-oe*ne,je=2*oe-rt,pt=Y/360;Oe[0]=pt+1/3,Oe[1]=pt,Oe[2]=pt-1/3;for(var dt=0;dt<3;dt++)Oe[dt]<0&&(Oe[dt]+=1),Oe[dt]>1&&(Oe[dt]-=1),6*Oe[dt]<1?Ue[dt]=je+(rt-je)*6*Oe[dt]:2*Oe[dt]<1?Ue[dt]=rt:3*Oe[dt]<2?Ue[dt]=je+(rt-je)*(2/3-Oe[dt])*6:Ue[dt]=je;A=[ke(Ue[0]*255),ke(Ue[1]*255),ke(Ue[2]*255)],ee=A[0],pe=A[1],ve=A[2]}return D.length>3?[ee,pe,ve,D[3]]:[ee,pe,ve,1]},at=Be,Ge=at,$=g,U=/^rgb\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*\)$/,fe=/^rgba\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*,\s*([01]|[01]?\.\d+)\)$/,Te=/^rgb\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,Ae=/^rgba\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,Fe=/^hsl\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,et=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,Pe=Math.round,we=function(A){A=A.toLowerCase().trim();var D;if($.format.named)try{return $.format.named(A)}catch{}if(D=A.match(U)){for(var N=D.slice(1,4),Y=0;Y<3;Y++)N[Y]=+N[Y];return N[3]=1,N}if(D=A.match(fe)){for(var ne=D.slice(1,5),oe=0;oe<4;oe++)ne[oe]=+ne[oe];return ne}if(D=A.match(Te)){for(var ee=D.slice(1,4),pe=0;pe<3;pe++)ee[pe]=Pe(ee[pe]*2.55);return ee[3]=1,ee}if(D=A.match(Ae)){for(var ve=D.slice(1,5),Oe=0;Oe<3;Oe++)ve[Oe]=Pe(ve[Oe]*2.55);return ve[3]=+ve[3],ve}if(D=A.match(Fe)){var Ue=D.slice(1,4);Ue[1]*=.01,Ue[2]*=.01;var rt=Ge(Ue);return rt[3]=1,rt}if(D=A.match(et)){var je=D.slice(1,4);je[1]*=.01,je[2]*=.01;var pt=Ge(je);return pt[3]=+D[4],pt}};we.test=function(A){return U.test(A)||fe.test(A)||Te.test(A)||Ae.test(A)||Fe.test(A)||et.test(A)};var Ze=we,Ke=S,st=w,xt=g,vt=p.type,$t=qe,ar=Ze;st.prototype.css=function(A){return $t(this._rgb,A)},Ke.css=function(){for(var A=[],D=arguments.length;D--;)A[D]=arguments[D];return new(Function.prototype.bind.apply(st,[null].concat(A,["css"])))},xt.format.css=ar,xt.autodetect.push({p:5,test:function(A){for(var D=[],N=arguments.length-1;N-- >0;)D[N]=arguments[N+1];if(!D.length&&vt(A)==="string"&&ar.test(A))return"css"}});var Or=w,J=S,Me=g,De=p.unpack;Me.format.gl=function(){for(var A=[],D=arguments.length;D--;)A[D]=arguments[D];var N=De(A,"rgba");return N[0]*=255,N[1]*=255,N[2]*=255,N},J.gl=function(){for(var A=[],D=arguments.length;D--;)A[D]=arguments[D];return new(Function.prototype.bind.apply(Or,[null].concat(A,["gl"])))},Or.prototype.gl=function(){var A=this._rgb;return[A[0]/255,A[1]/255,A[2]/255,A[3]]};var We=p.unpack,gt=function(){for(var A=[],D=arguments.length;D--;)A[D]=arguments[D];var N=We(A,"rgb"),Y=N[0],ne=N[1],oe=N[2],ee=Math.min(Y,ne,oe),pe=Math.max(Y,ne,oe),ve=pe-ee,Oe=ve*100/255,Ue=ee/(255-ve)*100,rt;return ve===0?rt=Number.NaN:(Y===pe&&(rt=(ne-oe)/ve),ne===pe&&(rt=2+(oe-Y)/ve),oe===pe&&(rt=4+(Y-ne)/ve),rt*=60,rt<0&&(rt+=360)),[rt,Oe,Ue]},jt=gt,ri=p.unpack,Zr=Math.floor,Pt=function(){for(var A,D,N,Y,ne,oe,ee=[],pe=arguments.length;pe--;)ee[pe]=arguments[pe];ee=ri(ee,"hcg");var ve=ee[0],Oe=ee[1],Ue=ee[2],rt,je,pt;Ue=Ue*255;var dt=Oe*255;if(Oe===0)rt=je=pt=Ue;else{ve===360&&(ve=0),ve>360&&(ve-=360),ve<0&&(ve+=360),ve/=60;var tr=Zr(ve),hr=ve-tr,Mr=Ue*(1-Oe),kr=Mr+dt*(1-hr),Xn=Mr+dt*hr,Rn=Mr+dt;switch(tr){case 0:A=[Rn,Xn,Mr],rt=A[0],je=A[1],pt=A[2];break;case 1:D=[kr,Rn,Mr],rt=D[0],je=D[1],pt=D[2];break;case 2:N=[Mr,Rn,Xn],rt=N[0],je=N[1],pt=N[2];break;case 3:Y=[Mr,kr,Rn],rt=Y[0],je=Y[1],pt=Y[2];break;case 4:ne=[Xn,Mr,Rn],rt=ne[0],je=ne[1],pt=ne[2];break;case 5:oe=[Rn,Mr,kr],rt=oe[0],je=oe[1],pt=oe[2];break}}return[rt,je,pt,ee.length>3?ee[3]:1]},Je=Pt,qt=p.unpack,ur=p.type,ut=S,Jt=w,Dt=g,Zt=jt;Jt.prototype.hcg=function(){return Zt(this._rgb)},ut.hcg=function(){for(var A=[],D=arguments.length;D--;)A[D]=arguments[D];return new(Function.prototype.bind.apply(Jt,[null].concat(A,["hcg"])))},Dt.format.hcg=Je,Dt.autodetect.push({p:1,test:function(){for(var A=[],D=arguments.length;D--;)A[D]=arguments[D];if(A=qt(A,"hcg"),ur(A)==="array"&&A.length===3)return"hcg"}});var j=p.unpack,ce=p.last,be=Math.round,de=function(){for(var A=[],D=arguments.length;D--;)A[D]=arguments[D];var N=j(A,"rgba"),Y=N[0],ne=N[1],oe=N[2],ee=N[3],pe=ce(A)||"auto";ee===void 0&&(ee=1),pe==="auto"&&(pe=ee<1?"rgba":"rgb"),Y=be(Y),ne=be(ne),oe=be(oe);var ve=Y<<16|ne<<8|oe,Oe="000000"+ve.toString(16);Oe=Oe.substr(Oe.length-6);var Ue="0"+be(ee*255).toString(16);switch(Ue=Ue.substr(Ue.length-2),pe.toLowerCase()){case"rgba":return"#"+Oe+Ue;case"argb":return"#"+Ue+Oe;default:return"#"+Oe}},Se=de,Ye=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,tt=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,Ot=function(A){if(A.match(Ye)){(A.length===4||A.length===7)&&(A=A.substr(1)),A.length===3&&(A=A.split(""),A=A[0]+A[0]+A[1]+A[1]+A[2]+A[2]);var D=parseInt(A,16),N=D>>16,Y=D>>8&255,ne=D&255;return[N,Y,ne,1]}if(A.match(tt)){(A.length===5||A.length===9)&&(A=A.substr(1)),A.length===4&&(A=A.split(""),A=A[0]+A[0]+A[1]+A[1]+A[2]+A[2]+A[3]+A[3]);var oe=parseInt(A,16),ee=oe>>24&255,pe=oe>>16&255,ve=oe>>8&255,Oe=Math.round((oe&255)/255*100)/100;return[ee,pe,ve,Oe]}throw new Error("unknown hex color: "+A)},yt=Ot,Xt=S,Ft=w,Nt=p.type,cr=g,Ir=Se;Ft.prototype.hex=function(A){return Ir(this._rgb,A)},Xt.hex=function(){for(var A=[],D=arguments.length;D--;)A[D]=arguments[D];return new(Function.prototype.bind.apply(Ft,[null].concat(A,["hex"])))},cr.format.hex=yt,cr.autodetect.push({p:4,test:function(A){for(var D=[],N=arguments.length-1;N-- >0;)D[N]=arguments[N+1];if(!D.length&&Nt(A)==="string"&&[3,4,5,6,7,8,9].indexOf(A.length)>=0)return"hex"}});var gn=p.unpack,Ca=p.TWOPI,er=Math.min,_t=Math.sqrt,oa=Math.acos,Ou=function(){for(var A=[],D=arguments.length;D--;)A[D]=arguments[D];var N=gn(A,"rgb"),Y=N[0],ne=N[1],oe=N[2];Y/=255,ne/=255,oe/=255;var ee,pe=er(Y,ne,oe),ve=(Y+ne+oe)/3,Oe=ve>0?1-pe/ve:0;return Oe===0?ee=NaN:(ee=(Y-ne+(Y-oe))/2,ee/=_t((Y-ne)*(Y-ne)+(Y-oe)*(ne-oe)),ee=oa(ee),oe>ne&&(ee=Ca-ee),ee/=Ca),[ee*360,Oe,ve]},so=Ou,Dl=p.unpack,Ji=p.limit,la=p.TWOPI,li=p.PITHIRD,en=Math.cos,Cv=function(){for(var A=[],D=arguments.length;D--;)A[D]=arguments[D];A=Dl(A,"hsi");var N=A[0],Y=A[1],ne=A[2],oe,ee,pe;return isNaN(N)&&(N=0),isNaN(Y)&&(Y=0),N>360&&(N-=360),N<0&&(N+=360),N/=360,N<1/3?(pe=(1-Y)/3,oe=(1+Y*en(la*N)/en(li-la*N))/3,ee=1-(pe+oe)):N<2/3?(N-=1/3,oe=(1-Y)/3,ee=(1+Y*en(la*N)/en(li-la*N))/3,pe=1-(oe+ee)):(N-=2/3,ee=(1-Y)/3,pe=(1+Y*en(la*N)/en(li-la*N))/3,oe=1-(ee+pe)),oe=Ji(ne*oe*3),ee=Ji(ne*ee*3),pe=Ji(ne*pe*3),[oe*255,ee*255,pe*255,A.length>3?A[3]:1]},Aa=Cv,Av=p.unpack,KE=p.type,sx=S,Kk=w,Zk=g,tQ=so;Kk.prototype.hsi=function(){return tQ(this._rgb)},sx.hsi=function(){for(var A=[],D=arguments.length;D--;)A[D]=arguments[D];return new(Function.prototype.bind.apply(Kk,[null].concat(A,["hsi"])))},Zk.format.hsi=Aa,Zk.autodetect.push({p:2,test:function(){for(var A=[],D=arguments.length;D--;)A[D]=arguments[D];if(A=Av(A,"hsi"),KE(A)==="array"&&A.length===3)return"hsi"}});var rQ=p.unpack,iQ=p.type,nQ=S,Jk=w,eL=g,aQ=Z;Jk.prototype.hsl=function(){return aQ(this._rgb)},nQ.hsl=function(){for(var A=[],D=arguments.length;D--;)A[D]=arguments[D];return new(Function.prototype.bind.apply(Jk,[null].concat(A,["hsl"])))},eL.format.hsl=at,eL.autodetect.push({p:2,test:function(){for(var A=[],D=arguments.length;D--;)A[D]=arguments[D];if(A=rQ(A,"hsl"),iQ(A)==="array"&&A.length===3)return"hsl"}});var sQ=p.unpack,oQ=Math.min,lQ=Math.max,uQ=function(){for(var A=[],D=arguments.length;D--;)A[D]=arguments[D];A=sQ(A,"rgb");var N=A[0],Y=A[1],ne=A[2],oe=oQ(N,Y,ne),ee=lQ(N,Y,ne),pe=ee-oe,ve,Oe,Ue;return Ue=ee/255,ee===0?(ve=Number.NaN,Oe=0):(Oe=pe/ee,N===ee&&(ve=(Y-ne)/pe),Y===ee&&(ve=2+(ne-N)/pe),ne===ee&&(ve=4+(N-Y)/pe),ve*=60,ve<0&&(ve+=360)),[ve,Oe,Ue]},cQ=uQ,hQ=p.unpack,dQ=Math.floor,fQ=function(){for(var A,D,N,Y,ne,oe,ee=[],pe=arguments.length;pe--;)ee[pe]=arguments[pe];ee=hQ(ee,"hsv");var ve=ee[0],Oe=ee[1],Ue=ee[2],rt,je,pt;if(Ue*=255,Oe===0)rt=je=pt=Ue;else{ve===360&&(ve=0),ve>360&&(ve-=360),ve<0&&(ve+=360),ve/=60;var dt=dQ(ve),tr=ve-dt,hr=Ue*(1-Oe),Mr=Ue*(1-Oe*tr),kr=Ue*(1-Oe*(1-tr));switch(dt){case 0:A=[Ue,kr,hr],rt=A[0],je=A[1],pt=A[2];break;case 1:D=[Mr,Ue,hr],rt=D[0],je=D[1],pt=D[2];break;case 2:N=[hr,Ue,kr],rt=N[0],je=N[1],pt=N[2];break;case 3:Y=[hr,Mr,Ue],rt=Y[0],je=Y[1],pt=Y[2];break;case 4:ne=[kr,hr,Ue],rt=ne[0],je=ne[1],pt=ne[2];break;case 5:oe=[Ue,hr,Mr],rt=oe[0],je=oe[1],pt=oe[2];break}}return[rt,je,pt,ee.length>3?ee[3]:1]},pQ=fQ,mQ=p.unpack,gQ=p.type,vQ=S,tL=w,rL=g,yQ=cQ;tL.prototype.hsv=function(){return yQ(this._rgb)},vQ.hsv=function(){for(var A=[],D=arguments.length;D--;)A[D]=arguments[D];return new(Function.prototype.bind.apply(tL,[null].concat(A,["hsv"])))},rL.format.hsv=pQ,rL.autodetect.push({p:2,test:function(){for(var A=[],D=arguments.length;D--;)A[D]=arguments[D];if(A=mQ(A,"hsv"),gQ(A)==="array"&&A.length===3)return"hsv"}});var ox={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},ip=ox,xQ=p.unpack,iL=Math.pow,bQ=function(){for(var A=[],D=arguments.length;D--;)A[D]=arguments[D];var N=xQ(A,"rgb"),Y=N[0],ne=N[1],oe=N[2],ee=wQ(Y,ne,oe),pe=ee[0],ve=ee[1],Oe=ee[2],Ue=116*ve-16;return[Ue<0?0:Ue,500*(pe-ve),200*(ve-Oe)]},ZE=function(A){return(A/=255)<=.04045?A/12.92:iL((A+.055)/1.055,2.4)},JE=function(A){return A>ip.t3?iL(A,1/3):A/ip.t2+ip.t0},wQ=function(A,D,N){A=ZE(A),D=ZE(D),N=ZE(N);var Y=JE((.4124564*A+.3575761*D+.1804375*N)/ip.Xn),ne=JE((.2126729*A+.7151522*D+.072175*N)/ip.Yn),oe=JE((.0193339*A+.119192*D+.9503041*N)/ip.Zn);return[Y,ne,oe]},nL=bQ,np=ox,_Q=p.unpack,SQ=Math.pow,EQ=function(){for(var A=[],D=arguments.length;D--;)A[D]=arguments[D];A=_Q(A,"lab");var N=A[0],Y=A[1],ne=A[2],oe,ee,pe,ve,Oe,Ue;return ee=(N+16)/116,oe=isNaN(Y)?ee:ee+Y/500,pe=isNaN(ne)?ee:ee-ne/200,ee=np.Yn*tM(ee),oe=np.Xn*tM(oe),pe=np.Zn*tM(pe),ve=eM(3.2404542*oe-1.5371385*ee-.4985314*pe),Oe=eM(-.969266*oe+1.8760108*ee+.041556*pe),Ue=eM(.0556434*oe-.2040259*ee+1.0572252*pe),[ve,Oe,Ue,A.length>3?A[3]:1]},eM=function(A){return 255*(A<=.00304?12.92*A:1.055*SQ(A,1/2.4)-.055)},tM=function(A){return A>np.t1?A*A*A:np.t2*(A-np.t0)},aL=EQ,MQ=p.unpack,CQ=p.type,AQ=S,sL=w,oL=g,TQ=nL;sL.prototype.lab=function(){return TQ(this._rgb)},AQ.lab=function(){for(var A=[],D=arguments.length;D--;)A[D]=arguments[D];return new(Function.prototype.bind.apply(sL,[null].concat(A,["lab"])))},oL.format.lab=aL,oL.autodetect.push({p:2,test:function(){for(var A=[],D=arguments.length;D--;)A[D]=arguments[D];if(A=MQ(A,"lab"),CQ(A)==="array"&&A.length===3)return"lab"}});var PQ=p.unpack,DQ=p.RAD2DEG,OQ=Math.sqrt,IQ=Math.atan2,RQ=Math.round,kQ=function(){for(var A=[],D=arguments.length;D--;)A[D]=arguments[D];var N=PQ(A,"lab"),Y=N[0],ne=N[1],oe=N[2],ee=OQ(ne*ne+oe*oe),pe=(IQ(oe,ne)*DQ+360)%360;return RQ(ee*1e4)===0&&(pe=Number.NaN),[Y,ee,pe]},lL=kQ,LQ=p.unpack,BQ=nL,NQ=lL,zQ=function(){for(var A=[],D=arguments.length;D--;)A[D]=arguments[D];var N=LQ(A,"rgb"),Y=N[0],ne=N[1],oe=N[2],ee=BQ(Y,ne,oe),pe=ee[0],ve=ee[1],Oe=ee[2];return NQ(pe,ve,Oe)},FQ=zQ,UQ=p.unpack,jQ=p.DEG2RAD,VQ=Math.sin,HQ=Math.cos,GQ=function(){for(var A=[],D=arguments.length;D--;)A[D]=arguments[D];var N=UQ(A,"lch"),Y=N[0],ne=N[1],oe=N[2];return isNaN(oe)&&(oe=0),oe=oe*jQ,[Y,HQ(oe)*ne,VQ(oe)*ne]},uL=GQ,WQ=p.unpack,$Q=uL,YQ=aL,qQ=function(){for(var A=[],D=arguments.length;D--;)A[D]=arguments[D];A=WQ(A,"lch");var N=A[0],Y=A[1],ne=A[2],oe=$Q(N,Y,ne),ee=oe[0],pe=oe[1],ve=oe[2],Oe=YQ(ee,pe,ve),Ue=Oe[0],rt=Oe[1],je=Oe[2];return[Ue,rt,je,A.length>3?A[3]:1]},cL=qQ,XQ=p.unpack,QQ=cL,KQ=function(){for(var A=[],D=arguments.length;D--;)A[D]=arguments[D];var N=XQ(A,"hcl").reverse();return QQ.apply(void 0,N)},ZQ=KQ,JQ=p.unpack,eK=p.type,hL=S,lx=w,rM=g,dL=FQ;lx.prototype.lch=function(){return dL(this._rgb)},lx.prototype.hcl=function(){return dL(this._rgb).reverse()},hL.lch=function(){for(var A=[],D=arguments.length;D--;)A[D]=arguments[D];return new(Function.prototype.bind.apply(lx,[null].concat(A,["lch"])))},hL.hcl=function(){for(var A=[],D=arguments.length;D--;)A[D]=arguments[D];return new(Function.prototype.bind.apply(lx,[null].concat(A,["hcl"])))},rM.format.lch=cL,rM.format.hcl=ZQ,["lch","hcl"].forEach(function(A){return rM.autodetect.push({p:2,test:function(){for(var D=[],N=arguments.length;N--;)D[N]=arguments[N];if(D=JQ(D,A),eK(D)==="array"&&D.length===3)return A}})});var tK={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},fL=tK,rK=w,pL=g,iK=p.type,Tv=fL,nK=yt,aK=Se;rK.prototype.name=function(){for(var A=aK(this._rgb,"rgb"),D=0,N=Object.keys(Tv);D<N.length;D+=1){var Y=N[D];if(Tv[Y]===A)return Y.toLowerCase()}return A},pL.format.named=function(A){if(A=A.toLowerCase(),Tv[A])return nK(Tv[A]);throw new Error("unknown color name: "+A)},pL.autodetect.push({p:5,test:function(A){for(var D=[],N=arguments.length-1;N-- >0;)D[N]=arguments[N+1];if(!D.length&&iK(A)==="string"&&Tv[A.toLowerCase()])return"named"}});var sK=p.unpack,oK=function(){for(var A=[],D=arguments.length;D--;)A[D]=arguments[D];var N=sK(A,"rgb"),Y=N[0],ne=N[1],oe=N[2];return(Y<<16)+(ne<<8)+oe},lK=oK,uK=p.type,cK=function(A){if(uK(A)=="number"&&A>=0&&A<=16777215){var D=A>>16,N=A>>8&255,Y=A&255;return[D,N,Y,1]}throw new Error("unknown num color: "+A)},hK=cK,dK=S,mL=w,gL=g,fK=p.type,pK=lK;mL.prototype.num=function(){return pK(this._rgb)},dK.num=function(){for(var A=[],D=arguments.length;D--;)A[D]=arguments[D];return new(Function.prototype.bind.apply(mL,[null].concat(A,["num"])))},gL.format.num=hK,gL.autodetect.push({p:5,test:function(){for(var A=[],D=arguments.length;D--;)A[D]=arguments[D];if(A.length===1&&fK(A[0])==="number"&&A[0]>=0&&A[0]<=16777215)return"num"}});var mK=S,iM=w,vL=g,yL=p.unpack,xL=p.type,bL=Math.round;iM.prototype.rgb=function(A){return A===void 0&&(A=!0),A===!1?this._rgb.slice(0,3):this._rgb.slice(0,3).map(bL)},iM.prototype.rgba=function(A){return A===void 0&&(A=!0),this._rgb.slice(0,4).map(function(D,N){return N<3?A===!1?D:bL(D):D})},mK.rgb=function(){for(var A=[],D=arguments.length;D--;)A[D]=arguments[D];return new(Function.prototype.bind.apply(iM,[null].concat(A,["rgb"])))},vL.format.rgb=function(){for(var A=[],D=arguments.length;D--;)A[D]=arguments[D];var N=yL(A,"rgba");return N[3]===void 0&&(N[3]=1),N},vL.autodetect.push({p:3,test:function(){for(var A=[],D=arguments.length;D--;)A[D]=arguments[D];if(A=yL(A,"rgba"),xL(A)==="array"&&(A.length===3||A.length===4&&xL(A[3])=="number"&&A[3]>=0&&A[3]<=1))return"rgb"}});var ux=Math.log,gK=function(A){var D=A/100,N,Y,ne;return D<66?(N=255,Y=D<6?0:-155.25485562709179-.44596950469579133*(Y=D-2)+104.49216199393888*ux(Y),ne=D<20?0:-254.76935184120902+.8274096064007395*(ne=D-10)+115.67994401066147*ux(ne)):(N=351.97690566805693+.114206453784165*(N=D-55)-40.25366309332127*ux(N),Y=325.4494125711974+.07943456536662342*(Y=D-50)-28.0852963507957*ux(Y),ne=255),[N,Y,ne,1]},wL=gK,vK=wL,yK=p.unpack,xK=Math.round,bK=function(){for(var A=[],D=arguments.length;D--;)A[D]=arguments[D];for(var N=yK(A,"rgb"),Y=N[0],ne=N[2],oe=1e3,ee=4e4,pe=.4,ve;ee-oe>pe;){ve=(ee+oe)*.5;var Oe=vK(ve);Oe[2]/Oe[0]>=ne/Y?ee=ve:oe=ve}return xK(ve)},wK=bK,nM=S,cx=w,aM=g,_K=wK;cx.prototype.temp=cx.prototype.kelvin=cx.prototype.temperature=function(){return _K(this._rgb)},nM.temp=nM.kelvin=nM.temperature=function(){for(var A=[],D=arguments.length;D--;)A[D]=arguments[D];return new(Function.prototype.bind.apply(cx,[null].concat(A,["temp"])))},aM.format.temp=aM.format.kelvin=aM.format.temperature=wL;var SK=p.unpack,sM=Math.cbrt,EK=Math.pow,MK=Math.sign,CK=function(){for(var A=[],D=arguments.length;D--;)A[D]=arguments[D];var N=SK(A,"rgb"),Y=N[0],ne=N[1],oe=N[2],ee=[oM(Y/255),oM(ne/255),oM(oe/255)],pe=ee[0],ve=ee[1],Oe=ee[2],Ue=sM(.4122214708*pe+.5363325363*ve+.0514459929*Oe),rt=sM(.2119034982*pe+.6806995451*ve+.1073969566*Oe),je=sM(.0883024619*pe+.2817188376*ve+.6299787005*Oe);return[.2104542553*Ue+.793617785*rt-.0040720468*je,1.9779984951*Ue-2.428592205*rt+.4505937099*je,.0259040371*Ue+.7827717662*rt-.808675766*je]},_L=CK;function oM(A){var D=Math.abs(A);return D<.04045?A/12.92:(MK(A)||1)*EK((D+.055)/1.055,2.4)}var AK=p.unpack,hx=Math.pow,TK=Math.sign,PK=function(){for(var A=[],D=arguments.length;D--;)A[D]=arguments[D];A=AK(A,"lab");var N=A[0],Y=A[1],ne=A[2],oe=hx(N+.3963377774*Y+.2158037573*ne,3),ee=hx(N-.1055613458*Y-.0638541728*ne,3),pe=hx(N-.0894841775*Y-1.291485548*ne,3);return[255*lM(4.0767416621*oe-3.3077115913*ee+.2309699292*pe),255*lM(-1.2684380046*oe+2.6097574011*ee-.3413193965*pe),255*lM(-.0041960863*oe-.7034186147*ee+1.707614701*pe),A.length>3?A[3]:1]},SL=PK;function lM(A){var D=Math.abs(A);return D>.0031308?(TK(A)||1)*(1.055*hx(D,1/2.4)-.055):A*12.92}var DK=p.unpack,OK=p.type,IK=S,EL=w,ML=g,RK=_L;EL.prototype.oklab=function(){return RK(this._rgb)},IK.oklab=function(){for(var A=[],D=arguments.length;D--;)A[D]=arguments[D];return new(Function.prototype.bind.apply(EL,[null].concat(A,["oklab"])))},ML.format.oklab=SL,ML.autodetect.push({p:3,test:function(){for(var A=[],D=arguments.length;D--;)A[D]=arguments[D];if(A=DK(A,"oklab"),OK(A)==="array"&&A.length===3)return"oklab"}});var kK=p.unpack,LK=_L,BK=lL,NK=function(){for(var A=[],D=arguments.length;D--;)A[D]=arguments[D];var N=kK(A,"rgb"),Y=N[0],ne=N[1],oe=N[2],ee=LK(Y,ne,oe),pe=ee[0],ve=ee[1],Oe=ee[2];return BK(pe,ve,Oe)},zK=NK,FK=p.unpack,UK=uL,jK=SL,VK=function(){for(var A=[],D=arguments.length;D--;)A[D]=arguments[D];A=FK(A,"lch");var N=A[0],Y=A[1],ne=A[2],oe=UK(N,Y,ne),ee=oe[0],pe=oe[1],ve=oe[2],Oe=jK(ee,pe,ve),Ue=Oe[0],rt=Oe[1],je=Oe[2];return[Ue,rt,je,A.length>3?A[3]:1]},HK=VK,GK=p.unpack,WK=p.type,$K=S,CL=w,AL=g,YK=zK;CL.prototype.oklch=function(){return YK(this._rgb)},$K.oklch=function(){for(var A=[],D=arguments.length;D--;)A[D]=arguments[D];return new(Function.prototype.bind.apply(CL,[null].concat(A,["oklch"])))},AL.format.oklch=HK,AL.autodetect.push({p:3,test:function(){for(var A=[],D=arguments.length;D--;)A[D]=arguments[D];if(A=GK(A,"oklch"),WK(A)==="array"&&A.length===3)return"oklch"}});var TL=w,qK=p.type;TL.prototype.alpha=function(A,D){return D===void 0&&(D=!1),A!==void 0&&qK(A)==="number"?D?(this._rgb[3]=A,this):new TL([this._rgb[0],this._rgb[1],this._rgb[2],A],"rgb"):this._rgb[3]};var XK=w;XK.prototype.clipped=function(){return this._rgb._clipped||!1};var yd=w,QK=ox;yd.prototype.darken=function(A){A===void 0&&(A=1);var D=this,N=D.lab();return N[0]-=QK.Kn*A,new yd(N,"lab").alpha(D.alpha(),!0)},yd.prototype.brighten=function(A){return A===void 0&&(A=1),this.darken(-A)},yd.prototype.darker=yd.prototype.darken,yd.prototype.brighter=yd.prototype.brighten;var KK=w;KK.prototype.get=function(A){var D=A.split("."),N=D[0],Y=D[1],ne=this[N]();if(Y){var oe=N.indexOf(Y)-(N.substr(0,2)==="ok"?2:0);if(oe>-1)return ne[oe];throw new Error("unknown channel "+Y+" in mode "+N)}else return ne};var ap=w,ZK=p.type,JK=Math.pow,eZ=1e-7,tZ=20;ap.prototype.luminance=function(A){if(A!==void 0&&ZK(A)==="number"){if(A===0)return new ap([0,0,0,this._rgb[3]],"rgb");if(A===1)return new ap([255,255,255,this._rgb[3]],"rgb");var D=this.luminance(),N="rgb",Y=tZ,ne=function(ee,pe){var ve=ee.interpolate(pe,.5,N),Oe=ve.luminance();return Math.abs(A-Oe)<eZ||!Y--?ve:Oe>A?ne(ee,ve):ne(ve,pe)},oe=(D>A?ne(new ap([0,0,0]),this):ne(this,new ap([255,255,255]))).rgb();return new ap(oe.concat([this._rgb[3]]))}return rZ.apply(void 0,this._rgb.slice(0,3))};var rZ=function(A,D,N){return A=uM(A),D=uM(D),N=uM(N),.2126*A+.7152*D+.0722*N},uM=function(A){return A/=255,A<=.03928?A/12.92:JK((A+.055)/1.055,2.4)},Rs={},PL=w,DL=p.type,dx=Rs,OL=function(A,D,N){N===void 0&&(N=.5);for(var Y=[],ne=arguments.length-3;ne-- >0;)Y[ne]=arguments[ne+3];var oe=Y[0]||"lrgb";if(!dx[oe]&&!Y.length&&(oe=Object.keys(dx)[0]),!dx[oe])throw new Error("interpolation mode "+oe+" is not defined");return DL(A)!=="object"&&(A=new PL(A)),DL(D)!=="object"&&(D=new PL(D)),dx[oe](A,D,N).alpha(A.alpha()+N*(D.alpha()-A.alpha()))},IL=w,iZ=OL;IL.prototype.mix=IL.prototype.interpolate=function(A,D){D===void 0&&(D=.5);for(var N=[],Y=arguments.length-2;Y-- >0;)N[Y]=arguments[Y+2];return iZ.apply(void 0,[this,A,D].concat(N))};var RL=w;RL.prototype.premultiply=function(A){A===void 0&&(A=!1);var D=this._rgb,N=D[3];return A?(this._rgb=[D[0]*N,D[1]*N,D[2]*N,N],this):new RL([D[0]*N,D[1]*N,D[2]*N,N],"rgb")};var cM=w,nZ=ox;cM.prototype.saturate=function(A){A===void 0&&(A=1);var D=this,N=D.lch();return N[1]+=nZ.Kn*A,N[1]<0&&(N[1]=0),new cM(N,"lch").alpha(D.alpha(),!0)},cM.prototype.desaturate=function(A){return A===void 0&&(A=1),this.saturate(-A)};var kL=w,LL=p.type;kL.prototype.set=function(A,D,N){N===void 0&&(N=!1);var Y=A.split("."),ne=Y[0],oe=Y[1],ee=this[ne]();if(oe){var pe=ne.indexOf(oe)-(ne.substr(0,2)==="ok"?2:0);if(pe>-1){if(LL(D)=="string")switch(D.charAt(0)){case"+":ee[pe]+=+D;break;case"-":ee[pe]+=+D;break;case"*":ee[pe]*=+D.substr(1);break;case"/":ee[pe]/=+D.substr(1);break;default:ee[pe]=+D}else if(LL(D)==="number")ee[pe]=D;else throw new Error("unsupported value for Color.set");var ve=new kL(ee,ne);return N?(this._rgb=ve._rgb,this):ve}throw new Error("unknown channel "+oe+" in mode "+ne)}else return ee};var aZ=w,sZ=function(A,D,N){var Y=A._rgb,ne=D._rgb;return new aZ(Y[0]+N*(ne[0]-Y[0]),Y[1]+N*(ne[1]-Y[1]),Y[2]+N*(ne[2]-Y[2]),"rgb")};Rs.rgb=sZ;var oZ=w,hM=Math.sqrt,sp=Math.pow,lZ=function(A,D,N){var Y=A._rgb,ne=Y[0],oe=Y[1],ee=Y[2],pe=D._rgb,ve=pe[0],Oe=pe[1],Ue=pe[2];return new oZ(hM(sp(ne,2)*(1-N)+sp(ve,2)*N),hM(sp(oe,2)*(1-N)+sp(Oe,2)*N),hM(sp(ee,2)*(1-N)+sp(Ue,2)*N),"rgb")};Rs.lrgb=lZ;var uZ=w,cZ=function(A,D,N){var Y=A.lab(),ne=D.lab();return new uZ(Y[0]+N*(ne[0]-Y[0]),Y[1]+N*(ne[1]-Y[1]),Y[2]+N*(ne[2]-Y[2]),"lab")};Rs.lab=cZ;var BL=w,op=function(A,D,N,Y){var ne,oe,ee,pe;Y==="hsl"?(ee=A.hsl(),pe=D.hsl()):Y==="hsv"?(ee=A.hsv(),pe=D.hsv()):Y==="hcg"?(ee=A.hcg(),pe=D.hcg()):Y==="hsi"?(ee=A.hsi(),pe=D.hsi()):Y==="lch"||Y==="hcl"?(Y="hcl",ee=A.hcl(),pe=D.hcl()):Y==="oklch"&&(ee=A.oklch().reverse(),pe=D.oklch().reverse());var ve,Oe,Ue,rt,je,pt;(Y.substr(0,1)==="h"||Y==="oklch")&&(ne=ee,ve=ne[0],Ue=ne[1],je=ne[2],oe=pe,Oe=oe[0],rt=oe[1],pt=oe[2]);var dt,tr,hr,Mr;return!isNaN(ve)&&!isNaN(Oe)?(Oe>ve&&Oe-ve>180?Mr=Oe-(ve+360):Oe<ve&&ve-Oe>180?Mr=Oe+360-ve:Mr=Oe-ve,tr=ve+N*Mr):isNaN(ve)?isNaN(Oe)?tr=Number.NaN:(tr=Oe,(je==1||je==0)&&Y!="hsv"&&(dt=rt)):(tr=ve,(pt==1||pt==0)&&Y!="hsv"&&(dt=Ue)),dt===void 0&&(dt=Ue+N*(rt-Ue)),hr=je+N*(pt-je),Y==="oklch"?new BL([hr,dt,tr],Y):new BL([tr,dt,hr],Y)},hZ=op,NL=function(A,D,N){return hZ(A,D,N,"lch")};Rs.lch=NL,Rs.hcl=NL;var dZ=w,fZ=function(A,D,N){var Y=A.num(),ne=D.num();return new dZ(Y+N*(ne-Y),"num")};Rs.num=fZ;var pZ=op,mZ=function(A,D,N){return pZ(A,D,N,"hcg")};Rs.hcg=mZ;var gZ=op,vZ=function(A,D,N){return gZ(A,D,N,"hsi")};Rs.hsi=vZ;var yZ=op,xZ=function(A,D,N){return yZ(A,D,N,"hsl")};Rs.hsl=xZ;var bZ=op,wZ=function(A,D,N){return bZ(A,D,N,"hsv")};Rs.hsv=wZ;var _Z=w,SZ=function(A,D,N){var Y=A.oklab(),ne=D.oklab();return new _Z(Y[0]+N*(ne[0]-Y[0]),Y[1]+N*(ne[1]-Y[1]),Y[2]+N*(ne[2]-Y[2]),"oklab")};Rs.oklab=SZ;var EZ=op,MZ=function(A,D,N){return EZ(A,D,N,"oklch")};Rs.oklch=MZ;var dM=w,CZ=p.clip_rgb,fM=Math.pow,pM=Math.sqrt,mM=Math.PI,zL=Math.cos,FL=Math.sin,AZ=Math.atan2,TZ=function(A,D,N){D===void 0&&(D="lrgb"),N===void 0&&(N=null);var Y=A.length;N||(N=Array.from(new Array(Y)).map(function(){return 1}));var ne=Y/N.reduce(function(tr,hr){return tr+hr});if(N.forEach(function(tr,hr){N[hr]*=ne}),A=A.map(function(tr){return new dM(tr)}),D==="lrgb")return PZ(A,N);for(var oe=A.shift(),ee=oe.get(D),pe=[],ve=0,Oe=0,Ue=0;Ue<ee.length;Ue++)if(ee[Ue]=(ee[Ue]||0)*N[0],pe.push(isNaN(ee[Ue])?0:N[0]),D.charAt(Ue)==="h"&&!isNaN(ee[Ue])){var rt=ee[Ue]/180*mM;ve+=zL(rt)*N[0],Oe+=FL(rt)*N[0]}var je=oe.alpha()*N[0];A.forEach(function(tr,hr){var Mr=tr.get(D);je+=tr.alpha()*N[hr+1];for(var kr=0;kr<ee.length;kr++)if(!isNaN(Mr[kr]))if(pe[kr]+=N[hr+1],D.charAt(kr)==="h"){var Xn=Mr[kr]/180*mM;ve+=zL(Xn)*N[hr+1],Oe+=FL(Xn)*N[hr+1]}else ee[kr]+=Mr[kr]*N[hr+1]});for(var pt=0;pt<ee.length;pt++)if(D.charAt(pt)==="h"){for(var dt=AZ(Oe/pe[pt],ve/pe[pt])/mM*180;dt<0;)dt+=360;for(;dt>=360;)dt-=360;ee[pt]=dt}else ee[pt]=ee[pt]/pe[pt];return je/=Y,new dM(ee,D).alpha(je>.99999?1:je,!0)},PZ=function(A,D){for(var N=A.length,Y=[0,0,0,0],ne=0;ne<A.length;ne++){var oe=A[ne],ee=D[ne]/N,pe=oe._rgb;Y[0]+=fM(pe[0],2)*ee,Y[1]+=fM(pe[1],2)*ee,Y[2]+=fM(pe[2],2)*ee,Y[3]+=pe[3]*ee}return Y[0]=pM(Y[0]),Y[1]=pM(Y[1]),Y[2]=pM(Y[2]),Y[3]>.9999999&&(Y[3]=1),new dM(CZ(Y))},Go=S,lp=p.type,DZ=Math.pow,gM=function(A){var D="rgb",N=Go("#ccc"),Y=0,ne=[0,1],oe=[],ee=[0,0],pe=!1,ve=[],Oe=!1,Ue=0,rt=1,je=!1,pt={},dt=!0,tr=1,hr=function(Ve){if(Ve=Ve||["#fff","#000"],Ve&&lp(Ve)==="string"&&Go.brewer&&Go.brewer[Ve.toLowerCase()]&&(Ve=Go.brewer[Ve.toLowerCase()]),lp(Ve)==="array"){Ve.length===1&&(Ve=[Ve[0],Ve[0]]),Ve=Ve.slice(0);for(var Lt=0;Lt<Ve.length;Lt++)Ve[Lt]=Go(Ve[Lt]);oe.length=0;for(var sr=0;sr<Ve.length;sr++)oe.push(sr/(Ve.length-1))}return ss(),ve=Ve},Mr=function(Ve){if(pe!=null){for(var Lt=pe.length-1,sr=0;sr<Lt&&Ve>=pe[sr];)sr++;return sr-1}return 0},kr=function(Ve){return Ve},Xn=function(Ve){return Ve},Rn=function(Ve,Lt){var sr,rr;if(Lt==null&&(Lt=!1),isNaN(Ve)||Ve===null)return N;if(Lt)rr=Ve;else if(pe&&pe.length>2){var Qn=Mr(Ve);rr=Qn/(pe.length-2)}else rt!==Ue?rr=(Ve-Ue)/(rt-Ue):rr=1;rr=Xn(rr),Lt||(rr=kr(rr)),tr!==1&&(rr=DZ(rr,tr)),rr=ee[0]+rr*(1-ee[0]-ee[1]),rr=Math.min(1,Math.max(0,rr));var ui=Math.floor(rr*1e4);if(dt&&pt[ui])sr=pt[ui];else{if(lp(ve)==="array")for(var Cr=0;Cr<oe.length;Cr++){var Fr=oe[Cr];if(rr<=Fr){sr=ve[Cr];break}if(rr>=Fr&&Cr===oe.length-1){sr=ve[Cr];break}if(rr>Fr&&rr<oe[Cr+1]){rr=(rr-Fr)/(oe[Cr+1]-Fr),sr=Go.interpolate(ve[Cr],ve[Cr+1],rr,D);break}}else lp(ve)==="function"&&(sr=ve(rr));dt&&(pt[ui]=sr)}return sr},ss=function(){return pt={}};hr(A);var xr=function(Ve){var Lt=Go(Rn(Ve));return Oe&&Lt[Oe]?Lt[Oe]():Lt};return xr.classes=function(Ve){if(Ve!=null){if(lp(Ve)==="array")pe=Ve,ne=[Ve[0],Ve[Ve.length-1]];else{var Lt=Go.analyze(ne);Ve===0?pe=[Lt.min,Lt.max]:pe=Go.limits(Lt,"e",Ve)}return xr}return pe},xr.domain=function(Ve){if(!arguments.length)return ne;Ue=Ve[0],rt=Ve[Ve.length-1],oe=[];var Lt=ve.length;if(Ve.length===Lt&&Ue!==rt)for(var sr=0,rr=Array.from(Ve);sr<rr.length;sr+=1){var Qn=rr[sr];oe.push((Qn-Ue)/(rt-Ue))}else{for(var ui=0;ui<Lt;ui++)oe.push(ui/(Lt-1));if(Ve.length>2){var Cr=Ve.map(function(Ur,Hr){return Hr/(Ve.length-1)}),Fr=Ve.map(function(Ur){return(Ur-Ue)/(rt-Ue)});Fr.every(function(Ur,Hr){return Cr[Hr]===Ur})||(Xn=function(Ur){if(Ur<=0||Ur>=1)return Ur;for(var Hr=0;Ur>=Fr[Hr+1];)Hr++;var $o=(Ur-Fr[Hr])/(Fr[Hr+1]-Fr[Hr]),Fc=Cr[Hr]+$o*(Cr[Hr+1]-Cr[Hr]);return Fc})}}return ne=[Ue,rt],xr},xr.mode=function(Ve){return arguments.length?(D=Ve,ss(),xr):D},xr.range=function(Ve,Lt){return hr(Ve),xr},xr.out=function(Ve){return Oe=Ve,xr},xr.spread=function(Ve){return arguments.length?(Y=Ve,xr):Y},xr.correctLightness=function(Ve){return Ve==null&&(Ve=!0),je=Ve,ss(),je?kr=function(Lt){for(var sr=Rn(0,!0).lab()[0],rr=Rn(1,!0).lab()[0],Qn=sr>rr,ui=Rn(Lt,!0).lab()[0],Cr=sr+(rr-sr)*Lt,Fr=ui-Cr,Ur=0,Hr=1,$o=20;Math.abs(Fr)>.01&&$o-- >0;)(function(){return Qn&&(Fr*=-1),Fr<0?(Ur=Lt,Lt+=(Hr-Lt)*.5):(Hr=Lt,Lt+=(Ur-Lt)*.5),ui=Rn(Lt,!0).lab()[0],Fr=ui-Cr})();return Lt}:kr=function(Lt){return Lt},xr},xr.padding=function(Ve){return Ve!=null?(lp(Ve)==="number"&&(Ve=[Ve,Ve]),ee=Ve,xr):ee},xr.colors=function(Ve,Lt){arguments.length<2&&(Lt="hex");var sr=[];if(arguments.length===0)sr=ve.slice(0);else if(Ve===1)sr=[xr(.5)];else if(Ve>1){var rr=ne[0],Qn=ne[1]-rr;sr=OZ(0,Ve,!1).map(function(Hr){return xr(rr+Hr/(Ve-1)*Qn)})}else{A=[];var ui=[];if(pe&&pe.length>2)for(var Cr=1,Fr=pe.length,Ur=1<=Fr;Ur?Cr<Fr:Cr>Fr;Ur?Cr++:Cr--)ui.push((pe[Cr-1]+pe[Cr])*.5);else ui=ne;sr=ui.map(function(Hr){return xr(Hr)})}return Go[Lt]&&(sr=sr.map(function(Hr){return Hr[Lt]()})),sr},xr.cache=function(Ve){return Ve!=null?(dt=Ve,xr):dt},xr.gamma=function(Ve){return Ve!=null?(tr=Ve,xr):tr},xr.nodata=function(Ve){return Ve!=null?(N=Go(Ve),xr):N},xr};function OZ(A,D,N){for(var Y=[],ne=A<D,oe=N?ne?D+1:D-1:D,ee=A;ne?ee<oe:ee>oe;ne?ee++:ee--)Y.push(ee);return Y}var Pv=w,IZ=gM,RZ=function(A){for(var D=[1,1],N=1;N<A;N++){for(var Y=[1],ne=1;ne<=D.length;ne++)Y[ne]=(D[ne]||0)+D[ne-1];D=Y}return D},kZ=function(A){var D,N,Y,ne,oe,ee,pe;if(A=A.map(function(je){return new Pv(je)}),A.length===2)D=A.map(function(je){return je.lab()}),oe=D[0],ee=D[1],ne=function(je){var pt=[0,1,2].map(function(dt){return oe[dt]+je*(ee[dt]-oe[dt])});return new Pv(pt,"lab")};else if(A.length===3)N=A.map(function(je){return je.lab()}),oe=N[0],ee=N[1],pe=N[2],ne=function(je){var pt=[0,1,2].map(function(dt){return(1-je)*(1-je)*oe[dt]+2*(1-je)*je*ee[dt]+je*je*pe[dt]});return new Pv(pt,"lab")};else if(A.length===4){var ve;Y=A.map(function(je){return je.lab()}),oe=Y[0],ee=Y[1],pe=Y[2],ve=Y[3],ne=function(je){var pt=[0,1,2].map(function(dt){return(1-je)*(1-je)*(1-je)*oe[dt]+3*(1-je)*(1-je)*je*ee[dt]+3*(1-je)*je*je*pe[dt]+je*je*je*ve[dt]});return new Pv(pt,"lab")}}else if(A.length>=5){var Oe,Ue,rt;Oe=A.map(function(je){return je.lab()}),rt=A.length-1,Ue=RZ(rt),ne=function(je){var pt=1-je,dt=[0,1,2].map(function(tr){return Oe.reduce(function(hr,Mr,kr){return hr+Ue[kr]*Math.pow(pt,rt-kr)*Math.pow(je,kr)*Mr[tr]},0)});return new Pv(dt,"lab")}}else throw new RangeError("No point in running bezier with only one color.");return ne},LZ=function(A){var D=kZ(A);return D.scale=function(){return IZ(D)},D},vM=S,Wo=function(A,D,N){if(!Wo[N])throw new Error("unknown blend mode "+N);return Wo[N](A,D)},Nc=function(A){return function(D,N){var Y=vM(N).rgb(),ne=vM(D).rgb();return vM.rgb(A(Y,ne))}},zc=function(A){return function(D,N){var Y=[];return Y[0]=A(D[0],N[0]),Y[1]=A(D[1],N[1]),Y[2]=A(D[2],N[2]),Y}},BZ=function(A){return A},NZ=function(A,D){return A*D/255},zZ=function(A,D){return A>D?D:A},FZ=function(A,D){return A>D?A:D},UZ=function(A,D){return 255*(1-(1-A/255)*(1-D/255))},jZ=function(A,D){return D<128?2*A*D/255:255*(1-2*(1-A/255)*(1-D/255))},VZ=function(A,D){return 255*(1-(1-D/255)/(A/255))},HZ=function(A,D){return A===255?255:(A=255*(D/255)/(1-A/255),A>255?255:A)};Wo.normal=Nc(zc(BZ)),Wo.multiply=Nc(zc(NZ)),Wo.screen=Nc(zc(UZ)),Wo.overlay=Nc(zc(jZ)),Wo.darken=Nc(zc(zZ)),Wo.lighten=Nc(zc(FZ)),Wo.dodge=Nc(zc(HZ)),Wo.burn=Nc(zc(VZ));for(var GZ=Wo,yM=p.type,WZ=p.clip_rgb,$Z=p.TWOPI,YZ=Math.pow,qZ=Math.sin,XZ=Math.cos,UL=S,QZ=function(A,D,N,Y,ne){A===void 0&&(A=300),D===void 0&&(D=-1.5),N===void 0&&(N=1),Y===void 0&&(Y=1),ne===void 0&&(ne=[0,1]);var oe=0,ee;yM(ne)==="array"?ee=ne[1]-ne[0]:(ee=0,ne=[ne,ne]);var pe=function(ve){var Oe=$Z*((A+120)/360+D*ve),Ue=YZ(ne[0]+ee*ve,Y),rt=oe!==0?N[0]+ve*oe:N,je=rt*Ue*(1-Ue)/2,pt=XZ(Oe),dt=qZ(Oe),tr=Ue+je*(-.14861*pt+1.78277*dt),hr=Ue+je*(-.29227*pt-.90649*dt),Mr=Ue+je*(1.97294*pt);return UL(WZ([tr*255,hr*255,Mr*255,1]))};return pe.start=function(ve){return ve==null?A:(A=ve,pe)},pe.rotations=function(ve){return ve==null?D:(D=ve,pe)},pe.gamma=function(ve){return ve==null?Y:(Y=ve,pe)},pe.hue=function(ve){return ve==null?N:(N=ve,yM(N)==="array"?(oe=N[1]-N[0],oe===0&&(N=N[1])):oe=0,pe)},pe.lightness=function(ve){return ve==null?ne:(yM(ve)==="array"?(ne=ve,ee=ve[1]-ve[0]):(ne=[ve,ve],ee=0),pe)},pe.scale=function(){return UL.scale(pe)},pe.hue(N),pe},KZ=w,ZZ="0123456789abcdef",JZ=Math.floor,eJ=Math.random,tJ=function(){for(var A="#",D=0;D<6;D++)A+=ZZ.charAt(JZ(eJ()*16));return new KZ(A,"hex")},xM=u,jL=Math.log,rJ=Math.pow,iJ=Math.floor,nJ=Math.abs,VL=function(A,D){D===void 0&&(D=null);var N={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0};return xM(A)==="object"&&(A=Object.values(A)),A.forEach(function(Y){D&&xM(Y)==="object"&&(Y=Y[D]),Y!=null&&!isNaN(Y)&&(N.values.push(Y),N.sum+=Y,Y<N.min&&(N.min=Y),Y>N.max&&(N.max=Y),N.count+=1)}),N.domain=[N.min,N.max],N.limits=function(Y,ne){return HL(N,Y,ne)},N},HL=function(A,D,N){D===void 0&&(D="equal"),N===void 0&&(N=7),xM(A)=="array"&&(A=VL(A));var Y=A.min,ne=A.max,oe=A.values.sort(function(wM,_M){return wM-_M});if(N===1)return[Y,ne];var ee=[];if(D.substr(0,1)==="c"&&(ee.push(Y),ee.push(ne)),D.substr(0,1)==="e"){ee.push(Y);for(var pe=1;pe<N;pe++)ee.push(Y+pe/N*(ne-Y));ee.push(ne)}else if(D.substr(0,1)==="l"){if(Y<=0)throw new Error("Logarithmic scales are only possible for values > 0");var ve=Math.LOG10E*jL(Y),Oe=Math.LOG10E*jL(ne);ee.push(Y);for(var Ue=1;Ue<N;Ue++)ee.push(rJ(10,ve+Ue/N*(Oe-ve)));ee.push(ne)}else if(D.substr(0,1)==="q"){ee.push(Y);for(var rt=1;rt<N;rt++){var je=(oe.length-1)*rt/N,pt=iJ(je);if(pt===je)ee.push(oe[pt]);else{var dt=je-pt;ee.push(oe[pt]*(1-dt)+oe[pt+1]*dt)}}ee.push(ne)}else if(D.substr(0,1)==="k"){var tr,hr=oe.length,Mr=new Array(hr),kr=new Array(N),Xn=!0,Rn=0,ss=null;ss=[],ss.push(Y);for(var xr=1;xr<N;xr++)ss.push(Y+xr/N*(ne-Y));for(ss.push(ne);Xn;){for(var Ve=0;Ve<N;Ve++)kr[Ve]=0;for(var Lt=0;Lt<hr;Lt++)for(var sr=oe[Lt],rr=Number.MAX_VALUE,Qn=void 0,ui=0;ui<N;ui++){var Cr=nJ(ss[ui]-sr);Cr<rr&&(rr=Cr,Qn=ui),kr[Qn]++,Mr[Lt]=Qn}for(var Fr=new Array(N),Ur=0;Ur<N;Ur++)Fr[Ur]=null;for(var Hr=0;Hr<hr;Hr++)tr=Mr[Hr],Fr[tr]===null?Fr[tr]=oe[Hr]:Fr[tr]+=oe[Hr];for(var $o=0;$o<N;$o++)Fr[$o]*=1/kr[$o];Xn=!1;for(var Fc=0;Fc<N;Fc++)if(Fr[Fc]!==ss[Fc]){Xn=!0;break}ss=Fr,Rn++,Rn>200&&(Xn=!1)}for(var Uc={},up=0;up<N;up++)Uc[up]=[];for(var cp=0;cp<hr;cp++)tr=Mr[cp],Uc[tr].push(oe[cp]);for(var Ru=[],xd=0;xd<N;xd++)Ru.push(Uc[xd][0]),Ru.push(Uc[xd][Uc[xd].length-1]);Ru=Ru.sort(function(wM,_M){return wM-_M}),ee.push(Ru[0]);for(var Dv=1;Dv<Ru.length;Dv+=2){var bd=Ru[Dv];!isNaN(bd)&&ee.indexOf(bd)===-1&&ee.push(bd)}}return ee},GL={analyze:VL,limits:HL},WL=w,aJ=function(A,D){A=new WL(A),D=new WL(D);var N=A.luminance(),Y=D.luminance();return N>Y?(N+.05)/(Y+.05):(Y+.05)/(N+.05)},$L=w,Iu=Math.sqrt,tn=Math.pow,sJ=Math.min,oJ=Math.max,YL=Math.atan2,qL=Math.abs,fx=Math.cos,XL=Math.sin,lJ=Math.exp,QL=Math.PI,uJ=function(A,D,N,Y,ne){N===void 0&&(N=1),Y===void 0&&(Y=1),ne===void 0&&(ne=1);var oe=function(bd){return 360*bd/(2*QL)},ee=function(bd){return 2*QL*bd/360};A=new $L(A),D=new $L(D);var pe=Array.from(A.lab()),ve=pe[0],Oe=pe[1],Ue=pe[2],rt=Array.from(D.lab()),je=rt[0],pt=rt[1],dt=rt[2],tr=(ve+je)/2,hr=Iu(tn(Oe,2)+tn(Ue,2)),Mr=Iu(tn(pt,2)+tn(dt,2)),kr=(hr+Mr)/2,Xn=.5*(1-Iu(tn(kr,7)/(tn(kr,7)+tn(25,7)))),Rn=Oe*(1+Xn),ss=pt*(1+Xn),xr=Iu(tn(Rn,2)+tn(Ue,2)),Ve=Iu(tn(ss,2)+tn(dt,2)),Lt=(xr+Ve)/2,sr=oe(YL(Ue,Rn)),rr=oe(YL(dt,ss)),Qn=sr>=0?sr:sr+360,ui=rr>=0?rr:rr+360,Cr=qL(Qn-ui)>180?(Qn+ui+360)/2:(Qn+ui)/2,Fr=1-.17*fx(ee(Cr-30))+.24*fx(ee(2*Cr))+.32*fx(ee(3*Cr+6))-.2*fx(ee(4*Cr-63)),Ur=ui-Qn;Ur=qL(Ur)<=180?Ur:ui<=Qn?Ur+360:Ur-360,Ur=2*Iu(xr*Ve)*XL(ee(Ur)/2);var Hr=je-ve,$o=Ve-xr,Fc=1+.015*tn(tr-50,2)/Iu(20+tn(tr-50,2)),Uc=1+.045*Lt,up=1+.015*Lt*Fr,cp=30*lJ(-tn((Cr-275)/25,2)),Ru=2*Iu(tn(Lt,7)/(tn(Lt,7)+tn(25,7))),xd=-Ru*XL(2*ee(cp)),Dv=Iu(tn(Hr/(N*Fc),2)+tn($o/(Y*Uc),2)+tn(Ur/(ne*up),2)+xd*($o/(Y*Uc))*(Ur/(ne*up)));return oJ(0,sJ(100,Dv))},KL=w,cJ=function(A,D,N){N===void 0&&(N="lab"),A=new KL(A),D=new KL(D);var Y=A.get(N),ne=D.get(N),oe=0;for(var ee in Y){var pe=(Y[ee]||0)-(ne[ee]||0);oe+=pe*pe}return Math.sqrt(oe)},hJ=w,dJ=function(){for(var A=[],D=arguments.length;D--;)A[D]=arguments[D];try{return new(Function.prototype.bind.apply(hJ,[null].concat(A))),!0}catch{return!1}},ZL=S,JL=gM,fJ={cool:function(){return JL([ZL.hsl(180,1,.9),ZL.hsl(250,.7,.4)])},hot:function(){return JL(["#000","#f00","#ff0","#fff"]).mode("rgb")}},px={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},bM=0,eB=Object.keys(px);bM<eB.length;bM+=1){var tB=eB[bM];px[tB.toLowerCase()]=px[tB]}var pJ=px,In=S;In.average=TZ,In.bezier=LZ,In.blend=GZ,In.cubehelix=QZ,In.mix=In.interpolate=OL,In.random=tJ,In.scale=gM,In.analyze=GL.analyze,In.contrast=aJ,In.deltaE=uJ,In.distance=cJ,In.limits=GL.limits,In.valid=dJ,In.scales=fJ,In.colors=fL,In.brewer=pJ;var mJ=In;return mJ})})(WW);var Dce=WW.exports;function Ja(e){"@babel/helpers - typeof";return Ja=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ja(e)}function Qe(e){if(e===null||e===!0||e===!1)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function K(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function ue(e){K(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||Ja(e)==="object"&&t==="[object Date]"?new Date(e.getTime()):typeof e=="number"||t==="[object Number]"?new Date(e):((typeof e=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function _u(e,t){K(2,arguments);var r=ue(e),i=Qe(t);return isNaN(i)?new Date(NaN):(i&&r.setDate(r.getDate()+i),r)}function j1(e,t){K(2,arguments);var r=ue(e),i=Qe(t);if(isNaN(i))return new Date(NaN);if(!i)return r;var n=r.getDate(),a=new Date(r.getTime());a.setMonth(r.getMonth()+i+1,0);var s=a.getDate();return n>=s?a:(r.setFullYear(a.getFullYear(),a.getMonth(),n),r)}function sm(e,t){if(K(2,arguments),!t||Ja(t)!=="object")return new Date(NaN);var r=t.years?Qe(t.years):0,i=t.months?Qe(t.months):0,n=t.weeks?Qe(t.weeks):0,a=t.days?Qe(t.days):0,s=t.hours?Qe(t.hours):0,o=t.minutes?Qe(t.minutes):0,l=t.seconds?Qe(t.seconds):0,u=ue(e),h=i||r?j1(u,i+r*12):u,c=a||n?_u(h,a+n*7):h,d=o+s*60,f=l+d*60,m=f*1e3,p=new Date(c.getTime()+m);return p}function Jm(e){K(1,arguments);var t=ue(e),r=t.getDay();return r===0||r===6}function XI(e){return K(1,arguments),ue(e).getDay()===0}function $W(e){return K(1,arguments),ue(e).getDay()===6}function YW(e,t){K(2,arguments);var r=ue(e),i=Jm(r),n=Qe(t);if(isNaN(n))return new Date(NaN);var a=r.getHours(),s=n<0?-1:1,o=Qe(n/5);r.setDate(r.getDate()+o*7);for(var l=Math.abs(n%5);l>0;)r.setDate(r.getDate()+s),Jm(r)||(l-=1);return i&&Jm(r)&&n!==0&&($W(r)&&r.setDate(r.getDate()+(s<0?2:-1)),XI(r)&&r.setDate(r.getDate()+(s<0?1:-2))),r.setHours(a),r}function V1(e,t){K(2,arguments);var r=ue(e).getTime(),i=Qe(t);return new Date(r+i)}var Oce=36e5;function QI(e,t){K(2,arguments);var r=Qe(t);return V1(e,r*Oce)}var qW={};function mn(){return qW}function Ice(e){qW=e}function Uo(e,t){var r,i,n,a,s,o,l,u;K(1,arguments);var h=mn(),c=Qe((r=(i=(n=(a=t==null?void 0:t.weekStartsOn)!==null&&a!==void 0?a:t==null||(s=t.locale)===null||s===void 0||(o=s.options)===null||o===void 0?void 0:o.weekStartsOn)!==null&&n!==void 0?n:h.weekStartsOn)!==null&&i!==void 0?i:(l=h.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&r!==void 0?r:0);if(!(c>=0&&c<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var d=ue(e),f=d.getDay(),m=(f<c?7:0)+f-c;return d.setDate(d.getDate()-m),d.setHours(0,0,0,0),d}function Ac(e){return K(1,arguments),Uo(e,{weekStartsOn:1})}function Nf(e){K(1,arguments);var t=ue(e),r=t.getFullYear(),i=new Date(0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);var n=Ac(i),a=new Date(0);a.setFullYear(r,0,4),a.setHours(0,0,0,0);var s=Ac(a);return t.getTime()>=n.getTime()?r+1:t.getTime()>=s.getTime()?r:r-1}function td(e){K(1,arguments);var t=Nf(e),r=new Date(0);r.setFullYear(t,0,4),r.setHours(0,0,0,0);var i=Ac(r);return i}function es(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}function Ig(e){K(1,arguments);var t=ue(e);return t.setHours(0,0,0,0),t}var Rce=864e5;function xu(e,t){K(2,arguments);var r=Ig(e),i=Ig(t),n=r.getTime()-es(r),a=i.getTime()-es(i);return Math.round((n-a)/Rce)}function XW(e,t){K(2,arguments);var r=ue(e),i=Qe(t),n=xu(r,td(r)),a=new Date(0);return a.setFullYear(i,0,4),a.setHours(0,0,0,0),r=td(a),r.setDate(r.getDate()+n),r}function QW(e,t){K(2,arguments);var r=Qe(t);return XW(e,Nf(e)+r)}var kce=6e4;function KI(e,t){K(2,arguments);var r=Qe(t);return V1(e,r*kce)}function ZI(e,t){K(2,arguments);var r=Qe(t),i=r*3;return j1(e,i)}function KW(e,t){K(2,arguments);var r=Qe(t);return V1(e,r*1e3)}function mE(e,t){K(2,arguments);var r=Qe(t),i=r*7;return _u(e,i)}function ZW(e,t){K(2,arguments);var r=Qe(t);return j1(e,r*12)}function Lce(e,t,r){K(2,arguments);var i=ue(e==null?void 0:e.start).getTime(),n=ue(e==null?void 0:e.end).getTime(),a=ue(t==null?void 0:t.start).getTime(),s=ue(t==null?void 0:t.end).getTime();if(!(i<=n&&a<=s))throw new RangeError("Invalid interval");return r!=null&&r.inclusive?i<=s&&a<=n:i<s&&a<n}function JW(e){K(1,arguments);var t;if(e&&typeof e.forEach=="function")t=e;else if(Ja(e)==="object"&&e!==null)t=Array.prototype.slice.call(e);else return new Date(NaN);var r;return t.forEach(function(i){var n=ue(i);(r===void 0||r<n||isNaN(Number(n)))&&(r=n)}),r||new Date(NaN)}function e9(e){K(1,arguments);var t;if(e&&typeof e.forEach=="function")t=e;else if(Ja(e)==="object"&&e!==null)t=Array.prototype.slice.call(e);else return new Date(NaN);var r;return t.forEach(function(i){var n=ue(i);(r===void 0||r>n||isNaN(n.getDate()))&&(r=n)}),r||new Date(NaN)}function Bce(e,t){var r=t.start,i=t.end;return K(2,arguments),e9([JW([e,r]),i])}function Nce(e,t){K(2,arguments);var r=ue(e);if(isNaN(Number(r)))return NaN;var i=r.getTime(),n;t==null?n=[]:typeof t.forEach=="function"?n=t:n=Array.prototype.slice.call(t);var a,s;return n.forEach(function(o,l){var u=ue(o);if(isNaN(Number(u))){a=NaN,s=NaN;return}var h=Math.abs(i-u.getTime());(a==null||h<Number(s))&&(a=l,s=h)}),a}function zce(e,t){K(2,arguments);var r=ue(e);if(isNaN(Number(r)))return new Date(NaN);var i=r.getTime(),n;t==null?n=[]:typeof t.forEach=="function"?n=t:n=Array.prototype.slice.call(t);var a,s;return n.forEach(function(o){var l=ue(o);if(isNaN(Number(l))){a=new Date(NaN),s=NaN;return}var u=Math.abs(i-l.getTime());(a==null||u<Number(s))&&(a=l,s=u)}),a}function wl(e,t){K(2,arguments);var r=ue(e),i=ue(t),n=r.getTime()-i.getTime();return n<0?-1:n>0?1:n}function Fce(e,t){K(2,arguments);var r=ue(e),i=ue(t),n=r.getTime()-i.getTime();return n>0?-1:n<0?1:n}var JI=7,t9=365.2425,r9=Math.pow(10,8)*24*60*60*1e3,Qf=6e4,Kf=36e5,gE=1e3,Uce=-r9,eR=60,tR=3,rR=12,iR=4,H1=3600,vE=60,yE=H1*24,i9=yE*7,nR=yE*t9,aR=nR/12,n9=aR*3;function jce(e){K(1,arguments);var t=e/JI;return Math.floor(t)}function G1(e,t){K(2,arguments);var r=Ig(e),i=Ig(t);return r.getTime()===i.getTime()}function a9(e){return K(1,arguments),e instanceof Date||Ja(e)==="object"&&Object.prototype.toString.call(e)==="[object Date]"}function Tc(e){if(K(1,arguments),!a9(e)&&typeof e!="number")return!1;var t=ue(e);return!isNaN(Number(t))}function Vce(e,t){K(2,arguments);var r=ue(e),i=ue(t);if(!Tc(r)||!Tc(i))return NaN;var n=xu(r,i),a=n<0?-1:1,s=Qe(n/7),o=s*5;for(i=_u(i,s*7);!G1(r,i);)o+=Jm(i)?0:a,i=_u(i,a);return o===0?0:o}function s9(e,t){return K(2,arguments),Nf(e)-Nf(t)}var Hce=6048e5;function Gce(e,t){K(2,arguments);var r=Ac(e),i=Ac(t),n=r.getTime()-es(r),a=i.getTime()-es(i);return Math.round((n-a)/Hce)}function Y_(e,t){K(2,arguments);var r=ue(e),i=ue(t),n=r.getFullYear()-i.getFullYear(),a=r.getMonth()-i.getMonth();return n*12+a}function tD(e){K(1,arguments);var t=ue(e),r=Math.floor(t.getMonth()/3)+1;return r}function Uw(e,t){K(2,arguments);var r=ue(e),i=ue(t),n=r.getFullYear()-i.getFullYear(),a=tD(r)-tD(i);return n*4+a}var Wce=6048e5;function q_(e,t,r){K(2,arguments);var i=Uo(e,r),n=Uo(t,r),a=i.getTime()-es(i),s=n.getTime()-es(n);return Math.round((a-s)/Wce)}function my(e,t){K(2,arguments);var r=ue(e),i=ue(t);return r.getFullYear()-i.getFullYear()}function z4(e,t){var r=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return r<0?-1:r>0?1:r}function sR(e,t){K(2,arguments);var r=ue(e),i=ue(t),n=z4(r,i),a=Math.abs(xu(r,i));r.setDate(r.getDate()-n*a);var s=+(z4(r,i)===-n),o=n*(a-s);return o===0?0:o}function xE(e,t){return K(2,arguments),ue(e).getTime()-ue(t).getTime()}var F4={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(t){return t<0?Math.ceil(t):Math.floor(t)}},$ce="trunc";function ov(e){return e?F4[e]:F4[$ce]}function X_(e,t,r){K(2,arguments);var i=xE(e,t)/Kf;return ov(r==null?void 0:r.roundingMethod)(i)}function o9(e,t){K(2,arguments);var r=Qe(t);return QW(e,-r)}function Yce(e,t){K(2,arguments);var r=ue(e),i=ue(t),n=wl(r,i),a=Math.abs(s9(r,i));r=o9(r,n*a);var s=+(wl(r,i)===-n),o=n*(a-s);return o===0?0:o}function Q_(e,t,r){K(2,arguments);var i=xE(e,t)/Qf;return ov(r==null?void 0:r.roundingMethod)(i)}function oR(e){K(1,arguments);var t=ue(e);return t.setHours(23,59,59,999),t}function lR(e){K(1,arguments);var t=ue(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function l9(e){K(1,arguments);var t=ue(e);return oR(t).getTime()===lR(t).getTime()}function bE(e,t){K(2,arguments);var r=ue(e),i=ue(t),n=wl(r,i),a=Math.abs(Y_(r,i)),s;if(a<1)s=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-n*a);var o=wl(r,i)===-n;l9(ue(e))&&a===1&&wl(e,i)===1&&(o=!1),s=n*(a-Number(o))}return s===0?0:s}function qce(e,t,r){K(2,arguments);var i=bE(e,t)/3;return ov(r==null?void 0:r.roundingMethod)(i)}function eg(e,t,r){K(2,arguments);var i=xE(e,t)/1e3;return ov(r==null?void 0:r.roundingMethod)(i)}function Xce(e,t,r){K(2,arguments);var i=sR(e,t)/7;return ov(r==null?void 0:r.roundingMethod)(i)}function u9(e,t){K(2,arguments);var r=ue(e),i=ue(t),n=wl(r,i),a=Math.abs(my(r,i));r.setFullYear(1584),i.setFullYear(1584);var s=wl(r,i)===-n,o=n*(a-Number(s));return o===0?0:o}function c9(e,t){var r;K(1,arguments);var i=e||{},n=ue(i.start),a=ue(i.end),s=a.getTime();if(!(n.getTime()<=s))throw new RangeError("Invalid interval");var o=[],l=n;l.setHours(0,0,0,0);var u=Number((r=t==null?void 0:t.step)!==null&&r!==void 0?r:1);if(u<1||isNaN(u))throw new RangeError("`options.step` must be a number greater than 1");for(;l.getTime()<=s;)o.push(ue(l)),l.setDate(l.getDate()+u),l.setHours(0,0,0,0);return o}function Qce(e,t){var r;K(1,arguments);var i=e||{},n=ue(i.start),a=ue(i.end),s=n.getTime(),o=a.getTime();if(!(s<=o))throw new RangeError("Invalid interval");var l=[],u=n;u.setMinutes(0,0,0);var h=Number((r=t==null?void 0:t.step)!==null&&r!==void 0?r:1);if(h<1||isNaN(h))throw new RangeError("`options.step` must be a number greater than 1");for(;u.getTime()<=o;)l.push(ue(u)),u=QI(u,h);return l}function K_(e){K(1,arguments);var t=ue(e);return t.setSeconds(0,0),t}function Kce(e,t){var r;K(1,arguments);var i=K_(ue(e.start)),n=ue(e.end),a=i.getTime(),s=n.getTime();if(a>=s)throw new RangeError("Invalid interval");var o=[],l=i,u=Number((r=t==null?void 0:t.step)!==null&&r!==void 0?r:1);if(u<1||isNaN(u))throw new RangeError("`options.step` must be a number equal to or greater than 1");for(;l.getTime()<=s;)o.push(ue(l)),l=KI(l,u);return o}function Zce(e){K(1,arguments);var t=e||{},r=ue(t.start),i=ue(t.end),n=i.getTime(),a=[];if(!(r.getTime()<=n))throw new RangeError("Invalid interval");var s=r;for(s.setHours(0,0,0,0),s.setDate(1);s.getTime()<=n;)a.push(ue(s)),s.setMonth(s.getMonth()+1);return a}function s1(e){K(1,arguments);var t=ue(e),r=t.getMonth(),i=r-r%3;return t.setMonth(i,1),t.setHours(0,0,0,0),t}function Jce(e){K(1,arguments);var t=e||{},r=ue(t.start),i=ue(t.end),n=i.getTime();if(!(r.getTime()<=n))throw new RangeError("Invalid interval");var a=s1(r),s=s1(i);n=s.getTime();for(var o=[],l=a;l.getTime()<=n;)o.push(ue(l)),l=ZI(l,1);return o}function ehe(e,t){K(1,arguments);var r=e||{},i=ue(r.start),n=ue(r.end),a=n.getTime();if(!(i.getTime()<=a))throw new RangeError("Invalid interval");var s=Uo(i,t),o=Uo(n,t);s.setHours(15),o.setHours(15),a=o.getTime();for(var l=[],u=s;u.getTime()<=a;)u.setHours(0),l.push(ue(u)),u=mE(u,1),u.setHours(15);return l}function uR(e){K(1,arguments);for(var t=c9(e),r=[],i=0;i<t.length;){var n=t[i++];Jm(n)&&(r.push(n),XI(n)&&(i=i+5))}return r}function wE(e){K(1,arguments);var t=ue(e);return t.setDate(1),t.setHours(0,0,0,0),t}function the(e){K(1,arguments);var t=wE(e);if(isNaN(t.getTime()))throw new RangeError("The passed date is invalid");var r=lR(e);return uR({start:t,end:r})}function h9(e){K(1,arguments);var t=ue(e),r=t.getFullYear();return t.setFullYear(r+1,0,0),t.setHours(23,59,59,999),t}function cR(e){K(1,arguments);var t=ue(e),r=new Date(0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}function rhe(e){K(1,arguments);var t=cR(e),r=h9(e);return uR({start:t,end:r})}function ihe(e){K(1,arguments);var t=e||{},r=ue(t.start),i=ue(t.end),n=i.getTime();if(!(r.getTime()<=n))throw new RangeError("Invalid interval");var a=[],s=r;for(s.setHours(0,0,0,0),s.setMonth(0,1);s.getTime()<=n;)a.push(ue(s)),s.setFullYear(s.getFullYear()+1);return a}function nhe(e){K(1,arguments);var t=ue(e),r=t.getFullYear(),i=9+Math.floor(r/10)*10;return t.setFullYear(i,11,31),t.setHours(23,59,59,999),t}function ahe(e){K(1,arguments);var t=ue(e);return t.setMinutes(59,59,999),t}function d9(e,t){var r,i,n,a,s,o,l,u;K(1,arguments);var h=mn(),c=Qe((r=(i=(n=(a=t==null?void 0:t.weekStartsOn)!==null&&a!==void 0?a:t==null||(s=t.locale)===null||s===void 0||(o=s.options)===null||o===void 0?void 0:o.weekStartsOn)!==null&&n!==void 0?n:h.weekStartsOn)!==null&&i!==void 0?i:(l=h.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&r!==void 0?r:0);if(!(c>=0&&c<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var d=ue(e),f=d.getDay(),m=(f<c?-7:0)+6-(f-c);return d.setDate(d.getDate()+m),d.setHours(23,59,59,999),d}function she(e){return K(1,arguments),d9(e,{weekStartsOn:1})}function ohe(e){K(1,arguments);var t=Nf(e),r=new Date(0);r.setFullYear(t+1,0,4),r.setHours(0,0,0,0);var i=Ac(r);return i.setMilliseconds(i.getMilliseconds()-1),i}function lhe(e){K(1,arguments);var t=ue(e);return t.setSeconds(59,999),t}function uhe(e){K(1,arguments);var t=ue(e),r=t.getMonth(),i=r-r%3+3;return t.setMonth(i,0),t.setHours(23,59,59,999),t}function che(e){K(1,arguments);var t=ue(e);return t.setMilliseconds(999),t}function hhe(){return oR(Date.now())}function dhe(){var e=new Date,t=e.getFullYear(),r=e.getMonth(),i=e.getDate(),n=new Date(0);return n.setFullYear(t,r,i+1),n.setHours(23,59,59,999),n}function fhe(){var e=new Date,t=e.getFullYear(),r=e.getMonth(),i=e.getDate(),n=new Date(0);return n.setFullYear(t,r,i-1),n.setHours(23,59,59,999),n}function Rg(e,t){K(2,arguments);var r=Qe(t);return V1(e,-r)}var phe=864e5;function mhe(e){K(1,arguments);var t=ue(e),r=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var i=t.getTime(),n=r-i;return Math.floor(n/phe)+1}function kg(e){K(1,arguments);var t=1,r=ue(e),i=r.getUTCDay(),n=(i<t?7:0)+i-t;return r.setUTCDate(r.getUTCDate()-n),r.setUTCHours(0,0,0,0),r}function f9(e){K(1,arguments);var t=ue(e),r=t.getUTCFullYear(),i=new Date(0);i.setUTCFullYear(r+1,0,4),i.setUTCHours(0,0,0,0);var n=kg(i),a=new Date(0);a.setUTCFullYear(r,0,4),a.setUTCHours(0,0,0,0);var s=kg(a);return t.getTime()>=n.getTime()?r+1:t.getTime()>=s.getTime()?r:r-1}function ghe(e){K(1,arguments);var t=f9(e),r=new Date(0);r.setUTCFullYear(t,0,4),r.setUTCHours(0,0,0,0);var i=kg(r);return i}var vhe=6048e5;function p9(e){K(1,arguments);var t=ue(e),r=kg(t).getTime()-ghe(t).getTime();return Math.round(r/vhe)+1}function zf(e,t){var r,i,n,a,s,o,l,u;K(1,arguments);var h=mn(),c=Qe((r=(i=(n=(a=t==null?void 0:t.weekStartsOn)!==null&&a!==void 0?a:t==null||(s=t.locale)===null||s===void 0||(o=s.options)===null||o===void 0?void 0:o.weekStartsOn)!==null&&n!==void 0?n:h.weekStartsOn)!==null&&i!==void 0?i:(l=h.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&r!==void 0?r:0);if(!(c>=0&&c<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var d=ue(e),f=d.getUTCDay(),m=(f<c?7:0)+f-c;return d.setUTCDate(d.getUTCDate()-m),d.setUTCHours(0,0,0,0),d}function hR(e,t){var r,i,n,a,s,o,l,u;K(1,arguments);var h=ue(e),c=h.getUTCFullYear(),d=mn(),f=Qe((r=(i=(n=(a=t==null?void 0:t.firstWeekContainsDate)!==null&&a!==void 0?a:t==null||(s=t.locale)===null||s===void 0||(o=s.options)===null||o===void 0?void 0:o.firstWeekContainsDate)!==null&&n!==void 0?n:d.firstWeekContainsDate)!==null&&i!==void 0?i:(l=d.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&r!==void 0?r:1);if(!(f>=1&&f<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var m=new Date(0);m.setUTCFullYear(c+1,0,f),m.setUTCHours(0,0,0,0);var p=zf(m,t),g=new Date(0);g.setUTCFullYear(c,0,f),g.setUTCHours(0,0,0,0);var v=zf(g,t);return h.getTime()>=p.getTime()?c+1:h.getTime()>=v.getTime()?c:c-1}function yhe(e,t){var r,i,n,a,s,o,l,u;K(1,arguments);var h=mn(),c=Qe((r=(i=(n=(a=t==null?void 0:t.firstWeekContainsDate)!==null&&a!==void 0?a:t==null||(s=t.locale)===null||s===void 0||(o=s.options)===null||o===void 0?void 0:o.firstWeekContainsDate)!==null&&n!==void 0?n:h.firstWeekContainsDate)!==null&&i!==void 0?i:(l=h.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&r!==void 0?r:1),d=hR(e,t),f=new Date(0);f.setUTCFullYear(d,0,c),f.setUTCHours(0,0,0,0);var m=zf(f,t);return m}var xhe=6048e5;function m9(e,t){K(1,arguments);var r=ue(e),i=zf(r,t).getTime()-yhe(r,t).getTime();return Math.round(i/xhe)+1}function Et(e,t){for(var r=e<0?"-":"",i=Math.abs(e).toString();i.length<t;)i="0"+i;return r+i}var bhe={y:function(t,r){var i=t.getUTCFullYear(),n=i>0?i:1-i;return Et(r==="yy"?n%100:n,r.length)},M:function(t,r){var i=t.getUTCMonth();return r==="M"?String(i+1):Et(i+1,2)},d:function(t,r){return Et(t.getUTCDate(),r.length)},a:function(t,r){var i=t.getUTCHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return i.toUpperCase();case"aaa":return i;case"aaaaa":return i[0];case"aaaa":default:return i==="am"?"a.m.":"p.m."}},h:function(t,r){return Et(t.getUTCHours()%12||12,r.length)},H:function(t,r){return Et(t.getUTCHours(),r.length)},m:function(t,r){return Et(t.getUTCMinutes(),r.length)},s:function(t,r){return Et(t.getUTCSeconds(),r.length)},S:function(t,r){var i=r.length,n=t.getUTCMilliseconds(),a=Math.floor(n*Math.pow(10,i-3));return Et(a,r.length)}};const $u=bhe;var wp={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},whe={G:function(t,r,i){var n=t.getUTCFullYear()>0?1:0;switch(r){case"G":case"GG":case"GGG":return i.era(n,{width:"abbreviated"});case"GGGGG":return i.era(n,{width:"narrow"});case"GGGG":default:return i.era(n,{width:"wide"})}},y:function(t,r,i){if(r==="yo"){var n=t.getUTCFullYear(),a=n>0?n:1-n;return i.ordinalNumber(a,{unit:"year"})}return $u.y(t,r)},Y:function(t,r,i,n){var a=hR(t,n),s=a>0?a:1-a;if(r==="YY"){var o=s%100;return Et(o,2)}return r==="Yo"?i.ordinalNumber(s,{unit:"year"}):Et(s,r.length)},R:function(t,r){var i=f9(t);return Et(i,r.length)},u:function(t,r){var i=t.getUTCFullYear();return Et(i,r.length)},Q:function(t,r,i){var n=Math.ceil((t.getUTCMonth()+1)/3);switch(r){case"Q":return String(n);case"QQ":return Et(n,2);case"Qo":return i.ordinalNumber(n,{unit:"quarter"});case"QQQ":return i.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return i.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,r,i){var n=Math.ceil((t.getUTCMonth()+1)/3);switch(r){case"q":return String(n);case"qq":return Et(n,2);case"qo":return i.ordinalNumber(n,{unit:"quarter"});case"qqq":return i.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return i.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,r,i){var n=t.getUTCMonth();switch(r){case"M":case"MM":return $u.M(t,r);case"Mo":return i.ordinalNumber(n+1,{unit:"month"});case"MMM":return i.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return i.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(n,{width:"wide",context:"formatting"})}},L:function(t,r,i){var n=t.getUTCMonth();switch(r){case"L":return String(n+1);case"LL":return Et(n+1,2);case"Lo":return i.ordinalNumber(n+1,{unit:"month"});case"LLL":return i.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return i.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(n,{width:"wide",context:"standalone"})}},w:function(t,r,i,n){var a=m9(t,n);return r==="wo"?i.ordinalNumber(a,{unit:"week"}):Et(a,r.length)},I:function(t,r,i){var n=p9(t);return r==="Io"?i.ordinalNumber(n,{unit:"week"}):Et(n,r.length)},d:function(t,r,i){return r==="do"?i.ordinalNumber(t.getUTCDate(),{unit:"date"}):$u.d(t,r)},D:function(t,r,i){var n=mhe(t);return r==="Do"?i.ordinalNumber(n,{unit:"dayOfYear"}):Et(n,r.length)},E:function(t,r,i){var n=t.getUTCDay();switch(r){case"E":case"EE":case"EEE":return i.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return i.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(n,{width:"short",context:"formatting"});case"EEEE":default:return i.day(n,{width:"wide",context:"formatting"})}},e:function(t,r,i,n){var a=t.getUTCDay(),s=(a-n.weekStartsOn+8)%7||7;switch(r){case"e":return String(s);case"ee":return Et(s,2);case"eo":return i.ordinalNumber(s,{unit:"day"});case"eee":return i.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return i.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(a,{width:"short",context:"formatting"});case"eeee":default:return i.day(a,{width:"wide",context:"formatting"})}},c:function(t,r,i,n){var a=t.getUTCDay(),s=(a-n.weekStartsOn+8)%7||7;switch(r){case"c":return String(s);case"cc":return Et(s,r.length);case"co":return i.ordinalNumber(s,{unit:"day"});case"ccc":return i.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return i.day(a,{width:"narrow",context:"standalone"});case"cccccc":return i.day(a,{width:"short",context:"standalone"});case"cccc":default:return i.day(a,{width:"wide",context:"standalone"})}},i:function(t,r,i){var n=t.getUTCDay(),a=n===0?7:n;switch(r){case"i":return String(a);case"ii":return Et(a,r.length);case"io":return i.ordinalNumber(a,{unit:"day"});case"iii":return i.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return i.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return i.day(n,{width:"short",context:"formatting"});case"iiii":default:return i.day(n,{width:"wide",context:"formatting"})}},a:function(t,r,i){var n=t.getUTCHours(),a=n/12>=1?"pm":"am";switch(r){case"a":case"aa":return i.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return i.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return i.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(t,r,i){var n=t.getUTCHours(),a;switch(n===12?a=wp.noon:n===0?a=wp.midnight:a=n/12>=1?"pm":"am",r){case"b":case"bb":return i.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return i.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return i.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(t,r,i){var n=t.getUTCHours(),a;switch(n>=17?a=wp.evening:n>=12?a=wp.afternoon:n>=4?a=wp.morning:a=wp.night,r){case"B":case"BB":case"BBB":return i.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return i.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(t,r,i){if(r==="ho"){var n=t.getUTCHours()%12;return n===0&&(n=12),i.ordinalNumber(n,{unit:"hour"})}return $u.h(t,r)},H:function(t,r,i){return r==="Ho"?i.ordinalNumber(t.getUTCHours(),{unit:"hour"}):$u.H(t,r)},K:function(t,r,i){var n=t.getUTCHours()%12;return r==="Ko"?i.ordinalNumber(n,{unit:"hour"}):Et(n,r.length)},k:function(t,r,i){var n=t.getUTCHours();return n===0&&(n=24),r==="ko"?i.ordinalNumber(n,{unit:"hour"}):Et(n,r.length)},m:function(t,r,i){return r==="mo"?i.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):$u.m(t,r)},s:function(t,r,i){return r==="so"?i.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):$u.s(t,r)},S:function(t,r){return $u.S(t,r)},X:function(t,r,i,n){var a=n._originalDate||t,s=a.getTimezoneOffset();if(s===0)return"Z";switch(r){case"X":return j4(s);case"XXXX":case"XX":return Fd(s);case"XXXXX":case"XXX":default:return Fd(s,":")}},x:function(t,r,i,n){var a=n._originalDate||t,s=a.getTimezoneOffset();switch(r){case"x":return j4(s);case"xxxx":case"xx":return Fd(s);case"xxxxx":case"xxx":default:return Fd(s,":")}},O:function(t,r,i,n){var a=n._originalDate||t,s=a.getTimezoneOffset();switch(r){case"O":case"OO":case"OOO":return"GMT"+U4(s,":");case"OOOO":default:return"GMT"+Fd(s,":")}},z:function(t,r,i,n){var a=n._originalDate||t,s=a.getTimezoneOffset();switch(r){case"z":case"zz":case"zzz":return"GMT"+U4(s,":");case"zzzz":default:return"GMT"+Fd(s,":")}},t:function(t,r,i,n){var a=n._originalDate||t,s=Math.floor(a.getTime()/1e3);return Et(s,r.length)},T:function(t,r,i,n){var a=n._originalDate||t,s=a.getTime();return Et(s,r.length)}};function U4(e,t){var r=e>0?"-":"+",i=Math.abs(e),n=Math.floor(i/60),a=i%60;if(a===0)return r+String(n);var s=t||"";return r+String(n)+s+Et(a,2)}function j4(e,t){if(e%60===0){var r=e>0?"-":"+";return r+Et(Math.abs(e)/60,2)}return Fd(e,t)}function Fd(e,t){var r=t||"",i=e>0?"-":"+",n=Math.abs(e),a=Et(Math.floor(n/60),2),s=Et(n%60,2);return i+a+r+s}const _he=whe;var V4=function(t,r){switch(t){case"P":return r.date({width:"short"});case"PP":return r.date({width:"medium"});case"PPP":return r.date({width:"long"});case"PPPP":default:return r.date({width:"full"})}},g9=function(t,r){switch(t){case"p":return r.time({width:"short"});case"pp":return r.time({width:"medium"});case"ppp":return r.time({width:"long"});case"pppp":default:return r.time({width:"full"})}},She=function(t,r){var i=t.match(/(P+)(p+)?/)||[],n=i[1],a=i[2];if(!a)return V4(t,r);var s;switch(n){case"P":s=r.dateTime({width:"short"});break;case"PP":s=r.dateTime({width:"medium"});break;case"PPP":s=r.dateTime({width:"long"});break;case"PPPP":default:s=r.dateTime({width:"full"});break}return s.replace("{{date}}",V4(n,r)).replace("{{time}}",g9(a,r))},Ehe={p:g9,P:She};const rD=Ehe;var Mhe=["D","DD"],Che=["YY","YYYY"];function v9(e){return Mhe.indexOf(e)!==-1}function y9(e){return Che.indexOf(e)!==-1}function Z_(e,t,r){if(e==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var Ahe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},The=function(t,r,i){var n,a=Ahe[t];return typeof a=="string"?n=a:r===1?n=a.one:n=a.other.replace("{{count}}",r.toString()),i!=null&&i.addSuffix?i.comparison&&i.comparison>0?"in "+n:n+" ago":n};const Phe=The;function vC(e){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.width?String(t.width):e.defaultWidth,i=e.formats[r]||e.formats[e.defaultWidth];return i}}var Dhe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Ohe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Ihe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Rhe={date:vC({formats:Dhe,defaultWidth:"full"}),time:vC({formats:Ohe,defaultWidth:"full"}),dateTime:vC({formats:Ihe,defaultWidth:"full"})};const khe=Rhe;var Lhe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Bhe=function(t,r,i,n){return Lhe[t]};const Nhe=Bhe;function Wv(e){return function(t,r){var i=r!=null&&r.context?String(r.context):"standalone",n;if(i==="formatting"&&e.formattingValues){var a=e.defaultFormattingWidth||e.defaultWidth,s=r!=null&&r.width?String(r.width):a;n=e.formattingValues[s]||e.formattingValues[a]}else{var o=e.defaultWidth,l=r!=null&&r.width?String(r.width):e.defaultWidth;n=e.values[l]||e.values[o]}var u=e.argumentCallback?e.argumentCallback(t):t;return n[u]}}var zhe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Fhe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Uhe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},jhe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Vhe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Hhe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Ghe=function(t,r){var i=Number(t),n=i%100;if(n>20||n<10)switch(n%10){case 1:return i+"st";case 2:return i+"nd";case 3:return i+"rd"}return i+"th"},Whe={ordinalNumber:Ghe,era:Wv({values:zhe,defaultWidth:"wide"}),quarter:Wv({values:Fhe,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:Wv({values:Uhe,defaultWidth:"wide"}),day:Wv({values:jhe,defaultWidth:"wide"}),dayPeriod:Wv({values:Vhe,defaultWidth:"wide",formattingValues:Hhe,defaultFormattingWidth:"wide"})};const $he=Whe;function $v(e){return function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.width,n=i&&e.matchPatterns[i]||e.matchPatterns[e.defaultMatchWidth],a=t.match(n);if(!a)return null;var s=a[0],o=i&&e.parsePatterns[i]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(o)?qhe(o,function(c){return c.test(s)}):Yhe(o,function(c){return c.test(s)}),u;u=e.valueCallback?e.valueCallback(l):l,u=r.valueCallback?r.valueCallback(u):u;var h=t.slice(s.length);return{value:u,rest:h}}}function Yhe(e,t){for(var r in e)if(e.hasOwnProperty(r)&&t(e[r]))return r}function qhe(e,t){for(var r=0;r<e.length;r++)if(t(e[r]))return r}function Xhe(e){return function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=t.match(e.matchPattern);if(!i)return null;var n=i[0],a=t.match(e.parsePattern);if(!a)return null;var s=e.valueCallback?e.valueCallback(a[0]):a[0];s=r.valueCallback?r.valueCallback(s):s;var o=t.slice(n.length);return{value:s,rest:o}}}var Qhe=/^(\d+)(th|st|nd|rd)?/i,Khe=/\d+/i,Zhe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Jhe={any:[/^b/i,/^(a|c)/i]},ede={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},tde={any:[/1/i,/2/i,/3/i,/4/i]},rde={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},ide={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},nde={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},ade={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},sde={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},ode={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},lde={ordinalNumber:Xhe({matchPattern:Qhe,parsePattern:Khe,valueCallback:function(t){return parseInt(t,10)}}),era:$v({matchPatterns:Zhe,defaultMatchWidth:"wide",parsePatterns:Jhe,defaultParseWidth:"any"}),quarter:$v({matchPatterns:ede,defaultMatchWidth:"wide",parsePatterns:tde,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:$v({matchPatterns:rde,defaultMatchWidth:"wide",parsePatterns:ide,defaultParseWidth:"any"}),day:$v({matchPatterns:nde,defaultMatchWidth:"wide",parsePatterns:ade,defaultParseWidth:"any"}),dayPeriod:$v({matchPatterns:sde,defaultMatchWidth:"any",parsePatterns:ode,defaultParseWidth:"any"})};const ude=lde;var cde={code:"en-US",formatDistance:Phe,formatLong:khe,formatRelative:Nhe,localize:$he,match:ude,options:{weekStartsOn:0,firstWeekContainsDate:1}};const lv=cde;var hde=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,dde=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,fde=/^'([^]*?)'?$/,pde=/''/g,mde=/[a-zA-Z]/;function x9(e,t,r){var i,n,a,s,o,l,u,h,c,d,f,m,p,g,v,y,x,b;K(2,arguments);var _=String(t),w=mn(),E=(i=(n=r==null?void 0:r.locale)!==null&&n!==void 0?n:w.locale)!==null&&i!==void 0?i:lv,S=Qe((a=(s=(o=(l=r==null?void 0:r.firstWeekContainsDate)!==null&&l!==void 0?l:r==null||(u=r.locale)===null||u===void 0||(h=u.options)===null||h===void 0?void 0:h.firstWeekContainsDate)!==null&&o!==void 0?o:w.firstWeekContainsDate)!==null&&s!==void 0?s:(c=w.locale)===null||c===void 0||(d=c.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&a!==void 0?a:1);if(!(S>=1&&S<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var C=Qe((f=(m=(p=(g=r==null?void 0:r.weekStartsOn)!==null&&g!==void 0?g:r==null||(v=r.locale)===null||v===void 0||(y=v.options)===null||y===void 0?void 0:y.weekStartsOn)!==null&&p!==void 0?p:w.weekStartsOn)!==null&&m!==void 0?m:(x=w.locale)===null||x===void 0||(b=x.options)===null||b===void 0?void 0:b.weekStartsOn)!==null&&f!==void 0?f:0);if(!(C>=0&&C<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!E.localize)throw new RangeError("locale must contain localize property");if(!E.formatLong)throw new RangeError("locale must contain formatLong property");var M=ue(e);if(!Tc(M))throw new RangeError("Invalid time value");var P=es(M),I=Rg(M,P),k={firstWeekContainsDate:S,weekStartsOn:C,locale:E,_originalDate:M},L=_.match(dde).map(function(O){var F=O[0];if(F==="p"||F==="P"){var z=rD[F];return z(O,E.formatLong)}return O}).join("").match(hde).map(function(O){if(O==="''")return"'";var F=O[0];if(F==="'")return gde(O);var z=_he[F];if(z)return!(r!=null&&r.useAdditionalWeekYearTokens)&&y9(O)&&Z_(O,t,String(e)),!(r!=null&&r.useAdditionalDayOfYearTokens)&&v9(O)&&Z_(O,t,String(e)),z(I,O,E.localize,k);if(F.match(mde))throw new RangeError("Format string contains an unescaped latin alphabet character `"+F+"`");return O}).join("");return L}function gde(e){var t=e.match(fde);return t?t[1].replace(pde,"'"):e}function W1(e,t){if(e==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}function b9(e){return W1({},e)}var H4=1440,vde=2520,yC=43200,yde=86400;function w9(e,t,r){var i,n;K(2,arguments);var a=mn(),s=(i=(n=r==null?void 0:r.locale)!==null&&n!==void 0?n:a.locale)!==null&&i!==void 0?i:lv;if(!s.formatDistance)throw new RangeError("locale must contain formatDistance property");var o=wl(e,t);if(isNaN(o))throw new RangeError("Invalid time value");var l=W1(b9(r),{addSuffix:!!(r!=null&&r.addSuffix),comparison:o}),u,h;o>0?(u=ue(t),h=ue(e)):(u=ue(e),h=ue(t));var c=eg(h,u),d=(es(h)-es(u))/1e3,f=Math.round((c-d)/60),m;if(f<2)return r!=null&&r.includeSeconds?c<5?s.formatDistance("lessThanXSeconds",5,l):c<10?s.formatDistance("lessThanXSeconds",10,l):c<20?s.formatDistance("lessThanXSeconds",20,l):c<40?s.formatDistance("halfAMinute",0,l):c<60?s.formatDistance("lessThanXMinutes",1,l):s.formatDistance("xMinutes",1,l):f===0?s.formatDistance("lessThanXMinutes",1,l):s.formatDistance("xMinutes",f,l);if(f<45)return s.formatDistance("xMinutes",f,l);if(f<90)return s.formatDistance("aboutXHours",1,l);if(f<H4){var p=Math.round(f/60);return s.formatDistance("aboutXHours",p,l)}else{if(f<vde)return s.formatDistance("xDays",1,l);if(f<yC){var g=Math.round(f/H4);return s.formatDistance("xDays",g,l)}else if(f<yde)return m=Math.round(f/yC),s.formatDistance("aboutXMonths",m,l)}if(m=bE(h,u),m<12){var v=Math.round(f/yC);return s.formatDistance("xMonths",v,l)}else{var y=m%12,x=Math.floor(m/12);return y<3?s.formatDistance("aboutXYears",x,l):y<9?s.formatDistance("overXYears",x,l):s.formatDistance("almostXYears",x+1,l)}}var G4=1e3*60,J_=60*24,W4=J_*30,$4=J_*365;function _9(e,t,r){var i,n,a;K(2,arguments);var s=mn(),o=(i=(n=r==null?void 0:r.locale)!==null&&n!==void 0?n:s.locale)!==null&&i!==void 0?i:lv;if(!o.formatDistance)throw new RangeError("locale must contain localize.formatDistance property");var l=wl(e,t);if(isNaN(l))throw new RangeError("Invalid time value");var u=W1(b9(r),{addSuffix:!!(r!=null&&r.addSuffix),comparison:l}),h,c;l>0?(h=ue(t),c=ue(e)):(h=ue(e),c=ue(t));var d=String((a=r==null?void 0:r.roundingMethod)!==null&&a!==void 0?a:"round"),f;if(d==="floor")f=Math.floor;else if(d==="ceil")f=Math.ceil;else if(d==="round")f=Math.round;else throw new RangeError("roundingMethod must be 'floor', 'ceil' or 'round'");var m=c.getTime()-h.getTime(),p=m/G4,g=es(c)-es(h),v=(m-g)/G4,y=r==null?void 0:r.unit,x;if(y?x=String(y):p<1?x="second":p<60?x="minute":p<J_?x="hour":v<W4?x="day":v<$4?x="month":x="year",x==="second"){var b=f(m/1e3);return o.formatDistance("xSeconds",b,u)}else if(x==="minute"){var _=f(p);return o.formatDistance("xMinutes",_,u)}else if(x==="hour"){var w=f(p/60);return o.formatDistance("xHours",w,u)}else if(x==="day"){var E=f(v/J_);return o.formatDistance("xDays",E,u)}else if(x==="month"){var S=f(v/W4);return S===12&&y!=="month"?o.formatDistance("xYears",1,u):o.formatDistance("xMonths",S,u)}else if(x==="year"){var C=f(v/$4);return o.formatDistance("xYears",C,u)}throw new RangeError("unit must be 'second', 'minute', 'hour', 'day', 'month' or 'year'")}function xde(e,t){return K(1,arguments),w9(e,Date.now(),t)}function bde(e,t){return K(1,arguments),_9(e,Date.now(),t)}var wde=["years","months","weeks","days","hours","minutes","seconds"];function _de(e,t){var r,i,n,a,s;if(arguments.length<1)throw new TypeError("1 argument required, but only ".concat(arguments.length," present"));var o=mn(),l=(r=(i=t==null?void 0:t.locale)!==null&&i!==void 0?i:o.locale)!==null&&r!==void 0?r:lv,u=(n=t==null?void 0:t.format)!==null&&n!==void 0?n:wde,h=(a=t==null?void 0:t.zero)!==null&&a!==void 0?a:!1,c=(s=t==null?void 0:t.delimiter)!==null&&s!==void 0?s:" ";if(!l.formatDistance)return"";var d=u.reduce(function(f,m){var p="x".concat(m.replace(/(^.)/,function(v){return v.toUpperCase()})),g=e[m];return typeof g=="number"&&(h||e[m])?f.concat(l.formatDistance(p,g)):f},[]).join(c);return d}function Sde(e,t){var r,i;K(1,arguments);var n=ue(e);if(isNaN(n.getTime()))throw new RangeError("Invalid time value");var a=String((r=t==null?void 0:t.format)!==null&&r!==void 0?r:"extended"),s=String((i=t==null?void 0:t.representation)!==null&&i!==void 0?i:"complete");if(a!=="extended"&&a!=="basic")throw new RangeError("format must be 'extended' or 'basic'");if(s!=="date"&&s!=="time"&&s!=="complete")throw new RangeError("representation must be 'date', 'time', or 'complete'");var o="",l="",u=a==="extended"?"-":"",h=a==="extended"?":":"";if(s!=="time"){var c=Et(n.getDate(),2),d=Et(n.getMonth()+1,2),f=Et(n.getFullYear(),4);o="".concat(f).concat(u).concat(d).concat(u).concat(c)}if(s!=="date"){var m=n.getTimezoneOffset();if(m!==0){var p=Math.abs(m),g=Et(Math.floor(p/60),2),v=Et(p%60,2),y=m<0?"+":"-";l="".concat(y).concat(g,":").concat(v)}else l="Z";var x=Et(n.getHours(),2),b=Et(n.getMinutes(),2),_=Et(n.getSeconds(),2),w=o===""?"":"T",E=[x,b,_].join(h);o="".concat(o).concat(w).concat(E).concat(l)}return o}function Ede(e,t){var r,i;if(arguments.length<1)throw new TypeError("1 argument required, but only ".concat(arguments.length," present"));var n=ue(e);if(!Tc(n))throw new RangeError("Invalid time value");var a=String((r=t==null?void 0:t.format)!==null&&r!==void 0?r:"extended"),s=String((i=t==null?void 0:t.representation)!==null&&i!==void 0?i:"complete");if(a!=="extended"&&a!=="basic")throw new RangeError("format must be 'extended' or 'basic'");if(s!=="date"&&s!=="time"&&s!=="complete")throw new RangeError("representation must be 'date', 'time', or 'complete'");var o="",l=a==="extended"?"-":"",u=a==="extended"?":":"";if(s!=="time"){var h=Et(n.getDate(),2),c=Et(n.getMonth()+1,2),d=Et(n.getFullYear(),4);o="".concat(d).concat(l).concat(c).concat(l).concat(h)}if(s!=="date"){var f=Et(n.getHours(),2),m=Et(n.getMinutes(),2),p=Et(n.getSeconds(),2),g=o===""?"":" ";o="".concat(o).concat(g).concat(f).concat(u).concat(m).concat(u).concat(p)}return o}function Mde(e){if(K(1,arguments),Ja(e)!=="object")throw new Error("Duration must be an object");var t=e.years,r=t===void 0?0:t,i=e.months,n=i===void 0?0:i,a=e.days,s=a===void 0?0:a,o=e.hours,l=o===void 0?0:o,u=e.minutes,h=u===void 0?0:u,c=e.seconds,d=c===void 0?0:c;return"P".concat(r,"Y").concat(n,"M").concat(s,"DT").concat(l,"H").concat(h,"M").concat(d,"S")}function Cde(e,t){var r;if(arguments.length<1)throw new TypeError("1 arguments required, but only ".concat(arguments.length," present"));var i=ue(e);if(!Tc(i))throw new RangeError("Invalid time value");var n=Number((r=t==null?void 0:t.fractionDigits)!==null&&r!==void 0?r:0);if(!(n>=0&&n<=3))throw new RangeError("fractionDigits must be between 0 and 3 inclusively");var a=Et(i.getDate(),2),s=Et(i.getMonth()+1,2),o=i.getFullYear(),l=Et(i.getHours(),2),u=Et(i.getMinutes(),2),h=Et(i.getSeconds(),2),c="";if(n>0){var d=i.getMilliseconds(),f=Math.floor(d*Math.pow(10,n-3));c="."+Et(f,n)}var m="",p=i.getTimezoneOffset();if(p!==0){var g=Math.abs(p),v=Et(Qe(g/60),2),y=Et(g%60,2),x=p<0?"+":"-";m="".concat(x).concat(v,":").concat(y)}else m="Z";return"".concat(o,"-").concat(s,"-").concat(a,"T").concat(l,":").concat(u,":").concat(h).concat(c).concat(m)}var Ade=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Tde=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Pde(e){if(arguments.length<1)throw new TypeError("1 arguments required, but only ".concat(arguments.length," present"));var t=ue(e);if(!Tc(t))throw new RangeError("Invalid time value");var r=Ade[t.getUTCDay()],i=Et(t.getUTCDate(),2),n=Tde[t.getUTCMonth()],a=t.getUTCFullYear(),s=Et(t.getUTCHours(),2),o=Et(t.getUTCMinutes(),2),l=Et(t.getUTCSeconds(),2);return"".concat(r,", ").concat(i," ").concat(n," ").concat(a," ").concat(s,":").concat(o,":").concat(l," GMT")}function Dde(e,t,r){var i,n,a,s,o,l,u,h,c,d;K(2,arguments);var f=ue(e),m=ue(t),p=mn(),g=(i=(n=r==null?void 0:r.locale)!==null&&n!==void 0?n:p.locale)!==null&&i!==void 0?i:lv,v=Qe((a=(s=(o=(l=r==null?void 0:r.weekStartsOn)!==null&&l!==void 0?l:r==null||(u=r.locale)===null||u===void 0||(h=u.options)===null||h===void 0?void 0:h.weekStartsOn)!==null&&o!==void 0?o:p.weekStartsOn)!==null&&s!==void 0?s:(c=p.locale)===null||c===void 0||(d=c.options)===null||d===void 0?void 0:d.weekStartsOn)!==null&&a!==void 0?a:0);if(!g.localize)throw new RangeError("locale must contain localize property");if(!g.formatLong)throw new RangeError("locale must contain formatLong property");if(!g.formatRelative)throw new RangeError("locale must contain formatRelative property");var y=xu(f,m);if(isNaN(y))throw new RangeError("Invalid time value");var x;y<-6?x="other":y<-1?x="lastWeek":y<0?x="yesterday":y<1?x="today":y<2?x="tomorrow":y<7?x="nextWeek":x="other";var b=Rg(f,es(f)),_=Rg(m,es(m)),w=g.formatRelative(x,b,_,{locale:g,weekStartsOn:v});return x9(f,w,{locale:g,weekStartsOn:v})}function Ode(e){K(1,arguments);var t=Qe(e);return ue(t*1e3)}function S9(e){K(1,arguments);var t=ue(e),r=t.getDate();return r}function _E(e){K(1,arguments);var t=ue(e),r=t.getDay();return r}function Ide(e){K(1,arguments);var t=ue(e),r=xu(t,cR(t)),i=r+1;return i}function E9(e){K(1,arguments);var t=ue(e),r=t.getFullYear(),i=t.getMonth(),n=new Date(0);return n.setFullYear(r,i+1,0),n.setHours(0,0,0,0),n.getDate()}function M9(e){K(1,arguments);var t=ue(e),r=t.getFullYear();return r%400===0||r%4===0&&r%100!==0}function Rde(e){K(1,arguments);var t=ue(e);return String(new Date(t))==="Invalid Date"?NaN:M9(t)?366:365}function kde(e){K(1,arguments);var t=ue(e),r=t.getFullYear(),i=Math.floor(r/10)*10;return i}function Lde(){return W1({},mn())}function Bde(e){K(1,arguments);var t=ue(e),r=t.getHours();return r}function C9(e){K(1,arguments);var t=ue(e),r=t.getDay();return r===0&&(r=7),r}var Nde=6048e5;function A9(e){K(1,arguments);var t=ue(e),r=Ac(t).getTime()-td(t).getTime();return Math.round(r/Nde)+1}var zde=6048e5;function Fde(e){K(1,arguments);var t=td(e),r=td(mE(t,60)),i=r.valueOf()-t.valueOf();return Math.round(i/zde)}function Ude(e){K(1,arguments);var t=ue(e),r=t.getMilliseconds();return r}function jde(e){K(1,arguments);var t=ue(e),r=t.getMinutes();return r}function Vde(e){K(1,arguments);var t=ue(e),r=t.getMonth();return r}var Hde=24*60*60*1e3;function Gde(e,t){K(2,arguments);var r=e||{},i=t||{},n=ue(r.start).getTime(),a=ue(r.end).getTime(),s=ue(i.start).getTime(),o=ue(i.end).getTime();if(!(n<=a&&s<=o))throw new RangeError("Invalid interval");var l=n<o&&s<a;if(!l)return 0;var u=s<n?n:s,h=o>a?a:o,c=h-u;return Math.ceil(c/Hde)}function Wde(e){K(1,arguments);var t=ue(e),r=t.getSeconds();return r}function T9(e){K(1,arguments);var t=ue(e),r=t.getTime();return r}function $de(e){return K(1,arguments),Math.floor(T9(e)/1e3)}function P9(e,t){var r,i,n,a,s,o,l,u;K(1,arguments);var h=ue(e),c=h.getFullYear(),d=mn(),f=Qe((r=(i=(n=(a=t==null?void 0:t.firstWeekContainsDate)!==null&&a!==void 0?a:t==null||(s=t.locale)===null||s===void 0||(o=s.options)===null||o===void 0?void 0:o.firstWeekContainsDate)!==null&&n!==void 0?n:d.firstWeekContainsDate)!==null&&i!==void 0?i:(l=d.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&r!==void 0?r:1);if(!(f>=1&&f<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var m=new Date(0);m.setFullYear(c+1,0,f),m.setHours(0,0,0,0);var p=Uo(m,t),g=new Date(0);g.setFullYear(c,0,f),g.setHours(0,0,0,0);var v=Uo(g,t);return h.getTime()>=p.getTime()?c+1:h.getTime()>=v.getTime()?c:c-1}function eS(e,t){var r,i,n,a,s,o,l,u;K(1,arguments);var h=mn(),c=Qe((r=(i=(n=(a=t==null?void 0:t.firstWeekContainsDate)!==null&&a!==void 0?a:t==null||(s=t.locale)===null||s===void 0||(o=s.options)===null||o===void 0?void 0:o.firstWeekContainsDate)!==null&&n!==void 0?n:h.firstWeekContainsDate)!==null&&i!==void 0?i:(l=h.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&r!==void 0?r:1),d=P9(e,t),f=new Date(0);f.setFullYear(d,0,c),f.setHours(0,0,0,0);var m=Uo(f,t);return m}var Yde=6048e5;function D9(e,t){K(1,arguments);var r=ue(e),i=Uo(r,t).getTime()-eS(r,t).getTime();return Math.round(i/Yde)+1}function qde(e,t){var r,i,n,a,s,o,l,u;K(1,arguments);var h=mn(),c=Qe((r=(i=(n=(a=t==null?void 0:t.weekStartsOn)!==null&&a!==void 0?a:t==null||(s=t.locale)===null||s===void 0||(o=s.options)===null||o===void 0?void 0:o.weekStartsOn)!==null&&n!==void 0?n:h.weekStartsOn)!==null&&i!==void 0?i:(l=h.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&r!==void 0?r:0);if(!(c>=0&&c<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var d=S9(e);if(isNaN(d))return NaN;var f=_E(wE(e)),m=c-f;m<=0&&(m+=7);var p=d-m;return Math.ceil(p/7)+1}function O9(e){K(1,arguments);var t=ue(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(0,0,0,0),t}function Xde(e,t){return K(1,arguments),q_(O9(e),wE(e),t)+1}function Qde(e){return K(1,arguments),ue(e).getFullYear()}function Kde(e){return K(1,arguments),Math.floor(e*Kf)}function Zde(e){return K(1,arguments),Math.floor(e*eR)}function Jde(e){return K(1,arguments),Math.floor(e*H1)}function efe(e){K(1,arguments);var t=ue(e.start),r=ue(e.end);if(isNaN(t.getTime()))throw new RangeError("Start Date is invalid");if(isNaN(r.getTime()))throw new RangeError("End Date is invalid");var i={};i.years=Math.abs(u9(r,t));var n=wl(r,t),a=sm(t,{years:n*i.years});i.months=Math.abs(bE(r,a));var s=sm(a,{months:n*i.months});i.days=Math.abs(sR(r,s));var o=sm(s,{days:n*i.days});i.hours=Math.abs(X_(r,o));var l=sm(o,{hours:n*i.hours});i.minutes=Math.abs(Q_(r,l));var u=sm(l,{minutes:n*i.minutes});return i.seconds=Math.abs(eg(r,u)),i}function tfe(e,t,r){var i;K(1,arguments);var n;return rfe(t)?n=t:r=t,new Intl.DateTimeFormat((i=r)===null||i===void 0?void 0:i.locale,n).format(e)}function rfe(e){return e!==void 0&&!("locale"in e)}function ife(e,t,r){K(2,arguments);var i=0,n,a=ue(e),s=ue(t);if(r!=null&&r.unit)n=r==null?void 0:r.unit,n==="second"?i=eg(a,s):n==="minute"?i=Q_(a,s):n==="hour"?i=X_(a,s):n==="day"?i=xu(a,s):n==="week"?i=q_(a,s):n==="month"?i=Y_(a,s):n==="quarter"?i=Uw(a,s):n==="year"&&(i=my(a,s));else{var o=eg(a,s);Math.abs(o)<vE?(i=eg(a,s),n="second"):Math.abs(o)<H1?(i=Q_(a,s),n="minute"):Math.abs(o)<yE&&Math.abs(xu(a,s))<1?(i=X_(a,s),n="hour"):Math.abs(o)<i9&&(i=xu(a,s))&&Math.abs(i)<7?n="day":Math.abs(o)<aR?(i=q_(a,s),n="week"):Math.abs(o)<n9?(i=Y_(a,s),n="month"):Math.abs(o)<nR&&Uw(a,s)<4?(i=Uw(a,s),n="quarter"):(i=my(a,s),n="year")}var l=new Intl.RelativeTimeFormat(r==null?void 0:r.locale,{localeMatcher:r==null?void 0:r.localeMatcher,numeric:(r==null?void 0:r.numeric)||"auto",style:r==null?void 0:r.style});return l.format(i,n)}function nfe(e,t){K(2,arguments);var r=ue(e),i=ue(t);return r.getTime()>i.getTime()}function afe(e,t){K(2,arguments);var r=ue(e),i=ue(t);return r.getTime()<i.getTime()}function sfe(e,t){K(2,arguments);var r=ue(e),i=ue(t);return r.getTime()===i.getTime()}function ofe(e,t,r){if(arguments.length<3)throw new TypeError("3 argument required, but only "+arguments.length+" present");var i=new Date(e,t,r);return i.getFullYear()===e&&i.getMonth()===t&&i.getDate()===r}function lfe(e){return K(1,arguments),ue(e).getDate()===1}function ufe(e){return K(1,arguments),ue(e).getDay()===5}function cfe(e){return K(1,arguments),ue(e).getTime()>Date.now()}function Y4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function hfe(e,t){if(e){if(typeof e=="string")return Y4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Y4(e,t)}}function q4(e,t){var r=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=hfe(e))||t&&e&&typeof e.length=="number"){r&&(e=r);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(u){throw u},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,s=!1,o;return{s:function(){r=r.call(e)},n:function(){var u=r.next();return a=u.done,u},e:function(u){s=!0,o=u},f:function(){try{!a&&r.return!=null&&r.return()}finally{if(s)throw o}}}}function Pr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&I_(e,t)}function tS(e){return tS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},tS(e)}function dfe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ffe(e,t){if(t&&(Ja(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ht(e)}function Dr(e){var t=dfe();return function(){var i=tS(e),n;if(t){var a=tS(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return ffe(this,n)}}function vr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pfe(e,t){if(Ja(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(Ja(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function I9(e){var t=pfe(e,"string");return Ja(t)==="symbol"?t:String(t)}function X4(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,I9(i.key),i)}}function yr(e,t,r){return t&&X4(e.prototype,t),r&&X4(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function lt(e,t,r){return t=I9(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var mfe=10,R9=function(){function e(){vr(this,e),lt(this,"priority",void 0),lt(this,"subPriority",0)}return yr(e,[{key:"validate",value:function(r,i){return!0}}]),e}(),gfe=function(e){Pr(r,e);var t=Dr(r);function r(i,n,a,s,o){var l;return vr(this,r),l=t.call(this),l.value=i,l.validateValue=n,l.setValue=a,l.priority=s,o&&(l.subPriority=o),l}return yr(r,[{key:"validate",value:function(n,a){return this.validateValue(n,this.value,a)}},{key:"set",value:function(n,a,s){return this.setValue(n,a,this.value,s)}}]),r}(R9),vfe=function(e){Pr(r,e);var t=Dr(r);function r(){var i;vr(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return i=t.call.apply(t,[this].concat(a)),lt(ht(i),"priority",mfe),lt(ht(i),"subPriority",-1),i}return yr(r,[{key:"set",value:function(n,a){if(a.timestampIsSet)return n;var s=new Date(0);return s.setFullYear(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()),s.setHours(n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds(),n.getUTCMilliseconds()),s}}]),r}(R9),zr=function(){function e(){vr(this,e),lt(this,"incompatibleTokens",void 0),lt(this,"priority",void 0),lt(this,"subPriority",void 0)}return yr(e,[{key:"run",value:function(r,i,n,a){var s=this.parse(r,i,n,a);return s?{setter:new gfe(s.value,this.validate,this.set,this.priority,this.subPriority),rest:s.rest}:null}},{key:"validate",value:function(r,i,n){return!0}}]),e}(),yfe=function(e){Pr(r,e);var t=Dr(r);function r(){var i;vr(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return i=t.call.apply(t,[this].concat(a)),lt(ht(i),"priority",140),lt(ht(i),"incompatibleTokens",["R","u","t","T"]),i}return yr(r,[{key:"parse",value:function(n,a,s){switch(a){case"G":case"GG":case"GGG":return s.era(n,{width:"abbreviated"})||s.era(n,{width:"narrow"});case"GGGGG":return s.era(n,{width:"narrow"});case"GGGG":default:return s.era(n,{width:"wide"})||s.era(n,{width:"abbreviated"})||s.era(n,{width:"narrow"})}}},{key:"set",value:function(n,a,s){return a.era=s,n.setUTCFullYear(s,0,1),n.setUTCHours(0,0,0,0),n}}]),r}(zr),Yi={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},iu={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function qi(e,t){return e&&{value:t(e.value),rest:e.rest}}function Si(e,t){var r=t.match(e);return r?{value:parseInt(r[0],10),rest:t.slice(r[0].length)}:null}function nu(e,t){var r=t.match(e);if(!r)return null;if(r[0]==="Z")return{value:0,rest:t.slice(1)};var i=r[1]==="+"?1:-1,n=r[2]?parseInt(r[2],10):0,a=r[3]?parseInt(r[3],10):0,s=r[5]?parseInt(r[5],10):0;return{value:i*(n*Kf+a*Qf+s*gE),rest:t.slice(r[0].length)}}function k9(e){return Si(Yi.anyDigitsSigned,e)}function zi(e,t){switch(e){case 1:return Si(Yi.singleDigit,t);case 2:return Si(Yi.twoDigits,t);case 3:return Si(Yi.threeDigits,t);case 4:return Si(Yi.fourDigits,t);default:return Si(new RegExp("^\\d{1,"+e+"}"),t)}}function rS(e,t){switch(e){case 1:return Si(Yi.singleDigitSigned,t);case 2:return Si(Yi.twoDigitsSigned,t);case 3:return Si(Yi.threeDigitsSigned,t);case 4:return Si(Yi.fourDigitsSigned,t);default:return Si(new RegExp("^-?\\d{1,"+e+"}"),t)}}function dR(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function L9(e,t){var r=t>0,i=r?t:1-t,n;if(i<=50)n=e||100;else{var a=i+50,s=Math.floor(a/100)*100,o=e>=a%100;n=e+s-(o?100:0)}return r?n:1-n}function B9(e){return e%400===0||e%4===0&&e%100!==0}var xfe=function(e){Pr(r,e);var t=Dr(r);function r(){var i;vr(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return i=t.call.apply(t,[this].concat(a)),lt(ht(i),"priority",130),lt(ht(i),"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"]),i}return yr(r,[{key:"parse",value:function(n,a,s){var o=function(u){return{year:u,isTwoDigitYear:a==="yy"}};switch(a){case"y":return qi(zi(4,n),o);case"yo":return qi(s.ordinalNumber(n,{unit:"year"}),o);default:return qi(zi(a.length,n),o)}}},{key:"validate",value:function(n,a){return a.isTwoDigitYear||a.year>0}},{key:"set",value:function(n,a,s){var o=n.getUTCFullYear();if(s.isTwoDigitYear){var l=L9(s.year,o);return n.setUTCFullYear(l,0,1),n.setUTCHours(0,0,0,0),n}var u=!("era"in a)||a.era===1?s.year:1-s.year;return n.setUTCFullYear(u,0,1),n.setUTCHours(0,0,0,0),n}}]),r}(zr),bfe=function(e){Pr(r,e);var t=Dr(r);function r(){var i;vr(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return i=t.call.apply(t,[this].concat(a)),lt(ht(i),"priority",130),lt(ht(i),"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"]),i}return yr(r,[{key:"parse",value:function(n,a,s){var o=function(u){return{year:u,isTwoDigitYear:a==="YY"}};switch(a){case"Y":return qi(zi(4,n),o);case"Yo":return qi(s.ordinalNumber(n,{unit:"year"}),o);default:return qi(zi(a.length,n),o)}}},{key:"validate",value:function(n,a){return a.isTwoDigitYear||a.year>0}},{key:"set",value:function(n,a,s,o){var l=hR(n,o);if(s.isTwoDigitYear){var u=L9(s.year,l);return n.setUTCFullYear(u,0,o.firstWeekContainsDate),n.setUTCHours(0,0,0,0),zf(n,o)}var h=!("era"in a)||a.era===1?s.year:1-s.year;return n.setUTCFullYear(h,0,o.firstWeekContainsDate),n.setUTCHours(0,0,0,0),zf(n,o)}}]),r}(zr),wfe=function(e){Pr(r,e);var t=Dr(r);function r(){var i;vr(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return i=t.call.apply(t,[this].concat(a)),lt(ht(i),"priority",130),lt(ht(i),"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]),i}return yr(r,[{key:"parse",value:function(n,a){return rS(a==="R"?4:a.length,n)}},{key:"set",value:function(n,a,s){var o=new Date(0);return o.setUTCFullYear(s,0,4),o.setUTCHours(0,0,0,0),kg(o)}}]),r}(zr),_fe=function(e){Pr(r,e);var t=Dr(r);function r(){var i;vr(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return i=t.call.apply(t,[this].concat(a)),lt(ht(i),"priority",130),lt(ht(i),"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"]),i}return yr(r,[{key:"parse",value:function(n,a){return rS(a==="u"?4:a.length,n)}},{key:"set",value:function(n,a,s){return n.setUTCFullYear(s,0,1),n.setUTCHours(0,0,0,0),n}}]),r}(zr),Sfe=function(e){Pr(r,e);var t=Dr(r);function r(){var i;vr(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return i=t.call.apply(t,[this].concat(a)),lt(ht(i),"priority",120),lt(ht(i),"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]),i}return yr(r,[{key:"parse",value:function(n,a,s){switch(a){case"Q":case"QQ":return zi(a.length,n);case"Qo":return s.ordinalNumber(n,{unit:"quarter"});case"QQQ":return s.quarter(n,{width:"abbreviated",context:"formatting"})||s.quarter(n,{width:"narrow",context:"formatting"});case"QQQQQ":return s.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(n,{width:"wide",context:"formatting"})||s.quarter(n,{width:"abbreviated",context:"formatting"})||s.quarter(n,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(n,a){return a>=1&&a<=4}},{key:"set",value:function(n,a,s){return n.setUTCMonth((s-1)*3,1),n.setUTCHours(0,0,0,0),n}}]),r}(zr),Efe=function(e){Pr(r,e);var t=Dr(r);function r(){var i;vr(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return i=t.call.apply(t,[this].concat(a)),lt(ht(i),"priority",120),lt(ht(i),"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]),i}return yr(r,[{key:"parse",value:function(n,a,s){switch(a){case"q":case"qq":return zi(a.length,n);case"qo":return s.ordinalNumber(n,{unit:"quarter"});case"qqq":return s.quarter(n,{width:"abbreviated",context:"standalone"})||s.quarter(n,{width:"narrow",context:"standalone"});case"qqqqq":return s.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(n,{width:"wide",context:"standalone"})||s.quarter(n,{width:"abbreviated",context:"standalone"})||s.quarter(n,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(n,a){return a>=1&&a<=4}},{key:"set",value:function(n,a,s){return n.setUTCMonth((s-1)*3,1),n.setUTCHours(0,0,0,0),n}}]),r}(zr),Mfe=function(e){Pr(r,e);var t=Dr(r);function r(){var i;vr(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return i=t.call.apply(t,[this].concat(a)),lt(ht(i),"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),lt(ht(i),"priority",110),i}return yr(r,[{key:"parse",value:function(n,a,s){var o=function(u){return u-1};switch(a){case"M":return qi(Si(Yi.month,n),o);case"MM":return qi(zi(2,n),o);case"Mo":return qi(s.ordinalNumber(n,{unit:"month"}),o);case"MMM":return s.month(n,{width:"abbreviated",context:"formatting"})||s.month(n,{width:"narrow",context:"formatting"});case"MMMMM":return s.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(n,{width:"wide",context:"formatting"})||s.month(n,{width:"abbreviated",context:"formatting"})||s.month(n,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(n,a){return a>=0&&a<=11}},{key:"set",value:function(n,a,s){return n.setUTCMonth(s,1),n.setUTCHours(0,0,0,0),n}}]),r}(zr),Cfe=function(e){Pr(r,e);var t=Dr(r);function r(){var i;vr(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return i=t.call.apply(t,[this].concat(a)),lt(ht(i),"priority",110),lt(ht(i),"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]),i}return yr(r,[{key:"parse",value:function(n,a,s){var o=function(u){return u-1};switch(a){case"L":return qi(Si(Yi.month,n),o);case"LL":return qi(zi(2,n),o);case"Lo":return qi(s.ordinalNumber(n,{unit:"month"}),o);case"LLL":return s.month(n,{width:"abbreviated",context:"standalone"})||s.month(n,{width:"narrow",context:"standalone"});case"LLLLL":return s.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(n,{width:"wide",context:"standalone"})||s.month(n,{width:"abbreviated",context:"standalone"})||s.month(n,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(n,a){return a>=0&&a<=11}},{key:"set",value:function(n,a,s){return n.setUTCMonth(s,1),n.setUTCHours(0,0,0,0),n}}]),r}(zr);function Afe(e,t,r){K(2,arguments);var i=ue(e),n=Qe(t),a=m9(i,r)-n;return i.setUTCDate(i.getUTCDate()-a*7),i}var Tfe=function(e){Pr(r,e);var t=Dr(r);function r(){var i;vr(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return i=t.call.apply(t,[this].concat(a)),lt(ht(i),"priority",100),lt(ht(i),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"]),i}return yr(r,[{key:"parse",value:function(n,a,s){switch(a){case"w":return Si(Yi.week,n);case"wo":return s.ordinalNumber(n,{unit:"week"});default:return zi(a.length,n)}}},{key:"validate",value:function(n,a){return a>=1&&a<=53}},{key:"set",value:function(n,a,s,o){return zf(Afe(n,s,o),o)}}]),r}(zr);function Pfe(e,t){K(2,arguments);var r=ue(e),i=Qe(t),n=p9(r)-i;return r.setUTCDate(r.getUTCDate()-n*7),r}var Dfe=function(e){Pr(r,e);var t=Dr(r);function r(){var i;vr(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return i=t.call.apply(t,[this].concat(a)),lt(ht(i),"priority",100),lt(ht(i),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]),i}return yr(r,[{key:"parse",value:function(n,a,s){switch(a){case"I":return Si(Yi.week,n);case"Io":return s.ordinalNumber(n,{unit:"week"});default:return zi(a.length,n)}}},{key:"validate",value:function(n,a){return a>=1&&a<=53}},{key:"set",value:function(n,a,s){return kg(Pfe(n,s))}}]),r}(zr),Ofe=[31,28,31,30,31,30,31,31,30,31,30,31],Ife=[31,29,31,30,31,30,31,31,30,31,30,31],Rfe=function(e){Pr(r,e);var t=Dr(r);function r(){var i;vr(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return i=t.call.apply(t,[this].concat(a)),lt(ht(i),"priority",90),lt(ht(i),"subPriority",1),lt(ht(i),"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"]),i}return yr(r,[{key:"parse",value:function(n,a,s){switch(a){case"d":return Si(Yi.date,n);case"do":return s.ordinalNumber(n,{unit:"date"});default:return zi(a.length,n)}}},{key:"validate",value:function(n,a){var s=n.getUTCFullYear(),o=B9(s),l=n.getUTCMonth();return o?a>=1&&a<=Ife[l]:a>=1&&a<=Ofe[l]}},{key:"set",value:function(n,a,s){return n.setUTCDate(s),n.setUTCHours(0,0,0,0),n}}]),r}(zr),kfe=function(e){Pr(r,e);var t=Dr(r);function r(){var i;vr(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return i=t.call.apply(t,[this].concat(a)),lt(ht(i),"priority",90),lt(ht(i),"subpriority",1),lt(ht(i),"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]),i}return yr(r,[{key:"parse",value:function(n,a,s){switch(a){case"D":case"DD":return Si(Yi.dayOfYear,n);case"Do":return s.ordinalNumber(n,{unit:"date"});default:return zi(a.length,n)}}},{key:"validate",value:function(n,a){var s=n.getUTCFullYear(),o=B9(s);return o?a>=1&&a<=366:a>=1&&a<=365}},{key:"set",value:function(n,a,s){return n.setUTCMonth(0,s),n.setUTCHours(0,0,0,0),n}}]),r}(zr);function fR(e,t,r){var i,n,a,s,o,l,u,h;K(2,arguments);var c=mn(),d=Qe((i=(n=(a=(s=r==null?void 0:r.weekStartsOn)!==null&&s!==void 0?s:r==null||(o=r.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&a!==void 0?a:c.weekStartsOn)!==null&&n!==void 0?n:(u=c.locale)===null||u===void 0||(h=u.options)===null||h===void 0?void 0:h.weekStartsOn)!==null&&i!==void 0?i:0);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var f=ue(e),m=Qe(t),p=f.getUTCDay(),g=m%7,v=(g+7)%7,y=(v<d?7:0)+m-p;return f.setUTCDate(f.getUTCDate()+y),f}var Lfe=function(e){Pr(r,e);var t=Dr(r);function r(){var i;vr(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return i=t.call.apply(t,[this].concat(a)),lt(ht(i),"priority",90),lt(ht(i),"incompatibleTokens",["D","i","e","c","t","T"]),i}return yr(r,[{key:"parse",value:function(n,a,s){switch(a){case"E":case"EE":case"EEE":return s.day(n,{width:"abbreviated",context:"formatting"})||s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"});case"EEEEE":return s.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"});case"EEEE":default:return s.day(n,{width:"wide",context:"formatting"})||s.day(n,{width:"abbreviated",context:"formatting"})||s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(n,a){return a>=0&&a<=6}},{key:"set",value:function(n,a,s,o){return n=fR(n,s,o),n.setUTCHours(0,0,0,0),n}}]),r}(zr),Bfe=function(e){Pr(r,e);var t=Dr(r);function r(){var i;vr(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return i=t.call.apply(t,[this].concat(a)),lt(ht(i),"priority",90),lt(ht(i),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]),i}return yr(r,[{key:"parse",value:function(n,a,s,o){var l=function(h){var c=Math.floor((h-1)/7)*7;return(h+o.weekStartsOn+6)%7+c};switch(a){case"e":case"ee":return qi(zi(a.length,n),l);case"eo":return qi(s.ordinalNumber(n,{unit:"day"}),l);case"eee":return s.day(n,{width:"abbreviated",context:"formatting"})||s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"});case"eeeee":return s.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"});case"eeee":default:return s.day(n,{width:"wide",context:"formatting"})||s.day(n,{width:"abbreviated",context:"formatting"})||s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(n,a){return a>=0&&a<=6}},{key:"set",value:function(n,a,s,o){return n=fR(n,s,o),n.setUTCHours(0,0,0,0),n}}]),r}(zr),Nfe=function(e){Pr(r,e);var t=Dr(r);function r(){var i;vr(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return i=t.call.apply(t,[this].concat(a)),lt(ht(i),"priority",90),lt(ht(i),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]),i}return yr(r,[{key:"parse",value:function(n,a,s,o){var l=function(h){var c=Math.floor((h-1)/7)*7;return(h+o.weekStartsOn+6)%7+c};switch(a){case"c":case"cc":return qi(zi(a.length,n),l);case"co":return qi(s.ordinalNumber(n,{unit:"day"}),l);case"ccc":return s.day(n,{width:"abbreviated",context:"standalone"})||s.day(n,{width:"short",context:"standalone"})||s.day(n,{width:"narrow",context:"standalone"});case"ccccc":return s.day(n,{width:"narrow",context:"standalone"});case"cccccc":return s.day(n,{width:"short",context:"standalone"})||s.day(n,{width:"narrow",context:"standalone"});case"cccc":default:return s.day(n,{width:"wide",context:"standalone"})||s.day(n,{width:"abbreviated",context:"standalone"})||s.day(n,{width:"short",context:"standalone"})||s.day(n,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(n,a){return a>=0&&a<=6}},{key:"set",value:function(n,a,s,o){return n=fR(n,s,o),n.setUTCHours(0,0,0,0),n}}]),r}(zr);function zfe(e,t){K(2,arguments);var r=Qe(t);r%7===0&&(r=r-7);var i=1,n=ue(e),a=n.getUTCDay(),s=r%7,o=(s+7)%7,l=(o<i?7:0)+r-a;return n.setUTCDate(n.getUTCDate()+l),n}var Ffe=function(e){Pr(r,e);var t=Dr(r);function r(){var i;vr(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return i=t.call.apply(t,[this].concat(a)),lt(ht(i),"priority",90),lt(ht(i),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]),i}return yr(r,[{key:"parse",value:function(n,a,s){var o=function(u){return u===0?7:u};switch(a){case"i":case"ii":return zi(a.length,n);case"io":return s.ordinalNumber(n,{unit:"day"});case"iii":return qi(s.day(n,{width:"abbreviated",context:"formatting"})||s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"}),o);case"iiiii":return qi(s.day(n,{width:"narrow",context:"formatting"}),o);case"iiiiii":return qi(s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"}),o);case"iiii":default:return qi(s.day(n,{width:"wide",context:"formatting"})||s.day(n,{width:"abbreviated",context:"formatting"})||s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"}),o)}}},{key:"validate",value:function(n,a){return a>=1&&a<=7}},{key:"set",value:function(n,a,s){return n=zfe(n,s),n.setUTCHours(0,0,0,0),n}}]),r}(zr),Ufe=function(e){Pr(r,e);var t=Dr(r);function r(){var i;vr(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return i=t.call.apply(t,[this].concat(a)),lt(ht(i),"priority",80),lt(ht(i),"incompatibleTokens",["b","B","H","k","t","T"]),i}return yr(r,[{key:"parse",value:function(n,a,s){switch(a){case"a":case"aa":case"aaa":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"})||s.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaaa":return s.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(n,{width:"wide",context:"formatting"})||s.dayPeriod(n,{width:"abbreviated",context:"formatting"})||s.dayPeriod(n,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(n,a,s){return n.setUTCHours(dR(s),0,0,0),n}}]),r}(zr),jfe=function(e){Pr(r,e);var t=Dr(r);function r(){var i;vr(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return i=t.call.apply(t,[this].concat(a)),lt(ht(i),"priority",80),lt(ht(i),"incompatibleTokens",["a","B","H","k","t","T"]),i}return yr(r,[{key:"parse",value:function(n,a,s){switch(a){case"b":case"bb":case"bbb":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"})||s.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbbb":return s.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(n,{width:"wide",context:"formatting"})||s.dayPeriod(n,{width:"abbreviated",context:"formatting"})||s.dayPeriod(n,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(n,a,s){return n.setUTCHours(dR(s),0,0,0),n}}]),r}(zr),Vfe=function(e){Pr(r,e);var t=Dr(r);function r(){var i;vr(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return i=t.call.apply(t,[this].concat(a)),lt(ht(i),"priority",80),lt(ht(i),"incompatibleTokens",["a","b","t","T"]),i}return yr(r,[{key:"parse",value:function(n,a,s){switch(a){case"B":case"BB":case"BBB":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"})||s.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBBB":return s.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(n,{width:"wide",context:"formatting"})||s.dayPeriod(n,{width:"abbreviated",context:"formatting"})||s.dayPeriod(n,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(n,a,s){return n.setUTCHours(dR(s),0,0,0),n}}]),r}(zr),Hfe=function(e){Pr(r,e);var t=Dr(r);function r(){var i;vr(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return i=t.call.apply(t,[this].concat(a)),lt(ht(i),"priority",70),lt(ht(i),"incompatibleTokens",["H","K","k","t","T"]),i}return yr(r,[{key:"parse",value:function(n,a,s){switch(a){case"h":return Si(Yi.hour12h,n);case"ho":return s.ordinalNumber(n,{unit:"hour"});default:return zi(a.length,n)}}},{key:"validate",value:function(n,a){return a>=1&&a<=12}},{key:"set",value:function(n,a,s){var o=n.getUTCHours()>=12;return o&&s<12?n.setUTCHours(s+12,0,0,0):!o&&s===12?n.setUTCHours(0,0,0,0):n.setUTCHours(s,0,0,0),n}}]),r}(zr),Gfe=function(e){Pr(r,e);var t=Dr(r);function r(){var i;vr(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return i=t.call.apply(t,[this].concat(a)),lt(ht(i),"priority",70),lt(ht(i),"incompatibleTokens",["a","b","h","K","k","t","T"]),i}return yr(r,[{key:"parse",value:function(n,a,s){switch(a){case"H":return Si(Yi.hour23h,n);case"Ho":return s.ordinalNumber(n,{unit:"hour"});default:return zi(a.length,n)}}},{key:"validate",value:function(n,a){return a>=0&&a<=23}},{key:"set",value:function(n,a,s){return n.setUTCHours(s,0,0,0),n}}]),r}(zr),Wfe=function(e){Pr(r,e);var t=Dr(r);function r(){var i;vr(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return i=t.call.apply(t,[this].concat(a)),lt(ht(i),"priority",70),lt(ht(i),"incompatibleTokens",["h","H","k","t","T"]),i}return yr(r,[{key:"parse",value:function(n,a,s){switch(a){case"K":return Si(Yi.hour11h,n);case"Ko":return s.ordinalNumber(n,{unit:"hour"});default:return zi(a.length,n)}}},{key:"validate",value:function(n,a){return a>=0&&a<=11}},{key:"set",value:function(n,a,s){var o=n.getUTCHours()>=12;return o&&s<12?n.setUTCHours(s+12,0,0,0):n.setUTCHours(s,0,0,0),n}}]),r}(zr),$fe=function(e){Pr(r,e);var t=Dr(r);function r(){var i;vr(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return i=t.call.apply(t,[this].concat(a)),lt(ht(i),"priority",70),lt(ht(i),"incompatibleTokens",["a","b","h","H","K","t","T"]),i}return yr(r,[{key:"parse",value:function(n,a,s){switch(a){case"k":return Si(Yi.hour24h,n);case"ko":return s.ordinalNumber(n,{unit:"hour"});default:return zi(a.length,n)}}},{key:"validate",value:function(n,a){return a>=1&&a<=24}},{key:"set",value:function(n,a,s){var o=s<=24?s%24:s;return n.setUTCHours(o,0,0,0),n}}]),r}(zr),Yfe=function(e){Pr(r,e);var t=Dr(r);function r(){var i;vr(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return i=t.call.apply(t,[this].concat(a)),lt(ht(i),"priority",60),lt(ht(i),"incompatibleTokens",["t","T"]),i}return yr(r,[{key:"parse",value:function(n,a,s){switch(a){case"m":return Si(Yi.minute,n);case"mo":return s.ordinalNumber(n,{unit:"minute"});default:return zi(a.length,n)}}},{key:"validate",value:function(n,a){return a>=0&&a<=59}},{key:"set",value:function(n,a,s){return n.setUTCMinutes(s,0,0),n}}]),r}(zr),qfe=function(e){Pr(r,e);var t=Dr(r);function r(){var i;vr(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return i=t.call.apply(t,[this].concat(a)),lt(ht(i),"priority",50),lt(ht(i),"incompatibleTokens",["t","T"]),i}return yr(r,[{key:"parse",value:function(n,a,s){switch(a){case"s":return Si(Yi.second,n);case"so":return s.ordinalNumber(n,{unit:"second"});default:return zi(a.length,n)}}},{key:"validate",value:function(n,a){return a>=0&&a<=59}},{key:"set",value:function(n,a,s){return n.setUTCSeconds(s,0),n}}]),r}(zr),Xfe=function(e){Pr(r,e);var t=Dr(r);function r(){var i;vr(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return i=t.call.apply(t,[this].concat(a)),lt(ht(i),"priority",30),lt(ht(i),"incompatibleTokens",["t","T"]),i}return yr(r,[{key:"parse",value:function(n,a){var s=function(l){return Math.floor(l*Math.pow(10,-a.length+3))};return qi(zi(a.length,n),s)}},{key:"set",value:function(n,a,s){return n.setUTCMilliseconds(s),n}}]),r}(zr),Qfe=function(e){Pr(r,e);var t=Dr(r);function r(){var i;vr(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return i=t.call.apply(t,[this].concat(a)),lt(ht(i),"priority",10),lt(ht(i),"incompatibleTokens",["t","T","x"]),i}return yr(r,[{key:"parse",value:function(n,a){switch(a){case"X":return nu(iu.basicOptionalMinutes,n);case"XX":return nu(iu.basic,n);case"XXXX":return nu(iu.basicOptionalSeconds,n);case"XXXXX":return nu(iu.extendedOptionalSeconds,n);case"XXX":default:return nu(iu.extended,n)}}},{key:"set",value:function(n,a,s){return a.timestampIsSet?n:new Date(n.getTime()-s)}}]),r}(zr),Kfe=function(e){Pr(r,e);var t=Dr(r);function r(){var i;vr(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return i=t.call.apply(t,[this].concat(a)),lt(ht(i),"priority",10),lt(ht(i),"incompatibleTokens",["t","T","X"]),i}return yr(r,[{key:"parse",value:function(n,a){switch(a){case"x":return nu(iu.basicOptionalMinutes,n);case"xx":return nu(iu.basic,n);case"xxxx":return nu(iu.basicOptionalSeconds,n);case"xxxxx":return nu(iu.extendedOptionalSeconds,n);case"xxx":default:return nu(iu.extended,n)}}},{key:"set",value:function(n,a,s){return a.timestampIsSet?n:new Date(n.getTime()-s)}}]),r}(zr),Zfe=function(e){Pr(r,e);var t=Dr(r);function r(){var i;vr(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return i=t.call.apply(t,[this].concat(a)),lt(ht(i),"priority",40),lt(ht(i),"incompatibleTokens","*"),i}return yr(r,[{key:"parse",value:function(n){return k9(n)}},{key:"set",value:function(n,a,s){return[new Date(s*1e3),{timestampIsSet:!0}]}}]),r}(zr),Jfe=function(e){Pr(r,e);var t=Dr(r);function r(){var i;vr(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return i=t.call.apply(t,[this].concat(a)),lt(ht(i),"priority",20),lt(ht(i),"incompatibleTokens","*"),i}return yr(r,[{key:"parse",value:function(n){return k9(n)}},{key:"set",value:function(n,a,s){return[new Date(s),{timestampIsSet:!0}]}}]),r}(zr),epe={G:new yfe,y:new xfe,Y:new bfe,R:new wfe,u:new _fe,Q:new Sfe,q:new Efe,M:new Mfe,L:new Cfe,w:new Tfe,I:new Dfe,d:new Rfe,D:new kfe,E:new Lfe,e:new Bfe,c:new Nfe,i:new Ffe,a:new Ufe,b:new jfe,B:new Vfe,h:new Hfe,H:new Gfe,K:new Wfe,k:new $fe,m:new Yfe,s:new qfe,S:new Xfe,X:new Qfe,x:new Kfe,t:new Zfe,T:new Jfe},tpe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,rpe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,ipe=/^'([^]*?)'?$/,npe=/''/g,ape=/\S/,spe=/[a-zA-Z]/;function N9(e,t,r,i){var n,a,s,o,l,u,h,c,d,f,m,p,g,v,y,x,b,_;K(3,arguments);var w=String(e),E=String(t),S=mn(),C=(n=(a=i==null?void 0:i.locale)!==null&&a!==void 0?a:S.locale)!==null&&n!==void 0?n:lv;if(!C.match)throw new RangeError("locale must contain match property");var M=Qe((s=(o=(l=(u=i==null?void 0:i.firstWeekContainsDate)!==null&&u!==void 0?u:i==null||(h=i.locale)===null||h===void 0||(c=h.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&l!==void 0?l:S.firstWeekContainsDate)!==null&&o!==void 0?o:(d=S.locale)===null||d===void 0||(f=d.options)===null||f===void 0?void 0:f.firstWeekContainsDate)!==null&&s!==void 0?s:1);if(!(M>=1&&M<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var P=Qe((m=(p=(g=(v=i==null?void 0:i.weekStartsOn)!==null&&v!==void 0?v:i==null||(y=i.locale)===null||y===void 0||(x=y.options)===null||x===void 0?void 0:x.weekStartsOn)!==null&&g!==void 0?g:S.weekStartsOn)!==null&&p!==void 0?p:(b=S.locale)===null||b===void 0||(_=b.options)===null||_===void 0?void 0:_.weekStartsOn)!==null&&m!==void 0?m:0);if(!(P>=0&&P<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(E==="")return w===""?ue(r):new Date(NaN);var I={firstWeekContainsDate:M,weekStartsOn:P,locale:C},k=[new vfe],L=E.match(rpe).map(function(ae){var Z=ae[0];if(Z in rD){var he=rD[Z];return he(ae,C.formatLong)}return ae}).join("").match(tpe),O=[],F=q4(L),z;try{var B=function(){var Z=z.value;!(i!=null&&i.useAdditionalWeekYearTokens)&&y9(Z)&&Z_(Z,E,e),!(i!=null&&i.useAdditionalDayOfYearTokens)&&v9(Z)&&Z_(Z,E,e);var he=Z[0],ge=epe[he];if(ge){var xe=ge.incompatibleTokens;if(Array.isArray(xe)){var ye=O.find(function(Re){return xe.includes(Re.token)||Re.token===he});if(ye)throw new RangeError("The format string mustn't contain `".concat(ye.fullToken,"` and `").concat(Z,"` at the same time"))}else if(ge.incompatibleTokens==="*"&&O.length>0)throw new RangeError("The format string mustn't contain `".concat(Z,"` and any other token at the same time"));O.push({token:he,fullToken:Z});var Ne=ge.run(w,Z,C.match,I);if(!Ne)return{v:new Date(NaN)};k.push(Ne.setter),w=Ne.rest}else{if(he.match(spe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+he+"`");if(Z==="''"?Z="'":he==="'"&&(Z=ope(Z)),w.indexOf(Z)===0)w=w.slice(Z.length);else return{v:new Date(NaN)}}};for(F.s();!(z=F.n()).done;){var V=B();if(Ja(V)==="object")return V.v}}catch(ae){F.e(ae)}finally{F.f()}if(w.length>0&&ape.test(w))return new Date(NaN);var R=k.map(function(ae){return ae.priority}).sort(function(ae,Z){return Z-ae}).filter(function(ae,Z,he){return he.indexOf(ae)===Z}).map(function(ae){return k.filter(function(Z){return Z.priority===ae}).sort(function(Z,he){return he.subPriority-Z.subPriority})}).map(function(ae){return ae[0]}),H=ue(r);if(isNaN(H.getTime()))return new Date(NaN);var W=Rg(H,es(H)),te={},G=q4(R),ie;try{for(G.s();!(ie=G.n()).done;){var q=ie.value;if(!q.validate(W,I))return new Date(NaN);var le=q.set(W,te,I);Array.isArray(le)?(W=le[0],W1(te,le[1])):W=le}}catch(ae){G.e(ae)}finally{G.f()}return W}function ope(e){return e.match(ipe)[1].replace(npe,"'")}function lpe(e,t,r){return K(2,arguments),Tc(N9(e,t,new Date,r))}function upe(e){return K(1,arguments),ue(e).getDay()===1}function cpe(e){return K(1,arguments),ue(e).getTime()<Date.now()}function iD(e){K(1,arguments);var t=ue(e);return t.setMinutes(0,0,0),t}function z9(e,t){K(2,arguments);var r=iD(e),i=iD(t);return r.getTime()===i.getTime()}function pR(e,t,r){K(2,arguments);var i=Uo(e,r),n=Uo(t,r);return i.getTime()===n.getTime()}function F9(e,t){return K(2,arguments),pR(e,t,{weekStartsOn:1})}function hpe(e,t){K(2,arguments);var r=td(e),i=td(t);return r.getTime()===i.getTime()}function U9(e,t){K(2,arguments);var r=K_(e),i=K_(t);return r.getTime()===i.getTime()}function j9(e,t){K(2,arguments);var r=ue(e),i=ue(t);return r.getFullYear()===i.getFullYear()&&r.getMonth()===i.getMonth()}function V9(e,t){K(2,arguments);var r=s1(e),i=s1(t);return r.getTime()===i.getTime()}function nD(e){K(1,arguments);var t=ue(e);return t.setMilliseconds(0),t}function H9(e,t){K(2,arguments);var r=nD(e),i=nD(t);return r.getTime()===i.getTime()}function G9(e,t){K(2,arguments);var r=ue(e),i=ue(t);return r.getFullYear()===i.getFullYear()}function dpe(e){return K(1,arguments),z9(Date.now(),e)}function fpe(e){return K(1,arguments),F9(e,Date.now())}function ppe(e){return K(1,arguments),U9(Date.now(),e)}function mpe(e){return K(1,arguments),j9(Date.now(),e)}function gpe(e){return K(1,arguments),V9(Date.now(),e)}function vpe(e){return K(1,arguments),H9(Date.now(),e)}function ype(e,t){return K(1,arguments),pR(e,Date.now(),t)}function xpe(e){return K(1,arguments),G9(e,Date.now())}function bpe(e){return K(1,arguments),ue(e).getDay()===4}function wpe(e){return K(1,arguments),G1(e,Date.now())}function _pe(e){return K(1,arguments),G1(e,_u(Date.now(),1))}function Spe(e){return K(1,arguments),ue(e).getDay()===2}function Epe(e){return K(1,arguments),ue(e).getDay()===3}function Mpe(e,t){K(2,arguments);var r=ue(e).getTime(),i=ue(t.start).getTime(),n=ue(t.end).getTime();if(!(i<=n))throw new RangeError("Invalid interval");return r>=i&&r<=n}function SE(e,t){K(2,arguments);var r=Qe(t);return _u(e,-r)}function Cpe(e){return K(1,arguments),G1(e,SE(Date.now(),1))}function Ape(e){K(1,arguments);var t=ue(e),r=t.getFullYear(),i=9+Math.floor(r/10)*10;return t.setFullYear(i+1,0,0),t.setHours(0,0,0,0),t}function W9(e,t){var r,i,n,a,s,o,l,u;K(1,arguments);var h=mn(),c=Qe((r=(i=(n=(a=t==null?void 0:t.weekStartsOn)!==null&&a!==void 0?a:t==null||(s=t.locale)===null||s===void 0||(o=s.options)===null||o===void 0?void 0:o.weekStartsOn)!==null&&n!==void 0?n:h.weekStartsOn)!==null&&i!==void 0?i:(l=h.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&r!==void 0?r:0);if(!(c>=0&&c<=6))throw new RangeError("weekStartsOn must be between 0 and 6");var d=ue(e),f=d.getDay(),m=(f<c?-7:0)+6-(f-c);return d.setHours(0,0,0,0),d.setDate(d.getDate()+m),d}function Tpe(e){return K(1,arguments),W9(e,{weekStartsOn:1})}function Ppe(e){K(1,arguments);var t=Nf(e),r=new Date(0);r.setFullYear(t+1,0,4),r.setHours(0,0,0,0);var i=Ac(r);return i.setDate(i.getDate()-1),i}function Dpe(e){K(1,arguments);var t=ue(e),r=t.getMonth(),i=r-r%3+3;return t.setMonth(i,0),t.setHours(0,0,0,0),t}function Ope(e){K(1,arguments);var t=ue(e),r=t.getFullYear();return t.setFullYear(r+1,0,0),t.setHours(0,0,0,0),t}var Ipe=/(\w)\1*|''|'(''|[^'])+('|$)|./g,Rpe=/^'([^]*?)'?$/,kpe=/''/g,Lpe=/[a-zA-Z]/;function Bpe(e,t){K(2,arguments);var r=ue(e);if(!Tc(r))throw new RangeError("Invalid time value");var i=es(r),n=Rg(r,i),a=t.match(Ipe);if(!a)return"";var s=a.map(function(o){if(o==="''")return"'";var l=o[0];if(l==="'")return Npe(o);var u=$u[l];if(u)return u(n,o);if(l.match(Lpe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+l+"`");return o}).join("");return s}function Npe(e){var t=e.match(Rpe);return t?t[1].replace(kpe,"'"):e}var Q4=365.2425;function zpe(e){var t=e.years,r=e.months,i=e.weeks,n=e.days,a=e.hours,s=e.minutes,o=e.seconds;K(1,arguments);var l=0;t&&(l+=t*Q4),r&&(l+=r*(Q4/12)),i&&(l+=i*7),n&&(l+=n);var u=l*24*60*60;return a&&(u+=a*60*60),s&&(u+=s*60),o&&(u+=o),Math.round(u*1e3)}function Fpe(e){K(1,arguments);var t=e/Kf;return Math.floor(t)}function Upe(e){K(1,arguments);var t=e/Qf;return Math.floor(t)}function jpe(e){K(1,arguments);var t=e/gE;return Math.floor(t)}function Vpe(e){K(1,arguments);var t=e/eR;return Math.floor(t)}function Hpe(e){return K(1,arguments),Math.floor(e*Qf)}function Gpe(e){return K(1,arguments),Math.floor(e*vE)}function Wpe(e){K(1,arguments);var t=e/tR;return Math.floor(t)}function $pe(e){K(1,arguments);var t=e/rR;return Math.floor(t)}function hd(e,t){K(2,arguments);var r=t-_E(e);return r<=0&&(r+=7),_u(e,r)}function Ype(e){return K(1,arguments),hd(e,5)}function qpe(e){return K(1,arguments),hd(e,1)}function Xpe(e){return K(1,arguments),hd(e,6)}function Qpe(e){return K(1,arguments),hd(e,0)}function Kpe(e){return K(1,arguments),hd(e,4)}function Zpe(e){return K(1,arguments),hd(e,2)}function Jpe(e){return K(1,arguments),hd(e,3)}function eme(e,t){var r;K(1,arguments);var i=Qe((r=t==null?void 0:t.additionalDigits)!==null&&r!==void 0?r:2);if(i!==2&&i!==1&&i!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(!(typeof e=="string"||Object.prototype.toString.call(e)==="[object String]"))return new Date(NaN);var n=nme(e),a;if(n.date){var s=ame(n.date,i);a=sme(s.restDateString,s.year)}if(!a||isNaN(a.getTime()))return new Date(NaN);var o=a.getTime(),l=0,u;if(n.time&&(l=ome(n.time),isNaN(l)))return new Date(NaN);if(n.timezone){if(u=lme(n.timezone),isNaN(u))return new Date(NaN)}else{var h=new Date(o+l),c=new Date(0);return c.setFullYear(h.getUTCFullYear(),h.getUTCMonth(),h.getUTCDate()),c.setHours(h.getUTCHours(),h.getUTCMinutes(),h.getUTCSeconds(),h.getUTCMilliseconds()),c}return new Date(o+l+u)}var qx={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},tme=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,rme=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,ime=/^([+-])(\d{2})(?::?(\d{2}))?$/;function nme(e){var t={},r=e.split(qx.dateTimeDelimiter),i;if(r.length>2)return t;if(/:/.test(r[0])?i=r[0]:(t.date=r[0],i=r[1],qx.timeZoneDelimiter.test(t.date)&&(t.date=e.split(qx.timeZoneDelimiter)[0],i=e.substr(t.date.length,e.length))),i){var n=qx.timezone.exec(i);n?(t.time=i.replace(n[1],""),t.timezone=n[1]):t.time=i}return t}function ame(e,t){var r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),i=e.match(r);if(!i)return{year:NaN,restDateString:""};var n=i[1]?parseInt(i[1]):null,a=i[2]?parseInt(i[2]):null;return{year:a===null?n:a*100,restDateString:e.slice((i[1]||i[2]).length)}}function sme(e,t){if(t===null)return new Date(NaN);var r=e.match(tme);if(!r)return new Date(NaN);var i=!!r[4],n=Yv(r[1]),a=Yv(r[2])-1,s=Yv(r[3]),o=Yv(r[4]),l=Yv(r[5])-1;if(i)return fme(t,o,l)?ume(t,o,l):new Date(NaN);var u=new Date(0);return!hme(t,a,s)||!dme(t,n)?new Date(NaN):(u.setUTCFullYear(t,a,Math.max(n,s)),u)}function Yv(e){return e?parseInt(e):1}function ome(e){var t=e.match(rme);if(!t)return NaN;var r=xC(t[1]),i=xC(t[2]),n=xC(t[3]);return pme(r,i,n)?r*Kf+i*Qf+n*1e3:NaN}function xC(e){return e&&parseFloat(e.replace(",","."))||0}function lme(e){if(e==="Z")return 0;var t=e.match(ime);if(!t)return 0;var r=t[1]==="+"?-1:1,i=parseInt(t[2]),n=t[3]&&parseInt(t[3])||0;return mme(i,n)?r*(i*Kf+n*Qf):NaN}function ume(e,t,r){var i=new Date(0);i.setUTCFullYear(e,0,4);var n=i.getUTCDay()||7,a=(t-1)*7+r+1-n;return i.setUTCDate(i.getUTCDate()+a),i}var cme=[31,null,31,30,31,30,31,31,30,31,30,31];function $9(e){return e%400===0||e%4===0&&e%100!==0}function hme(e,t,r){return t>=0&&t<=11&&r>=1&&r<=(cme[t]||($9(e)?29:28))}function dme(e,t){return t>=1&&t<=($9(e)?366:365)}function fme(e,t,r){return t>=1&&t<=53&&r>=0&&r<=6}function pme(e,t,r){return e===24?t===0&&r===0:r>=0&&r<60&&t>=0&&t<60&&e>=0&&e<25}function mme(e,t){return t>=0&&t<=59}function gme(e){if(K(1,arguments),typeof e=="string"){var t=e.match(/(\d{4})-(\d{2})-(\d{2})[T ](\d{2}):(\d{2}):(\d{2})(?:\.(\d{0,7}))?(?:Z|(.)(\d{2}):?(\d{2})?)?/);return t?new Date(Date.UTC(+t[1],+t[2]-1,+t[3],+t[4]-(+t[9]||0)*(t[8]=="-"?-1:1),+t[5]-(+t[10]||0)*(t[8]=="-"?-1:1),+t[6],+((t[7]||"0")+"00").substring(0,3))):new Date(NaN)}return ue(e)}function dd(e,t){K(2,arguments);var r=_E(e)-t;return r<=0&&(r+=7),SE(e,r)}function vme(e){return K(1,arguments),dd(e,5)}function yme(e){return K(1,arguments),dd(e,1)}function xme(e){return K(1,arguments),dd(e,6)}function bme(e){return K(1,arguments),dd(e,0)}function wme(e){return K(1,arguments),dd(e,4)}function _me(e){return K(1,arguments),dd(e,2)}function Sme(e){return K(1,arguments),dd(e,3)}function Eme(e){return K(1,arguments),Math.floor(e*tR)}function Mme(e){K(1,arguments);var t=e/iR;return Math.floor(t)}function Cme(e,t){var r;if(arguments.length<1)throw new TypeError("1 argument required, but only none provided present");var i=Qe((r=t==null?void 0:t.nearestTo)!==null&&r!==void 0?r:1);if(i<1||i>30)throw new RangeError("`options.nearestTo` must be between 1 and 30");var n=ue(e),a=n.getSeconds(),s=n.getMinutes()+a/60,o=ov(t==null?void 0:t.roundingMethod),l=o(s/i)*i,u=s%i,h=Math.round(u/i)*i;return new Date(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),l+h)}function Ame(e){K(1,arguments);var t=e/H1;return Math.floor(t)}function Tme(e){return K(1,arguments),e*gE}function Pme(e){K(1,arguments);var t=e/vE;return Math.floor(t)}function mR(e,t){K(2,arguments);var r=ue(e),i=Qe(t),n=r.getFullYear(),a=r.getDate(),s=new Date(0);s.setFullYear(n,i,15),s.setHours(0,0,0,0);var o=E9(s);return r.setMonth(i,Math.min(a,o)),r}function Dme(e,t){if(K(2,arguments),Ja(t)!=="object"||t===null)throw new RangeError("values parameter must be an object");var r=ue(e);return isNaN(r.getTime())?new Date(NaN):(t.year!=null&&r.setFullYear(t.year),t.month!=null&&(r=mR(r,t.month)),t.date!=null&&r.setDate(Qe(t.date)),t.hours!=null&&r.setHours(Qe(t.hours)),t.minutes!=null&&r.setMinutes(Qe(t.minutes)),t.seconds!=null&&r.setSeconds(Qe(t.seconds)),t.milliseconds!=null&&r.setMilliseconds(Qe(t.milliseconds)),r)}function Ome(e,t){K(2,arguments);var r=ue(e),i=Qe(t);return r.setDate(i),r}function Ime(e,t,r){var i,n,a,s,o,l,u,h;K(2,arguments);var c=mn(),d=Qe((i=(n=(a=(s=r==null?void 0:r.weekStartsOn)!==null&&s!==void 0?s:r==null||(o=r.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&a!==void 0?a:c.weekStartsOn)!==null&&n!==void 0?n:(u=c.locale)===null||u===void 0||(h=u.options)===null||h===void 0?void 0:h.weekStartsOn)!==null&&i!==void 0?i:0);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var f=ue(e),m=Qe(t),p=f.getDay(),g=m%7,v=(g+7)%7,y=7-d,x=m<0||m>6?m-(p+y)%7:(v+y)%7-(p+y)%7;return _u(f,x)}function Rme(e,t){K(2,arguments);var r=ue(e),i=Qe(t);return r.setMonth(0),r.setDate(i),r}function kme(e){K(1,arguments);var t={},r=mn();for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i]);for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]===void 0?delete t[n]:t[n]=e[n]);Ice(t)}function Lme(e,t){K(2,arguments);var r=ue(e),i=Qe(t);return r.setHours(i),r}function Bme(e,t){K(2,arguments);var r=ue(e),i=Qe(t),n=C9(r),a=i-n;return _u(r,a)}function Nme(e,t){K(2,arguments);var r=ue(e),i=Qe(t),n=A9(r)-i;return r.setDate(r.getDate()-n*7),r}function zme(e,t){K(2,arguments);var r=ue(e),i=Qe(t);return r.setMilliseconds(i),r}function Fme(e,t){K(2,arguments);var r=ue(e),i=Qe(t);return r.setMinutes(i),r}function Ume(e,t){K(2,arguments);var r=ue(e),i=Qe(t),n=Math.floor(r.getMonth()/3)+1,a=i-n;return mR(r,r.getMonth()+a*3)}function jme(e,t){K(2,arguments);var r=ue(e),i=Qe(t);return r.setSeconds(i),r}function Vme(e,t,r){K(2,arguments);var i=ue(e),n=Qe(t),a=D9(i,r)-n;return i.setDate(i.getDate()-a*7),i}function Hme(e,t,r){var i,n,a,s,o,l,u,h;K(2,arguments);var c=mn(),d=Qe((i=(n=(a=(s=r==null?void 0:r.firstWeekContainsDate)!==null&&s!==void 0?s:r==null||(o=r.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&a!==void 0?a:c.firstWeekContainsDate)!==null&&n!==void 0?n:(u=c.locale)===null||u===void 0||(h=u.options)===null||h===void 0?void 0:h.firstWeekContainsDate)!==null&&i!==void 0?i:1),f=ue(e),m=Qe(t),p=xu(f,eS(f,r)),g=new Date(0);return g.setFullYear(m,0,d),g.setHours(0,0,0,0),f=eS(g,r),f.setDate(f.getDate()+p),f}function Gme(e,t){K(2,arguments);var r=ue(e),i=Qe(t);return isNaN(r.getTime())?new Date(NaN):(r.setFullYear(i),r)}function Wme(e){K(1,arguments);var t=ue(e),r=t.getFullYear(),i=Math.floor(r/10)*10;return t.setFullYear(i,0,1),t.setHours(0,0,0,0),t}function $me(){return Ig(Date.now())}function Yme(){var e=new Date,t=e.getFullYear(),r=e.getMonth(),i=e.getDate(),n=new Date(0);return n.setFullYear(t,r,i+1),n.setHours(0,0,0,0),n}function qme(){var e=new Date,t=e.getFullYear(),r=e.getMonth(),i=e.getDate(),n=new Date(0);return n.setFullYear(t,r,i-1),n.setHours(0,0,0,0),n}function Y9(e,t){K(2,arguments);var r=Qe(t);return j1(e,-r)}function Xme(e,t){if(K(2,arguments),!t||Ja(t)!=="object")return new Date(NaN);var r=t.years?Qe(t.years):0,i=t.months?Qe(t.months):0,n=t.weeks?Qe(t.weeks):0,a=t.days?Qe(t.days):0,s=t.hours?Qe(t.hours):0,o=t.minutes?Qe(t.minutes):0,l=t.seconds?Qe(t.seconds):0,u=Y9(e,i+r*12),h=SE(u,a+n*7),c=o+s*60,d=l+c*60,f=d*1e3,m=new Date(h.getTime()-f);return m}function Qme(e,t){K(2,arguments);var r=Qe(t);return YW(e,-r)}function Kme(e,t){K(2,arguments);var r=Qe(t);return QI(e,-r)}function Zme(e,t){K(2,arguments);var r=Qe(t);return KI(e,-r)}function Jme(e,t){K(2,arguments);var r=Qe(t);return ZI(e,-r)}function ege(e,t){K(2,arguments);var r=Qe(t);return KW(e,-r)}function tge(e,t){K(2,arguments);var r=Qe(t);return mE(e,-r)}function rge(e,t){K(2,arguments);var r=Qe(t);return ZW(e,-r)}function ige(e){return K(1,arguments),Math.floor(e*JI)}function nge(e){return K(1,arguments),Math.floor(e*rR)}function age(e){return K(1,arguments),Math.floor(e*iR)}const sge=Object.freeze(Object.defineProperty({__proto__:null,add:sm,addBusinessDays:YW,addDays:_u,addHours:QI,addISOWeekYears:QW,addMilliseconds:V1,addMinutes:KI,addMonths:j1,addQuarters:ZI,addSeconds:KW,addWeeks:mE,addYears:ZW,areIntervalsOverlapping:Lce,clamp:Bce,closestIndexTo:Nce,closestTo:zce,compareAsc:wl,compareDesc:Fce,daysInWeek:JI,daysInYear:t9,daysToWeeks:jce,differenceInBusinessDays:Vce,differenceInCalendarDays:xu,differenceInCalendarISOWeekYears:s9,differenceInCalendarISOWeeks:Gce,differenceInCalendarMonths:Y_,differenceInCalendarQuarters:Uw,differenceInCalendarWeeks:q_,differenceInCalendarYears:my,differenceInDays:sR,differenceInHours:X_,differenceInISOWeekYears:Yce,differenceInMilliseconds:xE,differenceInMinutes:Q_,differenceInMonths:bE,differenceInQuarters:qce,differenceInSeconds:eg,differenceInWeeks:Xce,differenceInYears:u9,eachDayOfInterval:c9,eachHourOfInterval:Qce,eachMinuteOfInterval:Kce,eachMonthOfInterval:Zce,eachQuarterOfInterval:Jce,eachWeekOfInterval:ehe,eachWeekendOfInterval:uR,eachWeekendOfMonth:the,eachWeekendOfYear:rhe,eachYearOfInterval:ihe,endOfDay:oR,endOfDecade:nhe,endOfHour:ahe,endOfISOWeek:she,endOfISOWeekYear:ohe,endOfMinute:lhe,endOfMonth:lR,endOfQuarter:uhe,endOfSecond:che,endOfToday:hhe,endOfTomorrow:dhe,endOfWeek:d9,endOfYear:h9,endOfYesterday:fhe,format:x9,formatDistance:w9,formatDistanceStrict:_9,formatDistanceToNow:xde,formatDistanceToNowStrict:bde,formatDuration:_de,formatISO:Sde,formatISO9075:Ede,formatISODuration:Mde,formatRFC3339:Cde,formatRFC7231:Pde,formatRelative:Dde,fromUnixTime:Ode,getDate:S9,getDay:_E,getDayOfYear:Ide,getDaysInMonth:E9,getDaysInYear:Rde,getDecade:kde,getDefaultOptions:Lde,getHours:Bde,getISODay:C9,getISOWeek:A9,getISOWeekYear:Nf,getISOWeeksInYear:Fde,getMilliseconds:Ude,getMinutes:jde,getMonth:Vde,getOverlappingDaysInIntervals:Gde,getQuarter:tD,getSeconds:Wde,getTime:T9,getUnixTime:$de,getWeek:D9,getWeekOfMonth:qde,getWeekYear:P9,getWeeksInMonth:Xde,getYear:Qde,hoursToMilliseconds:Kde,hoursToMinutes:Zde,hoursToSeconds:Jde,intervalToDuration:efe,intlFormat:tfe,intlFormatDistance:ife,isAfter:nfe,isBefore:afe,isDate:a9,isEqual:sfe,isExists:ofe,isFirstDayOfMonth:lfe,isFriday:ufe,isFuture:cfe,isLastDayOfMonth:l9,isLeapYear:M9,isMatch:lpe,isMonday:upe,isPast:cpe,isSameDay:G1,isSameHour:z9,isSameISOWeek:F9,isSameISOWeekYear:hpe,isSameMinute:U9,isSameMonth:j9,isSameQuarter:V9,isSameSecond:H9,isSameWeek:pR,isSameYear:G9,isSaturday:$W,isSunday:XI,isThisHour:dpe,isThisISOWeek:fpe,isThisMinute:ppe,isThisMonth:mpe,isThisQuarter:gpe,isThisSecond:vpe,isThisWeek:ype,isThisYear:xpe,isThursday:bpe,isToday:wpe,isTomorrow:_pe,isTuesday:Spe,isValid:Tc,isWednesday:Epe,isWeekend:Jm,isWithinInterval:Mpe,isYesterday:Cpe,lastDayOfDecade:Ape,lastDayOfISOWeek:Tpe,lastDayOfISOWeekYear:Ppe,lastDayOfMonth:O9,lastDayOfQuarter:Dpe,lastDayOfWeek:W9,lastDayOfYear:Ope,lightFormat:Bpe,max:JW,maxTime:r9,milliseconds:zpe,millisecondsInHour:Kf,millisecondsInMinute:Qf,millisecondsInSecond:gE,millisecondsToHours:Fpe,millisecondsToMinutes:Upe,millisecondsToSeconds:jpe,min:e9,minTime:Uce,minutesInHour:eR,minutesToHours:Vpe,minutesToMilliseconds:Hpe,minutesToSeconds:Gpe,monthsInQuarter:tR,monthsInYear:rR,monthsToQuarters:Wpe,monthsToYears:$pe,nextDay:hd,nextFriday:Ype,nextMonday:qpe,nextSaturday:Xpe,nextSunday:Qpe,nextThursday:Kpe,nextTuesday:Zpe,nextWednesday:Jpe,parse:N9,parseISO:eme,parseJSON:gme,previousDay:dd,previousFriday:vme,previousMonday:yme,previousSaturday:xme,previousSunday:bme,previousThursday:wme,previousTuesday:_me,previousWednesday:Sme,quartersInYear:iR,quartersToMonths:Eme,quartersToYears:Mme,roundToNearestMinutes:Cme,secondsInDay:yE,secondsInHour:H1,secondsInMinute:vE,secondsInMonth:aR,secondsInQuarter:n9,secondsInWeek:i9,secondsInYear:nR,secondsToHours:Ame,secondsToMilliseconds:Tme,secondsToMinutes:Pme,set:Dme,setDate:Ome,setDay:Ime,setDayOfYear:Rme,setDefaultOptions:kme,setHours:Lme,setISODay:Bme,setISOWeek:Nme,setISOWeekYear:XW,setMilliseconds:zme,setMinutes:Fme,setMonth:mR,setQuarter:Ume,setSeconds:jme,setWeek:Vme,setWeekYear:Hme,setYear:Gme,startOfDay:Ig,startOfDecade:Wme,startOfHour:iD,startOfISOWeek:Ac,startOfISOWeekYear:td,startOfMinute:K_,startOfMonth:wE,startOfQuarter:s1,startOfSecond:nD,startOfToday:$me,startOfTomorrow:Yme,startOfWeek:Uo,startOfWeekYear:eS,startOfYear:cR,startOfYesterday:qme,sub:Xme,subBusinessDays:Qme,subDays:SE,subHours:Kme,subISOWeekYears:o9,subMilliseconds:Rg,subMinutes:Zme,subMonths:Y9,subQuarters:Jme,subSeconds:ege,subWeeks:tge,subYears:rge,toDate:ue,weeksToDays:ige,yearsToMonths:nge,yearsToQuarters:age},Symbol.toStringTag,{value:"Module"})),oge=Z3(sge);Object.defineProperty(pE,"__esModule",{value:!0});var lge=Dce,Wa=oge,Lg=X;function q9(e){return e&&e.__esModule?e:{default:e}}var iS=q9(lge),Vi=q9(Lg);function nS(){return nS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},nS.apply(this,arguments)}const Wl="react-activity-calendar",uh=5,bC=8,X9=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],uge={months:X9,weekdays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],totalCount:"{{count}} activities in {{year}}",legend:{less:"Less",more:"More"}};function cge(){const[e,t]=Lg.useState("light"),r=i=>t(i.matches?"dark":"light");return Lg.useEffect(()=>{const i=window.matchMedia("(prefers-color-scheme: dark)");return t(i.matches?"dark":"light"),i.addEventListener("change",r),()=>{i.removeEventListener("change",r)}},[]),e}const hge="(prefers-reduced-motion: reduce)";function dge(){const[e,t]=Lg.useState(!0);return Lg.useEffect(()=>{const r=window.matchMedia(hge);t(r.matches);const i=n=>{t(n.matches)};return r.addEventListener("change",i),()=>{r.removeEventListener("change",i)}},[]),e}function fge(e,t=0){if(e.length===0)return[];const r=pge(e),i=Wa.parseISO(r[0].date),n=Wa.getDay(i)===t?i:Wa.subWeeks(Wa.nextDay(i,t),1),a=[...Array(Wa.differenceInCalendarDays(i,n)).fill(void 0),...r],s=Math.ceil(a.length/7);return Array(s).fill(void 0).map((o,l)=>a.slice(l*7,l*7+7))}function pge(e){const t={};for(const r of e)t[r.date]=r;return Wa.eachDayOfInterval({start:Wa.parseISO(e[0].date),end:Wa.parseISO(e[e.length-1].date)}).map(r=>{const i=Wa.formatISO(r,{representation:"date"});return t[i]?t[i]:{date:i,count:0,level:0}})}function mge(e,t=X9){return e.reduce((r,i,n)=>{const a=i.find(l=>l!==void 0);if(!a)throw new Error(`Unexpected error: Week ${n+1} is empty: [${i}].`);const s=t[Wa.getMonth(Wa.parseISO(a.date))],o=r[r.length-1];return n===0||o.label!==s?[...r,{weekIndex:n,label:s}]:r},[]).filter(({weekIndex:r},i,n)=>i===0?n[1]&&n[1].weekIndex-r>=3:i===n.length-1?e.slice(r).length>=3:!0)}function Sd(e,t){return t?`${Wl}__${e} ${t}`:`${Wl}__${e}`}function gge(){const e=new Date().getFullYear();return Wa.eachDayOfInterval({start:new Date(e,0,1),end:new Date(e,11,31)}).map(r=>({date:Wa.formatISO(r,{representation:"date"}),count:0,level:0}))}function vge(e,t,r,i){return e.reduce((n,a,s)=>{if(s%2!==0){const o=(s+t)%7,l=Math.ceil(yge(r[o],i).width);return Math.max(n,l)}return n},0)}function yge(e,t){if(typeof document>"u"||typeof window>"u")throw new Error("calcTextDimensions() requires browser APIs");if(t<1)throw new RangeError("fontSize must be positive");if(e.length===0)return{width:0,height:0};const r="http://www.w3.org/2000/svg",i=document.createElementNS(r,"svg");i.style.position="absolute",i.style.visibility="hidden",i.style.fontFamily=window.getComputedStyle(document.body).fontFamily,i.style.fontSize=`${t}px`;const n=document.createElementNS(r,"text");n.textContent=e,i.appendChild(n),document.body.appendChild(i);const a=n.getBBox();return document.body.removeChild(i),{width:a.width,height:a.height}}const wC=Q9({light:["hsl(0, 0%, 92%)","hsl(0, 0%, 26%)"],dark:["hsl(0, 0%, 20%)","hsl(0, 0%, 92%)"]});function Q9(e){return e?(xge(e),e.light=e.light??wC.light,e.dark=e.dark??wC.dark,{light:K4(e.light)?e.light:Z4(e.light),dark:K4(e.dark)?e.dark:Z4(e.dark)}):wC}function xge(e){if(typeof e!="object"||e.light===void 0&&e.dark===void 0)throw new Error(`The theme object must contain at least one of the fields "light" and "dark" with exactly 2 or ${uh} colors respectively.`);if(e.light){const{length:t}=e.light;if(t!==2&&t!==uh)throw new Error(`theme.light must contain exactly 2 or ${uh} colors, ${t} passed.`)}if(e.dark){const{length:t}=e.dark;if(t!==2&&t!==uh)throw new Error(`theme.dark must contain exactly 2 or ${uh} colors, ${t} passed.`)}}function K4(e){const t=e.find(r=>!iS.default.valid(r));if(t)throw new Error(`Invalid color "${t}" passed. All CSS color formats are accepted.`);return e.length===uh}function Z4(e){return iS.default.scale(e).mode("lch").colors(uh)}function bge(e,t){t===void 0&&(t={});var r=t.insertAt;if(!(!e||typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",r==="top"&&i.firstChild?i.insertBefore(n,i.firstChild):i.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}}var wge=`.styles-module_container__Zq3Ln {
  max-width: 100%; /* Do not remove - flexbox parents */
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.styles-module_container__Zq3Ln rect {
  stroke: rgba(0, 0, 0, 0.08);
  stroke-width: 1px;
  shape-rendering: geometricPrecision;
}

@media (prefers-color-scheme: dark) {
  .styles-module_container__Zq3Ln rect {
    stroke: rgba(255, 255, 255, 0.04);
  }
}

.styles-module_scrollContainer__RthI0 {
  max-width: 100%;
  overflow-x: auto;
  overflow-y: hidden;
}

.styles-module_calendar__-Ozc6 {
  display: block; /* SVGs are inline-block by default */
  overflow: visible; /* Weekday labels are rendered left of the container */
}

.styles-module_calendar__-Ozc6 text {
  fill: currentColor;
}

.styles-module_calendar__-Ozc6 [data-level='0'] {
  fill: var(--react-activity-calendar-level-0);
}

.styles-module_calendar__-Ozc6 [data-level='1'] {
  fill: var(--react-activity-calendar-level-1);
}

.styles-module_calendar__-Ozc6 [data-level='2'] {
  fill: var(--react-activity-calendar-level-2);
}

.styles-module_calendar__-Ozc6 [data-level='3'] {
  fill: var(--react-activity-calendar-level-3);
}

.styles-module_calendar__-Ozc6 [data-level='4'] {
  fill: var(--react-activity-calendar-level-4);
}

.styles-module_footer__IMos1 {
  display: flex;
  flex-wrap: wrap;
  gap: 4px 16px;
  white-space: nowrap;
}

.styles-module_legendColors__oZihX {
  margin-left: auto;
  display: flex;
  align-items: center;
  gap: 3px;
}

@keyframes styles-module_loadingAnimation__Vul35 {
  0% {
    fill: var(--react-activity-calendar-loading);
  }
  50% {
    fill: var(--react-activity-calendar-loading-active);
  }
  100% {
    fill: var(--react-activity-calendar-loading);
  }
}
`,_p={container:"styles-module_container__Zq3Ln",scrollContainer:"styles-module_scrollContainer__RthI0",calendar:"styles-module_calendar__-Ozc6",footer:"styles-module_footer__IMos1",legendColors:"styles-module_legendColors__oZihX",loadingAnimation:"styles-module_loadingAnimation__Vul35"};bge(wge);const K9=({data:e,blockMargin:t=4,blockRadius:r=2,blockSize:i=12,colorScheme:n=void 0,eventHandlers:a={},fontSize:s=14,hideColorLegend:o=!1,hideMonthLabels:l=!1,hideTotalCount:u=!1,labels:h=void 0,loading:c=!1,renderBlock:d=void 0,showWeekdayLabels:f=!1,style:m={},theme:p=void 0,totalCount:g=void 0,weekStart:v=0})=>{var V;const y=Q9(p),x=cge(),b=y[n??x],_=!dge();if(c&&(e=gge()),e.length===0)return null;const w=Wa.getYear(Wa.parseISO((V=e[0])==null?void 0:V.date)),E=fge(e,v),S=Object.assign({},uge,h),C=l?0:s+bC,M=f?vge(E[0],v,S.weekdays,s)+bC:void 0;function P(){return{width:E.length*(i+t)-t,height:C+(i+t)*7-t}}function I(R){return Object.keys(a).reduce((H,W)=>({...H,[W]:te=>{var G;return(G=a[W])==null?void 0:G.call(a,te)(R)}}),{})}function k(){return E.map((R,H)=>R.map((W,te)=>{if(!W)return null;const G=c&&_?{animation:`${_p.loadingAnimation} 1.75s ease-in-out infinite`,animationDelay:`${H*20+te*20}ms`}:void 0,ie=Vi.default.createElement("rect",nS({},I(W),{x:0,y:C+(i+t)*te,width:i,height:i,rx:r,ry:r,"data-date":W.date,"data-level":W.level,style:G}));return Vi.default.createElement(Lg.Fragment,{key:W.date},d?d(ie,W):ie)})).map((R,H)=>Vi.default.createElement("g",{key:H,transform:`translate(${(i+t)*H}, 0)`},R))}function L(){var H,W;if(u&&o)return null;const R=typeof g=="number"?g:e.reduce((te,G)=>te+G.count,0);return Vi.default.createElement("footer",{className:Sd("footer",_p.footer),style:{marginLeft:M}},c&&Vi.default.createElement("div",null," "),!c&&!u&&Vi.default.createElement("div",{className:Sd("count")},S.totalCount?S.totalCount.replace("{{count}}",String(R)).replace("{{year}}",String(w)):`${R} activities in ${w}`),!c&&!o&&Vi.default.createElement("div",{className:Sd("legend-colors",_p.legendColors)},Vi.default.createElement("span",{style:{marginRight:"0.4em"}},((H=S==null?void 0:S.legend)==null?void 0:H.less)??"Less"),Array(uh).fill(void 0).map((te,G)=>Vi.default.createElement("svg",{width:i,height:i,key:G},Vi.default.createElement("rect",{width:i,height:i,fill:b[G],rx:r,ry:r}))),Vi.default.createElement("span",{style:{marginLeft:"0.4em"}},((W=S==null?void 0:S.legend)==null?void 0:W.more)??"More")))}function O(){return!f&&l?null:Vi.default.createElement(Vi.default.Fragment,null,f&&Vi.default.createElement("g",{className:Sd("legend-weekday")},E[0].map((R,H)=>{if(H%2===0)return null;const W=(H+v)%7;return Vi.default.createElement("text",{x:-bC,y:C+(i+t)*H+i/2,dominantBaseline:"middle",textAnchor:"end",key:H},S.weekdays[W])})),!l&&Vi.default.createElement("g",{className:Sd("legend-month")},mge(E,S.months).map(({label:R,weekIndex:H})=>Vi.default.createElement("text",{x:(i+t)*H,dominantBaseline:"hanging",key:H},R))))}const{width:F,height:z}=P(),B={fontSize:s,[`--${Wl}-level-0`]:b[0],[`--${Wl}-level-1`]:b[1],[`--${Wl}-level-2`]:b[2],[`--${Wl}-level-3`]:b[3],[`--${Wl}-level-4`]:b[4],..._&&{[`--${Wl}-loading`]:b[0],[`--${Wl}-loading-active`]:n==="light"?iS.default(b[0]).darken(.3).hex():iS.default(b[0]).brighten(.25).hex()}};return Vi.default.createElement("article",{className:`${Wl} ${_p.container}`,style:{...m,...B}},Vi.default.createElement("div",{className:Sd("scroll-container",_p.scrollContainer)},Vi.default.createElement("svg",{width:F,height:z,viewBox:`0 0 ${F} ${z}`,className:Sd("calendar",_p.calendar),style:{marginLeft:M}},!c&&O(),k())),L())},_ge=e=>Vi.default.createElement(K9,nS({data:[]},e));pE.Skeleton=_ge;pE.default=K9;Object.defineProperty(GW,"__esModule",{value:!0});var om=X,Z9=pE;function J9(e){return e&&e.__esModule?e:{default:e}}var Xx=J9(om),Sge=J9(Z9);function aS(){return aS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},aS.apply(this,arguments)}const Ege="https://github-contributions-api.jogruber.de/v4/",Mge={light:["#ebedf0","#9be9a8","#40c463","#30a14e","#216e39"],dark:["#161b22","#0e4429","#006d32","#26a641","#39d353"]},Cge=(e,t)=>{if(typeof t!="function")return e;const r=t(e);if(!Array.isArray(r))throw new Error("Passed function transformData must return a list of Day objects.");if(r.length>0){const i=r[0];if(typeof i.count!="number"||i.count<0)throw new Error(`Required property "count: number" missing or invalid. Got: ${i.count}`);if(!/\d{4}-\d{2}-\d{2}/.test(i.date))throw new Error(`Required property "date: YYYY-MM-DD" missing or invalid. Got: ${i.date}`);if(typeof i.level!="number"||i.level<0||i.level>4)throw new Error(`Required property "level: 0 | 1 | 2 | 3 | 4" missing or invalid: Got: ${i.level}.`)}return r};async function Age(e,t){const r=await fetch(`${Ege}${e}?y=${t}`),i=await r.json();if(!r.ok)throw new Error(i.error);return i}const Tge=({username:e,year:t="last",labels:r,transformData:i,transformTotalCount:n=!0,...a})=>{const[s,o]=om.useState(null),[l,u]=om.useState(!1),[h,c]=om.useState(null),d=om.useCallback(()=>{u(!0),c(null),Age(e,t).then(o).catch(c).finally(()=>u(!1))},[e,t]);if(om.useEffect(d,[d]),h)return Xx.default.createElement("div",null,Xx.default.createElement("i",null,"Unable to fetch contribution data. See console."));if(l||!s)return Xx.default.createElement(Z9.Skeleton,aS({},a,{loading:!0}));const f=a.theme??Mge,m={totalCount:`{{count}} contributions in ${t==="last"?"the last year":"{{year}}"}`},p=t==="last"?s.total.lastYear:s.total[t];return Xx.default.createElement(Sge.default,aS({data:Cge(s.contributions,i),theme:f,labels:Object.assign({},m,r),totalCount:i&&n?void 0:p},a))};var Pge=GW.default=Tge;function Dge(){const e=localStorage.getItem("isDark")==="true",[t,r]=X.useState(e);return X.useEffect(()=>{r(e)},[e]),console.log(e),Q(ad,{children:ct("div",{className:"container",children:[Q("h2",{style:{textAlign:"center",marginBottom:"1rem"},children:Q("span",{className:"colorful",children:"Github Calendar"})}),Q("small",{className:"small",children:"Check out these muscles! Talk about a major flex! 🦾 It was May 2023 when I dumped Python and Java and fell head over heels for JavaScript! 😆"}),Q("br",{})," ",Q("br",{}),Q("div",{className:"github",children:Q(Pge,{username:"akbarirazia",theme:{light:["hsl(0, 0%, 92%)","rebeccapurple"],dark:["hsl(0, 0%, 22%)","hsl(225,82%,77%)"]},colorScheme:t?"dark":"light",blockSize:14})}),Q("br",{})," ",Q("br",{})]})})}function Oge(){const e=[...N4,...gC];function t(u){let h=u.length,c;for(;h>0;)c=Math.floor(Math.random()*h),h--,[u[h],u[c]]=[u[c],u[h]];return u}t(e);const[r,i]=X.useState(gC);function n(u){console.log(u),i(u==="All Portfolios"?e:u==="Web Development"?gC:N4)}const[a,s]=X.useState(""),l=X.useMemo(()=>r.filter(u=>u.title.toLowerCase().includes(a.toLowerCase())),[r,a]).map((u,h)=>Q(Ace,{title:u.title,description:u.description,link:u.link,img:u.imageSrc,tags:u.tags,delay:h},h));return ct("div",{children:[Q(SI,{option:n}),ct("div",{className:"container",children:[ct("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"1.5rem",padding:"0"},className:"filter",children:[Q(Ece,{onchange:u=>s(u.target.value),value:a}),Q(Pce,{onFilter:n})]}),Q("div",{className:"flex flex-wrap gap-2x card-container",style:{justifyContent:"space-evenly"},children:l.length==0?Q("div",{style:{marginTop:"2rem"},children:"No Project Found"}):l})]}),Q("br",{}),Q("br",{}),Q(Dge,{}),Q("br",{}),Q("br",{})]})}const Ige=e=>{e=e.current,U1.fromTo(e,{rotation:-90},{rotation:0,duration:3,ease:"power2.out",scrollTrigger:{trigger:e,toggleActions:"restart none none none"}})};function Rge(){const e=X.useRef(null);return X.useEffect(()=>{Ige(e)},[]),Q("iframe",{src:"https://www.google.com/maps/embed?pb=!1m26!1m12!1m3!1d1642.8693610361781!2d69.15236328850473!3d34.560170202126535!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!4m11!3e6!4m3!3m2!1d34.5602951!2d69.1520578!4m5!1s0x38d16f417b778a83%3A0xaf1708092bcc0073!2z2LPYsdqpINqG2YfYp9ix2YUg2b7YsdmI2pjZhyDYqtin24zZhdmG24wg2qnZiNqG2Ycg2YXaqdiq2Kgg2YXZhNqp2Ycg2KvYsduM2Kc!3m2!1d34.5597456!2d69.1552715!5e0!3m2!1sen!2sus!4v1700217199369!5m2!1sen!2sus",width:"100%",height:"400",loading:"lazy",style:{display:"fixed"},className:"iframe",referrerpolicy:"no-referrer-when-downgrade"})}const kge="modulepreload",Lge=function(e){return"/"+e},J4={},$1=function(t,r,i){if(!r||r.length===0)return t();const n=document.getElementsByTagName("link");return Promise.all(r.map(a=>{if(a=Lge(a),a in J4)return;J4[a]=!0;const s=a.endsWith(".css"),o=s?'[rel="stylesheet"]':"";if(!!i)for(let h=n.length-1;h>=0;h--){const c=n[h];if(c.href===a&&(!s||c.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${o}`))return;const u=document.createElement("link");if(u.rel=s?"stylesheet":kge,s||(u.as="script",u.crossOrigin=""),u.href=a,document.head.appendChild(u),s)return new Promise((h,c)=>{u.addEventListener("load",h),u.addEventListener("error",()=>c(new Error(`Unable to preload CSS for ${a}`)))})})).then(()=>t()).catch(a=>{const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=a,window.dispatchEvent(s),!s.defaultPrevented)throw a})};var Bge=Object.create,gR=Object.defineProperty,Nge=Object.getOwnPropertyDescriptor,zge=Object.getOwnPropertyNames,Fge=Object.getPrototypeOf,Uge=Object.prototype.hasOwnProperty,fd=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),jge=(e,t)=>{for(var r in t)gR(e,r,{get:t[r],enumerable:!0})},Vge=(e,t,r,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of zge(t))!Uge.call(e,n)&&n!==r&&gR(e,n,{get:()=>t[n],enumerable:!(i=Nge(t,n))||i.enumerable});return e},pd=(e,t,r)=>(r=e!=null?Bge(Fge(e)):{},Vge(t||!e||!e.__esModule?gR(r,"default",{value:e,enumerable:!0}):r,e)),Hge=fd((e,t)=>{(function(r,i){typeof e=="object"?t.exports=i():typeof define=="function"&&define.amd?define(i):r.Alea=i()})(e,function(){return r.importState=function(n){var a=new r;return a.importState(n),a},r;function r(){return function(n){var a=0,s=0,o=0,l=1;n.length==0&&(n=[+new Date]);var u=i();a=u(" "),s=u(" "),o=u(" ");for(var h=0;h<n.length;h++)a-=u(n[h]),a<0&&(a+=1),s-=u(n[h]),s<0&&(s+=1),o-=u(n[h]),o<0&&(o+=1);u=null;var c=function(){var d=2091639*a+l*23283064365386963e-26;return a=s,s=o,o=d-(l=d|0)};return c.next=c,c.uint32=function(){return c()*4294967296},c.fract53=function(){return c()+(c()*2097152|0)*11102230246251565e-32},c.version="Alea 0.9",c.args=n,c.exportState=function(){return[a,s,o,l]},c.importState=function(d){a=+d[0]||0,s=+d[1]||0,o=+d[2]||0,l=+d[3]||0},c}(Array.prototype.slice.call(arguments))}function i(){var n=4022871197,a=function(s){s=s.toString();for(var o=0;o<s.length;o++){n+=s.charCodeAt(o);var l=.02519603282416938*n;n=l>>>0,l-=n,l*=n,n=l>>>0,l-=n,n+=l*4294967296}return(n>>>0)*23283064365386963e-26};return a.version="Mash 0.9",a}})}),e7=fd((e,t)=>{(function(r,i){typeof e=="object"&&typeof t<"u"?i(e):typeof define=="function"&&define.amd?define(["exports"],i):i((r=typeof globalThis<"u"?globalThis:r||self).SVDJS={})})(e,function(r){r.SVD=function(i,n,a,s,o){if(n=n===void 0||n,a=a===void 0||a,o=1e-64/(s=s||Math.pow(2,-52)),!i)throw new TypeError("Matrix a is not defined");var l,u,h,c,d,f,m,p,g,v,y,x,b=i[0].length,_=i.length;if(_<b)throw new TypeError("Invalid matrix: m < n");for(var w=[],E=[],S=[],C=n==="f"?_:b,M=v=m=0;M<_;M++)E[M]=new Array(C).fill(0);for(M=0;M<b;M++)S[M]=new Array(b).fill(0);var P,I=new Array(b).fill(0);for(M=0;M<_;M++)for(l=0;l<b;l++)E[M][l]=i[M][l];for(M=0;M<b;M++){for(w[M]=m,g=0,h=M+1,l=M;l<_;l++)g+=Math.pow(E[l][M],2);if(g<o)m=0;else for(p=(f=E[M][M])*(m=f<0?Math.sqrt(g):-Math.sqrt(g))-g,E[M][M]=f-m,l=h;l<b;l++){for(g=0,u=M;u<_;u++)g+=E[u][M]*E[u][l];for(f=g/p,u=M;u<_;u++)E[u][l]=E[u][l]+f*E[u][M]}for(I[M]=m,g=0,l=h;l<b;l++)g+=Math.pow(E[M][l],2);if(g<o)m=0;else{for(p=(f=E[M][M+1])*(m=f<0?Math.sqrt(g):-Math.sqrt(g))-g,E[M][M+1]=f-m,l=h;l<b;l++)w[l]=E[M][l]/p;for(l=h;l<_;l++){for(g=0,u=h;u<b;u++)g+=E[l][u]*E[M][u];for(u=h;u<b;u++)E[l][u]=E[l][u]+g*w[u]}}v<(y=Math.abs(I[M])+Math.abs(w[M]))&&(v=y)}if(a)for(M=b-1;0<=M;M--){if(m!==0){for(p=E[M][M+1]*m,l=h;l<b;l++)S[l][M]=E[M][l]/p;for(l=h;l<b;l++){for(g=0,u=h;u<b;u++)g+=E[M][u]*S[u][l];for(u=h;u<b;u++)S[u][l]=S[u][l]+g*S[u][M]}}for(l=h;l<b;l++)S[M][l]=0,S[l][M]=0;S[M][M]=1,m=w[M],h=M}if(n){if(n==="f")for(M=b;M<_;M++){for(l=b;l<_;l++)E[M][l]=0;E[M][M]=1}for(M=b-1;0<=M;M--){for(h=M+1,m=I[M],l=h;l<C;l++)E[M][l]=0;if(m!==0){for(p=E[M][M]*m,l=h;l<C;l++){for(g=0,u=h;u<_;u++)g+=E[u][M]*E[u][l];for(f=g/p,u=M;u<_;u++)E[u][l]=E[u][l]+f*E[u][M]}for(l=M;l<_;l++)E[l][M]=E[l][M]/m}else for(l=M;l<_;l++)E[l][M]=0;E[M][M]=E[M][M]+1}}for(s*=v,u=b-1;0<=u;u--)for(var k=0;k<50;k++){for(P=!1,h=u;0<=h;h--){if(Math.abs(w[h])<=s){P=!0;break}if(Math.abs(I[h-1])<=s)break}if(!P){for(d=0,c=h-(g=1),M=h;M<u+1&&(f=g*w[M],w[M]=d*w[M],!(Math.abs(f)<=s));M++)if(m=I[M],I[M]=Math.sqrt(f*f+m*m),d=m/(p=I[M]),g=-f/p,n)for(l=0;l<_;l++)y=E[l][c],x=E[l][M],E[l][c]=y*d+x*g,E[l][M]=-y*g+x*d}if(x=I[u],h===u){if(x<0&&(I[u]=-x,a))for(l=0;l<b;l++)S[l][u]=-S[l][u];break}for(v=I[h],f=(((y=I[u-1])-x)*(y+x)+((m=w[u-1])-(p=w[u]))*(m+p))/(2*p*y),m=Math.sqrt(f*f+1),f=((v-x)*(v+x)+p*(y/(f<0?f-m:f+m)-p))/v,M=h+(g=d=1);M<u+1;M++){if(m=w[M],y=I[M],p=g*m,m*=d,x=Math.sqrt(f*f+p*p),f=v*(d=f/(w[M-1]=x))+m*(g=p/x),m=-v*g+m*d,p=y*g,y*=d,a)for(l=0;l<b;l++)v=S[l][M-1],x=S[l][M],S[l][M-1]=v*d+x*g,S[l][M]=-v*g+x*d;if(x=Math.sqrt(f*f+p*p),f=(d=f/(I[M-1]=x))*m+(g=p/x)*y,v=-g*m+d*y,n)for(l=0;l<_;l++)y=E[l][M-1],x=E[l][M],E[l][M-1]=y*d+x*g,E[l][M]=-y*g+x*d}w[h]=0,w[u]=f,I[u]=v}for(M=0;M<b;M++)I[M]<s&&(I[M]=0);return{u:E,q:I,v:S}},r.VERSION="1.1.1",Object.defineProperty(r,"__esModule",{value:!0})})}),Gge=fd((e,t)=>{(function(r,i){typeof e=="object"&&typeof t<"u"?t.exports=i():typeof define=="function"&&define.amd?define(i):(r=r||self,r.TinyQueue=i())})(e,function(){var r=function(n,a){if(n===void 0&&(n=[]),a===void 0&&(a=i),this.data=n,this.length=this.data.length,this.compare=a,this.length>0)for(var s=(this.length>>1)-1;s>=0;s--)this._down(s)};r.prototype.push=function(n){this.data.push(n),this.length++,this._up(this.length-1)},r.prototype.pop=function(){if(this.length!==0){var n=this.data[0],a=this.data.pop();return this.length--,this.length>0&&(this.data[0]=a,this._down(0)),n}},r.prototype.peek=function(){return this.data[0]},r.prototype._up=function(n){for(var a=this,s=a.data,o=a.compare,l=s[n];n>0;){var u=n-1>>1,h=s[u];if(o(l,h)>=0)break;s[n]=h,n=u}s[n]=l},r.prototype._down=function(n){for(var a=this,s=a.data,o=a.compare,l=this.length>>1,u=s[n];n<l;){var h=(n<<1)+1,c=s[h],d=h+1;if(d<this.length&&o(s[d],c)<0&&(h=d,c=s[d]),o(c,u)>=0)break;s[n]=c,n=h}s[n]=u};function i(n,a){return n<a?-1:n>a?1:0}return r})}),Wge=fd((e,t)=>{var r=Gge();r.default&&(r=r.default),t.exports=i,t.exports.default=i;function i(u,h,c){h=h||1;for(var d,f,m,p,g=0;g<u[0].length;g++){var v=u[0][g];(!g||v[0]<d)&&(d=v[0]),(!g||v[1]<f)&&(f=v[1]),(!g||v[0]>m)&&(m=v[0]),(!g||v[1]>p)&&(p=v[1])}var y=m-d,x=p-f,b=Math.min(y,x),_=b/2;if(b===0){var w=[d,f];return w.distance=0,w}for(var E=new r(void 0,n),S=d;S<m;S+=b)for(var C=f;C<p;C+=b)E.push(new a(S+_,C+_,_,u));var M=o(u),P=new a(d+y/2,f+x/2,0,u);P.d>M.d&&(M=P);for(var I=E.length;E.length;){var k=E.pop();k.d>M.d&&(M=k,c&&console.log("found best %d after %d probes",Math.round(1e4*k.d)/1e4,I)),!(k.max-M.d<=h)&&(_=k.h/2,E.push(new a(k.x-_,k.y-_,_,u)),E.push(new a(k.x+_,k.y-_,_,u)),E.push(new a(k.x-_,k.y+_,_,u)),E.push(new a(k.x+_,k.y+_,_,u)),I+=4)}c&&(console.log("num probes: "+I),console.log("best distance: "+M.d));var L=[M.x,M.y];return L.distance=M.d,L}function n(u,h){return h.max-u.max}function a(u,h,c,d){this.x=u,this.y=h,this.h=c,this.d=s(u,h,d),this.max=this.d+this.h*Math.SQRT2}function s(u,h,c){for(var d=!1,f=1/0,m=0;m<c.length;m++)for(var p=c[m],g=0,v=p.length,y=v-1;g<v;y=g++){var x=p[g],b=p[y];x[1]>h!=b[1]>h&&u<(b[0]-x[0])*(h-x[1])/(b[1]-x[1])+x[0]&&(d=!d),f=Math.min(f,l(u,h,x,b))}return f===0?0:(d?1:-1)*Math.sqrt(f)}function o(u){for(var h=0,c=0,d=0,f=u[0],m=0,p=f.length,g=p-1;m<p;g=m++){var v=f[m],y=f[g],x=v[0]*y[1]-y[0]*v[1];c+=(v[0]+y[0])*x,d+=(v[1]+y[1])*x,h+=x*3}return h===0?new a(f[0][0],f[0][1],0,u):new a(c/h,d/h,0,u)}function l(u,h,c,d){var f=c[0],m=c[1],p=d[0]-f,g=d[1]-m;if(p!==0||g!==0){var v=((u-f)*p+(h-m)*g)/(p*p+g*g);v>1?(f=d[0],m=d[1]):v>0&&(f+=p*v,m+=g*v)}return p=u-f,g=h-m,p*p+g*g}}),$ge=fd((e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;function r(i){if(i===null||i===!0||i===!1)return NaN;var n=Number(i);return isNaN(n)?n:n<0?Math.ceil(n):Math.floor(n)}t.exports=e.default}),Yge=fd((e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;function r(i){var n=new Date(Date.UTC(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()));return n.setUTCFullYear(i.getFullYear()),i.getTime()-n.getTime()}t.exports=e.default}),qge=fd(e=>{(function(){var t=function(){this.init()};t.prototype={init:function(){var c=this||r;return c._counter=1e3,c._html5AudioPool=[],c.html5PoolSize=10,c._codecs={},c._howls=[],c._muted=!1,c._volume=1,c._canPlayEvent="canplaythrough",c._navigator=typeof window<"u"&&window.navigator?window.navigator:null,c.masterGain=null,c.noAudio=!1,c.usingWebAudio=!0,c.autoSuspend=!0,c.ctx=null,c.autoUnlock=!0,c._setup(),c},volume:function(c){var d=this||r;if(c=parseFloat(c),d.ctx||h(),typeof c<"u"&&c>=0&&c<=1){if(d._volume=c,d._muted)return d;d.usingWebAudio&&d.masterGain.gain.setValueAtTime(c,r.ctx.currentTime);for(var f=0;f<d._howls.length;f++)if(!d._howls[f]._webAudio)for(var m=d._howls[f]._getSoundIds(),p=0;p<m.length;p++){var g=d._howls[f]._soundById(m[p]);g&&g._node&&(g._node.volume=g._volume*c)}return d}return d._volume},mute:function(c){var d=this||r;d.ctx||h(),d._muted=c,d.usingWebAudio&&d.masterGain.gain.setValueAtTime(c?0:d._volume,r.ctx.currentTime);for(var f=0;f<d._howls.length;f++)if(!d._howls[f]._webAudio)for(var m=d._howls[f]._getSoundIds(),p=0;p<m.length;p++){var g=d._howls[f]._soundById(m[p]);g&&g._node&&(g._node.muted=c?!0:g._muted)}return d},stop:function(){for(var c=this||r,d=0;d<c._howls.length;d++)c._howls[d].stop();return c},unload:function(){for(var c=this||r,d=c._howls.length-1;d>=0;d--)c._howls[d].unload();return c.usingWebAudio&&c.ctx&&typeof c.ctx.close<"u"&&(c.ctx.close(),c.ctx=null,h()),c},codecs:function(c){return(this||r)._codecs[c.replace(/^x-/,"")]},_setup:function(){var c=this||r;if(c.state=c.ctx&&c.ctx.state||"suspended",c._autoSuspend(),!c.usingWebAudio)if(typeof Audio<"u")try{var d=new Audio;typeof d.oncanplaythrough>"u"&&(c._canPlayEvent="canplay")}catch{c.noAudio=!0}else c.noAudio=!0;try{var d=new Audio;d.muted&&(c.noAudio=!0)}catch{}return c.noAudio||c._setupCodecs(),c},_setupCodecs:function(){var c=this||r,d=null;try{d=typeof Audio<"u"?new Audio:null}catch{return c}if(!d||typeof d.canPlayType!="function")return c;var f=d.canPlayType("audio/mpeg;").replace(/^no$/,""),m=c._navigator?c._navigator.userAgent:"",p=m.match(/OPR\/([0-6].)/g),g=p&&parseInt(p[0].split("/")[1],10)<33,v=m.indexOf("Safari")!==-1&&m.indexOf("Chrome")===-1,y=m.match(/Version\/(.*?) /),x=v&&y&&parseInt(y[1],10)<15;return c._codecs={mp3:!!(!g&&(f||d.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!f,opus:!!d.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!d.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!d.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(d.canPlayType('audio/wav; codecs="1"')||d.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!d.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!d.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(d.canPlayType("audio/x-m4a;")||d.canPlayType("audio/m4a;")||d.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(d.canPlayType("audio/x-m4b;")||d.canPlayType("audio/m4b;")||d.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(d.canPlayType("audio/x-mp4;")||d.canPlayType("audio/mp4;")||d.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!x&&d.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!x&&d.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!d.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(d.canPlayType("audio/x-flac;")||d.canPlayType("audio/flac;")).replace(/^no$/,"")},c},_unlockAudio:function(){var c=this||r;if(!(c._audioUnlocked||!c.ctx)){c._audioUnlocked=!1,c.autoUnlock=!1,!c._mobileUnloaded&&c.ctx.sampleRate!==44100&&(c._mobileUnloaded=!0,c.unload()),c._scratchBuffer=c.ctx.createBuffer(1,1,22050);var d=function(f){for(;c._html5AudioPool.length<c.html5PoolSize;)try{var m=new Audio;m._unlocked=!0,c._releaseHtml5Audio(m)}catch{c.noAudio=!0;break}for(var p=0;p<c._howls.length;p++)if(!c._howls[p]._webAudio)for(var g=c._howls[p]._getSoundIds(),v=0;v<g.length;v++){var y=c._howls[p]._soundById(g[v]);y&&y._node&&!y._node._unlocked&&(y._node._unlocked=!0,y._node.load())}c._autoResume();var x=c.ctx.createBufferSource();x.buffer=c._scratchBuffer,x.connect(c.ctx.destination),typeof x.start>"u"?x.noteOn(0):x.start(0),typeof c.ctx.resume=="function"&&c.ctx.resume(),x.onended=function(){x.disconnect(0),c._audioUnlocked=!0,document.removeEventListener("touchstart",d,!0),document.removeEventListener("touchend",d,!0),document.removeEventListener("click",d,!0),document.removeEventListener("keydown",d,!0);for(var b=0;b<c._howls.length;b++)c._howls[b]._emit("unlock")}};return document.addEventListener("touchstart",d,!0),document.addEventListener("touchend",d,!0),document.addEventListener("click",d,!0),document.addEventListener("keydown",d,!0),c}},_obtainHtml5Audio:function(){var c=this||r;if(c._html5AudioPool.length)return c._html5AudioPool.pop();var d=new Audio().play();return d&&typeof Promise<"u"&&(d instanceof Promise||typeof d.then=="function")&&d.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(c){var d=this||r;return c._unlocked&&d._html5AudioPool.push(c),d},_autoSuspend:function(){var c=this;if(!(!c.autoSuspend||!c.ctx||typeof c.ctx.suspend>"u"||!r.usingWebAudio)){for(var d=0;d<c._howls.length;d++)if(c._howls[d]._webAudio){for(var f=0;f<c._howls[d]._sounds.length;f++)if(!c._howls[d]._sounds[f]._paused)return c}return c._suspendTimer&&clearTimeout(c._suspendTimer),c._suspendTimer=setTimeout(function(){if(c.autoSuspend){c._suspendTimer=null,c.state="suspending";var m=function(){c.state="suspended",c._resumeAfterSuspend&&(delete c._resumeAfterSuspend,c._autoResume())};c.ctx.suspend().then(m,m)}},3e4),c}},_autoResume:function(){var c=this;if(!(!c.ctx||typeof c.ctx.resume>"u"||!r.usingWebAudio))return c.state==="running"&&c.ctx.state!=="interrupted"&&c._suspendTimer?(clearTimeout(c._suspendTimer),c._suspendTimer=null):c.state==="suspended"||c.state==="running"&&c.ctx.state==="interrupted"?(c.ctx.resume().then(function(){c.state="running";for(var d=0;d<c._howls.length;d++)c._howls[d]._emit("resume")}),c._suspendTimer&&(clearTimeout(c._suspendTimer),c._suspendTimer=null)):c.state==="suspending"&&(c._resumeAfterSuspend=!0),c}};var r=new t,i=function(c){var d=this;if(!c.src||c.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}d.init(c)};i.prototype={init:function(c){var d=this;return r.ctx||h(),d._autoplay=c.autoplay||!1,d._format=typeof c.format!="string"?c.format:[c.format],d._html5=c.html5||!1,d._muted=c.mute||!1,d._loop=c.loop||!1,d._pool=c.pool||5,d._preload=typeof c.preload=="boolean"||c.preload==="metadata"?c.preload:!0,d._rate=c.rate||1,d._sprite=c.sprite||{},d._src=typeof c.src!="string"?c.src:[c.src],d._volume=c.volume!==void 0?c.volume:1,d._xhr={method:c.xhr&&c.xhr.method?c.xhr.method:"GET",headers:c.xhr&&c.xhr.headers?c.xhr.headers:null,withCredentials:c.xhr&&c.xhr.withCredentials?c.xhr.withCredentials:!1},d._duration=0,d._state="unloaded",d._sounds=[],d._endTimers={},d._queue=[],d._playLock=!1,d._onend=c.onend?[{fn:c.onend}]:[],d._onfade=c.onfade?[{fn:c.onfade}]:[],d._onload=c.onload?[{fn:c.onload}]:[],d._onloaderror=c.onloaderror?[{fn:c.onloaderror}]:[],d._onplayerror=c.onplayerror?[{fn:c.onplayerror}]:[],d._onpause=c.onpause?[{fn:c.onpause}]:[],d._onplay=c.onplay?[{fn:c.onplay}]:[],d._onstop=c.onstop?[{fn:c.onstop}]:[],d._onmute=c.onmute?[{fn:c.onmute}]:[],d._onvolume=c.onvolume?[{fn:c.onvolume}]:[],d._onrate=c.onrate?[{fn:c.onrate}]:[],d._onseek=c.onseek?[{fn:c.onseek}]:[],d._onunlock=c.onunlock?[{fn:c.onunlock}]:[],d._onresume=[],d._webAudio=r.usingWebAudio&&!d._html5,typeof r.ctx<"u"&&r.ctx&&r.autoUnlock&&r._unlockAudio(),r._howls.push(d),d._autoplay&&d._queue.push({event:"play",action:function(){d.play()}}),d._preload&&d._preload!=="none"&&d.load(),d},load:function(){var c=this,d=null;if(r.noAudio){c._emit("loaderror",null,"No audio support.");return}typeof c._src=="string"&&(c._src=[c._src]);for(var f=0;f<c._src.length;f++){var m,p;if(c._format&&c._format[f])m=c._format[f];else{if(p=c._src[f],typeof p!="string"){c._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}m=/^data:audio\/([^;,]+);/i.exec(p),m||(m=/\.([^.]+)$/.exec(p.split("?",1)[0])),m&&(m=m[1].toLowerCase())}if(m||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),m&&r.codecs(m)){d=c._src[f];break}}if(!d){c._emit("loaderror",null,"No codec support for selected audio sources.");return}return c._src=d,c._state="loading",window.location.protocol==="https:"&&d.slice(0,5)==="http:"&&(c._html5=!0,c._webAudio=!1),new n(c),c._webAudio&&s(c),c},play:function(c,d){var f=this,m=null;if(typeof c=="number")m=c,c=null;else{if(typeof c=="string"&&f._state==="loaded"&&!f._sprite[c])return null;if(typeof c>"u"&&(c="__default",!f._playLock)){for(var p=0,g=0;g<f._sounds.length;g++)f._sounds[g]._paused&&!f._sounds[g]._ended&&(p++,m=f._sounds[g]._id);p===1?c=null:m=null}}var v=m?f._soundById(m):f._inactiveSound();if(!v)return null;if(m&&!c&&(c=v._sprite||"__default"),f._state!=="loaded"){v._sprite=c,v._ended=!1;var y=v._id;return f._queue.push({event:"play",action:function(){f.play(y)}}),y}if(m&&!v._paused)return d||f._loadQueue("play"),v._id;f._webAudio&&r._autoResume();var x=Math.max(0,v._seek>0?v._seek:f._sprite[c][0]/1e3),b=Math.max(0,(f._sprite[c][0]+f._sprite[c][1])/1e3-x),_=b*1e3/Math.abs(v._rate),w=f._sprite[c][0]/1e3,E=(f._sprite[c][0]+f._sprite[c][1])/1e3;v._sprite=c,v._ended=!1;var S=function(){v._paused=!1,v._seek=x,v._start=w,v._stop=E,v._loop=!!(v._loop||f._sprite[c][2])};if(x>=E){f._ended(v);return}var C=v._node;if(f._webAudio){var M=function(){f._playLock=!1,S(),f._refreshBuffer(v);var L=v._muted||f._muted?0:v._volume;C.gain.setValueAtTime(L,r.ctx.currentTime),v._playStart=r.ctx.currentTime,typeof C.bufferSource.start>"u"?v._loop?C.bufferSource.noteGrainOn(0,x,86400):C.bufferSource.noteGrainOn(0,x,b):v._loop?C.bufferSource.start(0,x,86400):C.bufferSource.start(0,x,b),_!==1/0&&(f._endTimers[v._id]=setTimeout(f._ended.bind(f,v),_)),d||setTimeout(function(){f._emit("play",v._id),f._loadQueue()},0)};r.state==="running"&&r.ctx.state!=="interrupted"?M():(f._playLock=!0,f.once("resume",M),f._clearTimer(v._id))}else{var P=function(){C.currentTime=x,C.muted=v._muted||f._muted||r._muted||C.muted,C.volume=v._volume*r.volume(),C.playbackRate=v._rate;try{var L=C.play();if(L&&typeof Promise<"u"&&(L instanceof Promise||typeof L.then=="function")?(f._playLock=!0,S(),L.then(function(){f._playLock=!1,C._unlocked=!0,d?f._loadQueue():f._emit("play",v._id)}).catch(function(){f._playLock=!1,f._emit("playerror",v._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),v._ended=!0,v._paused=!0})):d||(f._playLock=!1,S(),f._emit("play",v._id)),C.playbackRate=v._rate,C.paused){f._emit("playerror",v._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}c!=="__default"||v._loop?f._endTimers[v._id]=setTimeout(f._ended.bind(f,v),_):(f._endTimers[v._id]=function(){f._ended(v),C.removeEventListener("ended",f._endTimers[v._id],!1)},C.addEventListener("ended",f._endTimers[v._id],!1))}catch(O){f._emit("playerror",v._id,O)}};C.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(C.src=f._src,C.load());var I=window&&window.ejecta||!C.readyState&&r._navigator.isCocoonJS;if(C.readyState>=3||I)P();else{f._playLock=!0,f._state="loading";var k=function(){f._state="loaded",P(),C.removeEventListener(r._canPlayEvent,k,!1)};C.addEventListener(r._canPlayEvent,k,!1),f._clearTimer(v._id)}}return v._id},pause:function(c){var d=this;if(d._state!=="loaded"||d._playLock)return d._queue.push({event:"pause",action:function(){d.pause(c)}}),d;for(var f=d._getSoundIds(c),m=0;m<f.length;m++){d._clearTimer(f[m]);var p=d._soundById(f[m]);if(p&&!p._paused&&(p._seek=d.seek(f[m]),p._rateSeek=0,p._paused=!0,d._stopFade(f[m]),p._node))if(d._webAudio){if(!p._node.bufferSource)continue;typeof p._node.bufferSource.stop>"u"?p._node.bufferSource.noteOff(0):p._node.bufferSource.stop(0),d._cleanBuffer(p._node)}else(!isNaN(p._node.duration)||p._node.duration===1/0)&&p._node.pause();arguments[1]||d._emit("pause",p?p._id:null)}return d},stop:function(c,d){var f=this;if(f._state!=="loaded"||f._playLock)return f._queue.push({event:"stop",action:function(){f.stop(c)}}),f;for(var m=f._getSoundIds(c),p=0;p<m.length;p++){f._clearTimer(m[p]);var g=f._soundById(m[p]);g&&(g._seek=g._start||0,g._rateSeek=0,g._paused=!0,g._ended=!0,f._stopFade(m[p]),g._node&&(f._webAudio?g._node.bufferSource&&(typeof g._node.bufferSource.stop>"u"?g._node.bufferSource.noteOff(0):g._node.bufferSource.stop(0),f._cleanBuffer(g._node)):(!isNaN(g._node.duration)||g._node.duration===1/0)&&(g._node.currentTime=g._start||0,g._node.pause(),g._node.duration===1/0&&f._clearSound(g._node))),d||f._emit("stop",g._id))}return f},mute:function(c,d){var f=this;if(f._state!=="loaded"||f._playLock)return f._queue.push({event:"mute",action:function(){f.mute(c,d)}}),f;if(typeof d>"u")if(typeof c=="boolean")f._muted=c;else return f._muted;for(var m=f._getSoundIds(d),p=0;p<m.length;p++){var g=f._soundById(m[p]);g&&(g._muted=c,g._interval&&f._stopFade(g._id),f._webAudio&&g._node?g._node.gain.setValueAtTime(c?0:g._volume,r.ctx.currentTime):g._node&&(g._node.muted=r._muted?!0:c),f._emit("mute",g._id))}return f},volume:function(){var c=this,d=arguments,f,m;if(d.length===0)return c._volume;if(d.length===1||d.length===2&&typeof d[1]>"u"){var p=c._getSoundIds(),g=p.indexOf(d[0]);g>=0?m=parseInt(d[0],10):f=parseFloat(d[0])}else d.length>=2&&(f=parseFloat(d[0]),m=parseInt(d[1],10));var v;if(typeof f<"u"&&f>=0&&f<=1){if(c._state!=="loaded"||c._playLock)return c._queue.push({event:"volume",action:function(){c.volume.apply(c,d)}}),c;typeof m>"u"&&(c._volume=f),m=c._getSoundIds(m);for(var y=0;y<m.length;y++)v=c._soundById(m[y]),v&&(v._volume=f,d[2]||c._stopFade(m[y]),c._webAudio&&v._node&&!v._muted?v._node.gain.setValueAtTime(f,r.ctx.currentTime):v._node&&!v._muted&&(v._node.volume=f*r.volume()),c._emit("volume",v._id))}else return v=m?c._soundById(m):c._sounds[0],v?v._volume:0;return c},fade:function(c,d,f,m){var p=this;if(p._state!=="loaded"||p._playLock)return p._queue.push({event:"fade",action:function(){p.fade(c,d,f,m)}}),p;c=Math.min(Math.max(0,parseFloat(c)),1),d=Math.min(Math.max(0,parseFloat(d)),1),f=parseFloat(f),p.volume(c,m);for(var g=p._getSoundIds(m),v=0;v<g.length;v++){var y=p._soundById(g[v]);if(y){if(m||p._stopFade(g[v]),p._webAudio&&!y._muted){var x=r.ctx.currentTime,b=x+f/1e3;y._volume=c,y._node.gain.setValueAtTime(c,x),y._node.gain.linearRampToValueAtTime(d,b)}p._startFadeInterval(y,c,d,f,g[v],typeof m>"u")}}return p},_startFadeInterval:function(c,d,f,m,p,g){var v=this,y=d,x=f-d,b=Math.abs(x/.01),_=Math.max(4,b>0?m/b:m),w=Date.now();c._fadeTo=f,c._interval=setInterval(function(){var E=(Date.now()-w)/m;w=Date.now(),y+=x*E,y=Math.round(y*100)/100,x<0?y=Math.max(f,y):y=Math.min(f,y),v._webAudio?c._volume=y:v.volume(y,c._id,!0),g&&(v._volume=y),(f<d&&y<=f||f>d&&y>=f)&&(clearInterval(c._interval),c._interval=null,c._fadeTo=null,v.volume(f,c._id),v._emit("fade",c._id))},_)},_stopFade:function(c){var d=this,f=d._soundById(c);return f&&f._interval&&(d._webAudio&&f._node.gain.cancelScheduledValues(r.ctx.currentTime),clearInterval(f._interval),f._interval=null,d.volume(f._fadeTo,c),f._fadeTo=null,d._emit("fade",c)),d},loop:function(){var c=this,d=arguments,f,m,p;if(d.length===0)return c._loop;if(d.length===1)if(typeof d[0]=="boolean")f=d[0],c._loop=f;else return p=c._soundById(parseInt(d[0],10)),p?p._loop:!1;else d.length===2&&(f=d[0],m=parseInt(d[1],10));for(var g=c._getSoundIds(m),v=0;v<g.length;v++)p=c._soundById(g[v]),p&&(p._loop=f,c._webAudio&&p._node&&p._node.bufferSource&&(p._node.bufferSource.loop=f,f&&(p._node.bufferSource.loopStart=p._start||0,p._node.bufferSource.loopEnd=p._stop,c.playing(g[v])&&(c.pause(g[v],!0),c.play(g[v],!0)))));return c},rate:function(){var c=this,d=arguments,f,m;if(d.length===0)m=c._sounds[0]._id;else if(d.length===1){var p=c._getSoundIds(),g=p.indexOf(d[0]);g>=0?m=parseInt(d[0],10):f=parseFloat(d[0])}else d.length===2&&(f=parseFloat(d[0]),m=parseInt(d[1],10));var v;if(typeof f=="number"){if(c._state!=="loaded"||c._playLock)return c._queue.push({event:"rate",action:function(){c.rate.apply(c,d)}}),c;typeof m>"u"&&(c._rate=f),m=c._getSoundIds(m);for(var y=0;y<m.length;y++)if(v=c._soundById(m[y]),v){c.playing(m[y])&&(v._rateSeek=c.seek(m[y]),v._playStart=c._webAudio?r.ctx.currentTime:v._playStart),v._rate=f,c._webAudio&&v._node&&v._node.bufferSource?v._node.bufferSource.playbackRate.setValueAtTime(f,r.ctx.currentTime):v._node&&(v._node.playbackRate=f);var x=c.seek(m[y]),b=(c._sprite[v._sprite][0]+c._sprite[v._sprite][1])/1e3-x,_=b*1e3/Math.abs(v._rate);(c._endTimers[m[y]]||!v._paused)&&(c._clearTimer(m[y]),c._endTimers[m[y]]=setTimeout(c._ended.bind(c,v),_)),c._emit("rate",v._id)}}else return v=c._soundById(m),v?v._rate:c._rate;return c},seek:function(){var c=this,d=arguments,f,m;if(d.length===0)c._sounds.length&&(m=c._sounds[0]._id);else if(d.length===1){var p=c._getSoundIds(),g=p.indexOf(d[0]);g>=0?m=parseInt(d[0],10):c._sounds.length&&(m=c._sounds[0]._id,f=parseFloat(d[0]))}else d.length===2&&(f=parseFloat(d[0]),m=parseInt(d[1],10));if(typeof m>"u")return 0;if(typeof f=="number"&&(c._state!=="loaded"||c._playLock))return c._queue.push({event:"seek",action:function(){c.seek.apply(c,d)}}),c;var v=c._soundById(m);if(v)if(typeof f=="number"&&f>=0){var y=c.playing(m);y&&c.pause(m,!0),v._seek=f,v._ended=!1,c._clearTimer(m),!c._webAudio&&v._node&&!isNaN(v._node.duration)&&(v._node.currentTime=f);var x=function(){y&&c.play(m,!0),c._emit("seek",m)};if(y&&!c._webAudio){var b=function(){c._playLock?setTimeout(b,0):x()};setTimeout(b,0)}else x()}else if(c._webAudio){var _=c.playing(m)?r.ctx.currentTime-v._playStart:0,w=v._rateSeek?v._rateSeek-v._seek:0;return v._seek+(w+_*Math.abs(v._rate))}else return v._node.currentTime;return c},playing:function(c){var d=this;if(typeof c=="number"){var f=d._soundById(c);return f?!f._paused:!1}for(var m=0;m<d._sounds.length;m++)if(!d._sounds[m]._paused)return!0;return!1},duration:function(c){var d=this,f=d._duration,m=d._soundById(c);return m&&(f=d._sprite[m._sprite][1]/1e3),f},state:function(){return this._state},unload:function(){for(var c=this,d=c._sounds,f=0;f<d.length;f++)d[f]._paused||c.stop(d[f]._id),c._webAudio||(c._clearSound(d[f]._node),d[f]._node.removeEventListener("error",d[f]._errorFn,!1),d[f]._node.removeEventListener(r._canPlayEvent,d[f]._loadFn,!1),d[f]._node.removeEventListener("ended",d[f]._endFn,!1),r._releaseHtml5Audio(d[f]._node)),delete d[f]._node,c._clearTimer(d[f]._id);var m=r._howls.indexOf(c);m>=0&&r._howls.splice(m,1);var p=!0;for(f=0;f<r._howls.length;f++)if(r._howls[f]._src===c._src||c._src.indexOf(r._howls[f]._src)>=0){p=!1;break}return a&&p&&delete a[c._src],r.noAudio=!1,c._state="unloaded",c._sounds=[],c=null,null},on:function(c,d,f,m){var p=this,g=p["_on"+c];return typeof d=="function"&&g.push(m?{id:f,fn:d,once:m}:{id:f,fn:d}),p},off:function(c,d,f){var m=this,p=m["_on"+c],g=0;if(typeof d=="number"&&(f=d,d=null),d||f)for(g=0;g<p.length;g++){var v=f===p[g].id;if(d===p[g].fn&&v||!d&&v){p.splice(g,1);break}}else if(c)m["_on"+c]=[];else{var y=Object.keys(m);for(g=0;g<y.length;g++)y[g].indexOf("_on")===0&&Array.isArray(m[y[g]])&&(m[y[g]]=[])}return m},once:function(c,d,f){var m=this;return m.on(c,d,f,1),m},_emit:function(c,d,f){for(var m=this,p=m["_on"+c],g=p.length-1;g>=0;g--)(!p[g].id||p[g].id===d||c==="load")&&(setTimeout((function(v){v.call(this,d,f)}).bind(m,p[g].fn),0),p[g].once&&m.off(c,p[g].fn,p[g].id));return m._loadQueue(c),m},_loadQueue:function(c){var d=this;if(d._queue.length>0){var f=d._queue[0];f.event===c&&(d._queue.shift(),d._loadQueue()),c||f.action()}return d},_ended:function(c){var d=this,f=c._sprite;if(!d._webAudio&&c._node&&!c._node.paused&&!c._node.ended&&c._node.currentTime<c._stop)return setTimeout(d._ended.bind(d,c),100),d;var m=!!(c._loop||d._sprite[f][2]);if(d._emit("end",c._id),!d._webAudio&&m&&d.stop(c._id,!0).play(c._id),d._webAudio&&m){d._emit("play",c._id),c._seek=c._start||0,c._rateSeek=0,c._playStart=r.ctx.currentTime;var p=(c._stop-c._start)*1e3/Math.abs(c._rate);d._endTimers[c._id]=setTimeout(d._ended.bind(d,c),p)}return d._webAudio&&!m&&(c._paused=!0,c._ended=!0,c._seek=c._start||0,c._rateSeek=0,d._clearTimer(c._id),d._cleanBuffer(c._node),r._autoSuspend()),!d._webAudio&&!m&&d.stop(c._id,!0),d},_clearTimer:function(c){var d=this;if(d._endTimers[c]){if(typeof d._endTimers[c]!="function")clearTimeout(d._endTimers[c]);else{var f=d._soundById(c);f&&f._node&&f._node.removeEventListener("ended",d._endTimers[c],!1)}delete d._endTimers[c]}return d},_soundById:function(c){for(var d=this,f=0;f<d._sounds.length;f++)if(c===d._sounds[f]._id)return d._sounds[f];return null},_inactiveSound:function(){var c=this;c._drain();for(var d=0;d<c._sounds.length;d++)if(c._sounds[d]._ended)return c._sounds[d].reset();return new n(c)},_drain:function(){var c=this,d=c._pool,f=0,m=0;if(!(c._sounds.length<d)){for(m=0;m<c._sounds.length;m++)c._sounds[m]._ended&&f++;for(m=c._sounds.length-1;m>=0;m--){if(f<=d)return;c._sounds[m]._ended&&(c._webAudio&&c._sounds[m]._node&&c._sounds[m]._node.disconnect(0),c._sounds.splice(m,1),f--)}}},_getSoundIds:function(c){var d=this;if(typeof c>"u"){for(var f=[],m=0;m<d._sounds.length;m++)f.push(d._sounds[m]._id);return f}else return[c]},_refreshBuffer:function(c){var d=this;return c._node.bufferSource=r.ctx.createBufferSource(),c._node.bufferSource.buffer=a[d._src],c._panner?c._node.bufferSource.connect(c._panner):c._node.bufferSource.connect(c._node),c._node.bufferSource.loop=c._loop,c._loop&&(c._node.bufferSource.loopStart=c._start||0,c._node.bufferSource.loopEnd=c._stop||0),c._node.bufferSource.playbackRate.setValueAtTime(c._rate,r.ctx.currentTime),d},_cleanBuffer:function(c){var d=this,f=r._navigator&&r._navigator.vendor.indexOf("Apple")>=0;if(r._scratchBuffer&&c.bufferSource&&(c.bufferSource.onended=null,c.bufferSource.disconnect(0),f))try{c.bufferSource.buffer=r._scratchBuffer}catch{}return c.bufferSource=null,d},_clearSound:function(c){var d=/MSIE |Trident\//.test(r._navigator&&r._navigator.userAgent);d||(c.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var n=function(c){this._parent=c,this.init()};n.prototype={init:function(){var c=this,d=c._parent;return c._muted=d._muted,c._loop=d._loop,c._volume=d._volume,c._rate=d._rate,c._seek=0,c._paused=!0,c._ended=!0,c._sprite="__default",c._id=++r._counter,d._sounds.push(c),c.create(),c},create:function(){var c=this,d=c._parent,f=r._muted||c._muted||c._parent._muted?0:c._volume;return d._webAudio?(c._node=typeof r.ctx.createGain>"u"?r.ctx.createGainNode():r.ctx.createGain(),c._node.gain.setValueAtTime(f,r.ctx.currentTime),c._node.paused=!0,c._node.connect(r.masterGain)):r.noAudio||(c._node=r._obtainHtml5Audio(),c._errorFn=c._errorListener.bind(c),c._node.addEventListener("error",c._errorFn,!1),c._loadFn=c._loadListener.bind(c),c._node.addEventListener(r._canPlayEvent,c._loadFn,!1),c._endFn=c._endListener.bind(c),c._node.addEventListener("ended",c._endFn,!1),c._node.src=d._src,c._node.preload=d._preload===!0?"auto":d._preload,c._node.volume=f*r.volume(),c._node.load()),c},reset:function(){var c=this,d=c._parent;return c._muted=d._muted,c._loop=d._loop,c._volume=d._volume,c._rate=d._rate,c._seek=0,c._rateSeek=0,c._paused=!0,c._ended=!0,c._sprite="__default",c._id=++r._counter,c},_errorListener:function(){var c=this;c._parent._emit("loaderror",c._id,c._node.error?c._node.error.code:0),c._node.removeEventListener("error",c._errorFn,!1)},_loadListener:function(){var c=this,d=c._parent;d._duration=Math.ceil(c._node.duration*10)/10,Object.keys(d._sprite).length===0&&(d._sprite={__default:[0,d._duration*1e3]}),d._state!=="loaded"&&(d._state="loaded",d._emit("load"),d._loadQueue()),c._node.removeEventListener(r._canPlayEvent,c._loadFn,!1)},_endListener:function(){var c=this,d=c._parent;d._duration===1/0&&(d._duration=Math.ceil(c._node.duration*10)/10,d._sprite.__default[1]===1/0&&(d._sprite.__default[1]=d._duration*1e3),d._ended(c)),c._node.removeEventListener("ended",c._endFn,!1)}};var a={},s=function(c){var d=c._src;if(a[d]){c._duration=a[d].duration,u(c);return}if(/^data:[^;]+;base64,/.test(d)){for(var f=atob(d.split(",")[1]),m=new Uint8Array(f.length),p=0;p<f.length;++p)m[p]=f.charCodeAt(p);l(m.buffer,c)}else{var g=new XMLHttpRequest;g.open(c._xhr.method,d,!0),g.withCredentials=c._xhr.withCredentials,g.responseType="arraybuffer",c._xhr.headers&&Object.keys(c._xhr.headers).forEach(function(v){g.setRequestHeader(v,c._xhr.headers[v])}),g.onload=function(){var v=(g.status+"")[0];if(v!=="0"&&v!=="2"&&v!=="3"){c._emit("loaderror",null,"Failed loading audio file with status: "+g.status+".");return}l(g.response,c)},g.onerror=function(){c._webAudio&&(c._html5=!0,c._webAudio=!1,c._sounds=[],delete a[d],c.load())},o(g)}},o=function(c){try{c.send()}catch{c.onerror()}},l=function(c,d){var f=function(){d._emit("loaderror",null,"Decoding audio data failed.")},m=function(p){p&&d._sounds.length>0?(a[d._src]=p,u(d,p)):f()};typeof Promise<"u"&&r.ctx.decodeAudioData.length===1?r.ctx.decodeAudioData(c).then(m).catch(f):r.ctx.decodeAudioData(c,m,f)},u=function(c,d){d&&!c._duration&&(c._duration=d.duration),Object.keys(c._sprite).length===0&&(c._sprite={__default:[0,c._duration*1e3]}),c._state!=="loaded"&&(c._state="loaded",c._emit("load"),c._loadQueue())},h=function(){if(r.usingWebAudio){try{typeof AudioContext<"u"?r.ctx=new AudioContext:typeof webkitAudioContext<"u"?r.ctx=new webkitAudioContext:r.usingWebAudio=!1}catch{r.usingWebAudio=!1}r.ctx||(r.usingWebAudio=!1);var c=/iP(hone|od|ad)/.test(r._navigator&&r._navigator.platform),d=r._navigator&&r._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),f=d?parseInt(d[1],10):null;if(c&&f&&f<9){var m=/safari/.test(r._navigator&&r._navigator.userAgent.toLowerCase());r._navigator&&!m&&(r.usingWebAudio=!1)}r.usingWebAudio&&(r.masterGain=typeof r.ctx.createGain>"u"?r.ctx.createGainNode():r.ctx.createGain(),r.masterGain.gain.setValueAtTime(r._muted?0:r._volume,r.ctx.currentTime),r.masterGain.connect(r.ctx.destination)),r._setup()}};typeof define=="function"&&define.amd&&define([],function(){return{Howler:r,Howl:i}}),typeof e<"u"&&(e.Howler=r,e.Howl=i),typeof global<"u"?(global.HowlerGlobal=t,global.Howler=r,global.Howl=i,global.Sound=n):typeof window<"u"&&(window.HowlerGlobal=t,window.Howler=r,window.Howl=i,window.Sound=n)})(),function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(r){var i=this;if(!i.ctx||!i.ctx.listener)return i;for(var n=i._howls.length-1;n>=0;n--)i._howls[n].stereo(r);return i},HowlerGlobal.prototype.pos=function(r,i,n){var a=this;if(!a.ctx||!a.ctx.listener)return a;if(i=typeof i!="number"?a._pos[1]:i,n=typeof n!="number"?a._pos[2]:n,typeof r=="number")a._pos=[r,i,n],typeof a.ctx.listener.positionX<"u"?(a.ctx.listener.positionX.setTargetAtTime(a._pos[0],Howler.ctx.currentTime,.1),a.ctx.listener.positionY.setTargetAtTime(a._pos[1],Howler.ctx.currentTime,.1),a.ctx.listener.positionZ.setTargetAtTime(a._pos[2],Howler.ctx.currentTime,.1)):a.ctx.listener.setPosition(a._pos[0],a._pos[1],a._pos[2]);else return a._pos;return a},HowlerGlobal.prototype.orientation=function(r,i,n,a,s,o){var l=this;if(!l.ctx||!l.ctx.listener)return l;var u=l._orientation;if(i=typeof i!="number"?u[1]:i,n=typeof n!="number"?u[2]:n,a=typeof a!="number"?u[3]:a,s=typeof s!="number"?u[4]:s,o=typeof o!="number"?u[5]:o,typeof r=="number")l._orientation=[r,i,n,a,s,o],typeof l.ctx.listener.forwardX<"u"?(l.ctx.listener.forwardX.setTargetAtTime(r,Howler.ctx.currentTime,.1),l.ctx.listener.forwardY.setTargetAtTime(i,Howler.ctx.currentTime,.1),l.ctx.listener.forwardZ.setTargetAtTime(n,Howler.ctx.currentTime,.1),l.ctx.listener.upX.setTargetAtTime(a,Howler.ctx.currentTime,.1),l.ctx.listener.upY.setTargetAtTime(s,Howler.ctx.currentTime,.1),l.ctx.listener.upZ.setTargetAtTime(o,Howler.ctx.currentTime,.1)):l.ctx.listener.setOrientation(r,i,n,a,s,o);else return u;return l},Howl.prototype.init=function(r){return function(i){var n=this;return n._orientation=i.orientation||[1,0,0],n._stereo=i.stereo||null,n._pos=i.pos||null,n._pannerAttr={coneInnerAngle:typeof i.coneInnerAngle<"u"?i.coneInnerAngle:360,coneOuterAngle:typeof i.coneOuterAngle<"u"?i.coneOuterAngle:360,coneOuterGain:typeof i.coneOuterGain<"u"?i.coneOuterGain:0,distanceModel:typeof i.distanceModel<"u"?i.distanceModel:"inverse",maxDistance:typeof i.maxDistance<"u"?i.maxDistance:1e4,panningModel:typeof i.panningModel<"u"?i.panningModel:"HRTF",refDistance:typeof i.refDistance<"u"?i.refDistance:1,rolloffFactor:typeof i.rolloffFactor<"u"?i.rolloffFactor:1},n._onstereo=i.onstereo?[{fn:i.onstereo}]:[],n._onpos=i.onpos?[{fn:i.onpos}]:[],n._onorientation=i.onorientation?[{fn:i.onorientation}]:[],r.call(this,i)}}(Howl.prototype.init),Howl.prototype.stereo=function(r,i){var n=this;if(!n._webAudio)return n;if(n._state!=="loaded")return n._queue.push({event:"stereo",action:function(){n.stereo(r,i)}}),n;var a=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof i>"u")if(typeof r=="number")n._stereo=r,n._pos=[r,0,0];else return n._stereo;for(var s=n._getSoundIds(i),o=0;o<s.length;o++){var l=n._soundById(s[o]);if(l)if(typeof r=="number")l._stereo=r,l._pos=[r,0,0],l._node&&(l._pannerAttr.panningModel="equalpower",(!l._panner||!l._panner.pan)&&t(l,a),a==="spatial"?typeof l._panner.positionX<"u"?(l._panner.positionX.setValueAtTime(r,Howler.ctx.currentTime),l._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),l._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):l._panner.setPosition(r,0,0):l._panner.pan.setValueAtTime(r,Howler.ctx.currentTime)),n._emit("stereo",l._id);else return l._stereo}return n},Howl.prototype.pos=function(r,i,n,a){var s=this;if(!s._webAudio)return s;if(s._state!=="loaded")return s._queue.push({event:"pos",action:function(){s.pos(r,i,n,a)}}),s;if(i=typeof i!="number"?0:i,n=typeof n!="number"?-.5:n,typeof a>"u")if(typeof r=="number")s._pos=[r,i,n];else return s._pos;for(var o=s._getSoundIds(a),l=0;l<o.length;l++){var u=s._soundById(o[l]);if(u)if(typeof r=="number")u._pos=[r,i,n],u._node&&((!u._panner||u._panner.pan)&&t(u,"spatial"),typeof u._panner.positionX<"u"?(u._panner.positionX.setValueAtTime(r,Howler.ctx.currentTime),u._panner.positionY.setValueAtTime(i,Howler.ctx.currentTime),u._panner.positionZ.setValueAtTime(n,Howler.ctx.currentTime)):u._panner.setPosition(r,i,n)),s._emit("pos",u._id);else return u._pos}return s},Howl.prototype.orientation=function(r,i,n,a){var s=this;if(!s._webAudio)return s;if(s._state!=="loaded")return s._queue.push({event:"orientation",action:function(){s.orientation(r,i,n,a)}}),s;if(i=typeof i!="number"?s._orientation[1]:i,n=typeof n!="number"?s._orientation[2]:n,typeof a>"u")if(typeof r=="number")s._orientation=[r,i,n];else return s._orientation;for(var o=s._getSoundIds(a),l=0;l<o.length;l++){var u=s._soundById(o[l]);if(u)if(typeof r=="number")u._orientation=[r,i,n],u._node&&(u._panner||(u._pos||(u._pos=s._pos||[0,0,-.5]),t(u,"spatial")),typeof u._panner.orientationX<"u"?(u._panner.orientationX.setValueAtTime(r,Howler.ctx.currentTime),u._panner.orientationY.setValueAtTime(i,Howler.ctx.currentTime),u._panner.orientationZ.setValueAtTime(n,Howler.ctx.currentTime)):u._panner.setOrientation(r,i,n)),s._emit("orientation",u._id);else return u._orientation}return s},Howl.prototype.pannerAttr=function(){var r=this,i=arguments,n,a,s;if(!r._webAudio)return r;if(i.length===0)return r._pannerAttr;if(i.length===1)if(typeof i[0]=="object")n=i[0],typeof a>"u"&&(n.pannerAttr||(n.pannerAttr={coneInnerAngle:n.coneInnerAngle,coneOuterAngle:n.coneOuterAngle,coneOuterGain:n.coneOuterGain,distanceModel:n.distanceModel,maxDistance:n.maxDistance,refDistance:n.refDistance,rolloffFactor:n.rolloffFactor,panningModel:n.panningModel}),r._pannerAttr={coneInnerAngle:typeof n.pannerAttr.coneInnerAngle<"u"?n.pannerAttr.coneInnerAngle:r._coneInnerAngle,coneOuterAngle:typeof n.pannerAttr.coneOuterAngle<"u"?n.pannerAttr.coneOuterAngle:r._coneOuterAngle,coneOuterGain:typeof n.pannerAttr.coneOuterGain<"u"?n.pannerAttr.coneOuterGain:r._coneOuterGain,distanceModel:typeof n.pannerAttr.distanceModel<"u"?n.pannerAttr.distanceModel:r._distanceModel,maxDistance:typeof n.pannerAttr.maxDistance<"u"?n.pannerAttr.maxDistance:r._maxDistance,refDistance:typeof n.pannerAttr.refDistance<"u"?n.pannerAttr.refDistance:r._refDistance,rolloffFactor:typeof n.pannerAttr.rolloffFactor<"u"?n.pannerAttr.rolloffFactor:r._rolloffFactor,panningModel:typeof n.pannerAttr.panningModel<"u"?n.pannerAttr.panningModel:r._panningModel});else return s=r._soundById(parseInt(i[0],10)),s?s._pannerAttr:r._pannerAttr;else i.length===2&&(n=i[0],a=parseInt(i[1],10));for(var o=r._getSoundIds(a),l=0;l<o.length;l++)if(s=r._soundById(o[l]),s){var u=s._pannerAttr;u={coneInnerAngle:typeof n.coneInnerAngle<"u"?n.coneInnerAngle:u.coneInnerAngle,coneOuterAngle:typeof n.coneOuterAngle<"u"?n.coneOuterAngle:u.coneOuterAngle,coneOuterGain:typeof n.coneOuterGain<"u"?n.coneOuterGain:u.coneOuterGain,distanceModel:typeof n.distanceModel<"u"?n.distanceModel:u.distanceModel,maxDistance:typeof n.maxDistance<"u"?n.maxDistance:u.maxDistance,refDistance:typeof n.refDistance<"u"?n.refDistance:u.refDistance,rolloffFactor:typeof n.rolloffFactor<"u"?n.rolloffFactor:u.rolloffFactor,panningModel:typeof n.panningModel<"u"?n.panningModel:u.panningModel};var h=s._panner;h?(h.coneInnerAngle=u.coneInnerAngle,h.coneOuterAngle=u.coneOuterAngle,h.coneOuterGain=u.coneOuterGain,h.distanceModel=u.distanceModel,h.maxDistance=u.maxDistance,h.refDistance=u.refDistance,h.rolloffFactor=u.rolloffFactor,h.panningModel=u.panningModel):(s._pos||(s._pos=r._pos||[0,0,-.5]),t(s,"spatial"))}return r},Sound.prototype.init=function(r){return function(){var i=this,n=i._parent;i._orientation=n._orientation,i._stereo=n._stereo,i._pos=n._pos,i._pannerAttr=n._pannerAttr,r.call(this),i._stereo?n.stereo(i._stereo):i._pos&&n.pos(i._pos[0],i._pos[1],i._pos[2],i._id)}}(Sound.prototype.init),Sound.prototype.reset=function(r){return function(){var i=this,n=i._parent;return i._orientation=n._orientation,i._stereo=n._stereo,i._pos=n._pos,i._pannerAttr=n._pannerAttr,i._stereo?n.stereo(i._stereo):i._pos?n.pos(i._pos[0],i._pos[1],i._pos[2],i._id):i._panner&&(i._panner.disconnect(0),i._panner=void 0,n._refreshBuffer(i)),r.call(this)}}(Sound.prototype.reset);var t=function(r,i){i=i||"spatial",i==="spatial"?(r._panner=Howler.ctx.createPanner(),r._panner.coneInnerAngle=r._pannerAttr.coneInnerAngle,r._panner.coneOuterAngle=r._pannerAttr.coneOuterAngle,r._panner.coneOuterGain=r._pannerAttr.coneOuterGain,r._panner.distanceModel=r._pannerAttr.distanceModel,r._panner.maxDistance=r._pannerAttr.maxDistance,r._panner.refDistance=r._pannerAttr.refDistance,r._panner.rolloffFactor=r._pannerAttr.rolloffFactor,r._panner.panningModel=r._pannerAttr.panningModel,typeof r._panner.positionX<"u"?(r._panner.positionX.setValueAtTime(r._pos[0],Howler.ctx.currentTime),r._panner.positionY.setValueAtTime(r._pos[1],Howler.ctx.currentTime),r._panner.positionZ.setValueAtTime(r._pos[2],Howler.ctx.currentTime)):r._panner.setPosition(r._pos[0],r._pos[1],r._pos[2]),typeof r._panner.orientationX<"u"?(r._panner.orientationX.setValueAtTime(r._orientation[0],Howler.ctx.currentTime),r._panner.orientationY.setValueAtTime(r._orientation[1],Howler.ctx.currentTime),r._panner.orientationZ.setValueAtTime(r._orientation[2],Howler.ctx.currentTime)):r._panner.setOrientation(r._orientation[0],r._orientation[1],r._orientation[2])):(r._panner=Howler.ctx.createStereoPanner(),r._panner.pan.setValueAtTime(r._stereo,Howler.ctx.currentTime)),r._panner.connect(r._node),r._paused||r._parent.pause(r._id,!0).play(r._id,!0)}}()}),Xge=fd((e,t)=>{t.exports=function(r,i){for(var n=r.split("."),a=i.split("."),s=0;s<3;s++){var o=Number(n[s]),l=Number(a[s]);if(o>l)return 1;if(l>o)return-1;if(!isNaN(o)&&isNaN(l))return 1;if(isNaN(o)&&!isNaN(l))return-1}return 0}}),uv="149",oo={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Qge=0,ez=1,Kge=2,vR=1,Zge=2,F0=3,Ml=0,Vn=1,Ys=2,hn=0,tg=1,tz=2,rz=3,iz=4,Jge=5,lm=100,eve=101,tve=102,nz=103,az=104,rve=200,ive=201,nve=202,ave=203,t7=204,r7=205,sve=206,ove=207,lve=208,uve=209,cve=210,hve=0,dve=1,fve=2,aD=3,pve=4,mve=5,gve=6,vve=7,i7=0,yve=1,xve=2,gc=0,bve=1,wve=2,_ve=3,Sve=4,Eve=5,n7=300,Ff=301,Uf=302,sD=303,oD=304,Y1=306,hc=1e3,$i=1001,lD=1002,si=1003,sz=1004,_C=1005,Kt=1006,Mve=1007,Bg=1008,Ea=1009,Cve=1010,Ave=1011,a7=1012,Tve=1013,_h=1014,qs=1015,Ng=1016,Pve=1017,Dve=1018,xf=1020,Ove=1021,Co=1023,Ive=1024,Rve=1025,bf=1026,jf=1027,kve=1028,Lve=1029,s7=1030,Bve=1031,Nve=1033,SC=33776,EC=33777,MC=33778,CC=33779,oz=35840,lz=35841,uz=35842,cz=35843,zve=36196,hz=37492,dz=37496,fz=37808,pz=37809,mz=37810,gz=37811,vz=37812,yz=37813,xz=37814,bz=37815,wz=37816,_z=37817,Sz=37818,Ez=37819,Mz=37820,Cz=37821,AC=36492,Fve=36283,Az=36284,Tz=36285,Pz=36286,o7=2200,l7=2201,yR=2202,sS=2300,oS=2301,TC=2302,Dm=2400,Om=2401,lS=2402,xR=2500,Uve=2501,Su=3e3,Ht=3001,Lc=3200,u7=3201,jve=0,Vve=1,Yl="srgb",uS="srgb-linear",PC=7680,Hve=519,uD=35044,Dz="300 es",cD=1035,sa=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});let r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;let r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;let r=this._listeners[e];if(r!==void 0){let i=r.indexOf(t);i!==-1&&r.splice(i,1)}}dispatchEvent(e){if(this._listeners===void 0)return;let t=this._listeners[e.type];if(t!==void 0){e.target=this;let r=t.slice(0);for(let i=0,n=r.length;i<n;i++)r[i].call(this,e);e.target=null}}},ha=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],Oz=1234567,gy=Math.PI/180,o1=180/Math.PI;function ko(){let e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(ha[e&255]+ha[e>>8&255]+ha[e>>16&255]+ha[e>>24&255]+"-"+ha[t&255]+ha[t>>8&255]+"-"+ha[t>>16&15|64]+ha[t>>24&255]+"-"+ha[r&63|128]+ha[r>>8&255]+"-"+ha[r>>16&255]+ha[r>>24&255]+ha[i&255]+ha[i>>8&255]+ha[i>>16&255]+ha[i>>24&255]).toLowerCase()}function Sn(e,t,r){return Math.max(t,Math.min(r,e))}function bR(e,t){return(e%t+t)%t}function Gve(e,t,r,i,n){return i+(e-t)*(n-i)/(r-t)}function Wve(e,t,r){return e!==t?(r-e)/(t-e):0}function vy(e,t,r){return(1-r)*e+r*t}function $ve(e,t,r,i){return vy(e,t,1-Math.exp(-r*i))}function Yve(e,t=1){return t-Math.abs(bR(e,t*2)-t)}function qve(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t),e*e*(3-2*e))}function Xve(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t),e*e*e*(e*(e*6-15)+10))}function Qve(e,t){return e+Math.floor(Math.random()*(t-e+1))}function Kve(e,t){return e+Math.random()*(t-e)}function Zve(e){return e*(.5-Math.random())}function Jve(e){e!==void 0&&(Oz=e);let t=Oz+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}function e0e(e){return e*gy}function t0e(e){return e*o1}function hD(e){return(e&e-1)===0&&e!==0}function c7(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function cS(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function r0e(e,t,r,i,n){let a=Math.cos,s=Math.sin,o=a(r/2),l=s(r/2),u=a((t+i)/2),h=s((t+i)/2),c=a((t-i)/2),d=s((t-i)/2),f=a((i-t)/2),m=s((i-t)/2);switch(n){case"XYX":e.set(o*h,l*c,l*d,o*u);break;case"YZY":e.set(l*d,o*h,l*c,o*u);break;case"ZXZ":e.set(l*c,l*d,o*h,o*u);break;case"XZX":e.set(o*h,l*m,l*f,o*u);break;case"YXY":e.set(l*f,o*h,l*m,o*u);break;case"ZYZ":e.set(l*m,l*f,o*h,o*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+n)}}function dc(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function ni(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return Math.round(e*65535);case Uint8Array:return Math.round(e*255);case Int16Array:return Math.round(e*32767);case Int8Array:return Math.round(e*127);default:throw new Error("Invalid component type.")}}var bt=Object.freeze({__proto__:null,DEG2RAD:gy,RAD2DEG:o1,ceilPowerOfTwo:c7,clamp:Sn,damp:$ve,degToRad:e0e,denormalize:dc,euclideanModulo:bR,floorPowerOfTwo:cS,generateUUID:ko,inverseLerp:Wve,isPowerOfTwo:hD,lerp:vy,mapLinear:Gve,normalize:ni,pingpong:Yve,radToDeg:t0e,randFloat:Kve,randFloatSpread:Zve,randInt:Qve,seededRandom:Jve,setQuaternionFromProperEuler:r0e,smootherstep:Xve,smoothstep:qve}),re=class{constructor(e=0,t=0){re.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){let t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){let r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){let r=Math.cos(t),i=Math.sin(t),n=this.x-e.x,a=this.y-e.y;return this.x=n*r-a*i+e.x,this.y=n*i+a*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},Hn=class{constructor(){Hn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,r,i,n,a,s,o,l){let u=this.elements;return u[0]=e,u[1]=i,u[2]=s,u[3]=t,u[4]=n,u[5]=o,u[6]=r,u[7]=a,u[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){let t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){let t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let r=e.elements,i=t.elements,n=this.elements,a=r[0],s=r[3],o=r[6],l=r[1],u=r[4],h=r[7],c=r[2],d=r[5],f=r[8],m=i[0],p=i[3],g=i[6],v=i[1],y=i[4],x=i[7],b=i[2],_=i[5],w=i[8];return n[0]=a*m+s*v+o*b,n[3]=a*p+s*y+o*_,n[6]=a*g+s*x+o*w,n[1]=l*m+u*v+h*b,n[4]=l*p+u*y+h*_,n[7]=l*g+u*x+h*w,n[2]=c*m+d*v+f*b,n[5]=c*p+d*y+f*_,n[8]=c*g+d*x+f*w,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){let e=this.elements,t=e[0],r=e[1],i=e[2],n=e[3],a=e[4],s=e[5],o=e[6],l=e[7],u=e[8];return t*a*u-t*s*l-r*n*u+r*s*o+i*n*l-i*a*o}invert(){let e=this.elements,t=e[0],r=e[1],i=e[2],n=e[3],a=e[4],s=e[5],o=e[6],l=e[7],u=e[8],h=u*a-s*l,c=s*o-u*n,d=l*n-a*o,f=t*h+r*c+i*d;if(f===0)return this.set(0,0,0,0,0,0,0,0,0);let m=1/f;return e[0]=h*m,e[1]=(i*l-u*r)*m,e[2]=(s*r-i*a)*m,e[3]=c*m,e[4]=(u*t-i*o)*m,e[5]=(i*n-s*t)*m,e[6]=d*m,e[7]=(r*o-l*t)*m,e[8]=(a*t-r*n)*m,this}transpose(){let e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){let t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,n,a,s){let o=Math.cos(n),l=Math.sin(n);return this.set(r*o,r*l,-r*(o*a+l*s)+a+e,-i*l,i*o,-i*(-l*a+o*s)+s+t,0,0,1),this}scale(e,t){return this.premultiply(DC.makeScale(e,t)),this}rotate(e){return this.premultiply(DC.makeRotation(-e)),this}translate(e,t){return this.premultiply(DC.makeTranslation(e,t)),this}makeTranslation(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){let t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,r,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){let t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){let r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}},DC=new Hn;function h7(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}var i0e={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Qx(e,t){return new i0e[e](t)}function hS(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function wf(e){return e<.04045?e*.0773993808:Math.pow(e*.9478672986+.0521327014,2.4)}function jw(e){return e<.0031308?e*12.92:1.055*Math.pow(e,.41666)-.055}var OC={[Yl]:{[uS]:wf},[uS]:{[Yl]:jw}},Pa={legacyMode:!0,get workingColorSpace(){return uS},set workingColorSpace(e){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(e,t,r){if(this.legacyMode||t===r||!t||!r)return e;if(OC[t]&&OC[t][r]!==void 0){let i=OC[t][r];return e.r=i(e.r),e.g=i(e.g),e.b=i(e.b),e}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this.workingColorSpace)}},d7={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},vn={r:0,g:0,b:0},Xo={h:0,s:0,l:0},Kx={h:0,s:0,l:0};function IC(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*6*(2/3-r):e}function Zx(e,t){return t.r=e.r,t.g=e.g,t.b=e.b,t}var At=class{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,t===void 0&&r===void 0?this.set(e):this.setRGB(e,t,r)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Yl){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Pa.toWorkingColorSpace(this,t),this}setRGB(e,t,r,i=Pa.workingColorSpace){return this.r=e,this.g=t,this.b=r,Pa.toWorkingColorSpace(this,i),this}setHSL(e,t,r,i=Pa.workingColorSpace){if(e=bR(e,1),t=Sn(t,0,1),r=Sn(r,0,1),t===0)this.r=this.g=this.b=r;else{let n=r<=.5?r*(1+t):r+t-r*t,a=2*r-n;this.r=IC(a,n,e+1/3),this.g=IC(a,n,e),this.b=IC(a,n,e-1/3)}return Pa.toWorkingColorSpace(this,i),this}setStyle(e,t=Yl){function r(n){n!==void 0&&parseFloat(n)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let n,a=i[1],s=i[2];switch(a){case"rgb":case"rgba":if(n=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return this.r=Math.min(255,parseInt(n[1],10))/255,this.g=Math.min(255,parseInt(n[2],10))/255,this.b=Math.min(255,parseInt(n[3],10))/255,Pa.toWorkingColorSpace(this,t),r(n[4]),this;if(n=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return this.r=Math.min(100,parseInt(n[1],10))/100,this.g=Math.min(100,parseInt(n[2],10))/100,this.b=Math.min(100,parseInt(n[3],10))/100,Pa.toWorkingColorSpace(this,t),r(n[4]),this;break;case"hsl":case"hsla":if(n=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s)){let o=parseFloat(n[1])/360,l=parseFloat(n[2])/100,u=parseFloat(n[3])/100;return r(n[4]),this.setHSL(o,l,u,t)}break}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){let n=i[1],a=n.length;if(a===3)return this.r=parseInt(n.charAt(0)+n.charAt(0),16)/255,this.g=parseInt(n.charAt(1)+n.charAt(1),16)/255,this.b=parseInt(n.charAt(2)+n.charAt(2),16)/255,Pa.toWorkingColorSpace(this,t),this;if(a===6)return this.r=parseInt(n.charAt(0)+n.charAt(1),16)/255,this.g=parseInt(n.charAt(2)+n.charAt(3),16)/255,this.b=parseInt(n.charAt(4)+n.charAt(5),16)/255,Pa.toWorkingColorSpace(this,t),this}return e&&e.length>0?this.setColorName(e,t):this}setColorName(e,t=Yl){let r=d7[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=wf(e.r),this.g=wf(e.g),this.b=wf(e.b),this}copyLinearToSRGB(e){return this.r=jw(e.r),this.g=jw(e.g),this.b=jw(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Yl){return Pa.fromWorkingColorSpace(Zx(this,vn),e),Sn(vn.r*255,0,255)<<16^Sn(vn.g*255,0,255)<<8^Sn(vn.b*255,0,255)<<0}getHexString(e=Yl){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Pa.workingColorSpace){Pa.fromWorkingColorSpace(Zx(this,vn),t);let r=vn.r,i=vn.g,n=vn.b,a=Math.max(r,i,n),s=Math.min(r,i,n),o,l,u=(s+a)/2;if(s===a)o=0,l=0;else{let h=a-s;switch(l=u<=.5?h/(a+s):h/(2-a-s),a){case r:o=(i-n)/h+(i<n?6:0);break;case i:o=(n-r)/h+2;break;case n:o=(r-i)/h+4;break}o/=6}return e.h=o,e.s=l,e.l=u,e}getRGB(e,t=Pa.workingColorSpace){return Pa.fromWorkingColorSpace(Zx(this,vn),t),e.r=vn.r,e.g=vn.g,e.b=vn.b,e}getStyle(e=Yl){return Pa.fromWorkingColorSpace(Zx(this,vn),e),e!==Yl?`color(${e} ${vn.r} ${vn.g} ${vn.b})`:`rgb(${vn.r*255|0},${vn.g*255|0},${vn.b*255|0})`}offsetHSL(e,t,r){return this.getHSL(Xo),Xo.h+=e,Xo.s+=t,Xo.l+=r,this.setHSL(Xo.h,Xo.s,Xo.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(Xo),e.getHSL(Kx);let r=vy(Xo.h,Kx.h,t),i=vy(Xo.s,Kx.s,t),n=vy(Xo.l,Kx.l,t);return this.setHSL(r,i,n),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};At.NAMES=d7;var Sp,f7=class{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Sp===void 0&&(Sp=hS("canvas")),Sp.width=e.width,Sp.height=e.height;let r=Sp.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=Sp}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){let t=hS("canvas");t.width=e.width,t.height=e.height;let r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);let i=r.getImageData(0,0,e.width,e.height),n=i.data;for(let a=0;a<n.length;a++)n[a]=wf(n[a]/255)*255;return r.putImageData(i,0,0),t}else if(e.data){let t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(wf(t[r]/255)*255):t[r]=wf(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}},p7=class{constructor(e=null){this.isSource=!0,this.uuid=ko(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){let t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];let r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let n;if(Array.isArray(i)){n=[];for(let a=0,s=i.length;a<s;a++)i[a].isDataTexture?n.push(RC(i[a].image)):n.push(RC(i[a]))}else n=RC(i);r.url=n}return t||(e.images[this.uuid]=r),r}};function RC(e){return typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap?f7.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var n0e=0,Mn=class extends sa{constructor(e=Mn.DEFAULT_IMAGE,t=Mn.DEFAULT_MAPPING,r=$i,i=$i,n=Kt,a=Bg,s=Co,o=Ea,l=Mn.DEFAULT_ANISOTROPY,u=Su){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:n0e++}),this.uuid=ko(),this.name="",this.source=new p7(e),this.mipmaps=[],this.mapping=t,this.wrapS=r,this.wrapT=i,this.magFilter=n,this.minFilter=a,this.anisotropy=l,this.format=s,this.internalFormat=null,this.type=o,this.offset=new re(0,0),this.repeat=new re(1,1),this.center=new re(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Hn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=u,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){let t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];let r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==n7)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case hc:e.x=e.x-Math.floor(e.x);break;case $i:e.x=e.x<0?0:1;break;case lD:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case hc:e.y=e.y-Math.floor(e.y);break;case $i:e.y=e.y<0?0:1;break;case lD:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}};Mn.DEFAULT_IMAGE=null;Mn.DEFAULT_MAPPING=n7;Mn.DEFAULT_ANISOTROPY=1;var Wt=class{constructor(e=0,t=0,r=0,i=1){Wt.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){let t=this.x,r=this.y,i=this.z,n=this.w,a=e.elements;return this.x=a[0]*t+a[4]*r+a[8]*i+a[12]*n,this.y=a[1]*t+a[5]*r+a[9]*i+a[13]*n,this.z=a[2]*t+a[6]*r+a[10]*i+a[14]*n,this.w=a[3]*t+a[7]*r+a[11]*i+a[15]*n,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);let t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,n,a=e.elements,s=a[0],o=a[4],l=a[8],u=a[1],h=a[5],c=a[9],d=a[2],f=a[6],m=a[10];if(Math.abs(o-u)<.01&&Math.abs(l-d)<.01&&Math.abs(c-f)<.01){if(Math.abs(o+u)<.1&&Math.abs(l+d)<.1&&Math.abs(c+f)<.1&&Math.abs(s+h+m-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;let g=(s+1)/2,v=(h+1)/2,y=(m+1)/2,x=(o+u)/4,b=(l+d)/4,_=(c+f)/4;return g>v&&g>y?g<.01?(r=0,i=.707106781,n=.707106781):(r=Math.sqrt(g),i=x/r,n=b/r):v>y?v<.01?(r=.707106781,i=0,n=.707106781):(i=Math.sqrt(v),r=x/i,n=_/i):y<.01?(r=.707106781,i=.707106781,n=0):(n=Math.sqrt(y),r=b/n,i=_/n),this.set(r,i,n,t),this}let p=Math.sqrt((f-c)*(f-c)+(l-d)*(l-d)+(u-o)*(u-o));return Math.abs(p)<.001&&(p=1),this.x=(f-c)/p,this.y=(l-d)/p,this.z=(u-o)/p,this.w=Math.acos((s+h+m-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){let r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},Yr=class extends sa{constructor(e=1,t=1,r={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Wt(0,0,e,t),this.scissorTest=!1,this.viewport=new Wt(0,0,e,t);let i={width:e,height:t,depth:1};this.texture=new Mn(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps!==void 0?r.generateMipmaps:!1,this.texture.internalFormat=r.internalFormat!==void 0?r.internalFormat:null,this.texture.minFilter=r.minFilter!==void 0?r.minFilter:Kt,this.depthBuffer=r.depthBuffer!==void 0?r.depthBuffer:!0,this.stencilBuffer=r.stencilBuffer!==void 0?r.stencilBuffer:!1,this.depthTexture=r.depthTexture!==void 0?r.depthTexture:null,this.samples=r.samples!==void 0?r.samples:0}setSize(e,t,r=1){(this.width!==e||this.height!==t||this.depth!==r)&&(this.width=e,this.height=t,this.depth=r,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;let t=Object.assign({},e.texture.image);return this.texture.source=new p7(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}},m7=class extends Mn{constructor(e=null,t=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=si,this.minFilter=si,this.wrapR=$i,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},a0e=class extends Mn{constructor(e=null,t=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=si,this.minFilter=si,this.wrapR=$i,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},s0e=class extends Yr{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGLMultipleRenderTargets=!0;let n=this.texture;this.texture=[];for(let a=0;a<r;a++)this.texture[a]=n.clone(),this.texture[a].isRenderTargetTexture=!0}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let i=0,n=this.texture.length;i<n;i++)this.texture[i].image.width=e,this.texture[i].image.height=t,this.texture[i].image.depth=r;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,r=e.texture.length;t<r;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}},Gt=class{constructor(e=0,t=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=i}static slerpFlat(e,t,r,i,n,a,s){let o=r[i+0],l=r[i+1],u=r[i+2],h=r[i+3],c=n[a+0],d=n[a+1],f=n[a+2],m=n[a+3];if(s===0){e[t+0]=o,e[t+1]=l,e[t+2]=u,e[t+3]=h;return}if(s===1){e[t+0]=c,e[t+1]=d,e[t+2]=f,e[t+3]=m;return}if(h!==m||o!==c||l!==d||u!==f){let p=1-s,g=o*c+l*d+u*f+h*m,v=g>=0?1:-1,y=1-g*g;if(y>Number.EPSILON){let b=Math.sqrt(y),_=Math.atan2(b,g*v);p=Math.sin(p*_)/b,s=Math.sin(s*_)/b}let x=s*v;if(o=o*p+c*x,l=l*p+d*x,u=u*p+f*x,h=h*p+m*x,p===1-s){let b=1/Math.sqrt(o*o+l*l+u*u+h*h);o*=b,l*=b,u*=b,h*=b}}e[t]=o,e[t+1]=l,e[t+2]=u,e[t+3]=h}static multiplyQuaternionsFlat(e,t,r,i,n,a){let s=r[i],o=r[i+1],l=r[i+2],u=r[i+3],h=n[a],c=n[a+1],d=n[a+2],f=n[a+3];return e[t]=s*f+u*h+o*d-l*c,e[t+1]=o*f+u*c+l*h-s*d,e[t+2]=l*f+u*d+s*c-o*h,e[t+3]=u*f-s*h-o*c-l*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){let r=e._x,i=e._y,n=e._z,a=e._order,s=Math.cos,o=Math.sin,l=s(r/2),u=s(i/2),h=s(n/2),c=o(r/2),d=o(i/2),f=o(n/2);switch(a){case"XYZ":this._x=c*u*h+l*d*f,this._y=l*d*h-c*u*f,this._z=l*u*f+c*d*h,this._w=l*u*h-c*d*f;break;case"YXZ":this._x=c*u*h+l*d*f,this._y=l*d*h-c*u*f,this._z=l*u*f-c*d*h,this._w=l*u*h+c*d*f;break;case"ZXY":this._x=c*u*h-l*d*f,this._y=l*d*h+c*u*f,this._z=l*u*f+c*d*h,this._w=l*u*h-c*d*f;break;case"ZYX":this._x=c*u*h-l*d*f,this._y=l*d*h+c*u*f,this._z=l*u*f-c*d*h,this._w=l*u*h+c*d*f;break;case"YZX":this._x=c*u*h+l*d*f,this._y=l*d*h+c*u*f,this._z=l*u*f-c*d*h,this._w=l*u*h-c*d*f;break;case"XZY":this._x=c*u*h-l*d*f,this._y=l*d*h-c*u*f,this._z=l*u*f+c*d*h,this._w=l*u*h+c*d*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){let r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){let t=e.elements,r=t[0],i=t[4],n=t[8],a=t[1],s=t[5],o=t[9],l=t[2],u=t[6],h=t[10],c=r+s+h;if(c>0){let d=.5/Math.sqrt(c+1);this._w=.25/d,this._x=(u-o)*d,this._y=(n-l)*d,this._z=(a-i)*d}else if(r>s&&r>h){let d=2*Math.sqrt(1+r-s-h);this._w=(u-o)/d,this._x=.25*d,this._y=(i+a)/d,this._z=(n+l)/d}else if(s>h){let d=2*Math.sqrt(1+s-r-h);this._w=(n-l)/d,this._x=(i+a)/d,this._y=.25*d,this._z=(o+u)/d}else{let d=2*Math.sqrt(1+h-r-s);this._w=(a-i)/d,this._x=(n+l)/d,this._y=(o+u)/d,this._z=.25*d}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Sn(this.dot(e),-1,1)))}rotateTowards(e,t){let r=this.angleTo(e);if(r===0)return this;let i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){let r=e._x,i=e._y,n=e._z,a=e._w,s=t._x,o=t._y,l=t._z,u=t._w;return this._x=r*u+a*s+i*l-n*o,this._y=i*u+a*o+n*s-r*l,this._z=n*u+a*l+r*o-i*s,this._w=a*u-r*s-i*o-n*l,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);let r=this._x,i=this._y,n=this._z,a=this._w,s=a*e._w+r*e._x+i*e._y+n*e._z;if(s<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,s=-s):this.copy(e),s>=1)return this._w=a,this._x=r,this._y=i,this._z=n,this;let o=1-s*s;if(o<=Number.EPSILON){let d=1-t;return this._w=d*a+t*this._w,this._x=d*r+t*this._x,this._y=d*i+t*this._y,this._z=d*n+t*this._z,this.normalize(),this._onChangeCallback(),this}let l=Math.sqrt(o),u=Math.atan2(l,s),h=Math.sin((1-t)*u)/l,c=Math.sin(t*u)/l;return this._w=a*h+this._w*c,this._x=r*h+this._x*c,this._y=i*h+this._y*c,this._z=n*h+this._z*c,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){let e=Math.random(),t=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),n=2*Math.PI*Math.random();return this.set(t*Math.cos(i),r*Math.sin(n),r*Math.cos(n),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},T=class{constructor(e=0,t=0,r=0){T.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(Iz.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Iz.setFromAxisAngle(e,t))}applyMatrix3(e){let t=this.x,r=this.y,i=this.z,n=e.elements;return this.x=n[0]*t+n[3]*r+n[6]*i,this.y=n[1]*t+n[4]*r+n[7]*i,this.z=n[2]*t+n[5]*r+n[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){let t=this.x,r=this.y,i=this.z,n=e.elements,a=1/(n[3]*t+n[7]*r+n[11]*i+n[15]);return this.x=(n[0]*t+n[4]*r+n[8]*i+n[12])*a,this.y=(n[1]*t+n[5]*r+n[9]*i+n[13])*a,this.z=(n[2]*t+n[6]*r+n[10]*i+n[14])*a,this}applyQuaternion(e){let t=this.x,r=this.y,i=this.z,n=e.x,a=e.y,s=e.z,o=e.w,l=o*t+a*i-s*r,u=o*r+s*t-n*i,h=o*i+n*r-a*t,c=-n*t-a*r-s*i;return this.x=l*o+c*-n+u*-s-h*-a,this.y=u*o+c*-a+h*-n-l*-s,this.z=h*o+c*-s+l*-a-u*-n,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){let t=this.x,r=this.y,i=this.z,n=e.elements;return this.x=n[0]*t+n[4]*r+n[8]*i,this.y=n[1]*t+n[5]*r+n[9]*i,this.z=n[2]*t+n[6]*r+n[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){let r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){let r=e.x,i=e.y,n=e.z,a=t.x,s=t.y,o=t.z;return this.x=i*o-n*s,this.y=n*a-r*o,this.z=r*s-i*a,this}projectOnVector(e){let t=e.lengthSq();if(t===0)return this.set(0,0,0);let r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return kC.copy(this).projectOnVector(e),this.sub(kC)}reflect(e){return this.sub(kC.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;let r=this.dot(e)/t;return Math.acos(Sn(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){let i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){let t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(t),this.y=r*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}},kC=new T,Iz=new Gt,Qi=class{constructor(e=new T(1/0,1/0,1/0),t=new T(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,r=1/0,i=1/0,n=-1/0,a=-1/0,s=-1/0;for(let o=0,l=e.length;o<l;o+=3){let u=e[o],h=e[o+1],c=e[o+2];u<t&&(t=u),h<r&&(r=h),c<i&&(i=c),u>n&&(n=u),h>a&&(a=h),c>s&&(s=c)}return this.min.set(t,r,i),this.max.set(n,a,s),this}setFromBufferAttribute(e){let t=1/0,r=1/0,i=1/0,n=-1/0,a=-1/0,s=-1/0;for(let o=0,l=e.count;o<l;o++){let u=e.getX(o),h=e.getY(o),c=e.getZ(o);u<t&&(t=u),h<r&&(r=h),c<i&&(i=c),u>n&&(n=u),h>a&&(a=h),c>s&&(s=c)}return this.min.set(t,r,i),this.max.set(n,a,s),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let r=Ed.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);let r=e.geometry;if(r!==void 0)if(t&&r.attributes!=null&&r.attributes.position!==void 0){let n=r.attributes.position;for(let a=0,s=n.count;a<s;a++)Ed.fromBufferAttribute(n,a).applyMatrix4(e.matrixWorld),this.expandByPoint(Ed)}else r.boundingBox===null&&r.computeBoundingBox(),LC.copy(r.boundingBox),LC.applyMatrix4(e.matrixWorld),this.union(LC);let i=e.children;for(let n=0,a=i.length;n<a;n++)this.expandByObject(i[n],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Ed),Ed.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(qv),Jx.subVectors(this.max,qv),Ep.subVectors(e.a,qv),Mp.subVectors(e.b,qv),Cp.subVectors(e.c,qv),Vc.subVectors(Mp,Ep),Hc.subVectors(Cp,Mp),Md.subVectors(Ep,Cp);let t=[0,-Vc.z,Vc.y,0,-Hc.z,Hc.y,0,-Md.z,Md.y,Vc.z,0,-Vc.x,Hc.z,0,-Hc.x,Md.z,0,-Md.x,-Vc.y,Vc.x,0,-Hc.y,Hc.x,0,-Md.y,Md.x,0];return!BC(t,Ep,Mp,Cp,Jx)||(t=[1,0,0,0,1,0,0,0,1],!BC(t,Ep,Mp,Cp,Jx))?!1:(eb.crossVectors(Vc,Hc),t=[eb.x,eb.y,eb.z],BC(t,Ep,Mp,Cp,Jx))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Ed.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(Ed).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(ku[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),ku[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),ku[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),ku[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),ku[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),ku[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),ku[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),ku[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(ku),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},ku=[new T,new T,new T,new T,new T,new T,new T,new T],Ed=new T,LC=new Qi,Ep=new T,Mp=new T,Cp=new T,Vc=new T,Hc=new T,Md=new T,qv=new T,Jx=new T,eb=new T,Cd=new T;function BC(e,t,r,i,n){for(let a=0,s=e.length-3;a<=s;a+=3){Cd.fromArray(e,a);let o=n.x*Math.abs(Cd.x)+n.y*Math.abs(Cd.y)+n.z*Math.abs(Cd.z),l=t.dot(Cd),u=r.dot(Cd),h=i.dot(Cd);if(Math.max(-Math.max(l,u,h),Math.min(l,u,h))>o)return!1}return!0}var o0e=new Qi,Xv=new T,NC=new T,Ds=class{constructor(e=new T,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){let r=this.center;t!==void 0?r.copy(t):o0e.setFromPoints(e).getCenter(r);let i=0;for(let n=0,a=e.length;n<a;n++)i=Math.max(i,r.distanceToSquared(e[n]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){let t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){let r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Xv.subVectors(e,this.center);let t=Xv.lengthSq();if(t>this.radius*this.radius){let r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.addScaledVector(Xv,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(NC.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Xv.copy(e.center).add(NC)),this.expandByPoint(Xv.copy(e.center).sub(NC))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}},Lu=new T,zC=new T,tb=new T,Gc=new T,FC=new T,rb=new T,UC=new T,cv=class{constructor(e=new T,t=new T(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Lu)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);let r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(r).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){let t=Lu.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Lu.copy(this.direction).multiplyScalar(t).add(this.origin),Lu.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){zC.copy(e).add(t).multiplyScalar(.5),tb.copy(t).sub(e).normalize(),Gc.copy(this.origin).sub(zC);let n=e.distanceTo(t)*.5,a=-this.direction.dot(tb),s=Gc.dot(this.direction),o=-Gc.dot(tb),l=Gc.lengthSq(),u=Math.abs(1-a*a),h,c,d,f;if(u>0)if(h=a*o-s,c=a*s-o,f=n*u,h>=0)if(c>=-f)if(c<=f){let m=1/u;h*=m,c*=m,d=h*(h+a*c+2*s)+c*(a*h+c+2*o)+l}else c=n,h=Math.max(0,-(a*c+s)),d=-h*h+c*(c+2*o)+l;else c=-n,h=Math.max(0,-(a*c+s)),d=-h*h+c*(c+2*o)+l;else c<=-f?(h=Math.max(0,-(-a*n+s)),c=h>0?-n:Math.min(Math.max(-n,-o),n),d=-h*h+c*(c+2*o)+l):c<=f?(h=0,c=Math.min(Math.max(-n,-o),n),d=c*(c+2*o)+l):(h=Math.max(0,-(a*n+s)),c=h>0?n:Math.min(Math.max(-n,-o),n),d=-h*h+c*(c+2*o)+l);else c=a>0?-n:n,h=Math.max(0,-(a*c+s)),d=-h*h+c*(c+2*o)+l;return r&&r.copy(this.direction).multiplyScalar(h).add(this.origin),i&&i.copy(tb).multiplyScalar(c).add(zC),d}intersectSphere(e,t){Lu.subVectors(e.center,this.origin);let r=Lu.dot(this.direction),i=Lu.dot(Lu)-r*r,n=e.radius*e.radius;if(i>n)return null;let a=Math.sqrt(n-i),s=r-a,o=r+a;return s<0&&o<0?null:s<0?this.at(o,t):this.at(s,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){let t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;let r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){let r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){let t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,n,a,s,o,l=1/this.direction.x,u=1/this.direction.y,h=1/this.direction.z,c=this.origin;return l>=0?(r=(e.min.x-c.x)*l,i=(e.max.x-c.x)*l):(r=(e.max.x-c.x)*l,i=(e.min.x-c.x)*l),u>=0?(n=(e.min.y-c.y)*u,a=(e.max.y-c.y)*u):(n=(e.max.y-c.y)*u,a=(e.min.y-c.y)*u),r>a||n>i||((n>r||isNaN(r))&&(r=n),(a<i||isNaN(i))&&(i=a),h>=0?(s=(e.min.z-c.z)*h,o=(e.max.z-c.z)*h):(s=(e.max.z-c.z)*h,o=(e.min.z-c.z)*h),r>o||s>i)||((s>r||r!==r)&&(r=s),(o<i||i!==i)&&(i=o),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,Lu)!==null}intersectTriangle(e,t,r,i,n){FC.subVectors(t,e),rb.subVectors(r,e),UC.crossVectors(FC,rb);let a=this.direction.dot(UC),s;if(a>0){if(i)return null;s=1}else if(a<0)s=-1,a=-a;else return null;Gc.subVectors(this.origin,e);let o=s*this.direction.dot(rb.crossVectors(Gc,rb));if(o<0)return null;let l=s*this.direction.dot(FC.cross(Gc));if(l<0||o+l>a)return null;let u=-s*Gc.dot(UC);return u<0?null:this.at(u/a,n)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},ze=class{constructor(){ze.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,r,i,n,a,s,o,l,u,h,c,d,f,m,p){let g=this.elements;return g[0]=e,g[4]=t,g[8]=r,g[12]=i,g[1]=n,g[5]=a,g[9]=s,g[13]=o,g[2]=l,g[6]=u,g[10]=h,g[14]=c,g[3]=d,g[7]=f,g[11]=m,g[15]=p,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new ze().fromArray(this.elements)}copy(e){let t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){let t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){let t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){let t=this.elements,r=e.elements,i=1/Ap.setFromMatrixColumn(e,0).length(),n=1/Ap.setFromMatrixColumn(e,1).length(),a=1/Ap.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*n,t[5]=r[5]*n,t[6]=r[6]*n,t[7]=0,t[8]=r[8]*a,t[9]=r[9]*a,t[10]=r[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){let t=this.elements,r=e.x,i=e.y,n=e.z,a=Math.cos(r),s=Math.sin(r),o=Math.cos(i),l=Math.sin(i),u=Math.cos(n),h=Math.sin(n);if(e.order==="XYZ"){let c=a*u,d=a*h,f=s*u,m=s*h;t[0]=o*u,t[4]=-o*h,t[8]=l,t[1]=d+f*l,t[5]=c-m*l,t[9]=-s*o,t[2]=m-c*l,t[6]=f+d*l,t[10]=a*o}else if(e.order==="YXZ"){let c=o*u,d=o*h,f=l*u,m=l*h;t[0]=c+m*s,t[4]=f*s-d,t[8]=a*l,t[1]=a*h,t[5]=a*u,t[9]=-s,t[2]=d*s-f,t[6]=m+c*s,t[10]=a*o}else if(e.order==="ZXY"){let c=o*u,d=o*h,f=l*u,m=l*h;t[0]=c-m*s,t[4]=-a*h,t[8]=f+d*s,t[1]=d+f*s,t[5]=a*u,t[9]=m-c*s,t[2]=-a*l,t[6]=s,t[10]=a*o}else if(e.order==="ZYX"){let c=a*u,d=a*h,f=s*u,m=s*h;t[0]=o*u,t[4]=f*l-d,t[8]=c*l+m,t[1]=o*h,t[5]=m*l+c,t[9]=d*l-f,t[2]=-l,t[6]=s*o,t[10]=a*o}else if(e.order==="YZX"){let c=a*o,d=a*l,f=s*o,m=s*l;t[0]=o*u,t[4]=m-c*h,t[8]=f*h+d,t[1]=h,t[5]=a*u,t[9]=-s*u,t[2]=-l*u,t[6]=d*h+f,t[10]=c-m*h}else if(e.order==="XZY"){let c=a*o,d=a*l,f=s*o,m=s*l;t[0]=o*u,t[4]=-h,t[8]=l*u,t[1]=c*h+m,t[5]=a*u,t[9]=d*h-f,t[2]=f*h-d,t[6]=s*u,t[10]=m*h+c}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(l0e,e,u0e)}lookAt(e,t,r){let i=this.elements;return ks.subVectors(e,t),ks.lengthSq()===0&&(ks.z=1),ks.normalize(),Wc.crossVectors(r,ks),Wc.lengthSq()===0&&(Math.abs(r.z)===1?ks.x+=1e-4:ks.z+=1e-4,ks.normalize(),Wc.crossVectors(r,ks)),Wc.normalize(),ib.crossVectors(ks,Wc),i[0]=Wc.x,i[4]=ib.x,i[8]=ks.x,i[1]=Wc.y,i[5]=ib.y,i[9]=ks.y,i[2]=Wc.z,i[6]=ib.z,i[10]=ks.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let r=e.elements,i=t.elements,n=this.elements,a=r[0],s=r[4],o=r[8],l=r[12],u=r[1],h=r[5],c=r[9],d=r[13],f=r[2],m=r[6],p=r[10],g=r[14],v=r[3],y=r[7],x=r[11],b=r[15],_=i[0],w=i[4],E=i[8],S=i[12],C=i[1],M=i[5],P=i[9],I=i[13],k=i[2],L=i[6],O=i[10],F=i[14],z=i[3],B=i[7],V=i[11],R=i[15];return n[0]=a*_+s*C+o*k+l*z,n[4]=a*w+s*M+o*L+l*B,n[8]=a*E+s*P+o*O+l*V,n[12]=a*S+s*I+o*F+l*R,n[1]=u*_+h*C+c*k+d*z,n[5]=u*w+h*M+c*L+d*B,n[9]=u*E+h*P+c*O+d*V,n[13]=u*S+h*I+c*F+d*R,n[2]=f*_+m*C+p*k+g*z,n[6]=f*w+m*M+p*L+g*B,n[10]=f*E+m*P+p*O+g*V,n[14]=f*S+m*I+p*F+g*R,n[3]=v*_+y*C+x*k+b*z,n[7]=v*w+y*M+x*L+b*B,n[11]=v*E+y*P+x*O+b*V,n[15]=v*S+y*I+x*F+b*R,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){let e=this.elements,t=e[0],r=e[4],i=e[8],n=e[12],a=e[1],s=e[5],o=e[9],l=e[13],u=e[2],h=e[6],c=e[10],d=e[14],f=e[3],m=e[7],p=e[11],g=e[15];return f*(+n*o*h-i*l*h-n*s*c+r*l*c+i*s*d-r*o*d)+m*(+t*o*d-t*l*c+n*a*c-i*a*d+i*l*u-n*o*u)+p*(+t*l*h-t*s*d-n*a*h+r*a*d+n*s*u-r*l*u)+g*(-i*s*u-t*o*h+t*s*c+i*a*h-r*a*c+r*o*u)}transpose(){let e=this.elements,t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){let i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){let e=this.elements,t=e[0],r=e[1],i=e[2],n=e[3],a=e[4],s=e[5],o=e[6],l=e[7],u=e[8],h=e[9],c=e[10],d=e[11],f=e[12],m=e[13],p=e[14],g=e[15],v=h*p*l-m*c*l+m*o*d-s*p*d-h*o*g+s*c*g,y=f*c*l-u*p*l-f*o*d+a*p*d+u*o*g-a*c*g,x=u*m*l-f*h*l+f*s*d-a*m*d-u*s*g+a*h*g,b=f*h*o-u*m*o-f*s*c+a*m*c+u*s*p-a*h*p,_=t*v+r*y+i*x+n*b;if(_===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let w=1/_;return e[0]=v*w,e[1]=(m*c*n-h*p*n-m*i*d+r*p*d+h*i*g-r*c*g)*w,e[2]=(s*p*n-m*o*n+m*i*l-r*p*l-s*i*g+r*o*g)*w,e[3]=(h*o*n-s*c*n-h*i*l+r*c*l+s*i*d-r*o*d)*w,e[4]=y*w,e[5]=(u*p*n-f*c*n+f*i*d-t*p*d-u*i*g+t*c*g)*w,e[6]=(f*o*n-a*p*n-f*i*l+t*p*l+a*i*g-t*o*g)*w,e[7]=(a*c*n-u*o*n+u*i*l-t*c*l-a*i*d+t*o*d)*w,e[8]=x*w,e[9]=(f*h*n-u*m*n-f*r*d+t*m*d+u*r*g-t*h*g)*w,e[10]=(a*m*n-f*s*n+f*r*l-t*m*l-a*r*g+t*s*g)*w,e[11]=(u*s*n-a*h*n-u*r*l+t*h*l+a*r*d-t*s*d)*w,e[12]=b*w,e[13]=(u*m*i-f*h*i+f*r*c-t*m*c-u*r*p+t*h*p)*w,e[14]=(f*s*i-a*m*i-f*r*o+t*m*o+a*r*p-t*s*p)*w,e[15]=(a*h*i-u*s*i+u*r*o-t*h*o-a*r*c+t*s*c)*w,this}scale(e){let t=this.elements,r=e.x,i=e.y,n=e.z;return t[0]*=r,t[4]*=i,t[8]*=n,t[1]*=r,t[5]*=i,t[9]*=n,t[2]*=r,t[6]*=i,t[10]*=n,t[3]*=r,t[7]*=i,t[11]*=n,this}getMaxScaleOnAxis(){let e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){let t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){let t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){let t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){let r=Math.cos(t),i=Math.sin(t),n=1-r,a=e.x,s=e.y,o=e.z,l=n*a,u=n*s;return this.set(l*a+r,l*s-i*o,l*o+i*s,0,l*s+i*o,u*s+r,u*o-i*a,0,l*o-i*s,u*o+i*a,n*o*o+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,n,a){return this.set(1,r,n,0,e,1,a,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){let i=this.elements,n=t._x,a=t._y,s=t._z,o=t._w,l=n+n,u=a+a,h=s+s,c=n*l,d=n*u,f=n*h,m=a*u,p=a*h,g=s*h,v=o*l,y=o*u,x=o*h,b=r.x,_=r.y,w=r.z;return i[0]=(1-(m+g))*b,i[1]=(d+x)*b,i[2]=(f-y)*b,i[3]=0,i[4]=(d-x)*_,i[5]=(1-(c+g))*_,i[6]=(p+v)*_,i[7]=0,i[8]=(f+y)*w,i[9]=(p-v)*w,i[10]=(1-(c+m))*w,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){let i=this.elements,n=Ap.set(i[0],i[1],i[2]).length(),a=Ap.set(i[4],i[5],i[6]).length(),s=Ap.set(i[8],i[9],i[10]).length();this.determinant()<0&&(n=-n),e.x=i[12],e.y=i[13],e.z=i[14],Qo.copy(this);let o=1/n,l=1/a,u=1/s;return Qo.elements[0]*=o,Qo.elements[1]*=o,Qo.elements[2]*=o,Qo.elements[4]*=l,Qo.elements[5]*=l,Qo.elements[6]*=l,Qo.elements[8]*=u,Qo.elements[9]*=u,Qo.elements[10]*=u,t.setFromRotationMatrix(Qo),r.x=n,r.y=a,r.z=s,this}makePerspective(e,t,r,i,n,a){let s=this.elements,o=2*n/(t-e),l=2*n/(r-i),u=(t+e)/(t-e),h=(r+i)/(r-i),c=-(a+n)/(a-n),d=-2*a*n/(a-n);return s[0]=o,s[4]=0,s[8]=u,s[12]=0,s[1]=0,s[5]=l,s[9]=h,s[13]=0,s[2]=0,s[6]=0,s[10]=c,s[14]=d,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this}makeOrthographic(e,t,r,i,n,a){let s=this.elements,o=1/(t-e),l=1/(r-i),u=1/(a-n),h=(t+e)*o,c=(r+i)*l,d=(a+n)*u;return s[0]=2*o,s[4]=0,s[8]=0,s[12]=-h,s[1]=0,s[5]=2*l,s[9]=0,s[13]=-c,s[2]=0,s[6]=0,s[10]=-2*u,s[14]=-d,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this}equals(e){let t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){let r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}},Ap=new T,Qo=new ze,l0e=new T(0,0,0),u0e=new T(1,1,1),Wc=new T,ib=new T,ks=new T,Rz=new ze,kz=new Gt,Un=class{constructor(e=0,t=0,r=0,i=Un.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){let i=e.elements,n=i[0],a=i[4],s=i[8],o=i[1],l=i[5],u=i[9],h=i[2],c=i[6],d=i[10];switch(t){case"XYZ":this._y=Math.asin(Sn(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-u,d),this._z=Math.atan2(-a,n)):(this._x=Math.atan2(c,l),this._z=0);break;case"YXZ":this._x=Math.asin(-Sn(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(s,d),this._z=Math.atan2(o,l)):(this._y=Math.atan2(-h,n),this._z=0);break;case"ZXY":this._x=Math.asin(Sn(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(-h,d),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(o,n));break;case"ZYX":this._y=Math.asin(-Sn(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(c,d),this._z=Math.atan2(o,n)):(this._x=0,this._z=Math.atan2(-a,l));break;case"YZX":this._z=Math.asin(Sn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-u,l),this._y=Math.atan2(-h,n)):(this._x=0,this._y=Math.atan2(s,d));break;case"XZY":this._z=Math.asin(-Sn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(c,l),this._y=Math.atan2(s,n)):(this._x=Math.atan2(-u,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return Rz.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Rz,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return kz.setFromEuler(this),this.setFromQuaternion(kz,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}};Un.DEFAULT_ORDER="XYZ";var wR=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}},c0e=0,Lz=new T,Tp=new Gt,Bu=new ze,nb=new T,Qv=new T,h0e=new T,d0e=new Gt,Bz=new T(1,0,0),Nz=new T(0,1,0),zz=new T(0,0,1),f0e={type:"added"},Fz={type:"removed"},Xr=class extends sa{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:c0e++}),this.uuid=ko(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Xr.DEFAULT_UP.clone();let e=new T,t=new Un,r=new Gt,i=new T(1,1,1);function n(){r.setFromEuler(t,!1)}function a(){t.setFromQuaternion(r,void 0,!1)}t._onChange(n),r._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new ze},normalMatrix:{value:new Hn}}),this.matrix=new ze,this.matrixWorld=new ze,this.matrixAutoUpdate=Xr.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Xr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new wR,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Tp.setFromAxisAngle(e,t),this.quaternion.multiply(Tp),this}rotateOnWorldAxis(e,t){return Tp.setFromAxisAngle(e,t),this.quaternion.premultiply(Tp),this}rotateX(e){return this.rotateOnAxis(Bz,e)}rotateY(e){return this.rotateOnAxis(Nz,e)}rotateZ(e){return this.rotateOnAxis(zz,e)}translateOnAxis(e,t){return Lz.copy(e).applyQuaternion(this.quaternion),this.position.add(Lz.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(Bz,e)}translateY(e){return this.translateOnAxis(Nz,e)}translateZ(e){return this.translateOnAxis(zz,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Bu.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?nb.copy(e):nb.set(e,t,r);let i=this.parent;this.updateWorldMatrix(!0,!1),Qv.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Bu.lookAt(Qv,nb,this.up):Bu.lookAt(nb,Qv,this.up),this.quaternion.setFromRotationMatrix(Bu),i&&(Bu.extractRotation(i.matrixWorld),Tp.setFromRotationMatrix(Bu),this.quaternion.premultiply(Tp.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(f0e)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}let t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(Fz)),this}removeFromParent(){let e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){let t=this.children[e];t.parent=null,t.dispatchEvent(Fz)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Bu.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Bu.multiply(e.parent.matrixWorld)),e.applyMatrix4(Bu),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){let n=this.children[r].getObjectByProperty(e,t);if(n!==void 0)return n}}getObjectsByProperty(e,t){let r=[];this[e]===t&&r.push(this);for(let i=0,n=this.children.length;i<n;i++){let a=this.children[i].getObjectsByProperty(e,t);a.length>0&&(r=r.concat(a))}return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Qv,e,h0e),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Qv,d0e,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);let t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);let t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){let t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);let t=this.children;for(let r=0,i=t.length;r<i;r++){let n=t[r];(n.matrixWorldAutoUpdate===!0||e===!0)&&n.updateMatrixWorld(e)}}updateWorldMatrix(e,t){let r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){let i=this.children;for(let n=0,a=i.length;n<a;n++){let s=i[n];s.matrixWorldAutoUpdate===!0&&s.updateWorldMatrix(!1,!0)}}}toJSON(e){let t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});let i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON()));function n(s,o){return s[o.uuid]===void 0&&(s[o.uuid]=o.toJSON(e)),o.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=n(e.geometries,this.geometry);let s=this.geometry.parameters;if(s!==void 0&&s.shapes!==void 0){let o=s.shapes;if(Array.isArray(o))for(let l=0,u=o.length;l<u;l++){let h=o[l];n(e.shapes,h)}else n(e.shapes,o)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(n(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){let s=[];for(let o=0,l=this.material.length;o<l;o++)s.push(n(e.materials,this.material[o]));i.material=s}else i.material=n(e.materials,this.material);if(this.children.length>0){i.children=[];for(let s=0;s<this.children.length;s++)i.children.push(this.children[s].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let s=0;s<this.animations.length;s++){let o=this.animations[s];i.animations.push(n(e.animations,o))}}if(t){let s=a(e.geometries),o=a(e.materials),l=a(e.textures),u=a(e.images),h=a(e.shapes),c=a(e.skeletons),d=a(e.animations),f=a(e.nodes);s.length>0&&(r.geometries=s),o.length>0&&(r.materials=o),l.length>0&&(r.textures=l),u.length>0&&(r.images=u),h.length>0&&(r.shapes=h),c.length>0&&(r.skeletons=c),d.length>0&&(r.animations=d),f.length>0&&(r.nodes=f)}return r.object=i,r;function a(s){let o=[];for(let l in s){let u=s[l];delete u.metadata,o.push(u)}return o}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){let i=e.children[r];this.add(i.clone())}return this}};Xr.DEFAULT_UP=new T(0,1,0);Xr.DEFAULT_MATRIX_AUTO_UPDATE=!0;Xr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;var Ko=new T,Nu=new T,jC=new T,zu=new T,Pp=new T,Dp=new T,Uz=new T,VC=new T,HC=new T,GC=new T,va=class{constructor(e=new T,t=new T,r=new T){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),Ko.subVectors(e,t),i.cross(Ko);let n=i.lengthSq();return n>0?i.multiplyScalar(1/Math.sqrt(n)):i.set(0,0,0)}static getBarycoord(e,t,r,i,n){Ko.subVectors(i,t),Nu.subVectors(r,t),jC.subVectors(e,t);let a=Ko.dot(Ko),s=Ko.dot(Nu),o=Ko.dot(jC),l=Nu.dot(Nu),u=Nu.dot(jC),h=a*l-s*s;if(h===0)return n.set(-2,-1,-1);let c=1/h,d=(l*o-s*u)*c,f=(a*u-s*o)*c;return n.set(1-d-f,f,d)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,zu),zu.x>=0&&zu.y>=0&&zu.x+zu.y<=1}static getUV(e,t,r,i,n,a,s,o){return this.getBarycoord(e,t,r,i,zu),o.set(0,0),o.addScaledVector(n,zu.x),o.addScaledVector(a,zu.y),o.addScaledVector(s,zu.z),o}static isFrontFacing(e,t,r,i){return Ko.subVectors(r,t),Nu.subVectors(e,t),Ko.cross(Nu).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ko.subVectors(this.c,this.b),Nu.subVectors(this.a,this.b),Ko.cross(Nu).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return va.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return va.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,r,i,n){return va.getUV(e,this.a,this.b,this.c,t,r,i,n)}containsPoint(e){return va.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return va.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){let r=this.a,i=this.b,n=this.c,a,s;Pp.subVectors(i,r),Dp.subVectors(n,r),VC.subVectors(e,r);let o=Pp.dot(VC),l=Dp.dot(VC);if(o<=0&&l<=0)return t.copy(r);HC.subVectors(e,i);let u=Pp.dot(HC),h=Dp.dot(HC);if(u>=0&&h<=u)return t.copy(i);let c=o*h-u*l;if(c<=0&&o>=0&&u<=0)return a=o/(o-u),t.copy(r).addScaledVector(Pp,a);GC.subVectors(e,n);let d=Pp.dot(GC),f=Dp.dot(GC);if(f>=0&&d<=f)return t.copy(n);let m=d*l-o*f;if(m<=0&&l>=0&&f<=0)return s=l/(l-f),t.copy(r).addScaledVector(Dp,s);let p=u*f-d*h;if(p<=0&&h-u>=0&&d-f>=0)return Uz.subVectors(n,i),s=(h-u)/(h-u+(d-f)),t.copy(i).addScaledVector(Uz,s);let g=1/(p+m+c);return a=m*g,s=c*g,t.copy(r).addScaledVector(Pp,a).addScaledVector(Dp,s)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},p0e=0,q1=class extends sa{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:p0e++}),this.uuid=ko(),this.name="",this.type="Material",this.blending=tg,this.side=Ml,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=t7,this.blendDst=r7,this.blendEquation=lm,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=aD,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Hve,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=PC,this.stencilZFail=PC,this.stencilZPass=PC,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(let t in e){let r=e[t];if(r===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}let i=this[t];if(i===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}toJSON(e){let t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});let r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==tg&&(r.blending=this.blending),this.side!==Ml&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(r.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(r.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=this.flatShading),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(n){let a=[];for(let s in n){let o=n[s];delete o.metadata,a.push(o)}return a}if(t){let n=i(e.textures),a=i(e.images);n.length>0&&(r.textures=n),a.length>0&&(r.images=a)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;let t=e.clippingPlanes,r=null;if(t!==null){let i=t.length;r=new Array(i);for(let n=0;n!==i;++n)r[n]=t[n].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}},X1=class extends q1{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new At(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=i7,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}},rn=new T,ab=new re,Bt=class{constructor(e,t,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r,this.usage=uD,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,n=this.itemSize;i<n;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)ab.fromBufferAttribute(this,t),ab.applyMatrix3(e),this.setXY(t,ab.x,ab.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)rn.fromBufferAttribute(this,t),rn.applyMatrix3(e),this.setXYZ(t,rn.x,rn.y,rn.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)rn.fromBufferAttribute(this,t),rn.applyMatrix4(e),this.setXYZ(t,rn.x,rn.y,rn.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)rn.fromBufferAttribute(this,t),rn.applyNormalMatrix(e),this.setXYZ(t,rn.x,rn.y,rn.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)rn.fromBufferAttribute(this,t),rn.transformDirection(e),this.setXYZ(t,rn.x,rn.y,rn.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=dc(t,this.array)),t}setX(e,t){return this.normalized&&(t=ni(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=dc(t,this.array)),t}setY(e,t){return this.normalized&&(t=ni(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=dc(t,this.array)),t}setZ(e,t){return this.normalized&&(t=ni(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=dc(t,this.array)),t}setW(e,t){return this.normalized&&(t=ni(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=ni(t,this.array),r=ni(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=ni(t,this.array),r=ni(r,this.array),i=ni(i,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,n){return e*=this.itemSize,this.normalized&&(t=ni(t,this.array),r=ni(r,this.array),i=ni(i,this.array),n=ni(n,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=n,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==uD&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}},g7=class extends Bt{constructor(e,t,r){super(new Uint16Array(e),t,r)}},rg=class extends Bt{constructor(e,t,r){super(new Uint32Array(e),t,r)}},it=class extends Bt{constructor(e,t,r){super(new Float32Array(e),t,r)}},m0e=0,lo=new ze,WC=new Xr,Op=new T,Ls=new Qi,Kv=new Qi,kn=new T,wt=class extends sa{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:m0e++}),this.uuid=ko(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(h7(e)?rg:g7)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){let t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);let r=this.attributes.normal;if(r!==void 0){let n=new Hn().getNormalMatrix(e);r.applyNormalMatrix(n),r.needsUpdate=!0}let i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return lo.makeRotationFromQuaternion(e),this.applyMatrix4(lo),this}rotateX(e){return lo.makeRotationX(e),this.applyMatrix4(lo),this}rotateY(e){return lo.makeRotationY(e),this.applyMatrix4(lo),this}rotateZ(e){return lo.makeRotationZ(e),this.applyMatrix4(lo),this}translate(e,t,r){return lo.makeTranslation(e,t,r),this.applyMatrix4(lo),this}scale(e,t,r){return lo.makeScale(e,t,r),this.applyMatrix4(lo),this}lookAt(e){return WC.lookAt(e),WC.updateMatrix(),this.applyMatrix4(WC.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Op).negate(),this.translate(Op.x,Op.y,Op.z),this}setFromPoints(e){let t=[];for(let r=0,i=e.length;r<i;r++){let n=e[r];t.push(n.x,n.y,n.z||0)}return this.setAttribute("position",new it(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Qi);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new T(-1/0,-1/0,-1/0),new T(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){let n=t[r];Ls.setFromBufferAttribute(n),this.morphTargetsRelative?(kn.addVectors(this.boundingBox.min,Ls.min),this.boundingBox.expandByPoint(kn),kn.addVectors(this.boundingBox.max,Ls.max),this.boundingBox.expandByPoint(kn)):(this.boundingBox.expandByPoint(Ls.min),this.boundingBox.expandByPoint(Ls.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ds);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new T,1/0);return}if(e){let r=this.boundingSphere.center;if(Ls.setFromBufferAttribute(e),t)for(let n=0,a=t.length;n<a;n++){let s=t[n];Kv.setFromBufferAttribute(s),this.morphTargetsRelative?(kn.addVectors(Ls.min,Kv.min),Ls.expandByPoint(kn),kn.addVectors(Ls.max,Kv.max),Ls.expandByPoint(kn)):(Ls.expandByPoint(Kv.min),Ls.expandByPoint(Kv.max))}Ls.getCenter(r);let i=0;for(let n=0,a=e.count;n<a;n++)kn.fromBufferAttribute(e,n),i=Math.max(i,r.distanceToSquared(kn));if(t)for(let n=0,a=t.length;n<a;n++){let s=t[n],o=this.morphTargetsRelative;for(let l=0,u=s.count;l<u;l++)kn.fromBufferAttribute(s,l),o&&(Op.fromBufferAttribute(e,l),kn.add(Op)),i=Math.max(i,r.distanceToSquared(kn))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}let r=e.array,i=t.position.array,n=t.normal.array,a=t.uv.array,s=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Bt(new Float32Array(4*s),4));let o=this.getAttribute("tangent").array,l=[],u=[];for(let C=0;C<s;C++)l[C]=new T,u[C]=new T;let h=new T,c=new T,d=new T,f=new re,m=new re,p=new re,g=new T,v=new T;function y(C,M,P){h.fromArray(i,C*3),c.fromArray(i,M*3),d.fromArray(i,P*3),f.fromArray(a,C*2),m.fromArray(a,M*2),p.fromArray(a,P*2),c.sub(h),d.sub(h),m.sub(f),p.sub(f);let I=1/(m.x*p.y-p.x*m.y);!isFinite(I)||(g.copy(c).multiplyScalar(p.y).addScaledVector(d,-m.y).multiplyScalar(I),v.copy(d).multiplyScalar(m.x).addScaledVector(c,-p.x).multiplyScalar(I),l[C].add(g),l[M].add(g),l[P].add(g),u[C].add(v),u[M].add(v),u[P].add(v))}let x=this.groups;x.length===0&&(x=[{start:0,count:r.length}]);for(let C=0,M=x.length;C<M;++C){let P=x[C],I=P.start,k=P.count;for(let L=I,O=I+k;L<O;L+=3)y(r[L+0],r[L+1],r[L+2])}let b=new T,_=new T,w=new T,E=new T;function S(C){w.fromArray(n,C*3),E.copy(w);let M=l[C];b.copy(M),b.sub(w.multiplyScalar(w.dot(M))).normalize(),_.crossVectors(E,M);let P=_.dot(u[C])<0?-1:1;o[C*4]=b.x,o[C*4+1]=b.y,o[C*4+2]=b.z,o[C*4+3]=P}for(let C=0,M=x.length;C<M;++C){let P=x[C],I=P.start,k=P.count;for(let L=I,O=I+k;L<O;L+=3)S(r[L+0]),S(r[L+1]),S(r[L+2])}}computeVertexNormals(){let e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Bt(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let c=0,d=r.count;c<d;c++)r.setXYZ(c,0,0,0);let i=new T,n=new T,a=new T,s=new T,o=new T,l=new T,u=new T,h=new T;if(e)for(let c=0,d=e.count;c<d;c+=3){let f=e.getX(c+0),m=e.getX(c+1),p=e.getX(c+2);i.fromBufferAttribute(t,f),n.fromBufferAttribute(t,m),a.fromBufferAttribute(t,p),u.subVectors(a,n),h.subVectors(i,n),u.cross(h),s.fromBufferAttribute(r,f),o.fromBufferAttribute(r,m),l.fromBufferAttribute(r,p),s.add(u),o.add(u),l.add(u),r.setXYZ(f,s.x,s.y,s.z),r.setXYZ(m,o.x,o.y,o.z),r.setXYZ(p,l.x,l.y,l.z)}else for(let c=0,d=t.count;c<d;c+=3)i.fromBufferAttribute(t,c+0),n.fromBufferAttribute(t,c+1),a.fromBufferAttribute(t,c+2),u.subVectors(a,n),h.subVectors(i,n),u.cross(h),r.setXYZ(c+0,u.x,u.y,u.z),r.setXYZ(c+1,u.x,u.y,u.z),r.setXYZ(c+2,u.x,u.y,u.z);this.normalizeNormals(),r.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){let e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)kn.fromBufferAttribute(e,t),kn.normalize(),e.setXYZ(t,kn.x,kn.y,kn.z)}toNonIndexed(){function e(s,o){let l=s.array,u=s.itemSize,h=s.normalized,c=new l.constructor(o.length*u),d=0,f=0;for(let m=0,p=o.length;m<p;m++){s.isInterleavedBufferAttribute?d=o[m]*s.data.stride+s.offset:d=o[m]*u;for(let g=0;g<u;g++)c[f++]=l[d++]}return new Bt(c,u,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let t=new wt,r=this.index.array,i=this.attributes;for(let s in i){let o=i[s],l=e(o,r);t.setAttribute(s,l)}let n=this.morphAttributes;for(let s in n){let o=[],l=n[s];for(let u=0,h=l.length;u<h;u++){let c=l[u],d=e(c,r);o.push(d)}t.morphAttributes[s]=o}t.morphTargetsRelative=this.morphTargetsRelative;let a=this.groups;for(let s=0,o=a.length;s<o;s++){let l=a[s];t.addGroup(l.start,l.count,l.materialIndex)}return t}toJSON(){let e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){let o=this.parameters;for(let l in o)o[l]!==void 0&&(e[l]=o[l]);return e}e.data={attributes:{}};let t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});let r=this.attributes;for(let o in r){let l=r[o];e.data.attributes[o]=l.toJSON(e.data)}let i={},n=!1;for(let o in this.morphAttributes){let l=this.morphAttributes[o],u=[];for(let h=0,c=l.length;h<c;h++){let d=l[h];u.push(d.toJSON(e.data))}u.length>0&&(i[o]=u,n=!0)}n&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);let a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));let s=this.boundingSphere;return s!==null&&(e.data.boundingSphere={center:s.center.toArray(),radius:s.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let t={};this.name=e.name;let r=e.index;r!==null&&this.setIndex(r.clone(t));let i=e.attributes;for(let l in i){let u=i[l];this.setAttribute(l,u.clone(t))}let n=e.morphAttributes;for(let l in n){let u=[],h=n[l];for(let c=0,d=h.length;c<d;c++)u.push(h[c].clone(t));this.morphAttributes[l]=u}this.morphTargetsRelative=e.morphTargetsRelative;let a=e.groups;for(let l=0,u=a.length;l<u;l++){let h=a[l];this.addGroup(h.start,h.count,h.materialIndex)}let s=e.boundingBox;s!==null&&(this.boundingBox=s.clone());let o=e.boundingSphere;return o!==null&&(this.boundingSphere=o.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}},jz=new ze,Ip=new cv,$C=new Ds,Zv=new T,Jv=new T,e0=new T,YC=new T,sb=new T,ob=new re,lb=new re,ub=new re,qC=new T,cb=new T,gs=class extends Xr{constructor(e=new wt,t=new X1){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){let e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){let r=e[t[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let i=0,n=r.length;i<n;i++){let a=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=i}}}}getVertexPosition(e,t){let r=this.geometry,i=r.attributes.position,n=r.morphAttributes.position,a=r.morphTargetsRelative;t.fromBufferAttribute(i,e);let s=this.morphTargetInfluences;if(n&&s){sb.set(0,0,0);for(let o=0,l=n.length;o<l;o++){let u=s[o],h=n[o];u!==0&&(YC.fromBufferAttribute(h,e),a?sb.addScaledVector(YC,u):sb.addScaledVector(YC.sub(t),u))}t.add(sb)}return this.isSkinnedMesh&&this.boneTransform(e,t),t}raycast(e,t){let r=this.geometry,i=this.material,n=this.matrixWorld;if(i===void 0||(r.boundingSphere===null&&r.computeBoundingSphere(),$C.copy(r.boundingSphere),$C.applyMatrix4(n),e.ray.intersectsSphere($C)===!1)||(jz.copy(n).invert(),Ip.copy(e.ray).applyMatrix4(jz),r.boundingBox!==null&&Ip.intersectsBox(r.boundingBox)===!1))return;let a,s=r.index,o=r.attributes.position,l=r.attributes.uv,u=r.attributes.uv2,h=r.groups,c=r.drawRange;if(s!==null)if(Array.isArray(i))for(let d=0,f=h.length;d<f;d++){let m=h[d],p=i[m.materialIndex],g=Math.max(m.start,c.start),v=Math.min(s.count,Math.min(m.start+m.count,c.start+c.count));for(let y=g,x=v;y<x;y+=3){let b=s.getX(y),_=s.getX(y+1),w=s.getX(y+2);a=hb(this,p,e,Ip,l,u,b,_,w),a&&(a.faceIndex=Math.floor(y/3),a.face.materialIndex=m.materialIndex,t.push(a))}}else{let d=Math.max(0,c.start),f=Math.min(s.count,c.start+c.count);for(let m=d,p=f;m<p;m+=3){let g=s.getX(m),v=s.getX(m+1),y=s.getX(m+2);a=hb(this,i,e,Ip,l,u,g,v,y),a&&(a.faceIndex=Math.floor(m/3),t.push(a))}}else if(o!==void 0)if(Array.isArray(i))for(let d=0,f=h.length;d<f;d++){let m=h[d],p=i[m.materialIndex],g=Math.max(m.start,c.start),v=Math.min(o.count,Math.min(m.start+m.count,c.start+c.count));for(let y=g,x=v;y<x;y+=3){let b=y,_=y+1,w=y+2;a=hb(this,p,e,Ip,l,u,b,_,w),a&&(a.faceIndex=Math.floor(y/3),a.face.materialIndex=m.materialIndex,t.push(a))}}else{let d=Math.max(0,c.start),f=Math.min(o.count,c.start+c.count);for(let m=d,p=f;m<p;m+=3){let g=m,v=m+1,y=m+2;a=hb(this,i,e,Ip,l,u,g,v,y),a&&(a.faceIndex=Math.floor(m/3),t.push(a))}}}};function g0e(e,t,r,i,n,a,s,o){let l;if(t.side===Vn?l=i.intersectTriangle(s,a,n,!0,o):l=i.intersectTriangle(n,a,s,t.side===Ml,o),l===null)return null;cb.copy(o),cb.applyMatrix4(e.matrixWorld);let u=r.ray.origin.distanceTo(cb);return u<r.near||u>r.far?null:{distance:u,point:cb.clone(),object:e}}function hb(e,t,r,i,n,a,s,o,l){e.getVertexPosition(s,Zv),e.getVertexPosition(o,Jv),e.getVertexPosition(l,e0);let u=g0e(e,t,r,i,Zv,Jv,e0,qC);if(u){n&&(ob.fromBufferAttribute(n,s),lb.fromBufferAttribute(n,o),ub.fromBufferAttribute(n,l),u.uv=va.getUV(qC,Zv,Jv,e0,ob,lb,ub,new re)),a&&(ob.fromBufferAttribute(a,s),lb.fromBufferAttribute(a,o),ub.fromBufferAttribute(a,l),u.uv2=va.getUV(qC,Zv,Jv,e0,ob,lb,ub,new re));let h={a:s,b:o,c:l,normal:new T,materialIndex:0};va.getNormal(Zv,Jv,e0,h.normal),u.face=h}return u}var Eu=class extends wt{constructor(e=1,t=1,r=1,i=1,n=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:n,depthSegments:a};let s=this;i=Math.floor(i),n=Math.floor(n),a=Math.floor(a);let o=[],l=[],u=[],h=[],c=0,d=0;f("z","y","x",-1,-1,r,t,e,a,n,0),f("z","y","x",1,-1,r,t,-e,a,n,1),f("x","z","y",1,1,e,r,t,i,a,2),f("x","z","y",1,-1,e,r,-t,i,a,3),f("x","y","z",1,-1,e,t,r,i,n,4),f("x","y","z",-1,-1,e,t,-r,i,n,5),this.setIndex(o),this.setAttribute("position",new it(l,3)),this.setAttribute("normal",new it(u,3)),this.setAttribute("uv",new it(h,2));function f(m,p,g,v,y,x,b,_,w,E,S){let C=x/w,M=b/E,P=x/2,I=b/2,k=_/2,L=w+1,O=E+1,F=0,z=0,B=new T;for(let V=0;V<O;V++){let R=V*M-I;for(let H=0;H<L;H++){let W=H*C-P;B[m]=W*v,B[p]=R*y,B[g]=k,l.push(B.x,B.y,B.z),B[m]=0,B[p]=0,B[g]=_>0?1:-1,u.push(B.x,B.y,B.z),h.push(H/w),h.push(1-V/E),F+=1}}for(let V=0;V<E;V++)for(let R=0;R<w;R++){let H=c+R+L*V,W=c+R+L*(V+1),te=c+(R+1)+L*(V+1),G=c+(R+1)+L*V;o.push(H,W,G),o.push(W,te,G),z+=6}s.addGroup(d,z,S),d+=z,c+=F}}static fromJSON(e){return new Eu(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}};function zg(e){let t={};for(let r in e){t[r]={};for(let i in e[r]){let n=e[r][i];n&&(n.isColor||n.isMatrix3||n.isMatrix4||n.isVector2||n.isVector3||n.isVector4||n.isTexture||n.isQuaternion)?t[r][i]=n.clone():Array.isArray(n)?t[r][i]=n.slice():t[r][i]=n}}return t}function ka(e){let t={};for(let r=0;r<e.length;r++){let i=zg(e[r]);for(let n in i)t[n]=i[n]}return t}function v0e(e){let t=[];for(let r=0;r<e.length;r++)t.push(e[r].clone());return t}function v7(e){return e.getRenderTarget()===null&&e.outputEncoding===Ht?Yl:uS}var hv={clone:zg,merge:ka},y0e=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,x0e=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,oi=class extends q1{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=y0e,this.fragmentShader=x0e,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=zg(e.uniforms),this.uniformsGroups=v0e(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){let t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(let i in this.uniforms){let n=this.uniforms[i].value;n&&n.isTexture?t.uniforms[i]={type:"t",value:n.toJSON(e).uuid}:n&&n.isColor?t.uniforms[i]={type:"c",value:n.getHex()}:n&&n.isVector2?t.uniforms[i]={type:"v2",value:n.toArray()}:n&&n.isVector3?t.uniforms[i]={type:"v3",value:n.toArray()}:n&&n.isVector4?t.uniforms[i]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?t.uniforms[i]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?t.uniforms[i]={type:"m4",value:n.toArray()}:t.uniforms[i]={value:n}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;let r={};for(let i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}},dv=class extends Xr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new ze,this.projectionMatrix=new ze,this.projectionMatrixInverse=new ze}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}},ma=class extends dv{constructor(e=50,t=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){let t=.5*this.getFilmHeight()/e;this.fov=o1*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){let e=Math.tan(gy*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return o1*2*Math.atan(Math.tan(gy*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,r,i,n,a){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=n,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=this.near,t=e*Math.tan(gy*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,n=-.5*i,a=this.view;if(this.view!==null&&this.view.enabled){let o=a.fullWidth,l=a.fullHeight;n+=a.offsetX*i/o,t-=a.offsetY*r/l,i*=a.width/o,r*=a.height/l}let s=this.filmOffset;s!==0&&(n+=e*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(n,n+i,t,t-r,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}},Rp=-90,kp=1,b0e=class extends Xr{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r;let i=new ma(Rp,kp,e,t);i.layers=this.layers,i.up.set(0,1,0),i.lookAt(1,0,0),this.add(i);let n=new ma(Rp,kp,e,t);n.layers=this.layers,n.up.set(0,1,0),n.lookAt(-1,0,0),this.add(n);let a=new ma(Rp,kp,e,t);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(0,1,0),this.add(a);let s=new ma(Rp,kp,e,t);s.layers=this.layers,s.up.set(0,0,1),s.lookAt(0,-1,0),this.add(s);let o=new ma(Rp,kp,e,t);o.layers=this.layers,o.up.set(0,1,0),o.lookAt(0,0,1),this.add(o);let l=new ma(Rp,kp,e,t);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(0,0,-1),this.add(l)}update(e,t){this.parent===null&&this.updateMatrixWorld();let r=this.renderTarget,[i,n,a,s,o,l]=this.children,u=e.getRenderTarget(),h=e.toneMapping,c=e.xr.enabled;e.toneMapping=gc,e.xr.enabled=!1;let d=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(t,i),e.setRenderTarget(r,1),e.render(t,n),e.setRenderTarget(r,2),e.render(t,a),e.setRenderTarget(r,3),e.render(t,s),e.setRenderTarget(r,4),e.render(t,o),r.texture.generateMipmaps=d,e.setRenderTarget(r,5),e.render(t,l),e.setRenderTarget(u),e.toneMapping=h,e.xr.enabled=c,r.texture.needsPMREMUpdate=!0}},_R=class extends Mn{constructor(e,t,r,i,n,a,s,o,l,u){e=e!==void 0?e:[],t=t!==void 0?t:Ff,super(e,t,r,i,n,a,s,o,l,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}},w0e=class extends Yr{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;let r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];this.texture=new _R(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Kt}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;let r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new Eu(5,5,5),n=new oi({name:"CubemapFromEquirect",uniforms:zg(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:Vn,blending:hn});n.uniforms.tEquirect.value=t;let a=new gs(i,n),s=t.minFilter;return t.minFilter===Bg&&(t.minFilter=Kt),new b0e(1,10,this).update(e,a),t.minFilter=s,a.geometry.dispose(),a.material.dispose(),this}clear(e,t,r,i){let n=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,r,i);e.setRenderTarget(n)}},XC=new T,_0e=new T,S0e=new Hn,Vs=class{constructor(e=new T(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){let i=XC.subVectors(r,t).cross(_0e.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){let e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){let r=e.delta(XC),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;let n=-(e.start.dot(this.normal)+this.constant)/i;return n<0||n>1?null:t.copy(r).multiplyScalar(n).add(e.start)}intersectsLine(e){let t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){let r=t||S0e.getNormalMatrix(e),i=this.coplanarPoint(XC).applyMatrix4(e),n=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(n),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}},Lp=new Ds,db=new T,SR=class{constructor(e=new Vs,t=new Vs,r=new Vs,i=new Vs,n=new Vs,a=new Vs){this.planes=[e,t,r,i,n,a]}set(e,t,r,i,n,a){let s=this.planes;return s[0].copy(e),s[1].copy(t),s[2].copy(r),s[3].copy(i),s[4].copy(n),s[5].copy(a),this}copy(e){let t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e){let t=this.planes,r=e.elements,i=r[0],n=r[1],a=r[2],s=r[3],o=r[4],l=r[5],u=r[6],h=r[7],c=r[8],d=r[9],f=r[10],m=r[11],p=r[12],g=r[13],v=r[14],y=r[15];return t[0].setComponents(s-i,h-o,m-c,y-p).normalize(),t[1].setComponents(s+i,h+o,m+c,y+p).normalize(),t[2].setComponents(s+n,h+l,m+d,y+g).normalize(),t[3].setComponents(s-n,h-l,m-d,y-g).normalize(),t[4].setComponents(s-a,h-u,m-f,y-v).normalize(),t[5].setComponents(s+a,h+u,m+f,y+v).normalize(),this}intersectsObject(e){let t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),Lp.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Lp)}intersectsSprite(e){return Lp.center.set(0,0,0),Lp.radius=.7071067811865476,Lp.applyMatrix4(e.matrixWorld),this.intersectsSphere(Lp)}intersectsSphere(e){let t=this.planes,r=e.center,i=-e.radius;for(let n=0;n<6;n++)if(t[n].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){let t=this.planes;for(let r=0;r<6;r++){let i=t[r];if(db.x=i.normal.x>0?e.max.x:e.min.x,db.y=i.normal.y>0?e.max.y:e.min.y,db.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(db)<0)return!1}return!0}containsPoint(e){let t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}};function y7(){let e=null,t=!1,r=null,i=null;function n(a,s){r(a,s),i=e.requestAnimationFrame(n)}return{start:function(){t!==!0&&r!==null&&(i=e.requestAnimationFrame(n),t=!0)},stop:function(){e.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(a){r=a},setContext:function(a){e=a}}}function E0e(e,t){let r=t.isWebGL2,i=new WeakMap;function n(u,h){let c=u.array,d=u.usage,f=e.createBuffer();e.bindBuffer(h,f),e.bufferData(h,c,d),u.onUploadCallback();let m;if(c instanceof Float32Array)m=5126;else if(c instanceof Uint16Array)if(u.isFloat16BufferAttribute)if(r)m=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else m=5123;else if(c instanceof Int16Array)m=5122;else if(c instanceof Uint32Array)m=5125;else if(c instanceof Int32Array)m=5124;else if(c instanceof Int8Array)m=5120;else if(c instanceof Uint8Array)m=5121;else if(c instanceof Uint8ClampedArray)m=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);return{buffer:f,type:m,bytesPerElement:c.BYTES_PER_ELEMENT,version:u.version}}function a(u,h,c){let d=h.array,f=h.updateRange;e.bindBuffer(c,u),f.count===-1?e.bufferSubData(c,0,d):(r?e.bufferSubData(c,f.offset*d.BYTES_PER_ELEMENT,d,f.offset,f.count):e.bufferSubData(c,f.offset*d.BYTES_PER_ELEMENT,d.subarray(f.offset,f.offset+f.count)),f.count=-1),h.onUploadCallback()}function s(u){return u.isInterleavedBufferAttribute&&(u=u.data),i.get(u)}function o(u){u.isInterleavedBufferAttribute&&(u=u.data);let h=i.get(u);h&&(e.deleteBuffer(h.buffer),i.delete(u))}function l(u,h){if(u.isGLBufferAttribute){let d=i.get(u);(!d||d.version<u.version)&&i.set(u,{buffer:u.buffer,type:u.type,bytesPerElement:u.elementSize,version:u.version});return}u.isInterleavedBufferAttribute&&(u=u.data);let c=i.get(u);c===void 0?i.set(u,n(u,h)):c.version<u.version&&(a(c.buffer,u,h),c.version=u.version)}return{get:s,remove:o,update:l}}var EE=class extends wt{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};let n=e/2,a=t/2,s=Math.floor(r),o=Math.floor(i),l=s+1,u=o+1,h=e/s,c=t/o,d=[],f=[],m=[],p=[];for(let g=0;g<u;g++){let v=g*c-a;for(let y=0;y<l;y++){let x=y*h-n;f.push(x,-v,0),m.push(0,0,1),p.push(y/s),p.push(1-g/o)}}for(let g=0;g<o;g++)for(let v=0;v<s;v++){let y=v+l*g,x=v+l*(g+1),b=v+1+l*(g+1),_=v+1+l*g;d.push(y,x,_),d.push(x,b,_)}this.setIndex(d),this.setAttribute("position",new it(f,3)),this.setAttribute("normal",new it(m,3)),this.setAttribute("uv",new it(p,2))}static fromJSON(e){return new EE(e.width,e.height,e.widthSegments,e.heightSegments)}},M0e=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,C0e=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,A0e=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,T0e=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,P0e=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,D0e=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,O0e="vec3 transformed = vec3( position );",I0e=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,R0e=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,k0e=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,L0e=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,B0e=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,N0e=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,z0e=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,F0e=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,U0e=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,j0e=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,V0e=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,H0e=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,G0e=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,W0e=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,$0e=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Y0e=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,q0e=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,X0e=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Q0e=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,K0e="gl_FragColor = linearToOutputTexel( gl_FragColor );",Z0e=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,J0e=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,eye=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,tye=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,rye=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,iye=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,nye=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,aye=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,sye=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,oye=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,lye=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,uye=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,cye=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,hye=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,dye=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,fye=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,pye=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,mye=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,gye=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,vye=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,yye=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,xye=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,bye=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,wye=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,_ye=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Sye=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,Eye=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Mye=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Cye=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,Aye=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,Tye=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Pye=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Dye=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Oye=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Iye=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Rye=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,kye=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Lye=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,Bye=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,Nye=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,zye=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,Fye=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Uye=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,jye=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Vye=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Hye=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,Gye=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,Wye=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,$ye=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,Yye=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,qye=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Xye=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,Qye=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Kye=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Zye=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Jye=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,e1e=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,t1e=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,r1e=`#if NUM_SPOT_LIGHT_COORDS > 0
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,i1e=`#if NUM_SPOT_LIGHT_COORDS > 0
  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,n1e=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,a1e=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,s1e=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,o1e=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,l1e=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,u1e=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,c1e=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,h1e=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,d1e=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,f1e=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,p1e=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,m1e=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,g1e=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,v1e=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,y1e=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,x1e=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,b1e=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,w1e=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,_1e=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,S1e=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,E1e=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,M1e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,C1e=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,A1e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,T1e=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,P1e=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,D1e=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,O1e=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,I1e=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,R1e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,k1e=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,L1e=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,B1e=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,N1e=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,z1e=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,F1e=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,U1e=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,j1e=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,V1e=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,H1e=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,G1e=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,W1e=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,$1e=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Y1e=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,q1e=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,X1e=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Q1e=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,K1e=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,Z1e=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,J1e=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,exe=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,txe=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,rxe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Yt={alphamap_fragment:M0e,alphamap_pars_fragment:C0e,alphatest_fragment:A0e,alphatest_pars_fragment:T0e,aomap_fragment:P0e,aomap_pars_fragment:D0e,begin_vertex:O0e,beginnormal_vertex:I0e,bsdfs:R0e,iridescence_fragment:k0e,bumpmap_pars_fragment:L0e,clipping_planes_fragment:B0e,clipping_planes_pars_fragment:N0e,clipping_planes_pars_vertex:z0e,clipping_planes_vertex:F0e,color_fragment:U0e,color_pars_fragment:j0e,color_pars_vertex:V0e,color_vertex:H0e,common:G0e,cube_uv_reflection_fragment:W0e,defaultnormal_vertex:$0e,displacementmap_pars_vertex:Y0e,displacementmap_vertex:q0e,emissivemap_fragment:X0e,emissivemap_pars_fragment:Q0e,encodings_fragment:K0e,encodings_pars_fragment:Z0e,envmap_fragment:J0e,envmap_common_pars_fragment:eye,envmap_pars_fragment:tye,envmap_pars_vertex:rye,envmap_physical_pars_fragment:pye,envmap_vertex:iye,fog_vertex:nye,fog_pars_vertex:aye,fog_fragment:sye,fog_pars_fragment:oye,gradientmap_pars_fragment:lye,lightmap_fragment:uye,lightmap_pars_fragment:cye,lights_lambert_fragment:hye,lights_lambert_pars_fragment:dye,lights_pars_begin:fye,lights_toon_fragment:mye,lights_toon_pars_fragment:gye,lights_phong_fragment:vye,lights_phong_pars_fragment:yye,lights_physical_fragment:xye,lights_physical_pars_fragment:bye,lights_fragment_begin:wye,lights_fragment_maps:_ye,lights_fragment_end:Sye,logdepthbuf_fragment:Eye,logdepthbuf_pars_fragment:Mye,logdepthbuf_pars_vertex:Cye,logdepthbuf_vertex:Aye,map_fragment:Tye,map_pars_fragment:Pye,map_particle_fragment:Dye,map_particle_pars_fragment:Oye,metalnessmap_fragment:Iye,metalnessmap_pars_fragment:Rye,morphcolor_vertex:kye,morphnormal_vertex:Lye,morphtarget_pars_vertex:Bye,morphtarget_vertex:Nye,normal_fragment_begin:zye,normal_fragment_maps:Fye,normal_pars_fragment:Uye,normal_pars_vertex:jye,normal_vertex:Vye,normalmap_pars_fragment:Hye,clearcoat_normal_fragment_begin:Gye,clearcoat_normal_fragment_maps:Wye,clearcoat_pars_fragment:$ye,iridescence_pars_fragment:Yye,output_fragment:qye,packing:Xye,premultiplied_alpha_fragment:Qye,project_vertex:Kye,dithering_fragment:Zye,dithering_pars_fragment:Jye,roughnessmap_fragment:e1e,roughnessmap_pars_fragment:t1e,shadowmap_pars_fragment:r1e,shadowmap_pars_vertex:i1e,shadowmap_vertex:n1e,shadowmask_pars_fragment:a1e,skinbase_vertex:s1e,skinning_pars_vertex:o1e,skinning_vertex:l1e,skinnormal_vertex:u1e,specularmap_fragment:c1e,specularmap_pars_fragment:h1e,tonemapping_fragment:d1e,tonemapping_pars_fragment:f1e,transmission_fragment:p1e,transmission_pars_fragment:m1e,uv_pars_fragment:g1e,uv_pars_vertex:v1e,uv_vertex:y1e,uv2_pars_fragment:x1e,uv2_pars_vertex:b1e,uv2_vertex:w1e,worldpos_vertex:_1e,background_vert:S1e,background_frag:E1e,backgroundCube_vert:M1e,backgroundCube_frag:C1e,cube_vert:A1e,cube_frag:T1e,depth_vert:P1e,depth_frag:D1e,distanceRGBA_vert:O1e,distanceRGBA_frag:I1e,equirect_vert:R1e,equirect_frag:k1e,linedashed_vert:L1e,linedashed_frag:B1e,meshbasic_vert:N1e,meshbasic_frag:z1e,meshlambert_vert:F1e,meshlambert_frag:U1e,meshmatcap_vert:j1e,meshmatcap_frag:V1e,meshnormal_vert:H1e,meshnormal_frag:G1e,meshphong_vert:W1e,meshphong_frag:$1e,meshphysical_vert:Y1e,meshphysical_frag:q1e,meshtoon_vert:X1e,meshtoon_frag:Q1e,points_vert:K1e,points_frag:Z1e,shadow_vert:J1e,shadow_frag:exe,sprite_vert:txe,sprite_frag:rxe},$e={common:{diffuse:{value:new At(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Hn},uv2Transform:{value:new Hn},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new re(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new At(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new At(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Hn}},sprite:{diffuse:{value:new At(16777215)},opacity:{value:1},center:{value:new re(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Hn}}},Ql={basic:{uniforms:ka([$e.common,$e.specularmap,$e.envmap,$e.aomap,$e.lightmap,$e.fog]),vertexShader:Yt.meshbasic_vert,fragmentShader:Yt.meshbasic_frag},lambert:{uniforms:ka([$e.common,$e.specularmap,$e.envmap,$e.aomap,$e.lightmap,$e.emissivemap,$e.bumpmap,$e.normalmap,$e.displacementmap,$e.fog,$e.lights,{emissive:{value:new At(0)}}]),vertexShader:Yt.meshlambert_vert,fragmentShader:Yt.meshlambert_frag},phong:{uniforms:ka([$e.common,$e.specularmap,$e.envmap,$e.aomap,$e.lightmap,$e.emissivemap,$e.bumpmap,$e.normalmap,$e.displacementmap,$e.fog,$e.lights,{emissive:{value:new At(0)},specular:{value:new At(1118481)},shininess:{value:30}}]),vertexShader:Yt.meshphong_vert,fragmentShader:Yt.meshphong_frag},standard:{uniforms:ka([$e.common,$e.envmap,$e.aomap,$e.lightmap,$e.emissivemap,$e.bumpmap,$e.normalmap,$e.displacementmap,$e.roughnessmap,$e.metalnessmap,$e.fog,$e.lights,{emissive:{value:new At(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Yt.meshphysical_vert,fragmentShader:Yt.meshphysical_frag},toon:{uniforms:ka([$e.common,$e.aomap,$e.lightmap,$e.emissivemap,$e.bumpmap,$e.normalmap,$e.displacementmap,$e.gradientmap,$e.fog,$e.lights,{emissive:{value:new At(0)}}]),vertexShader:Yt.meshtoon_vert,fragmentShader:Yt.meshtoon_frag},matcap:{uniforms:ka([$e.common,$e.bumpmap,$e.normalmap,$e.displacementmap,$e.fog,{matcap:{value:null}}]),vertexShader:Yt.meshmatcap_vert,fragmentShader:Yt.meshmatcap_frag},points:{uniforms:ka([$e.points,$e.fog]),vertexShader:Yt.points_vert,fragmentShader:Yt.points_frag},dashed:{uniforms:ka([$e.common,$e.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Yt.linedashed_vert,fragmentShader:Yt.linedashed_frag},depth:{uniforms:ka([$e.common,$e.displacementmap]),vertexShader:Yt.depth_vert,fragmentShader:Yt.depth_frag},normal:{uniforms:ka([$e.common,$e.bumpmap,$e.normalmap,$e.displacementmap,{opacity:{value:1}}]),vertexShader:Yt.meshnormal_vert,fragmentShader:Yt.meshnormal_frag},sprite:{uniforms:ka([$e.sprite,$e.fog]),vertexShader:Yt.sprite_vert,fragmentShader:Yt.sprite_frag},background:{uniforms:{uvTransform:{value:new Hn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Yt.background_vert,fragmentShader:Yt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Yt.backgroundCube_vert,fragmentShader:Yt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Yt.cube_vert,fragmentShader:Yt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Yt.equirect_vert,fragmentShader:Yt.equirect_frag},distanceRGBA:{uniforms:ka([$e.common,$e.displacementmap,{referencePosition:{value:new T},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Yt.distanceRGBA_vert,fragmentShader:Yt.distanceRGBA_frag},shadow:{uniforms:ka([$e.lights,$e.fog,{color:{value:new At(0)},opacity:{value:1}}]),vertexShader:Yt.shadow_vert,fragmentShader:Yt.shadow_frag}};Ql.physical={uniforms:ka([Ql.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new re(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new At(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new re},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new At(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new At(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Yt.meshphysical_vert,fragmentShader:Yt.meshphysical_frag};var fb={r:0,b:0,g:0};function ixe(e,t,r,i,n,a,s){let o=new At(0),l=a===!0?0:1,u,h,c=null,d=0,f=null;function m(g,v){let y=!1,x=v.isScene===!0?v.background:null;x&&x.isTexture&&(x=(v.backgroundBlurriness>0?r:t).get(x));let b=e.xr,_=b.getSession&&b.getSession();_&&_.environmentBlendMode==="additive"&&(x=null),x===null?p(o,l):x&&x.isColor&&(p(x,1),y=!0),(e.autoClear||y)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),x&&(x.isCubeTexture||x.mapping===Y1)?(h===void 0&&(h=new gs(new Eu(1,1,1),new oi({name:"BackgroundCubeMaterial",uniforms:zg(Ql.backgroundCube.uniforms),vertexShader:Ql.backgroundCube.vertexShader,fragmentShader:Ql.backgroundCube.fragmentShader,side:Vn,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(w,E,S){this.matrixWorld.copyPosition(S.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),n.update(h)),h.material.uniforms.envMap.value=x,h.material.uniforms.flipEnvMap.value=x.isCubeTexture&&x.isRenderTargetTexture===!1?-1:1,h.material.uniforms.backgroundBlurriness.value=v.backgroundBlurriness,h.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,h.material.toneMapped=x.encoding!==Ht,(c!==x||d!==x.version||f!==e.toneMapping)&&(h.material.needsUpdate=!0,c=x,d=x.version,f=e.toneMapping),h.layers.enableAll(),g.unshift(h,h.geometry,h.material,0,0,null)):x&&x.isTexture&&(u===void 0&&(u=new gs(new EE(2,2),new oi({name:"BackgroundMaterial",uniforms:zg(Ql.background.uniforms),vertexShader:Ql.background.vertexShader,fragmentShader:Ql.background.fragmentShader,side:Ml,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(u)),u.material.uniforms.t2D.value=x,u.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,u.material.toneMapped=x.encoding!==Ht,x.matrixAutoUpdate===!0&&x.updateMatrix(),u.material.uniforms.uvTransform.value.copy(x.matrix),(c!==x||d!==x.version||f!==e.toneMapping)&&(u.material.needsUpdate=!0,c=x,d=x.version,f=e.toneMapping),u.layers.enableAll(),g.unshift(u,u.geometry,u.material,0,0,null))}function p(g,v){g.getRGB(fb,v7(e)),i.buffers.color.setClear(fb.r,fb.g,fb.b,v,s)}return{getClearColor:function(){return o},setClearColor:function(g,v=1){o.set(g),l=v,p(o,l)},getClearAlpha:function(){return l},setClearAlpha:function(g){l=g,p(o,l)},render:m}}function nxe(e,t,r,i){let n=e.getParameter(34921),a=i.isWebGL2?null:t.get("OES_vertex_array_object"),s=i.isWebGL2||a!==null,o={},l=g(null),u=l,h=!1;function c(L,O,F,z,B){let V=!1;if(s){let R=p(z,F,O);u!==R&&(u=R,f(u.object)),V=v(L,z,F,B),V&&y(L,z,F,B)}else{let R=O.wireframe===!0;(u.geometry!==z.id||u.program!==F.id||u.wireframe!==R)&&(u.geometry=z.id,u.program=F.id,u.wireframe=R,V=!0)}B!==null&&r.update(B,34963),(V||h)&&(h=!1,S(L,O,F,z),B!==null&&e.bindBuffer(34963,r.get(B).buffer))}function d(){return i.isWebGL2?e.createVertexArray():a.createVertexArrayOES()}function f(L){return i.isWebGL2?e.bindVertexArray(L):a.bindVertexArrayOES(L)}function m(L){return i.isWebGL2?e.deleteVertexArray(L):a.deleteVertexArrayOES(L)}function p(L,O,F){let z=F.wireframe===!0,B=o[L.id];B===void 0&&(B={},o[L.id]=B);let V=B[O.id];V===void 0&&(V={},B[O.id]=V);let R=V[z];return R===void 0&&(R=g(d()),V[z]=R),R}function g(L){let O=[],F=[],z=[];for(let B=0;B<n;B++)O[B]=0,F[B]=0,z[B]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:O,enabledAttributes:F,attributeDivisors:z,object:L,attributes:{},index:null}}function v(L,O,F,z){let B=u.attributes,V=O.attributes,R=0,H=F.getAttributes();for(let W in H)if(H[W].location>=0){let te=B[W],G=V[W];if(G===void 0&&(W==="instanceMatrix"&&L.instanceMatrix&&(G=L.instanceMatrix),W==="instanceColor"&&L.instanceColor&&(G=L.instanceColor)),te===void 0||te.attribute!==G||G&&te.data!==G.data)return!0;R++}return u.attributesNum!==R||u.index!==z}function y(L,O,F,z){let B={},V=O.attributes,R=0,H=F.getAttributes();for(let W in H)if(H[W].location>=0){let te=V[W];te===void 0&&(W==="instanceMatrix"&&L.instanceMatrix&&(te=L.instanceMatrix),W==="instanceColor"&&L.instanceColor&&(te=L.instanceColor));let G={};G.attribute=te,te&&te.data&&(G.data=te.data),B[W]=G,R++}u.attributes=B,u.attributesNum=R,u.index=z}function x(){let L=u.newAttributes;for(let O=0,F=L.length;O<F;O++)L[O]=0}function b(L){_(L,0)}function _(L,O){let F=u.newAttributes,z=u.enabledAttributes,B=u.attributeDivisors;F[L]=1,z[L]===0&&(e.enableVertexAttribArray(L),z[L]=1),B[L]!==O&&((i.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](L,O),B[L]=O)}function w(){let L=u.newAttributes,O=u.enabledAttributes;for(let F=0,z=O.length;F<z;F++)O[F]!==L[F]&&(e.disableVertexAttribArray(F),O[F]=0)}function E(L,O,F,z,B,V){i.isWebGL2===!0&&(F===5124||F===5125)?e.vertexAttribIPointer(L,O,F,B,V):e.vertexAttribPointer(L,O,F,z,B,V)}function S(L,O,F,z){if(i.isWebGL2===!1&&(L.isInstancedMesh||z.isInstancedBufferGeometry)&&t.get("ANGLE_instanced_arrays")===null)return;x();let B=z.attributes,V=F.getAttributes(),R=O.defaultAttributeValues;for(let H in V){let W=V[H];if(W.location>=0){let te=B[H];if(te===void 0&&(H==="instanceMatrix"&&L.instanceMatrix&&(te=L.instanceMatrix),H==="instanceColor"&&L.instanceColor&&(te=L.instanceColor)),te!==void 0){let G=te.normalized,ie=te.itemSize,q=r.get(te);if(q===void 0)continue;let le=q.buffer,ae=q.type,Z=q.bytesPerElement;if(te.isInterleavedBufferAttribute){let he=te.data,ge=he.stride,xe=te.offset;if(he.isInstancedInterleavedBuffer){for(let ye=0;ye<W.locationSize;ye++)_(W.location+ye,he.meshPerAttribute);L.isInstancedMesh!==!0&&z._maxInstanceCount===void 0&&(z._maxInstanceCount=he.meshPerAttribute*he.count)}else for(let ye=0;ye<W.locationSize;ye++)b(W.location+ye);e.bindBuffer(34962,le);for(let ye=0;ye<W.locationSize;ye++)E(W.location+ye,ie/W.locationSize,ae,G,ge*Z,(xe+ie/W.locationSize*ye)*Z)}else{if(te.isInstancedBufferAttribute){for(let he=0;he<W.locationSize;he++)_(W.location+he,te.meshPerAttribute);L.isInstancedMesh!==!0&&z._maxInstanceCount===void 0&&(z._maxInstanceCount=te.meshPerAttribute*te.count)}else for(let he=0;he<W.locationSize;he++)b(W.location+he);e.bindBuffer(34962,le);for(let he=0;he<W.locationSize;he++)E(W.location+he,ie/W.locationSize,ae,G,ie*Z,ie/W.locationSize*he*Z)}}else if(R!==void 0){let G=R[H];if(G!==void 0)switch(G.length){case 2:e.vertexAttrib2fv(W.location,G);break;case 3:e.vertexAttrib3fv(W.location,G);break;case 4:e.vertexAttrib4fv(W.location,G);break;default:e.vertexAttrib1fv(W.location,G)}}}}w()}function C(){I();for(let L in o){let O=o[L];for(let F in O){let z=O[F];for(let B in z)m(z[B].object),delete z[B];delete O[F]}delete o[L]}}function M(L){if(o[L.id]===void 0)return;let O=o[L.id];for(let F in O){let z=O[F];for(let B in z)m(z[B].object),delete z[B];delete O[F]}delete o[L.id]}function P(L){for(let O in o){let F=o[O];if(F[L.id]===void 0)continue;let z=F[L.id];for(let B in z)m(z[B].object),delete z[B];delete F[L.id]}}function I(){k(),h=!0,u!==l&&(u=l,f(u.object))}function k(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:c,reset:I,resetDefaultState:k,dispose:C,releaseStatesOfGeometry:M,releaseStatesOfProgram:P,initAttributes:x,enableAttribute:b,disableUnusedAttributes:w}}function axe(e,t,r,i){let n=i.isWebGL2,a;function s(u){a=u}function o(u,h){e.drawArrays(a,u,h),r.update(h,a,1)}function l(u,h,c){if(c===0)return;let d,f;if(n)d=e,f="drawArraysInstanced";else if(d=t.get("ANGLE_instanced_arrays"),f="drawArraysInstancedANGLE",d===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}d[f](a,u,h,c),r.update(h,a,c)}this.setMode=s,this.render=o,this.renderInstances=l}function sxe(e,t,r){let i;function n(){if(i!==void 0)return i;if(t.has("EXT_texture_filter_anisotropic")===!0){let E=t.get("EXT_texture_filter_anisotropic");i=e.getParameter(E.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function a(E){if(E==="highp"){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";E="mediump"}return E==="mediump"&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}let s=typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext,o=r.precision!==void 0?r.precision:"highp",l=a(o);l!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",l,"instead."),o=l);let u=s||t.has("WEBGL_draw_buffers"),h=r.logarithmicDepthBuffer===!0,c=e.getParameter(34930),d=e.getParameter(35660),f=e.getParameter(3379),m=e.getParameter(34076),p=e.getParameter(34921),g=e.getParameter(36347),v=e.getParameter(36348),y=e.getParameter(36349),x=d>0,b=s||t.has("OES_texture_float"),_=x&&b,w=s?e.getParameter(36183):0;return{isWebGL2:s,drawBuffers:u,getMaxAnisotropy:n,getMaxPrecision:a,precision:o,logarithmicDepthBuffer:h,maxTextures:c,maxVertexTextures:d,maxTextureSize:f,maxCubemapSize:m,maxAttributes:p,maxVertexUniforms:g,maxVaryings:v,maxFragmentUniforms:y,vertexTextures:x,floatFragmentTextures:b,floatVertexTextures:_,maxSamples:w}}function oxe(e){let t=this,r=null,i=0,n=!1,a=!1,s=new Vs,o=new Hn,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(c,d){let f=c.length!==0||d||i!==0||n;return n=d,i=c.length,f},this.beginShadows=function(){a=!0,h(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(c,d){r=h(c,d,0)},this.setState=function(c,d,f){let m=c.clippingPlanes,p=c.clipIntersection,g=c.clipShadows,v=e.get(c);if(!n||m===null||m.length===0||a&&!g)a?h(null):u();else{let y=a?0:i,x=y*4,b=v.clippingState||null;l.value=b,b=h(m,d,x,f);for(let _=0;_!==x;++_)b[_]=r[_];v.clippingState=b,this.numIntersection=p?this.numPlanes:0,this.numPlanes+=y}};function u(){l.value!==r&&(l.value=r,l.needsUpdate=i>0),t.numPlanes=i,t.numIntersection=0}function h(c,d,f,m){let p=c!==null?c.length:0,g=null;if(p!==0){if(g=l.value,m!==!0||g===null){let v=f+p*4,y=d.matrixWorldInverse;o.getNormalMatrix(y),(g===null||g.length<v)&&(g=new Float32Array(v));for(let x=0,b=f;x!==p;++x,b+=4)s.copy(c[x]).applyMatrix4(y,o),s.normal.toArray(g,b),g[b+3]=s.constant}l.value=g,l.needsUpdate=!0}return t.numPlanes=p,t.numIntersection=0,g}}function lxe(e){let t=new WeakMap;function r(s,o){return o===sD?s.mapping=Ff:o===oD&&(s.mapping=Uf),s}function i(s){if(s&&s.isTexture&&s.isRenderTargetTexture===!1){let o=s.mapping;if(o===sD||o===oD)if(t.has(s)){let l=t.get(s).texture;return r(l,s.mapping)}else{let l=s.image;if(l&&l.height>0){let u=new w0e(l.height/2);return u.fromEquirectangularTexture(e,s),t.set(s,u),s.addEventListener("dispose",n),r(u.texture,s.mapping)}else return null}}return s}function n(s){let o=s.target;o.removeEventListener("dispose",n);let l=t.get(o);l!==void 0&&(t.delete(o),l.dispose())}function a(){t=new WeakMap}return{get:i,dispose:a}}var ER=class extends dv{constructor(e=-1,t=1,r=1,i=-1,n=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=n,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,n,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=n,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2,n=r-e,a=r+e,s=i+t,o=i-t;if(this.view!==null&&this.view.enabled){let l=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;n+=l*this.view.offsetX,a=n+l*this.view.width,s-=u*this.view.offsetY,o=s-u*this.view.height}this.projectionMatrix.makeOrthographic(n,a,s,o,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}},Im=4,Vz=[.125,.215,.35,.446,.526,.582],Wd=20,QC=new ER,Hz=new At,KC=null,Ud=(1+Math.sqrt(5))/2,Bp=1/Ud,Gz=[new T(1,1,1),new T(-1,1,1),new T(1,1,-1),new T(-1,1,-1),new T(0,Ud,Bp),new T(0,Ud,-Bp),new T(Bp,0,Ud),new T(-Bp,0,Ud),new T(Ud,Bp,0),new T(-Ud,Bp,0)],Wz=class{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100){KC=this._renderer.getRenderTarget(),this._setSize(256);let n=this._allocateTargets();return n.depthBuffer=!0,this._sceneToCubeUV(e,r,i,n),t>0&&this._blur(n,0,0,t),this._applyPMREM(n),this._cleanup(n),n}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=qz(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=Yz(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(KC),e.scissorTest=!1,pb(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Ff||e.mapping===Uf?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),KC=this._renderer.getRenderTarget();let r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){let e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:Kt,minFilter:Kt,generateMipmaps:!1,type:Ng,format:Co,encoding:Su,depthBuffer:!1},i=$z(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=$z(e,t,r);let{_lodMax:n}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=uxe(n)),this._blurMaterial=cxe(n,e,t)}return i}_compileMaterial(e){let t=new gs(this._lodPlanes[0],e);this._renderer.compile(t,QC)}_sceneToCubeUV(e,t,r,i){let n=new ma(90,1,t,r),a=[1,-1,1,1,1,1],s=[1,1,1,-1,-1,-1],o=this._renderer,l=o.autoClear,u=o.toneMapping;o.getClearColor(Hz),o.toneMapping=gc,o.autoClear=!1;let h=new X1({name:"PMREM.Background",side:Vn,depthWrite:!1,depthTest:!1}),c=new gs(new Eu,h),d=!1,f=e.background;f?f.isColor&&(h.color.copy(f),e.background=null,d=!0):(h.color.copy(Hz),d=!0);for(let m=0;m<6;m++){let p=m%3;p===0?(n.up.set(0,a[m],0),n.lookAt(s[m],0,0)):p===1?(n.up.set(0,0,a[m]),n.lookAt(0,s[m],0)):(n.up.set(0,a[m],0),n.lookAt(0,0,s[m]));let g=this._cubeSize;pb(i,p*g,m>2?g:0,g,g),o.setRenderTarget(i),d&&o.render(c,n),o.render(e,n)}c.geometry.dispose(),c.material.dispose(),o.toneMapping=u,o.autoClear=l,e.background=f}_textureToCubeUV(e,t){let r=this._renderer,i=e.mapping===Ff||e.mapping===Uf;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=qz()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=Yz());let n=i?this._cubemapMaterial:this._equirectMaterial,a=new gs(this._lodPlanes[0],n),s=n.uniforms;s.envMap.value=e;let o=this._cubeSize;pb(t,0,0,3*o,2*o),r.setRenderTarget(t),r.render(a,QC)}_applyPMREM(e){let t=this._renderer,r=t.autoClear;t.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){let n=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),a=Gz[(i-1)%Gz.length];this._blur(e,i-1,i,n,a)}t.autoClear=r}_blur(e,t,r,i,n){let a=this._pingPongRenderTarget;this._halfBlur(e,a,t,r,i,"latitudinal",n),this._halfBlur(a,e,r,r,i,"longitudinal",n)}_halfBlur(e,t,r,i,n,a,s){let o=this._renderer,l=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");let u=3,h=new gs(this._lodPlanes[i],l),c=l.uniforms,d=this._sizeLods[r]-1,f=isFinite(n)?Math.PI/(2*d):2*Math.PI/(2*Wd-1),m=n/f,p=isFinite(n)?1+Math.floor(u*m):Wd;p>Wd&&console.warn(`sigmaRadians, ${n}, is too large and will clip, as it requested ${p} samples when the maximum is set to ${Wd}`);let g=[],v=0;for(let w=0;w<Wd;++w){let E=w/m,S=Math.exp(-E*E/2);g.push(S),w===0?v+=S:w<p&&(v+=2*S)}for(let w=0;w<g.length;w++)g[w]=g[w]/v;c.envMap.value=e.texture,c.samples.value=p,c.weights.value=g,c.latitudinal.value=a==="latitudinal",s&&(c.poleAxis.value=s);let{_lodMax:y}=this;c.dTheta.value=f,c.mipInt.value=y-r;let x=this._sizeLods[i],b=3*x*(i>y-Im?i-y+Im:0),_=4*(this._cubeSize-x);pb(t,b,_,3*x,2*x),o.setRenderTarget(t),o.render(h,QC)}};function uxe(e){let t=[],r=[],i=[],n=e,a=e-Im+1+Vz.length;for(let s=0;s<a;s++){let o=Math.pow(2,n);r.push(o);let l=1/o;s>e-Im?l=Vz[s-e+Im-1]:s===0&&(l=0),i.push(l);let u=1/(o-2),h=-u,c=1+u,d=[h,h,c,h,c,c,h,h,c,c,h,c],f=6,m=6,p=3,g=2,v=1,y=new Float32Array(p*m*f),x=new Float32Array(g*m*f),b=new Float32Array(v*m*f);for(let w=0;w<f;w++){let E=w%3*2/3-1,S=w>2?0:-1,C=[E,S,0,E+2/3,S,0,E+2/3,S+1,0,E,S,0,E+2/3,S+1,0,E,S+1,0];y.set(C,p*m*w),x.set(d,g*m*w);let M=[w,w,w,w,w,w];b.set(M,v*m*w)}let _=new wt;_.setAttribute("position",new Bt(y,p)),_.setAttribute("uv",new Bt(x,g)),_.setAttribute("faceIndex",new Bt(b,v)),t.push(_),n>Im&&n--}return{lodPlanes:t,sizeLods:r,sigmas:i}}function $z(e,t,r){let i=new Yr(e,t,r);return i.texture.mapping=Y1,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function pb(e,t,r,i,n){e.viewport.set(t,r,i,n),e.scissor.set(t,r,i,n)}function cxe(e,t,r){let i=new Float32Array(Wd),n=new T(0,1,0);return new oi({name:"SphericalGaussianBlur",defines:{n:Wd,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/r,CUBEUV_MAX_MIP:`${e}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:n}},vertexShader:MR(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:hn,depthTest:!1,depthWrite:!1})}function Yz(){return new oi({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:MR(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:hn,depthTest:!1,depthWrite:!1})}function qz(){return new oi({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:MR(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:hn,depthTest:!1,depthWrite:!1})}function MR(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function hxe(e){let t=new WeakMap,r=null;function i(o){if(o&&o.isTexture){let l=o.mapping,u=l===sD||l===oD,h=l===Ff||l===Uf;if(u||h)if(o.isRenderTargetTexture&&o.needsPMREMUpdate===!0){o.needsPMREMUpdate=!1;let c=t.get(o);return r===null&&(r=new Wz(e)),c=u?r.fromEquirectangular(o,c):r.fromCubemap(o,c),t.set(o,c),c.texture}else{if(t.has(o))return t.get(o).texture;{let c=o.image;if(u&&c&&c.height>0||h&&c&&n(c)){r===null&&(r=new Wz(e));let d=u?r.fromEquirectangular(o):r.fromCubemap(o);return t.set(o,d),o.addEventListener("dispose",a),d.texture}else return null}}}return o}function n(o){let l=0,u=6;for(let h=0;h<u;h++)o[h]!==void 0&&l++;return l===u}function a(o){let l=o.target;l.removeEventListener("dispose",a);let u=t.get(l);u!==void 0&&(t.delete(l),u.dispose())}function s(){t=new WeakMap,r!==null&&(r.dispose(),r=null)}return{get:i,dispose:s}}function dxe(e){let t={};function r(i){if(t[i]!==void 0)return t[i];let n;switch(i){case"WEBGL_depth_texture":n=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:n=e.getExtension(i)}return t[i]=n,n}return{has:function(i){return r(i)!==null},init:function(i){i.isWebGL2?r("EXT_color_buffer_float"):(r("WEBGL_depth_texture"),r("OES_texture_float"),r("OES_texture_half_float"),r("OES_texture_half_float_linear"),r("OES_standard_derivatives"),r("OES_element_index_uint"),r("OES_vertex_array_object"),r("ANGLE_instanced_arrays")),r("OES_texture_float_linear"),r("EXT_color_buffer_half_float"),r("WEBGL_multisampled_render_to_texture")},get:function(i){let n=r(i);return n===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),n}}}function fxe(e,t,r,i){let n={},a=new WeakMap;function s(c){let d=c.target;d.index!==null&&t.remove(d.index);for(let m in d.attributes)t.remove(d.attributes[m]);d.removeEventListener("dispose",s),delete n[d.id];let f=a.get(d);f&&(t.remove(f),a.delete(d)),i.releaseStatesOfGeometry(d),d.isInstancedBufferGeometry===!0&&delete d._maxInstanceCount,r.memory.geometries--}function o(c,d){return n[d.id]===!0||(d.addEventListener("dispose",s),n[d.id]=!0,r.memory.geometries++),d}function l(c){let d=c.attributes;for(let m in d)t.update(d[m],34962);let f=c.morphAttributes;for(let m in f){let p=f[m];for(let g=0,v=p.length;g<v;g++)t.update(p[g],34962)}}function u(c){let d=[],f=c.index,m=c.attributes.position,p=0;if(f!==null){let y=f.array;p=f.version;for(let x=0,b=y.length;x<b;x+=3){let _=y[x+0],w=y[x+1],E=y[x+2];d.push(_,w,w,E,E,_)}}else{let y=m.array;p=m.version;for(let x=0,b=y.length/3-1;x<b;x+=3){let _=x+0,w=x+1,E=x+2;d.push(_,w,w,E,E,_)}}let g=new(h7(d)?rg:g7)(d,1);g.version=p;let v=a.get(c);v&&t.remove(v),a.set(c,g)}function h(c){let d=a.get(c);if(d){let f=c.index;f!==null&&d.version<f.version&&u(c)}else u(c);return a.get(c)}return{get:o,update:l,getWireframeAttribute:h}}function pxe(e,t,r,i){let n=i.isWebGL2,a;function s(d){a=d}let o,l;function u(d){o=d.type,l=d.bytesPerElement}function h(d,f){e.drawElements(a,f,o,d*l),r.update(f,a,1)}function c(d,f,m){if(m===0)return;let p,g;if(n)p=e,g="drawElementsInstanced";else if(p=t.get("ANGLE_instanced_arrays"),g="drawElementsInstancedANGLE",p===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}p[g](a,f,o,d*l,m),r.update(f,a,m)}this.setMode=s,this.setIndex=u,this.render=h,this.renderInstances=c}function mxe(e){let t={geometries:0,textures:0},r={frame:0,calls:0,triangles:0,points:0,lines:0};function i(a,s,o){switch(r.calls++,s){case 4:r.triangles+=o*(a/3);break;case 1:r.lines+=o*(a/2);break;case 3:r.lines+=o*(a-1);break;case 2:r.lines+=o*a;break;case 0:r.points+=o*a;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s);break}}function n(){r.frame++,r.calls=0,r.triangles=0,r.points=0,r.lines=0}return{memory:t,render:r,programs:null,autoReset:!0,reset:n,update:i}}function gxe(e,t){return e[0]-t[0]}function vxe(e,t){return Math.abs(t[1])-Math.abs(e[1])}function yxe(e,t,r){let i={},n=new Float32Array(8),a=new WeakMap,s=new Wt,o=[];for(let u=0;u<8;u++)o[u]=[u,0];function l(u,h,c,d){let f=u.morphTargetInfluences;if(t.isWebGL2===!0){let m=h.morphAttributes.position||h.morphAttributes.normal||h.morphAttributes.color,p=m!==void 0?m.length:0,g=a.get(h);if(g===void 0||g.count!==p){let x=function(){L.dispose(),a.delete(h),h.removeEventListener("dispose",x)};g!==void 0&&g.texture.dispose();let b=h.morphAttributes.position!==void 0,_=h.morphAttributes.normal!==void 0,w=h.morphAttributes.color!==void 0,E=h.morphAttributes.position||[],S=h.morphAttributes.normal||[],C=h.morphAttributes.color||[],M=0;b===!0&&(M=1),_===!0&&(M=2),w===!0&&(M=3);let P=h.attributes.position.count*M,I=1;P>t.maxTextureSize&&(I=Math.ceil(P/t.maxTextureSize),P=t.maxTextureSize);let k=new Float32Array(P*I*4*p),L=new m7(k,P,I,p);L.type=qs,L.needsUpdate=!0;let O=M*4;for(let F=0;F<p;F++){let z=E[F],B=S[F],V=C[F],R=P*I*4*F;for(let H=0;H<z.count;H++){let W=H*O;b===!0&&(s.fromBufferAttribute(z,H),k[R+W+0]=s.x,k[R+W+1]=s.y,k[R+W+2]=s.z,k[R+W+3]=0),_===!0&&(s.fromBufferAttribute(B,H),k[R+W+4]=s.x,k[R+W+5]=s.y,k[R+W+6]=s.z,k[R+W+7]=0),w===!0&&(s.fromBufferAttribute(V,H),k[R+W+8]=s.x,k[R+W+9]=s.y,k[R+W+10]=s.z,k[R+W+11]=V.itemSize===4?s.w:1)}}g={count:p,texture:L,size:new re(P,I)},a.set(h,g),h.addEventListener("dispose",x)}let v=0;for(let x=0;x<f.length;x++)v+=f[x];let y=h.morphTargetsRelative?1:1-v;d.getUniforms().setValue(e,"morphTargetBaseInfluence",y),d.getUniforms().setValue(e,"morphTargetInfluences",f),d.getUniforms().setValue(e,"morphTargetsTexture",g.texture,r),d.getUniforms().setValue(e,"morphTargetsTextureSize",g.size)}else{let m=f===void 0?0:f.length,p=i[h.id];if(p===void 0||p.length!==m){p=[];for(let b=0;b<m;b++)p[b]=[b,0];i[h.id]=p}for(let b=0;b<m;b++){let _=p[b];_[0]=b,_[1]=f[b]}p.sort(vxe);for(let b=0;b<8;b++)b<m&&p[b][1]?(o[b][0]=p[b][0],o[b][1]=p[b][1]):(o[b][0]=Number.MAX_SAFE_INTEGER,o[b][1]=0);o.sort(gxe);let g=h.morphAttributes.position,v=h.morphAttributes.normal,y=0;for(let b=0;b<8;b++){let _=o[b],w=_[0],E=_[1];w!==Number.MAX_SAFE_INTEGER&&E?(g&&h.getAttribute("morphTarget"+b)!==g[w]&&h.setAttribute("morphTarget"+b,g[w]),v&&h.getAttribute("morphNormal"+b)!==v[w]&&h.setAttribute("morphNormal"+b,v[w]),n[b]=E,y+=E):(g&&h.hasAttribute("morphTarget"+b)===!0&&h.deleteAttribute("morphTarget"+b),v&&h.hasAttribute("morphNormal"+b)===!0&&h.deleteAttribute("morphNormal"+b),n[b]=0)}let x=h.morphTargetsRelative?1:1-y;d.getUniforms().setValue(e,"morphTargetBaseInfluence",x),d.getUniforms().setValue(e,"morphTargetInfluences",n)}}return{update:l}}function xxe(e,t,r,i){let n=new WeakMap;function a(l){let u=i.render.frame,h=l.geometry,c=t.get(l,h);return n.get(c)!==u&&(t.update(c),n.set(c,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",o)===!1&&l.addEventListener("dispose",o),r.update(l.instanceMatrix,34962),l.instanceColor!==null&&r.update(l.instanceColor,34962)),c}function s(){n=new WeakMap}function o(l){let u=l.target;u.removeEventListener("dispose",o),r.remove(u.instanceMatrix),u.instanceColor!==null&&r.remove(u.instanceColor)}return{update:a,dispose:s}}var x7=new Mn,b7=new m7,w7=new a0e,_7=new _R,Xz=[],Qz=[],Kz=new Float32Array(16),Zz=new Float32Array(9),Jz=new Float32Array(4);function fv(e,t,r){let i=e[0];if(i<=0||i>0)return e;let n=t*r,a=Xz[n];if(a===void 0&&(a=new Float32Array(n),Xz[n]=a),t!==0){i.toArray(a,0);for(let s=1,o=0;s!==t;++s)o+=r,e[s].toArray(a,o)}return a}function Pn(e,t){if(e.length!==t.length)return!1;for(let r=0,i=e.length;r<i;r++)if(e[r]!==t[r])return!1;return!0}function Dn(e,t){for(let r=0,i=t.length;r<i;r++)e[r]=t[r]}function ME(e,t){let r=Qz[t];r===void 0&&(r=new Int32Array(t),Qz[t]=r);for(let i=0;i!==t;++i)r[i]=e.allocateTextureUnit();return r}function bxe(e,t){let r=this.cache;r[0]!==t&&(e.uniform1f(this.addr,t),r[0]=t)}function wxe(e,t){let r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y)&&(e.uniform2f(this.addr,t.x,t.y),r[0]=t.x,r[1]=t.y);else{if(Pn(r,t))return;e.uniform2fv(this.addr,t),Dn(r,t)}}function _xe(e,t){let r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z)&&(e.uniform3f(this.addr,t.x,t.y,t.z),r[0]=t.x,r[1]=t.y,r[2]=t.z);else if(t.r!==void 0)(r[0]!==t.r||r[1]!==t.g||r[2]!==t.b)&&(e.uniform3f(this.addr,t.r,t.g,t.b),r[0]=t.r,r[1]=t.g,r[2]=t.b);else{if(Pn(r,t))return;e.uniform3fv(this.addr,t),Dn(r,t)}}function Sxe(e,t){let r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z||r[3]!==t.w)&&(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=t.w);else{if(Pn(r,t))return;e.uniform4fv(this.addr,t),Dn(r,t)}}function Exe(e,t){let r=this.cache,i=t.elements;if(i===void 0){if(Pn(r,t))return;e.uniformMatrix2fv(this.addr,!1,t),Dn(r,t)}else{if(Pn(r,i))return;Jz.set(i),e.uniformMatrix2fv(this.addr,!1,Jz),Dn(r,i)}}function Mxe(e,t){let r=this.cache,i=t.elements;if(i===void 0){if(Pn(r,t))return;e.uniformMatrix3fv(this.addr,!1,t),Dn(r,t)}else{if(Pn(r,i))return;Zz.set(i),e.uniformMatrix3fv(this.addr,!1,Zz),Dn(r,i)}}function Cxe(e,t){let r=this.cache,i=t.elements;if(i===void 0){if(Pn(r,t))return;e.uniformMatrix4fv(this.addr,!1,t),Dn(r,t)}else{if(Pn(r,i))return;Kz.set(i),e.uniformMatrix4fv(this.addr,!1,Kz),Dn(r,i)}}function Axe(e,t){let r=this.cache;r[0]!==t&&(e.uniform1i(this.addr,t),r[0]=t)}function Txe(e,t){let r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y)&&(e.uniform2i(this.addr,t.x,t.y),r[0]=t.x,r[1]=t.y);else{if(Pn(r,t))return;e.uniform2iv(this.addr,t),Dn(r,t)}}function Pxe(e,t){let r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z)&&(e.uniform3i(this.addr,t.x,t.y,t.z),r[0]=t.x,r[1]=t.y,r[2]=t.z);else{if(Pn(r,t))return;e.uniform3iv(this.addr,t),Dn(r,t)}}function Dxe(e,t){let r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z||r[3]!==t.w)&&(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=t.w);else{if(Pn(r,t))return;e.uniform4iv(this.addr,t),Dn(r,t)}}function Oxe(e,t){let r=this.cache;r[0]!==t&&(e.uniform1ui(this.addr,t),r[0]=t)}function Ixe(e,t){let r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y)&&(e.uniform2ui(this.addr,t.x,t.y),r[0]=t.x,r[1]=t.y);else{if(Pn(r,t))return;e.uniform2uiv(this.addr,t),Dn(r,t)}}function Rxe(e,t){let r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z)&&(e.uniform3ui(this.addr,t.x,t.y,t.z),r[0]=t.x,r[1]=t.y,r[2]=t.z);else{if(Pn(r,t))return;e.uniform3uiv(this.addr,t),Dn(r,t)}}function kxe(e,t){let r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z||r[3]!==t.w)&&(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=t.w);else{if(Pn(r,t))return;e.uniform4uiv(this.addr,t),Dn(r,t)}}function Lxe(e,t,r){let i=this.cache,n=r.allocateTextureUnit();i[0]!==n&&(e.uniform1i(this.addr,n),i[0]=n),r.setTexture2D(t||x7,n)}function Bxe(e,t,r){let i=this.cache,n=r.allocateTextureUnit();i[0]!==n&&(e.uniform1i(this.addr,n),i[0]=n),r.setTexture3D(t||w7,n)}function Nxe(e,t,r){let i=this.cache,n=r.allocateTextureUnit();i[0]!==n&&(e.uniform1i(this.addr,n),i[0]=n),r.setTextureCube(t||_7,n)}function zxe(e,t,r){let i=this.cache,n=r.allocateTextureUnit();i[0]!==n&&(e.uniform1i(this.addr,n),i[0]=n),r.setTexture2DArray(t||b7,n)}function Fxe(e){switch(e){case 5126:return bxe;case 35664:return wxe;case 35665:return _xe;case 35666:return Sxe;case 35674:return Exe;case 35675:return Mxe;case 35676:return Cxe;case 5124:case 35670:return Axe;case 35667:case 35671:return Txe;case 35668:case 35672:return Pxe;case 35669:case 35673:return Dxe;case 5125:return Oxe;case 36294:return Ixe;case 36295:return Rxe;case 36296:return kxe;case 35678:case 36198:case 36298:case 36306:case 35682:return Lxe;case 35679:case 36299:case 36307:return Bxe;case 35680:case 36300:case 36308:case 36293:return Nxe;case 36289:case 36303:case 36311:case 36292:return zxe}}function Uxe(e,t){e.uniform1fv(this.addr,t)}function jxe(e,t){let r=fv(t,this.size,2);e.uniform2fv(this.addr,r)}function Vxe(e,t){let r=fv(t,this.size,3);e.uniform3fv(this.addr,r)}function Hxe(e,t){let r=fv(t,this.size,4);e.uniform4fv(this.addr,r)}function Gxe(e,t){let r=fv(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,r)}function Wxe(e,t){let r=fv(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,r)}function $xe(e,t){let r=fv(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,r)}function Yxe(e,t){e.uniform1iv(this.addr,t)}function qxe(e,t){e.uniform2iv(this.addr,t)}function Xxe(e,t){e.uniform3iv(this.addr,t)}function Qxe(e,t){e.uniform4iv(this.addr,t)}function Kxe(e,t){e.uniform1uiv(this.addr,t)}function Zxe(e,t){e.uniform2uiv(this.addr,t)}function Jxe(e,t){e.uniform3uiv(this.addr,t)}function ebe(e,t){e.uniform4uiv(this.addr,t)}function tbe(e,t,r){let i=this.cache,n=t.length,a=ME(r,n);Pn(i,a)||(e.uniform1iv(this.addr,a),Dn(i,a));for(let s=0;s!==n;++s)r.setTexture2D(t[s]||x7,a[s])}function rbe(e,t,r){let i=this.cache,n=t.length,a=ME(r,n);Pn(i,a)||(e.uniform1iv(this.addr,a),Dn(i,a));for(let s=0;s!==n;++s)r.setTexture3D(t[s]||w7,a[s])}function ibe(e,t,r){let i=this.cache,n=t.length,a=ME(r,n);Pn(i,a)||(e.uniform1iv(this.addr,a),Dn(i,a));for(let s=0;s!==n;++s)r.setTextureCube(t[s]||_7,a[s])}function nbe(e,t,r){let i=this.cache,n=t.length,a=ME(r,n);Pn(i,a)||(e.uniform1iv(this.addr,a),Dn(i,a));for(let s=0;s!==n;++s)r.setTexture2DArray(t[s]||b7,a[s])}function abe(e){switch(e){case 5126:return Uxe;case 35664:return jxe;case 35665:return Vxe;case 35666:return Hxe;case 35674:return Gxe;case 35675:return Wxe;case 35676:return $xe;case 5124:case 35670:return Yxe;case 35667:case 35671:return qxe;case 35668:case 35672:return Xxe;case 35669:case 35673:return Qxe;case 5125:return Kxe;case 36294:return Zxe;case 36295:return Jxe;case 36296:return ebe;case 35678:case 36198:case 36298:case 36306:case 35682:return tbe;case 35679:case 36299:case 36307:return rbe;case 35680:case 36300:case 36308:case 36293:return ibe;case 36289:case 36303:case 36311:case 36292:return nbe}}var sbe=class{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.setValue=Fxe(t.type)}},obe=class{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.size=t.size,this.setValue=abe(t.type)}},lbe=class{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){let i=this.seq;for(let n=0,a=i.length;n!==a;++n){let s=i[n];s.setValue(e,t[s.id],r)}}},ZC=/(\w+)(\])?(\[|\.)?/g;function e5(e,t){e.seq.push(t),e.map[t.id]=t}function ube(e,t,r){let i=e.name,n=i.length;for(ZC.lastIndex=0;;){let a=ZC.exec(i),s=ZC.lastIndex,o=a[1],l=a[2]==="]",u=a[3];if(l&&(o=o|0),u===void 0||u==="["&&s+2===n){e5(r,u===void 0?new sbe(o,e,t):new obe(o,e,t));break}else{let h=r.map[o];h===void 0&&(h=new lbe(o),e5(r,h)),r=h}}}var Vw=class{constructor(e,t){this.seq=[],this.map={};let r=e.getProgramParameter(t,35718);for(let i=0;i<r;++i){let n=e.getActiveUniform(t,i),a=e.getUniformLocation(t,n.name);ube(n,a,this)}}setValue(e,t,r,i){let n=this.map[t];n!==void 0&&n.setValue(e,r,i)}setOptional(e,t,r){let i=t[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,t,r,i){for(let n=0,a=t.length;n!==a;++n){let s=t[n],o=r[s.id];o.needsUpdate!==!1&&s.setValue(e,o.value,i)}}static seqWithValue(e,t){let r=[];for(let i=0,n=e.length;i!==n;++i){let a=e[i];a.id in t&&r.push(a)}return r}};function t5(e,t,r){let i=e.createShader(t);return e.shaderSource(i,r),e.compileShader(i),i}var cbe=0;function hbe(e,t){let r=e.split(`
`),i=[],n=Math.max(t-6,0),a=Math.min(t+6,r.length);for(let s=n;s<a;s++){let o=s+1;i.push(`${o===t?">":" "} ${o}: ${r[s]}`)}return i.join(`
`)}function dbe(e){switch(e){case Su:return["Linear","( value )"];case Ht:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}function r5(e,t,r){let i=e.getShaderParameter(t,35713),n=e.getShaderInfoLog(t).trim();if(i&&n==="")return"";let a=/ERROR: 0:(\d+)/.exec(n);if(a){let s=parseInt(a[1]);return r.toUpperCase()+`

`+n+`

`+hbe(e.getShaderSource(t),s)}else return n}function fbe(e,t){let r=dbe(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+r[0]+r[1]+"; }"}function pbe(e,t){let r;switch(t){case bve:r="Linear";break;case wve:r="Reinhard";break;case _ve:r="OptimizedCineon";break;case Sve:r="ACESFilmic";break;case Eve:r="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),r="Linear"}return"vec3 "+e+"( vec3 color ) { return "+r+"ToneMapping( color ); }"}function mbe(e){return[e.extensionDerivatives||e.envMapCubeUVHeight||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||e.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(U0).join(`
`)}function gbe(e){let t=[];for(let r in e){let i=e[r];i!==!1&&t.push("#define "+r+" "+i)}return t.join(`
`)}function vbe(e,t){let r={},i=e.getProgramParameter(t,35721);for(let n=0;n<i;n++){let a=e.getActiveAttrib(t,n),s=a.name,o=1;a.type===35674&&(o=2),a.type===35675&&(o=3),a.type===35676&&(o=4),r[s]={type:a.type,location:e.getAttribLocation(t,s),locationSize:o}}return r}function U0(e){return e!==""}function i5(e,t){let r=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,r).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function n5(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var ybe=/^[ \t]*#include +<([\w\d./]+)>/gm;function dD(e){return e.replace(ybe,xbe)}function xbe(e,t){let r=Yt[t];if(r===void 0)throw new Error("Can not resolve #include <"+t+">");return dD(r)}var bbe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function a5(e){return e.replace(bbe,wbe)}function wbe(e,t,r,i){let n="";for(let a=parseInt(t);a<parseInt(r);a++)n+=i.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return n}function s5(e){let t="precision "+e.precision+` float;
precision `+e.precision+" int;";return e.precision==="highp"?t+=`
#define HIGH_PRECISION`:e.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:e.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}function _be(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===vR?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===Zge?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===F0&&(t="SHADOWMAP_TYPE_VSM"),t}function Sbe(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case Ff:case Uf:t="ENVMAP_TYPE_CUBE";break;case Y1:t="ENVMAP_TYPE_CUBE_UV";break}return t}function Ebe(e){let t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case Uf:t="ENVMAP_MODE_REFRACTION";break}return t}function Mbe(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case i7:t="ENVMAP_BLENDING_MULTIPLY";break;case yve:t="ENVMAP_BLENDING_MIX";break;case xve:t="ENVMAP_BLENDING_ADD";break}return t}function Cbe(e){let t=e.envMapCubeUVHeight;if(t===null)return null;let r=Math.log2(t)-2,i=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,r),7*16)),texelHeight:i,maxMip:r}}function Abe(e,t,r,i){let n=e.getContext(),a=r.defines,s=r.vertexShader,o=r.fragmentShader,l=_be(r),u=Sbe(r),h=Ebe(r),c=Mbe(r),d=Cbe(r),f=r.isWebGL2?"":mbe(r),m=gbe(a),p=n.createProgram(),g,v,y=r.glslVersion?"#version "+r.glslVersion+`
`:"";r.isRawShaderMaterial?(g=[m].filter(U0).join(`
`),g.length>0&&(g+=`
`),v=[f,m].filter(U0).join(`
`),v.length>0&&(v+=`
`)):(g=[s5(r),"#define SHADER_NAME "+r.shaderName,m,r.instancing?"#define USE_INSTANCING":"",r.instancingColor?"#define USE_INSTANCING_COLOR":"",r.supportsVertexTextures?"#define VERTEX_TEXTURES":"",r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+h:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMap&&r.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",r.normalMap&&r.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",r.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",r.displacementMap&&r.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",r.specularColorMap?"#define USE_SPECULARCOLORMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.transmission?"#define USE_TRANSMISSION":"",r.transmissionMap?"#define USE_TRANSMISSIONMAP":"",r.thicknessMap?"#define USE_THICKNESSMAP":"",r.sheenColorMap?"#define USE_SHEENCOLORMAP":"",r.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",r.vertexTangents?"#define USE_TANGENT":"",r.vertexColors?"#define USE_COLOR":"",r.vertexAlphas?"#define USE_COLOR_ALPHA":"",r.vertexUvs?"#define USE_UV":"",r.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",r.flatShading?"#define FLAT_SHADED":"",r.skinning?"#define USE_SKINNING":"",r.morphTargets?"#define USE_MORPHTARGETS":"",r.morphNormals&&r.flatShading===!1?"#define USE_MORPHNORMALS":"",r.morphColors&&r.isWebGL2?"#define USE_MORPHCOLORS":"",r.morphTargetsCount>0&&r.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",r.morphTargetsCount>0&&r.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+r.morphTextureStride:"",r.morphTargetsCount>0&&r.isWebGL2?"#define MORPHTARGETS_COUNT "+r.morphTargetsCount:"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+l:"",r.sizeAttenuation?"#define USE_SIZEATTENUATION":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&r.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(U0).join(`
`),v=[f,s5(r),"#define SHADER_NAME "+r.shaderName,m,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.matcap?"#define USE_MATCAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+u:"",r.envMap?"#define "+h:"",r.envMap?"#define "+c:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMap&&r.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",r.normalMap&&r.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",r.clearcoat?"#define USE_CLEARCOAT":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.iridescence?"#define USE_IRIDESCENCE":"",r.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",r.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",r.specularColorMap?"#define USE_SPECULARCOLORMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.alphaTest?"#define USE_ALPHATEST":"",r.sheen?"#define USE_SHEEN":"",r.sheenColorMap?"#define USE_SHEENCOLORMAP":"",r.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",r.transmission?"#define USE_TRANSMISSION":"",r.transmissionMap?"#define USE_TRANSMISSIONMAP":"",r.thicknessMap?"#define USE_THICKNESSMAP":"",r.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",r.vertexTangents?"#define USE_TANGENT":"",r.vertexColors||r.instancingColor?"#define USE_COLOR":"",r.vertexAlphas?"#define USE_COLOR_ALPHA":"",r.vertexUvs?"#define USE_UV":"",r.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",r.gradientMap?"#define USE_GRADIENTMAP":"",r.flatShading?"#define FLAT_SHADED":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+l:"",r.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",r.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&r.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",r.toneMapping!==gc?"#define TONE_MAPPING":"",r.toneMapping!==gc?Yt.tonemapping_pars_fragment:"",r.toneMapping!==gc?pbe("toneMapping",r.toneMapping):"",r.dithering?"#define DITHERING":"",r.opaque?"#define OPAQUE":"",Yt.encodings_pars_fragment,fbe("linearToOutputTexel",r.outputEncoding),r.useDepthPacking?"#define DEPTH_PACKING "+r.depthPacking:"",`
`].filter(U0).join(`
`)),s=dD(s),s=i5(s,r),s=n5(s,r),o=dD(o),o=i5(o,r),o=n5(o,r),s=a5(s),o=a5(o),r.isWebGL2&&r.isRawShaderMaterial!==!0&&(y=`#version 300 es
`,g=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+g,v=["#define varying in",r.glslVersion===Dz?"":"layout(location = 0) out highp vec4 pc_fragColor;",r.glslVersion===Dz?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+v);let x=y+g+s,b=y+v+o,_=t5(n,35633,x),w=t5(n,35632,b);if(n.attachShader(p,_),n.attachShader(p,w),r.index0AttributeName!==void 0?n.bindAttribLocation(p,0,r.index0AttributeName):r.morphTargets===!0&&n.bindAttribLocation(p,0,"position"),n.linkProgram(p),e.debug.checkShaderErrors){let C=n.getProgramInfoLog(p).trim(),M=n.getShaderInfoLog(_).trim(),P=n.getShaderInfoLog(w).trim(),I=!0,k=!0;if(n.getProgramParameter(p,35714)===!1){I=!1;let L=r5(n,_,"vertex"),O=r5(n,w,"fragment");console.error("THREE.WebGLProgram: Shader Error "+n.getError()+" - VALIDATE_STATUS "+n.getProgramParameter(p,35715)+`

Program Info Log: `+C+`
`+L+`
`+O)}else C!==""?console.warn("THREE.WebGLProgram: Program Info Log:",C):(M===""||P==="")&&(k=!1);k&&(this.diagnostics={runnable:I,programLog:C,vertexShader:{log:M,prefix:g},fragmentShader:{log:P,prefix:v}})}n.deleteShader(_),n.deleteShader(w);let E;this.getUniforms=function(){return E===void 0&&(E=new Vw(n,p)),E};let S;return this.getAttributes=function(){return S===void 0&&(S=vbe(n,p)),S},this.destroy=function(){i.releaseStatesOfProgram(this),n.deleteProgram(p),this.program=void 0},this.name=r.shaderName,this.id=cbe++,this.cacheKey=t,this.usedTimes=1,this.program=p,this.vertexShader=_,this.fragmentShader=w,this}var Tbe=0,Pbe=class{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){let t=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(t),n=this._getShaderStage(r),a=this._getShaderCacheForMaterial(e);return a.has(i)===!1&&(a.add(i),i.usedTimes++),a.has(n)===!1&&(a.add(n),n.usedTimes++),this}remove(e){let t=this.materialCache.get(e);for(let r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){let t=this.materialCache,r=t.get(e);return r===void 0&&(r=new Set,t.set(e,r)),r}_getShaderStage(e){let t=this.shaderCache,r=t.get(e);return r===void 0&&(r=new Dbe(e),t.set(e,r)),r}},Dbe=class{constructor(e){this.id=Tbe++,this.code=e,this.usedTimes=0}};function Obe(e,t,r,i,n,a,s){let o=new wR,l=new Pbe,u=[],h=n.isWebGL2,c=n.logarithmicDepthBuffer,d=n.vertexTextures,f=n.precision,m={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function p(S,C,M,P,I){let k=P.fog,L=I.geometry,O=S.isMeshStandardMaterial?P.environment:null,F=(S.isMeshStandardMaterial?r:t).get(S.envMap||O),z=F&&F.mapping===Y1?F.image.height:null,B=m[S.type];S.precision!==null&&(f=n.getMaxPrecision(S.precision),f!==S.precision&&console.warn("THREE.WebGLProgram.getParameters:",S.precision,"not supported, using",f,"instead."));let V=L.morphAttributes.position||L.morphAttributes.normal||L.morphAttributes.color,R=V!==void 0?V.length:0,H=0;L.morphAttributes.position!==void 0&&(H=1),L.morphAttributes.normal!==void 0&&(H=2),L.morphAttributes.color!==void 0&&(H=3);let W,te,G,ie;if(B){let he=Ql[B];W=he.vertexShader,te=he.fragmentShader}else W=S.vertexShader,te=S.fragmentShader,l.update(S),G=l.getVertexShaderID(S),ie=l.getFragmentShaderID(S);let q=e.getRenderTarget(),le=S.alphaTest>0,ae=S.clearcoat>0,Z=S.iridescence>0;return{isWebGL2:h,shaderID:B,shaderName:S.type,vertexShader:W,fragmentShader:te,defines:S.defines,customVertexShaderID:G,customFragmentShaderID:ie,isRawShaderMaterial:S.isRawShaderMaterial===!0,glslVersion:S.glslVersion,precision:f,instancing:I.isInstancedMesh===!0,instancingColor:I.isInstancedMesh===!0&&I.instanceColor!==null,supportsVertexTextures:d,outputEncoding:q===null?e.outputEncoding:q.isXRRenderTarget===!0?q.texture.encoding:Su,map:!!S.map,matcap:!!S.matcap,envMap:!!F,envMapMode:F&&F.mapping,envMapCubeUVHeight:z,lightMap:!!S.lightMap,aoMap:!!S.aoMap,emissiveMap:!!S.emissiveMap,bumpMap:!!S.bumpMap,normalMap:!!S.normalMap,objectSpaceNormalMap:S.normalMapType===Vve,tangentSpaceNormalMap:S.normalMapType===jve,decodeVideoTexture:!!S.map&&S.map.isVideoTexture===!0&&S.map.encoding===Ht,clearcoat:ae,clearcoatMap:ae&&!!S.clearcoatMap,clearcoatRoughnessMap:ae&&!!S.clearcoatRoughnessMap,clearcoatNormalMap:ae&&!!S.clearcoatNormalMap,iridescence:Z,iridescenceMap:Z&&!!S.iridescenceMap,iridescenceThicknessMap:Z&&!!S.iridescenceThicknessMap,displacementMap:!!S.displacementMap,roughnessMap:!!S.roughnessMap,metalnessMap:!!S.metalnessMap,specularMap:!!S.specularMap,specularIntensityMap:!!S.specularIntensityMap,specularColorMap:!!S.specularColorMap,opaque:S.transparent===!1&&S.blending===tg,alphaMap:!!S.alphaMap,alphaTest:le,gradientMap:!!S.gradientMap,sheen:S.sheen>0,sheenColorMap:!!S.sheenColorMap,sheenRoughnessMap:!!S.sheenRoughnessMap,transmission:S.transmission>0,transmissionMap:!!S.transmissionMap,thicknessMap:!!S.thicknessMap,combine:S.combine,vertexTangents:!!S.normalMap&&!!L.attributes.tangent,vertexColors:S.vertexColors,vertexAlphas:S.vertexColors===!0&&!!L.attributes.color&&L.attributes.color.itemSize===4,vertexUvs:!!S.map||!!S.bumpMap||!!S.normalMap||!!S.specularMap||!!S.alphaMap||!!S.emissiveMap||!!S.roughnessMap||!!S.metalnessMap||!!S.clearcoatMap||!!S.clearcoatRoughnessMap||!!S.clearcoatNormalMap||!!S.iridescenceMap||!!S.iridescenceThicknessMap||!!S.displacementMap||!!S.transmissionMap||!!S.thicknessMap||!!S.specularIntensityMap||!!S.specularColorMap||!!S.sheenColorMap||!!S.sheenRoughnessMap,uvsVertexOnly:!(S.map||S.bumpMap||S.normalMap||S.specularMap||S.alphaMap||S.emissiveMap||S.roughnessMap||S.metalnessMap||S.clearcoatNormalMap||S.iridescenceMap||S.iridescenceThicknessMap||S.transmission>0||S.transmissionMap||S.thicknessMap||S.specularIntensityMap||S.specularColorMap||S.sheen>0||S.sheenColorMap||S.sheenRoughnessMap)&&!!S.displacementMap,fog:!!k,useFog:S.fog===!0,fogExp2:k&&k.isFogExp2,flatShading:!!S.flatShading,sizeAttenuation:S.sizeAttenuation,logarithmicDepthBuffer:c,skinning:I.isSkinnedMesh===!0,morphTargets:L.morphAttributes.position!==void 0,morphNormals:L.morphAttributes.normal!==void 0,morphColors:L.morphAttributes.color!==void 0,morphTargetsCount:R,morphTextureStride:H,numDirLights:C.directional.length,numPointLights:C.point.length,numSpotLights:C.spot.length,numSpotLightMaps:C.spotLightMap.length,numRectAreaLights:C.rectArea.length,numHemiLights:C.hemi.length,numDirLightShadows:C.directionalShadowMap.length,numPointLightShadows:C.pointShadowMap.length,numSpotLightShadows:C.spotShadowMap.length,numSpotLightShadowsWithMaps:C.numSpotLightShadowsWithMaps,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:S.dithering,shadowMapEnabled:e.shadowMap.enabled&&M.length>0,shadowMapType:e.shadowMap.type,toneMapping:S.toneMapped?e.toneMapping:gc,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:S.premultipliedAlpha,doubleSided:S.side===Ys,flipSided:S.side===Vn,useDepthPacking:!!S.depthPacking,depthPacking:S.depthPacking||0,index0AttributeName:S.index0AttributeName,extensionDerivatives:S.extensions&&S.extensions.derivatives,extensionFragDepth:S.extensions&&S.extensions.fragDepth,extensionDrawBuffers:S.extensions&&S.extensions.drawBuffers,extensionShaderTextureLOD:S.extensions&&S.extensions.shaderTextureLOD,rendererExtensionFragDepth:h||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:h||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:h||i.has("EXT_shader_texture_lod"),customProgramCacheKey:S.customProgramCacheKey()}}function g(S){let C=[];if(S.shaderID?C.push(S.shaderID):(C.push(S.customVertexShaderID),C.push(S.customFragmentShaderID)),S.defines!==void 0)for(let M in S.defines)C.push(M),C.push(S.defines[M]);return S.isRawShaderMaterial===!1&&(v(C,S),y(C,S),C.push(e.outputEncoding)),C.push(S.customProgramCacheKey),C.join()}function v(S,C){S.push(C.precision),S.push(C.outputEncoding),S.push(C.envMapMode),S.push(C.envMapCubeUVHeight),S.push(C.combine),S.push(C.vertexUvs),S.push(C.fogExp2),S.push(C.sizeAttenuation),S.push(C.morphTargetsCount),S.push(C.morphAttributeCount),S.push(C.numDirLights),S.push(C.numPointLights),S.push(C.numSpotLights),S.push(C.numSpotLightMaps),S.push(C.numHemiLights),S.push(C.numRectAreaLights),S.push(C.numDirLightShadows),S.push(C.numPointLightShadows),S.push(C.numSpotLightShadows),S.push(C.numSpotLightShadowsWithMaps),S.push(C.shadowMapType),S.push(C.toneMapping),S.push(C.numClippingPlanes),S.push(C.numClipIntersection),S.push(C.depthPacking)}function y(S,C){o.disableAll(),C.isWebGL2&&o.enable(0),C.supportsVertexTextures&&o.enable(1),C.instancing&&o.enable(2),C.instancingColor&&o.enable(3),C.map&&o.enable(4),C.matcap&&o.enable(5),C.envMap&&o.enable(6),C.lightMap&&o.enable(7),C.aoMap&&o.enable(8),C.emissiveMap&&o.enable(9),C.bumpMap&&o.enable(10),C.normalMap&&o.enable(11),C.objectSpaceNormalMap&&o.enable(12),C.tangentSpaceNormalMap&&o.enable(13),C.clearcoat&&o.enable(14),C.clearcoatMap&&o.enable(15),C.clearcoatRoughnessMap&&o.enable(16),C.clearcoatNormalMap&&o.enable(17),C.iridescence&&o.enable(18),C.iridescenceMap&&o.enable(19),C.iridescenceThicknessMap&&o.enable(20),C.displacementMap&&o.enable(21),C.specularMap&&o.enable(22),C.roughnessMap&&o.enable(23),C.metalnessMap&&o.enable(24),C.gradientMap&&o.enable(25),C.alphaMap&&o.enable(26),C.alphaTest&&o.enable(27),C.vertexColors&&o.enable(28),C.vertexAlphas&&o.enable(29),C.vertexUvs&&o.enable(30),C.vertexTangents&&o.enable(31),C.uvsVertexOnly&&o.enable(32),S.push(o.mask),o.disableAll(),C.fog&&o.enable(0),C.useFog&&o.enable(1),C.flatShading&&o.enable(2),C.logarithmicDepthBuffer&&o.enable(3),C.skinning&&o.enable(4),C.morphTargets&&o.enable(5),C.morphNormals&&o.enable(6),C.morphColors&&o.enable(7),C.premultipliedAlpha&&o.enable(8),C.shadowMapEnabled&&o.enable(9),C.physicallyCorrectLights&&o.enable(10),C.doubleSided&&o.enable(11),C.flipSided&&o.enable(12),C.useDepthPacking&&o.enable(13),C.dithering&&o.enable(14),C.specularIntensityMap&&o.enable(15),C.specularColorMap&&o.enable(16),C.transmission&&o.enable(17),C.transmissionMap&&o.enable(18),C.thicknessMap&&o.enable(19),C.sheen&&o.enable(20),C.sheenColorMap&&o.enable(21),C.sheenRoughnessMap&&o.enable(22),C.decodeVideoTexture&&o.enable(23),C.opaque&&o.enable(24),S.push(o.mask)}function x(S){let C=m[S.type],M;if(C){let P=Ql[C];M=hv.clone(P.uniforms)}else M=S.uniforms;return M}function b(S,C){let M;for(let P=0,I=u.length;P<I;P++){let k=u[P];if(k.cacheKey===C){M=k,++M.usedTimes;break}}return M===void 0&&(M=new Abe(e,C,S,a),u.push(M)),M}function _(S){if(--S.usedTimes===0){let C=u.indexOf(S);u[C]=u[u.length-1],u.pop(),S.destroy()}}function w(S){l.remove(S)}function E(){l.dispose()}return{getParameters:p,getProgramCacheKey:g,getUniforms:x,acquireProgram:b,releaseProgram:_,releaseShaderCache:w,programs:u,dispose:E}}function Ibe(){let e=new WeakMap;function t(a){let s=e.get(a);return s===void 0&&(s={},e.set(a,s)),s}function r(a){e.delete(a)}function i(a,s,o){e.get(a)[s]=o}function n(){e=new WeakMap}return{get:t,remove:r,update:i,dispose:n}}function Rbe(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function o5(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function l5(){let e=[],t=0,r=[],i=[],n=[];function a(){t=0,r.length=0,i.length=0,n.length=0}function s(c,d,f,m,p,g){let v=e[t];return v===void 0?(v={id:c.id,object:c,geometry:d,material:f,groupOrder:m,renderOrder:c.renderOrder,z:p,group:g},e[t]=v):(v.id=c.id,v.object=c,v.geometry=d,v.material=f,v.groupOrder=m,v.renderOrder=c.renderOrder,v.z=p,v.group=g),t++,v}function o(c,d,f,m,p,g){let v=s(c,d,f,m,p,g);f.transmission>0?i.push(v):f.transparent===!0?n.push(v):r.push(v)}function l(c,d,f,m,p,g){let v=s(c,d,f,m,p,g);f.transmission>0?i.unshift(v):f.transparent===!0?n.unshift(v):r.unshift(v)}function u(c,d){r.length>1&&r.sort(c||Rbe),i.length>1&&i.sort(d||o5),n.length>1&&n.sort(d||o5)}function h(){for(let c=t,d=e.length;c<d;c++){let f=e[c];if(f.id===null)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}}return{opaque:r,transmissive:i,transparent:n,init:a,push:o,unshift:l,finish:h,sort:u}}function kbe(){let e=new WeakMap;function t(i,n){let a=e.get(i),s;return a===void 0?(s=new l5,e.set(i,[s])):n>=a.length?(s=new l5,a.push(s)):s=a[n],s}function r(){e=new WeakMap}return{get:t,dispose:r}}function Lbe(){let e={};return{get:function(t){if(e[t.id]!==void 0)return e[t.id];let r;switch(t.type){case"DirectionalLight":r={direction:new T,color:new At};break;case"SpotLight":r={position:new T,direction:new T,color:new At,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":r={position:new T,color:new At,distance:0,decay:0};break;case"HemisphereLight":r={direction:new T,skyColor:new At,groundColor:new At};break;case"RectAreaLight":r={color:new At,position:new T,halfWidth:new T,halfHeight:new T};break}return e[t.id]=r,r}}}function Bbe(){let e={};return{get:function(t){if(e[t.id]!==void 0)return e[t.id];let r;switch(t.type){case"DirectionalLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new re};break;case"SpotLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new re};break;case"PointLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new re,shadowCameraNear:1,shadowCameraFar:1e3};break}return e[t.id]=r,r}}}var Nbe=0;function zbe(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function Fbe(e,t){let r=new Lbe,i=Bbe(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let h=0;h<9;h++)n.probe.push(new T);let a=new T,s=new ze,o=new ze;function l(h,c){let d=0,f=0,m=0;for(let P=0;P<9;P++)n.probe[P].set(0,0,0);let p=0,g=0,v=0,y=0,x=0,b=0,_=0,w=0,E=0,S=0;h.sort(zbe);let C=c!==!0?Math.PI:1;for(let P=0,I=h.length;P<I;P++){let k=h[P],L=k.color,O=k.intensity,F=k.distance,z=k.shadow&&k.shadow.map?k.shadow.map.texture:null;if(k.isAmbientLight)d+=L.r*O*C,f+=L.g*O*C,m+=L.b*O*C;else if(k.isLightProbe)for(let B=0;B<9;B++)n.probe[B].addScaledVector(k.sh.coefficients[B],O);else if(k.isDirectionalLight){let B=r.get(k);if(B.color.copy(k.color).multiplyScalar(k.intensity*C),k.castShadow){let V=k.shadow,R=i.get(k);R.shadowBias=V.bias,R.shadowNormalBias=V.normalBias,R.shadowRadius=V.radius,R.shadowMapSize=V.mapSize,n.directionalShadow[p]=R,n.directionalShadowMap[p]=z,n.directionalShadowMatrix[p]=k.shadow.matrix,b++}n.directional[p]=B,p++}else if(k.isSpotLight){let B=r.get(k);B.position.setFromMatrixPosition(k.matrixWorld),B.color.copy(L).multiplyScalar(O*C),B.distance=F,B.coneCos=Math.cos(k.angle),B.penumbraCos=Math.cos(k.angle*(1-k.penumbra)),B.decay=k.decay,n.spot[v]=B;let V=k.shadow;if(k.map&&(n.spotLightMap[E]=k.map,E++,V.updateMatrices(k),k.castShadow&&S++),n.spotLightMatrix[v]=V.matrix,k.castShadow){let R=i.get(k);R.shadowBias=V.bias,R.shadowNormalBias=V.normalBias,R.shadowRadius=V.radius,R.shadowMapSize=V.mapSize,n.spotShadow[v]=R,n.spotShadowMap[v]=z,w++}v++}else if(k.isRectAreaLight){let B=r.get(k);B.color.copy(L).multiplyScalar(O),B.halfWidth.set(k.width*.5,0,0),B.halfHeight.set(0,k.height*.5,0),n.rectArea[y]=B,y++}else if(k.isPointLight){let B=r.get(k);if(B.color.copy(k.color).multiplyScalar(k.intensity*C),B.distance=k.distance,B.decay=k.decay,k.castShadow){let V=k.shadow,R=i.get(k);R.shadowBias=V.bias,R.shadowNormalBias=V.normalBias,R.shadowRadius=V.radius,R.shadowMapSize=V.mapSize,R.shadowCameraNear=V.camera.near,R.shadowCameraFar=V.camera.far,n.pointShadow[g]=R,n.pointShadowMap[g]=z,n.pointShadowMatrix[g]=k.shadow.matrix,_++}n.point[g]=B,g++}else if(k.isHemisphereLight){let B=r.get(k);B.skyColor.copy(k.color).multiplyScalar(O*C),B.groundColor.copy(k.groundColor).multiplyScalar(O*C),n.hemi[x]=B,x++}}y>0&&(t.isWebGL2||e.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=$e.LTC_FLOAT_1,n.rectAreaLTC2=$e.LTC_FLOAT_2):e.has("OES_texture_half_float_linear")===!0?(n.rectAreaLTC1=$e.LTC_HALF_1,n.rectAreaLTC2=$e.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),n.ambient[0]=d,n.ambient[1]=f,n.ambient[2]=m;let M=n.hash;(M.directionalLength!==p||M.pointLength!==g||M.spotLength!==v||M.rectAreaLength!==y||M.hemiLength!==x||M.numDirectionalShadows!==b||M.numPointShadows!==_||M.numSpotShadows!==w||M.numSpotMaps!==E)&&(n.directional.length=p,n.spot.length=v,n.rectArea.length=y,n.point.length=g,n.hemi.length=x,n.directionalShadow.length=b,n.directionalShadowMap.length=b,n.pointShadow.length=_,n.pointShadowMap.length=_,n.spotShadow.length=w,n.spotShadowMap.length=w,n.directionalShadowMatrix.length=b,n.pointShadowMatrix.length=_,n.spotLightMatrix.length=w+E-S,n.spotLightMap.length=E,n.numSpotLightShadowsWithMaps=S,M.directionalLength=p,M.pointLength=g,M.spotLength=v,M.rectAreaLength=y,M.hemiLength=x,M.numDirectionalShadows=b,M.numPointShadows=_,M.numSpotShadows=w,M.numSpotMaps=E,n.version=Nbe++)}function u(h,c){let d=0,f=0,m=0,p=0,g=0,v=c.matrixWorldInverse;for(let y=0,x=h.length;y<x;y++){let b=h[y];if(b.isDirectionalLight){let _=n.directional[d];_.direction.setFromMatrixPosition(b.matrixWorld),a.setFromMatrixPosition(b.target.matrixWorld),_.direction.sub(a),_.direction.transformDirection(v),d++}else if(b.isSpotLight){let _=n.spot[m];_.position.setFromMatrixPosition(b.matrixWorld),_.position.applyMatrix4(v),_.direction.setFromMatrixPosition(b.matrixWorld),a.setFromMatrixPosition(b.target.matrixWorld),_.direction.sub(a),_.direction.transformDirection(v),m++}else if(b.isRectAreaLight){let _=n.rectArea[p];_.position.setFromMatrixPosition(b.matrixWorld),_.position.applyMatrix4(v),o.identity(),s.copy(b.matrixWorld),s.premultiply(v),o.extractRotation(s),_.halfWidth.set(b.width*.5,0,0),_.halfHeight.set(0,b.height*.5,0),_.halfWidth.applyMatrix4(o),_.halfHeight.applyMatrix4(o),p++}else if(b.isPointLight){let _=n.point[f];_.position.setFromMatrixPosition(b.matrixWorld),_.position.applyMatrix4(v),f++}else if(b.isHemisphereLight){let _=n.hemi[g];_.direction.setFromMatrixPosition(b.matrixWorld),_.direction.transformDirection(v),g++}}}return{setup:l,setupView:u,state:n}}function u5(e,t){let r=new Fbe(e,t),i=[],n=[];function a(){i.length=0,n.length=0}function s(h){i.push(h)}function o(h){n.push(h)}function l(h){r.setup(i,h)}function u(h){r.setupView(i,h)}return{init:a,state:{lightsArray:i,shadowsArray:n,lights:r},setupLights:l,setupLightsView:u,pushLight:s,pushShadow:o}}function Ube(e,t){let r=new WeakMap;function i(a,s=0){let o=r.get(a),l;return o===void 0?(l=new u5(e,t),r.set(a,[l])):s>=o.length?(l=new u5(e,t),o.push(l)):l=o[s],l}function n(){r=new WeakMap}return{get:i,dispose:n}}var S7=class extends q1{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Lc,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}},jbe=class extends q1{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new T,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}},Vbe=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Hbe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Gbe(e,t,r){let i=new SR,n=new re,a=new re,s=new Wt,o=new S7({depthPacking:u7}),l=new jbe,u={},h=r.maxTextureSize,c={[Ml]:Vn,[Vn]:Ml,[Ys]:Ys},d=new oi({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new re},radius:{value:4}},vertexShader:Vbe,fragmentShader:Hbe}),f=d.clone();f.defines.HORIZONTAL_PASS=1;let m=new wt;m.setAttribute("position",new Bt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let p=new gs(m,d),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=vR,this.render=function(b,_,w){if(g.enabled===!1||g.autoUpdate===!1&&g.needsUpdate===!1||b.length===0)return;let E=e.getRenderTarget(),S=e.getActiveCubeFace(),C=e.getActiveMipmapLevel(),M=e.state;M.setBlending(hn),M.buffers.color.setClear(1,1,1,1),M.buffers.depth.setTest(!0),M.setScissorTest(!1);for(let P=0,I=b.length;P<I;P++){let k=b[P],L=k.shadow;if(L===void 0){console.warn("THREE.WebGLShadowMap:",k,"has no shadow.");continue}if(L.autoUpdate===!1&&L.needsUpdate===!1)continue;n.copy(L.mapSize);let O=L.getFrameExtents();if(n.multiply(O),a.copy(L.mapSize),(n.x>h||n.y>h)&&(n.x>h&&(a.x=Math.floor(h/O.x),n.x=a.x*O.x,L.mapSize.x=a.x),n.y>h&&(a.y=Math.floor(h/O.y),n.y=a.y*O.y,L.mapSize.y=a.y)),L.map===null){let z=this.type!==F0?{minFilter:si,magFilter:si}:{};L.map=new Yr(n.x,n.y,z),L.map.texture.name=k.name+".shadowMap",L.camera.updateProjectionMatrix()}e.setRenderTarget(L.map),e.clear();let F=L.getViewportCount();for(let z=0;z<F;z++){let B=L.getViewport(z);s.set(a.x*B.x,a.y*B.y,a.x*B.z,a.y*B.w),M.viewport(s),L.updateMatrices(k,z),i=L.getFrustum(),x(_,w,L.camera,k,this.type)}L.isPointLightShadow!==!0&&this.type===F0&&v(L,w),L.needsUpdate=!1}g.needsUpdate=!1,e.setRenderTarget(E,S,C)};function v(b,_){let w=t.update(p);d.defines.VSM_SAMPLES!==b.blurSamples&&(d.defines.VSM_SAMPLES=b.blurSamples,f.defines.VSM_SAMPLES=b.blurSamples,d.needsUpdate=!0,f.needsUpdate=!0),b.mapPass===null&&(b.mapPass=new Yr(n.x,n.y)),d.uniforms.shadow_pass.value=b.map.texture,d.uniforms.resolution.value=b.mapSize,d.uniforms.radius.value=b.radius,e.setRenderTarget(b.mapPass),e.clear(),e.renderBufferDirect(_,null,w,d,p,null),f.uniforms.shadow_pass.value=b.mapPass.texture,f.uniforms.resolution.value=b.mapSize,f.uniforms.radius.value=b.radius,e.setRenderTarget(b.map),e.clear(),e.renderBufferDirect(_,null,w,f,p,null)}function y(b,_,w,E,S,C){let M=null,P=w.isPointLight===!0?b.customDistanceMaterial:b.customDepthMaterial;if(P!==void 0)M=P;else if(M=w.isPointLight===!0?l:o,e.localClippingEnabled&&_.clipShadows===!0&&Array.isArray(_.clippingPlanes)&&_.clippingPlanes.length!==0||_.displacementMap&&_.displacementScale!==0||_.alphaMap&&_.alphaTest>0||_.map&&_.alphaTest>0){let I=M.uuid,k=_.uuid,L=u[I];L===void 0&&(L={},u[I]=L);let O=L[k];O===void 0&&(O=M.clone(),L[k]=O),M=O}return M.visible=_.visible,M.wireframe=_.wireframe,C===F0?M.side=_.shadowSide!==null?_.shadowSide:_.side:M.side=_.shadowSide!==null?_.shadowSide:c[_.side],M.alphaMap=_.alphaMap,M.alphaTest=_.alphaTest,M.map=_.map,M.clipShadows=_.clipShadows,M.clippingPlanes=_.clippingPlanes,M.clipIntersection=_.clipIntersection,M.displacementMap=_.displacementMap,M.displacementScale=_.displacementScale,M.displacementBias=_.displacementBias,M.wireframeLinewidth=_.wireframeLinewidth,M.linewidth=_.linewidth,w.isPointLight===!0&&M.isMeshDistanceMaterial===!0&&(M.referencePosition.setFromMatrixPosition(w.matrixWorld),M.nearDistance=E,M.farDistance=S),M}function x(b,_,w,E,S){if(b.visible===!1)return;if(b.layers.test(_.layers)&&(b.isMesh||b.isLine||b.isPoints)&&(b.castShadow||b.receiveShadow&&S===F0)&&(!b.frustumCulled||i.intersectsObject(b))){b.modelViewMatrix.multiplyMatrices(w.matrixWorldInverse,b.matrixWorld);let M=t.update(b),P=b.material;if(Array.isArray(P)){let I=M.groups;for(let k=0,L=I.length;k<L;k++){let O=I[k],F=P[O.materialIndex];if(F&&F.visible){let z=y(b,F,E,w.near,w.far,S);e.renderBufferDirect(w,null,M,z,b,O)}}}else if(P.visible){let I=y(b,P,E,w.near,w.far,S);e.renderBufferDirect(w,null,M,I,b,null)}}let C=b.children;for(let M=0,P=C.length;M<P;M++)x(C[M],_,w,E,S)}}function Wbe(e,t,r){let i=r.isWebGL2;function n(){let J=!1,Me=new Wt,De=null,We=new Wt(0,0,0,0);return{setMask:function(gt){De!==gt&&!J&&(e.colorMask(gt,gt,gt,gt),De=gt)},setLocked:function(gt){J=gt},setClear:function(gt,jt,ri,Zr,Pt){Pt===!0&&(gt*=Zr,jt*=Zr,ri*=Zr),Me.set(gt,jt,ri,Zr),We.equals(Me)===!1&&(e.clearColor(gt,jt,ri,Zr),We.copy(Me))},reset:function(){J=!1,De=null,We.set(-1,0,0,0)}}}function a(){let J=!1,Me=null,De=null,We=null;return{setTest:function(gt){gt?le(2929):ae(2929)},setMask:function(gt){Me!==gt&&!J&&(e.depthMask(gt),Me=gt)},setFunc:function(gt){if(De!==gt){switch(gt){case hve:e.depthFunc(512);break;case dve:e.depthFunc(519);break;case fve:e.depthFunc(513);break;case aD:e.depthFunc(515);break;case pve:e.depthFunc(514);break;case mve:e.depthFunc(518);break;case gve:e.depthFunc(516);break;case vve:e.depthFunc(517);break;default:e.depthFunc(515)}De=gt}},setLocked:function(gt){J=gt},setClear:function(gt){We!==gt&&(e.clearDepth(gt),We=gt)},reset:function(){J=!1,Me=null,De=null,We=null}}}function s(){let J=!1,Me=null,De=null,We=null,gt=null,jt=null,ri=null,Zr=null,Pt=null;return{setTest:function(Je){J||(Je?le(2960):ae(2960))},setMask:function(Je){Me!==Je&&!J&&(e.stencilMask(Je),Me=Je)},setFunc:function(Je,qt,ur){(De!==Je||We!==qt||gt!==ur)&&(e.stencilFunc(Je,qt,ur),De=Je,We=qt,gt=ur)},setOp:function(Je,qt,ur){(jt!==Je||ri!==qt||Zr!==ur)&&(e.stencilOp(Je,qt,ur),jt=Je,ri=qt,Zr=ur)},setLocked:function(Je){J=Je},setClear:function(Je){Pt!==Je&&(e.clearStencil(Je),Pt=Je)},reset:function(){J=!1,Me=null,De=null,We=null,gt=null,jt=null,ri=null,Zr=null,Pt=null}}}let o=new n,l=new a,u=new s,h=new WeakMap,c=new WeakMap,d={},f={},m=new WeakMap,p=[],g=null,v=!1,y=null,x=null,b=null,_=null,w=null,E=null,S=null,C=!1,M=null,P=null,I=null,k=null,L=null,O=e.getParameter(35661),F=!1,z=0,B=e.getParameter(7938);B.indexOf("WebGL")!==-1?(z=parseFloat(/^WebGL (\d)/.exec(B)[1]),F=z>=1):B.indexOf("OpenGL ES")!==-1&&(z=parseFloat(/^OpenGL ES (\d)/.exec(B)[1]),F=z>=2);let V=null,R={},H=e.getParameter(3088),W=e.getParameter(2978),te=new Wt().fromArray(H),G=new Wt().fromArray(W);function ie(J,Me,De){let We=new Uint8Array(4),gt=e.createTexture();e.bindTexture(J,gt),e.texParameteri(J,10241,9728),e.texParameteri(J,10240,9728);for(let jt=0;jt<De;jt++)e.texImage2D(Me+jt,0,6408,1,1,0,6408,5121,We);return gt}let q={};q[3553]=ie(3553,3553,1),q[34067]=ie(34067,34069,6),o.setClear(0,0,0,1),l.setClear(1),u.setClear(0),le(2929),l.setFunc(aD),qe(!1),se(ez),le(2884),Ne(hn);function le(J){d[J]!==!0&&(e.enable(J),d[J]=!0)}function ae(J){d[J]!==!1&&(e.disable(J),d[J]=!1)}function Z(J,Me){return f[J]!==Me?(e.bindFramebuffer(J,Me),f[J]=Me,i&&(J===36009&&(f[36160]=Me),J===36160&&(f[36009]=Me)),!0):!1}function he(J,Me){let De=p,We=!1;if(J)if(De=m.get(Me),De===void 0&&(De=[],m.set(Me,De)),J.isWebGLMultipleRenderTargets){let gt=J.texture;if(De.length!==gt.length||De[0]!==36064){for(let jt=0,ri=gt.length;jt<ri;jt++)De[jt]=36064+jt;De.length=gt.length,We=!0}}else De[0]!==36064&&(De[0]=36064,We=!0);else De[0]!==1029&&(De[0]=1029,We=!0);We&&(r.isWebGL2?e.drawBuffers(De):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(De))}function ge(J){return g!==J?(e.useProgram(J),g=J,!0):!1}let xe={[lm]:32774,[eve]:32778,[tve]:32779};if(i)xe[nz]=32775,xe[az]=32776;else{let J=t.get("EXT_blend_minmax");J!==null&&(xe[nz]=J.MIN_EXT,xe[az]=J.MAX_EXT)}let ye={[rve]:0,[ive]:1,[nve]:768,[t7]:770,[cve]:776,[lve]:774,[sve]:772,[ave]:769,[r7]:771,[uve]:775,[ove]:773};function Ne(J,Me,De,We,gt,jt,ri,Zr){if(J===hn){v===!0&&(ae(3042),v=!1);return}if(v===!1&&(le(3042),v=!0),J!==Jge){if(J!==y||Zr!==C){if((x!==lm||w!==lm)&&(e.blendEquation(32774),x=lm,w=lm),Zr)switch(J){case tg:e.blendFuncSeparate(1,771,1,771);break;case tz:e.blendFunc(1,1);break;case rz:e.blendFuncSeparate(0,769,0,1);break;case iz:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",J);break}else switch(J){case tg:e.blendFuncSeparate(770,771,1,771);break;case tz:e.blendFunc(770,1);break;case rz:e.blendFuncSeparate(0,769,0,1);break;case iz:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",J);break}b=null,_=null,E=null,S=null,y=J,C=Zr}return}gt=gt||Me,jt=jt||De,ri=ri||We,(Me!==x||gt!==w)&&(e.blendEquationSeparate(xe[Me],xe[gt]),x=Me,w=gt),(De!==b||We!==_||jt!==E||ri!==S)&&(e.blendFuncSeparate(ye[De],ye[We],ye[jt],ye[ri]),b=De,_=We,E=jt,S=ri),y=J,C=!1}function Re(J,Me){J.side===Ys?ae(2884):le(2884);let De=J.side===Vn;Me&&(De=!De),qe(De),J.blending===tg&&J.transparent===!1?Ne(hn):Ne(J.blending,J.blendEquation,J.blendSrc,J.blendDst,J.blendEquationAlpha,J.blendSrcAlpha,J.blendDstAlpha,J.premultipliedAlpha),l.setFunc(J.depthFunc),l.setTest(J.depthTest),l.setMask(J.depthWrite),o.setMask(J.colorWrite);let We=J.stencilWrite;u.setTest(We),We&&(u.setMask(J.stencilWriteMask),u.setFunc(J.stencilFunc,J.stencilRef,J.stencilFuncMask),u.setOp(J.stencilFail,J.stencilZFail,J.stencilZPass)),Be(J.polygonOffset,J.polygonOffsetFactor,J.polygonOffsetUnits),J.alphaToCoverage===!0?le(32926):ae(32926)}function qe(J){M!==J&&(J?e.frontFace(2304):e.frontFace(2305),M=J)}function se(J){J!==Qge?(le(2884),J!==P&&(J===ez?e.cullFace(1029):J===Kge?e.cullFace(1028):e.cullFace(1032))):ae(2884),P=J}function ke(J){J!==I&&(F&&e.lineWidth(J),I=J)}function Be(J,Me,De){J?(le(32823),(k!==Me||L!==De)&&(e.polygonOffset(Me,De),k=Me,L=De)):ae(32823)}function at(J){J?le(3089):ae(3089)}function Ge(J){J===void 0&&(J=33984+O-1),V!==J&&(e.activeTexture(J),V=J)}function $(J,Me,De){De===void 0&&(V===null?De=33984+O-1:De=V);let We=R[De];We===void 0&&(We={type:void 0,texture:void 0},R[De]=We),(We.type!==J||We.texture!==Me)&&(V!==De&&(e.activeTexture(De),V=De),e.bindTexture(J,Me||q[J]),We.type=J,We.texture=Me)}function U(){let J=R[V];J!==void 0&&J.type!==void 0&&(e.bindTexture(J.type,null),J.type=void 0,J.texture=void 0)}function fe(){try{e.compressedTexImage2D.apply(e,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function Te(){try{e.compressedTexImage3D.apply(e,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function Ae(){try{e.texSubImage2D.apply(e,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function Fe(){try{e.texSubImage3D.apply(e,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function et(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function Pe(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function we(){try{e.texStorage2D.apply(e,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function Ze(){try{e.texStorage3D.apply(e,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function Ke(){try{e.texImage2D.apply(e,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function st(){try{e.texImage3D.apply(e,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function xt(J){te.equals(J)===!1&&(e.scissor(J.x,J.y,J.z,J.w),te.copy(J))}function vt(J){G.equals(J)===!1&&(e.viewport(J.x,J.y,J.z,J.w),G.copy(J))}function $t(J,Me){let De=c.get(Me);De===void 0&&(De=new WeakMap,c.set(Me,De));let We=De.get(J);We===void 0&&(We=e.getUniformBlockIndex(Me,J.name),De.set(J,We))}function ar(J,Me){let De=c.get(Me).get(J);h.get(Me)!==De&&(e.uniformBlockBinding(Me,De,J.__bindingPointIndex),h.set(Me,De))}function Or(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),i===!0&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),d={},V=null,R={},f={},m=new WeakMap,p=[],g=null,v=!1,y=null,x=null,b=null,_=null,w=null,E=null,S=null,C=!1,M=null,P=null,I=null,k=null,L=null,te.set(0,0,e.canvas.width,e.canvas.height),G.set(0,0,e.canvas.width,e.canvas.height),o.reset(),l.reset(),u.reset()}return{buffers:{color:o,depth:l,stencil:u},enable:le,disable:ae,bindFramebuffer:Z,drawBuffers:he,useProgram:ge,setBlending:Ne,setMaterial:Re,setFlipSided:qe,setCullFace:se,setLineWidth:ke,setPolygonOffset:Be,setScissorTest:at,activeTexture:Ge,bindTexture:$,unbindTexture:U,compressedTexImage2D:fe,compressedTexImage3D:Te,texImage2D:Ke,texImage3D:st,updateUBOMapping:$t,uniformBlockBinding:ar,texStorage2D:we,texStorage3D:Ze,texSubImage2D:Ae,texSubImage3D:Fe,compressedTexSubImage2D:et,compressedTexSubImage3D:Pe,scissor:xt,viewport:vt,reset:Or}}function $be(e,t,r,i,n,a,s){let o=n.isWebGL2,l=n.maxTextures,u=n.maxCubemapSize,h=n.maxTextureSize,c=n.maxSamples,d=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,f=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),m=new WeakMap,p,g=new WeakMap,v=!1;try{v=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function y($,U){return v?new OffscreenCanvas($,U):hS("canvas")}function x($,U,fe,Te){let Ae=1;if(($.width>Te||$.height>Te)&&(Ae=Te/Math.max($.width,$.height)),Ae<1||U===!0)if(typeof HTMLImageElement<"u"&&$ instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&$ instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&$ instanceof ImageBitmap){let Fe=U?cS:Math.floor,et=Fe(Ae*$.width),Pe=Fe(Ae*$.height);p===void 0&&(p=y(et,Pe));let we=fe?y(et,Pe):p;return we.width=et,we.height=Pe,we.getContext("2d").drawImage($,0,0,et,Pe),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+$.width+"x"+$.height+") to ("+et+"x"+Pe+")."),we}else return"data"in $&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+$.width+"x"+$.height+")."),$;return $}function b($){return hD($.width)&&hD($.height)}function _($){return o?!1:$.wrapS!==$i||$.wrapT!==$i||$.minFilter!==si&&$.minFilter!==Kt}function w($,U){return $.generateMipmaps&&U&&$.minFilter!==si&&$.minFilter!==Kt}function E($){e.generateMipmap($)}function S($,U,fe,Te,Ae=!1){if(o===!1)return U;if($!==null){if(e[$]!==void 0)return e[$];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+$+"'")}let Fe=U;return U===6403&&(fe===5126&&(Fe=33326),fe===5131&&(Fe=33325),fe===5121&&(Fe=33321)),U===33319&&(fe===5126&&(Fe=33328),fe===5131&&(Fe=33327),fe===5121&&(Fe=33323)),U===6408&&(fe===5126&&(Fe=34836),fe===5131&&(Fe=34842),fe===5121&&(Fe=Te===Ht&&Ae===!1?35907:32856),fe===32819&&(Fe=32854),fe===32820&&(Fe=32855)),(Fe===33325||Fe===33326||Fe===33327||Fe===33328||Fe===34842||Fe===34836)&&t.get("EXT_color_buffer_float"),Fe}function C($,U,fe){return w($,fe)===!0||$.isFramebufferTexture&&$.minFilter!==si&&$.minFilter!==Kt?Math.log2(Math.max(U.width,U.height))+1:$.mipmaps!==void 0&&$.mipmaps.length>0?$.mipmaps.length:$.isCompressedTexture&&Array.isArray($.image)?U.mipmaps.length:1}function M($){return $===si||$===sz||$===_C?9728:9729}function P($){let U=$.target;U.removeEventListener("dispose",P),k(U),U.isVideoTexture&&m.delete(U)}function I($){let U=$.target;U.removeEventListener("dispose",I),O(U)}function k($){let U=i.get($);if(U.__webglInit===void 0)return;let fe=$.source,Te=g.get(fe);if(Te){let Ae=Te[U.__cacheKey];Ae.usedTimes--,Ae.usedTimes===0&&L($),Object.keys(Te).length===0&&g.delete(fe)}i.remove($)}function L($){let U=i.get($);e.deleteTexture(U.__webglTexture);let fe=$.source,Te=g.get(fe);delete Te[U.__cacheKey],s.memory.textures--}function O($){let U=$.texture,fe=i.get($),Te=i.get(U);if(Te.__webglTexture!==void 0&&(e.deleteTexture(Te.__webglTexture),s.memory.textures--),$.depthTexture&&$.depthTexture.dispose(),$.isWebGLCubeRenderTarget)for(let Ae=0;Ae<6;Ae++)e.deleteFramebuffer(fe.__webglFramebuffer[Ae]),fe.__webglDepthbuffer&&e.deleteRenderbuffer(fe.__webglDepthbuffer[Ae]);else{if(e.deleteFramebuffer(fe.__webglFramebuffer),fe.__webglDepthbuffer&&e.deleteRenderbuffer(fe.__webglDepthbuffer),fe.__webglMultisampledFramebuffer&&e.deleteFramebuffer(fe.__webglMultisampledFramebuffer),fe.__webglColorRenderbuffer)for(let Ae=0;Ae<fe.__webglColorRenderbuffer.length;Ae++)fe.__webglColorRenderbuffer[Ae]&&e.deleteRenderbuffer(fe.__webglColorRenderbuffer[Ae]);fe.__webglDepthRenderbuffer&&e.deleteRenderbuffer(fe.__webglDepthRenderbuffer)}if($.isWebGLMultipleRenderTargets)for(let Ae=0,Fe=U.length;Ae<Fe;Ae++){let et=i.get(U[Ae]);et.__webglTexture&&(e.deleteTexture(et.__webglTexture),s.memory.textures--),i.remove(U[Ae])}i.remove(U),i.remove($)}let F=0;function z(){F=0}function B(){let $=F;return $>=l&&console.warn("THREE.WebGLTextures: Trying to use "+$+" texture units while this GPU supports only "+l),F+=1,$}function V($){let U=[];return U.push($.wrapS),U.push($.wrapT),U.push($.wrapR||0),U.push($.magFilter),U.push($.minFilter),U.push($.anisotropy),U.push($.internalFormat),U.push($.format),U.push($.type),U.push($.generateMipmaps),U.push($.premultiplyAlpha),U.push($.flipY),U.push($.unpackAlignment),U.push($.encoding),U.join()}function R($,U){let fe=i.get($);if($.isVideoTexture&&at($),$.isRenderTargetTexture===!1&&$.version>0&&fe.__version!==$.version){let Te=$.image;if(Te===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Te.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ae(fe,$,U);return}}r.bindTexture(3553,fe.__webglTexture,33984+U)}function H($,U){let fe=i.get($);if($.version>0&&fe.__version!==$.version){ae(fe,$,U);return}r.bindTexture(35866,fe.__webglTexture,33984+U)}function W($,U){let fe=i.get($);if($.version>0&&fe.__version!==$.version){ae(fe,$,U);return}r.bindTexture(32879,fe.__webglTexture,33984+U)}function te($,U){let fe=i.get($);if($.version>0&&fe.__version!==$.version){Z(fe,$,U);return}r.bindTexture(34067,fe.__webglTexture,33984+U)}let G={[hc]:10497,[$i]:33071,[lD]:33648},ie={[si]:9728,[sz]:9984,[_C]:9986,[Kt]:9729,[Mve]:9985,[Bg]:9987};function q($,U,fe){if(fe?(e.texParameteri($,10242,G[U.wrapS]),e.texParameteri($,10243,G[U.wrapT]),($===32879||$===35866)&&e.texParameteri($,32882,G[U.wrapR]),e.texParameteri($,10240,ie[U.magFilter]),e.texParameteri($,10241,ie[U.minFilter])):(e.texParameteri($,10242,33071),e.texParameteri($,10243,33071),($===32879||$===35866)&&e.texParameteri($,32882,33071),(U.wrapS!==$i||U.wrapT!==$i)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri($,10240,M(U.magFilter)),e.texParameteri($,10241,M(U.minFilter)),U.minFilter!==si&&U.minFilter!==Kt&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),t.has("EXT_texture_filter_anisotropic")===!0){let Te=t.get("EXT_texture_filter_anisotropic");if(U.magFilter===si||U.minFilter!==_C&&U.minFilter!==Bg||U.type===qs&&t.has("OES_texture_float_linear")===!1||o===!1&&U.type===Ng&&t.has("OES_texture_half_float_linear")===!1)return;(U.anisotropy>1||i.get(U).__currentAnisotropy)&&(e.texParameterf($,Te.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(U.anisotropy,n.getMaxAnisotropy())),i.get(U).__currentAnisotropy=U.anisotropy)}}function le($,U){let fe=!1;$.__webglInit===void 0&&($.__webglInit=!0,U.addEventListener("dispose",P));let Te=U.source,Ae=g.get(Te);Ae===void 0&&(Ae={},g.set(Te,Ae));let Fe=V(U);if(Fe!==$.__cacheKey){Ae[Fe]===void 0&&(Ae[Fe]={texture:e.createTexture(),usedTimes:0},s.memory.textures++,fe=!0),Ae[Fe].usedTimes++;let et=Ae[$.__cacheKey];et!==void 0&&(Ae[$.__cacheKey].usedTimes--,et.usedTimes===0&&L(U)),$.__cacheKey=Fe,$.__webglTexture=Ae[Fe].texture}return fe}function ae($,U,fe){let Te=3553;(U.isDataArrayTexture||U.isCompressedArrayTexture)&&(Te=35866),U.isData3DTexture&&(Te=32879);let Ae=le($,U),Fe=U.source;r.bindTexture(Te,$.__webglTexture,33984+fe);let et=i.get(Fe);if(Fe.version!==et.__version||Ae===!0){r.activeTexture(33984+fe),e.pixelStorei(37440,U.flipY),e.pixelStorei(37441,U.premultiplyAlpha),e.pixelStorei(3317,U.unpackAlignment),e.pixelStorei(37443,0);let Pe=_(U)&&b(U.image)===!1,we=x(U.image,Pe,!1,h);we=Ge(U,we);let Ze=b(we)||o,Ke=a.convert(U.format,U.encoding),st=a.convert(U.type),xt=S(U.internalFormat,Ke,st,U.encoding,U.isVideoTexture);q(Te,U,Ze);let vt,$t=U.mipmaps,ar=o&&U.isVideoTexture!==!0,Or=et.__version===void 0||Ae===!0,J=C(U,we,Ze);if(U.isDepthTexture)xt=6402,o?U.type===qs?xt=36012:U.type===_h?xt=33190:U.type===xf?xt=35056:xt=33189:U.type===qs&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),U.format===bf&&xt===6402&&U.type!==a7&&U.type!==_h&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),U.type=_h,st=a.convert(U.type)),U.format===jf&&xt===6402&&(xt=34041,U.type!==xf&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),U.type=xf,st=a.convert(U.type))),Or&&(ar?r.texStorage2D(3553,1,xt,we.width,we.height):r.texImage2D(3553,0,xt,we.width,we.height,0,Ke,st,null));else if(U.isDataTexture)if($t.length>0&&Ze){ar&&Or&&r.texStorage2D(3553,J,xt,$t[0].width,$t[0].height);for(let Me=0,De=$t.length;Me<De;Me++)vt=$t[Me],ar?r.texSubImage2D(3553,Me,0,0,vt.width,vt.height,Ke,st,vt.data):r.texImage2D(3553,Me,xt,vt.width,vt.height,0,Ke,st,vt.data);U.generateMipmaps=!1}else ar?(Or&&r.texStorage2D(3553,J,xt,we.width,we.height),r.texSubImage2D(3553,0,0,0,we.width,we.height,Ke,st,we.data)):r.texImage2D(3553,0,xt,we.width,we.height,0,Ke,st,we.data);else if(U.isCompressedTexture)if(U.isCompressedArrayTexture){ar&&Or&&r.texStorage3D(35866,J,xt,$t[0].width,$t[0].height,we.depth);for(let Me=0,De=$t.length;Me<De;Me++)vt=$t[Me],U.format!==Co?Ke!==null?ar?r.compressedTexSubImage3D(35866,Me,0,0,0,vt.width,vt.height,we.depth,Ke,vt.data,0,0):r.compressedTexImage3D(35866,Me,xt,vt.width,vt.height,we.depth,0,vt.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ar?r.texSubImage3D(35866,Me,0,0,0,vt.width,vt.height,we.depth,Ke,st,vt.data):r.texImage3D(35866,Me,xt,vt.width,vt.height,we.depth,0,Ke,st,vt.data)}else{ar&&Or&&r.texStorage2D(3553,J,xt,$t[0].width,$t[0].height);for(let Me=0,De=$t.length;Me<De;Me++)vt=$t[Me],U.format!==Co?Ke!==null?ar?r.compressedTexSubImage2D(3553,Me,0,0,vt.width,vt.height,Ke,vt.data):r.compressedTexImage2D(3553,Me,xt,vt.width,vt.height,0,vt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ar?r.texSubImage2D(3553,Me,0,0,vt.width,vt.height,Ke,st,vt.data):r.texImage2D(3553,Me,xt,vt.width,vt.height,0,Ke,st,vt.data)}else if(U.isDataArrayTexture)ar?(Or&&r.texStorage3D(35866,J,xt,we.width,we.height,we.depth),r.texSubImage3D(35866,0,0,0,0,we.width,we.height,we.depth,Ke,st,we.data)):r.texImage3D(35866,0,xt,we.width,we.height,we.depth,0,Ke,st,we.data);else if(U.isData3DTexture)ar?(Or&&r.texStorage3D(32879,J,xt,we.width,we.height,we.depth),r.texSubImage3D(32879,0,0,0,0,we.width,we.height,we.depth,Ke,st,we.data)):r.texImage3D(32879,0,xt,we.width,we.height,we.depth,0,Ke,st,we.data);else if(U.isFramebufferTexture){if(Or)if(ar)r.texStorage2D(3553,J,xt,we.width,we.height);else{let Me=we.width,De=we.height;for(let We=0;We<J;We++)r.texImage2D(3553,We,xt,Me,De,0,Ke,st,null),Me>>=1,De>>=1}}else if($t.length>0&&Ze){ar&&Or&&r.texStorage2D(3553,J,xt,$t[0].width,$t[0].height);for(let Me=0,De=$t.length;Me<De;Me++)vt=$t[Me],ar?r.texSubImage2D(3553,Me,0,0,Ke,st,vt):r.texImage2D(3553,Me,xt,Ke,st,vt);U.generateMipmaps=!1}else ar?(Or&&r.texStorage2D(3553,J,xt,we.width,we.height),r.texSubImage2D(3553,0,0,0,Ke,st,we)):r.texImage2D(3553,0,xt,Ke,st,we);w(U,Ze)&&E(Te),et.__version=Fe.version,U.onUpdate&&U.onUpdate(U)}$.__version=U.version}function Z($,U,fe){if(U.image.length!==6)return;let Te=le($,U),Ae=U.source;r.bindTexture(34067,$.__webglTexture,33984+fe);let Fe=i.get(Ae);if(Ae.version!==Fe.__version||Te===!0){r.activeTexture(33984+fe),e.pixelStorei(37440,U.flipY),e.pixelStorei(37441,U.premultiplyAlpha),e.pixelStorei(3317,U.unpackAlignment),e.pixelStorei(37443,0);let et=U.isCompressedTexture||U.image[0].isCompressedTexture,Pe=U.image[0]&&U.image[0].isDataTexture,we=[];for(let Me=0;Me<6;Me++)!et&&!Pe?we[Me]=x(U.image[Me],!1,!0,u):we[Me]=Pe?U.image[Me].image:U.image[Me],we[Me]=Ge(U,we[Me]);let Ze=we[0],Ke=b(Ze)||o,st=a.convert(U.format,U.encoding),xt=a.convert(U.type),vt=S(U.internalFormat,st,xt,U.encoding),$t=o&&U.isVideoTexture!==!0,ar=Fe.__version===void 0||Te===!0,Or=C(U,Ze,Ke);q(34067,U,Ke);let J;if(et){$t&&ar&&r.texStorage2D(34067,Or,vt,Ze.width,Ze.height);for(let Me=0;Me<6;Me++){J=we[Me].mipmaps;for(let De=0;De<J.length;De++){let We=J[De];U.format!==Co?st!==null?$t?r.compressedTexSubImage2D(34069+Me,De,0,0,We.width,We.height,st,We.data):r.compressedTexImage2D(34069+Me,De,vt,We.width,We.height,0,We.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):$t?r.texSubImage2D(34069+Me,De,0,0,We.width,We.height,st,xt,We.data):r.texImage2D(34069+Me,De,vt,We.width,We.height,0,st,xt,We.data)}}}else{J=U.mipmaps,$t&&ar&&(J.length>0&&Or++,r.texStorage2D(34067,Or,vt,we[0].width,we[0].height));for(let Me=0;Me<6;Me++)if(Pe){$t?r.texSubImage2D(34069+Me,0,0,0,we[Me].width,we[Me].height,st,xt,we[Me].data):r.texImage2D(34069+Me,0,vt,we[Me].width,we[Me].height,0,st,xt,we[Me].data);for(let De=0;De<J.length;De++){let We=J[De].image[Me].image;$t?r.texSubImage2D(34069+Me,De+1,0,0,We.width,We.height,st,xt,We.data):r.texImage2D(34069+Me,De+1,vt,We.width,We.height,0,st,xt,We.data)}}else{$t?r.texSubImage2D(34069+Me,0,0,0,st,xt,we[Me]):r.texImage2D(34069+Me,0,vt,st,xt,we[Me]);for(let De=0;De<J.length;De++){let We=J[De];$t?r.texSubImage2D(34069+Me,De+1,0,0,st,xt,We.image[Me]):r.texImage2D(34069+Me,De+1,vt,st,xt,We.image[Me])}}}w(U,Ke)&&E(34067),Fe.__version=Ae.version,U.onUpdate&&U.onUpdate(U)}$.__version=U.version}function he($,U,fe,Te,Ae){let Fe=a.convert(fe.format,fe.encoding),et=a.convert(fe.type),Pe=S(fe.internalFormat,Fe,et,fe.encoding);i.get(U).__hasExternalTextures||(Ae===32879||Ae===35866?r.texImage3D(Ae,0,Pe,U.width,U.height,U.depth,0,Fe,et,null):r.texImage2D(Ae,0,Pe,U.width,U.height,0,Fe,et,null)),r.bindFramebuffer(36160,$),Be(U)?d.framebufferTexture2DMultisampleEXT(36160,Te,Ae,i.get(fe).__webglTexture,0,ke(U)):(Ae===3553||Ae>=34069&&Ae<=34074)&&e.framebufferTexture2D(36160,Te,Ae,i.get(fe).__webglTexture,0),r.bindFramebuffer(36160,null)}function ge($,U,fe){if(e.bindRenderbuffer(36161,$),U.depthBuffer&&!U.stencilBuffer){let Te=33189;if(fe||Be(U)){let Ae=U.depthTexture;Ae&&Ae.isDepthTexture&&(Ae.type===qs?Te=36012:Ae.type===_h&&(Te=33190));let Fe=ke(U);Be(U)?d.renderbufferStorageMultisampleEXT(36161,Fe,Te,U.width,U.height):e.renderbufferStorageMultisample(36161,Fe,Te,U.width,U.height)}else e.renderbufferStorage(36161,Te,U.width,U.height);e.framebufferRenderbuffer(36160,36096,36161,$)}else if(U.depthBuffer&&U.stencilBuffer){let Te=ke(U);fe&&Be(U)===!1?e.renderbufferStorageMultisample(36161,Te,35056,U.width,U.height):Be(U)?d.renderbufferStorageMultisampleEXT(36161,Te,35056,U.width,U.height):e.renderbufferStorage(36161,34041,U.width,U.height),e.framebufferRenderbuffer(36160,33306,36161,$)}else{let Te=U.isWebGLMultipleRenderTargets===!0?U.texture:[U.texture];for(let Ae=0;Ae<Te.length;Ae++){let Fe=Te[Ae],et=a.convert(Fe.format,Fe.encoding),Pe=a.convert(Fe.type),we=S(Fe.internalFormat,et,Pe,Fe.encoding),Ze=ke(U);fe&&Be(U)===!1?e.renderbufferStorageMultisample(36161,Ze,we,U.width,U.height):Be(U)?d.renderbufferStorageMultisampleEXT(36161,Ze,we,U.width,U.height):e.renderbufferStorage(36161,we,U.width,U.height)}}e.bindRenderbuffer(36161,null)}function xe($,U){if(U&&U.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(r.bindFramebuffer(36160,$),!(U.depthTexture&&U.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(U.depthTexture).__webglTexture||U.depthTexture.image.width!==U.width||U.depthTexture.image.height!==U.height)&&(U.depthTexture.image.width=U.width,U.depthTexture.image.height=U.height,U.depthTexture.needsUpdate=!0),R(U.depthTexture,0);let fe=i.get(U.depthTexture).__webglTexture,Te=ke(U);if(U.depthTexture.format===bf)Be(U)?d.framebufferTexture2DMultisampleEXT(36160,36096,3553,fe,0,Te):e.framebufferTexture2D(36160,36096,3553,fe,0);else if(U.depthTexture.format===jf)Be(U)?d.framebufferTexture2DMultisampleEXT(36160,33306,3553,fe,0,Te):e.framebufferTexture2D(36160,33306,3553,fe,0);else throw new Error("Unknown depthTexture format")}function ye($){let U=i.get($),fe=$.isWebGLCubeRenderTarget===!0;if($.depthTexture&&!U.__autoAllocateDepthBuffer){if(fe)throw new Error("target.depthTexture not supported in Cube render targets");xe(U.__webglFramebuffer,$)}else if(fe){U.__webglDepthbuffer=[];for(let Te=0;Te<6;Te++)r.bindFramebuffer(36160,U.__webglFramebuffer[Te]),U.__webglDepthbuffer[Te]=e.createRenderbuffer(),ge(U.__webglDepthbuffer[Te],$,!1)}else r.bindFramebuffer(36160,U.__webglFramebuffer),U.__webglDepthbuffer=e.createRenderbuffer(),ge(U.__webglDepthbuffer,$,!1);r.bindFramebuffer(36160,null)}function Ne($,U,fe){let Te=i.get($);U!==void 0&&he(Te.__webglFramebuffer,$,$.texture,36064,3553),fe!==void 0&&ye($)}function Re($){let U=$.texture,fe=i.get($),Te=i.get(U);$.addEventListener("dispose",I),$.isWebGLMultipleRenderTargets!==!0&&(Te.__webglTexture===void 0&&(Te.__webglTexture=e.createTexture()),Te.__version=U.version,s.memory.textures++);let Ae=$.isWebGLCubeRenderTarget===!0,Fe=$.isWebGLMultipleRenderTargets===!0,et=b($)||o;if(Ae){fe.__webglFramebuffer=[];for(let Pe=0;Pe<6;Pe++)fe.__webglFramebuffer[Pe]=e.createFramebuffer()}else{if(fe.__webglFramebuffer=e.createFramebuffer(),Fe)if(n.drawBuffers){let Pe=$.texture;for(let we=0,Ze=Pe.length;we<Ze;we++){let Ke=i.get(Pe[we]);Ke.__webglTexture===void 0&&(Ke.__webglTexture=e.createTexture(),s.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(o&&$.samples>0&&Be($)===!1){let Pe=Fe?U:[U];fe.__webglMultisampledFramebuffer=e.createFramebuffer(),fe.__webglColorRenderbuffer=[],r.bindFramebuffer(36160,fe.__webglMultisampledFramebuffer);for(let we=0;we<Pe.length;we++){let Ze=Pe[we];fe.__webglColorRenderbuffer[we]=e.createRenderbuffer(),e.bindRenderbuffer(36161,fe.__webglColorRenderbuffer[we]);let Ke=a.convert(Ze.format,Ze.encoding),st=a.convert(Ze.type),xt=S(Ze.internalFormat,Ke,st,Ze.encoding,$.isXRRenderTarget===!0),vt=ke($);e.renderbufferStorageMultisample(36161,vt,xt,$.width,$.height),e.framebufferRenderbuffer(36160,36064+we,36161,fe.__webglColorRenderbuffer[we])}e.bindRenderbuffer(36161,null),$.depthBuffer&&(fe.__webglDepthRenderbuffer=e.createRenderbuffer(),ge(fe.__webglDepthRenderbuffer,$,!0)),r.bindFramebuffer(36160,null)}}if(Ae){r.bindTexture(34067,Te.__webglTexture),q(34067,U,et);for(let Pe=0;Pe<6;Pe++)he(fe.__webglFramebuffer[Pe],$,U,36064,34069+Pe);w(U,et)&&E(34067),r.unbindTexture()}else if(Fe){let Pe=$.texture;for(let we=0,Ze=Pe.length;we<Ze;we++){let Ke=Pe[we],st=i.get(Ke);r.bindTexture(3553,st.__webglTexture),q(3553,Ke,et),he(fe.__webglFramebuffer,$,Ke,36064+we,3553),w(Ke,et)&&E(3553)}r.unbindTexture()}else{let Pe=3553;($.isWebGL3DRenderTarget||$.isWebGLArrayRenderTarget)&&(o?Pe=$.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),r.bindTexture(Pe,Te.__webglTexture),q(Pe,U,et),he(fe.__webglFramebuffer,$,U,36064,Pe),w(U,et)&&E(Pe),r.unbindTexture()}$.depthBuffer&&ye($)}function qe($){let U=b($)||o,fe=$.isWebGLMultipleRenderTargets===!0?$.texture:[$.texture];for(let Te=0,Ae=fe.length;Te<Ae;Te++){let Fe=fe[Te];if(w(Fe,U)){let et=$.isWebGLCubeRenderTarget?34067:3553,Pe=i.get(Fe).__webglTexture;r.bindTexture(et,Pe),E(et),r.unbindTexture()}}}function se($){if(o&&$.samples>0&&Be($)===!1){let U=$.isWebGLMultipleRenderTargets?$.texture:[$.texture],fe=$.width,Te=$.height,Ae=16384,Fe=[],et=$.stencilBuffer?33306:36096,Pe=i.get($),we=$.isWebGLMultipleRenderTargets===!0;if(we)for(let Ze=0;Ze<U.length;Ze++)r.bindFramebuffer(36160,Pe.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+Ze,36161,null),r.bindFramebuffer(36160,Pe.__webglFramebuffer),e.framebufferTexture2D(36009,36064+Ze,3553,null,0);r.bindFramebuffer(36008,Pe.__webglMultisampledFramebuffer),r.bindFramebuffer(36009,Pe.__webglFramebuffer);for(let Ze=0;Ze<U.length;Ze++){Fe.push(36064+Ze),$.depthBuffer&&Fe.push(et);let Ke=Pe.__ignoreDepthValues!==void 0?Pe.__ignoreDepthValues:!1;if(Ke===!1&&($.depthBuffer&&(Ae|=256),$.stencilBuffer&&(Ae|=1024)),we&&e.framebufferRenderbuffer(36008,36064,36161,Pe.__webglColorRenderbuffer[Ze]),Ke===!0&&(e.invalidateFramebuffer(36008,[et]),e.invalidateFramebuffer(36009,[et])),we){let st=i.get(U[Ze]).__webglTexture;e.framebufferTexture2D(36009,36064,3553,st,0)}e.blitFramebuffer(0,0,fe,Te,0,0,fe,Te,Ae,9728),f&&e.invalidateFramebuffer(36008,Fe)}if(r.bindFramebuffer(36008,null),r.bindFramebuffer(36009,null),we)for(let Ze=0;Ze<U.length;Ze++){r.bindFramebuffer(36160,Pe.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+Ze,36161,Pe.__webglColorRenderbuffer[Ze]);let Ke=i.get(U[Ze]).__webglTexture;r.bindFramebuffer(36160,Pe.__webglFramebuffer),e.framebufferTexture2D(36009,36064+Ze,3553,Ke,0)}r.bindFramebuffer(36009,Pe.__webglMultisampledFramebuffer)}}function ke($){return Math.min(c,$.samples)}function Be($){let U=i.get($);return o&&$.samples>0&&t.has("WEBGL_multisampled_render_to_texture")===!0&&U.__useRenderToTexture!==!1}function at($){let U=s.render.frame;m.get($)!==U&&(m.set($,U),$.update())}function Ge($,U){let fe=$.encoding,Te=$.format,Ae=$.type;return $.isCompressedTexture===!0||$.isVideoTexture===!0||$.format===cD||fe!==Su&&(fe===Ht?o===!1?t.has("EXT_sRGB")===!0&&Te===Co?($.format=cD,$.minFilter=Kt,$.generateMipmaps=!1):U=f7.sRGBToLinear(U):(Te!==Co||Ae!==Ea)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",fe)),U}this.allocateTextureUnit=B,this.resetTextureUnits=z,this.setTexture2D=R,this.setTexture2DArray=H,this.setTexture3D=W,this.setTextureCube=te,this.rebindTextures=Ne,this.setupRenderTarget=Re,this.updateRenderTargetMipmap=qe,this.updateMultisampleRenderTarget=se,this.setupDepthRenderbuffer=ye,this.setupFrameBufferTexture=he,this.useMultisampledRTT=Be}function Ybe(e,t,r){let i=r.isWebGL2;function n(a,s=null){let o;if(a===Ea)return 5121;if(a===Pve)return 32819;if(a===Dve)return 32820;if(a===Cve)return 5120;if(a===Ave)return 5122;if(a===a7)return 5123;if(a===Tve)return 5124;if(a===_h)return 5125;if(a===qs)return 5126;if(a===Ng)return i?5131:(o=t.get("OES_texture_half_float"),o!==null?o.HALF_FLOAT_OES:null);if(a===Ove)return 6406;if(a===Co)return 6408;if(a===Ive)return 6409;if(a===Rve)return 6410;if(a===bf)return 6402;if(a===jf)return 34041;if(a===cD)return o=t.get("EXT_sRGB"),o!==null?o.SRGB_ALPHA_EXT:null;if(a===kve)return 6403;if(a===Lve)return 36244;if(a===s7)return 33319;if(a===Bve)return 33320;if(a===Nve)return 36249;if(a===SC||a===EC||a===MC||a===CC)if(s===Ht)if(o=t.get("WEBGL_compressed_texture_s3tc_srgb"),o!==null){if(a===SC)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(a===EC)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(a===MC)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(a===CC)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(o=t.get("WEBGL_compressed_texture_s3tc"),o!==null){if(a===SC)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(a===EC)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(a===MC)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(a===CC)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(a===oz||a===lz||a===uz||a===cz)if(o=t.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(a===oz)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(a===lz)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(a===uz)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(a===cz)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(a===zve)return o=t.get("WEBGL_compressed_texture_etc1"),o!==null?o.COMPRESSED_RGB_ETC1_WEBGL:null;if(a===hz||a===dz)if(o=t.get("WEBGL_compressed_texture_etc"),o!==null){if(a===hz)return s===Ht?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(a===dz)return s===Ht?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(a===fz||a===pz||a===mz||a===gz||a===vz||a===yz||a===xz||a===bz||a===wz||a===_z||a===Sz||a===Ez||a===Mz||a===Cz)if(o=t.get("WEBGL_compressed_texture_astc"),o!==null){if(a===fz)return s===Ht?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(a===pz)return s===Ht?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(a===mz)return s===Ht?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(a===gz)return s===Ht?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(a===vz)return s===Ht?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(a===yz)return s===Ht?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(a===xz)return s===Ht?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(a===bz)return s===Ht?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(a===wz)return s===Ht?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(a===_z)return s===Ht?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(a===Sz)return s===Ht?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(a===Ez)return s===Ht?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(a===Mz)return s===Ht?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(a===Cz)return s===Ht?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(a===AC)if(o=t.get("EXT_texture_compression_bptc"),o!==null){if(a===AC)return s===Ht?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(a===Fve||a===Az||a===Tz||a===Pz)if(o=t.get("EXT_texture_compression_rgtc"),o!==null){if(a===AC)return o.COMPRESSED_RED_RGTC1_EXT;if(a===Az)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(a===Tz)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(a===Pz)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return a===xf?i?34042:(o=t.get("WEBGL_depth_texture"),o!==null?o.UNSIGNED_INT_24_8_WEBGL:null):e[a]!==void 0?e[a]:null}return{convert:n}}var qbe=class extends ma{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}},Rm=class extends Xr{constructor(){super(),this.isGroup=!0,this.type="Group"}},Xbe={type:"move"},JC=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Rm,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Rm,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new T,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new T),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Rm,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new T,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new T),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){let t=this._hand;if(t)for(let r of e.hand.values())this._getHandJoint(t,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let i=null,n=null,a=null,s=this._targetRay,o=this._grip,l=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(l&&e.hand){a=!0;for(let m of e.hand.values()){let p=t.getJointPose(m,r),g=this._getHandJoint(l,m);p!==null&&(g.matrix.fromArray(p.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.jointRadius=p.radius),g.visible=p!==null}let u=l.joints["index-finger-tip"],h=l.joints["thumb-tip"],c=u.position.distanceTo(h.position),d=.02,f=.005;l.inputState.pinching&&c>d+f?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&c<=d-f&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else o!==null&&e.gripSpace&&(n=t.getPose(e.gripSpace,r),n!==null&&(o.matrix.fromArray(n.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),n.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(n.linearVelocity)):o.hasLinearVelocity=!1,n.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(n.angularVelocity)):o.hasAngularVelocity=!1));s!==null&&(i=t.getPose(e.targetRaySpace,r),i===null&&n!==null&&(i=n),i!==null&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1,this.dispatchEvent(Xbe)))}return s!==null&&(s.visible=i!==null),o!==null&&(o.visible=n!==null),l!==null&&(l.visible=a!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){let r=new Rm;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[t.jointName]=r,e.add(r)}return e.joints[t.jointName]}},Fg=class extends Mn{constructor(e,t,r,i,n,a,s,o,l,u){if(u=u!==void 0?u:bf,u!==bf&&u!==jf)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&u===bf&&(r=_h),r===void 0&&u===jf&&(r=xf),super(null,i,n,a,s,o,u,r,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=s!==void 0?s:si,this.minFilter=o!==void 0?o:si,this.flipY=!1,this.generateMipmaps=!1}},Qbe=class extends sa{constructor(e,t){super();let r=this,i=null,n=1,a=null,s="local-floor",o=1,l=null,u=null,h=null,c=null,d=null,f=null,m=t.getContextAttributes(),p=null,g=null,v=[],y=[],x=new Set,b=new Map,_=new ma;_.layers.enable(1),_.viewport=new Wt;let w=new ma;w.layers.enable(2),w.viewport=new Wt;let E=[_,w],S=new qbe;S.layers.enable(1),S.layers.enable(2);let C=null,M=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(H){let W=v[H];return W===void 0&&(W=new JC,v[H]=W),W.getTargetRaySpace()},this.getControllerGrip=function(H){let W=v[H];return W===void 0&&(W=new JC,v[H]=W),W.getGripSpace()},this.getHand=function(H){let W=v[H];return W===void 0&&(W=new JC,v[H]=W),W.getHandSpace()};function P(H){let W=y.indexOf(H.inputSource);if(W===-1)return;let te=v[W];te!==void 0&&te.dispatchEvent({type:H.type,data:H.inputSource})}function I(){i.removeEventListener("select",P),i.removeEventListener("selectstart",P),i.removeEventListener("selectend",P),i.removeEventListener("squeeze",P),i.removeEventListener("squeezestart",P),i.removeEventListener("squeezeend",P),i.removeEventListener("end",I),i.removeEventListener("inputsourceschange",k);for(let H=0;H<v.length;H++){let W=y[H];W!==null&&(y[H]=null,v[H].disconnect(W))}C=null,M=null,e.setRenderTarget(p),d=null,c=null,h=null,i=null,g=null,R.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(H){n=H,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(H){s=H,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||a},this.setReferenceSpace=function(H){l=H},this.getBaseLayer=function(){return c!==null?c:d},this.getBinding=function(){return h},this.getFrame=function(){return f},this.getSession=function(){return i},this.setSession=async function(H){if(i=H,i!==null){if(p=e.getRenderTarget(),i.addEventListener("select",P),i.addEventListener("selectstart",P),i.addEventListener("selectend",P),i.addEventListener("squeeze",P),i.addEventListener("squeezestart",P),i.addEventListener("squeezeend",P),i.addEventListener("end",I),i.addEventListener("inputsourceschange",k),m.xrCompatible!==!0&&await t.makeXRCompatible(),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){let W={antialias:i.renderState.layers===void 0?m.antialias:!0,alpha:m.alpha,depth:m.depth,stencil:m.stencil,framebufferScaleFactor:n};d=new XRWebGLLayer(i,t,W),i.updateRenderState({baseLayer:d}),g=new Yr(d.framebufferWidth,d.framebufferHeight,{format:Co,type:Ea,encoding:e.outputEncoding,stencilBuffer:m.stencil})}else{let W=null,te=null,G=null;m.depth&&(G=m.stencil?35056:33190,W=m.stencil?jf:bf,te=m.stencil?xf:_h);let ie={colorFormat:32856,depthFormat:G,scaleFactor:n};h=new XRWebGLBinding(i,t),c=h.createProjectionLayer(ie),i.updateRenderState({layers:[c]}),g=new Yr(c.textureWidth,c.textureHeight,{format:Co,type:Ea,depthTexture:new Fg(c.textureWidth,c.textureHeight,te,void 0,void 0,void 0,void 0,void 0,void 0,W),stencilBuffer:m.stencil,encoding:e.outputEncoding,samples:m.antialias?4:0});let q=e.properties.get(g);q.__ignoreDepthValues=c.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(o),l=null,a=await i.requestReferenceSpace(s),R.setContext(i),R.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}};function k(H){for(let W=0;W<H.removed.length;W++){let te=H.removed[W],G=y.indexOf(te);G>=0&&(y[G]=null,v[G].disconnect(te))}for(let W=0;W<H.added.length;W++){let te=H.added[W],G=y.indexOf(te);if(G===-1){for(let q=0;q<v.length;q++)if(q>=y.length){y.push(te),G=q;break}else if(y[q]===null){y[q]=te,G=q;break}if(G===-1)break}let ie=v[G];ie&&ie.connect(te)}}let L=new T,O=new T;function F(H,W,te){L.setFromMatrixPosition(W.matrixWorld),O.setFromMatrixPosition(te.matrixWorld);let G=L.distanceTo(O),ie=W.projectionMatrix.elements,q=te.projectionMatrix.elements,le=ie[14]/(ie[10]-1),ae=ie[14]/(ie[10]+1),Z=(ie[9]+1)/ie[5],he=(ie[9]-1)/ie[5],ge=(ie[8]-1)/ie[0],xe=(q[8]+1)/q[0],ye=le*ge,Ne=le*xe,Re=G/(-ge+xe),qe=Re*-ge;W.matrixWorld.decompose(H.position,H.quaternion,H.scale),H.translateX(qe),H.translateZ(Re),H.matrixWorld.compose(H.position,H.quaternion,H.scale),H.matrixWorldInverse.copy(H.matrixWorld).invert();let se=le+Re,ke=ae+Re,Be=ye-qe,at=Ne+(G-qe),Ge=Z*ae/ke*se,$=he*ae/ke*se;H.projectionMatrix.makePerspective(Be,at,Ge,$,se,ke)}function z(H,W){W===null?H.matrixWorld.copy(H.matrix):H.matrixWorld.multiplyMatrices(W.matrixWorld,H.matrix),H.matrixWorldInverse.copy(H.matrixWorld).invert()}this.updateCamera=function(H){if(i===null)return;S.near=w.near=_.near=H.near,S.far=w.far=_.far=H.far,(C!==S.near||M!==S.far)&&(i.updateRenderState({depthNear:S.near,depthFar:S.far}),C=S.near,M=S.far);let W=H.parent,te=S.cameras;z(S,W);for(let ie=0;ie<te.length;ie++)z(te[ie],W);S.matrixWorld.decompose(S.position,S.quaternion,S.scale),H.matrix.copy(S.matrix),H.matrix.decompose(H.position,H.quaternion,H.scale);let G=H.children;for(let ie=0,q=G.length;ie<q;ie++)G[ie].updateMatrixWorld(!0);te.length===2?F(S,_,w):S.projectionMatrix.copy(_.projectionMatrix)},this.getCamera=function(){return S},this.getFoveation=function(){if(!(c===null&&d===null))return o},this.setFoveation=function(H){o=H,c!==null&&(c.fixedFoveation=H),d!==null&&d.fixedFoveation!==void 0&&(d.fixedFoveation=H)},this.getPlanes=function(){return x};let B=null;function V(H,W){if(u=W.getViewerPose(l||a),f=W,u!==null){let te=u.views;d!==null&&(e.setRenderTargetFramebuffer(g,d.framebuffer),e.setRenderTarget(g));let G=!1;te.length!==S.cameras.length&&(S.cameras.length=0,G=!0);for(let ie=0;ie<te.length;ie++){let q=te[ie],le=null;if(d!==null)le=d.getViewport(q);else{let Z=h.getViewSubImage(c,q);le=Z.viewport,ie===0&&(e.setRenderTargetTextures(g,Z.colorTexture,c.ignoreDepthValues?void 0:Z.depthStencilTexture),e.setRenderTarget(g))}let ae=E[ie];ae===void 0&&(ae=new ma,ae.layers.enable(ie),ae.viewport=new Wt,E[ie]=ae),ae.matrix.fromArray(q.transform.matrix),ae.projectionMatrix.fromArray(q.projectionMatrix),ae.viewport.set(le.x,le.y,le.width,le.height),ie===0&&S.matrix.copy(ae.matrix),G===!0&&S.cameras.push(ae)}}for(let te=0;te<v.length;te++){let G=y[te],ie=v[te];G!==null&&ie!==void 0&&ie.update(G,W,l||a)}if(B&&B(H,W),W.detectedPlanes){r.dispatchEvent({type:"planesdetected",data:W.detectedPlanes});let te=null;for(let G of x)W.detectedPlanes.has(G)||(te===null&&(te=[]),te.push(G));if(te!==null)for(let G of te)x.delete(G),b.delete(G),r.dispatchEvent({type:"planeremoved",data:G});for(let G of W.detectedPlanes)if(!x.has(G))x.add(G),b.set(G,W.lastChangedTime),r.dispatchEvent({type:"planeadded",data:G});else{let ie=b.get(G);G.lastChangedTime>ie&&(b.set(G,G.lastChangedTime),r.dispatchEvent({type:"planechanged",data:G}))}}f=null}let R=new y7;R.setAnimationLoop(V),this.setAnimationLoop=function(H){B=H},this.dispose=function(){}}};function Kbe(e,t){function r(p,g){g.color.getRGB(p.fogColor.value,v7(e)),g.isFog?(p.fogNear.value=g.near,p.fogFar.value=g.far):g.isFogExp2&&(p.fogDensity.value=g.density)}function i(p,g,v,y,x){g.isMeshBasicMaterial||g.isMeshLambertMaterial?n(p,g):g.isMeshToonMaterial?(n(p,g),h(p,g)):g.isMeshPhongMaterial?(n(p,g),u(p,g)):g.isMeshStandardMaterial?(n(p,g),c(p,g),g.isMeshPhysicalMaterial&&d(p,g,x)):g.isMeshMatcapMaterial?(n(p,g),f(p,g)):g.isMeshDepthMaterial?n(p,g):g.isMeshDistanceMaterial?(n(p,g),m(p,g)):g.isMeshNormalMaterial?n(p,g):g.isLineBasicMaterial?(a(p,g),g.isLineDashedMaterial&&s(p,g)):g.isPointsMaterial?o(p,g,v,y):g.isSpriteMaterial?l(p,g):g.isShadowMaterial?(p.color.value.copy(g.color),p.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function n(p,g){p.opacity.value=g.opacity,g.color&&p.diffuse.value.copy(g.color),g.emissive&&p.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(p.map.value=g.map),g.alphaMap&&(p.alphaMap.value=g.alphaMap),g.bumpMap&&(p.bumpMap.value=g.bumpMap,p.bumpScale.value=g.bumpScale,g.side===Vn&&(p.bumpScale.value*=-1)),g.displacementMap&&(p.displacementMap.value=g.displacementMap,p.displacementScale.value=g.displacementScale,p.displacementBias.value=g.displacementBias),g.emissiveMap&&(p.emissiveMap.value=g.emissiveMap),g.normalMap&&(p.normalMap.value=g.normalMap,p.normalScale.value.copy(g.normalScale),g.side===Vn&&p.normalScale.value.negate()),g.specularMap&&(p.specularMap.value=g.specularMap),g.alphaTest>0&&(p.alphaTest.value=g.alphaTest);let v=t.get(g).envMap;if(v&&(p.envMap.value=v,p.flipEnvMap.value=v.isCubeTexture&&v.isRenderTargetTexture===!1?-1:1,p.reflectivity.value=g.reflectivity,p.ior.value=g.ior,p.refractionRatio.value=g.refractionRatio),g.lightMap){p.lightMap.value=g.lightMap;let b=e.physicallyCorrectLights!==!0?Math.PI:1;p.lightMapIntensity.value=g.lightMapIntensity*b}g.aoMap&&(p.aoMap.value=g.aoMap,p.aoMapIntensity.value=g.aoMapIntensity);let y;g.map?y=g.map:g.specularMap?y=g.specularMap:g.displacementMap?y=g.displacementMap:g.normalMap?y=g.normalMap:g.bumpMap?y=g.bumpMap:g.roughnessMap?y=g.roughnessMap:g.metalnessMap?y=g.metalnessMap:g.alphaMap?y=g.alphaMap:g.emissiveMap?y=g.emissiveMap:g.clearcoatMap?y=g.clearcoatMap:g.clearcoatNormalMap?y=g.clearcoatNormalMap:g.clearcoatRoughnessMap?y=g.clearcoatRoughnessMap:g.iridescenceMap?y=g.iridescenceMap:g.iridescenceThicknessMap?y=g.iridescenceThicknessMap:g.specularIntensityMap?y=g.specularIntensityMap:g.specularColorMap?y=g.specularColorMap:g.transmissionMap?y=g.transmissionMap:g.thicknessMap?y=g.thicknessMap:g.sheenColorMap?y=g.sheenColorMap:g.sheenRoughnessMap&&(y=g.sheenRoughnessMap),y!==void 0&&(y.isWebGLRenderTarget&&(y=y.texture),y.matrixAutoUpdate===!0&&y.updateMatrix(),p.uvTransform.value.copy(y.matrix));let x;g.aoMap?x=g.aoMap:g.lightMap&&(x=g.lightMap),x!==void 0&&(x.isWebGLRenderTarget&&(x=x.texture),x.matrixAutoUpdate===!0&&x.updateMatrix(),p.uv2Transform.value.copy(x.matrix))}function a(p,g){p.diffuse.value.copy(g.color),p.opacity.value=g.opacity}function s(p,g){p.dashSize.value=g.dashSize,p.totalSize.value=g.dashSize+g.gapSize,p.scale.value=g.scale}function o(p,g,v,y){p.diffuse.value.copy(g.color),p.opacity.value=g.opacity,p.size.value=g.size*v,p.scale.value=y*.5,g.map&&(p.map.value=g.map),g.alphaMap&&(p.alphaMap.value=g.alphaMap),g.alphaTest>0&&(p.alphaTest.value=g.alphaTest);let x;g.map?x=g.map:g.alphaMap&&(x=g.alphaMap),x!==void 0&&(x.matrixAutoUpdate===!0&&x.updateMatrix(),p.uvTransform.value.copy(x.matrix))}function l(p,g){p.diffuse.value.copy(g.color),p.opacity.value=g.opacity,p.rotation.value=g.rotation,g.map&&(p.map.value=g.map),g.alphaMap&&(p.alphaMap.value=g.alphaMap),g.alphaTest>0&&(p.alphaTest.value=g.alphaTest);let v;g.map?v=g.map:g.alphaMap&&(v=g.alphaMap),v!==void 0&&(v.matrixAutoUpdate===!0&&v.updateMatrix(),p.uvTransform.value.copy(v.matrix))}function u(p,g){p.specular.value.copy(g.specular),p.shininess.value=Math.max(g.shininess,1e-4)}function h(p,g){g.gradientMap&&(p.gradientMap.value=g.gradientMap)}function c(p,g){p.roughness.value=g.roughness,p.metalness.value=g.metalness,g.roughnessMap&&(p.roughnessMap.value=g.roughnessMap),g.metalnessMap&&(p.metalnessMap.value=g.metalnessMap),t.get(g).envMap&&(p.envMapIntensity.value=g.envMapIntensity)}function d(p,g,v){p.ior.value=g.ior,g.sheen>0&&(p.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),p.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(p.sheenColorMap.value=g.sheenColorMap),g.sheenRoughnessMap&&(p.sheenRoughnessMap.value=g.sheenRoughnessMap)),g.clearcoat>0&&(p.clearcoat.value=g.clearcoat,p.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(p.clearcoatMap.value=g.clearcoatMap),g.clearcoatRoughnessMap&&(p.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap),g.clearcoatNormalMap&&(p.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),p.clearcoatNormalMap.value=g.clearcoatNormalMap,g.side===Vn&&p.clearcoatNormalScale.value.negate())),g.iridescence>0&&(p.iridescence.value=g.iridescence,p.iridescenceIOR.value=g.iridescenceIOR,p.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],p.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(p.iridescenceMap.value=g.iridescenceMap),g.iridescenceThicknessMap&&(p.iridescenceThicknessMap.value=g.iridescenceThicknessMap)),g.transmission>0&&(p.transmission.value=g.transmission,p.transmissionSamplerMap.value=v.texture,p.transmissionSamplerSize.value.set(v.width,v.height),g.transmissionMap&&(p.transmissionMap.value=g.transmissionMap),p.thickness.value=g.thickness,g.thicknessMap&&(p.thicknessMap.value=g.thicknessMap),p.attenuationDistance.value=g.attenuationDistance,p.attenuationColor.value.copy(g.attenuationColor)),p.specularIntensity.value=g.specularIntensity,p.specularColor.value.copy(g.specularColor),g.specularIntensityMap&&(p.specularIntensityMap.value=g.specularIntensityMap),g.specularColorMap&&(p.specularColorMap.value=g.specularColorMap)}function f(p,g){g.matcap&&(p.matcap.value=g.matcap)}function m(p,g){p.referencePosition.value.copy(g.referencePosition),p.nearDistance.value=g.nearDistance,p.farDistance.value=g.farDistance}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function Zbe(e,t,r,i){let n={},a={},s=[],o=r.isWebGL2?e.getParameter(35375):0;function l(y,x){let b=x.program;i.uniformBlockBinding(y,b)}function u(y,x){let b=n[y.id];b===void 0&&(m(y),b=h(y),n[y.id]=b,y.addEventListener("dispose",g));let _=x.program;i.updateUBOMapping(y,_);let w=t.render.frame;a[y.id]!==w&&(d(y),a[y.id]=w)}function h(y){let x=c();y.__bindingPointIndex=x;let b=e.createBuffer(),_=y.__size,w=y.usage;return e.bindBuffer(35345,b),e.bufferData(35345,_,w),e.bindBuffer(35345,null),e.bindBufferBase(35345,x,b),b}function c(){for(let y=0;y<o;y++)if(s.indexOf(y)===-1)return s.push(y),y;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function d(y){let x=n[y.id],b=y.uniforms,_=y.__cache;e.bindBuffer(35345,x);for(let w=0,E=b.length;w<E;w++){let S=b[w];if(f(S,w,_)===!0){let C=S.__offset,M=Array.isArray(S.value)?S.value:[S.value],P=0;for(let I=0;I<M.length;I++){let k=M[I],L=p(k);typeof k=="number"?(S.__data[0]=k,e.bufferSubData(35345,C+P,S.__data)):k.isMatrix3?(S.__data[0]=k.elements[0],S.__data[1]=k.elements[1],S.__data[2]=k.elements[2],S.__data[3]=k.elements[0],S.__data[4]=k.elements[3],S.__data[5]=k.elements[4],S.__data[6]=k.elements[5],S.__data[7]=k.elements[0],S.__data[8]=k.elements[6],S.__data[9]=k.elements[7],S.__data[10]=k.elements[8],S.__data[11]=k.elements[0]):(k.toArray(S.__data,P),P+=L.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(35345,C,S.__data)}}e.bindBuffer(35345,null)}function f(y,x,b){let _=y.value;if(b[x]===void 0){if(typeof _=="number")b[x]=_;else{let w=Array.isArray(_)?_:[_],E=[];for(let S=0;S<w.length;S++)E.push(w[S].clone());b[x]=E}return!0}else if(typeof _=="number"){if(b[x]!==_)return b[x]=_,!0}else{let w=Array.isArray(b[x])?b[x]:[b[x]],E=Array.isArray(_)?_:[_];for(let S=0;S<w.length;S++){let C=w[S];if(C.equals(E[S])===!1)return C.copy(E[S]),!0}}return!1}function m(y){let x=y.uniforms,b=0,_=16,w=0;for(let E=0,S=x.length;E<S;E++){let C=x[E],M={boundary:0,storage:0},P=Array.isArray(C.value)?C.value:[C.value];for(let I=0,k=P.length;I<k;I++){let L=P[I],O=p(L);M.boundary+=O.boundary,M.storage+=O.storage}if(C.__data=new Float32Array(M.storage/Float32Array.BYTES_PER_ELEMENT),C.__offset=b,E>0){w=b%_;let I=_-w;w!==0&&I-M.boundary<0&&(b+=_-w,C.__offset=b)}b+=M.storage}return w=b%_,w>0&&(b+=_-w),y.__size=b,y.__cache={},this}function p(y){let x={boundary:0,storage:0};return typeof y=="number"?(x.boundary=4,x.storage=4):y.isVector2?(x.boundary=8,x.storage=8):y.isVector3||y.isColor?(x.boundary=16,x.storage=12):y.isVector4?(x.boundary=16,x.storage=16):y.isMatrix3?(x.boundary=48,x.storage=48):y.isMatrix4?(x.boundary=64,x.storage=64):y.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",y),x}function g(y){let x=y.target;x.removeEventListener("dispose",g);let b=s.indexOf(x.__bindingPointIndex);s.splice(b,1),e.deleteBuffer(n[x.id]),delete n[x.id],delete a[x.id]}function v(){for(let y in n)e.deleteBuffer(n[y]);s=[],n={},a={}}return{bind:l,update:u,dispose:v}}function Jbe(){let e=hS("canvas");return e.style.display="block",e}function E7(e={}){this.isWebGLRenderer=!0;let t=e.canvas!==void 0?e.canvas:Jbe(),r=e.context!==void 0?e.context:null,i=e.depth!==void 0?e.depth:!0,n=e.stencil!==void 0?e.stencil:!0,a=e.antialias!==void 0?e.antialias:!1,s=e.premultipliedAlpha!==void 0?e.premultipliedAlpha:!0,o=e.preserveDrawingBuffer!==void 0?e.preserveDrawingBuffer:!1,l=e.powerPreference!==void 0?e.powerPreference:"default",u=e.failIfMajorPerformanceCaveat!==void 0?e.failIfMajorPerformanceCaveat:!1,h;r!==null?h=r.getContextAttributes().alpha:h=e.alpha!==void 0?e.alpha:!1;let c=null,d=null,f=[],m=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Su,this.physicallyCorrectLights=!1,this.toneMapping=gc,this.toneMappingExposure=1;let p=this,g=!1,v=0,y=0,x=null,b=-1,_=null,w=new Wt,E=new Wt,S=null,C=t.width,M=t.height,P=1,I=null,k=null,L=new Wt(0,0,C,M),O=new Wt(0,0,C,M),F=!1,z=new SR,B=!1,V=!1,R=null,H=new ze,W=new re,te=new T,G={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function ie(){return x===null?P:1}let q=r;function le(j,ce){for(let be=0;be<j.length;be++){let de=j[be],Se=t.getContext(de,ce);if(Se!==null)return Se}return null}try{let j={alpha:!0,depth:i,stencil:n,antialias:a,premultipliedAlpha:s,preserveDrawingBuffer:o,powerPreference:l,failIfMajorPerformanceCaveat:u};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${uv}`),t.addEventListener("webglcontextlost",xt,!1),t.addEventListener("webglcontextrestored",vt,!1),t.addEventListener("webglcontextcreationerror",$t,!1),q===null){let ce=["webgl2","webgl","experimental-webgl"];if(p.isWebGL1Renderer===!0&&ce.shift(),q=le(ce,j),q===null)throw le(ce)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}q.getShaderPrecisionFormat===void 0&&(q.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(j){throw console.error("THREE.WebGLRenderer: "+j.message),j}let ae,Z,he,ge,xe,ye,Ne,Re,qe,se,ke,Be,at,Ge,$,U,fe,Te,Ae,Fe,et,Pe,we,Ze;function Ke(){ae=new dxe(q),Z=new sxe(q,ae,e),ae.init(Z),Pe=new Ybe(q,ae,Z),he=new Wbe(q,ae,Z),ge=new mxe,xe=new Ibe,ye=new $be(q,ae,he,xe,Z,Pe,ge),Ne=new lxe(p),Re=new hxe(p),qe=new E0e(q,Z),we=new nxe(q,ae,qe,Z),se=new fxe(q,qe,ge,we),ke=new xxe(q,se,qe,ge),Ae=new yxe(q,Z,ye),U=new oxe(xe),Be=new Obe(p,Ne,Re,ae,Z,we,U),at=new Kbe(p,xe),Ge=new kbe,$=new Ube(ae,Z),Te=new ixe(p,Ne,Re,he,ke,h,s),fe=new Gbe(p,ke,Z),Ze=new Zbe(q,ge,Z,he),Fe=new axe(q,ae,ge,Z),et=new pxe(q,ae,ge,Z),ge.programs=Be.programs,p.capabilities=Z,p.extensions=ae,p.properties=xe,p.renderLists=Ge,p.shadowMap=fe,p.state=he,p.info=ge}Ke();let st=new Qbe(p,q);this.xr=st,this.getContext=function(){return q},this.getContextAttributes=function(){return q.getContextAttributes()},this.forceContextLoss=function(){let j=ae.get("WEBGL_lose_context");j&&j.loseContext()},this.forceContextRestore=function(){let j=ae.get("WEBGL_lose_context");j&&j.restoreContext()},this.getPixelRatio=function(){return P},this.setPixelRatio=function(j){j!==void 0&&(P=j,this.setSize(C,M,!1))},this.getSize=function(j){return j.set(C,M)},this.setSize=function(j,ce,be){if(st.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}C=j,M=ce,t.width=Math.floor(j*P),t.height=Math.floor(ce*P),be!==!1&&(t.style.width=j+"px",t.style.height=ce+"px"),this.setViewport(0,0,j,ce)},this.getDrawingBufferSize=function(j){return j.set(C*P,M*P).floor()},this.setDrawingBufferSize=function(j,ce,be){C=j,M=ce,P=be,t.width=Math.floor(j*be),t.height=Math.floor(ce*be),this.setViewport(0,0,j,ce)},this.getCurrentViewport=function(j){return j.copy(w)},this.getViewport=function(j){return j.copy(L)},this.setViewport=function(j,ce,be,de){j.isVector4?L.set(j.x,j.y,j.z,j.w):L.set(j,ce,be,de),he.viewport(w.copy(L).multiplyScalar(P).floor())},this.getScissor=function(j){return j.copy(O)},this.setScissor=function(j,ce,be,de){j.isVector4?O.set(j.x,j.y,j.z,j.w):O.set(j,ce,be,de),he.scissor(E.copy(O).multiplyScalar(P).floor())},this.getScissorTest=function(){return F},this.setScissorTest=function(j){he.setScissorTest(F=j)},this.setOpaqueSort=function(j){I=j},this.setTransparentSort=function(j){k=j},this.getClearColor=function(j){return j.copy(Te.getClearColor())},this.setClearColor=function(){Te.setClearColor.apply(Te,arguments)},this.getClearAlpha=function(){return Te.getClearAlpha()},this.setClearAlpha=function(){Te.setClearAlpha.apply(Te,arguments)},this.clear=function(j=!0,ce=!0,be=!0){let de=0;j&&(de|=16384),ce&&(de|=256),be&&(de|=1024),q.clear(de)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",xt,!1),t.removeEventListener("webglcontextrestored",vt,!1),t.removeEventListener("webglcontextcreationerror",$t,!1),Ge.dispose(),$.dispose(),xe.dispose(),Ne.dispose(),Re.dispose(),ke.dispose(),we.dispose(),Ze.dispose(),Be.dispose(),st.dispose(),st.removeEventListener("sessionstart",We),st.removeEventListener("sessionend",gt),R&&(R.dispose(),R=null),jt.stop()};function xt(j){j.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),g=!0}function vt(){console.log("THREE.WebGLRenderer: Context Restored."),g=!1;let j=ge.autoReset,ce=fe.enabled,be=fe.autoUpdate,de=fe.needsUpdate,Se=fe.type;Ke(),ge.autoReset=j,fe.enabled=ce,fe.autoUpdate=be,fe.needsUpdate=de,fe.type=Se}function $t(j){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",j.statusMessage)}function ar(j){let ce=j.target;ce.removeEventListener("dispose",ar),Or(ce)}function Or(j){J(j),xe.remove(j)}function J(j){let ce=xe.get(j).programs;ce!==void 0&&(ce.forEach(function(be){Be.releaseProgram(be)}),j.isShaderMaterial&&Be.releaseShaderCache(j))}this.renderBufferDirect=function(j,ce,be,de,Se,Ye){ce===null&&(ce=G);let tt=Se.isMesh&&Se.matrixWorld.determinant()<0,Ot=Jt(j,ce,be,de,Se);he.setMaterial(de,tt);let yt=be.index,Xt=1;de.wireframe===!0&&(yt=se.getWireframeAttribute(be),Xt=2);let Ft=be.drawRange,Nt=be.attributes.position,cr=Ft.start*Xt,Ir=(Ft.start+Ft.count)*Xt;Ye!==null&&(cr=Math.max(cr,Ye.start*Xt),Ir=Math.min(Ir,(Ye.start+Ye.count)*Xt)),yt!==null?(cr=Math.max(cr,0),Ir=Math.min(Ir,yt.count)):Nt!=null&&(cr=Math.max(cr,0),Ir=Math.min(Ir,Nt.count));let gn=Ir-cr;if(gn<0||gn===1/0)return;we.setup(Se,de,Ot,be,yt);let Ca,er=Fe;if(yt!==null&&(Ca=qe.get(yt),er=et,er.setIndex(Ca)),Se.isMesh)de.wireframe===!0?(he.setLineWidth(de.wireframeLinewidth*ie()),er.setMode(1)):er.setMode(4);else if(Se.isLine){let _t=de.linewidth;_t===void 0&&(_t=1),he.setLineWidth(_t*ie()),Se.isLineSegments?er.setMode(1):Se.isLineLoop?er.setMode(2):er.setMode(3)}else Se.isPoints?er.setMode(0):Se.isSprite&&er.setMode(4);if(Se.isInstancedMesh)er.renderInstances(cr,gn,Se.count);else if(be.isInstancedBufferGeometry){let _t=be._maxInstanceCount!==void 0?be._maxInstanceCount:1/0,oa=Math.min(be.instanceCount,_t);er.renderInstances(cr,gn,oa)}else er.render(cr,gn)},this.compile=function(j,ce){function be(de,Se,Ye){de.transparent===!0&&de.side===Ys&&de.forceSinglePass===!1?(de.side=Vn,de.needsUpdate=!0,ur(de,Se,Ye),de.side=Ml,de.needsUpdate=!0,ur(de,Se,Ye),de.side=Ys):ur(de,Se,Ye)}d=$.get(j),d.init(),m.push(d),j.traverseVisible(function(de){de.isLight&&de.layers.test(ce.layers)&&(d.pushLight(de),de.castShadow&&d.pushShadow(de))}),d.setupLights(p.physicallyCorrectLights),j.traverse(function(de){let Se=de.material;if(Se)if(Array.isArray(Se))for(let Ye=0;Ye<Se.length;Ye++){let tt=Se[Ye];be(tt,j,de)}else be(Se,j,de)}),m.pop(),d=null};let Me=null;function De(j){Me&&Me(j)}function We(){jt.stop()}function gt(){jt.start()}let jt=new y7;jt.setAnimationLoop(De),typeof self<"u"&&jt.setContext(self),this.setAnimationLoop=function(j){Me=j,st.setAnimationLoop(j),j===null?jt.stop():jt.start()},st.addEventListener("sessionstart",We),st.addEventListener("sessionend",gt),this.render=function(j,ce){if(ce!==void 0&&ce.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(g===!0)return;j.matrixWorldAutoUpdate===!0&&j.updateMatrixWorld(),ce.parent===null&&ce.matrixWorldAutoUpdate===!0&&ce.updateMatrixWorld(),st.enabled===!0&&st.isPresenting===!0&&(st.cameraAutoUpdate===!0&&st.updateCamera(ce),ce=st.getCamera()),j.isScene===!0&&j.onBeforeRender(p,j,ce,x),d=$.get(j,m.length),d.init(),m.push(d),H.multiplyMatrices(ce.projectionMatrix,ce.matrixWorldInverse),z.setFromProjectionMatrix(H),V=this.localClippingEnabled,B=U.init(this.clippingPlanes,V),c=Ge.get(j,f.length),c.init(),f.push(c),ri(j,ce,0,p.sortObjects),c.finish(),p.sortObjects===!0&&c.sort(I,k),B===!0&&U.beginShadows();let be=d.state.shadowsArray;if(fe.render(be,j,ce),B===!0&&U.endShadows(),this.info.autoReset===!0&&this.info.reset(),Te.render(c,j),d.setupLights(p.physicallyCorrectLights),ce.isArrayCamera){let de=ce.cameras;for(let Se=0,Ye=de.length;Se<Ye;Se++){let tt=de[Se];Zr(c,j,tt,tt.viewport)}}else Zr(c,j,ce);x!==null&&(ye.updateMultisampleRenderTarget(x),ye.updateRenderTargetMipmap(x)),j.isScene===!0&&j.onAfterRender(p,j,ce),we.resetDefaultState(),b=-1,_=null,m.pop(),m.length>0?d=m[m.length-1]:d=null,f.pop(),f.length>0?c=f[f.length-1]:c=null};function ri(j,ce,be,de){if(j.visible===!1)return;if(j.layers.test(ce.layers)){if(j.isGroup)be=j.renderOrder;else if(j.isLOD)j.autoUpdate===!0&&j.update(ce);else if(j.isLight)d.pushLight(j),j.castShadow&&d.pushShadow(j);else if(j.isSprite){if(!j.frustumCulled||z.intersectsSprite(j)){de&&te.setFromMatrixPosition(j.matrixWorld).applyMatrix4(H);let Ye=ke.update(j),tt=j.material;tt.visible&&c.push(j,Ye,tt,be,te.z,null)}}else if((j.isMesh||j.isLine||j.isPoints)&&(j.isSkinnedMesh&&j.skeleton.frame!==ge.render.frame&&(j.skeleton.update(),j.skeleton.frame=ge.render.frame),!j.frustumCulled||z.intersectsObject(j))){de&&te.setFromMatrixPosition(j.matrixWorld).applyMatrix4(H);let Ye=ke.update(j),tt=j.material;if(Array.isArray(tt)){let Ot=Ye.groups;for(let yt=0,Xt=Ot.length;yt<Xt;yt++){let Ft=Ot[yt],Nt=tt[Ft.materialIndex];Nt&&Nt.visible&&c.push(j,Ye,Nt,be,te.z,Ft)}}else tt.visible&&c.push(j,Ye,tt,be,te.z,null)}}let Se=j.children;for(let Ye=0,tt=Se.length;Ye<tt;Ye++)ri(Se[Ye],ce,be,de)}function Zr(j,ce,be,de){let Se=j.opaque,Ye=j.transmissive,tt=j.transparent;d.setupLightsView(be),B===!0&&U.setGlobalState(p.clippingPlanes,be),Ye.length>0&&Pt(Se,ce,be),de&&he.viewport(w.copy(de)),Se.length>0&&Je(Se,ce,be),Ye.length>0&&Je(Ye,ce,be),tt.length>0&&Je(tt,ce,be),he.buffers.depth.setTest(!0),he.buffers.depth.setMask(!0),he.buffers.color.setMask(!0),he.setPolygonOffset(!1)}function Pt(j,ce,be){let de=Z.isWebGL2;R===null&&(R=new Yr(1,1,{generateMipmaps:!0,type:ae.has("EXT_color_buffer_half_float")?Ng:Ea,minFilter:Bg,samples:de&&a===!0?4:0})),p.getDrawingBufferSize(W),de?R.setSize(W.x,W.y):R.setSize(cS(W.x),cS(W.y));let Se=p.getRenderTarget();p.setRenderTarget(R),p.clear();let Ye=p.toneMapping;p.toneMapping=gc,Je(j,ce,be),p.toneMapping=Ye,ye.updateMultisampleRenderTarget(R),ye.updateRenderTargetMipmap(R),p.setRenderTarget(Se)}function Je(j,ce,be){let de=ce.isScene===!0?ce.overrideMaterial:null;for(let Se=0,Ye=j.length;Se<Ye;Se++){let tt=j[Se],Ot=tt.object,yt=tt.geometry,Xt=de===null?tt.material:de,Ft=tt.group;Ot.layers.test(be.layers)&&qt(Ot,ce,be,yt,Xt,Ft)}}function qt(j,ce,be,de,Se,Ye){j.onBeforeRender(p,ce,be,de,Se,Ye),j.modelViewMatrix.multiplyMatrices(be.matrixWorldInverse,j.matrixWorld),j.normalMatrix.getNormalMatrix(j.modelViewMatrix),Se.onBeforeRender(p,ce,be,de,j,Ye),Se.transparent===!0&&Se.side===Ys&&Se.forceSinglePass===!1?(Se.side=Vn,Se.needsUpdate=!0,p.renderBufferDirect(be,ce,de,Se,j,Ye),Se.side=Ml,Se.needsUpdate=!0,p.renderBufferDirect(be,ce,de,Se,j,Ye),Se.side=Ys):p.renderBufferDirect(be,ce,de,Se,j,Ye),j.onAfterRender(p,ce,be,de,Se,Ye)}function ur(j,ce,be){ce.isScene!==!0&&(ce=G);let de=xe.get(j),Se=d.state.lights,Ye=d.state.shadowsArray,tt=Se.state.version,Ot=Be.getParameters(j,Se.state,Ye,ce,be),yt=Be.getProgramCacheKey(Ot),Xt=de.programs;de.environment=j.isMeshStandardMaterial?ce.environment:null,de.fog=ce.fog,de.envMap=(j.isMeshStandardMaterial?Re:Ne).get(j.envMap||de.environment),Xt===void 0&&(j.addEventListener("dispose",ar),Xt=new Map,de.programs=Xt);let Ft=Xt.get(yt);if(Ft!==void 0){if(de.currentProgram===Ft&&de.lightsStateVersion===tt)return ut(j,Ot),Ft}else Ot.uniforms=Be.getUniforms(j),j.onBuild(be,Ot,p),j.onBeforeCompile(Ot,p),Ft=Be.acquireProgram(Ot,yt),Xt.set(yt,Ft),de.uniforms=Ot.uniforms;let Nt=de.uniforms;(!j.isShaderMaterial&&!j.isRawShaderMaterial||j.clipping===!0)&&(Nt.clippingPlanes=U.uniform),ut(j,Ot),de.needsLights=Zt(j),de.lightsStateVersion=tt,de.needsLights&&(Nt.ambientLightColor.value=Se.state.ambient,Nt.lightProbe.value=Se.state.probe,Nt.directionalLights.value=Se.state.directional,Nt.directionalLightShadows.value=Se.state.directionalShadow,Nt.spotLights.value=Se.state.spot,Nt.spotLightShadows.value=Se.state.spotShadow,Nt.rectAreaLights.value=Se.state.rectArea,Nt.ltc_1.value=Se.state.rectAreaLTC1,Nt.ltc_2.value=Se.state.rectAreaLTC2,Nt.pointLights.value=Se.state.point,Nt.pointLightShadows.value=Se.state.pointShadow,Nt.hemisphereLights.value=Se.state.hemi,Nt.directionalShadowMap.value=Se.state.directionalShadowMap,Nt.directionalShadowMatrix.value=Se.state.directionalShadowMatrix,Nt.spotShadowMap.value=Se.state.spotShadowMap,Nt.spotLightMatrix.value=Se.state.spotLightMatrix,Nt.spotLightMap.value=Se.state.spotLightMap,Nt.pointShadowMap.value=Se.state.pointShadowMap,Nt.pointShadowMatrix.value=Se.state.pointShadowMatrix);let cr=Ft.getUniforms(),Ir=Vw.seqWithValue(cr.seq,Nt);return de.currentProgram=Ft,de.uniformsList=Ir,Ft}function ut(j,ce){let be=xe.get(j);be.outputEncoding=ce.outputEncoding,be.instancing=ce.instancing,be.skinning=ce.skinning,be.morphTargets=ce.morphTargets,be.morphNormals=ce.morphNormals,be.morphColors=ce.morphColors,be.morphTargetsCount=ce.morphTargetsCount,be.numClippingPlanes=ce.numClippingPlanes,be.numIntersection=ce.numClipIntersection,be.vertexAlphas=ce.vertexAlphas,be.vertexTangents=ce.vertexTangents,be.toneMapping=ce.toneMapping}function Jt(j,ce,be,de,Se){ce.isScene!==!0&&(ce=G),ye.resetTextureUnits();let Ye=ce.fog,tt=de.isMeshStandardMaterial?ce.environment:null,Ot=x===null?p.outputEncoding:x.isXRRenderTarget===!0?x.texture.encoding:Su,yt=(de.isMeshStandardMaterial?Re:Ne).get(de.envMap||tt),Xt=de.vertexColors===!0&&!!be.attributes.color&&be.attributes.color.itemSize===4,Ft=!!de.normalMap&&!!be.attributes.tangent,Nt=!!be.morphAttributes.position,cr=!!be.morphAttributes.normal,Ir=!!be.morphAttributes.color,gn=de.toneMapped?p.toneMapping:gc,Ca=be.morphAttributes.position||be.morphAttributes.normal||be.morphAttributes.color,er=Ca!==void 0?Ca.length:0,_t=xe.get(de),oa=d.state.lights;if(B===!0&&(V===!0||j!==_)){let Aa=j===_&&de.id===b;U.setState(de,j,Aa)}let Ou=!1;de.version===_t.__version?(_t.needsLights&&_t.lightsStateVersion!==oa.state.version||_t.outputEncoding!==Ot||Se.isInstancedMesh&&_t.instancing===!1||!Se.isInstancedMesh&&_t.instancing===!0||Se.isSkinnedMesh&&_t.skinning===!1||!Se.isSkinnedMesh&&_t.skinning===!0||_t.envMap!==yt||de.fog===!0&&_t.fog!==Ye||_t.numClippingPlanes!==void 0&&(_t.numClippingPlanes!==U.numPlanes||_t.numIntersection!==U.numIntersection)||_t.vertexAlphas!==Xt||_t.vertexTangents!==Ft||_t.morphTargets!==Nt||_t.morphNormals!==cr||_t.morphColors!==Ir||_t.toneMapping!==gn||Z.isWebGL2===!0&&_t.morphTargetsCount!==er)&&(Ou=!0):(Ou=!0,_t.__version=de.version);let so=_t.currentProgram;Ou===!0&&(so=ur(de,ce,Se));let Dl=!1,Ji=!1,la=!1,li=so.getUniforms(),en=_t.uniforms;if(he.useProgram(so.program)&&(Dl=!0,Ji=!0,la=!0),de.id!==b&&(b=de.id,Ji=!0),Dl||_!==j){if(li.setValue(q,"projectionMatrix",j.projectionMatrix),Z.logarithmicDepthBuffer&&li.setValue(q,"logDepthBufFC",2/(Math.log(j.far+1)/Math.LN2)),_!==j&&(_=j,Ji=!0,la=!0),de.isShaderMaterial||de.isMeshPhongMaterial||de.isMeshToonMaterial||de.isMeshStandardMaterial||de.envMap){let Aa=li.map.cameraPosition;Aa!==void 0&&Aa.setValue(q,te.setFromMatrixPosition(j.matrixWorld))}(de.isMeshPhongMaterial||de.isMeshToonMaterial||de.isMeshLambertMaterial||de.isMeshBasicMaterial||de.isMeshStandardMaterial||de.isShaderMaterial)&&li.setValue(q,"isOrthographic",j.isOrthographicCamera===!0),(de.isMeshPhongMaterial||de.isMeshToonMaterial||de.isMeshLambertMaterial||de.isMeshBasicMaterial||de.isMeshStandardMaterial||de.isShaderMaterial||de.isShadowMaterial||Se.isSkinnedMesh)&&li.setValue(q,"viewMatrix",j.matrixWorldInverse)}if(Se.isSkinnedMesh){li.setOptional(q,Se,"bindMatrix"),li.setOptional(q,Se,"bindMatrixInverse");let Aa=Se.skeleton;Aa&&(Z.floatVertexTextures?(Aa.boneTexture===null&&Aa.computeBoneTexture(),li.setValue(q,"boneTexture",Aa.boneTexture,ye),li.setValue(q,"boneTextureSize",Aa.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}let Cv=be.morphAttributes;if((Cv.position!==void 0||Cv.normal!==void 0||Cv.color!==void 0&&Z.isWebGL2===!0)&&Ae.update(Se,be,de,so),(Ji||_t.receiveShadow!==Se.receiveShadow)&&(_t.receiveShadow=Se.receiveShadow,li.setValue(q,"receiveShadow",Se.receiveShadow)),de.isMeshGouraudMaterial&&de.envMap!==null&&(en.envMap.value=yt,en.flipEnvMap.value=yt.isCubeTexture&&yt.isRenderTargetTexture===!1?-1:1),Ji&&(li.setValue(q,"toneMappingExposure",p.toneMappingExposure),_t.needsLights&&Dt(en,la),Ye&&de.fog===!0&&at.refreshFogUniforms(en,Ye),at.refreshMaterialUniforms(en,de,P,M,R),Vw.upload(q,_t.uniformsList,en,ye)),de.isShaderMaterial&&de.uniformsNeedUpdate===!0&&(Vw.upload(q,_t.uniformsList,en,ye),de.uniformsNeedUpdate=!1),de.isSpriteMaterial&&li.setValue(q,"center",Se.center),li.setValue(q,"modelViewMatrix",Se.modelViewMatrix),li.setValue(q,"normalMatrix",Se.normalMatrix),li.setValue(q,"modelMatrix",Se.matrixWorld),Se.previousModelViewMatrix&&li.setValue(q,"previousModelViewMatrix",Se.previousModelViewMatrix),j.previousProjectionMatrix&&li.setValue(q,"previousProjectionMatrix",j.previousProjectionMatrix),de.isShaderMaterial||de.isRawShaderMaterial){let Aa=de.uniformsGroups;for(let Av=0,KE=Aa.length;Av<KE;Av++)if(Z.isWebGL2){let sx=Aa[Av];Ze.update(sx,so),Ze.bind(sx,so)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return so}function Dt(j,ce){j.ambientLightColor.needsUpdate=ce,j.lightProbe.needsUpdate=ce,j.directionalLights.needsUpdate=ce,j.directionalLightShadows.needsUpdate=ce,j.pointLights.needsUpdate=ce,j.pointLightShadows.needsUpdate=ce,j.spotLights.needsUpdate=ce,j.spotLightShadows.needsUpdate=ce,j.rectAreaLights.needsUpdate=ce,j.hemisphereLights.needsUpdate=ce}function Zt(j){return j.isMeshLambertMaterial||j.isMeshToonMaterial||j.isMeshPhongMaterial||j.isMeshStandardMaterial||j.isShadowMaterial||j.isShaderMaterial&&j.lights===!0}this.getActiveCubeFace=function(){return v},this.getActiveMipmapLevel=function(){return y},this.getRenderTarget=function(){return x},this.setRenderTargetTextures=function(j,ce,be){xe.get(j.texture).__webglTexture=ce,xe.get(j.depthTexture).__webglTexture=be;let de=xe.get(j);de.__hasExternalTextures=!0,de.__hasExternalTextures&&(de.__autoAllocateDepthBuffer=be===void 0,de.__autoAllocateDepthBuffer||ae.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),de.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(j,ce){let be=xe.get(j);be.__webglFramebuffer=ce,be.__useDefaultFramebuffer=ce===void 0},this.setRenderTarget=function(j,ce=0,be=0){x=j,v=ce,y=be;let de=!0,Se=null,Ye=!1,tt=!1;if(j){let Ot=xe.get(j);Ot.__useDefaultFramebuffer!==void 0?(he.bindFramebuffer(36160,null),de=!1):Ot.__webglFramebuffer===void 0?ye.setupRenderTarget(j):Ot.__hasExternalTextures&&ye.rebindTextures(j,xe.get(j.texture).__webglTexture,xe.get(j.depthTexture).__webglTexture);let yt=j.texture;(yt.isData3DTexture||yt.isDataArrayTexture||yt.isCompressedArrayTexture)&&(tt=!0);let Xt=xe.get(j).__webglFramebuffer;j.isWebGLCubeRenderTarget?(Se=Xt[ce],Ye=!0):Z.isWebGL2&&j.samples>0&&ye.useMultisampledRTT(j)===!1?Se=xe.get(j).__webglMultisampledFramebuffer:Se=Xt,w.copy(j.viewport),E.copy(j.scissor),S=j.scissorTest}else w.copy(L).multiplyScalar(P).floor(),E.copy(O).multiplyScalar(P).floor(),S=F;if(he.bindFramebuffer(36160,Se)&&Z.drawBuffers&&de&&he.drawBuffers(j,Se),he.viewport(w),he.scissor(E),he.setScissorTest(S),Ye){let Ot=xe.get(j.texture);q.framebufferTexture2D(36160,36064,34069+ce,Ot.__webglTexture,be)}else if(tt){let Ot=xe.get(j.texture),yt=ce||0;q.framebufferTextureLayer(36160,36064,Ot.__webglTexture,be||0,yt)}b=-1},this.readRenderTargetPixels=function(j,ce,be,de,Se,Ye,tt){if(!(j&&j.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Ot=xe.get(j).__webglFramebuffer;if(j.isWebGLCubeRenderTarget&&tt!==void 0&&(Ot=Ot[tt]),Ot){he.bindFramebuffer(36160,Ot);try{let yt=j.texture,Xt=yt.format,Ft=yt.type;if(Xt!==Co&&Pe.convert(Xt)!==q.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}let Nt=Ft===Ng&&(ae.has("EXT_color_buffer_half_float")||Z.isWebGL2&&ae.has("EXT_color_buffer_float"));if(Ft!==Ea&&Pe.convert(Ft)!==q.getParameter(35738)&&!(Ft===qs&&(Z.isWebGL2||ae.has("OES_texture_float")||ae.has("WEBGL_color_buffer_float")))&&!Nt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ce>=0&&ce<=j.width-de&&be>=0&&be<=j.height-Se&&q.readPixels(ce,be,de,Se,Pe.convert(Xt),Pe.convert(Ft),Ye)}finally{let yt=x!==null?xe.get(x).__webglFramebuffer:null;he.bindFramebuffer(36160,yt)}}},this.copyFramebufferToTexture=function(j,ce,be=0){let de=Math.pow(2,-be),Se=Math.floor(ce.image.width*de),Ye=Math.floor(ce.image.height*de);ye.setTexture2D(ce,0),q.copyTexSubImage2D(3553,be,0,0,j.x,j.y,Se,Ye),he.unbindTexture()},this.copyTextureToTexture=function(j,ce,be,de=0){let Se=ce.image.width,Ye=ce.image.height,tt=Pe.convert(be.format),Ot=Pe.convert(be.type);ye.setTexture2D(be,0),q.pixelStorei(37440,be.flipY),q.pixelStorei(37441,be.premultiplyAlpha),q.pixelStorei(3317,be.unpackAlignment),ce.isDataTexture?q.texSubImage2D(3553,de,j.x,j.y,Se,Ye,tt,Ot,ce.image.data):ce.isCompressedTexture?q.compressedTexSubImage2D(3553,de,j.x,j.y,ce.mipmaps[0].width,ce.mipmaps[0].height,tt,ce.mipmaps[0].data):q.texSubImage2D(3553,de,j.x,j.y,tt,Ot,ce.image),de===0&&be.generateMipmaps&&q.generateMipmap(3553),he.unbindTexture()},this.copyTextureToTexture3D=function(j,ce,be,de,Se=0){if(p.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}let Ye=j.max.x-j.min.x+1,tt=j.max.y-j.min.y+1,Ot=j.max.z-j.min.z+1,yt=Pe.convert(de.format),Xt=Pe.convert(de.type),Ft;if(de.isData3DTexture)ye.setTexture3D(de,0),Ft=32879;else if(de.isDataArrayTexture)ye.setTexture2DArray(de,0),Ft=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}q.pixelStorei(37440,de.flipY),q.pixelStorei(37441,de.premultiplyAlpha),q.pixelStorei(3317,de.unpackAlignment);let Nt=q.getParameter(3314),cr=q.getParameter(32878),Ir=q.getParameter(3316),gn=q.getParameter(3315),Ca=q.getParameter(32877),er=be.isCompressedTexture?be.mipmaps[0]:be.image;q.pixelStorei(3314,er.width),q.pixelStorei(32878,er.height),q.pixelStorei(3316,j.min.x),q.pixelStorei(3315,j.min.y),q.pixelStorei(32877,j.min.z),be.isDataTexture||be.isData3DTexture?q.texSubImage3D(Ft,Se,ce.x,ce.y,ce.z,Ye,tt,Ot,yt,Xt,er.data):be.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),q.compressedTexSubImage3D(Ft,Se,ce.x,ce.y,ce.z,Ye,tt,Ot,yt,er.data)):q.texSubImage3D(Ft,Se,ce.x,ce.y,ce.z,Ye,tt,Ot,yt,Xt,er),q.pixelStorei(3314,Nt),q.pixelStorei(32878,cr),q.pixelStorei(3316,Ir),q.pixelStorei(3315,gn),q.pixelStorei(32877,Ca),Se===0&&de.generateMipmaps&&q.generateMipmap(Ft),he.unbindTexture()},this.initTexture=function(j){j.isCubeTexture?ye.setTextureCube(j,0):j.isData3DTexture?ye.setTexture3D(j,0):j.isDataArrayTexture||j.isCompressedArrayTexture?ye.setTexture2DArray(j,0):ye.setTexture2D(j,0),he.unbindTexture()},this.resetState=function(){v=0,y=0,x=null,he.reset(),we.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}var ewe=class extends E7{};ewe.prototype.isWebGL1Renderer=!0;var M7=class{constructor(e,t=1,r=1e3){this.isFog=!0,this.name="",this.color=new At(e),this.near=t,this.far=r}clone(){return new M7(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}},Hh=class extends Xr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,r){return super.copy(t,r),t.background!==null&&(this.background=t.background.clone()),t.environment!==null&&(this.environment=t.environment.clone()),t.fog!==null&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,t.overrideMaterial!==null&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){let r=super.toJSON(t);return this.fog!==null&&(r.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(r.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(r.object.backgroundIntensity=this.backgroundIntensity),r}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(t){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=t}},twe=class{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=uD,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=ko()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let i=0,n=this.stride;i<n;i++)this.array[e+i]=t.array[r+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ko()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);let t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ko()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}},Da=new T,fD=class{constructor(e,t,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)Da.fromBufferAttribute(this,t),Da.applyMatrix4(e),this.setXYZ(t,Da.x,Da.y,Da.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Da.fromBufferAttribute(this,t),Da.applyNormalMatrix(e),this.setXYZ(t,Da.x,Da.y,Da.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Da.fromBufferAttribute(this,t),Da.transformDirection(e),this.setXYZ(t,Da.x,Da.y,Da.z);return this}setX(e,t){return this.normalized&&(t=ni(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=ni(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=ni(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=ni(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=dc(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=dc(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=dc(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=dc(t,this.array)),t}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=ni(t,this.array),r=ni(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=ni(t,this.array),r=ni(r,this.array),i=ni(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,t,r,i,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=ni(t,this.array),r=ni(r,this.array),i=ni(i,this.array),n=ni(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=n,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");let t=[];for(let r=0;r<this.count;r++){let i=r*this.data.stride+this.offset;for(let n=0;n<this.itemSize;n++)t.push(this.data.array[i+n])}return new Bt(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new fD(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");let t=[];for(let r=0;r<this.count;r++){let i=r*this.data.stride+this.offset;for(let n=0;n<this.itemSize;n++)t.push(this.data.array[i+n])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}},C7=class extends Xr{constructor(){super(),this.isBone=!0,this.type="Bone"}},dS=class extends Mn{constructor(e=null,t=1,r=1,i,n,a,s,o,l=si,u=si,h,c){super(null,a,s,o,l,u,i,n,h,c),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},c5=new ze,rwe=new ze,CR=class{constructor(e=[],t=[]){this.uuid=ko(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){let e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new ze)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){let r=new ze;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){let r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){let r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){let e=this.bones,t=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let n=0,a=e.length;n<a;n++){let s=e[n]?e[n].matrixWorld:rwe;c5.multiplyMatrices(s,t[n]),c5.toArray(r,n*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new CR(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=c7(e),e=Math.max(e,4);let t=new Float32Array(e*e*4);t.set(this.boneMatrices);let r=new dS(t,e,e,Co,qs);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){let i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){let n=e.bones[r],a=t[n];a===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",n),a=new C7),this.bones.push(a),this.boneInverses.push(new ze().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){let e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;let t=this.bones,r=this.boneInverses;for(let i=0,n=t.length;i<n;i++){let a=t[i];e.bones.push(a.uuid);let s=r[i];e.boneInverses.push(s.toArray())}return e}},iwe=class extends Bt{constructor(e,t,r,i=1){super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){let e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}},md=class extends q1{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new At(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}},h5=new T,d5=new T,f5=new ze,eA=new cv,mb=new Ds,fS=class extends Xr{constructor(e=new wt,t=new md){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){let e=this.geometry;if(e.index===null){let t=e.attributes.position,r=[0];for(let i=1,n=t.count;i<n;i++)h5.fromBufferAttribute(t,i-1),d5.fromBufferAttribute(t,i),r[i]=r[i-1],r[i]+=h5.distanceTo(d5);e.setAttribute("lineDistance",new it(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){let r=this.geometry,i=this.matrixWorld,n=e.params.Line.threshold,a=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),mb.copy(r.boundingSphere),mb.applyMatrix4(i),mb.radius+=n,e.ray.intersectsSphere(mb)===!1)return;f5.copy(i).invert(),eA.copy(e.ray).applyMatrix4(f5);let s=n/((this.scale.x+this.scale.y+this.scale.z)/3),o=s*s,l=new T,u=new T,h=new T,c=new T,d=this.isLineSegments?2:1,f=r.index,m=r.attributes.position;if(f!==null){let p=Math.max(0,a.start),g=Math.min(f.count,a.start+a.count);for(let v=p,y=g-1;v<y;v+=d){let x=f.getX(v),b=f.getX(v+1);if(l.fromBufferAttribute(m,x),u.fromBufferAttribute(m,b),eA.distanceSqToSegment(l,u,c,h)>o)continue;c.applyMatrix4(this.matrixWorld);let _=e.ray.origin.distanceTo(c);_<e.near||_>e.far||t.push({distance:_,point:h.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}else{let p=Math.max(0,a.start),g=Math.min(m.count,a.start+a.count);for(let v=p,y=g-1;v<y;v+=d){if(l.fromBufferAttribute(m,v),u.fromBufferAttribute(m,v+1),eA.distanceSqToSegment(l,u,c,h)>o)continue;c.applyMatrix4(this.matrixWorld);let x=e.ray.origin.distanceTo(c);x<e.near||x>e.far||t.push({distance:x,point:h.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){let e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){let r=e[t[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let i=0,n=r.length;i<n;i++){let a=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=i}}}}},p5=new T,m5=new T,Q1=class extends fS{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){let e=this.geometry;if(e.index===null){let t=e.attributes.position,r=[];for(let i=0,n=t.count;i<n;i+=2)p5.fromBufferAttribute(t,i),m5.fromBufferAttribute(t,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+p5.distanceTo(m5);e.setAttribute("lineDistance",new it(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}},nwe=class extends Mn{constructor(e,t,r,i,n,a,s,o,l){super(e,t,r,i,n,a,s,o,l),this.isVideoTexture=!0,this.minFilter=a!==void 0?a:Kt,this.magFilter=n!==void 0?n:Kt,this.generateMipmaps=!1;let u=this;function h(){u.needsUpdate=!0,e.requestVideoFrameCallback(h)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(h)}clone(){return new this.constructor(this.image).copy(this)}update(){let e=this.image;!("requestVideoFrameCallback"in e)&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}},Tu=class{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){let r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){let t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){let t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){let e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;let t=[],r,i=this.getPoint(0),n=0;t.push(0);for(let a=1;a<=e;a++)r=this.getPoint(a/e),n+=r.distanceTo(i),t.push(n),i=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){let r=this.getLengths(),i=0,n=r.length,a;t?a=t:a=e*r[n-1];let s=0,o=n-1,l;for(;s<=o;)if(i=Math.floor(s+(o-s)/2),l=r[i]-a,l<0)s=i+1;else if(l>0)o=i-1;else{o=i;break}if(i=o,r[i]===a)return i/(n-1);let u=r[i],h=r[i+1]-u,c=(a-u)/h;return(i+c)/(n-1)}getTangent(e,t){let r=e-1e-4,i=e+1e-4;r<0&&(r=0),i>1&&(i=1);let n=this.getPoint(r),a=this.getPoint(i),s=t||(n.isVector2?new re:new T);return s.copy(a).sub(n).normalize(),s}getTangentAt(e,t){let r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){let r=new T,i=[],n=[],a=[],s=new T,o=new ze;for(let d=0;d<=e;d++){let f=d/e;i[d]=this.getTangentAt(f,new T)}n[0]=new T,a[0]=new T;let l=Number.MAX_VALUE,u=Math.abs(i[0].x),h=Math.abs(i[0].y),c=Math.abs(i[0].z);u<=l&&(l=u,r.set(1,0,0)),h<=l&&(l=h,r.set(0,1,0)),c<=l&&r.set(0,0,1),s.crossVectors(i[0],r).normalize(),n[0].crossVectors(i[0],s),a[0].crossVectors(i[0],n[0]);for(let d=1;d<=e;d++){if(n[d]=n[d-1].clone(),a[d]=a[d-1].clone(),s.crossVectors(i[d-1],i[d]),s.length()>Number.EPSILON){s.normalize();let f=Math.acos(Sn(i[d-1].dot(i[d]),-1,1));n[d].applyMatrix4(o.makeRotationAxis(s,f))}a[d].crossVectors(i[d],n[d])}if(t===!0){let d=Math.acos(Sn(n[0].dot(n[e]),-1,1));d/=e,i[0].dot(s.crossVectors(n[0],n[e]))>0&&(d=-d);for(let f=1;f<=e;f++)n[f].applyMatrix4(o.makeRotationAxis(i[f],d*f)),a[f].crossVectors(i[f],n[f])}return{tangents:i,normals:n,binormals:a}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){let e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},CE=class extends Tu{constructor(e=0,t=0,r=1,i=1,n=0,a=Math.PI*2,s=!1,o=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=i,this.aStartAngle=n,this.aEndAngle=a,this.aClockwise=s,this.aRotation=o}getPoint(e,t){let r=t||new re,i=Math.PI*2,n=this.aEndAngle-this.aStartAngle,a=Math.abs(n)<Number.EPSILON;for(;n<0;)n+=i;for(;n>i;)n-=i;n<Number.EPSILON&&(a?n=0:n=i),this.aClockwise===!0&&!a&&(n===i?n=-i:n=n-i);let s=this.aStartAngle+e*n,o=this.aX+this.xRadius*Math.cos(s),l=this.aY+this.yRadius*Math.sin(s);if(this.aRotation!==0){let u=Math.cos(this.aRotation),h=Math.sin(this.aRotation),c=o-this.aX,d=l-this.aY;o=c*u-d*h+this.aX,l=c*h+d*u+this.aY}return r.set(o,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){let e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}},awe=class extends CE{constructor(e,t,r,i,n,a){super(e,t,r,r,i,n,a),this.isArcCurve=!0,this.type="ArcCurve"}};function AR(){let e=0,t=0,r=0,i=0;function n(a,s,o,l){e=a,t=o,r=-3*a+3*s-2*o-l,i=2*a-2*s+o+l}return{initCatmullRom:function(a,s,o,l,u){n(s,o,u*(o-a),u*(l-s))},initNonuniformCatmullRom:function(a,s,o,l,u,h,c){let d=(s-a)/u-(o-a)/(u+h)+(o-s)/h,f=(o-s)/h-(l-s)/(h+c)+(l-o)/c;d*=h,f*=h,n(s,o,d,f)},calc:function(a){let s=a*a,o=s*a;return e+t*a+r*s+i*o}}}var gb=new T,tA=new AR,rA=new AR,iA=new AR,swe=class extends Tu{constructor(e=[],t=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=i}getPoint(e,t=new T){let r=t,i=this.points,n=i.length,a=(n-(this.closed?0:1))*e,s=Math.floor(a),o=a-s;this.closed?s+=s>0?0:(Math.floor(Math.abs(s)/n)+1)*n:o===0&&s===n-1&&(s=n-2,o=1);let l,u;this.closed||s>0?l=i[(s-1)%n]:(gb.subVectors(i[0],i[1]).add(i[0]),l=gb);let h=i[s%n],c=i[(s+1)%n];if(this.closed||s+2<n?u=i[(s+2)%n]:(gb.subVectors(i[n-1],i[n-2]).add(i[n-1]),u=gb),this.curveType==="centripetal"||this.curveType==="chordal"){let d=this.curveType==="chordal"?.5:.25,f=Math.pow(l.distanceToSquared(h),d),m=Math.pow(h.distanceToSquared(c),d),p=Math.pow(c.distanceToSquared(u),d);m<1e-4&&(m=1),f<1e-4&&(f=m),p<1e-4&&(p=m),tA.initNonuniformCatmullRom(l.x,h.x,c.x,u.x,f,m,p),rA.initNonuniformCatmullRom(l.y,h.y,c.y,u.y,f,m,p),iA.initNonuniformCatmullRom(l.z,h.z,c.z,u.z,f,m,p)}else this.curveType==="catmullrom"&&(tA.initCatmullRom(l.x,h.x,c.x,u.x,this.tension),rA.initCatmullRom(l.y,h.y,c.y,u.y,this.tension),iA.initCatmullRom(l.z,h.z,c.z,u.z,this.tension));return r.set(tA.calc(o),rA.calc(o),iA.calc(o)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){let i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){let i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){let i=e.points[t];this.points.push(new T().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}};function g5(e,t,r,i,n){let a=(i-t)*.5,s=(n-r)*.5,o=e*e,l=e*o;return(2*r-2*i+a+s)*l+(-3*r+3*i-2*a-s)*o+a*e+r}function owe(e,t){let r=1-e;return r*r*t}function lwe(e,t){return 2*(1-e)*e*t}function uwe(e,t){return e*e*t}function yy(e,t,r,i){return owe(e,t)+lwe(e,r)+uwe(e,i)}function cwe(e,t){let r=1-e;return r*r*r*t}function hwe(e,t){let r=1-e;return 3*r*r*e*t}function dwe(e,t){return 3*(1-e)*e*e*t}function fwe(e,t){return e*e*e*t}function xy(e,t,r,i,n){return cwe(e,t)+hwe(e,r)+dwe(e,i)+fwe(e,n)}var hl=class extends Tu{constructor(t=new re,r=new re,i=new re,n=new re){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=t,this.v1=r,this.v2=i,this.v3=n}getPoint(t,r=new re){let i=r,n=this.v0,a=this.v1,s=this.v2,o=this.v3;return i.set(xy(t,n.x,a.x,s.x,o.x),xy(t,n.y,a.y,s.y,o.y)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){let t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}},Hw=class extends Tu{constructor(e=new T,t=new T,r=new T,i=new T){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new T){let r=t,i=this.v0,n=this.v1,a=this.v2,s=this.v3;return r.set(xy(e,i.x,n.x,a.x,s.x),xy(e,i.y,n.y,a.y,s.y),xy(e,i.z,n.z,a.z,s.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},_l=class extends Tu{constructor(t=new re,r=new re){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=t,this.v2=r}getPoint(t,r=new re){let i=r;return t===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(t).add(this.v1)),i}getPointAt(t,r){return this.getPoint(t,r)}getTangent(t,r){let i=r||new re;return i.copy(this.v2).sub(this.v1).normalize(),i}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){let t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}},A7=class extends Tu{constructor(e=new T,t=new T){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new T){let r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},rd=class extends Tu{constructor(e=new re,t=new re,r=new re){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new re){let r=t,i=this.v0,n=this.v1,a=this.v2;return r.set(yy(e,i.x,n.x,a.x),yy(e,i.y,n.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},pwe=class extends Tu{constructor(e=new T,t=new T,r=new T){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new T){let r=t,i=this.v0,n=this.v1,a=this.v2;return r.set(yy(e,i.x,n.x,a.x),yy(e,i.y,n.y,a.y),yy(e,i.z,n.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},TR=class extends Tu{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new re){let r=t,i=this.points,n=(i.length-1)*e,a=Math.floor(n),s=n-a,o=i[a===0?a:a-1],l=i[a],u=i[a>i.length-2?i.length-1:a+1],h=i[a>i.length-3?i.length-1:a+2];return r.set(g5(s,o.x,l.x,u.x,h.x),g5(s,o.y,l.y,u.y,h.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){let i=e.points[t];this.points.push(i.clone())}return this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){let i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){let i=e.points[t];this.points.push(new re().fromArray(i))}return this}},mwe=Object.freeze({__proto__:null,ArcCurve:awe,CatmullRomCurve3:swe,CubicBezierCurve:hl,CubicBezierCurve3:Hw,EllipseCurve:CE,LineCurve:_l,LineCurve3:A7,QuadraticBezierCurve:rd,QuadraticBezierCurve3:pwe,SplineCurve:TR}),T7=class extends Tu{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){let e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new _l(t,e))}getPoint(e,t){let r=e*this.getLength(),i=this.getCurveLengths(),n=0;for(;n<i.length;){if(i[n]>=r){let a=i[n]-r,s=this.curves[n],o=s.getLength(),l=o===0?0:1-a/o;return s.getPointAt(l,t)}n++}return null}getLength(){let e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;let e=[],t=0;for(let r=0,i=this.curves.length;r<i;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){let t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){let t=[],r;for(let i=0,n=this.curves;i<n.length;i++){let a=n[i],s=a.isEllipseCurve?e*2:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?e*a.points.length:e,o=a.getPoints(s);for(let l=0;l<o.length;l++){let u=o[l];r&&r.equals(u)||(t.push(u),r=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){let i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){let e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++){let i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){let i=e.curves[t];this.curves.push(new mwe[i.type]().fromJSON(i))}return this}},pS=class extends T7{constructor(e){super(),this.type="Path",this.currentPoint=new re,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){let r=new _l(this.currentPoint.clone(),new re(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,i){let n=new rd(this.currentPoint.clone(),new re(e,t),new re(r,i));return this.curves.push(n),this.currentPoint.set(r,i),this}bezierCurveTo(e,t,r,i,n,a){let s=new hl(this.currentPoint.clone(),new re(e,t),new re(r,i),new re(n,a));return this.curves.push(s),this.currentPoint.set(n,a),this}splineThru(e){let t=[this.currentPoint.clone()].concat(e),r=new TR(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,i,n,a){let s=this.currentPoint.x,o=this.currentPoint.y;return this.absarc(e+s,t+o,r,i,n,a),this}absarc(e,t,r,i,n,a){return this.absellipse(e,t,r,r,i,n,a),this}ellipse(e,t,r,i,n,a,s,o){let l=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+l,t+u,r,i,n,a,s,o),this}absellipse(e,t,r,i,n,a,s,o){let l=new CE(e,t,r,i,n,a,s,o);if(this.curves.length>0){let h=l.getPoint(0);h.equals(this.currentPoint)||this.lineTo(h.x,h.y)}this.curves.push(l);let u=l.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){let e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}},P7=class extends wt{constructor(e=[new re(0,-.5),new re(.5,0),new re(0,.5)],t=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:i},t=Math.floor(t),i=Sn(i,0,Math.PI*2);let n=[],a=[],s=[],o=[],l=[],u=1/t,h=new T,c=new re,d=new T,f=new T,m=new T,p=0,g=0;for(let v=0;v<=e.length-1;v++)switch(v){case 0:p=e[v+1].x-e[v].x,g=e[v+1].y-e[v].y,d.x=g*1,d.y=-p,d.z=g*0,m.copy(d),d.normalize(),o.push(d.x,d.y,d.z);break;case e.length-1:o.push(m.x,m.y,m.z);break;default:p=e[v+1].x-e[v].x,g=e[v+1].y-e[v].y,d.x=g*1,d.y=-p,d.z=g*0,f.copy(d),d.x+=m.x,d.y+=m.y,d.z+=m.z,d.normalize(),o.push(d.x,d.y,d.z),m.copy(f)}for(let v=0;v<=t;v++){let y=r+v*u*i,x=Math.sin(y),b=Math.cos(y);for(let _=0;_<=e.length-1;_++){h.x=e[_].x*x,h.y=e[_].y,h.z=e[_].x*b,a.push(h.x,h.y,h.z),c.x=v/t,c.y=_/(e.length-1),s.push(c.x,c.y);let w=o[3*_+0]*x,E=o[3*_+1],S=o[3*_+0]*b;l.push(w,E,S)}}for(let v=0;v<t;v++)for(let y=0;y<e.length-1;y++){let x=y+v*e.length,b=x,_=x+e.length,w=x+e.length+1,E=x+1;n.push(b,_,E),n.push(w,E,_)}this.setIndex(n),this.setAttribute("position",new it(a,3)),this.setAttribute("uv",new it(s,2)),this.setAttribute("normal",new it(l,3))}static fromJSON(e){return new P7(e.points,e.segments,e.phiStart,e.phiLength)}},PR=class extends wt{constructor(e=1,t=1,r=1,i=32,n=1,a=!1,s=0,o=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:n,openEnded:a,thetaStart:s,thetaLength:o};let l=this;i=Math.floor(i),n=Math.floor(n);let u=[],h=[],c=[],d=[],f=0,m=[],p=r/2,g=0;v(),a===!1&&(e>0&&y(!0),t>0&&y(!1)),this.setIndex(u),this.setAttribute("position",new it(h,3)),this.setAttribute("normal",new it(c,3)),this.setAttribute("uv",new it(d,2));function v(){let x=new T,b=new T,_=0,w=(t-e)/r;for(let E=0;E<=n;E++){let S=[],C=E/n,M=C*(t-e)+e;for(let P=0;P<=i;P++){let I=P/i,k=I*o+s,L=Math.sin(k),O=Math.cos(k);b.x=M*L,b.y=-C*r+p,b.z=M*O,h.push(b.x,b.y,b.z),x.set(L,w,O).normalize(),c.push(x.x,x.y,x.z),d.push(I,1-C),S.push(f++)}m.push(S)}for(let E=0;E<i;E++)for(let S=0;S<n;S++){let C=m[S][E],M=m[S+1][E],P=m[S+1][E+1],I=m[S][E+1];u.push(C,M,I),u.push(M,P,I),_+=6}l.addGroup(g,_,0),g+=_}function y(x){let b=f,_=new re,w=new T,E=0,S=x===!0?e:t,C=x===!0?1:-1;for(let P=1;P<=i;P++)h.push(0,p*C,0),c.push(0,C,0),d.push(.5,.5),f++;let M=f;for(let P=0;P<=i;P++){let I=P/i*o+s,k=Math.cos(I),L=Math.sin(I);w.x=S*L,w.y=p*C,w.z=S*k,h.push(w.x,w.y,w.z),c.push(0,C,0),_.x=k*.5+.5,_.y=L*.5*C+.5,d.push(_.x,_.y),f++}for(let P=0;P<i;P++){let I=b+P,k=M+P;x===!0?u.push(k,k+1,I):u.push(k+1,k,I),E+=3}l.addGroup(g,E,x===!0?1:2),g+=E}}static fromJSON(e){return new PR(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},D7=class extends PR{constructor(e=1,t=1,r=32,i=1,n=!1,a=0,s=Math.PI*2){super(0,e,t,r,i,n,a,s),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:i,openEnded:n,thetaStart:a,thetaLength:s}}static fromJSON(e){return new D7(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},DR=class extends wt{constructor(e=[],t=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:i};let n=[],a=[];s(i),l(r),u(),this.setAttribute("position",new it(n,3)),this.setAttribute("normal",new it(n.slice(),3)),this.setAttribute("uv",new it(a,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function s(v){let y=new T,x=new T,b=new T;for(let _=0;_<t.length;_+=3)d(t[_+0],y),d(t[_+1],x),d(t[_+2],b),o(y,x,b,v)}function o(v,y,x,b){let _=b+1,w=[];for(let E=0;E<=_;E++){w[E]=[];let S=v.clone().lerp(x,E/_),C=y.clone().lerp(x,E/_),M=_-E;for(let P=0;P<=M;P++)P===0&&E===_?w[E][P]=S:w[E][P]=S.clone().lerp(C,P/M)}for(let E=0;E<_;E++)for(let S=0;S<2*(_-E)-1;S++){let C=Math.floor(S/2);S%2===0?(c(w[E][C+1]),c(w[E+1][C]),c(w[E][C])):(c(w[E][C+1]),c(w[E+1][C+1]),c(w[E+1][C]))}}function l(v){let y=new T;for(let x=0;x<n.length;x+=3)y.x=n[x+0],y.y=n[x+1],y.z=n[x+2],y.normalize().multiplyScalar(v),n[x+0]=y.x,n[x+1]=y.y,n[x+2]=y.z}function u(){let v=new T;for(let y=0;y<n.length;y+=3){v.x=n[y+0],v.y=n[y+1],v.z=n[y+2];let x=p(v)/2/Math.PI+.5,b=g(v)/Math.PI+.5;a.push(x,1-b)}f(),h()}function h(){for(let v=0;v<a.length;v+=6){let y=a[v+0],x=a[v+2],b=a[v+4],_=Math.max(y,x,b),w=Math.min(y,x,b);_>.9&&w<.1&&(y<.2&&(a[v+0]+=1),x<.2&&(a[v+2]+=1),b<.2&&(a[v+4]+=1))}}function c(v){n.push(v.x,v.y,v.z)}function d(v,y){let x=v*3;y.x=e[x+0],y.y=e[x+1],y.z=e[x+2]}function f(){let v=new T,y=new T,x=new T,b=new T,_=new re,w=new re,E=new re;for(let S=0,C=0;S<n.length;S+=9,C+=6){v.set(n[S+0],n[S+1],n[S+2]),y.set(n[S+3],n[S+4],n[S+5]),x.set(n[S+6],n[S+7],n[S+8]),_.set(a[C+0],a[C+1]),w.set(a[C+2],a[C+3]),E.set(a[C+4],a[C+5]),b.copy(v).add(y).add(x).divideScalar(3);let M=p(b);m(_,C+0,v,M),m(w,C+2,y,M),m(E,C+4,x,M)}}function m(v,y,x,b){b<0&&v.x===1&&(a[y]=v.x-1),x.x===0&&x.z===0&&(a[y]=b/2/Math.PI+.5)}function p(v){return Math.atan2(v.z,-v.x)}function g(v){return Math.atan2(-v.y,Math.sqrt(v.x*v.x+v.z*v.z))}}static fromJSON(e){return new DR(e.vertices,e.indices,e.radius,e.details)}},O7=class extends DR{constructor(e=1,t=0){let r=(1+Math.sqrt(5))/2,i=1/r,n=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(n,a,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new O7(e.radius,e.detail)}},mS=class extends pS{constructor(e){super(e),this.uuid=ko(),this.type="Shape",this.holes=[]}getPointsHoles(e){let t=[];for(let r=0,i=this.holes.length;r<i;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){let i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){let e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++){let i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){let i=e.holes[t];this.holes.push(new pS().fromJSON(i))}return this}},gwe={triangulate:function(e,t,r=2){let i=t&&t.length,n=i?t[0]*r:e.length,a=I7(e,0,n,r,!0),s=[];if(!a||a.next===a.prev)return s;let o,l,u,h,c,d,f;if(i&&(a=wwe(e,t,a,r)),e.length>80*r){o=u=e[0],l=h=e[1];for(let m=r;m<n;m+=r)c=e[m],d=e[m+1],c<o&&(o=c),d<l&&(l=d),c>u&&(u=c),d>h&&(h=d);f=Math.max(u-o,h-l),f=f!==0?32767/f:0}return l1(a,s,r,o,l,f,0),s}};function I7(e,t,r,i,n){let a,s;if(n===Iwe(e,t,r,i)>0)for(a=t;a<r;a+=i)s=v5(a,e[a],e[a+1],s);else for(a=r-i;a>=t;a-=i)s=v5(a,e[a],e[a+1],s);return s&&AE(s,s.next)&&(c1(s),s=s.next),s}function Vf(e,t){if(!e)return e;t||(t=e);let r=e,i;do if(i=!1,!r.steiner&&(AE(r,r.next)||Ei(r.prev,r,r.next)===0)){if(c1(r),r=t=r.prev,r===r.next)break;i=!0}else r=r.next;while(i||r!==t);return t}function l1(e,t,r,i,n,a,s){if(!e)return;!s&&a&&Cwe(e,i,n,a);let o=e,l,u;for(;e.prev!==e.next;){if(l=e.prev,u=e.next,a?ywe(e,i,n,a):vwe(e)){t.push(l.i/r|0),t.push(e.i/r|0),t.push(u.i/r|0),c1(e),e=u.next,o=u.next;continue}if(e=u,e===o){s?s===1?(e=xwe(Vf(e),t,r),l1(e,t,r,i,n,a,2)):s===2&&bwe(e,t,r,i,n,a):l1(Vf(e),t,r,i,n,a,1);break}}}function vwe(e){let t=e.prev,r=e,i=e.next;if(Ei(t,r,i)>=0)return!1;let n=t.x,a=r.x,s=i.x,o=t.y,l=r.y,u=i.y,h=n<a?n<s?n:s:a<s?a:s,c=o<l?o<u?o:u:l<u?l:u,d=n>a?n>s?n:s:a>s?a:s,f=o>l?o>u?o:u:l>u?l:u,m=i.next;for(;m!==t;){if(m.x>=h&&m.x<=d&&m.y>=c&&m.y<=f&&km(n,o,a,l,s,u,m.x,m.y)&&Ei(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function ywe(e,t,r,i){let n=e.prev,a=e,s=e.next;if(Ei(n,a,s)>=0)return!1;let o=n.x,l=a.x,u=s.x,h=n.y,c=a.y,d=s.y,f=o<l?o<u?o:u:l<u?l:u,m=h<c?h<d?h:d:c<d?c:d,p=o>l?o>u?o:u:l>u?l:u,g=h>c?h>d?h:d:c>d?c:d,v=pD(f,m,t,r,i),y=pD(p,g,t,r,i),x=e.prevZ,b=e.nextZ;for(;x&&x.z>=v&&b&&b.z<=y;){if(x.x>=f&&x.x<=p&&x.y>=m&&x.y<=g&&x!==n&&x!==s&&km(o,h,l,c,u,d,x.x,x.y)&&Ei(x.prev,x,x.next)>=0||(x=x.prevZ,b.x>=f&&b.x<=p&&b.y>=m&&b.y<=g&&b!==n&&b!==s&&km(o,h,l,c,u,d,b.x,b.y)&&Ei(b.prev,b,b.next)>=0))return!1;b=b.nextZ}for(;x&&x.z>=v;){if(x.x>=f&&x.x<=p&&x.y>=m&&x.y<=g&&x!==n&&x!==s&&km(o,h,l,c,u,d,x.x,x.y)&&Ei(x.prev,x,x.next)>=0)return!1;x=x.prevZ}for(;b&&b.z<=y;){if(b.x>=f&&b.x<=p&&b.y>=m&&b.y<=g&&b!==n&&b!==s&&km(o,h,l,c,u,d,b.x,b.y)&&Ei(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function xwe(e,t,r){let i=e;do{let n=i.prev,a=i.next.next;!AE(n,a)&&R7(n,i,i.next,a)&&u1(n,a)&&u1(a,n)&&(t.push(n.i/r|0),t.push(i.i/r|0),t.push(a.i/r|0),c1(i),c1(i.next),i=e=a),i=i.next}while(i!==e);return Vf(i)}function bwe(e,t,r,i,n,a){let s=e;do{let o=s.next.next;for(;o!==s.prev;){if(s.i!==o.i&&Pwe(s,o)){let l=k7(s,o);s=Vf(s,s.next),l=Vf(l,l.next),l1(s,t,r,i,n,a,0),l1(l,t,r,i,n,a,0);return}o=o.next}s=s.next}while(s!==e)}function wwe(e,t,r,i){let n=[],a,s,o,l,u;for(a=0,s=t.length;a<s;a++)o=t[a]*i,l=a<s-1?t[a+1]*i:e.length,u=I7(e,o,l,i,!1),u===u.next&&(u.steiner=!0),n.push(Twe(u));for(n.sort(_we),a=0;a<n.length;a++)r=Swe(n[a],r);return r}function _we(e,t){return e.x-t.x}function Swe(e,t){let r=Ewe(e,t);if(!r)return t;let i=k7(r,e);return Vf(i,i.next),Vf(r,r.next)}function Ewe(e,t){let r=t,i=-1/0,n,a=e.x,s=e.y;do{if(s<=r.y&&s>=r.next.y&&r.next.y!==r.y){let d=r.x+(s-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(d<=a&&d>i&&(i=d,n=r.x<r.next.x?r:r.next,d===a))return n}r=r.next}while(r!==t);if(!n)return null;let o=n,l=n.x,u=n.y,h=1/0,c;r=n;do a>=r.x&&r.x>=l&&a!==r.x&&km(s<u?a:i,s,l,u,s<u?i:a,s,r.x,r.y)&&(c=Math.abs(s-r.y)/(a-r.x),u1(r,e)&&(c<h||c===h&&(r.x>n.x||r.x===n.x&&Mwe(n,r)))&&(n=r,h=c)),r=r.next;while(r!==o);return n}function Mwe(e,t){return Ei(e.prev,e,t.prev)<0&&Ei(t.next,e,e.next)<0}function Cwe(e,t,r,i){let n=e;do n.z===0&&(n.z=pD(n.x,n.y,t,r,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next;while(n!==e);n.prevZ.nextZ=null,n.prevZ=null,Awe(n)}function Awe(e){let t,r,i,n,a,s,o,l,u=1;do{for(r=e,e=null,a=null,s=0;r;){for(s++,i=r,o=0,t=0;t<u&&(o++,i=i.nextZ,!!i);t++);for(l=u;o>0||l>0&&i;)o!==0&&(l===0||!i||r.z<=i.z)?(n=r,r=r.nextZ,o--):(n=i,i=i.nextZ,l--),a?a.nextZ=n:e=n,n.prevZ=a,a=n;r=i}a.nextZ=null,u*=2}while(s>1);return e}function pD(e,t,r,i,n){return e=(e-r)*n|0,t=(t-i)*n|0,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function Twe(e){let t=e,r=e;do(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next;while(t!==e);return r}function km(e,t,r,i,n,a,s,o){return(n-s)*(t-o)>=(e-s)*(a-o)&&(e-s)*(i-o)>=(r-s)*(t-o)&&(r-s)*(a-o)>=(n-s)*(i-o)}function Pwe(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!Dwe(e,t)&&(u1(e,t)&&u1(t,e)&&Owe(e,t)&&(Ei(e.prev,e,t.prev)||Ei(e,t.prev,t))||AE(e,t)&&Ei(e.prev,e,e.next)>0&&Ei(t.prev,t,t.next)>0)}function Ei(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function AE(e,t){return e.x===t.x&&e.y===t.y}function R7(e,t,r,i){let n=yb(Ei(e,t,r)),a=yb(Ei(e,t,i)),s=yb(Ei(r,i,e)),o=yb(Ei(r,i,t));return!!(n!==a&&s!==o||n===0&&vb(e,r,t)||a===0&&vb(e,i,t)||s===0&&vb(r,e,i)||o===0&&vb(r,t,i))}function vb(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function yb(e){return e>0?1:e<0?-1:0}function Dwe(e,t){let r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&R7(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}function u1(e,t){return Ei(e.prev,e,e.next)<0?Ei(e,t,e.next)>=0&&Ei(e,e.prev,t)>=0:Ei(e,t,e.prev)<0||Ei(e,e.next,t)<0}function Owe(e,t){let r=e,i=!1,n=(e.x+t.x)/2,a=(e.y+t.y)/2;do r.y>a!=r.next.y>a&&r.next.y!==r.y&&n<(r.next.x-r.x)*(a-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next;while(r!==e);return i}function k7(e,t){let r=new mD(e.i,e.x,e.y),i=new mD(t.i,t.x,t.y),n=e.next,a=t.prev;return e.next=t,t.prev=e,r.next=n,n.prev=r,i.next=r,r.prev=i,a.next=i,i.prev=a,i}function v5(e,t,r,i){let n=new mD(e,t,r);return i?(n.next=i.next,n.prev=i,i.next.prev=n,i.next=n):(n.prev=n,n.next=n),n}function c1(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function mD(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Iwe(e,t,r,i){let n=0;for(let a=t,s=r-i;a<r;a+=i)n+=(e[s]-e[a])*(e[a+1]+e[s+1]),s=a;return n}var L7=class{static area(e){let t=e.length,r=0;for(let i=t-1,n=0;n<t;i=n++)r+=e[i].x*e[n].y-e[n].x*e[i].y;return r*.5}static isClockWise(e){return L7.area(e)<0}static triangulateShape(e,t){let r=[],i=[],n=[];y5(e),x5(r,e);let a=e.length;t.forEach(y5);for(let o=0;o<t.length;o++)i.push(a),a+=t[o].length,x5(r,t[o]);let s=gwe.triangulate(r,i);for(let o=0;o<s.length;o+=3)n.push(s.slice(o,o+3));return n}};function y5(e){let t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function x5(e,t){for(let r=0;r<t.length;r++)e.push(t[r].x),e.push(t[r].y)}var B7=class extends DR{constructor(e=1,t=0){let r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],n=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,n,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new B7(e.radius,e.detail)}},OR=class extends wt{constructor(e=1,t=32,r=16,i=0,n=Math.PI*2,a=0,s=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:n,thetaStart:a,thetaLength:s},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));let o=Math.min(a+s,Math.PI),l=0,u=[],h=new T,c=new T,d=[],f=[],m=[],p=[];for(let g=0;g<=r;g++){let v=[],y=g/r,x=0;g==0&&a==0?x=.5/t:g==r&&o==Math.PI&&(x=-.5/t);for(let b=0;b<=t;b++){let _=b/t;h.x=-e*Math.cos(i+_*n)*Math.sin(a+y*s),h.y=e*Math.cos(a+y*s),h.z=e*Math.sin(i+_*n)*Math.sin(a+y*s),f.push(h.x,h.y,h.z),c.copy(h).normalize(),m.push(c.x,c.y,c.z),p.push(_+x,1-y),v.push(l++)}u.push(v)}for(let g=0;g<r;g++)for(let v=0;v<t;v++){let y=u[g][v+1],x=u[g][v],b=u[g+1][v],_=u[g+1][v+1];(g!==0||a>0)&&d.push(y,x,_),(g!==r-1||o<Math.PI)&&d.push(x,b,_)}this.setIndex(d),this.setAttribute("position",new it(f,3)),this.setAttribute("normal",new it(m,3)),this.setAttribute("uv",new it(p,2))}static fromJSON(e){return new OR(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}},N7=class extends wt{constructor(e=1,t=.4,r=64,i=8,n=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:i,p:n,q:a},r=Math.floor(r),i=Math.floor(i);let s=[],o=[],l=[],u=[],h=new T,c=new T,d=new T,f=new T,m=new T,p=new T,g=new T;for(let y=0;y<=r;++y){let x=y/r*n*Math.PI*2;v(x,n,a,e,d),v(x+.01,n,a,e,f),p.subVectors(f,d),g.addVectors(f,d),m.crossVectors(p,g),g.crossVectors(m,p),m.normalize(),g.normalize();for(let b=0;b<=i;++b){let _=b/i*Math.PI*2,w=-t*Math.cos(_),E=t*Math.sin(_);h.x=d.x+(w*g.x+E*m.x),h.y=d.y+(w*g.y+E*m.y),h.z=d.z+(w*g.z+E*m.z),o.push(h.x,h.y,h.z),c.subVectors(h,d).normalize(),l.push(c.x,c.y,c.z),u.push(y/r),u.push(b/i)}}for(let y=1;y<=r;y++)for(let x=1;x<=i;x++){let b=(i+1)*(y-1)+(x-1),_=(i+1)*y+(x-1),w=(i+1)*y+x,E=(i+1)*(y-1)+x;s.push(b,_,E),s.push(_,w,E)}this.setIndex(s),this.setAttribute("position",new it(o,3)),this.setAttribute("normal",new it(l,3)),this.setAttribute("uv",new it(u,2));function v(y,x,b,_,w){let E=Math.cos(y),S=Math.sin(y),C=b/x*y,M=Math.cos(C);w.x=_*(2+M)*.5*E,w.y=_*(2+M)*S*.5,w.z=_*Math.sin(C)*.5}}static fromJSON(e){return new N7(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}};function $c(e,t,r){return z7(e)?new e.constructor(e.subarray(t,r!==void 0?r:e.length)):e.slice(t,r)}function xb(e,t,r){return!e||!r&&e.constructor===t?e:typeof t.BYTES_PER_ELEMENT=="number"?new t(e):Array.prototype.slice.call(e)}function z7(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Rwe(e){function t(n,a){return e[n]-e[a]}let r=e.length,i=new Array(r);for(let n=0;n!==r;++n)i[n]=n;return i.sort(t),i}function b5(e,t,r){let i=e.length,n=new e.constructor(i);for(let a=0,s=0;s!==i;++a){let o=r[a]*t;for(let l=0;l!==t;++l)n[s++]=e[o+l]}return n}function F7(e,t,r,i){let n=1,a=e[0];for(;a!==void 0&&a[i]===void 0;)a=e[n++];if(a===void 0)return;let s=a[i];if(s!==void 0)if(Array.isArray(s))do s=a[i],s!==void 0&&(t.push(a.time),r.push.apply(r,s)),a=e[n++];while(a!==void 0);else if(s.toArray!==void 0)do s=a[i],s!==void 0&&(t.push(a.time),s.toArray(r,r.length)),a=e[n++];while(a!==void 0);else do s=a[i],s!==void 0&&(t.push(a.time),r.push(s)),a=e[n++];while(a!==void 0)}var TE=class{constructor(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){let t=this.parameterPositions,r=this._cachedIndex,i=t[r],n=t[r-1];e:{t:{let a;r:{i:if(!(e<i)){for(let s=r+2;;){if(i===void 0){if(e<n)break i;return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===s)break;if(n=i,i=t[++r],e<i)break t}a=t.length;break r}if(!(e>=n)){let s=t[1];e<s&&(r=2,n=s);for(let o=r-2;;){if(n===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===o)break;if(i=n,n=t[--r-1],e>=n)break t}a=r,r=0;break r}break e}for(;r<a;){let s=r+a>>>1;e<t[s]?a=s:r=s+1}if(i=t[r],n=t[r-1],n===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,n,i)}return this.interpolate_(r,n,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){let t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,n=e*i;for(let a=0;a!==i;++a)t[a]=r[n+a];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}},kwe=class extends TE{constructor(e,t,r,i){super(e,t,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Dm,endingEnd:Dm}}intervalChanged_(e,t,r){let i=this.parameterPositions,n=e-2,a=e+1,s=i[n],o=i[a];if(s===void 0)switch(this.getSettings_().endingStart){case Om:n=e,s=2*t-r;break;case lS:n=i.length-2,s=t+i[n]-i[n+1];break;default:n=e,s=r}if(o===void 0)switch(this.getSettings_().endingEnd){case Om:a=e,o=2*r-t;break;case lS:a=1,o=r+i[1]-i[0];break;default:a=e-1,o=t}let l=(r-t)*.5,u=this.valueSize;this._weightPrev=l/(t-s),this._weightNext=l/(o-r),this._offsetPrev=n*u,this._offsetNext=a*u}interpolate_(e,t,r,i){let n=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=e*s,l=o-s,u=this._offsetPrev,h=this._offsetNext,c=this._weightPrev,d=this._weightNext,f=(r-t)/(i-t),m=f*f,p=m*f,g=-c*p+2*c*m-c*f,v=(1+c)*p+(-1.5-2*c)*m+(-.5+c)*f+1,y=(-1-d)*p+(1.5+d)*m+.5*f,x=d*p-d*m;for(let b=0;b!==s;++b)n[b]=g*a[u+b]+v*a[l+b]+y*a[o+b]+x*a[h+b];return n}},U7=class extends TE{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){let n=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=e*s,l=o-s,u=(r-t)/(i-t),h=1-u;for(let c=0;c!==s;++c)n[c]=a[l+c]*h+a[o+c]*u;return n}},Lwe=class extends TE{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}},Pu=class{constructor(e,t,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=xb(t,this.TimeBufferType),this.values=xb(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){let t=e.constructor,r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:xb(e.times,Array),values:xb(e.values,Array)};let i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new Lwe(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new U7(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new kwe(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case sS:t=this.InterpolantFactoryMethodDiscrete;break;case oS:t=this.InterpolantFactoryMethodLinear;break;case TC:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){let r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return sS;case this.InterpolantFactoryMethodLinear:return oS;case this.InterpolantFactoryMethodSmooth:return TC}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){let t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]+=e}return this}scale(e){if(e!==1){let t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]*=e}return this}trim(e,t){let r=this.times,i=r.length,n=0,a=i-1;for(;n!==i&&r[n]<e;)++n;for(;a!==-1&&r[a]>t;)--a;if(++a,n!==0||a!==i){n>=a&&(a=Math.max(a,1),n=a-1);let s=this.getValueSize();this.times=$c(r,n,a),this.values=$c(this.values,n*s,a*s)}return this}validate(){let e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);let r=this.times,i=this.values,n=r.length;n===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let s=0;s!==n;s++){let o=r[s];if(typeof o=="number"&&isNaN(o)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,s,o),e=!1;break}if(a!==null&&a>o){console.error("THREE.KeyframeTrack: Out of order keys.",this,s,o,a),e=!1;break}a=o}if(i!==void 0&&z7(i))for(let s=0,o=i.length;s!==o;++s){let l=i[s];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,s,l),e=!1;break}}return e}optimize(){let e=$c(this.times),t=$c(this.values),r=this.getValueSize(),i=this.getInterpolation()===TC,n=e.length-1,a=1;for(let s=1;s<n;++s){let o=!1,l=e[s],u=e[s+1];if(l!==u&&(s!==1||l!==e[0]))if(i)o=!0;else{let h=s*r,c=h-r,d=h+r;for(let f=0;f!==r;++f){let m=t[h+f];if(m!==t[c+f]||m!==t[d+f]){o=!0;break}}}if(o){if(s!==a){e[a]=e[s];let h=s*r,c=a*r;for(let d=0;d!==r;++d)t[c+d]=t[h+d]}++a}}if(n>0){e[a]=e[n];for(let s=n*r,o=a*r,l=0;l!==r;++l)t[o+l]=t[s+l];++a}return a!==e.length?(this.times=$c(e,0,a),this.values=$c(t,0,a*r)):(this.times=e,this.values=t),this}clone(){let e=$c(this.times,0),t=$c(this.values,0),r=this.constructor,i=new r(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}};Pu.prototype.TimeBufferType=Float32Array;Pu.prototype.ValueBufferType=Float32Array;Pu.prototype.DefaultInterpolation=oS;var pv=class extends Pu{};pv.prototype.ValueTypeName="bool";pv.prototype.ValueBufferType=Array;pv.prototype.DefaultInterpolation=sS;pv.prototype.InterpolantFactoryMethodLinear=void 0;pv.prototype.InterpolantFactoryMethodSmooth=void 0;var j7=class extends Pu{};j7.prototype.ValueTypeName="color";var gS=class extends Pu{};gS.prototype.ValueTypeName="number";var Bwe=class extends TE{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){let n=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=(r-t)/(i-t),l=e*s;for(let u=l+s;l!==u;l+=4)Gt.slerpFlat(n,0,a,l-s,a,l,o);return n}},K1=class extends Pu{InterpolantFactoryMethodLinear(e){return new Bwe(this.times,this.values,this.getValueSize(),e)}};K1.prototype.ValueTypeName="quaternion";K1.prototype.DefaultInterpolation=oS;K1.prototype.InterpolantFactoryMethodSmooth=void 0;var mv=class extends Pu{};mv.prototype.ValueTypeName="string";mv.prototype.ValueBufferType=Array;mv.prototype.DefaultInterpolation=sS;mv.prototype.InterpolantFactoryMethodLinear=void 0;mv.prototype.InterpolantFactoryMethodSmooth=void 0;var vS=class extends Pu{};vS.prototype.ValueTypeName="vector";var gD=class{constructor(e,t=-1,r,i=xR){this.name=e,this.tracks=r,this.duration=t,this.blendMode=i,this.uuid=ko(),this.duration<0&&this.resetDuration()}static parse(e){let t=[],r=e.tracks,i=1/(e.fps||1);for(let a=0,s=r.length;a!==s;++a)t.push(zwe(r[a]).scale(i));let n=new this(e.name,e.duration,t,e.blendMode);return n.uuid=e.uuid,n}static toJSON(e){let t=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let n=0,a=r.length;n!==a;++n)t.push(Pu.toJSON(r[n]));return i}static CreateFromMorphTargetSequence(e,t,r,i){let n=t.length,a=[];for(let s=0;s<n;s++){let o=[],l=[];o.push((s+n-1)%n,s,(s+1)%n),l.push(0,1,0);let u=Rwe(o);o=b5(o,1,u),l=b5(l,1,u),!i&&o[0]===0&&(o.push(n),l.push(l[0])),a.push(new gS(".morphTargetInfluences["+t[s].name+"]",o,l).scale(1/r))}return new this(e,-1,a)}static findByName(e,t){let r=e;if(!Array.isArray(e)){let i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,t,r){let i={},n=/^([\w-]*?)([\d]+)$/;for(let s=0,o=e.length;s<o;s++){let l=e[s],u=l.name.match(n);if(u&&u.length>1){let h=u[1],c=i[h];c||(i[h]=c=[]),c.push(l)}}let a=[];for(let s in i)a.push(this.CreateFromMorphTargetSequence(s,i[s],t,r));return a}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;let r=function(u,h,c,d,f){if(c.length!==0){let m=[],p=[];F7(c,m,p,d),m.length!==0&&f.push(new u(h,m,p))}},i=[],n=e.name||"default",a=e.fps||30,s=e.blendMode,o=e.length||-1,l=e.hierarchy||[];for(let u=0;u<l.length;u++){let h=l[u].keys;if(!(!h||h.length===0))if(h[0].morphTargets){let c={},d;for(d=0;d<h.length;d++)if(h[d].morphTargets)for(let f=0;f<h[d].morphTargets.length;f++)c[h[d].morphTargets[f]]=-1;for(let f in c){let m=[],p=[];for(let g=0;g!==h[d].morphTargets.length;++g){let v=h[d];m.push(v.time),p.push(v.morphTarget===f?1:0)}i.push(new gS(".morphTargetInfluence["+f+"]",m,p))}o=c.length*a}else{let c=".bones["+t[u].name+"]";r(vS,c+".position",h,"pos",i),r(K1,c+".quaternion",h,"rot",i),r(vS,c+".scale",h,"scl",i)}}return i.length===0?null:new this(n,o,i,s)}resetDuration(){let e=this.tracks,t=0;for(let r=0,i=e.length;r!==i;++r){let n=this.tracks[r];t=Math.max(t,n.times[n.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){let e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}};function Nwe(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return gS;case"vector":case"vector2":case"vector3":case"vector4":return vS;case"color":return j7;case"quaternion":return K1;case"bool":case"boolean":return pv;case"string":return mv}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}function zwe(e){if(e.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");let t=Nwe(e.type);if(e.times===void 0){let r=[],i=[];F7(e.keys,r,i,"value"),e.times=r,e.values=i}return t.parse!==void 0?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}var w5={enabled:!1,files:{},add:function(e,t){this.enabled!==!1&&(this.files[e]=t)},get:function(e){if(this.enabled!==!1)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},V7=class{constructor(e,t,r){let i=this,n=!1,a=0,s=0,o,l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(u){s++,n===!1&&i.onStart!==void 0&&i.onStart(u,a,s),n=!0},this.itemEnd=function(u){a++,i.onProgress!==void 0&&i.onProgress(u,a,s),a===s&&(n=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(u){i.onError!==void 0&&i.onError(u)},this.resolveURL=function(u){return o?o(u):u},this.setURLModifier=function(u){return o=u,this},this.addHandler=function(u,h){return l.push(u,h),this},this.removeHandler=function(u){let h=l.indexOf(u);return h!==-1&&l.splice(h,2),this},this.getHandler=function(u){for(let h=0,c=l.length;h<c;h+=2){let d=l[h],f=l[h+1];if(d.global&&(d.lastIndex=0),d.test(u))return f}return null}}},Fwe=new V7,IR=class{constructor(e){this.manager=e!==void 0?e:Fwe,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){let r=this;return new Promise(function(i,n){r.load(e,i,t,n)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}},Fu={},Uwe=class extends Error{constructor(e,t){super(e),this.response=t}},vD=class extends IR{constructor(e){super(e)}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let n=w5.get(e);if(n!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(n),this.manager.itemEnd(e)},0),n;if(Fu[e]!==void 0){Fu[e].push({onLoad:t,onProgress:r,onError:i});return}Fu[e]=[],Fu[e].push({onLoad:t,onProgress:r,onError:i});let a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),s=this.mimeType,o=this.responseType;fetch(a).then(l=>{if(l.status===200||l.status===0){if(l.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||l.body===void 0||l.body.getReader===void 0)return l;let u=Fu[e],h=l.body.getReader(),c=l.headers.get("Content-Length")||l.headers.get("X-File-Size"),d=c?parseInt(c):0,f=d!==0,m=0,p=new ReadableStream({start(g){v();function v(){h.read().then(({done:y,value:x})=>{if(y)g.close();else{m+=x.byteLength;let b=new ProgressEvent("progress",{lengthComputable:f,loaded:m,total:d});for(let _=0,w=u.length;_<w;_++){let E=u[_];E.onProgress&&E.onProgress(b)}g.enqueue(x),v()}})}}});return new Response(p)}else throw new Uwe(`fetch for "${l.url}" responded with ${l.status}: ${l.statusText}`,l)}).then(l=>{switch(o){case"arraybuffer":return l.arrayBuffer();case"blob":return l.blob();case"document":return l.text().then(u=>new DOMParser().parseFromString(u,s));case"json":return l.json();default:if(s===void 0)return l.text();{let u=/charset="?([^;"\s]*)"?/i.exec(s),h=u&&u[1]?u[1].toLowerCase():void 0,c=new TextDecoder(h);return l.arrayBuffer().then(d=>c.decode(d))}}}).then(l=>{w5.add(e,l);let u=Fu[e];delete Fu[e];for(let h=0,c=u.length;h<c;h++){let d=u[h];d.onLoad&&d.onLoad(l)}}).catch(l=>{let u=Fu[e];if(u===void 0)throw this.manager.itemError(e),l;delete Fu[e];for(let h=0,c=u.length;h<c;h++){let d=u[h];d.onError&&d.onError(l)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}},Z1=class extends Xr{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new At(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){let t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}},jwe=class extends Z1{constructor(e,t,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Xr.DEFAULT_UP),this.updateMatrix(),this.groundColor=new At(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}},nA=new ze,_5=new T,S5=new T,RR=class{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new re(512,512),this.map=null,this.mapPass=null,this.matrix=new ze,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new SR,this._frameExtents=new re(1,1),this._viewportCount=1,this._viewports=[new Wt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){let t=this.camera,r=this.matrix;_5.setFromMatrixPosition(e.matrixWorld),t.position.copy(_5),S5.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(S5),t.updateMatrixWorld(),nA.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(nA),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(nA)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){let e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}},Vwe=class extends RR{constructor(){super(new ma(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){let t=this.camera,r=o1*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,n=e.distance||t.far;(r!==t.fov||i!==t.aspect||n!==t.far)&&(t.fov=r,t.aspect=i,t.far=n,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}},Hwe=class extends Z1{constructor(e,t,r=0,i=Math.PI/3,n=0,a=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Xr.DEFAULT_UP),this.updateMatrix(),this.target=new Xr,this.distance=r,this.angle=i,this.penumbra=n,this.decay=a,this.map=null,this.shadow=new Vwe}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},E5=new ze,t0=new T,aA=new T,Gwe=class extends RR{constructor(){super(new ma(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new re(4,2),this._viewportCount=6,this._viewports=[new Wt(2,1,1,1),new Wt(0,1,1,1),new Wt(3,1,1,1),new Wt(1,1,1,1),new Wt(3,0,1,1),new Wt(1,0,1,1)],this._cubeDirections=[new T(1,0,0),new T(-1,0,0),new T(0,0,1),new T(0,0,-1),new T(0,1,0),new T(0,-1,0)],this._cubeUps=[new T(0,1,0),new T(0,1,0),new T(0,1,0),new T(0,1,0),new T(0,0,1),new T(0,0,-1)]}updateMatrices(e,t=0){let r=this.camera,i=this.matrix,n=e.distance||r.far;n!==r.far&&(r.far=n,r.updateProjectionMatrix()),t0.setFromMatrixPosition(e.matrixWorld),r.position.copy(t0),aA.copy(r.position),aA.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(aA),r.updateMatrixWorld(),i.makeTranslation(-t0.x,-t0.y,-t0.z),E5.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(E5)}},Wwe=class extends Z1{constructor(e,t,r=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new Gwe}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}},$we=class extends RR{constructor(){super(new ER(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}},Ywe=class extends Z1{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Xr.DEFAULT_UP),this.updateMatrix(),this.target=new Xr,this.shadow=new $we}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},qwe=class extends wt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){let e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}},H7=class extends IR{constructor(e){super(e)}load(e,t,r,i){let n=this,a=new vD(n.manager);a.setPath(n.path),a.setRequestHeader(n.requestHeader),a.setWithCredentials(n.withCredentials),a.load(e,function(s){try{t(n.parse(JSON.parse(s)))}catch(o){i?i(o):console.error(o),n.manager.itemError(e)}},r,i)}parse(e){let t={},r={};function i(c,d){if(t[d]!==void 0)return t[d];let f=c.interleavedBuffers[d],m=n(c,f.buffer),p=Qx(f.type,m),g=new twe(p,f.stride);return g.uuid=f.uuid,t[d]=g,g}function n(c,d){if(r[d]!==void 0)return r[d];let f=c.arrayBuffers[d],m=new Uint32Array(f).buffer;return r[d]=m,m}let a=e.isInstancedBufferGeometry?new qwe:new wt,s=e.data.index;if(s!==void 0){let c=Qx(s.type,s.array);a.setIndex(new Bt(c,1))}let o=e.data.attributes;for(let c in o){let d=o[c],f;if(d.isInterleavedBufferAttribute){let m=i(e.data,d.data);f=new fD(m,d.itemSize,d.offset,d.normalized)}else{let m=Qx(d.type,d.array),p=d.isInstancedBufferAttribute?iwe:Bt;f=new p(m,d.itemSize,d.normalized)}d.name!==void 0&&(f.name=d.name),d.usage!==void 0&&f.setUsage(d.usage),d.updateRange!==void 0&&(f.updateRange.offset=d.updateRange.offset,f.updateRange.count=d.updateRange.count),a.setAttribute(c,f)}let l=e.data.morphAttributes;if(l)for(let c in l){let d=l[c],f=[];for(let m=0,p=d.length;m<p;m++){let g=d[m],v;if(g.isInterleavedBufferAttribute){let y=i(e.data,g.data);v=new fD(y,g.itemSize,g.offset,g.normalized)}else{let y=Qx(g.type,g.array);v=new Bt(y,g.itemSize,g.normalized)}g.name!==void 0&&(v.name=g.name),f.push(v)}a.morphAttributes[c]=f}e.data.morphTargetsRelative&&(a.morphTargetsRelative=!0);let u=e.data.groups||e.data.drawcalls||e.data.offsets;if(u!==void 0)for(let c=0,d=u.length;c!==d;++c){let f=u[c];a.addGroup(f.start,f.count,f.materialIndex)}let h=e.data.boundingSphere;if(h!==void 0){let c=new T;h.center!==void 0&&c.fromArray(h.center),a.boundingSphere=new Ds(c,h.radius)}return e.name&&(a.name=e.name),e.userData&&(a.userData=e.userData),a}},Xwe=class{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=M5(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){let t=M5();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}};function M5(){return(typeof performance>"u"?Date:performance).now()}var Qwe=class{constructor(e,t,r){this.binding=e,this.valueSize=r;let i,n,a;switch(t){case"quaternion":i=this._slerp,n=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,n=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,n=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=n,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){let r=this.buffer,i=this.valueSize,n=e*i+i,a=this.cumulativeWeight;if(a===0){for(let s=0;s!==i;++s)r[n+s]=r[s];a=t}else{a+=t;let s=t/a;this._mixBufferRegion(r,n,0,s,i)}this.cumulativeWeight=a}accumulateAdditive(e){let t=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){let t=this.valueSize,r=this.buffer,i=e*t+t,n=this.cumulativeWeight,a=this.cumulativeWeightAdditive,s=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,n<1){let o=t*this._origIndex;this._mixBufferRegion(r,i,o,1-n,t)}a>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*t,1,t);for(let o=t,l=t+t;o!==l;++o)if(r[o]!==r[o+t]){s.setValue(r,i);break}}saveOriginalState(){let e=this.binding,t=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(t,i);for(let n=r,a=i;n!==a;++n)t[n]=t[i+n%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){let e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){let e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){let e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,i,n){if(i>=.5)for(let a=0;a!==n;++a)e[t+a]=e[r+a]}_slerp(e,t,r,i){Gt.slerpFlat(e,t,e,t,e,r,i)}_slerpAdditive(e,t,r,i,n){let a=this._workIndex*n;Gt.multiplyQuaternionsFlat(e,a,e,t,e,r),Gt.slerpFlat(e,t,e,t,e,a,i)}_lerp(e,t,r,i,n){let a=1-i;for(let s=0;s!==n;++s){let o=t+s;e[o]=e[o]*a+e[r+s]*i}}_lerpAdditive(e,t,r,i,n){for(let a=0;a!==n;++a){let s=t+a;e[s]=e[s]+e[r+a]*i}}},kR="\\[\\]\\.:\\/",Kwe=new RegExp("["+kR+"]","g"),LR="[^"+kR+"]",Zwe="[^"+kR.replace("\\.","")+"]",Jwe=/((?:WC+[\/:])*)/.source.replace("WC",LR),e_e=/(WCOD+)?/.source.replace("WCOD",Zwe),t_e=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",LR),r_e=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",LR),i_e=new RegExp("^"+Jwe+e_e+t_e+r_e+"$"),n_e=["material","materials","bones","map"],a_e=class{constructor(e,t,r){let i=r||Jr.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();let r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,t)}setValue(e,t){let r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,n=r.length;i!==n;++i)r[i].setValue(e,t)}bind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}},Jr=class{constructor(e,t,r){this.path=t,this.parsedPath=r||Jr.parseTrackName(t),this.node=Jr.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new Jr.Composite(e,t,r):new Jr(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Kwe,"")}static parseTrackName(e){let t=i_e.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);let r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){let n=r.nodeName.substring(i+1);n_e.indexOf(n)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=n)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){let r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){let r=function(n){for(let a=0;a<n.length;a++){let s=n[a];if(s.name===t||s.uuid===t)return s;let o=r(s.children);if(o)return o}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){let r=this.resolvedProperty;for(let i=0,n=r.length;i!==n;++i)e[t++]=r[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){let r=this.resolvedProperty;for(let i=0,n=r.length;i!==n;++i)r[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){let r=this.resolvedProperty;for(let i=0,n=r.length;i!==n;++i)r[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){let r=this.resolvedProperty;for(let i=0,n=r.length;i!==n;++i)r[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node,t=this.parsedPath,r=t.objectName,i=t.propertyName,n=t.propertyIndex;if(e||(e=Jr.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(r){let l=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===l){l=u;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(l!==void 0){if(e[l]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[l]}}let a=e[i];if(a===void 0){let l=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+l+"."+i+" but it wasn't found.",e);return}let s=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?s=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(s=this.Versioning.MatrixWorldNeedsUpdate);let o=this.BindingType.Direct;if(n!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[n]!==void 0&&(n=e.morphTargetDictionary[n])}o=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=n}else a.fromArray!==void 0&&a.toArray!==void 0?(o=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(o=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=i;this.getValue=this.GetterByBindingType[o],this.setValue=this.SetterByBindingTypeAndVersioning[o][s]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}};Jr.Composite=a_e;Jr.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Jr.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Jr.prototype.GetterByBindingType=[Jr.prototype._getValue_direct,Jr.prototype._getValue_array,Jr.prototype._getValue_arrayElement,Jr.prototype._getValue_toArray];Jr.prototype.SetterByBindingTypeAndVersioning=[[Jr.prototype._setValue_direct,Jr.prototype._setValue_direct_setNeedsUpdate,Jr.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Jr.prototype._setValue_array,Jr.prototype._setValue_array_setNeedsUpdate,Jr.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Jr.prototype._setValue_arrayElement,Jr.prototype._setValue_arrayElement_setNeedsUpdate,Jr.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Jr.prototype._setValue_fromArray,Jr.prototype._setValue_fromArray_setNeedsUpdate,Jr.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var s_e=class{constructor(e,t,r=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=i;let n=t.tracks,a=n.length,s=new Array(a),o={endingStart:Dm,endingEnd:Dm};for(let l=0;l!==a;++l){let u=n[l].createInterpolant(null);s[l]=u,u.settings=o}this._interpolantSettings=o,this._interpolants=s,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=l7,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){let i=this._clip.duration,n=e._clip.duration,a=n/i,s=i/n;e.warp(1,a,t),this.warp(s,1,t)}return this}crossFadeTo(e,t,r){return e.crossFadeFrom(this,t,r)}stopFading(){let e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){let i=this._mixer,n=i.time,a=this.timeScale,s=this._timeScaleInterpolant;s===null&&(s=i._lendControlInterpolant(),this._timeScaleInterpolant=s);let o=s.parameterPositions,l=s.sampleValues;return o[0]=n,o[1]=n+r,l[0]=e/a,l[1]=t/a,this}stopWarping(){let e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,i){if(!this.enabled){this._updateWeight(e);return}let n=this._startTime;if(n!==null){let o=(e-n)*r;o<0||r===0?t=0:(this._startTime=null,t=r*o)}t*=this._updateTimeScale(e);let a=this._updateTime(t),s=this._updateWeight(e);if(s>0){let o=this._interpolants,l=this._propertyBindings;switch(this.blendMode){case Uve:for(let u=0,h=o.length;u!==h;++u)o[u].evaluate(a),l[u].accumulateAdditive(s);break;case xR:default:for(let u=0,h=o.length;u!==h;++u)o[u].evaluate(a),l[u].accumulate(i,s)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;let r=this._weightInterpolant;if(r!==null){let i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;let r=this._timeScaleInterpolant;if(r!==null){let i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){let t=this._clip.duration,r=this.loop,i=this.time+e,n=this._loopCount,a=r===yR;if(e===0)return n===-1?i:a&&(n&1)===1?t-i:i;if(r===o7){n===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(n===-1&&(e>=0?(n=0,this._setEndings(!0,this.repetitions===0,a)):this._setEndings(this.repetitions===0,!0,a)),i>=t||i<0){let s=Math.floor(i/t);i-=t*s,n+=Math.abs(s);let o=this.repetitions-n;if(o<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(o===1){let l=e<0;this._setEndings(l,!l,a)}else this._setEndings(!1,!1,a);this._loopCount=n,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:s})}}else this.time=i;if(a&&(n&1)===1)return t-i}return i}_setEndings(e,t,r){let i=this._interpolantSettings;r?(i.endingStart=Om,i.endingEnd=Om):(e?i.endingStart=this.zeroSlopeAtStart?Om:Dm:i.endingStart=lS,t?i.endingEnd=this.zeroSlopeAtEnd?Om:Dm:i.endingEnd=lS)}_scheduleFading(e,t,r){let i=this._mixer,n=i.time,a=this._weightInterpolant;a===null&&(a=i._lendControlInterpolant(),this._weightInterpolant=a);let s=a.parameterPositions,o=a.sampleValues;return s[0]=n,o[0]=t,s[1]=n+e,o[1]=r,this}},o_e=new Float32Array(1),l_e=class extends sa{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){let r=e._localRoot||this._root,i=e._clip.tracks,n=i.length,a=e._propertyBindings,s=e._interpolants,o=r.uuid,l=this._bindingsByRootAndName,u=l[o];u===void 0&&(u={},l[o]=u);for(let h=0;h!==n;++h){let c=i[h],d=c.name,f=u[d];if(f!==void 0)++f.referenceCount,a[h]=f;else{if(f=a[h],f!==void 0){f._cacheIndex===null&&(++f.referenceCount,this._addInactiveBinding(f,o,d));continue}let m=t&&t._propertyBindings[h].binding.parsedPath;f=new Qwe(Jr.create(r,d,m),c.ValueTypeName,c.getValueSize()),++f.referenceCount,this._addInactiveBinding(f,o,d),a[h]=f}s[h].resultBuffer=f.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){let r=(e._localRoot||this._root).uuid,i=e._clip.uuid,n=this._actionsByClip[i];this._bindAction(e,n&&n.knownActions[0]),this._addInactiveAction(e,i,r)}let t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){let n=t[r];n.useCount++===0&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){let t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){let n=t[r];--n.useCount===0&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;let e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){let t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,r){let i=this._actions,n=this._actionsByClip,a=n[t];if(a===void 0)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,n[t]=a;else{let s=a.knownActions;e._byClipCacheIndex=s.length,s.push(e)}e._cacheIndex=i.length,i.push(e),a.actionByRoot[r]=e}_removeInactiveAction(e){let t=this._actions,r=t[t.length-1],i=e._cacheIndex;r._cacheIndex=i,t[i]=r,t.pop(),e._cacheIndex=null;let n=e._clip.uuid,a=this._actionsByClip,s=a[n],o=s.knownActions,l=o[o.length-1],u=e._byClipCacheIndex;l._byClipCacheIndex=u,o[u]=l,o.pop(),e._byClipCacheIndex=null;let h=s.actionByRoot,c=(e._localRoot||this._root).uuid;delete h[c],o.length===0&&delete a[n],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){let t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){let n=t[r];--n.referenceCount===0&&this._removeInactiveBinding(n)}}_lendAction(e){let t=this._actions,r=e._cacheIndex,i=this._nActiveActions++,n=t[i];e._cacheIndex=i,t[i]=e,n._cacheIndex=r,t[r]=n}_takeBackAction(e){let t=this._actions,r=e._cacheIndex,i=--this._nActiveActions,n=t[i];e._cacheIndex=i,t[i]=e,n._cacheIndex=r,t[r]=n}_addInactiveBinding(e,t,r){let i=this._bindingsByRootAndName,n=this._bindings,a=i[t];a===void 0&&(a={},i[t]=a),a[r]=e,e._cacheIndex=n.length,n.push(e)}_removeInactiveBinding(e){let t=this._bindings,r=e.binding,i=r.rootNode.uuid,n=r.path,a=this._bindingsByRootAndName,s=a[i],o=t[t.length-1],l=e._cacheIndex;o._cacheIndex=l,t[l]=o,t.pop(),delete s[n],Object.keys(s).length===0&&delete a[i]}_lendBinding(e){let t=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,n=t[i];e._cacheIndex=i,t[i]=e,n._cacheIndex=r,t[r]=n}_takeBackBinding(e){let t=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,n=t[i];e._cacheIndex=i,t[i]=e,n._cacheIndex=r,t[r]=n}_lendControlInterpolant(){let e=this._controlInterpolants,t=this._nActiveControlInterpolants++,r=e[t];return r===void 0&&(r=new U7(new Float32Array(2),new Float32Array(2),1,o_e),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){let t=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,n=t[i];e.__cacheIndex=i,t[i]=e,n.__cacheIndex=r,t[r]=n}clipAction(e,t,r){let i=t||this._root,n=i.uuid,a=typeof e=="string"?gD.findByName(i,e):e,s=a!==null?a.uuid:e,o=this._actionsByClip[s],l=null;if(r===void 0&&(a!==null?r=a.blendMode:r=xR),o!==void 0){let h=o.actionByRoot[n];if(h!==void 0&&h.blendMode===r)return h;l=o.knownActions[0],a===null&&(a=l._clip)}if(a===null)return null;let u=new s_e(this,a,t,r);return this._bindAction(u,l),this._addInactiveAction(u,s,n),u}existingAction(e,t){let r=t||this._root,i=r.uuid,n=typeof e=="string"?gD.findByName(r,e):e,a=n?n.uuid:e,s=this._actionsByClip[a];return s!==void 0&&s.actionByRoot[i]||null}stopAllAction(){let e=this._actions,t=this._nActiveActions;for(let r=t-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;let t=this._actions,r=this._nActiveActions,i=this.time+=e,n=Math.sign(e),a=this._accuIndex^=1;for(let l=0;l!==r;++l)t[l]._update(i,e,n,a);let s=this._bindings,o=this._nActiveBindings;for(let l=0;l!==o;++l)s[l].apply(a);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){let t=this._actions,r=e.uuid,i=this._actionsByClip,n=i[r];if(n!==void 0){let a=n.knownActions;for(let s=0,o=a.length;s!==o;++s){let l=a[s];this._deactivateAction(l);let u=l._cacheIndex,h=t[t.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,h._cacheIndex=u,t[u]=h,t.pop(),this._removeInactiveBindingsForAction(l)}delete i[r]}}uncacheRoot(e){let t=e.uuid,r=this._actionsByClip;for(let a in r){let s=r[a].actionByRoot,o=s[t];o!==void 0&&(this._deactivateAction(o),this._removeInactiveAction(o))}let i=this._bindingsByRootAndName,n=i[t];if(n!==void 0)for(let a in n){let s=n[a];s.restoreOriginalState(),this._removeInactiveBinding(s)}}uncacheAction(e,t){let r=this.existingAction(e,t);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}},Le=class{constructor(e){this.value=e}clone(){return new Le(this.value.clone===void 0?this.value:this.value.clone())}},G7=class{constructor(e,t,r=0,i=1/0){this.ray=new cv(e,t),this.near=r,this.far=i,this.camera=null,this.layers=new wR,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,r=[]){return yD(e,this,r,t),r.sort(C5),r}intersectObjects(e,t=!0,r=[]){for(let i=0,n=e.length;i<n;i++)yD(e[i],this,r,t);return r.sort(C5),r}};function C5(e,t){return e.distance-t.distance}function yD(e,t,r,i){if(e.layers.test(t.layers)&&e.raycast(t,r),i===!0){let n=e.children;for(let a=0,s=n.length;a<s;a++)yD(n[a],t,r,!0)}}var A5=class{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(Sn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}},T5=new re,u_e=class{constructor(e=new re(1/0,1/0),t=new re(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let r=T5.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return T5.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},P5=new T,bb=new T,Lo=class{constructor(e=new T,t=new T){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){P5.subVectors(e,this.start),bb.subVectors(this.end,this.start);let r=bb.dot(bb),i=bb.dot(P5)/r;return t&&(i=Sn(i,0,1)),i}closestPointToPoint(e,t,r){let i=this.closestPointToPointParameter(e,t);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}},D5=new T,c_e=class extends Xr{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";let r=new wt,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let a=0,s=1,o=32;a<o;a++,s++){let l=a/o*Math.PI*2,u=s/o*Math.PI*2;i.push(Math.cos(l),Math.sin(l),1,Math.cos(u),Math.sin(u),1)}r.setAttribute("position",new it(i,3));let n=new md({fog:!1,toneMapped:!1});this.cone=new Q1(r,n),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);let e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),D5.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(D5),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}},h_e=class extends gs{constructor(e,t,r){let i=new OR(t,4,2),n=new X1({wireframe:!0,fog:!1,toneMapped:!1});super(i,n),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}},O5=new T,wb=new T,I5=new T,d_e=class extends Xr{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",t===void 0&&(t=1);let i=new wt;i.setAttribute("position",new it([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));let n=new md({fog:!1,toneMapped:!1});this.lightPlane=new fS(i,n),this.add(this.lightPlane),i=new wt,i.setAttribute("position",new it([0,0,0,0,0,1],3)),this.targetLine=new fS(i,n),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),O5.setFromMatrixPosition(this.light.matrixWorld),wb.setFromMatrixPosition(this.light.target.matrixWorld),I5.subVectors(wb,O5),this.lightPlane.lookAt(wb),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(wb),this.targetLine.scale.z=I5.length()}},_b=new T,Ai=new dv,yS=class extends Q1{constructor(e){let t=new wt,r=new md({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],n=[],a={};s("n1","n2"),s("n2","n4"),s("n4","n3"),s("n3","n1"),s("f1","f2"),s("f2","f4"),s("f4","f3"),s("f3","f1"),s("n1","f1"),s("n2","f2"),s("n3","f3"),s("n4","f4"),s("p","n1"),s("p","n2"),s("p","n3"),s("p","n4"),s("u1","u2"),s("u2","u3"),s("u3","u1"),s("c","t"),s("p","c"),s("cn1","cn2"),s("cn3","cn4"),s("cf1","cf2"),s("cf3","cf4");function s(f,m){o(f),o(m)}function o(f){i.push(0,0,0),n.push(0,0,0),a[f]===void 0&&(a[f]=[]),a[f].push(i.length/3-1)}t.setAttribute("position",new it(i,3)),t.setAttribute("color",new it(n,3)),super(t,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();let l=new At(16755200),u=new At(16711680),h=new At(43775),c=new At(16777215),d=new At(3355443);this.setColors(l,u,h,c,d)}setColors(e,t,r,i,n){let a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,r.r,r.g,r.b),a.setXYZ(33,r.r,r.g,r.b),a.setXYZ(34,r.r,r.g,r.b),a.setXYZ(35,r.r,r.g,r.b),a.setXYZ(36,r.r,r.g,r.b),a.setXYZ(37,r.r,r.g,r.b),a.setXYZ(38,i.r,i.g,i.b),a.setXYZ(39,i.r,i.g,i.b),a.setXYZ(40,n.r,n.g,n.b),a.setXYZ(41,n.r,n.g,n.b),a.setXYZ(42,n.r,n.g,n.b),a.setXYZ(43,n.r,n.g,n.b),a.setXYZ(44,n.r,n.g,n.b),a.setXYZ(45,n.r,n.g,n.b),a.setXYZ(46,n.r,n.g,n.b),a.setXYZ(47,n.r,n.g,n.b),a.setXYZ(48,n.r,n.g,n.b),a.setXYZ(49,n.r,n.g,n.b),a.needsUpdate=!0}update(){let e=this.geometry,t=this.pointMap,r=1,i=1;Ai.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Fi("c",t,e,Ai,0,0,-1),Fi("t",t,e,Ai,0,0,1),Fi("n1",t,e,Ai,-r,-i,-1),Fi("n2",t,e,Ai,r,-i,-1),Fi("n3",t,e,Ai,-r,i,-1),Fi("n4",t,e,Ai,r,i,-1),Fi("f1",t,e,Ai,-r,-i,1),Fi("f2",t,e,Ai,r,-i,1),Fi("f3",t,e,Ai,-r,i,1),Fi("f4",t,e,Ai,r,i,1),Fi("u1",t,e,Ai,r*.7,i*1.1,-1),Fi("u2",t,e,Ai,-r*.7,i*1.1,-1),Fi("u3",t,e,Ai,0,i*2,-1),Fi("cf1",t,e,Ai,-r,0,1),Fi("cf2",t,e,Ai,r,0,1),Fi("cf3",t,e,Ai,0,-i,1),Fi("cf4",t,e,Ai,0,i,1),Fi("cn1",t,e,Ai,-r,0,-1),Fi("cn2",t,e,Ai,r,0,-1),Fi("cn3",t,e,Ai,0,-i,-1),Fi("cn4",t,e,Ai,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}};function Fi(e,t,r,i,n,a,s){_b.set(n,a,s).unproject(i);let o=t[e];if(o!==void 0){let l=r.getAttribute("position");for(let u=0,h=o.length;u<h;u++)l.setXYZ(o[u],_b.x,_b.y,_b.z)}}var xS=class extends Q1{constructor(e,t=16776960){let r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],n=new wt;n.setIndex(new Bt(r,1)),n.setAttribute("position",new it(i,3)),super(n,new md({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){let t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}},f_e=class extends Q1{constructor(e=1){let t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new wt;i.setAttribute("position",new it(t,3)),i.setAttribute("color",new it(r,3));let n=new md({vertexColors:!0,toneMapped:!1});super(i,n),this.type="AxesHelper"}setColors(e,t,r){let i=new At,n=this.geometry.attributes.color.array;return i.set(e),i.toArray(n,0),i.toArray(n,3),i.set(t),i.toArray(n,6),i.toArray(n,9),i.set(r),i.toArray(n,12),i.toArray(n,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}};typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:uv}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=uv);var r0=".",BR=Symbol("target"),W7=Symbol("unsubscribe");function xD(e){return e instanceof Date||e instanceof Set||e instanceof Map||e instanceof WeakSet||e instanceof WeakMap||ArrayBuffer.isView(e)}function p_e(e){return(typeof e=="object"?e===null:typeof e!="function")||e instanceof RegExp}var au=Array.isArray;function NR(e){return typeof e=="symbol"}var m_e={after:(e,t)=>au(e)?e.slice(t.length):t===""?e:e.slice(t.length+1),concat:(e,t)=>au(e)?(e=[...e],t&&e.push(t),e):t&&t.toString!==void 0?(e!==""&&(e+=r0),NR(t)?e+t.toString():e+t):e,initial:e=>{if(au(e))return e.slice(0,-1);if(e==="")return e;let t=e.lastIndexOf(r0);return t===-1?"":e.slice(0,t)},last:e=>{if(au(e))return e[e.length-1]||"";if(e==="")return e;let t=e.lastIndexOf(r0);return t===-1?e:e.slice(t+1)},walk:(e,t)=>{if(au(e))for(let r of e)t(r);else if(e!==""){let r=0,i=e.indexOf(r0);if(i===-1)t(e);else for(;r<e.length;)i===-1&&(i=e.length),t(e.slice(r,i)),r=i+1,i=e.indexOf(r0,r)}},get(e,t){return this.walk(t,r=>{e&&(e=e[r])}),e}},yo=m_e;function g_e(e){return typeof e=="object"&&typeof e.next=="function"}function v_e(e,t,r,i,n){let a=e.next;if(t.name==="entries")e.next=function(){let s=a.call(this);return s.done===!1&&(s.value[0]=n(s.value[0],t,s.value[0],i),s.value[1]=n(s.value[1],t,s.value[0],i)),s};else if(t.name==="values"){let s=r[BR].keys();e.next=function(){let o=a.call(this);return o.done===!1&&(o.value=n(o.value,t,s.next().value,i)),o}}else e.next=function(){let s=a.call(this);return s.done===!1&&(s.value=n(s.value,t,s.value,i)),s};return e}function R5(e,t,r){return e.isUnsubscribed||t.ignoreSymbols&&NR(r)||t.ignoreUnderscores&&r.charAt(0)==="_"||"ignoreKeys"in t&&t.ignoreKeys.includes(r)}var y_e=class{constructor(e){this._equals=e,this._proxyCache=new WeakMap,this._pathCache=new WeakMap,this.isUnsubscribed=!1}_getDescriptorCache(){return this._descriptorCache===void 0&&(this._descriptorCache=new WeakMap),this._descriptorCache}_getProperties(e){let t=this._getDescriptorCache(),r=t.get(e);return r===void 0&&(r={},t.set(e,r)),r}_getOwnPropertyDescriptor(e,t){if(this.isUnsubscribed)return Reflect.getOwnPropertyDescriptor(e,t);let r=this._getProperties(e),i=r[t];return i===void 0&&(i=Reflect.getOwnPropertyDescriptor(e,t),r[t]=i),i}getProxy(e,t,r,i){if(this.isUnsubscribed)return e;let n=e[i],a=n||e;this._pathCache.set(a,t);let s=this._proxyCache.get(a);return s===void 0&&(s=n===void 0?new Proxy(e,r):e,this._proxyCache.set(a,s)),s}getPath(e){return this.isUnsubscribed?void 0:this._pathCache.get(e)}isDetached(e,t){return!Object.is(e,yo.get(t,this.getPath(e)))}defineProperty(e,t,r){return Reflect.defineProperty(e,t,r)?(this.isUnsubscribed||(this._getProperties(e)[t]=r),!0):!1}setProperty(e,t,r,i,n){if(!this._equals(n,r)||!(t in e)){let a=this._getOwnPropertyDescriptor(e,t);return a!==void 0&&"set"in a?Reflect.set(e,t,r,i):Reflect.set(e,t,r)}return!0}deleteProperty(e,t,r){if(Reflect.deleteProperty(e,t)){if(!this.isUnsubscribed){let i=this._getDescriptorCache().get(e);i&&(delete i[t],this._pathCache.delete(r))}return!0}return!1}isSameDescriptor(e,t,r){let i=this._getOwnPropertyDescriptor(t,r);return e!==void 0&&i!==void 0&&Object.is(e.value,i.value)&&(e.writable||!1)===(i.writable||!1)&&(e.enumerable||!1)===(i.enumerable||!1)&&(e.configurable||!1)===(i.configurable||!1)&&e.get===i.get&&e.set===i.set}isGetInvariant(e,t){let r=this._getOwnPropertyDescriptor(e,t);return r!==void 0&&r.configurable!==!0&&r.writable!==!0}unsubscribe(){this._descriptorCache=null,this._pathCache=null,this._proxyCache=null,this.isUnsubscribed=!0}};function bD(e){return toString.call(e)==="[object Object]"}function Sb(){return!0}function Np(e,t){return e.length!==t.length||e.some((r,i)=>t[i]!==r)}var $7=new Set(["hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),x_e=new Set(["concat","includes","indexOf","join","keys","lastIndexOf"]),Y7={push:Sb,pop:Sb,shift:Sb,unshift:Sb,copyWithin:Np,reverse:Np,sort:Np,splice:Np,flat:Np,fill:Np},b_e=new Set([...$7,...x_e,...Object.keys(Y7)]);function Eb(e,t){if(e.size!==t.size)return!0;for(let r of e)if(!t.has(r))return!0;return!1}var q7=["keys","values","entries"],X7=new Set(["has","toString"]),Q7={add:Eb,clear:Eb,delete:Eb,forEach:Eb},w_e=new Set([...X7,...Object.keys(Q7),...q7]);function Mb(e,t){if(e.size!==t.size)return!0;let r;for(let[i,n]of e)if(r=t.get(i),r!==n||r===void 0&&!t.has(i))return!0;return!1}var __e=new Set([...X7,"get"]),K7={set:Mb,clear:Mb,delete:Mb,forEach:Mb},S_e=new Set([...__e,...Object.keys(K7),...q7]),id=class{constructor(e,t,r,i){this._path=t,this._isChanged=!1,this._clonedCache=new Set,this._hasOnValidate=i,this._changes=i?[]:null,this.clone=t===void 0?e:this._shallowClone(e)}static isHandledMethod(e){return $7.has(e)}_shallowClone(e){let t=e;if(bD(e))t={...e};else if(au(e))t=[...e];else if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set([...e].map(r=>this._shallowClone(r)));else if(e instanceof Map){t=new Map;for(let[r,i]of e.entries())t.set(r,this._shallowClone(i))}return this._clonedCache.add(t),t}preferredThisArg(e,t,r,i){return e?(au(i)?this._onIsChanged=Y7[t]:i instanceof Set?this._onIsChanged=Q7[t]:i instanceof Map&&(this._onIsChanged=K7[t]),i):r}update(e,t,r){let i=yo.after(e,this._path);if(t!=="length"){let n=this.clone;yo.walk(i,a=>{n&&n[a]&&(this._clonedCache.has(n[a])||(n[a]=this._shallowClone(n[a])),n=n[a])}),this._hasOnValidate&&this._changes.push({path:i,property:t,previous:r}),n&&n[t]&&(n[t]=r)}this._isChanged=!0}undo(e){let t;for(let r=this._changes.length-1;r!==-1;r--)t=this._changes[r],yo.get(e,t.path)[t.property]=t.previous}isChanged(e){return this._onIsChanged===void 0?this._isChanged:this._onIsChanged(this.clone,e)}},k5=class extends id{static isHandledMethod(e){return b_e.has(e)}},E_e=class extends id{undo(e){e.setTime(this.clone.getTime())}isChanged(e,t){return!t(this.clone.valueOf(),e.valueOf())}},L5=class extends id{static isHandledMethod(e){return w_e.has(e)}undo(e){for(let t of this.clone)e.add(t);for(let t of e)this.clone.has(t)||e.delete(t)}},B5=class extends id{static isHandledMethod(e){return S_e.has(e)}undo(e){for(let[t,r]of this.clone.entries())e.set(t,r);for(let t of e.keys())this.clone.has(t)||e.delete(t)}},M_e=class extends id{constructor(e,t,r,i){super(void 0,t,r,i),this._arg1=r[0],this._weakValue=e.has(this._arg1)}isChanged(e){return this._weakValue!==e.has(this._arg1)}undo(e){this._weakValue&&!e.has(this._arg1)?e.add(this._arg1):e.delete(this._arg1)}},C_e=class extends id{constructor(e,t,r,i){super(void 0,t,r,i),this._weakKey=r[0],this._weakHas=e.has(this._weakKey),this._weakValue=e.get(this._weakKey)}isChanged(e){return this._weakValue!==e.get(this._weakKey)}undo(e){let t=e.has(this._weakKey);this._weakHas&&!t?e.set(this._weakKey,this._weakValue):!this._weakHas&&t?e.delete(this._weakKey):this._weakValue!==e.get(this._weakKey)&&e.set(this._weakKey,this._weakValue)}},um=class{constructor(e){this._stack=[],this._hasOnValidate=e}static isHandledType(e){return bD(e)||au(e)||xD(e)}static isHandledMethod(e,t){return bD(e)?id.isHandledMethod(t):au(e)?k5.isHandledMethod(t):e instanceof Set?L5.isHandledMethod(t):e instanceof Map?B5.isHandledMethod(t):xD(e)}get isCloning(){return this._stack.length>0}start(e,t,r){let i=id;au(e)?i=k5:e instanceof Date?i=E_e:e instanceof Set?i=L5:e instanceof Map?i=B5:e instanceof WeakSet?i=M_e:e instanceof WeakMap&&(i=C_e),this._stack.push(new i(e,t,r,this._hasOnValidate))}update(e,t,r){this._stack[this._stack.length-1].update(e,t,r)}preferredThisArg(e,t,r){let{name:i}=e,n=um.isHandledMethod(r,i);return this._stack[this._stack.length-1].preferredThisArg(n,i,t,r)}isChanged(e,t,r){return this._stack[this._stack.length-1].isChanged(e,t,r)}undo(e){this._previousClone!==void 0&&this._previousClone.undo(e)}stop(){return this._previousClone=this._stack.pop(),this._previousClone.clone}},A_e={equals:Object.is,isShallow:!1,pathAsArray:!1,ignoreSymbols:!1,ignoreUnderscores:!1,ignoreDetached:!1,details:!1},zR=(e,t,r={})=>{r={...A_e,...r};let i=Symbol("ProxyTarget"),{equals:n,isShallow:a,ignoreDetached:s,details:o}=r,l=new y_e(n),u=typeof r.onValidate=="function",h=new um(u),c=(y,x,b,_,w)=>!u||h.isCloning||r.onValidate(yo.concat(l.getPath(y),x),b,_,w)===!0,d=(y,x,b,_)=>{!R5(l,r,x)&&!(s&&l.isDetached(y,e))&&f(l.getPath(y),x,b,_)},f=(y,x,b,_,w)=>{h.isCloning?h.update(y,x,_):t(yo.concat(y,x),b,_,w)},m=y=>y&&(y[i]||y),p=(y,x,b,_)=>p_e(y)||b==="constructor"||a&&!um.isHandledMethod(x,b)||R5(l,r,b)||l.isGetInvariant(x,b)||s&&l.isDetached(x,e)?y:(_===void 0&&(_=l.getPath(x)),l.getProxy(y,yo.concat(_,b),g,i)),g={get(y,x,b){if(NR(x)){if(x===i||x===BR)return y;if(x===W7&&!l.isUnsubscribed&&l.getPath(y).length===0)return l.unsubscribe(),y}let _=xD(y)?Reflect.get(y,x):Reflect.get(y,x,b);return p(_,y,x)},set(y,x,b,_){b=m(b);let w=y[i]||y,E=w[x];if(n(E,b)&&x in y)return!0;let S=c(y,x,b,E);return S&&l.setProperty(w,x,b,_,E)?(d(y,x,y[x],E),!0):!S},defineProperty(y,x,b){if(!l.isSameDescriptor(b,y,x)){let _=y[x];c(y,x,b.value,_)&&l.defineProperty(y,x,b,_)&&d(y,x,b.value,_)}return!0},deleteProperty(y,x){if(!Reflect.has(y,x))return!0;let b=Reflect.get(y,x),_=c(y,x,void 0,b);return _&&l.deleteProperty(y,x,b)?(d(y,x,void 0,b),!0):!_},apply(y,x,b){let _=x[i]||x;if(l.isUnsubscribed)return Reflect.apply(y,_,b);if((o===!1||o!==!0&&!o.includes(y.name))&&um.isHandledType(_)){let w=yo.initial(l.getPath(y)),E=um.isHandledMethod(_,y.name);h.start(_,w,b);let S=Reflect.apply(y,h.preferredThisArg(y,x,_),E?b.map(P=>m(P)):b),C=h.isChanged(_,n),M=h.stop();if(um.isHandledType(S)&&E&&(x instanceof Map&&y.name==="get"&&(w=yo.concat(w,b[0])),S=l.getProxy(S,w,g)),C){let P={name:y.name,args:b,result:S},I=h.isCloning?yo.initial(w):w,k=h.isCloning?yo.last(w):"";c(yo.get(e,I),k,_,M,P)?f(I,k,_,M,P):h.undo(_)}return(x instanceof Map||x instanceof Set)&&g_e(S)?v_e(S,y,x,w,p):S}return Reflect.apply(y,x,b)}},v=l.getProxy(e,r.pathAsArray?[]:"",g);return t=t.bind(v),u&&(r.onValidate=r.onValidate.bind(v)),v};zR.target=e=>e&&e[BR]||e;zR.unsubscribe=e=>e[W7]||e;var N5=zR,T_e=typeof global=="object"&&global&&global.Object===Object&&global,Z7=T_e,P_e=typeof self=="object"&&self&&self.Object===Object&&self,D_e=Z7||P_e||Function("return this")(),Al=D_e,O_e=Al.Symbol,jo=O_e,J7=Object.prototype,I_e=J7.hasOwnProperty,R_e=J7.toString,i0=jo?jo.toStringTag:void 0;function k_e(e){var t=I_e.call(e,i0),r=e[i0];try{e[i0]=void 0;var i=!0}catch{}var n=R_e.call(e);return i&&(t?e[i0]=r:delete e[i0]),n}var L_e=k_e,B_e=Object.prototype,N_e=B_e.toString;function z_e(e){return N_e.call(e)}var F_e=z_e,U_e="[object Null]",j_e="[object Undefined]",z5=jo?jo.toStringTag:void 0;function V_e(e){return e==null?e===void 0?j_e:U_e:z5&&z5 in Object(e)?L_e(e):F_e(e)}var Zf=V_e;function H_e(e){return e!=null&&typeof e=="object"}var Pc=H_e,G_e="[object Symbol]";function W_e(e){return typeof e=="symbol"||Pc(e)&&Zf(e)==G_e}var PE=W_e;function $_e(e,t){for(var r=-1,i=e==null?0:e.length,n=Array(i);++r<i;)n[r]=t(e[r],r,e);return n}var e$=$_e,Y_e=Array.isArray,Mu=Y_e,q_e=1/0,F5=jo?jo.prototype:void 0,U5=F5?F5.toString:void 0;function t$(e){if(typeof e=="string")return e;if(Mu(e))return e$(e,t$)+"";if(PE(e))return U5?U5.call(e):"";var t=e+"";return t=="0"&&1/e==-q_e?"-0":t}var X_e=t$,Q_e=/\s/;function K_e(e){for(var t=e.length;t--&&Q_e.test(e.charAt(t)););return t}var Z_e=K_e,J_e=/^\s+/;function eSe(e){return e&&e.slice(0,Z_e(e)+1).replace(J_e,"")}var tSe=eSe;function rSe(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Cl=rSe,j5=0/0,iSe=/^[-+]0x[0-9a-f]+$/i,nSe=/^0b[01]+$/i,aSe=/^0o[0-7]+$/i,sSe=parseInt;function oSe(e){if(typeof e=="number")return e;if(PE(e))return j5;if(Cl(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Cl(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=tSe(e);var r=nSe.test(e);return r||aSe.test(e)?sSe(e.slice(2),r?2:8):iSe.test(e)?j5:+e}var V5=oSe;function lSe(e){return e}var uSe=lSe,cSe="[object AsyncFunction]",hSe="[object Function]",dSe="[object GeneratorFunction]",fSe="[object Proxy]";function pSe(e){if(!Cl(e))return!1;var t=Zf(e);return t==hSe||t==dSe||t==cSe||t==fSe}var r$=pSe,mSe=Al["__core-js_shared__"],sA=mSe,H5=function(){var e=/[^.]+$/.exec(sA&&sA.keys&&sA.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function gSe(e){return!!H5&&H5 in e}var vSe=gSe,ySe=Function.prototype,xSe=ySe.toString;function bSe(e){if(e!=null){try{return xSe.call(e)}catch{}try{return e+""}catch{}}return""}var Jf=bSe,wSe=/[\\^$.*+?()[\]{}|]/g,_Se=/^\[object .+?Constructor\]$/,SSe=Function.prototype,ESe=Object.prototype,MSe=SSe.toString,CSe=ESe.hasOwnProperty,ASe=RegExp("^"+MSe.call(CSe).replace(wSe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function TSe(e){if(!Cl(e)||vSe(e))return!1;var t=r$(e)?ASe:_Se;return t.test(Jf(e))}var PSe=TSe;function DSe(e,t){return e==null?void 0:e[t]}var OSe=DSe;function ISe(e,t){var r=OSe(e,t);return PSe(r)?r:void 0}var ep=ISe,RSe=ep(Al,"WeakMap"),wD=RSe,G5=Object.create,kSe=function(){function e(){}return function(t){if(!Cl(t))return{};if(G5)return G5(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),LSe=kSe;function BSe(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var NSe=BSe;function zSe(e,t){var r=-1,i=e.length;for(t||(t=Array(i));++r<i;)t[r]=e[r];return t}var FSe=zSe,USe=800,jSe=16,VSe=Date.now;function HSe(e){var t=0,r=0;return function(){var i=VSe(),n=jSe-(i-r);if(r=i,n>0){if(++t>=USe)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var GSe=HSe;function WSe(e){return function(){return e}}var $Se=WSe,YSe=function(){try{var e=ep(Object,"defineProperty");return e({},"",{}),e}catch{}}(),bS=YSe,qSe=bS?function(e,t){return bS(e,"toString",{configurable:!0,enumerable:!1,value:$Se(t),writable:!0})}:uSe,XSe=qSe,QSe=GSe(XSe),KSe=QSe;function ZSe(e,t){for(var r=-1,i=e==null?0:e.length;++r<i&&t(e[r],r,e)!==!1;);return e}var JSe=ZSe,e2e=9007199254740991,t2e=/^(?:0|[1-9]\d*)$/;function r2e(e,t){var r=typeof e;return t=t??e2e,!!t&&(r=="number"||r!="symbol"&&t2e.test(e))&&e>-1&&e%1==0&&e<t}var FR=r2e;function i2e(e,t,r){t=="__proto__"&&bS?bS(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var i$=i2e;function n2e(e,t){return e===t||e!==e&&t!==t}var UR=n2e,a2e=Object.prototype,s2e=a2e.hasOwnProperty;function o2e(e,t,r){var i=e[t];(!(s2e.call(e,t)&&UR(i,r))||r===void 0&&!(t in e))&&i$(e,t,r)}var jR=o2e;function l2e(e,t,r,i){var n=!r;r||(r={});for(var a=-1,s=t.length;++a<s;){var o=t[a],l=i?i(r[o],e[o],o,r,e):void 0;l===void 0&&(l=e[o]),n?i$(r,o,l):jR(r,o,l)}return r}var J1=l2e,W5=Math.max;function u2e(e,t,r){return t=W5(t===void 0?e.length-1:t,0),function(){for(var i=arguments,n=-1,a=W5(i.length-t,0),s=Array(a);++n<a;)s[n]=i[t+n];n=-1;for(var o=Array(t+1);++n<t;)o[n]=i[n];return o[t]=r(s),NSe(e,this,o)}}var c2e=u2e,h2e=9007199254740991;function d2e(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=h2e}var VR=d2e;function f2e(e){return e!=null&&VR(e.length)&&!r$(e)}var n$=f2e,p2e=Object.prototype;function m2e(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||p2e;return e===r}var HR=m2e;function g2e(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}var v2e=g2e,y2e="[object Arguments]";function x2e(e){return Pc(e)&&Zf(e)==y2e}var $5=x2e,a$=Object.prototype,b2e=a$.hasOwnProperty,w2e=a$.propertyIsEnumerable,_2e=$5(function(){return arguments}())?$5:function(e){return Pc(e)&&b2e.call(e,"callee")&&!w2e.call(e,"callee")},GR=_2e;function S2e(){return!1}var E2e=S2e,s$=typeof Qs=="object"&&Qs&&!Qs.nodeType&&Qs,Y5=s$&&typeof Ks=="object"&&Ks&&!Ks.nodeType&&Ks,M2e=Y5&&Y5.exports===s$,q5=M2e?Al.Buffer:void 0,C2e=q5?q5.isBuffer:void 0,A2e=C2e||E2e,wS=A2e,T2e="[object Arguments]",P2e="[object Array]",D2e="[object Boolean]",O2e="[object Date]",I2e="[object Error]",R2e="[object Function]",k2e="[object Map]",L2e="[object Number]",B2e="[object Object]",N2e="[object RegExp]",z2e="[object Set]",F2e="[object String]",U2e="[object WeakMap]",j2e="[object ArrayBuffer]",V2e="[object DataView]",H2e="[object Float32Array]",G2e="[object Float64Array]",W2e="[object Int8Array]",$2e="[object Int16Array]",Y2e="[object Int32Array]",q2e="[object Uint8Array]",X2e="[object Uint8ClampedArray]",Q2e="[object Uint16Array]",K2e="[object Uint32Array]",pi={};pi[H2e]=pi[G2e]=pi[W2e]=pi[$2e]=pi[Y2e]=pi[q2e]=pi[X2e]=pi[Q2e]=pi[K2e]=!0;pi[T2e]=pi[P2e]=pi[j2e]=pi[D2e]=pi[V2e]=pi[O2e]=pi[I2e]=pi[R2e]=pi[k2e]=pi[L2e]=pi[B2e]=pi[N2e]=pi[z2e]=pi[F2e]=pi[U2e]=!1;function Z2e(e){return Pc(e)&&VR(e.length)&&!!pi[Zf(e)]}var J2e=Z2e;function eEe(e){return function(t){return e(t)}}var WR=eEe,o$=typeof Qs=="object"&&Qs&&!Qs.nodeType&&Qs,by=o$&&typeof Ks=="object"&&Ks&&!Ks.nodeType&&Ks,tEe=by&&by.exports===o$,oA=tEe&&Z7.process,rEe=function(){try{var e=by&&by.require&&by.require("util").types;return e||oA&&oA.binding&&oA.binding("util")}catch{}}(),Ug=rEe,X5=Ug&&Ug.isTypedArray,iEe=X5?WR(X5):J2e,l$=iEe,nEe=Object.prototype,aEe=nEe.hasOwnProperty;function sEe(e,t){var r=Mu(e),i=!r&&GR(e),n=!r&&!i&&wS(e),a=!r&&!i&&!n&&l$(e),s=r||i||n||a,o=s?v2e(e.length,String):[],l=o.length;for(var u in e)(t||aEe.call(e,u))&&!(s&&(u=="length"||n&&(u=="offset"||u=="parent")||a&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||FR(u,l)))&&o.push(u);return o}var u$=sEe;function oEe(e,t){return function(r){return e(t(r))}}var c$=oEe,lEe=c$(Object.keys,Object),uEe=lEe,cEe=Object.prototype,hEe=cEe.hasOwnProperty;function dEe(e){if(!HR(e))return uEe(e);var t=[];for(var r in Object(e))hEe.call(e,r)&&r!="constructor"&&t.push(r);return t}var fEe=dEe;function pEe(e){return n$(e)?u$(e):fEe(e)}var $R=pEe;function mEe(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var gEe=mEe,vEe=Object.prototype,yEe=vEe.hasOwnProperty;function xEe(e){if(!Cl(e))return gEe(e);var t=HR(e),r=[];for(var i in e)i=="constructor"&&(t||!yEe.call(e,i))||r.push(i);return r}var bEe=xEe;function wEe(e){return n$(e)?u$(e,!0):bEe(e)}var YR=wEe,_Ee=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,SEe=/^\w*$/;function EEe(e,t){if(Mu(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||PE(e)?!0:SEe.test(e)||!_Ee.test(e)||t!=null&&e in Object(t)}var MEe=EEe,CEe=ep(Object,"create"),h1=CEe;function AEe(){this.__data__=h1?h1(null):{},this.size=0}var TEe=AEe;function PEe(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var DEe=PEe,OEe="__lodash_hash_undefined__",IEe=Object.prototype,REe=IEe.hasOwnProperty;function kEe(e){var t=this.__data__;if(h1){var r=t[e];return r===OEe?void 0:r}return REe.call(t,e)?t[e]:void 0}var LEe=kEe,BEe=Object.prototype,NEe=BEe.hasOwnProperty;function zEe(e){var t=this.__data__;return h1?t[e]!==void 0:NEe.call(t,e)}var FEe=zEe,UEe="__lodash_hash_undefined__";function jEe(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=h1&&t===void 0?UEe:t,this}var VEe=jEe;function gv(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}gv.prototype.clear=TEe;gv.prototype.delete=DEe;gv.prototype.get=LEe;gv.prototype.has=FEe;gv.prototype.set=VEe;var Q5=gv;function HEe(){this.__data__=[],this.size=0}var GEe=HEe;function WEe(e,t){for(var r=e.length;r--;)if(UR(e[r][0],t))return r;return-1}var DE=WEe,$Ee=Array.prototype,YEe=$Ee.splice;function qEe(e){var t=this.__data__,r=DE(t,e);if(r<0)return!1;var i=t.length-1;return r==i?t.pop():YEe.call(t,r,1),--this.size,!0}var XEe=qEe;function QEe(e){var t=this.__data__,r=DE(t,e);return r<0?void 0:t[r][1]}var KEe=QEe;function ZEe(e){return DE(this.__data__,e)>-1}var JEe=ZEe;function eMe(e,t){var r=this.__data__,i=DE(r,e);return i<0?(++this.size,r.push([e,t])):r[i][1]=t,this}var tMe=eMe;function vv(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}vv.prototype.clear=GEe;vv.prototype.delete=XEe;vv.prototype.get=KEe;vv.prototype.has=JEe;vv.prototype.set=tMe;var OE=vv,rMe=ep(Al,"Map"),d1=rMe;function iMe(){this.size=0,this.__data__={hash:new Q5,map:new(d1||OE),string:new Q5}}var nMe=iMe;function aMe(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var sMe=aMe;function oMe(e,t){var r=e.__data__;return sMe(t)?r[typeof t=="string"?"string":"hash"]:r.map}var IE=oMe;function lMe(e){var t=IE(this,e).delete(e);return this.size-=t?1:0,t}var uMe=lMe;function cMe(e){return IE(this,e).get(e)}var hMe=cMe;function dMe(e){return IE(this,e).has(e)}var fMe=dMe;function pMe(e,t){var r=IE(this,e),i=r.size;return r.set(e,t),this.size+=r.size==i?0:1,this}var mMe=pMe;function yv(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}yv.prototype.clear=nMe;yv.prototype.delete=uMe;yv.prototype.get=hMe;yv.prototype.has=fMe;yv.prototype.set=mMe;var RE=yv,gMe="Expected a function";function qR(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(gMe);var r=function(){var i=arguments,n=t?t.apply(this,i):i[0],a=r.cache;if(a.has(n))return a.get(n);var s=e.apply(this,i);return r.cache=a.set(n,s)||a,s};return r.cache=new(qR.Cache||RE),r}qR.Cache=RE;var vMe=qR,yMe=500;function xMe(e){var t=vMe(e,function(i){return r.size===yMe&&r.clear(),i}),r=t.cache;return t}var bMe=xMe,wMe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,_Me=/\\(\\)?/g,SMe=bMe(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(wMe,function(r,i,n,a){t.push(n?a.replace(_Me,"$1"):i||r)}),t}),EMe=SMe;function MMe(e){return e==null?"":X_e(e)}var CMe=MMe;function AMe(e,t){return Mu(e)?e:MEe(e,t)?[e]:EMe(CMe(e))}var xv=AMe,TMe=1/0;function PMe(e){if(typeof e=="string"||PE(e))return e;var t=e+"";return t=="0"&&1/e==-TMe?"-0":t}var kE=PMe;function DMe(e,t){t=xv(t,e);for(var r=0,i=t.length;e!=null&&r<i;)e=e[kE(t[r++])];return r&&r==i?e:void 0}var h$=DMe;function OMe(e,t){for(var r=-1,i=t.length,n=e.length;++r<i;)e[n+r]=t[r];return e}var XR=OMe,K5=jo?jo.isConcatSpreadable:void 0;function IMe(e){return Mu(e)||GR(e)||!!(K5&&e&&e[K5])}var RMe=IMe;function d$(e,t,r,i,n){var a=-1,s=e.length;for(r||(r=RMe),n||(n=[]);++a<s;){var o=e[a];t>0&&r(o)?t>1?d$(o,t-1,r,i,n):XR(n,o):i||(n[n.length]=o)}return n}var kMe=d$;function LMe(e){var t=e==null?0:e.length;return t?kMe(e,1):[]}var BMe=LMe;function NMe(e){return KSe(c2e(e,void 0,BMe),e+"")}var f$=NMe,zMe=c$(Object.getPrototypeOf,Object),QR=zMe,FMe="[object Object]",UMe=Function.prototype,jMe=Object.prototype,p$=UMe.toString,VMe=jMe.hasOwnProperty,HMe=p$.call(Object);function GMe(e){if(!Pc(e)||Zf(e)!=FMe)return!1;var t=QR(e);if(t===null)return!0;var r=VMe.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&p$.call(r)==HMe}var WMe=GMe;function $Me(e,t,r){var i=-1,n=e.length;t<0&&(t=-t>n?0:n+t),r=r>n?n:r,r<0&&(r+=n),n=t>r?0:r-t>>>0,t>>>=0;for(var a=Array(n);++i<n;)a[i]=e[i+t];return a}var YMe=$Me;function qMe(){this.__data__=new OE,this.size=0}var XMe=qMe;function QMe(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var KMe=QMe;function ZMe(e){return this.__data__.get(e)}var JMe=ZMe;function eCe(e){return this.__data__.has(e)}var tCe=eCe,rCe=200;function iCe(e,t){var r=this.__data__;if(r instanceof OE){var i=r.__data__;if(!d1||i.length<rCe-1)return i.push([e,t]),this.size=++r.size,this;r=this.__data__=new RE(i)}return r.set(e,t),this.size=r.size,this}var nCe=iCe;function bv(e){var t=this.__data__=new OE(e);this.size=t.size}bv.prototype.clear=XMe;bv.prototype.delete=KMe;bv.prototype.get=JMe;bv.prototype.has=tCe;bv.prototype.set=nCe;var Gw=bv;function aCe(e,t){return e&&J1(t,$R(t),e)}var sCe=aCe;function oCe(e,t){return e&&J1(t,YR(t),e)}var lCe=oCe,m$=typeof Qs=="object"&&Qs&&!Qs.nodeType&&Qs,Z5=m$&&typeof Ks=="object"&&Ks&&!Ks.nodeType&&Ks,uCe=Z5&&Z5.exports===m$,J5=uCe?Al.Buffer:void 0,eF=J5?J5.allocUnsafe:void 0;function cCe(e,t){if(t)return e.slice();var r=e.length,i=eF?eF(r):new e.constructor(r);return e.copy(i),i}var hCe=cCe;function dCe(e,t){for(var r=-1,i=e==null?0:e.length,n=0,a=[];++r<i;){var s=e[r];t(s,r,e)&&(a[n++]=s)}return a}var fCe=dCe;function pCe(){return[]}var g$=pCe,mCe=Object.prototype,gCe=mCe.propertyIsEnumerable,tF=Object.getOwnPropertySymbols,vCe=tF?function(e){return e==null?[]:(e=Object(e),fCe(tF(e),function(t){return gCe.call(e,t)}))}:g$,KR=vCe;function yCe(e,t){return J1(e,KR(e),t)}var xCe=yCe,bCe=Object.getOwnPropertySymbols,wCe=bCe?function(e){for(var t=[];e;)XR(t,KR(e)),e=QR(e);return t}:g$,v$=wCe;function _Ce(e,t){return J1(e,v$(e),t)}var SCe=_Ce;function ECe(e,t,r){var i=t(e);return Mu(e)?i:XR(i,r(e))}var y$=ECe;function MCe(e){return y$(e,$R,KR)}var _D=MCe;function CCe(e){return y$(e,YR,v$)}var x$=CCe,ACe=ep(Al,"DataView"),SD=ACe,TCe=ep(Al,"Promise"),ED=TCe,PCe=ep(Al,"Set"),MD=PCe,rF="[object Map]",DCe="[object Object]",iF="[object Promise]",nF="[object Set]",aF="[object WeakMap]",sF="[object DataView]",OCe=Jf(SD),ICe=Jf(d1),RCe=Jf(ED),kCe=Jf(MD),LCe=Jf(wD),jd=Zf;(SD&&jd(new SD(new ArrayBuffer(1)))!=sF||d1&&jd(new d1)!=rF||ED&&jd(ED.resolve())!=iF||MD&&jd(new MD)!=nF||wD&&jd(new wD)!=aF)&&(jd=function(e){var t=Zf(e),r=t==DCe?e.constructor:void 0,i=r?Jf(r):"";if(i)switch(i){case OCe:return sF;case ICe:return rF;case RCe:return iF;case kCe:return nF;case LCe:return aF}return t});var f1=jd,BCe=Object.prototype,NCe=BCe.hasOwnProperty;function zCe(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&NCe.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var FCe=zCe,UCe=Al.Uint8Array,_S=UCe;function jCe(e){var t=new e.constructor(e.byteLength);return new _S(t).set(new _S(e)),t}var ZR=jCe;function VCe(e,t){var r=t?ZR(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var HCe=VCe,GCe=/\w*$/;function WCe(e){var t=new e.constructor(e.source,GCe.exec(e));return t.lastIndex=e.lastIndex,t}var $Ce=WCe,oF=jo?jo.prototype:void 0,lF=oF?oF.valueOf:void 0;function YCe(e){return lF?Object(lF.call(e)):{}}var qCe=YCe;function XCe(e,t){var r=t?ZR(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var QCe=XCe,KCe="[object Boolean]",ZCe="[object Date]",JCe="[object Map]",eAe="[object Number]",tAe="[object RegExp]",rAe="[object Set]",iAe="[object String]",nAe="[object Symbol]",aAe="[object ArrayBuffer]",sAe="[object DataView]",oAe="[object Float32Array]",lAe="[object Float64Array]",uAe="[object Int8Array]",cAe="[object Int16Array]",hAe="[object Int32Array]",dAe="[object Uint8Array]",fAe="[object Uint8ClampedArray]",pAe="[object Uint16Array]",mAe="[object Uint32Array]";function gAe(e,t,r){var i=e.constructor;switch(t){case aAe:return ZR(e);case KCe:case ZCe:return new i(+e);case sAe:return HCe(e,r);case oAe:case lAe:case uAe:case cAe:case hAe:case dAe:case fAe:case pAe:case mAe:return QCe(e,r);case JCe:return new i;case eAe:case iAe:return new i(e);case tAe:return $Ce(e);case rAe:return new i;case nAe:return qCe(e)}}var vAe=gAe;function yAe(e){return typeof e.constructor=="function"&&!HR(e)?LSe(QR(e)):{}}var xAe=yAe,bAe="[object Map]";function wAe(e){return Pc(e)&&f1(e)==bAe}var _Ae=wAe,uF=Ug&&Ug.isMap,SAe=uF?WR(uF):_Ae,EAe=SAe,MAe="[object Set]";function CAe(e){return Pc(e)&&f1(e)==MAe}var AAe=CAe,cF=Ug&&Ug.isSet,TAe=cF?WR(cF):AAe,PAe=TAe,DAe=1,OAe=2,IAe=4,b$="[object Arguments]",RAe="[object Array]",kAe="[object Boolean]",LAe="[object Date]",BAe="[object Error]",w$="[object Function]",NAe="[object GeneratorFunction]",zAe="[object Map]",FAe="[object Number]",_$="[object Object]",UAe="[object RegExp]",jAe="[object Set]",VAe="[object String]",HAe="[object Symbol]",GAe="[object WeakMap]",WAe="[object ArrayBuffer]",$Ae="[object DataView]",YAe="[object Float32Array]",qAe="[object Float64Array]",XAe="[object Int8Array]",QAe="[object Int16Array]",KAe="[object Int32Array]",ZAe="[object Uint8Array]",JAe="[object Uint8ClampedArray]",eTe="[object Uint16Array]",tTe="[object Uint32Array]",ci={};ci[b$]=ci[RAe]=ci[WAe]=ci[$Ae]=ci[kAe]=ci[LAe]=ci[YAe]=ci[qAe]=ci[XAe]=ci[QAe]=ci[KAe]=ci[zAe]=ci[FAe]=ci[_$]=ci[UAe]=ci[jAe]=ci[VAe]=ci[HAe]=ci[ZAe]=ci[JAe]=ci[eTe]=ci[tTe]=!0;ci[BAe]=ci[w$]=ci[GAe]=!1;function Ww(e,t,r,i,n,a){var s,o=t&DAe,l=t&OAe,u=t&IAe;if(r&&(s=n?r(e,i,n,a):r(e)),s!==void 0)return s;if(!Cl(e))return e;var h=Mu(e);if(h){if(s=FCe(e),!o)return FSe(e,s)}else{var c=f1(e),d=c==w$||c==NAe;if(wS(e))return hCe(e,o);if(c==_$||c==b$||d&&!n){if(s=l||d?{}:xAe(e),!o)return l?SCe(e,lCe(s,e)):xCe(e,sCe(s,e))}else{if(!ci[c])return n?e:{};s=vAe(e,c,o)}}a||(a=new Gw);var f=a.get(e);if(f)return f;a.set(e,s),PAe(e)?e.forEach(function(g){s.add(Ww(g,t,r,g,e,a))}):EAe(e)&&e.forEach(function(g,v){s.set(v,Ww(g,t,r,v,e,a))});var m=u?l?x$:_D:l?YR:$R,p=h?void 0:m(e);return JSe(p||e,function(g,v){p&&(v=g,g=e[v]),jR(s,v,Ww(g,t,r,v,e,a))}),s}var S$=Ww,rTe=1,iTe=4;function nTe(e){return S$(e,rTe|iTe)}var LE=nTe,aTe="__lodash_hash_undefined__";function sTe(e){return this.__data__.set(e,aTe),this}var oTe=sTe;function lTe(e){return this.__data__.has(e)}var uTe=lTe;function SS(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new RE;++t<r;)this.add(e[t])}SS.prototype.add=SS.prototype.push=oTe;SS.prototype.has=uTe;var cTe=SS;function hTe(e,t){for(var r=-1,i=e==null?0:e.length;++r<i;)if(t(e[r],r,e))return!0;return!1}var dTe=hTe;function fTe(e,t){return e.has(t)}var pTe=fTe,mTe=1,gTe=2;function vTe(e,t,r,i,n,a){var s=r&mTe,o=e.length,l=t.length;if(o!=l&&!(s&&l>o))return!1;var u=a.get(e),h=a.get(t);if(u&&h)return u==t&&h==e;var c=-1,d=!0,f=r&gTe?new cTe:void 0;for(a.set(e,t),a.set(t,e);++c<o;){var m=e[c],p=t[c];if(i)var g=s?i(p,m,c,t,e,a):i(m,p,c,e,t,a);if(g!==void 0){if(g)continue;d=!1;break}if(f){if(!dTe(t,function(v,y){if(!pTe(f,y)&&(m===v||n(m,v,r,i,a)))return f.push(y)})){d=!1;break}}else if(!(m===p||n(m,p,r,i,a))){d=!1;break}}return a.delete(e),a.delete(t),d}var E$=vTe;function yTe(e){var t=-1,r=Array(e.size);return e.forEach(function(i,n){r[++t]=[n,i]}),r}var xTe=yTe;function bTe(e){var t=-1,r=Array(e.size);return e.forEach(function(i){r[++t]=i}),r}var wTe=bTe,_Te=1,STe=2,ETe="[object Boolean]",MTe="[object Date]",CTe="[object Error]",ATe="[object Map]",TTe="[object Number]",PTe="[object RegExp]",DTe="[object Set]",OTe="[object String]",ITe="[object Symbol]",RTe="[object ArrayBuffer]",kTe="[object DataView]",hF=jo?jo.prototype:void 0,lA=hF?hF.valueOf:void 0;function LTe(e,t,r,i,n,a,s){switch(r){case kTe:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case RTe:return!(e.byteLength!=t.byteLength||!a(new _S(e),new _S(t)));case ETe:case MTe:case TTe:return UR(+e,+t);case CTe:return e.name==t.name&&e.message==t.message;case PTe:case OTe:return e==t+"";case ATe:var o=xTe;case DTe:var l=i&_Te;if(o||(o=wTe),e.size!=t.size&&!l)return!1;var u=s.get(e);if(u)return u==t;i|=STe,s.set(e,t);var h=E$(o(e),o(t),i,n,a,s);return s.delete(e),h;case ITe:if(lA)return lA.call(e)==lA.call(t)}return!1}var BTe=LTe,NTe=1,zTe=Object.prototype,FTe=zTe.hasOwnProperty;function UTe(e,t,r,i,n,a){var s=r&NTe,o=_D(e),l=o.length,u=_D(t),h=u.length;if(l!=h&&!s)return!1;for(var c=l;c--;){var d=o[c];if(!(s?d in t:FTe.call(t,d)))return!1}var f=a.get(e),m=a.get(t);if(f&&m)return f==t&&m==e;var p=!0;a.set(e,t),a.set(t,e);for(var g=s;++c<l;){d=o[c];var v=e[d],y=t[d];if(i)var x=s?i(y,v,d,t,e,a):i(v,y,d,e,t,a);if(!(x===void 0?v===y||n(v,y,r,i,a):x)){p=!1;break}g||(g=d=="constructor")}if(p&&!g){var b=e.constructor,_=t.constructor;b!=_&&"constructor"in e&&"constructor"in t&&!(typeof b=="function"&&b instanceof b&&typeof _=="function"&&_ instanceof _)&&(p=!1)}return a.delete(e),a.delete(t),p}var jTe=UTe,VTe=1,dF="[object Arguments]",fF="[object Array]",Cb="[object Object]",HTe=Object.prototype,pF=HTe.hasOwnProperty;function GTe(e,t,r,i,n,a){var s=Mu(e),o=Mu(t),l=s?fF:f1(e),u=o?fF:f1(t);l=l==dF?Cb:l,u=u==dF?Cb:u;var h=l==Cb,c=u==Cb,d=l==u;if(d&&wS(e)){if(!wS(t))return!1;s=!0,h=!1}if(d&&!h)return a||(a=new Gw),s||l$(e)?E$(e,t,r,i,n,a):BTe(e,t,l,r,i,n,a);if(!(r&VTe)){var f=h&&pF.call(e,"__wrapped__"),m=c&&pF.call(t,"__wrapped__");if(f||m){var p=f?e.value():e,g=m?t.value():t;return a||(a=new Gw),n(p,g,r,i,a)}}return d?(a||(a=new Gw),jTe(e,t,r,i,n,a)):!1}var WTe=GTe;function M$(e,t,r,i,n){return e===t?!0:e==null||t==null||!Pc(e)&&!Pc(t)?e!==e&&t!==t:WTe(e,t,r,i,M$,n)}var $Te=M$;function YTe(e,t){return e!=null&&t in Object(e)}var qTe=YTe;function XTe(e,t,r){t=xv(t,e);for(var i=-1,n=t.length,a=!1;++i<n;){var s=kE(t[i]);if(!(a=e!=null&&r(e,s)))break;e=e[s]}return a||++i!=n?a:(n=e==null?0:e.length,!!n&&VR(n)&&FR(s,n)&&(Mu(e)||GR(e)))}var QTe=XTe;function KTe(e,t){return e!=null&&QTe(e,t,qTe)}var ZTe=KTe,JTe=function(){return Al.Date.now()},uA=JTe,ePe="Expected a function",tPe=Math.max,rPe=Math.min;function iPe(e,t,r){var i,n,a,s,o,l,u=0,h=!1,c=!1,d=!0;if(typeof e!="function")throw new TypeError(ePe);t=V5(t)||0,Cl(r)&&(h=!!r.leading,c="maxWait"in r,a=c?tPe(V5(r.maxWait)||0,t):a,d="trailing"in r?!!r.trailing:d);function f(w){var E=i,S=n;return i=n=void 0,u=w,s=e.apply(S,E),s}function m(w){return u=w,o=setTimeout(v,t),h?f(w):s}function p(w){var E=w-l,S=w-u,C=t-E;return c?rPe(C,a-S):C}function g(w){var E=w-l,S=w-u;return l===void 0||E>=t||E<0||c&&S>=a}function v(){var w=uA();if(g(w))return y(w);o=setTimeout(v,p(w))}function y(w){return o=void 0,d&&i?f(w):(i=n=void 0,s)}function x(){o!==void 0&&clearTimeout(o),u=0,i=l=n=o=void 0}function b(){return o===void 0?s:y(uA())}function _(){var w=uA(),E=g(w);if(i=arguments,n=this,l=w,E){if(o===void 0)return m(l);if(c)return clearTimeout(o),o=setTimeout(v,t),f(l)}return o===void 0&&(o=setTimeout(v,t)),s}return _.cancel=x,_.flush=b,_}var JR=iPe;function nPe(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var aPe=nPe;function sPe(e,t){return t.length<2?e:h$(e,YMe(t,0,-1))}var oPe=sPe;function lPe(e,t){return $Te(e,t)}var C$=lPe;function uPe(e,t){return t=xv(t,e),e=oPe(e,t),e==null||delete e[kE(aPe(t))]}var cPe=uPe;function hPe(e){return WMe(e)?void 0:e}var dPe=hPe,fPe=1,pPe=2,mPe=4,gPe=f$(function(e,t){var r={};if(e==null)return r;var i=!1;t=e$(t,function(a){return a=xv(a,e),i||(i=a.length>1),a}),J1(e,x$(e),r),i&&(r=S$(r,fPe|pPe|mPe,dPe));for(var n=t.length;n--;)cPe(r,t[n]);return r}),CD=gPe;function vPe(e,t,r,i){if(!Cl(e))return e;t=xv(t,e);for(var n=-1,a=t.length,s=a-1,o=e;o!=null&&++n<a;){var l=kE(t[n]),u=r;if(l==="__proto__"||l==="constructor"||l==="prototype")return e;if(n!=s){var h=o[l];u=i?i(h,l,o):void 0,u===void 0&&(u=Cl(h)?h:FR(t[n+1])?[]:{})}jR(o,l,u),o=o[l]}return e}var yPe=vPe;function xPe(e,t,r){for(var i=-1,n=t.length,a={};++i<n;){var s=t[i],o=h$(e,s);r(o,s)&&yPe(a,xv(s,e),o)}return a}var bPe=xPe;function wPe(e,t){return bPe(e,t,function(r,i){return ZTe(e,i)})}var _Pe=wPe,SPe=f$(function(e,t){return e==null?{}:_Pe(e,t)}),vc=SPe,EPe="Expected a function";function MPe(e,t,r){var i=!0,n=!0;if(typeof e!="function")throw new TypeError(EPe);return Cl(r)&&(i="leading"in r?!!r.leading:i,n="trailing"in r?!!r.trailing:n),JR(e,t,{leading:i,maxWait:t,trailing:n})}var CPe=MPe;function APe(e){for(let t of Object.keys(e))e[t]===void 0&&delete e[t];return e}function Dc(e,t){return Object.setPrototypeOf(e,t),e}var TPe=()=>typeof window>"u"?!1:window.navigator.userAgent.toLowerCase().includes(" electron/"),PPe=()=>typeof window>"u"?!1:window.navigator.platform.toUpperCase().includes("MAC"),DPe=()=>typeof window>"u"?!1:/iPad|iPhone|iPod/.test(window.navigator.userAgent)||BE&&"ontouchend"in document,OPe=()=>typeof window>"u"?!1:window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1,IPe=()=>typeof window>"u"?!1:"ontouchstart"in window||navigator.maxTouchPoints>0,RPe=()=>{if(typeof window>"u")return!1;let e=navigator.userAgent,t=navigator.vendor;return/Safari/i.test(e)&&/Apple Computer/.test(t)},kPe=()=>{if(typeof window>"u")return null;let e=navigator.userAgent.match(/Version\/(\d+\.\d)/);return e&&e[1]},LPe=()=>{if(typeof window>"u")return;let e=new URLSearchParams(window.location.search).get("desktop-app-version");return e?(window.localStorage.setItem("desktop-app-version",e),e):window.localStorage.getItem("desktop-app-version")??"0.0.6"},BPe=TPe();BPe&&LPe();var BE=PPe(),A$=DPe(),NPe=OPe(),Xs=IPe(),mF=RPe(),gF=Number(kPe());function T$(e){return Array.isArray(e)?e:[e]}function zPe(e,t){let r=0;for(;r<e.length&&r<t.length;){if(e[r]<t[r])return-1;if(e[r]>t[r])return 1;r+=1}return r!==t.length?-1:r!==e.length?1:0}function Ab(e){return BE?e.metaKey:e.ctrlKey}var It=[],ES={},j0={},$w={};function P$(e){It.includes(e)||It.push(e)}function ig(e){delete ES[e.pointerId];for(let t=0;t<It.length;t++)if(It[t].pointerId===e.pointerId){It.splice(t,1);break}}function FPe(){It.splice(0,It.length)}function MS(e){if(e.pointerType!=="touch")return;let t=ES[e.pointerId];t===void 0&&(t={x:0,y:0},ES[e.pointerId]=t),t.x=e.pageX,t.y=e.pageY}function cA(e){let t=e.pointerId===It[0].pointerId?It[1]:It[0];return ES[t.pointerId]}function D$(e){j0[e.key]=!0,$w[e.key]=$w[e.key]===void 0?1:$w[e.key]+1}function O$(e){if(BE&&j0.Meta)for(let t in j0)j0[t]=!1;else j0[e.key]=!1;$w={}}function UPe(e){e.addEventListener("pointerdown",P$,!0),e.addEventListener("pointerdown",MS,!0),e.addEventListener("pointermove",MS,!0),e.addEventListener("pointerup",ig,!0),e.addEventListener("pointercancel",ig,!0),e.addEventListener("pointerleave",ig,!0),window.addEventListener("keydown",D$,!0),window.addEventListener("keyup",O$,!0)}function jPe(e){e.removeEventListener("pointerdown",P$,!0),e.removeEventListener("pointerdown",MS,!0),e.removeEventListener("pointermove",MS,!0),e.removeEventListener("pointerup",ig,!0),e.removeEventListener("pointercancel",ig,!0),e.removeEventListener("pointerleave",ig,!0),window.removeEventListener("keydown",D$,!0),window.removeEventListener("keyup",O$,!0)}var I$,VPe=new Promise(e=>{I$=e}),Tb;function HPe(){if(Tb)return Tb;async function e(){let t="https://unpkg.com/@splinetool/navmesh-wasm@0.9.457/build",r=$1(()=>import("./navmesh-0b92f809.js"),[]),[i,n]=await Promise.all([r,fetch(`${t}/navmesh.wasm`).then(o=>o.arrayBuffer())]),a=i.default,s=await a({wasmBinary:n});I$(s)}return Tb=e(),Tb}var R$,GPe=new Promise(e=>{R$=e}),Pb;function WPe(){if(Pb)return Pb;async function e(){let t=await $1(()=>import("./physics-dee4de67.js"),[]);await t.init(),R$(t)}return Pb=e(),Pb}var Qt=class{modifyById(e,t){let r=this;if(r[e]===void 0)throw new Error("not expected");{let i={...r,[e]:t};return Object.setPrototypeOf(i,Qt.prototype),i}}add(e,t){var r;return((r=this.runOp({type:1,id:e,data:t}))==null?void 0:r.data)??this}runOp(e){let t=this;if(e.type===1){let r=t[e.id],i;r===void 0?i={type:2,id:e.id}:i={type:1,id:e.id,data:r};let{id:n,data:a}=e,s={...t,[n]:a};return Object.setPrototypeOf(s,Qt.prototype),{data:s,actual:e,reverse:i}}else if(e.type===2){let{id:r}=e,i=t[r];if(i===void 0)return null;{let n={...t};return Object.setPrototypeOf(n,Qt.prototype),delete n[r],{data:n,actual:e,reverse:{type:1,id:r,data:i}}}}return null}};function ek(e){if(e.deepFreeze!==void 0){e.deepFreeze(e);return}let t=Object.getOwnPropertyNames(e);for(let r of t){let i=e[r];i&&typeof i=="object"&&ek(i)}return Object.freeze(e)}function $Pe(e,t){let r=0;for(;r<e.length&&r<t.length;){if(e[r]<t[r])return-1;if(e[r]>t[r])return 1;r+=1}return r!==t.length?-1:r!==e.length?1:0}var k$=class extends Error{};function hA(e){let t={...e};return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),t}function Sh(e,t,r){if(e===void 0?t===void 0?(e=0,t=10):e=t-10:t===void 0&&(t=e+10),e>t){let a=e;e=t,t=a}let i=[],n=1/(r+1);for(let a=0;a<r;a++){let s=e+(t-e)*(a+.75+Math.random()*.5)*n;i.push(s)}return i}function tk(e){return e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Float32Array||e instanceof Float64Array}function YPe(){return typeof process<"u"}function L$(e,t){for(let r of e)t(r.id,r.data)!==!0&&L$(r.children,t)}function B$(e,t){if(t(e.id,e.data)!==!0)for(let r of e.children)B$(r,t)}var Cs=class extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Cs.prototype)}deepFreeze(){let e=0;for(;e<this.length;)ek(this[e]),e++}fillCaches0(e,t){this.objCaches.set(e.id,e),this.parentCaches.set(e.id,t);for(let r of e.children)this.fillCaches0(r,e.id)}fillCaches(){if(this.objCaches===void 0){this.objCaches=new Map,this.parentCaches=new Map;for(let e of this)this.fillCaches0(e,null)}}randomId(){this.fillCaches();let e=Array.from(this.objCaches.keys());if(e.length!==0)return e[Math.max(0,Math.floor(Math.random()*e.length)-1)]}nonExistOrDescendantOf(e,t){if(!this.has(e))return!0;for(;e;){let r=this.parent(e);if(r===t)return!0;e=r}return!1}rootAcestor(e){for(;e;){let t=this.parent(e);if(t)e=t;else return e}return e}isDescendantOf(e,t){for(;e;){let r=this.parent(e);if(r===t)return!0;e=r}return!1}data(e){var t;return(t=this.get(e))==null?void 0:t.data}has(e){return this.childrenOf(e)!==void 0}get(e){return this.fillCaches(),this.objCaches.get(e)}childrenOf(e){var t;return e===null?this:(t=this.get(e))==null?void 0:t.children}traverseFrom(e,t){if(e===null)this.traverse(t);else{let r=this.get(e);r&&B$(r,t)}}traverse(e){L$(this,e)}totalSize(){return this.fillCaches(),this.objCaches.size}parent(e){return this.fillCaches(),this.parentCaches.get(e)}childrenArray(e){return e===null?this:this.get(e).children}modifyById(e,t){if(this.get(e)===void 0)throw new Error("not expected");{let r=this.parent(e),i=this.childrenArray(r),n=i.findIndex(s=>s.id===e);if(n<0)throw new Error("not expected");let a=i[n];return i=[...i],i[n]={...a,data:t},this.modifyArrayBy(r,i)}}modifyArrayBy(e,t){let r=e,i=t;for(;r!==null;){let a=i,s=r;if(r=this.parent(r),r===void 0)throw new Error;i=this.childrenArray(r);let o=i.findIndex(l=>l.id===s);if(o<0)throw new Error;i=[...i],i[o]={...i[o],children:a}}Object.setPrototypeOf(i,Cs.prototype);let n=i;return n.fillCaches(),n}runOp(e){switch(e.type){case 7:return this.addOp(e);case 8:return this.deleteOp(e);case 9:return this.moveOp(e)}return null}checkDuplicatedIdRec({id:e,children:t}){if(this.get(e)!==void 0)return!0;for(let r of t)if(this.checkDuplicatedIdRec(r))return!0;return!1}addOp(e){let{parent:t,fi:r,id:i,data:n,children:a}=e;if(t!==null&&this.get(t)===void 0||this.checkDuplicatedIdRec(e))return null;{let s=t,o=this.childrenArray(s),l={fi:r,id:i,data:n,children:a};return o=[...o,l],o.sort((u,h)=>u.fi-h.fi),e.localIndex=o.indexOf(l),{data:this.modifyArrayBy(s,o),actual:e,reverse:{type:8,id:i}}}}deleteOp(e){let{id:t}=e;if(this.get(t)===null)return null;{let r=this.parent(t);if(r===void 0)return null;let i=this.childrenArray(r),n=i.findIndex(s=>s.id===t);e.localIndex=n,i=[...i];let a=i.splice(n,1)[0];return{data:this.modifyArrayBy(r,i),actual:e,reverse:{type:7,...a,parent:r}}}}moveOp(e){let{parent:t,fi:r,id:i}=e;if(t!==null&&this.get(t)===void 0)return this.deleteOp({type:8,id:i});if(t!==null){let c=t;for(;c!==null;){if(c===void 0)throw new Error;if(c===i)throw new k$("cyclic tree");c=this.parent(c)}}let n=this.parent(i);if(n===void 0)return null;let a=n,s=this.childrenArray(n),o=s.findIndex(c=>c.id===i);s=[...s];let l=s.splice(o,1)[0],u=this.modifyArrayBy(n,s);n=t,s=u.childrenArray(n);let h=l.fi;return l={...l,fi:r},s=[...s,l],s.sort((c,d)=>c.fi-d.fi),e.localIndex=s.indexOf(l),u=u.modifyArrayBy(n,s),{data:u,actual:e,reverse:{type:9,parent:a,fi:h,id:i}}}previous(e,t){if(t===null){let i=this.childrenArray(e);return i.length===0?null:i[i.length-1].id}let r=null;for(let i of this.childrenArray(e)){if(i.id===t)return r;r=i.id}return null}traverseSortNext(e){let t=this.parent(e);if(t!==void 0){let r=this.childrenArray(t),i=r.findIndex(n=>n.id===e)+1;if(i<r.length)return r[i].id;if(t)return this.traverseSortNext(t)}}sortNext(e){let t=this.childrenArray(e);return t.length>0?t[0].id:this.traverseSortNext(e)}traverseSortPrevious(e){let t=this.childrenArray(e);return t.length>0?this.traverseSortPrevious(t[t.length-1].id):e}sortPrevious(e){let t=this.parent(e);if(t!==void 0){let r=this.childrenArray(t),i=r.findIndex(n=>n.id===e)-1;return i>=0?this.traverseSortPrevious(r[i].id):t}}getAllSorted(e){let t=[];for(let r of e){let i=this.getWithSortKey(r.id);i!==void 0&&t.push({...r,...i})}t.sort((r,i)=>$Pe(r.sortKey,i.sortKey));for(let r of t)delete r.sortKey;return t}getWithSortKey(e){var t=e;let r=[],i=this.get(t),n=i;if(i!==void 0){for(;t;)r.splice(0,0,i.fi),t=this.parent(t),t!==null&&(i=this.get(t));return{...n,sortKey:r}}}insertBeforeHelper(e,t,r){return this.insertAfterHelper(e,this.previous(e,t),r)}insertAfterHelper(e,t,r){let i=this.childrenArray(e);if(t===null){if(i.length===0)return Sh(0,r,r);{let n=i[0].fi;return Sh(n-r,n,r)}}else{let n=this.get(t);if(n===void 0||this.parent(t)!==e)throw new Error("illegal args");let a=i.find(s=>s.fi>n.fi);if(a===void 0){let s=i[i.length-1].fi;return Sh(s,s+r,r)}else return Sh(n.fi,a.fi,r)}}},CS;(e=>{function t(r,i){if(i.type!==0)return null;if(Array.isArray(r)){let n=i.props,a={},s=[...r],o=!1;if(n)for(let l of Object.keys(n)){let u=parseInt(l);if(isNaN(u))throw new Error("wrong index");a[l]=s[u],s[u]=n[l],o=!0}return o?{data:s,actual:i,reverse:{type:0,props:a}}:null}else{let n=i.props,a={},s={...r},o=!1;if(n)for(let l of Object.keys(n)){a[l]=s[l];let u=n[l];u===void 0?delete s[l]:s[l]=u,o=!0}return o?{data:s,actual:i,reverse:{type:0,props:a}}:null}}e.runOp=t})(CS||(CS={}));var Tt=class extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Tt.prototype)}deepFreeze(){let e=0;for(;e<this.length;)ek(this[e]),e++}fillCaches0(e){this.objCaches.set(e.id,e)}fillCaches(){if(this.objCaches===void 0){this.objCaches=new Map,Object.getOwnPropertyDescriptor(this,"objCaches").enumerable=!1;for(let e of this)this.fillCaches0(e)}}randomId(){this.fillCaches();let e=Array.from(this.objCaches.keys());if(e.length!==0)return e[Math.max(0,Math.floor(Math.random()*e.length)-1)]}data(e){var t;return(t=this.get(e))==null?void 0:t.data}get(e){return this.fillCaches(),this.objCaches.get(e)}modifyById(e,t){if(this.get(e)===void 0)throw new Error("not expected");{let r=this,i=r.findIndex(a=>a.id===e);if(i<0)throw new Error("not expected");let n=r[i];return r=[...r],r[i]={...n,data:t},this.modifyArrayBy(r)}}modifyArrayBy(e){Object.setPrototypeOf(e,Tt.prototype);let t=e;return YPe()||t.fillCaches(),t}runOp(e){switch(e.type){case 4:return this.addOp(e);case 5:return this.deleteOp(e);case 6:return this.moveOp(e)}return null}addOp(e){let{fi:t,id:r,data:i}=e,n=this,a={fi:t,id:r,data:i};return n=[...n,a],n.sort((s,o)=>s.fi-o.fi),e.localIndex=n.indexOf(a),{data:this.modifyArrayBy(n),actual:e,reverse:{type:5,id:r}}}deleteOp(e){let{id:t}=e,r=this,i=r.findIndex(a=>a.id===t);if(i===-1)return null;e.localIndex=i,r=[...r];let n=r.splice(i,1)[0];return{data:this.modifyArrayBy(r),actual:e,reverse:{type:4,...n}}}moveOp(e){let{fi:t,id:r}=e,i=this;i=[...i];let n=i.findIndex(o=>o.id===r);if(n===-1)return null;let a=i[n].fi,s={...i[n],fi:t};return i[n]=s,i.sort((o,l)=>o.fi-l.fi),e.localIndex=i.indexOf(s),{data:this.modifyArrayBy(i),actual:e,reverse:{type:6,fi:a,id:r}}}previous(e){if(e===null)return this.length===0?null:this[this.length-1].id;let t=null;for(let r of this){if(r.id===e)return t;t=r.id}return null}insertBeforeHelper(e,t){return this.insertAfterHelper(this.previous(e),t)}insertAfterHelper(e,t){let r=this;if(e===null){if(r.length===0)return Sh(0,t,t);{let i=r[0].fi;return Sh(i-t,i,t)}}else{let i=this.get(e);if(i===void 0)throw new Error("illegal args");let n=r.find(a=>a.fi>i.fi);if(n===void 0){let a=r[r.length-1].fi;return Sh(a,a+t,t)}else return Sh(i.fi,n.fi,t)}}};function jg(e){return e&&typeof e=="object"&&e instanceof Cn}var Cn=class{unusedFunOverridesTable(e){}runOp(e){let t=[],r=this,i=0,n={};for(;i<e.path.length;){if(t.push(r),r=r===void 0?void 0:r[e.path[i]],r!==void 0&&!jg(r))return null;i+=1}r=r?hA(r):new Cn;for(let[o,l]of Object.entries(e.props)){let u=r[o];n[o]=u,l===void 0?delete r[o]:r[o]=l}for(;i>0;){if(Object.keys(r).length===0){let o=t[i-1];o&&(r=hA(o),delete r[e.path[i-1]])}else{let o=t[i-1];if(o){let l=hA(o);l[e.path[i-1]]=r,r=l}else{let l=new Cn;l[e.path[i-1]]=r,r=l}}i-=1}let a=Object.setPrototypeOf(r,Cn.prototype),s={...e,props:n};return{data:a,actual:e,reverse:s}}},Gh;(e=>{function t(n,a){return p1(n,a)??n}e.apply=t;function r(n,a){return ik(n,a)}e.merge=r;function i(n,a){let s=0,o=a.path,l=n;for(;s<o.length&&l!==void 0;){if(l=vs.zoomOnce(l,o[s]),l===void 0)return a;if(!jg(l))return;s+=1}if(l===void 0)return a;if(jg(l))if(a.type===0){let u={...a.props};for(let h of Object.keys(l))delete u[h];return{...a,props:u}}else if(a.type===1||a.type===4||a.type===7){let u=rk([a],l);return u?(console.log(u),u):a}else return a}e.filterOp=i})(Gh||(Gh={}));function rk(e,t){if(t===void 0)return;let r=!1,i=e.map(n=>{let a=n.id,s=p1(n.data,t[a]);if(r=r||s!==void 0,s===void 0&&(s=n.data),n.children){let o=rk(n.children,t);return o!==void 0?r=!0:o=n.children,{...n,id:a,data:s,children:o}}else return{...n,id:a,data:s}});if(r)return i}function qPe(e,t){if(t===void 0)return;let r=!1,i=e.map(n=>{let a=n.id,s=p1(n.data,t[a]);return r=r||s!==void 0,s===void 0&&(s=n.data),{...n,id:a,data:s}});if(r)return Object.setPrototypeOf(i,Object.getPrototypeOf(e)),i}function p1(e,t){if(!jg(t))return t;if(e instanceof Cs){let r=rk(e,t);return r!==void 0&&Object.setPrototypeOf(r,Object.getPrototypeOf(e)),r}else{if(e instanceof Tt)return qPe(e,t);if(Array.isArray(e)){let r=!1,i=e.map((n,a)=>{let s=p1(n,t[a]);return r=r||s!==void 0,s===void 0&&(s=n),s});return r?(Object.setPrototypeOf(i,Object.getPrototypeOf(e)),i):void 0}else{if(e instanceof Cn)return ik(e,t);if(e&&typeof e=="object"){let r={},i=!1;for(let[n,a]of Object.entries(e)){let s=p1(a,t[n]);i=i||s!==void 0,s===void 0&&(s=a),r[n]=s}return i?(Object.setPrototypeOf(r,Object.getPrototypeOf(e)),r):void 0}}}}function ik(e,t){if(e===void 0)return t;if(t===void 0)return e;if(!jg(t))return t;if(!jg(e))return Gh.apply(e,t);let r=new Set;for(let n of Object.keys(e))r.add(n);for(let n of Object.keys(t))r.add(n);let i=new Cn;for(let n of r){let a=ik(e===void 0?void 0:e[n],t===void 0?void 0:t[n]);i[n]=a}return i}function XPe(e,t){let r={cur:[],result:[],len:0};return e=m1(e,t,r)??e,[e,r.result]}function AS(e,t){return e===null?null:(e.cur[e.len]=t,e.len+=1,e)}function TS(e){e&&(e.len-=1)}function QPe(e){if(e===null)return null;e.result.push(e.cur.slice(0,e.len))}function N$(e,t,r){let i=!1,n=e.map(a=>{let s=a.id,o=t[s];if(o!==void 0&&typeof o=="string"&&(i=!0,s=o,r!==null))throw new Error("not supported");let l=m1(a.data,t,AS(r,s));TS(r),i=i||l!==void 0,l===void 0&&(l=a.data);let u=N$(a.children,t,r);return u!==void 0?i=!0:u=a.children,{...a,id:s,data:l,children:u}});if(i)return n}function KPe(e,t,r){let i=!1,n=e.map(a=>{let s=a.id,o=t[s];if(o!==void 0&&typeof o=="string"&&(i=!0,s=o,r!==null))throw new Error("not supported");let l=m1(a.data,t,AS(r,s));return TS(r),i=i||l!==void 0,l===void 0&&(l=a.data),{...a,id:s,data:l}});if(i)return Object.setPrototypeOf(n,Object.getPrototypeOf(e)),n}function m1(e,t,r){if(e instanceof Cs){let i=N$(e,t,r);return i!==void 0&&Object.setPrototypeOf(i,Object.getPrototypeOf(e)),i}else{if(e instanceof Tt)return KPe(e,t,r);if(Array.isArray(e)){let i=!1,n=e.map((a,s)=>{let o=m1(a,t,AS(r,s));return TS(r),i=i||o!==void 0,o===void 0&&(o=a),o});return i?(Object.setPrototypeOf(n,Object.getPrototypeOf(e)),n):void 0}else if(e&&typeof e=="object"&&!tk(e)){let i={},n=!1;for(let[a,s]of Object.entries(e))if(a!=="name"&&a!=="text"){let o=t[a];if(typeof o=="string"){if(r!==null)throw new Error("not supported");n=!0,a=o}let l=m1(s,t,AS(r,a));TS(r),n=n||l!==void 0,l===void 0&&(l=s),i[a]=l}else i[a]=s;return n?(Object.setPrototypeOf(i,Object.getPrototypeOf(e)),i):void 0}else if(typeof e=="string"){let i=t[e];return i!==void 0&&QPe(r),i}else return}}var AD;(e=>{function t(r,i){let n=vs.zoom(i,r.path);if(typeof n=="object"){let a={};for(let s of Object.keys(r.props))a[s]=n[s];return{...r,props:a}}else return{...r,props:{}}}e.replaceProps=t})(AD||(AD={}));var qa;(e=>{function t(l,u){return{...l,path:l.path.slice(u)}}e.drop=t;function r(l,u){var h;return((h=i(l,u))==null?void 0:h.data)??l}e.applySimple=r;function i(l,u){var d,f;let h=u.path;for(var c=[];;){let m;if(l instanceof Cn&&u.type===0&&(m=l.runOp({...u,path:h.slice(c.length)}),m===null&&(m=void 0)),m===void 0&&c.length===h.length&&(l instanceof Cs||l instanceof Tt||l instanceof Qt?m=l.runOp(u):m=CS.runOp(l,u)),m!==void 0)if(m!==null){let v=m.data;for(let y=c.length-1;y>=0;y--){let x=h[y],b=c[y];if(b instanceof Cs){if(typeof x=="number")throw new Error("illegal arg");v=b.modifyById(x,v)}else if(b instanceof Tt){if(typeof x=="number")throw new Error("illegal arg");v=b.modifyById(x,v)}else if(b instanceof Qt){if(typeof x=="number")throw new Error("illegal arg");v=b.modifyById(x,v)}else if(b instanceof Cn){let _={...b,[x]:v};v=Object.setPrototypeOf(_,Cn.prototype)}else if(typeof b=="object")if(Array.isArray(b)){if(typeof x=="string"&&(x=parseInt(x),isNaN(x)))throw new Error("Invalid path");let _=v;v=[...b],v[x]=_}else v={...b,[x]:v};else return null}return{data:v,actual:{...m.actual,path:h},reverse:{...m.reverse,path:h}}}else return null;let p=h[c.length],g;if(l instanceof Cs){if(typeof p=="number")throw new Error("");g=(d=l.get(p))==null?void 0:d.data}else if(l instanceof Tt){if(typeof p=="number")throw new Error("");g=(f=l.get(p))==null?void 0:f.data}else l!==null&&(g=l[p]);if(g!==void 0)c.push(l),l=g;else return null}}e.apply=i;function n(l,u){for(let h=0;h<l.length&&h<u.length;h++)if(l[h]!==u[h])return!0;return!1}e.pathDisjoint=n;function a(l,u){if(l.length!==u.length)return!1;for(let h=0;h<l.length;h++)if(l[h]!==u[h])return!1;return!0}e.pathEq=a;function s(l,u){return n(l.path,u.path)}e.commutative=s;function o(l,u){return l.type===0&&u.type===0&&a(l.path,u.path)?Object.keys(l.props).every(h=>u.props[h]!==void 0):!1}e.subsumed=o})(qa||(qa={}));var TD;(e=>{function t(){return[]}e.empty=t;function r(u,h){let c=[];for(let d of u){let[f,...m]=d.path;f===h&&c.push({...d,path:m})}return c}e.removePrefix=r;function i(u,h){return u.map(c=>({...c,path:[h,...c.path]}))}e.addPrefix=i;function n(u,h){return[...u,...h]}e.concat=n;function a(u,h){return[...u.filter(c=>!h.some(d=>qa.subsumed(c,d))),...h]}e.compress=a;function s(u,h){return u.every(c=>h.every(d=>qa.commutative(c,d)))}e.commutative=s;function o(u,h){for(let c of h){let d=l(u,c);d!==null&&(u=d.data)}return u}e.applyAll=o;function l(u,h){var c=u;let d=[],f=[];for(let m of h)try{if(m.type===3){let p,g;m.path[m.path.length-1]==="variables"?p=vs.zoom(c,[...m.path,m.id,"value"]):p=vs.zoom(c,[...m.path,m.id]);let v=qa.apply(c,{...m,type:2});if(v!==null){c=v.data;let[y,x]=XPe(c,{[m.id]:p});c=y;for(let b=0;b<x.length;b++){let _=x[b],w=_.pop();if(typeof w=="number"){let E=[w];for(let C=b+1;C<x.length;C++){let M=x[C],P=M[M.length-1];if(typeof P=="number"&&vs.equal(_,M.slice(0,M.length-1)))E.push(P),x.splice(C,1);else break}let S=vs.zoom(c,_);g=S.map((C,M)=>E.includes(M)?m.id:C),p=S,w=_.pop()}else g=m.id;d.push({type:0,path:_,props:{[w]:p}}),f.push({type:0,path:_,props:{[w]:g}})}f.push(v.reverse),d.push(v.actual)}}else{let p=qa.apply(c,m);p!==null&&(d.push(p.actual),c=p.data,f.push(p.reverse))}}catch(p){if(p instanceof k$)return null;throw p}return{data:c,actual:d,reverse:f.reverse()}}e.apply=l})(TD||(TD={}));var z$=Symbol(),ZPe=Symbol(),NE=Symbol(),ex=class{reportOp(e,t,r=[]){let i=this;if(t===null)return;i._current=t.data;let n=r;for(;!(i instanceof U$);){let a=i._path,s=i._current;if(a!==""&&n.splice(0,0,a),i=i._parent,i===null)return;i.update(a,s)}i.push(n,e,t.actual,t.reverse)}deleteChildren(e){if(this._children){let t=this._children[e];if(t){let r=t[NE];r&&r(),delete this._children[e]}}}},JPe=class extends ex{constructor(e,t,r){super(),this._parent=e,this._path=t,this._current=r}update(e,t){if(Array.isArray(this._current)){if(typeof e=="string"&&(e=parseInt(e),isNaN(e)))throw new Error("Invalid path");this._current=[...this._current],this._current[e]=t}else this._current={...this._current,[e]:t}}runOp(e){this.reportOp(e,CS.runOp(this._current,e),e.path)}},eDe=class extends ex{constructor(e,t,r){super(),this._parent=e,this._path=t,this._current=r}update(e,t){this._current={...this._current,[e]:t},Object.setPrototypeOf(this._current,Qt.prototype)}runOp(e){this.reportOp(e,this._current.runOp(e))}},F$={get(e,t){if(t===NE)return()=>{e._parent=null};if(t===z$)return e._current;if(t===ZPe)return e;let{_current:r,_children:i}=e;if(t==="push"&&Array.isArray(r))throw new Error("not supported to expand array");let n=i===void 0?void 0:i[t];if(n!==void 0)return n;let a=r[t],s=zE(e,t,a);return s!==a?(i===void 0&&(i={},e._children=i),i[t]=s,s):a},has(e,t){return t in e._current},ownKeys(e){return Reflect.ownKeys(e._current)},defineProperty(){throw Error("not supported")},getPrototypeOf(e){return Object.getPrototypeOf(e._current)},setPrototypeOf(){throw Error("not supported")},getOwnPropertyDescriptor(e,t){let r=e._current,i=Reflect.getOwnPropertyDescriptor(r,t);return i&&{writable:!0,configurable:!0,enumerable:i.enumerable,value:r[t]}}},tDe={...F$,set(e,t,r){let i={type:0,props:{[t]:An(r)??r}};return e.deleteChildren(t),e.runOp(i),!0},deleteProperty(e,t){let r={type:0,props:{[t]:void 0}};return e.deleteChildren(t),e.runOp(r),!0}},rDe={...F$,set(e,t,r){return r===void 0?this.deleteProperty(e,t):(e.deleteChildren(t),e.runOp({type:1,id:t,data:r})),!0},deleteProperty(e,t){return e.runOp({type:2,id:t}),!0}},nk=class extends ex{constructor(e,t,r){super(),this._children={},this._parent=e,this._path=t,this._current=r,this[NE]=()=>{this._parent=null}}unproxy(){return this._current}update(e,t){this._current=this._current.modifyById(e,t)}runOp(e){this.reportOp(e,this._current.runOp(e))}randomId(){return this._current.randomId()}isDescendantOf(e,t){return this._current.isDescendantOf(e,t)}childrenOf(e){return this._current.childrenOf(e)}traverse(e){return this._current.traverse(e)}get(e){return this._current.get(e)}parent(e){return this._current.parent(e)}traverse(e){this._current.traverse((t,r)=>{e(t,this.data(t))})}data(e){var s;let{_current:t,_children:r}=this,i=r===void 0?void 0:r[e];if(i!==void 0)return i;let n=(s=t.get(e))==null?void 0:s.data,a=zE(this,e,n);return a!==n?(r===void 0&&(r={},this._children=r),r[e]=a,a):n}add(e,t,r,i,n){this.runOp({type:7,parent:e,fi:t,id:r,data:i,children:n})}move(e,t,r){this.runOp({type:9,parent:e,fi:t,id:r})}insertAfter(e,t,r){let i=this._current.insertAfterHelper(e,t,r.length);for(let n=0;n<r.length;n++){let a=r[n];this.add(e,i[n],a.id,a.data,a.children)}}insertBefore(e,t,r){let i=this._current.insertBeforeHelper(e,t,r.length);for(let n=0;n<r.length;n++){let a=r[n];this.add(e,i[n],a.id,a.data,a.children)}}moveAfter(e,t,r){let i=this._current.insertAfterHelper(e,t,r.length);for(let n=0;n<r.length;n++){let a=r[n];this.move(e,i[n],a)}}moveBefore(e,t,r){let i=this._current.insertBeforeHelper(e,t,r.length);for(let n=0;n<r.length;n++){let a=r[n];this.move(e,i[n],a)}}delete(e){this.deleteChildren(e),this.runOp({type:8,id:e})}sortNext(e){return this._current.sortNext(e)}sortPrevious(e){return this._current.sortPrevious(e)}getAllSorted(e){return this._current.getAllSorted(e)}},ak=class extends ex{constructor(e,t,r){super(),this._children={},this._parent=e,this._path=t,this._current=r,this[NE]=()=>{this._parent=null}}unproxy(){return this._current}get length(){return this._current.length}forEach(e){let t=this.length;for(let r=0;r<t;r++){let i=this._current[r].id,n=this._current[r].fi;e(this.data(this._current[r].id),i,n)}}find(e){let t=this.length;for(let r=0;r<t;r++){let i=this._current[r].id;if(e(this.data(i),i))return this.get(i)}}update(e,t){this._current=this._current.modifyById(e,t)}randomId(){return this._current.randomId()}get(e){return{...this._current.get(e),data:this.data(e)}}data(e){var s;let{_current:t,_children:r}=this,i=r===void 0?void 0:r[e];if(i!==void 0)return i;let n=(s=t.get(e))==null?void 0:s.data,a=zE(this,e,n);return a!==n?(r===void 0&&(r={},this._children=r),r[e]=a,a):n}runOp(e){this.reportOp(e,this._current.runOp(e))}add(e,t,r){this.runOp({type:4,fi:e,id:t,data:r})}move(e,t){this.runOp({type:6,fi:e,id:t})}insertAfter(e,t){let r=this._current.insertAfterHelper(e,t.length);for(let i=0;i<t.length;i++){let n=t[i];this.add(r[i],n.id,n.data)}}insertBefore(e,t){let r=this._current.insertBeforeHelper(e,t.length);for(let i=0;i<t.length;i++){let n=t[i];this.add(r[i],n.id,n.data)}}moveAfter(e,t){let r=this._current.insertAfterHelper(e,t.length);for(let i=0;i<t.length;i++){let n=t[i];this.move(r[i],n)}}moveBefore(e,t){let r=this._current.insertBeforeHelper(e,t.length);for(let i=0;i<t.length;i++){let n=t[i];this.move(r[i],n)}}delete(e){this.deleteChildren(e),this.runOp({type:5,id:e})}};function dA(e,t,r){if(e.length>0){let i=e[e.length-1];if(i.type===0&&t.type===0&&vs.equal(i.path,r)){Object.assign(i.props,t.props);return}}e.push({...t,path:r})}var U$=class extends ex{constructor(e){super(),this.ts=[],this.actual=[],this.reverse=[],this._current=e}update(e,t){if(e!=="")throw new Error("");this._current=t}push(e,t,r,i){dA(this.ts,t,e),dA(this.actual,r,e),dA(this.reverse,i,e)}result(){return{data:this._current,ts:this.ts,actual:this.actual,reverse:this.reverse.reverse()}}};function zE(e,t,r){return r instanceof Cs?new nk(e,t,r):r instanceof Tt?new ak(e,t,r):r instanceof Qt?new Proxy(new eDe(e,t,r),rDe):r!==null&&typeof r=="object"?tk(r)?r:new Proxy(new JPe(e,t,r),tDe):r}function j$(e){let t=new U$(e);return[zE(t,"",e),t]}function g1(e,t){let[r,i]=j$(e);return t(r),i.result()}function An(e){return e instanceof nk||e instanceof ak?e._current:e!==null&&typeof e=="object"?e[z$]:e}var vs;(e=>{function t(a,s){if(s.length===a.length)for(var o=0;o<a.length;){if(a[o]!==s[o])return!1;o+=1}else return!1;return!0}e.equal=t;function r(a,s,o){let l=n(o,a);if(l!==void 0&&typeof l=="object"&&l!==null){let u={...s};return Object.keys(l).forEach(h=>{delete u[h]}),u}else return s}e.removeOverridden=r;function i(a,s){if((a instanceof Cs||a instanceof nk)&&typeof s=="string"||(a instanceof Tt||a instanceof ak)&&typeof s=="string")return a.data(s);if(typeof s=="number"&&Array.isArray(a)||typeof s=="string"&&typeof a=="object"&&a!==null)return a[s]}e.zoomOnce=i;function n(a,s,o=0){for(;o<s.length&&a!==void 0;)a=i(a,s[o]),o+=1;return a}e.zoom=n})(vs||(vs={}));function iDe(e,t){let r=[];if(t.length===e.length)for(var i=0;i<e.length;){if(t[i]==="*")r.push(e[i]);else if(e[i]!==t[i])return null;i+=1}else return null;return r}function Ao(e,t){let r=[];if(t.length<=e.length)for(var i=0;i<t.length;){if(t[i]==="*")r.push(e[i]);else if(e[i]!==t[i])return null;i+=1}else return null;return r}var V$=class{},vF=class extends V${constructor(e){super(),this.id=e}},yF=class extends V${constructor(e){super(),this.data=e}},PD;try{PD=new TextDecoder}catch{}var ot,Wh,me=0,fs={},Rr,Eh,xo=0,su=0,js,yc,ts=[],jr,xF={useRecords:!1,mapsAsObjects:!0},H$=class{},G$=new H$;G$.name="MessagePack 0xC1";var Vg=!1,PS=class{constructor(e){e&&(e.useRecords===!1&&e.mapsAsObjects===void 0&&(e.mapsAsObjects=!0),e.structures?e.structures.sharedLength=e.structures.length:e.getStructures&&((e.structures=[]).uninitialized=!0,e.structures.sharedLength=0)),Object.assign(this,e)}unpack(e,t){if(ot)return Q$(()=>(OD(),this?this.unpack(e,t):PS.prototype.unpack.call(xF,e,t)));Wh=t>-1?t:e.length,me=0,su=0,Eh=null,js=null,ot=e;try{jr=e.dataView||(e.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength))}catch(r){throw ot=null,e instanceof Uint8Array?r:new Error("Source must be a Uint8Array or Buffer but was a "+(e&&typeof e=="object"?e.constructor.name:typeof e))}if(this instanceof PS){if(fs=this,this.structures)return Rr=this.structures,Db();(!Rr||Rr.length>0)&&(Rr=[])}else fs=xF,(!Rr||Rr.length>0)&&(Rr=[]);return Db()}unpackMultiple(e,t){let r,i=0;try{Vg=!0;let n=e.length,a=this?this.unpack(e,n):UE.unpack(e,n);if(t){for(t(a);me<n;)if(i=me,t(Db())===!1)return}else{for(r=[a];me<n;)i=me,r.push(Db());return r}}catch(n){throw n.lastPosition=i,n.values=r,n}finally{Vg=!1,OD()}}_mergeStructures(e,t){e=e||[];for(let r=0,i=e.length;r<i;r++){let n=e[r];n&&(n.isShared=!0,r>=32&&(n.highByte=r-32>>5))}e.sharedLength=e.length;for(let r in t||[])if(r>=0){let i=e[r],n=t[r];n&&(i&&((e.restoreStructures||(e.restoreStructures=[]))[r]=i),e[r]=n)}return this.structures=e}decode(e,t){return this.unpack(e,t)}};function Db(){try{if(!fs.trusted&&!Vg){let t=Rr.sharedLength||0;t<Rr.length&&(Rr.length=t)}let e=ki();if(me==Wh)Rr.restoreStructures&&bF(),Rr=null,ot=null,yc&&(yc=null);else if(me>Wh){let t=new Error("Unexpected end of MessagePack data");throw t.incomplete=!0,t}else if(!Vg)throw new Error("Data read, but end of buffer not reached");return e}catch(e){throw Rr.restoreStructures&&bF(),OD(),(e instanceof RangeError||e.message.startsWith("Unexpected end of buffer"))&&(e.incomplete=!0),e}}function bF(){for(let e in Rr.restoreStructures)Rr[e]=Rr.restoreStructures[e];Rr.restoreStructures=null}function ki(){let e=ot[me++];if(e<160)if(e<128){if(e<64)return e;{let t=Rr[e&63]||fs.getStructures&&W$()[e&63];return t?(t.read||(t.read=sk(t,e&63)),t.read()):e}}else if(e<144)if(e-=128,fs.mapsAsObjects){let t={};for(let r=0;r<e;r++)t[Y$()]=ki();return t}else{let t=new Map;for(let r=0;r<e;r++)t.set(ki(),ki());return t}else{e-=144;let t=new Array(e);for(let r=0;r<e;r++)t[r]=ki();return t}else if(e<192){let t=e-160;if(su>=me)return Eh.slice(me-xo,(me+=t)-xo);if(su==0&&Wh<140){let r=t<16?ok(t):$$(t);if(r!=null)return r}return DD(t)}else{let t;switch(e){case 192:return null;case 193:return js?(t=ki(),t>0?js[1].slice(js.position1,js.position1+=t):js[0].slice(js.position0,js.position0-=t)):G$;case 194:return!1;case 195:return!0;case 196:return fA(ot[me++]);case 197:return t=jr.getUint16(me),me+=2,fA(t);case 198:return t=jr.getUint32(me),me+=4,fA(t);case 199:return Ad(ot[me++]);case 200:return t=jr.getUint16(me),me+=2,Ad(t);case 201:return t=jr.getUint32(me),me+=4,Ad(t);case 202:if(t=jr.getFloat32(me),fs.useFloat32>2){let r=lk[(ot[me]&127)<<1|ot[me+1]>>7];return me+=4,(r*t+(t>0?.5:-.5)>>0)/r}return me+=4,t;case 203:return t=jr.getFloat64(me),me+=8,t;case 204:return ot[me++];case 205:return t=jr.getUint16(me),me+=2,t;case 206:return t=jr.getUint32(me),me+=4,t;case 207:return fs.int64AsNumber?(t=jr.getUint32(me)*4294967296,t+=jr.getUint32(me+4)):t=jr.getBigUint64(me),me+=8,t;case 208:return jr.getInt8(me++);case 209:return t=jr.getInt16(me),me+=2,t;case 210:return t=jr.getInt32(me),me+=4,t;case 211:return fs.int64AsNumber?(t=jr.getInt32(me)*4294967296,t+=jr.getUint32(me+4)):t=jr.getBigInt64(me),me+=8,t;case 212:if(t=ot[me++],t==114)return MF(ot[me++]&63);{let r=ts[t];if(r)return r.read?(me++,r.read(ki())):r.noBuffer?(me++,r()):r(ot.subarray(me,++me));throw new Error("Unknown extension "+t)}case 213:return t=ot[me],t==114?(me++,MF(ot[me++]&63,ot[me++])):Ad(2);case 214:return Ad(4);case 215:return Ad(8);case 216:return Ad(16);case 217:return t=ot[me++],su>=me?Eh.slice(me-xo,(me+=t)-xo):aDe(t);case 218:return t=jr.getUint16(me),me+=2,su>=me?Eh.slice(me-xo,(me+=t)-xo):sDe(t);case 219:return t=jr.getUint32(me),me+=4,su>=me?Eh.slice(me-xo,(me+=t)-xo):oDe(t);case 220:return t=jr.getUint16(me),me+=2,_F(t);case 221:return t=jr.getUint32(me),me+=4,_F(t);case 222:return t=jr.getUint16(me),me+=2,SF(t);case 223:return t=jr.getUint32(me),me+=4,SF(t);default:if(e>=224)return e-256;if(e===void 0){let r=new Error("Unexpected end of MessagePack data");throw r.incomplete=!0,r}throw new Error("Unknown MessagePack token "+e)}}}var nDe=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function sk(e,t){function r(){if(r.count++>2){let n=e.read=new Function("r","return function(){return {"+e.map(a=>nDe.test(a)?a+":r()":"["+JSON.stringify(a)+"]:r()").join(",")+"}}")(ki);return e.highByte===0&&(e.read=wF(t,e.read)),n()}let i={};for(let n=0,a=e.length;n<a;n++){let s=e[n];i[s]=ki()}return i}return r.count=0,e.highByte===0?wF(t,r):r}var wF=(e,t)=>function(){let r=ot[me++];if(r===0)return t();let i=e<32?-(e+(r<<5)):e+(r<<5),n=Rr[i]||W$()[i];if(!n)throw new Error("Record id is not defined for "+i);return n.read||(n.read=sk(n,e)),n.read()};function W$(){let e=Q$(()=>(ot=null,fs.getStructures()));return Rr=fs._mergeStructures(e,Rr)}var DD=FE,aDe=FE,sDe=FE,oDe=FE;function FE(e){let t;if(e<16&&(t=ok(e)))return t;if(e>64&&PD)return PD.decode(ot.subarray(me,me+=e));let r=me+e,i=[];for(t="";me<r;){let n=ot[me++];if(!(n&128))i.push(n);else if((n&224)===192){let a=ot[me++]&63;i.push((n&31)<<6|a)}else if((n&240)===224){let a=ot[me++]&63,s=ot[me++]&63;i.push((n&31)<<12|a<<6|s)}else if((n&248)===240){let a=ot[me++]&63,s=ot[me++]&63,o=ot[me++]&63,l=(n&7)<<18|a<<12|s<<6|o;l>65535&&(l-=65536,i.push(l>>>10&1023|55296),l=56320|l&1023),i.push(l)}else i.push(n);i.length>=4096&&(t+=Nn.apply(String,i),i.length=0)}return i.length>0&&(t+=Nn.apply(String,i)),t}function _F(e){let t=new Array(e);for(let r=0;r<e;r++)t[r]=ki();return t}function SF(e){if(fs.mapsAsObjects){let t={};for(let r=0;r<e;r++)t[Y$()]=ki();return t}else{let t=new Map;for(let r=0;r<e;r++)t.set(ki(),ki());return t}}var Nn=String.fromCharCode;function $$(e){let t=me,r=new Array(e);for(let i=0;i<e;i++){let n=ot[me++];if((n&128)>0){me=t;return}r[i]=n}return Nn.apply(String,r)}function ok(e){if(e<4)if(e<2){if(e===0)return"";{let t=ot[me++];if((t&128)>1){me-=1;return}return Nn(t)}}else{let t=ot[me++],r=ot[me++];if((t&128)>0||(r&128)>0){me-=2;return}if(e<3)return Nn(t,r);let i=ot[me++];if((i&128)>0){me-=3;return}return Nn(t,r,i)}else{let t=ot[me++],r=ot[me++],i=ot[me++],n=ot[me++];if((t&128)>0||(r&128)>0||(i&128)>0||(n&128)>0){me-=4;return}if(e<6){if(e===4)return Nn(t,r,i,n);{let a=ot[me++];if((a&128)>0){me-=5;return}return Nn(t,r,i,n,a)}}else if(e<8){let a=ot[me++],s=ot[me++];if((a&128)>0||(s&128)>0){me-=6;return}if(e<7)return Nn(t,r,i,n,a,s);let o=ot[me++];if((o&128)>0){me-=7;return}return Nn(t,r,i,n,a,s,o)}else{let a=ot[me++],s=ot[me++],o=ot[me++],l=ot[me++];if((a&128)>0||(s&128)>0||(o&128)>0||(l&128)>0){me-=8;return}if(e<10){if(e===8)return Nn(t,r,i,n,a,s,o,l);{let u=ot[me++];if((u&128)>0){me-=9;return}return Nn(t,r,i,n,a,s,o,l,u)}}else if(e<12){let u=ot[me++],h=ot[me++];if((u&128)>0||(h&128)>0){me-=10;return}if(e<11)return Nn(t,r,i,n,a,s,o,l,u,h);let c=ot[me++];if((c&128)>0){me-=11;return}return Nn(t,r,i,n,a,s,o,l,u,h,c)}else{let u=ot[me++],h=ot[me++],c=ot[me++],d=ot[me++];if((u&128)>0||(h&128)>0||(c&128)>0||(d&128)>0){me-=12;return}if(e<14){if(e===12)return Nn(t,r,i,n,a,s,o,l,u,h,c,d);{let f=ot[me++];if((f&128)>0){me-=13;return}return Nn(t,r,i,n,a,s,o,l,u,h,c,d,f)}}else{let f=ot[me++],m=ot[me++];if((f&128)>0||(m&128)>0){me-=14;return}if(e<15)return Nn(t,r,i,n,a,s,o,l,u,h,c,d,f,m);let p=ot[me++];if((p&128)>0){me-=15;return}return Nn(t,r,i,n,a,s,o,l,u,h,c,d,f,m,p)}}}}}function fA(e){return fs.copyBuffers?Uint8Array.prototype.slice.call(ot,me,me+=e):ot.subarray(me,me+=e)}function Ad(e){let t=ot[me++];if(ts[t])return ts[t](ot.subarray(me,me+=e));throw new Error("Unknown extension type "+t)}var EF=new Array(4096);function Y$(){let e=ot[me++];if(e>=160&&e<192){if(e=e-160,su>=me)return Eh.slice(me-xo,(me+=e)-xo);if(!(su==0&&Wh<180))return DD(e)}else return me--,ki();let t=(e<<5^(e>1?jr.getUint16(me):e>0?ot[me]:0))&4095,r=EF[t],i=me,n=me+e-3,a,s=0;if(r&&r.bytes==e){for(;i<n;){if(a=jr.getUint32(i),a!=r[s++]){i=1879048192;break}i+=4}for(n+=3;i<n;)if(a=ot[i++],a!=r[s++]){i=1879048192;break}if(i===n)return me=i,r.string;n-=3,i=me}for(r=[],EF[t]=r,r.bytes=e;i<n;)a=jr.getUint32(i),r.push(a),i+=4;for(n+=3;i<n;)a=ot[i++],r.push(a);let o=e<16?ok(e):$$(e);return o!=null?r.string=o:r.string=DD(e)}var MF=(e,t)=>{var r=ki();let i=e;t!==void 0&&(e=e<32?-((t<<5)+e):(t<<5)+e,r.highByte=t);let n=Rr[e];return n&&n.isShared&&((Rr.restoreStructures||(Rr.restoreStructures=[]))[e]=n),Rr[e]=r,r.read=sk(r,i),r.read()},q$=typeof self=="object"?self:global;ts[0]=()=>{};ts[0].noBuffer=!0;ts[101]=()=>{let e=ki();return(q$[e[0]]||Error)(e[1])};ts[105]=e=>{let t=jr.getUint32(me-4);yc||(yc=new Map);let r=ot[me],i;r>=144&&r<160||r==220||r==221?i=[]:i={};let n={target:i};yc.set(t,n);let a=ki();return n.used?Object.assign(i,a):(n.target=a,a)};ts[112]=e=>{let t=jr.getUint32(me-4),r=yc.get(t);return r.used=!0,r.target};ts[115]=()=>new Set(ki());var X$=["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64","BigInt64","BigUint64"].map(e=>e+"Array");ts[116]=e=>{let t=e[0],r=X$[t];if(!r)throw new Error("Could not find typed array for code "+t);return new q$[r](Uint8Array.prototype.slice.call(e,1).buffer)};ts[120]=()=>{let e=ki();return new RegExp(e[0],e[1])};ts[98]=e=>{let t=(e[0]<<24)+(e[1]<<16)+(e[2]<<8)+e[3],r=me;me+=t-4,js=[ki(),ki()],js.position0=0,js.position1=0;let i=me;me=r;try{return ki()}finally{me=i}};ts[255]=e=>e.length==4?new Date((e[0]*16777216+(e[1]<<16)+(e[2]<<8)+e[3])*1e3):e.length==8?new Date(((e[0]<<22)+(e[1]<<14)+(e[2]<<6)+(e[3]>>2))/1e6+((e[3]&3)*4294967296+e[4]*16777216+(e[5]<<16)+(e[6]<<8)+e[7])*1e3):e.length==12?new Date(((e[0]<<24)+(e[1]<<16)+(e[2]<<8)+e[3])/1e6+((e[4]&128?-281474976710656:0)+e[6]*1099511627776+e[7]*4294967296+e[8]*16777216+(e[9]<<16)+(e[10]<<8)+e[11])*1e3):new Date("invalid");function Q$(e){let t=Wh,r=me,i=xo,n=su,a=Eh,s=yc,o=js,l=new Uint8Array(ot.slice(0,Wh)),u=Rr,h=Rr.slice(0,Rr.length),c=fs,d=Vg,f=e();return Wh=t,me=r,xo=i,su=n,Eh=a,yc=s,js=o,ot=l,Vg=d,Rr=u,Rr.splice(0,Rr.length,...h),fs=c,jr=new DataView(ot.buffer,ot.byteOffset,ot.byteLength),f}function OD(){ot=null,yc=null,Rr=null}function lDe(e){e.unpack?ts[e.type]=e.unpack:ts[e.type]=e}var lk=new Array(147);for(let e=0;e<256;e++)lk[e]=+("1e"+Math.floor(45.15-e*.30103));var UE=new PS({useRecords:!1});UE.unpack;UE.unpackMultiple;UE.unpack;var uDe=new Float32Array(1);new Uint8Array(uDe.buffer,0,4);var Yw;try{Yw=new TextEncoder}catch{}var DS,uk,jE=typeof Buffer<"u",pA=jE?Buffer.allocUnsafeSlow:Uint8Array,K$=jE?Buffer:Uint8Array,CF=jE?4294967296:2144337920,Ie,Ui,_e=0,Il,Rl=null,cDe=/[\u0080-\uFFFF]/,n0=Symbol("record-id"),Z$=class extends PS{constructor(e){super(e),this.offset=0;let t,r,i,n,a,s=0,o=K$.prototype.utf8Write?function(w,E,S){return Ie.utf8Write(w,E,S)}:Yw&&Yw.encodeInto?function(w,E){return Yw.encodeInto(w,Ie.subarray(E)).written}:!1,l=this;e||(e={});let u=e&&e.sequential,h=e.structures||e.saveStructures,c=e.maxSharedStructures;if(c==null&&(c=h?32:0),c>8160)throw new Error("Maximum maxSharedStructure is 8160");let d=e.maxOwnStructures;d==null&&(d=h?32:64),u&&!e.saveStructures&&(this.structures=[]);let f=c>32||d+c>64,m=c+64,p=c+d+64;if(p>8256)throw new Error("Maximum maxSharedStructure + maxOwnStructure is 8192");let g=[],v=0,y=0;this.pack=this.encode=function(w,E){if(Ie||(Ie=new pA(8192),Ui=new DataView(Ie.buffer,0,8192),_e=0),Il=Ie.length-10,Il-_e<2048?(Ie=new pA(Ie.length),Ui=new DataView(Ie.buffer,0,Ie.length),Il=Ie.length-10,_e=0):_e=_e+7&2147483640,t=_e,a=l.structuredClone?new Map:null,l.bundleStrings?(Rl=["",""],Ie[_e++]=214,Ie[_e++]=98,Rl.position=_e-t,_e+=4):Rl=null,r=l.structures,r){r.uninitialized&&(r=l._mergeStructures(l.getStructures()));let S=r.sharedLength||0;if(S>c)throw new Error("Shared structures is larger than maximum shared structures, try increasing maxSharedStructures to "+r.sharedLength);if(!r.transitions){r.transitions=Object.create(null);for(let C=0;C<S;C++){let M=r[C];if(!M)continue;let P,I=r.transitions;for(let k=0,L=M.length;k<L;k++){let O=M[k];P=I[O],P||(P=I[O]=Object.create(null)),I=P}I[n0]=C+64}s=S}u||(r.nextId=S+64)}i&&(i=!1),n=r||[];try{if(x(w),Rl){Ui.setUint32(Rl.position+t,_e-Rl.position-t);let S=Rl;Rl=null,x(S[0]),x(S[1])}if(l.offset=_e,a&&a.idsToInsert){_e+=a.idsToInsert.length*6,_e>Il&&_(_e),l.offset=_e;let S=dDe(Ie.subarray(t,_e),a.idsToInsert);return a=null,S}return E&fDe?(Ie.start=t,Ie.end=_e,Ie):Ie.subarray(t,_e)}finally{if(r){if(y<10&&y++,v>1e4)r.transitions=null,y=0,v=0,g.length>0&&(g=[]);else if(g.length>0&&!u){for(let S=0,C=g.length;S<C;S++)g[S][n0]=0;g=[]}if(i&&l.saveStructures){let S=r.sharedLength||c;r.length>S&&(r=r.slice(0,S));let C=Ie.subarray(t,_e);return l.saveStructures(r,s)===!1?(l._mergeStructures(l.getStructures()),l.pack(w)):(s=S,C)}}E&pDe&&(_e=t)}};let x=w=>{_e>Il&&(Ie=_(_e));var E=typeof w,S;if(E==="string"){let C=w.length;if(Rl&&C>=8&&C<4096){let I=cDe.test(w);Rl[I?0:1]+=w,Ie[_e++]=193,x(I?-C:C);return}let M;C<32?M=1:C<256?M=2:C<65536?M=3:M=5;let P=C*3;if(_e+P>Il&&(Ie=_(_e+P)),C<64||!o){let I,k,L,O=_e+M;for(I=0;I<C;I++)k=w.charCodeAt(I),k<128?Ie[O++]=k:k<2048?(Ie[O++]=k>>6|192,Ie[O++]=k&63|128):(k&64512)===55296&&((L=w.charCodeAt(I+1))&64512)===56320?(k=65536+((k&1023)<<10)+(L&1023),I++,Ie[O++]=k>>18|240,Ie[O++]=k>>12&63|128,Ie[O++]=k>>6&63|128,Ie[O++]=k&63|128):(Ie[O++]=k>>12|224,Ie[O++]=k>>6&63|128,Ie[O++]=k&63|128);S=O-_e-M}else S=o(w,_e+M,P);S<32?Ie[_e++]=160|S:S<256?(M<2&&Ie.copyWithin(_e+2,_e+1,_e+1+S),Ie[_e++]=217,Ie[_e++]=S):S<65536?(M<3&&Ie.copyWithin(_e+3,_e+2,_e+2+S),Ie[_e++]=218,Ie[_e++]=S>>8,Ie[_e++]=S&255):(M<5&&Ie.copyWithin(_e+5,_e+3,_e+3+S),Ie[_e++]=219,Ui.setUint32(_e,S),_e+=4),_e+=S}else if(E==="number")if(w>>>0===w)w<64?Ie[_e++]=w:w<256?(Ie[_e++]=204,Ie[_e++]=w):w<65536?(Ie[_e++]=205,Ie[_e++]=w>>8,Ie[_e++]=w&255):(Ie[_e++]=206,Ui.setUint32(_e,w),_e+=4);else if(w>>0===w)w>=-32?Ie[_e++]=256+w:w>=-128?(Ie[_e++]=208,Ie[_e++]=w+256):w>=-32768?(Ie[_e++]=209,Ui.setInt16(_e,w),_e+=2):(Ie[_e++]=210,Ui.setInt32(_e,w),_e+=4);else{let C;if((C=this.useFloat32)>0&&w<4294967296&&w>=-2147483648){Ie[_e++]=202,Ui.setFloat32(_e,w);let M;if(C<4||(M=w*lk[(Ie[_e]&127)<<1|Ie[_e+1]>>7])>>0===M){_e+=4;return}else _e--}Ie[_e++]=203,Ui.setFloat64(_e,w),_e+=8}else if(E==="object")if(!w)Ie[_e++]=192;else{if(a){let M=a.get(w);if(M){if(!M.id){let P=a.idsToInsert||(a.idsToInsert=[]);M.id=P.push(M)}Ie[_e++]=214,Ie[_e++]=112,Ui.setUint32(_e,M.id),_e+=4;return}else a.set(w,{offset:_e-t})}let C=w.constructor;if(C===Object)b(w,!0);else if(C===Array){S=w.length,S<16?Ie[_e++]=144|S:S<65536?(Ie[_e++]=220,Ie[_e++]=S>>8,Ie[_e++]=S&255):(Ie[_e++]=221,Ui.setUint32(_e,S),_e+=4);for(let M=0;M<S;M++)x(w[M])}else if(C===Map){S=w.size,S<16?Ie[_e++]=128|S:S<65536?(Ie[_e++]=222,Ie[_e++]=S>>8,Ie[_e++]=S&255):(Ie[_e++]=223,Ui.setUint32(_e,S),_e+=4);for(let[M,P]of w)x(M),x(P)}else{for(let M=0,P=DS.length;M<P;M++){let I=uk[M];if(w instanceof I){let k=DS[M];if(k.write){k.type&&(Ie[_e++]=212,Ie[_e++]=k.type,Ie[_e++]=0),x(k.write.call(this,w));return}let L=Ie,O=Ui,F=_e;Ie=null;let z;try{z=k.pack.call(this,w,B=>(Ie=L,L=null,_e+=B,_e>Il&&_(_e),{target:Ie,targetView:Ui,position:_e-B}),x)}finally{L&&(Ie=L,Ui=O,_e=F,Il=Ie.length-10)}z&&(z.length+_e>Il&&_(z.length+_e),_e=hDe(z,Ie,_e,k.type));return}}b(w,!w.hasOwnProperty)}}else if(E==="boolean")Ie[_e++]=w?195:194;else if(E==="bigint"){if(w<BigInt(1)<<BigInt(63)&&w>=-(BigInt(1)<<BigInt(63)))Ie[_e++]=211,Ui.setBigInt64(_e,w);else if(w<BigInt(1)<<BigInt(64)&&w>0)Ie[_e++]=207,Ui.setBigUint64(_e,w);else if(this.largeBigIntToFloat)Ie[_e++]=203,Ui.setFloat64(_e,Number(w));else throw new RangeError(w+" was too large to fit in MessagePack 64-bit integer format, set largeBigIntToFloat to convert to float-64");_e+=8}else if(E==="undefined")this.encodeUndefinedAsNil?Ie[_e++]=192:(Ie[_e++]=212,Ie[_e++]=0,Ie[_e++]=0);else if(E==="function")x(this.writeFunction&&this.writeFunction());else throw new Error("Unknown type: "+E)},b=this.useRecords===!1?this.variableMapSize?w=>{let E=Object.keys(w),S=E.length;S<16?Ie[_e++]=128|S:S<65536?(Ie[_e++]=222,Ie[_e++]=S>>8,Ie[_e++]=S&255):(Ie[_e++]=223,Ui.setUint32(_e,S),_e+=4);let C;for(let M=0;M<S;M++)x(C=E[M]),x(w[C])}:(w,E)=>{Ie[_e++]=222;let S=_e-t;_e+=2;let C=0;for(let M in w)(E||w.hasOwnProperty(M))&&(x(M),x(w[M]),C++);Ie[S+++t]=C>>8,Ie[S+t]=C&255}:w=>{let E=Object.keys(w),S,C=n.transitions||(n.transitions=Object.create(null)),M=0;for(let I=0,k=E.length;I<k;I++){let L=E[I];S=C[L],S||(S=C[L]=Object.create(null),M++),C=S}let P=C[n0];if(P)P>=96&&f?(Ie[_e++]=((P-=96)&31)+96,Ie[_e++]=P>>5):Ie[_e++]=P;else{P=n.nextId,P||(P=64),P<m&&this.shouldShareStructure&&!this.shouldShareStructure(E)?(P=n.nextOwnId,P<p||(P=m),n.nextOwnId=P+1):(P>=p&&(P=m),n.nextId=P+1);let I=E.highByte=P>=96&&f?P-96>>5:-1;C[n0]=P,n[P-64]=E,P<m?(E.isShared=!0,n.sharedLength=P-63,i=!0,I>=0?(Ie[_e++]=(P&31)+96,Ie[_e++]=I):Ie[_e++]=P):(I>=0?(Ie[_e++]=213,Ie[_e++]=114,Ie[_e++]=(P&31)+96,Ie[_e++]=I):(Ie[_e++]=212,Ie[_e++]=114,Ie[_e++]=P),M&&(v+=y*M),g.length>=d&&(g.shift()[n0]=0),g.push(C),x(E))}for(let I=0,k=E.length;I<k;I++)x(w[E[I]])},_=w=>{let E;if(w>16777216){if(w-t>CF)throw new Error("Packed buffer would be larger than maximum buffer size");E=Math.min(CF,Math.round(Math.max((w-t)*(w>67108864?1.25:2),4194304)/4096)*4096)}else E=(Math.max(w-t<<2,Ie.length-1)>>12)+1<<12;let S=new pA(E);return Ui=new DataView(S.buffer,0,E),Ie.copy?Ie.copy(S,0,t,w):S.set(Ie.slice(t,w)),_e-=t,t=0,Il=S.length-10,Ie=S}}useBuffer(e){Ie=e,Ui=new DataView(Ie.buffer,Ie.byteOffset,Ie.byteLength),_e=0}};uk=[Date,Set,Error,RegExp,ArrayBuffer,Object.getPrototypeOf(Uint8Array.prototype).constructor,H$];DS=[{pack(e,t,r){let i=e.getTime()/1e3;if((this.useTimestamp32||e.getMilliseconds()===0)&&i>=0&&i<4294967296){let{target:n,targetView:a,position:s}=t(6);n[s++]=214,n[s++]=255,a.setUint32(s,i)}else if(i>0&&i<17179869184){let{target:n,targetView:a,position:s}=t(10);n[s++]=215,n[s++]=255,a.setUint32(s,e.getMilliseconds()*4e6+(i/1e3/4294967296>>0)),a.setUint32(s+4,i)}else if(isNaN(i)){if(this.onInvalidDate)return t(0),r(this.onInvalidDate());let{target:n,targetView:a,position:s}=t(3);n[s++]=212,n[s++]=255,n[s++]=255}else{let{target:n,targetView:a,position:s}=t(15);n[s++]=199,n[s++]=12,n[s++]=255,a.setUint32(s,e.getMilliseconds()*1e6),a.setBigInt64(s+4,BigInt(Math.floor(i)))}}},{pack(e,t,r){let i=Array.from(e),{target:n,position:a}=t(this.structuredClone?3:0);this.structuredClone&&(n[a++]=212,n[a++]=115,n[a++]=0),r(i)}},{pack(e,t,r){let{target:i,position:n}=t(this.structuredClone?3:0);this.structuredClone&&(i[n++]=212,i[n++]=101,i[n++]=0),r([e.name,e.message])}},{pack(e,t,r){let{target:i,position:n}=t(this.structuredClone?3:0);this.structuredClone&&(i[n++]=212,i[n++]=120,i[n++]=0),r([e.source,e.flags])}},{pack(e,t){this.structuredClone?AF(e,16,t):TF(jE?Buffer.from(e):new Uint8Array(e),t)}},{pack(e,t){let r=e.constructor;r!==K$&&this.structuredClone?AF(e,X$.indexOf(r.name),t):TF(e,t)}},{pack(e,t){let{target:r,position:i}=t(1);r[i]=193}}];function AF(e,t,r,i){let n=e.byteLength;if(n+1<256){var{target:a,position:s}=r(4+n);a[s++]=199,a[s++]=n+1}else if(n+1<65536){var{target:a,position:s}=r(5+n);a[s++]=200,a[s++]=n+1>>8,a[s++]=n+1&255}else{var{target:a,position:s,targetView:o}=r(7+n);a[s++]=201,o.setUint32(s,n+1),s+=4}a[s++]=116,a[s++]=t,a.set(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),s)}function TF(e,t){let r=e.byteLength;var i,n;if(r<256){var{target:i,position:n}=t(r+2);i[n++]=196,i[n++]=r}else if(r<65536){var{target:i,position:n}=t(r+3);i[n++]=197,i[n++]=r>>8,i[n++]=r&255}else{var{target:i,position:n,targetView:a}=t(r+5);i[n++]=198,a.setUint32(n,r),n+=4}i.set(e,n)}function hDe(e,t,r,i){let n=e.length;switch(n){case 1:t[r++]=212;break;case 2:t[r++]=213;break;case 4:t[r++]=214;break;case 8:t[r++]=215;break;case 16:t[r++]=216;break;default:n<256?(t[r++]=199,t[r++]=n):n<65536?(t[r++]=200,t[r++]=n>>8,t[r++]=n&255):(t[r++]=201,t[r++]=n>>24,t[r++]=n>>16&255,t[r++]=n>>8&255,t[r++]=n&255)}return t[r++]=i,t.set(e,r),r+=n,r}function dDe(e,t){let r,i=t.length*6,n=e.length-i;for(t.sort((a,s)=>a.offset>s.offset?1:-1);r=t.pop();){let a=r.offset,s=r.id;e.copyWithin(a+i,a,n),i-=6;let o=a+i;e[o++]=214,e[o++]=105,e[o++]=s>>24,e[o++]=s>>16&255,e[o++]=s>>8&255,e[o++]=s&255,n=a}return e}function wv(e){if(e.Class){if(!e.pack&&!e.write)throw new Error("Extension has no pack or write function");if(e.pack&&!e.type)throw new Error("Extension has no type (numeric code to identify the extension)");uk.unshift(e.Class),DS.unshift(e)}lDe(e)}var J$=new Z$({useRecords:!1});J$.pack;J$.pack;var fDe=512,pDe=1024,PF=new Z$({structuredClone:!0});wv({Class:Qt.prototype.constructor,type:1,write(e){return{...e}},read(e){return Object.setPrototypeOf(e,Qt.prototype),e}});wv({Class:Tt.prototype.constructor,type:2,write(e){return[...e]},read(e){return Object.setPrototypeOf(e,Tt.prototype),e}});wv({Class:Cs.prototype.constructor,type:3,write(e){return[...e]},read(e){return Object.setPrototypeOf(e,Cs.prototype),e}});wv({Class:vF.prototype.constructor,type:4,write(e){return e.id},read(e){return new vF(e)}});wv({Class:yF.prototype.constructor,type:5,write(e){return e.data},read(e){return new yF(e)}});wv({Class:Cn.prototype.constructor,type:6,write(e){return{...e}},read(e){return Object.setPrototypeOf(e,Cn.prototype),e}});function mDe(e){var t=0;if(e.length===0)return t;for(let r=0;r<e.length;r++){let i=e[r];t=(t<<5)-t+i,t=t&t}return t}function ID(e){if(tk(e))return e;if(Array.isArray(e))return e.map(ID);if(typeof e=="object"&&e!==null){let t={};for(let r of Object.keys(e).sort())t[r]=ID(e[r]);return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),t}else return e}var RD;(e=>{function t(n){return PF.pack(n)}e.serialize=t;function r(n){return PF.unpack(n)}e.deserialize=r;function i(n){return mDe(t(ID(n))).toString()}e.checksum=i})(RD||(RD={}));var DF;(e=>{function t(i){return i.type==="Conditional"?i.condition.type==="Distance"?"Distance":"StateChange":i.type}e.toEventUIType=t;function r(i){return i==="Distance"||i==="StateChange"?"Conditional":i}e.fromEventUIType=r})(DF||(DF={}));var uo={LookAt:[],Follow:["Create"],DragDrop:["Transition","Animation","Audio","Create","SetVariable","Conditional"],MouseHover:["Transition","Animation","Create","Destroy","SwitchCamera","SceneTransition","SetVariable","Conditional"],Scroll:["Transition","Animation","Create","SetVariable","Conditional"],Start:["Transition","Animation","Audio","Video","Create","Destroy","SwitchCamera","SceneTransition","SetVariable","Conditional"],Conditional:["Transition","Animation","Audio","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","Conditional"],MouseDown:["Transition","Animation","Audio","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","Conditional"],MouseUp:["Transition","Animation","Audio","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","Conditional"],MousePress:["Transition","Animation","Audio","Video","Link","Create","SwitchCamera","SceneTransition","Reset","SetVariable","Conditional"],KeyDown:["Transition","Animation","Audio","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","Conditional"],KeyUp:["Transition","Animation","Audio","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","Conditional"],KeyPress:["Transition","Animation","Audio","Video","Link","Create","SwitchCamera","Reset","SetVariable","Conditional"],GameControl:["Transition","Animation","Audio","Create","Conditional"],Collision:["Transition","Animation","Audio","Video","Create","Destroy","Reset","SetVariable","Conditional"],Trigger:["Transition","Audio","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","Conditional"],Resize:["Transition","Animation","Audio","Video","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","Conditional"],VariableChange:["Transition","Animation","Audio","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","Conditional"]},OF;(e=>{function t(i){return i.type==="MouseDown"||i.type==="MouseUp"||i.type==="MousePress"||i.type==="KeyDown"||i.type==="KeyUp"||i.type==="KeyPress"}e.is=t;function r(i){return i==="MouseDown"||i==="MouseUp"||i==="MousePress"?{type:i,mode:"Object",disabled:!1,runMode:"Once",actions:new Tt}:{type:i,disabled:!1,key:void 0,runMode:"Once",actions:new Tt}}e.defaultData=r})(OF||(OF={}));var OS;(e=>{function t(r){return{type:"Property",value:[r??null,"position","x"]}}e.propertyDefaultData=t,e.valueDefaultData={type:"Literal",value:0}})(OS||(OS={}));var kD;(e=>{function t(n){return{type:"Comparison",operator:"==",lOperand:OS.propertyDefaultData(n),rOperand:{...OS.valueDefaultData}}}e.comparisonDefaultData=t;function r(n){return{type:"Distance",toObject:n??null,fromObject:n??null,distance:200}}e.distanceDefaultData=r;function i(n,a){return{type:"State",object:n??null,state:a??null}}e.stateDefaultData=i})(kD||(kD={}));var IF;(e=>{function t(i){return i.type==="Conditional"}e.is=t;function r(i){return{type:"Conditional",disabled:!1,inActions:new Tt,outActions:new Tt,condition:kD.distanceDefaultData(i)}}e.defaultData=r})(IF||(IF={}));var RF;(e=>e.defaultData={type:"DragDrop",cursor:"hand",disabled:!1,dampingFactor:1,objects:[],snapTo:"center",snapSurfaceMode:"bbox",snapSurfaceOffset:0,dropOn:"all",autoOrient:!0,dropDestinations:[],plane:"adaptive",planeMode:"locked",referenceFrame:"global",limits:[-1/0,1/0,-1/0,1/0,-1/0,1/0],drop:!1,resetOnSnapFail:!1,snapSpeed:20,resetSpeed:20,dragDropActions:{drag:new Tt,drop:new Tt}})(RF||(RF={}));var LD;(e=>e.defaultData={type:"Follow",disabled:!1,maxDelta:0,dampingFactor:1,target:"cursor",plane:"custom",resetOnPointerLeave:!0,resetAfterDistanceLimit:!0,enabledTranslation:[!0,!0,!0],limitDistanceEnabled:!1,limitDistance:1e3,snapDelay:0,resetSpeed:5,actions:new Tt})(LD||(LD={}));var BD;(e=>e.defaultData={type:"LookAt",disabled:!1,distance:1e3,dampingFactor:1,target:"cursor",tilt:"up",axis:"z",plane:"custom",resetOnPointerLeave:!0,resetAfterDistanceLimit:!0,enabledRotation:[!0,!0,!0],limitDistanceEnabled:!1,limitDistance:1e3,snapDelay:0,resetSpeed:5})(BD||(BD={}));var kF;(e=>{function t(i){return i.type==="MouseHover"}e.is=t;function r(){return{type:"MouseHover",disabled:!1,actions:new Tt}}e.defaultData=r})(kF||(kF={}));var LF;(e=>{function t(i){return i.type==="Scroll"}e.is=t;function r(){return{type:"Scroll",disabled:!1,steps:100,trigger:"load",startFrom:"enter",enterAnchor:"top",startOffset:0,endAfter:400,actions:new Tt}}e.defaultData=r})(LF||(LF={}));var BF;(e=>{function t(i){return i.type==="Start"}e.is=t;function r(){return{type:"Start",disabled:!1,actions:new Tt}}e.defaultData=r})(BF||(BF={}));var NF;(e=>{function t(i){return i.type==="Collision"}e.is=t;function r(){return{type:"Collision",disabled:!1,runMode:"Once",target:"character",actions:new Tt}}e.defaultData=r})(NF||(NF={}));var zF;(e=>{function t(i){return i.type==="Trigger"}e.is=t;function r(i,n){return{type:"Trigger",disabled:!1,runMode:"Once",target:"all",triggeringObjects:[],actions:new Tt,triggerZone:"box",position:n.toArray(),rotation:[0,0,0],size:i.toArray(),radius:i.length()/2,helperVisible:!0}}e.defaultData=r})(zF||(zF={}));var ND;(e=>{e.defaultSizes={mobile:[480,480],tablet:[768,768],desktop:[1200,1200],custom:[769,1200]};function t(s){return s.type==="Resize"}e.is=t;function r(s){return typeof s=="string"?s:"custom"}e.sizeToDevice=r;function i(s){return typeof s=="string"?[...e.defaultSizes[s]]:[...s]}e.deviceToSize=i;function n(){let s={size:"mobile",operator:"<",actions:new Tt},o={size:"tablet",operator:"<",actions:new Tt},l={size:[...e.defaultSizes.custom],operator:"<>",actions:new Tt},u=new Tt;return u.push({id:bt.generateUUID(),fi:0,data:s},{id:bt.generateUUID(),fi:1,data:o},{id:bt.generateUUID(),fi:2,data:l}),{type:"Resize",disabled:!1,orientation:"horizontal",breakpoints:u}}e.defaultData=n;function a(){return{size:[...e.defaultSizes.custom],operator:"<>",actions:new Tt}}e.defaultBreakpointData=a})(ND||(ND={}));var zD;(e=>{e.propertyPaths={"Position X":["position","x"],"Position Y":["position","y"],"Position Z":["position","z"],"Rotation X":["rotation","x"],"Rotation Y":["rotation","y"],"Rotation Z":["rotation","z"],"Scale X":["scale","x"],"Scale Y":["scale","y"],"Scale Z":["scale","z"],Width:["width"],Height:["height"],Depth:["depth"],"Mouse Position X":["mouse","x"],"Mouse Position Y":["mouse","y"],"Mouse Pressed":["mouse","pressed"],"Screen Width":["mouse","width"],"Screen Height":["mouse","height"],"Hit Position X":["raycast","x"],"Hit Position Y":["raycast","y"],"Hit Position Z":["raycast","z"],"Hit Object Position X":["raycast","objX"],"Hit Object Position Y":["raycast","objY"],"Hit Object Position Z":["raycast","objZ"]};function t(i){return i.type==="VariableChange"}e.is=t;function r(){return{disabled:!1,type:"VariableChange",actions:new Tt,variableId:"",objectId:null,property:"Position X"}}e.defaultData=r})(zD||(zD={}));var _v="personal camera",wy="a218fcc3-276b-49b9-b485-49037fd14f5f",gDe=2960946,Vo=5526619,Lm;(e=>{function t(i,n){return i[0]===n[0]&&i[1]===n[1]}e.isEqual=t;function r(i,n,a){return[i[0]+(n[0]-i[0])*a,i[1]+(n[1]-i[1])*a]}e.lerp=r})(Lm||(Lm={}));var _f;(e=>{function t(l,u){return l[0]===u[0]&&l[1]===u[1]&&l[2]===u[2]}e.isEqual=t;function r(l,u){return[l[0]+u[0],l[1]+u[1],l[2]+u[2]]}e.add=r;function i(l,u){return[l[0]-u[0],l[1]-u[1],l[2]-u[2]]}e.sub=i;function n(l,u){return[l[0]/u[0],l[1]/u[1],l[2]/u[2]]}e.div=n;function a(l,u){return[l[0]*u[0],l[1]*u[1],l[2]*u[2]]}e.mul=a;function s(l,u){return Math.hypot(l[0]-u[0],l[1]-u[1],l[2]-u[2])}e.dist=s;function o(l,u,h){return[l[0]+(u[0]-l[0])*h,l[1]+(u[1]-l[1])*h,l[2]+(u[2]-l[2])*h]}e.lerp=o})(_f||(_f={}));var IS;(e=>{function t(i,n){return i[0]===n[0]&&i[1]===n[1]&&i[2]===n[2]&&i[3]===n[3]}e.isEqual=t;function r(i,n,a){return[i[0]+(n[0]-i[0])*a,i[1]+(n[1]-i[1])*a,i[2]+(n[2]-i[2])*a,i[3]+(n[3]-i[3])*a]}e.lerp=r})(IS||(IS={}));var Hg;(e=>{e.identity=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function t(n,a){for(let s=0;s<16;s++)if(n[s]!==a[s])return!1;return!0}e.isEqual=t;function r(n){return n??e.identity}e.simplify=r;function i(n,a){let s=a.slice(0);for(var o=0,l=a.length;o<l;o+=3){let u=n[3]*a[o]+n[7]*a[o+1]+n[11]*a[o+2]+n[15];s[o]=(n[0]*a[o]+n[4]*a[o+1]+n[8]*a[o+2]+n[12])/u,s[o+1]=(n[1]*a[o]+n[5]*a[o+1]+n[9]*a[o+2]+n[13])/u,s[o+2]=(n[2]*a[o]+n[6]*a[o+1]+n[10]*a[o+2]+n[14])/u}return s}e.applyMatrix4=i})(Hg||(Hg={}));var Ua;(e=>{function t(l){return typeof l=="object"&&typeof l.r=="number"&&typeof l.g=="number"&&typeof l.b=="number"}e.isRGB=t,e.white={r:1,g:1,b:1},e.red={r:1,g:0,b:0},e.black={r:0,g:0,b:0};function r(l){return{r:Math.round(l.r*255),g:Math.round(l.g*255),b:Math.round(l.b*255),a:1}}e.toRgb255a1=r;function i(l){return{r:l.r,g:l.g,b:l.b}}e.clone=i;function n(l){return l=Math.floor(l),{r:(l>>16&255)/255,g:(l>>8&255)/255,b:(l&255)/255}}e.fromHex=n;function a(l){return Math.round(l.r*255)*65536+Math.round(l.g*255)*256+Math.round(l.b*255)}e.toHex=a;function s(l,u){return l.r===u.r&&l.g===u.g&&l.b===u.b}e.equals=s;function o(l,u,h){return{r:l.r+(u.r-l.r)*h,g:l.g+(u.g-l.g)*h,b:l.b+(u.b-l.b)*h}}e.lerp=o})(Ua||(Ua={}));var dl;(e=>{e.white={...Ua.white,a:1},e.transparent={...Ua.white,a:0};function t(s){return{r:s[0],g:s[1],b:s[2],a:s[3]}}e.from0to1=t;function r(s,o){return{...Ua.fromHex(s),a:o}}e.fromHexAndA=r;function i(s){return{r:Math.round(s.r*255),g:Math.round(s.g*255),b:Math.round(s.b*255),a:s.a}}e.toRgb255a1=i;function n(s,o){return Ua.equals(s,o)&&s.a===o.a}e.equals=n;function a(s,o,l){return{r:s.r+(o.r-s.r)*l,g:s.g+(o.g-s.g)*l,b:s.b+(o.b-s.b)*l,a:s.a+(o.a-s.a)*l}}e.lerp=a})(dl||(dl={}));var FD;(e=>e.identity={position:[0,0,0],rotation:[0,0,0],scale:[1,1,1]})(FD||(FD={}));var FF;(e=>e.defaultData={mass:1,stiffness:80,damping:10,velocity:0})(FF||(FF={}));var UF;(e=>e.defaultData={control1:[.5,0],control2:[.5,1]})(UF||(UF={}));var sh;(e=>(e.linear=[0,0,1,1],e.ease=[.25,.1,.25,1],e.easeIn=[.42,0,1,1],e.easeOut=[0,0,.58,1],e.easeInOut=[.42,0,.58,1]))(sh||(sh={}));function vDe(e){return typeof e=="string"&&e.length===36?/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e):!1}var Hf;(e=>{e.all=["PerspectiveCamera","OrthographicCamera"];function t(r){return e.all.includes(r)}e.is=t})(Hf||(Hf={}));var Gg;(e=>{e.DefaultUp=[0,1,0],e.DefaultTargetOffset=1e3,e.defaultData={far:1e5,type:"OrthographicCamera",perspective:{near:70,fov:45,zoom:1},orthographic:{near:-1e5,zoom:1},up:e.DefaultUp,isUpVectorFlipped:!1,targetOffset:e.DefaultTargetOffset};function t(r){return r.type==="PerspectiveCamera"?r.perspective.zoom:r.orthographic.zoom}e.getZoom=t})(Gg||(Gg={}));var Mh;(e=>{function t(i,n=.1){return{disabled:!1,type:"linear",hideBase:!1,count:3,radial:{radius:Math.max(i[0],i[1])*2,start:0,end:360,alignment:!1,axis:"y",scale:[1,1,1],rotation:[0,0,0],position:[0,0,0]},toObject:{object:"",spreadType:"random",scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],axis:"x",seed:0,count:99,align:"normal"},linear:{scale:[1,1,1],rotation:[0,0,0],position:[i[0]+i[0]*n,0,0]},grid:{count:[2,2,2],size:i.map(a=>a*(1+n)),useCenter:!0},randomness:!1,randomnessObject:{strength:100,scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],movement:1,seed:0,freqScale:10,noiseType:"perlin"}}}e.defaultData=t;function r(i,n){let a={...i};if(eY.forEach(s=>{Object.assign(a,{[s]:n[s]??i[s]})}),a.radial={...i.radial},n.radial){let s=i.radial,o=n.radial;tY.forEach(l=>{Object.assign(a.radial,{[l]:o[l]??s[l]})})}if(a.linear={...i.linear},n.linear){let s=i.linear,o=n.linear;rY.forEach(l=>{Object.assign(a.linear,{[l]:o[l]??s[l]})})}if(a.grid={...i.grid},n.grid){let s=i.grid,o=n.grid;iY.forEach(l=>{Object.assign(a.grid,{[l]:o[l]??s[l]})})}if(a.toObject={...i.toObject},n.toObject){let s=i.toObject,o=n.toObject;nY.forEach(l=>{Object.assign(a.toObject,{[l]:o[l]??s[l]})})}if(a.randomnessObject={...i.randomnessObject},n.randomnessObject){let s=i.randomnessObject,o=n.randomnessObject;aY.forEach(l=>{Object.assign(a.randomnessObject,{[l]:o[l]??s[l]})})}return a}e.merge=r})(Mh||(Mh={}));var UD;(e=>{e.defaultData={radial:{},linear:{},grid:{},toObject:{},randomnessObject:{}};let t=["radial","linear","grid","toObject","randomnessObject"];function r(i,n){let a=[];i.count!==void 0&&a.push({type:0,path:n,props:{count:i.count}});for(let s of t){let o=i[s];o&&Object.keys(o).length>0&&a.push({type:0,path:[...n,s],props:o})}return a}e.toOps=r})(UD||(UD={}));var eY=["count"],tY=["radius","start","end","position","scale","rotation"],rY=["position","scale","rotation"],iY=["count","size"],nY=["count","position","scale","rotation"],aY=["strength","scale","rotation","position","movement","seed","freqScale"],jD;(e=>{e.all=["PointLight","SpotLight","DirectionalLight","HemisphereLight"];function t(r){return e.all.includes(r)}e.is=t})(jD||(jD={}));var VD;(e=>{function t(i){return r(i)}e.defaultData=t;function r(i){if(i==="PointLight")return{type:i,color:dl.white,intensity:1,distance:2e3,decay:1,shadows:!0,shadowResolution:1024,shadowRadius:1,penumbraSize:.5,depth:1e5};if(i==="SpotLight")return{type:i,color:dl.white,intensity:1,distance:2e3,decay:1,shadows:!0,penumbra:0,angle:30/180*Math.PI,depth:1e5,penumbraSize:.5,shadowResolution:1024,shadowRadius:1};if(i==="DirectionalLight")return{type:i,color:dl.white,intensity:1,shadows:!0,size:2e3,depth:1e5,penumbraSize:.5,shadowResolution:1024,shadowRadius:1};throw new Error("not implemented")}})(VD||(VD={}));var Wg;(e=>e.defaultData={enabled:"visibility",fusedBody:!0,rigidBody:"positioned",density:1,pointMass:0,gravityScale:1,friction:.5,damping:0,restitution:.2,colliderType:"convex",enabledRotation:[!0,!0,!0],enabledTranslation:[!0,!0,!0]})(Wg||(Wg={}));var HD;(e=>{e.defaultData={castShadow:!0,receiveShadow:!0};function t(r,i){return r.castShadow===i.castShadow&&r.receiveShadow===i.receiveShadow}e.equals=t})(HD||(HD={}));var GD;(e=>{e.defaultData={flatShading:!1,wireframe:!1,side:0};function t(r,i){return r.flatShading===i.flatShading&&r.side===i.side&&r.wireframe===i.wireframe}e.equals=t})(GD||(GD={}));var WD;(e=>e.defaultData={...GD.defaultData,...HD.defaultData})(WD||(WD={}));var jF;(e=>{function t(r,i){var a,s;let n=[];if("material"in r){let o=typeof r.material=="string"?i.materials[r.material]??((a=i.lib.materials[r.material])==null?void 0:a.asset):r.material;o&&n.push(o)}else if("materials"in r)for(let o of r.materials){let l=typeof o=="string"?i.materials[o]??((s=i.lib.materials[o])==null?void 0:s.asset):o;l&&n.push(l)}return n}e.getMaterialData=t})(jF||(jF={}));var RS;(e=>(e.defaultVideo={data:"",thumb:"/_assets/_videos/catThumb.png",type:"video",name:"Cat video"},e.maxSize=3e7))(RS||(RS={}));var VF;(e=>{function t(r){return r==="texture"||r==="video"||r==="color"||r==="depth"||r==="normal"||r==="gradient"||r==="noise"||r==="fresnel"||r==="rainbow"||r==="toon"||r==="outline"||r==="transmission"||r==="matcap"||r==="displace"||r==="pattern"||r==="light"}e.is=t})(VF||(VF={}));function yDe(e){return e.type!=="displace"}var HF;(e=>{function t(r){return r==="phong"||r==="toon"||r==="lambert"||r==="physical"}e.is=t})(HF||(HF={}));var sY=["mode","gradientType","noiseType","displacementType","projection","cnormal","crop","axis","side"],xDe=["wrapping","image","video","name"],hs;(e=>{function t(a,s){let{texture:o,...l}=s;if(Object.assign(a,l),o){let u=a.texture;u&&Object.assign(u,o)}}e.patch=t;function r(a,s){return a==="light"&&s?i(s):n(a)}e.defaultData=r;function i(a){let s={mode:0,isMask:!1,visible:!0,bumpMap:void 0,bumpMapIntensity:5,roughnessMap:void 0,alphaOverride:1};switch(a){case"phong":return{...s,category:"phong",specular:{r:.2,g:.2,b:.2},shininess:5,type:"light",visible:!0,mode:0,occlusion:!0,alpha:.6};case"toon":return{...s,category:"toon",specular:{r:.2,g:.2,b:.2},shininess:10,type:"light",alpha:1};case"lambert":return{...s,category:"lambert",emissive:{r:0,g:0,b:0},type:"light",alpha:1,visible:!0,mode:0,occlusion:!0};case"physical":return{...s,category:"physical",roughness:.2,metalness:.2,reflectivity:.2,type:"light",alpha:1,visible:!0,mode:0,occlusion:!0}}}function n(a){let s={alpha:1,mode:0,isMask:!1,visible:!0};switch(a){case"texture":return{...s,type:"texture",size:[128,128],blending:0,axis:"x",side:2,projection:0,texture:{image:"image_0",wrapping:1e3,repeat:[1,1],offset:[0,0]},crop:!1};case"video":return{...s,type:"video",size:[128,128],blending:0,axis:"x",side:2,projection:0,texture:{video:RS.defaultVideo,wrapping:1001,repeat:[1,1],offset:[0,0]},crop:!1};case"color":return{...s,type:"color",color:Ua.fromHex(Vo)};case"depth":return{...s,type:"depth",gradientType:1,smooth:!1,isVector:!0,isWorldSpace:!1,origin:[0,0,0],direction:[1,0,0],colors:[[1,1,1,1],[0,0,0,1]],steps:[0,1],near:50,far:200};case"normal":return{...s,type:"normal",cnormal:[1,1,1]};case"gradient":return{...s,type:"gradient",gradientType:0,smooth:!1,colors:[[0,0,0,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],steps:[0,1,1,1,1,1,1,1,1,1],num:2,angle:0,offset:[0,0],morph:[0,0]};case"noise":return{...s,type:"noise",size:[100,100,100],noiseType:0,scale:1,move:1,colorA:{...Ua.fromHex(6710886),a:1},colorB:{...Ua.fromHex(6710886),a:1},colorC:{...Ua.fromHex(16777215),a:1},colorD:{...Ua.fromHex(16777215),a:1},distortion:[1,1],fA:[1.7,9.2],fB:[8.3,2.8],voronoiStyle:0,highCut:1,lowCut:0,smoothness:.3,seed:0,quality:1};case"fresnel":return{...s,type:"fresnel",color:dl.fromHexAndA(16777215,1),bias:.1,scale:1,intensity:2,factor:1};case"rainbow":return{...s,type:"rainbow",filmThickness:30,movement:0,wavelengths:[0,0,0],noiseStrength:0,noiseScale:1,offset:[0,0,0]};case"toon":return{...s,type:"toon",positioning:2,colors:[[0,0,0,1],[.5,.5,.5,1],[.5,.5,.5,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],steps:[0,.475,.525,1,1,1,1,1,1,1],num:4,source:[0,1e3,0],isWorldSpace:!0,noiseStrength:0,noiseScale:1,shadowColor:dl.fromHexAndA(0,0),offset:[0,0,0]};case"outline":return{...s,type:"outline",outlineColor:dl.fromHexAndA(0,1),contourColor:dl.fromHexAndA(0,1),outlineWidth:2,contourWidth:5,outlineThreshold:.4,contourThreshold:0,outlineSmoothing:0,contourFrequency:10,contourDirection:[0,1,0],positionalLines:!1,compensation:!0};case"matcap":return{...s,type:"matcap",texture:{image:"matcap_0",wrapping:1001,repeat:[1,1],offset:[0,0]}};case"transmission":return{...s,type:"transmission",thickness:10,ior:1.5,roughness:1};case"displace":return{visible:!0,type:"displace",displacementType:"noise",noiseType:0,scale:10,movement:1,offset:[0,0,0],intensity:8,voronoiStyle:0,smoothness:.3,seed:0,highCut:1,lowCut:0,quality:1};case"pattern":return{...s,type:"pattern",style:0,projection:0,axis:"y",blending:0,offset:[0,0],colorA:{...Ua.fromHex(0),a:1},colorB:{...Ua.fromHex(16777215),a:1},frequency:[10,10],size:.5,variation:0,smoothness:.5,zigzag:0,rotation:0,vertical:[0,1],horizontal:[0,1],sides:6}}}})(hs||(hs={}));var wa;(e=>{function t(u){return!u.layers.some(h=>h.data.type==="texture"&&h.data.projection!==0||h.data.type==="depth"&&!h.data.isWorldSpace||h.data.type==="noise"||h.data.type==="displace")}e.isMergable=t;function r(u){let h="";return u.layers.forEach(c=>{Object.entries(c.data).forEach(([d,f])=>{h+=`${d}${f}`,Array.isArray(f)?f.forEach(m=>h+=`${m}`):typeof f=="object"?Object.values(f).forEach(m=>{typeof m=="number"?h+=`${m.toFixed(4)}`:h+=`${m}`}):h+=`${f}`})}),h}e.getHash=r;function i(){return{layers:new Tt}}e.defaultEmptyData=i;function n(u="layer1",h="layer2"){return s("phong",u,h)}e.defaultData=n;function a(u,h){return{...u,name:h}}e.withName=a;function s(u,h="layer1",c="layer2"){let d=new Tt;return d.push({fi:0,data:hs.defaultData("light",u),id:h}),d.push({fi:1,data:hs.defaultData("color"),id:c}),{layers:d}}e.defaultTwoLayerData=s;function o(u,h="phong",c="layer1",d="layer2"){let f=hs.defaultData("texture");Object.assign(f.texture,{image:u});let m=new Tt;return m.push({fi:0,data:f,id:c}),m.push({fi:1,data:hs.defaultData("light",h),id:d}),{layers:m}}e.defaultTwoLayerTextureData=o;function l(u,h="phong",c="layer1",d="layer2"){let f=hs.defaultData("video");Object.assign(f.texture,{video:u});let m=new Tt;return m.push({fi:0,data:f,id:c}),m.push({fi:1,data:hs.defaultData("light",h),id:d}),{layers:m}}e.defaultTwoLayerVideoTextureData=l})(wa||(wa={}));var kS;(e=>{function t(){return{points:new Tt,roundness:0,shapeHoles:[],isClosed:!1}}e.defaultData=t})(kS||(kS={}));var LS;(e=>{function t(){return{points:new Tt,lastInsertionPlane:null,subdivisions:12,isClosed:!1}}e.defaultData=t})(LS||(LS={}));var oY={type:"Ellipse",width:50,height:50,spikes:16,angle:360,innerRadius:0},$D;(e=>{function t(r,i){let n={...r};return uY.forEach(a=>{Object.assign(n,{[a]:i[a]??r[a]})}),n}e.merge=t})($D||($D={}));var lY={shape:oY,depth:1,offset:0,bevel:50,bevelSides:6,angle:0,twist:0,startScale:1,endScale:1,capType:"flat"},uY=["depth","offset","angle","twist","startScale","endScale"],BS;(e=>{function t(i){return i==="PolygonGeometry"||i==="RectangleGeometry"||i==="StarGeometry"||i==="TriangleGeometry"||i==="EllipseGeometry"}e.is2DParametricMesh=t;function r(i){return i==="PolygonGeometry"||i==="PolygonGeometry"||i==="RectangleGeometry"||i==="StarGeometry"||i==="TriangleGeometry"||i==="EllipseGeometry"||i==="PathGeometry"||i==="VectorGeometry"||i==="ConeGeometry"||i==="CubeGeometry"||i==="CylinderGeometry"||i==="DodecahedronGeometry"||i==="HelixGeometry"||i==="IcosahedronGeometry"||i==="LatheGeometry"||i==="PyramidGeometry"||i==="SphereGeometry"||i==="PlaneGeometry"||i==="BackdropGeometry"||i==="TorusGeometry"||i==="TorusKnotGeometry"||i==="BooleanGeometry"||i==="TextGeometry"}e.isParametricMesh=r})(BS||(BS={}));var YD;(e=>{function t(r,i){let n={...r};return Object.assign(n,i),n.type==="PathGeometry"&&"extrusion"in i&&i.extrusion&&(n.extrusion={...r.extrusion},Object.assign(n.extrusion,$D.merge(n.extrusion,i.extrusion))),n}e.merge=t})(YD||(YD={}));var ng;(e=>{function t(r){if(r==="RectangleGeometry")return{width:320,height:320,type:r,cornerRadius:[0,0,0,0],cornerType:0,depth:0,extrudeBevelSize:0,extrudeBevelSegments:1};if(r==="PathGeometry")return{type:r,width:1,height:1,depth:1,path:LS.defaultData(),extrusion:lY};if(r==="VectorGeometry")return{width:1,height:1,type:r,subdivisions:12,shape:kS.defaultData(),depth:0,extrudeBevelSize:0,extrudeBevelSegments:1};if(r==="BooleanGeometry")return{type:r,operation:2,width:0,height:0,depth:0,phongAngle:35};if(r==="TextGeometry")return{type:r,width:100,height:100,depth:0,horizontalAlign:1,verticalAlign:1,fontSize:16,lineHeight:1.2,letterSpacing:0,text:{textValue:""},textTransform:1,font:"Roboto_regular",extrudeBevelSize:0,extrudeBevelSegments:1};if(r==="SphereGeometry")return{type:"SphereGeometry",width:100,height:100,depth:100,widthSegments:64,heightSegments:64,phiStart:0,phiLength:2*Math.PI,thetaStart:0,thetaLength:180};throw new Error("not implemented")}e.defaultData=t})(ng||(ng={}));var GF=["width","height","depth"],qD;(e=>e.defaultData={enabled:!1,useBackgroundColor:!1,color:Ua.white,near:.1,far:2e3})(qD||(qD={}));var NS;(e=>{let t={opacity:1,blendFunction:13,enabled:!1};e.defaultData={enabled:!1,pixelation:{...t,blendFunction:16,granularity:15},bloom:{...t,blendFunction:16,intensity:1,blurScale:1,luminanceThreshold:.25,luminanceSmoothing:.025,kernelSize:3},chromaticAberration:{...t,offset:[2,2]},vignette:{...t,darkness:1,offset:0},hueSaturation:{...t,hue:3,saturation:0},brightnessContrast:{...t,brightness:.25,contrast:0},depthOfField:{...t,focalLength:2,focusDistance:2,bokehScale:2},noise:{...t,blendFunction:16}}})(NS||(NS={}));var XD;(e=>e.defaultData={softShadowQuality:"low"})(XD||(XD={}));var QD;(e=>e.defaultData={enabled:!0,color:{r:.8274509803921568,g:.8274509803921568,b:.8274509803921568},intensity:.75})(QD||(QD={}));var KD;(e=>e.defaultData={occlusion:!1,aoFullRes:!1,radius:256,bias:.5,aoColor:{r:.19607843137254902,g:.19607843137254902,b:.19607843137254902}})(KD||(KD={}));var $g;(e=>e.defaultData={usePhysics:!1,gravity:-10})($g||($g={}));var ZD;(e=>e.defaultData={playCamera:_v,gameControlObject:null})(ZD||(ZD={}));var JD;(e=>e.defaultData={backgroundColor:dl.fromHexAndA(gDe,1),postprocessing:NS.defaultData,fog:qD.defaultData,globalPhysics:$g.defaultData,ambient:QD.defaultData,ao:KD.defaultData,shadow:XD.defaultData,publish:ZD.defaultData})(JD||(JD={}));var WF;(e=>{function t(i){return i==="Component"||i==="Instance"}e.isComponentRelated=t;function r(i){return i==="Empty"||i==="Instance"}e.isEmptyOrComponent=r})(WF||(WF={}));var Yg;(e=>{e.identity={...FD.identity,hiddenMatrix:Hg.identity};function t(n){return{position:n.position,rotation:n.rotation,scale:n.scale,hiddenMatrix:n.hiddenMatrix}}e.fromObject=t;function r(n,a){return{position:(a==null?void 0:a.position)||n.position,rotation:(a==null?void 0:a.rotation)||n.rotation,scale:(a==null?void 0:a.scale)||n.scale,hiddenMatrix:(a==null?void 0:a.hiddenMatrix)||n.hiddenMatrix}}e.merge=r;function i(n,a){return APe({position:_f.isEqual(n.position,a.position)?void 0:a.position,rotation:_f.isEqual(n.rotation,a.rotation)?void 0:a.rotation,scale:_f.isEqual(n.scale,a.scale)?null:a.scale,hiddenMatrix:Hg.isEqual(n.hiddenMatrix,a.hiddenMatrix)?void 0:a.hiddenMatrix})}e.diff=i})(Yg||(Yg={}));var Za;(e=>e.defaultData={states:new Tt,events:new Tt,visible:!0,raycastLock:!1,physics:Wg.defaultData,pathSnapping:{pathId:null,slide:0,offset:0,orientation:"tangential"},...Yg.identity,cloner:null})(Za||(Za={}));var e3;(e=>e.defaultData={type:"Empty",...Za.defaultData})(e3||(e3={}));var $F;(e=>e.defaultData={type:"Component",...Za.defaultData})($F||($F={}));var ag;(e=>e.defaultData={type:"Mesh",...Za.defaultData,...WD.defaultData})(ag||(ag={}));var v1;(e=>e.defaultData={...Za.defaultData,...Yg.identity,position:[0,0,Gg.DefaultTargetOffset],...Gg.defaultData})(v1||(v1={}));var t3;(e=>{function t(r){return{...Za.defaultData,...VD.defaultData(r)}}e.defaultData=t,e.defaultDirectionalLightData={...e.defaultData("DirectionalLight"),position:[200,300,300],name:"Directional Light",intensity:.7}})(t3||(t3={}));var zS;(e=>{function t(i,n,a=0){for(;a<n.length;){let s=i?i[n[a]]:void 0;if(n.length===a+1)return s;if(s)i=s.descendants,a+=1;else return}}e.resolveWithDes=t;function r(i,n,a=0){let s=t(i,n,a);if(s){let o=Object.keys(s);if(o.length===1&&o[0]==="descendants")return}return s}e.resolve=r})(zS||(zS={}));var Ch;(e=>{e.rootOverrideProps=["physics","events"],e.compositeNonOptionalOverrideProps=["geometry"],e.compositeEntireOverrideOverrideProps=["material"];function t(i,n){return{...Za.defaultData,...n,component:i,overrides:new Cn,physics:void 0,events:void 0,type:"Instance"}}e.ofComponent=t;function r(i){let n=Yg.fromObject(i.data);return t(i.id,n)}e.fromComponentData=r})(Ch||(Ch={}));var qg;(e=>e.defaultData={type:"Page",...Za.defaultData,physics:{...Wg.defaultData,fusedBody:!1},...JD.defaultData,camera:v1.defaultData})(qg||(qg={}));var r3;(e=>(e.defaultCamera={position:[0,0,1e3],scale:[1,1,1],rotation:[0,0,0],hiddenMatrix:Hg.identity,name:"Play Camera",visible:!0,raycastLock:!1,physics:Wg.defaultData,states:new Tt,events:new Tt,cloner:null,pathSnapping:{pathId:null,orientation:"tangential",slide:0,offset:0},...Gg.defaultData},e.KeysByResetCategory={States:["states"],Events:["events"],Material:["material","materials"],Geometry:["geometry"],Position:["position"],Rotation:["rotation"],Scale:["scale"],Transform:["position","scale","rotation","hiddenMatrix"],Name:["name"],Visibility:["visible","raycastLock","flatShading","wireframe","side"],Shadows:["castShadow","receiveShadow"],Cloner:["cloner"],Physics:["physics"]},e.defaultMeshObject={name:"Rectangle",...Za.defaultData,...ag.defaultData,geometry:ng.defaultData("RectangleGeometry"),material:wa.defaultTwoLayerData("phong","layer1","layer2")},e.defaultBooleanObject={name:"Boolean",...Za.defaultData,...ag.defaultData,geometry:ng.defaultData("BooleanGeometry"),material:wa.defaultTwoLayerData("phong","layer1","layer2")},e.defaultTextObject={name:"Text",...Za.defaultData,...ag.defaultData,geometry:ng.defaultData("TextGeometry"),material:wa.defaultTwoLayerData("phong","layer1","layer2")}))(r3||(r3={}));var nf;(e=>{function t(a,s){let o={name:s};return a.type==="Mesh"?(o.geometry={},"material"in a&&(o.material={layers:new Cn}),"materials"in a&&(o.materials=a.materials.map(l=>({layers:new Cn})))):Hf.is(a.type)&&(o.perspective={},o.orthographic={}),o}e.newEmpty=t;function r(a,s){if(s===void 0)return a;let o={...a};return"material"in o&&"material"in s&&s.material&&(o.material=g1(o.material,l=>{if(typeof l!="string")for(let[u,h]of Object.entries(s.material.layers)){let c=l.layers.data(u);c&&hs.patch(c,h)}}).data),o.materials&&s.materials&&(o.materials=g1(o.materials,l=>{var u,h;for(let c=0;c<o.materials.length;c++){let d=s.materials[c];if(typeof d!="string")for(let[f,m]of Object.entries(d.layers)){let p=(h=(u=l[c])==null?void 0:u.layers)==null?void 0:h.data(f);p&&hs.patch(p,m)}}}).data),o}function i(a,s){let o,l=[],u={orthographic:0,perspective:0,geometry:0};function h(c,d){for(let[f,m]of Object.entries(d.layers)){let{texture:p,...g}=m;if(p!==void 0&&Object.keys(p).length>0){let v={path:[...c,"layers",f,"texture"],props:p,type:0};l.push(v)}if(Object.keys(g).length>0){let v={path:[...c,"layers",f],props:g,type:0};l.push(v)}}}for(let[c,d]of Object.entries(s))if(c!=="name")if(c==="cloner")l.push(...UD.toOps(d,["cloner"]));else if(c==="pathSnapping")l.push({path:[c],props:{slide:d.slide,offset:d.offset},type:0});else if(c==="material")h(["material"],d);else if(c==="materials")for(let[f,m]of Object.entries(d))h(["materials",f],m);else if(u[c]===0){if(c==="geometry"&&d.extrusion!==void 0){let f={path:[c,"extrusion"],props:d.extrusion,type:0};l.push(f),d={...d},delete d.extrusion}if(Object.keys(d).length>0){let f={path:[c],props:d,type:0};l.push(f)}}else o===void 0&&(o={path:[],props:{},type:0},l.push(o)),o.props[c]=d;return l}e.toOps=i;function n(a,s){var l,u,h,c,d,f;if(s===void 0)return a;let o={...a};if(Object.assign(o,Yg.merge(o,s)),Object.assign(o,{pathSnapping:Object.assign({},o.pathSnapping,{slide:((l=s.pathSnapping)==null?void 0:l.slide)??((u=o.pathSnapping)==null?void 0:u.slide)??0,offset:((h=s.pathSnapping)==null?void 0:h.offset)??((c=o.pathSnapping)==null?void 0:c.offset)??0})}),Hf.is(a.type)){o.orthographic={...o.orthographic},o.perspective={...o.perspective};let m=s;((d=m.orthographic)==null?void 0:d.zoom)!==void 0&&(o.orthographic.zoom=m.orthographic.zoom),((f=m.perspective)==null?void 0:f.zoom)!==void 0&&(o.perspective.zoom=m.perspective.zoom),m.isUpVectorFlipped!==void 0&&(o.isUpVectorFlipped=m.isUpVectorFlipped),m.targetOffset!==void 0&&(o.targetOffset=m.targetOffset)}else if(a.type==="Mesh")"geometry"in s&&Object.assign(o,{geometry:YD.merge(o.geometry,s.geometry)}),(s.material||s.materials)&&(o=r(o,s)),o.cloner&&"cloner"in s&&Object.assign(o,{cloner:Mh.merge(o.cloner,s.cloner)});else if(a.type==="Empty")o.cloner&&"cloner"in s&&Object.assign(o,{cloner:Mh.merge(o.cloner,s.cloner)});else if(jD.is(a.type)){let m=s;m.intensity!==void 0&&(o.intensity=m.intensity),m.color!==void 0&&(typeof m.color=="string"?o.color=m.color:o.color=Ua.clone(m.color))}return o}e.patch=n})(nf||(nf={}));var FS;(e=>e.defaultData={enablePan:!0,enableZoom:!0,enableRotate:!0,enableDamping:!0,rotationLimitsMode:0,rotationVerticalOffset:{min:Math.PI/4,max:Math.PI/4},rotationHorizontalOffset:{min:Math.PI/4,max:Math.PI/4},rotationSoftLimit:2,panLimitsMode:0,panVerticalOffset:{min:250,max:250},panHorizontalOffset:{min:250,max:250},panSoftLimit:2,zoomLimitsEnabled:!1,zoomLimits:{min:.1,max:2},autoRotate:!1,autoRotateSpeed:2,autoRotateClockwise:!0,hoverRotatePanMode:0,hoverRotatePanStrength:20,isTouchZoom:!0,orbitTouches:2,panTouches:3,resetHoverEffectOnPointerLeave:!0})(FS||(FS={}));var Sf;(e=>e.defaultData={orbitControls:FS.defaultData,playPage:wy,withBackground:!0,preventScroll:!1,preventTouchScroll:!1,hideCursor:!1,mouseEventTarget:"canvas",joystickSizeAndXYOffset:Array(12).fill(0).map((t,r)=>{let i=0,n=0;return r<5?n=-30:r<10&&(n=30),r===0||r===10||r===5?i=30:(r===4||r===11||r===9)&&(i=-30),[120,[i,n],"show"]}),settings:{image:{format:"jpg",ratio:1},video:{format:"mp4",imageFormat:"jpg",fps:30,mbps:80,ratio:Math.max(1,typeof window<"u"?Math.floor(window.devicePixelRatio):1),stopMode:"manual",duration:5e3},web:{logo:!0,compress:!0,preset:1,preload:!0,hint:!1}},stopRaycast:!0,hdTransmission:!1})(Sf||(Sf={}));var i3;(e=>e.defaultData={id:"basic",label:"Basic",style:"None",prompt:""})(i3||(i3={}));var n3;(e=>e.defaultData={weather:0,shadows:0,lightOrigin:0,temperature:0,sun:0,camera:0,environment:0,particles:0,nature:0,floor:0})(n3||(n3={}));var sg;(e=>(e.defaultData=()=>({mode:"line-art-both",prompt:"",negativePrompt:"",style:{...i3.defaultData},isRandomSeed:!0,seed:e.generateSeed(),guessMode:!1,advanced:!1,steps:20,guidanceScale:7.5,controlNetScale:1,modifiers:n3.defaultData}),e.generateSeed=()=>Math.round(Math.random()*1e5)))(sg||(sg={}));var y1;(e=>{function t(i){return i.find(n=>n.data.type==="Page"&&n.data.globalPhysics.usePhysics)!==void 0}e.physicsEnabled=t;function r(i,n,a){i.scene.objects.traverseFrom(n,(s,o)=>{var l;if(o.type==="Instance"){let u=(l=HS.getComponentData(i,o.component))==null?void 0:l.data;u&&a(s,o,u.events)}else a(s,o,o.events)})}e.traverseModuleInstances=r})(y1||(y1={}));var og;(e=>{e.TRASH_CAN_ID="830a2708-8ed9-49cf-a68e-085299892222";function t(n={withLight:!0,withSquare:!0}){let a=[],s=r3.defaultMeshObject;n.withLight===!0&&a.push({fi:-1,data:t3.defaultDirectionalLightData,id:"830a2708-8ed9-49cf-a68e-085299899103",children:[]}),n.withSquare===!0&&a.push({fi:1,id:"7ba78968-2a55-48f2-b14c-5191da3e075e",data:s,children:[]});let o=new Cs;return o.push({fi:1,id:wy,data:{...qg.defaultData,name:"Scene 1"},children:a}),o}e.defaultData={objects:t(),publish:Sf.defaultData,styles:sg.defaultData()},e.emptyDataWithoutPage=function(){return{objects:new Cs,publish:Sf.defaultData,styles:sg.defaultData()}},e.emptyDataWithPage=function(n){return{objects:t(n),publish:Sf.defaultData,styles:sg.defaultData()}};function r(n){return{...e.defaultData,objects:Dc(n,Cs.prototype)}}e.withObjs=r;function i(n,a){return r([{id:n,data:a,children:[],fi:0}])}e.withObj=i})(og||(og={}));var _y;(e=>e.defaultData={preset:"fullscreen",allowResponsive:!1,size:[512,512],coords:[0,0],sceneScale:1,color:{r:0,g:0,b:0,a:.5}})(_y||(_y={}));var US;(e=>e.emptyImage={data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVQYV2NgYAAAAAMAAWgmWQ0AAAAASUVORK5CYII=",name:"empty"})(US||(US={}));var fl;(e=>{function t(s){return s.textValue!==void 0}e.isTextValue=t;function r(s){return typeof s=="number"}e.isNumber=r;function i(s){return typeof s=="boolean"}e.isBoolean=i;function n(s){return t(s)?"string":i(s)?"boolean":"number"}e.typeOfVariable=n;function a(s){return e.isTextValue(s)?Array.isArray(s.textValue)?s.textValue.map(o=>o.toString().padStart(s.padding??2,"0")).join(s.deliminator??":")+(s.suffix!==void 0?" "+s.suffix:""):s.textValue.toString():e.isBoolean(s)?s?"True":"False":e.isNumber(s)?parseFloat(s.toFixed(3)).toString():s.toString()}e.getDisplayedValue=a})(fl||(fl={}));var a3;(e=>e.all=["images","videos","colors","audios","fonts","materials","variables"])(a3||(a3={}));var YF;(e=>e.all=[...a3.all,"components"])(YF||(YF={}));var qF;(e=>{function t(){return{images:new Qt,videos:new Qt,colors:new Qt,audios:new Qt,fonts:new Qt,materials:new Qt,components:new Qt,variables:new Qt}}e.defaultData=t})(qF||(qF={}));var Xg;(e=>{function t(){return{images:new Qt,videos:new Qt,colors:new Qt,audios:new Qt,fonts:new Qt,materials:new Qt,components:new Qt,variables:new Qt}}e.defaultData=t})(Xg||(Xg={}));var Kl;(e=>{function t(){let s={};return s["89b10010-844c-11ec-a8a3-0242ac120002"]={r:.5,g:.5,b:.5,a:1,name:"Default Color"},Dc(s,Qt.prototype)}e.defaultColors=t;function r(s){let o={};return s!=null&&s.withAITexture&&(o["a1b10010-844c-a8a3-11ec-0242ac2011ec"]={...US.emptyImage,name:"AI generated image"}),Dc(o,Qt.prototype)}e.defaultImages=r;function i(){return{catelogs:new Qt,materials:new Qt,images:new Qt,videos:new Qt,colors:new Qt,audios:new Qt,fonts:new Qt,variables:new Tt,lib:Xg.defaultData()}}e.emptyData=i;function n(s){switch(s){case"number":return{value:0,name:"Number"};case"boolean":return{value:!1,name:"Boolean"};case"string":return{value:{textValue:"String value"},name:"String"};case"time":let o=[0,0,0];return{name:"Time",value:{textValue:o,deliminator:":",padding:2,suffix:"AM"},dynamicVariableType:"time",format:"HH:mm:ss",format12h24h:"12ampm",timeZone:null,hasEnd:!1,endValue:{textValue:o,deliminator:":",padding:2,suffix:"AM"},autoStart:!0,repeat:!1};case"counter":return{name:"Counter",value:0,dynamicVariableType:"counter",updateInterval:1e3,increment:1,autoStart:!0,hasEnd:!0,endValue:60,repeat:!0,randomStart:!1,range:[0,100],decimals:0};case"random":return{name:"Random",value:0,dynamicVariableType:"random",updateInterval:1e3,increment:1,autoStart:!0,isStatic:!1,hasEnd:!0,endValue:60,repeat:!0,min:0,max:100,decimals:0};default:console.error("Unknown variable type",s)}}e.defaultVariables=n;function a(s,o){if(o.format==="HH:mm:ss"){let l=Math.floor(s/3600),u=Math.floor((s-l*3600)/60),h=Math.round(s-l*3600-u*60);return{textValue:[l,u,h]}}else if(o.format==="mm:ss"){let l=Math.floor(s/60),u=Math.round(s-l*60);return{textValue:[l,u]}}else return o.format==="number"?s=Math.round(s):s=Math.round(s*1e3)/1e3,s}e.getFormattedTimerTime=a})(Kl||(Kl={}));var jS;(e=>e.list=["idle","move","jump","run"])(jS||(jS={}));var VS;(e=>(e.defaultColliderData={type:"capsule",height:200,radius:50,position:[0,0,0],rotation:[0,0,0]},e.defaultDataThirdPerson={moveMode:"walk",forwardDirection:"+z",speedTranslate:1e3,speedRotate:100,runMultiplier:2,rotationMode:"normal",rotBy:"keys",rotByTouch:"drag",delayPos:[.3,.3],delayRot:[.3,.3],keyAssignments:[["moveNegZ","W"],["moveNegX","A"],["movePosZ","S"],["movePosX","D"],["rotPosX","▲"],["rotPosY","◀"],["rotNegX","▼"],["rotNegY","▶"],["jump","Space"],["run","⇧"],["none","Ctrl"]],touchControl:!0,joystickPosLoc:5,joystickRotLoc:11,jumpTouchButtonLoc:9,collider:e.defaultColliderData,colliderHelperVisible:!0,collisionEnabled:!0,jumpPower:100,resetYPosition:3e3,alignToGround:!1,autoOrientMove:!0,orientWith:"camera",orientMode:"radial",delayPosCamera:.3,delayRotCamera:.3,camera:"",cameraXAxis:"Limit",cameraYAxis:"Free",cameraRotXLimits:[0,Math.PI/2],cameraRotYLimits:[-Math.PI/2,Math.PI/2],gameActions:{idle:new Tt,move:new Tt,jump:new Tt,run:new Tt},navmesh:{enabled:!1,ch:6,cs:6,walkableClimb:5,walkableHeight:1,walkableRadius:0,zones:"all",objects:[],helperVisible:!0,destinationHelperRadius:0,destinationHelperColor:dl.fromHexAndA(3728051,1)}}))(VS||(VS={}));function XF(e){e.layers.forEach(t=>{if(t.type==="depth"&&t.colorA!==void 0){let r=t.colorA,i=t.colorB,n=[[r.r,r.g,r.b,r.a],[i.r,i.g,i.b,i.a]],a=[0,1];for(let o=2;o<10;o++)n.push(n[1]),a.push(1);let s={...vc(An(t),"type","visible","isVector","isWorldSpace","origin","alpha","mode"),near:Math.max(0,t.near),far:Math.max(0,t.far),colors:n,steps:a,num:2,direction:[1,0,0],smooth:!1,gradientType:1};Object.assign(t,s)}else if(t.type==="depth"&&t.gradientType===1&&(t.near<0||t.far<0)){let r={...An(t),near:Math.max(t.near,0),far:Math.max(t.far,0)};Object.assign(t,r)}})}function ch(e,t){Object.values(e.shared.materials).forEach(r=>t(r))}function hh(e,t){e.scene.objects.traverse((r,i)=>{"materials"in i?i.materials.forEach((n,a)=>{n===void 0&&(i.materials[a]=wa.defaultData(),n=i.materials[a]),typeof n!="string"&&t(n)}):"material"in i?typeof i.material!="string"&&(i.material===void 0&&(i.material=wa.defaultData()),t(i.material)):i.type==="Mesh"&&(i.material===void 0&&(i.material=wa.defaultData()),t(i.material)),"overrides"in i&&Object.values(i.overrides).forEach(n=>{n.material&&typeof n.material!="string"&&t(n.material)})})}function bDe(e){Object.assign(e.scene.publish,{orbitControls:{...FS.defaultData,...An(e.scene.publish.orbitControls)}})}function wDe(e){Object.assign(e.scene.publish.settings,{video:{...Sf.defaultData.settings.video,...An(e.scene.publish.settings.video)}})}function _De(e){function t(r){if(r.layers){for(let i of Object.values(r.layers))if(i){for(let[n,a]of Object.entries(i))if((sY.includes(n)||typeof a=="boolean")&&delete i[n],n==="texture")for(let[s,o]of Object.entries(a))(xDe.includes(s)||typeof o=="boolean")&&delete a[s]}}}e.scene.objects.traverse((r,i)=>{i.states.forEach(n=>{let a=n;a.material?t(a.material):a.materials&&a.materials.forEach(s=>{t(s)})})})}function SDe(e){e.scene.publish.withBackground=!0}function EDe(e){e.scene.publish.settings.web={compress:!0,preload:!0,preset:1,logo:!0,hint:!1}}function MDe(e){e.scene.objects.traverse((t,r)=>{let i=r.cloner;i&&(i.radial.scale=i.radial.scale.map(n=>n+1),i.linear.scale=i.linear.scale.map(n=>n+1))})}function CDe(e){e.scene.objects.traverse((t,r)=>{let i=r.geometry;i&&(i.type==="DodecahedronGeometry"||i.type==="IcosahedronGeometry")&&(i.detail=Math.round(i.detail))})}function ADe(e){e.scene.objects.traverse((t,r)=>{let i=e.scene.objects.unproxy().parent(t);if(i){let n=An(e.scene.objects.data(i));n&&n.type==="Mesh"&&n.geometry.type==="BooleanGeometry"&&r.type==="Mesh"&&(r.visible=An(r).booleanExclude!==!0)}})}function TDe(e){e.scene.objects.traverse((t,r)=>{if(r.type==="Mesh"){let i=r;r.geometry.type==="NonParametricGeometry"?i.material!==void 0&&delete i.material:i.materials!==void 0&&delete i.materials}})}function PDe(e){function t(i){Object.setPrototypeOf(i,Cn.prototype),i.texture&&Object.setPrototypeOf(i.texture,Cn.prototype)}function r(i){Object.setPrototypeOf(i,Cn.prototype);for(let n in i)t(i[n])}e.scene.objects.traverse((i,n)=>{n.states.forEach(a=>{let s=a;if(s.material){let o=An(s.material).layers;r(o),s.material.layers=o}if(s.materials)for(let o=0;o<s.materials.length;o++){let l=s.materials[o],u=An(l).layers;r(u),l.layers=u}})})}function QF(e){e.layers===void 0&&Object.assign(e,wa.defaultTwoLayerData("lambert"))}function mA(e){!e.layers||e.layers.forEach(t=>{if(t.type==="depth"&&t.colors.length===10){let r=[...t.colors];r.push(t.colors[9]);let i=[...t.steps];i.push(t.steps[9]);let n={...An(t),colors:r,steps:i};Object.assign(t,n)}})}function DDe(e){e.scene.objects.traverse((t,r)=>{r.type==="Mesh"&&(r.geometry.type==="BooleanGeometry"||r.geometry.type==="SubdivGeometry")&&(r.geometry.phongAngle=35)})}function KF(e){e.scene.objects.traverse((t,r)=>{"materials"in r?r.materials.forEach(i=>{typeof i!="string"&&mA(i)}):"material"in r&&typeof r.material!="string"&&mA(r.material)}),Object.values(e.shared.materials).forEach(t=>mA(t))}function ODe(e){e.scene.environment.ambientLight.softShadows=!1,e.scene.environment.ambientLight.softShadowQuality="low",e.scene.objects.traverse((t,r)=>{(r.type==="DirectionalLight"||r.type==="SpotLight")&&(r.shadowResolution=1024,r.shadowRadius=1,r.depth=1e5)}),e.shared.penumbraSize=new Array(5).fill(.5)}function IDe(e){e.shared.audios=Dc({},Qt.prototype)}function RDe(e){e.shared.videos=Dc({},Qt.prototype)}function kDe(e){let t=e.shared.materials;Object.entries(t).forEach(([r,i])=>{if(!i.layers){let n={name:"Untitled Material",layers:[{fi:0,data:{type:"light",category:"phong",alpha:.6,visible:!0,mode:0,specular:{r:.2,g:.2,b:.2},shininess:5},id:"layer1"},{fi:1,data:{type:"color",alpha:1,visible:!0,mode:0,color:{r:.2823529411764706,g:.2823529411764706,b:.30196078431372547}},id:"layer2"}]};Object.assign(t,{[r]:n})}})}function LDe(e){Object.entries(An(e.shared.images)).filter(t=>t[1].asset===!1).map(t=>t[0]).forEach(t=>{delete e.shared.images[t]}),Object.entries(An(e.shared.audios)).filter(t=>t[1].asset===!1).map(t=>t[0]).forEach(t=>{delete e.shared.audios[t]})}function BDe(e){e.scene.publish.settings.web.preload=!1}function ZF(e){e.layers&&e.layers.forEach(t=>{t.type==="depth"&&t.num!==void 0&&(t.colors=t.colors.slice(0,t.num),t.steps=t.steps.slice(0,t.num),delete t.num)})}function JF(e){e.layers&&e.layers.forEach(t=>{yDe(t)&&t.isMask===void 0&&(t.isMask=!1),(t.type==="texture"||t.type==="video")&&t.blending===void 0&&(t.blending=0),(t.type==="noise"||t.type==="displace"&&t.displacementType==="noise")&&(t.voronoiStyle===void 0&&(t.voronoiStyle=0),t.highCut===void 0&&(t.highCut=1),t.lowCut===void 0&&(t.lowCut=0),t.smoothness===void 0&&(t.smoothness=.3),t.seed===void 0&&(t.seed=0),t.quality===void 0&&(t.quality=1))})}function NDe(e){e.shared.fonts=Dc({},Qt.prototype)}function zDe(e){return e.replace(".typeface","").replace(/optimer/gi,"open sans").replace("space_mono","space mono").replace(/alma_mono/gi,"varela round").replace(/droid_sans_mono/gi,"noto sans mono").replace(/droid_sans|gentilis|gnomon_(simple|foreground)|helvetiker/gi,"roboto").replace(/droid_serif/gi,"roboto slab").replace("_sans"," sans").replace("crimson_text","crimson text").replace("medium_medium","medium").replace("fatface_fatface","fatface").replace("100hairline","thin").replace("200thin","extralight").replace("300light","light").replace("500medium","medium").replace("600semi","semibold").replace("800heavy","extrabold").replace("900black","black").replace(/bodoni_(11|16|24|36|48|72|96)([^_])/gi,"bodoni_$1_$2").replace(/bodoni_(11|16|24|36|48|72|96)/gi,"bodoni moda").replace(/(thin|hairline)(_regular)?/gi,"100").replace(/(extra|ultra)light(_regular)?/gi,"200").replace(/light(_regular)?/gi,"300").replace(/_book|_normal|_roman/gi,"_regular").replace(/medium(_regular)?/gi,"500").replace(/(semi|demi)bold(_regular)?/gi,"600").replace(/(extra|ultra)bold(_regular)?/gi,"800").replace(/bold(_regular)?/gi,"700").replace(/(black|heavy|fatface)(_regular)?/gi,"900").replace(/([1-9]00)_italic/gi,"$1italic").replace(/regularitalic/gi,"italic").replace(/regularitalic/gi,"italic").split(" ").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")}function FDe(e){let t=[];e.scene.objects.traverse((r,i)=>{let n=i;if(n.type==="TextFrame"){let a=wa.defaultTwoLayerData("phong"),s=typeof n.color=="string"?e.shared.colors[n.color]:n.color;a.layers[1].data.color={r:s.r,g:s.g,b:s.b},a.layers[1].data.alpha=n.alpha;let o=zDe(n.font);e.shared.fonts[o]===void 0&&(e.shared.fonts[o]={name:o});let l={name:n.name,...Za.defaultData,...ag.defaultData,flatShading:!1,wireframe:!1,geometry:{...ng.defaultData("TextGeometry"),width:n.width,height:n.height,font:o,depth:0,horizontalAlign:n.horizontalAlign,verticalAlign:n.verticalAlign,fontSize:n.fontSize*1.40625,lineHeight:n.lineHeight/1.40625,letterSpacing:n.letterSpacing-1,text:n.text,textTransform:n.textTransform,extrudeBevelSize:0,extrudeBevelSegments:1},material:a,states:An(n.states),events:An(n.events),visible:n.visible,raycastLock:n.raycastLock,position:n.position,rotation:n.rotation,scale:n.scale,hiddenMatrix:n.hiddenMatrix},u=An(e.scene.objects).parent(r);e.scene.objects.insertAfter(u??null,r,[{id:r+"new",data:l,children:[]}]),t.push(r)}}),t.forEach(r=>{e.scene.objects.delete(r)})}function UDe(e){let t={0:"MouseDown",1:"MouseUp",2:"MouseHover",5:"KeyDown",6:"KeyUp",7:"Start",9:"LookAt",10:"Follow",11:"Scroll",12:"Audio",13:"GameControl"};e.scene.objects.traverse((r,i)=>{i.events.forEach(n=>{if(t[Number(n.type)])if(Object.assign(n,{type:t[Number(n.type)]}),n.type==="Audio"&&"audioEvent"in n&&(Object.assign(n,{playAudio:n.audioEvent}),delete n.audioEvent),n.type==="GameControl")Object.assign(n,{gameActions:{idle:new Tt,move:new Tt,jump:new Tt}});else{let a=new Tt;Object.assign(n,{actions:a}),(n.type==="MouseDown"||n.type==="MouseUp"||n.type==="KeyDown"||n.type==="KeyUp")&&"url"in n&&a.push({fi:0,id:bt.generateUUID(),data:{type:"Link",url:n.url,delay:0}}),"targets"in n&&(n.targets.forEach((s,o,l)=>{let u={state:void 0,repeat:0,delay:0,delayDirection:void 0,direction:"normal",duration:0,easing:4},h={easing:s.easing,duration:s.duration};s.easing===6?Object.assign(h,vc(s,"mass","stiffness","damping","velocity")):s.easing===5&&Object.assign(h,{control1:{...s.control1},control2:{...s.control2}});let c={repeat:s.repeat?-1:0,delay:s.delay,delayDirection:s.delayDirection,direction:s.cycle&&s.rewind?"pingpong-rewind":s.cycle?"pingpong":"normal"},d={state:s.state,...c,...h},f={allowSlerp:!0,type:"Transition",object:s.object,repeat:0,delay:0,delayDirection:void 0,direction:"normal",tweens:new Tt({fi:0,id:bt.generateUUID(),data:u},{fi:1,id:bt.generateUUID(),data:d})};a.push({fi:l,id:o,data:f})}),delete n.targets)}})})}function jDe(e){e.scene.objects.traverse((t,r)=>{function i(n,a){var l;let s=new Tt,o=[];if(r.events.forEach((u,h,c)=>{if(u.type==="Audio"&&u.trigger===a){let d;o.push(h),u.interaction==="play"?d={...vc(u,"interaction","audio","delay","volume","loop"),triggerAfter:"after"in u?u.after:void 0,toggle:"after"in u?u.toggle:void 0,type:"Audio"}:(u.interaction==="pause"||u.interaction==="stop")&&(d={...vc(u,"interaction","delay","object","playAudio"),type:"Audio"}),d&&s.push({fi:c,id:h,data:d})}}),o.forEach(u=>r.events.delete(u)),s.length){let u=(l=r.events.find(h=>h.type===n))==null?void 0:l.data;u?"actions"in u&&u.actions.insertBefore(null,s):r.events.insertBefore(null,[{id:bt.generateUUID(),data:{type:n,actions:s}}])}}i("Start","start"),i("MouseDown","mouseDown"),i("MouseUp","mouseUp"),i("KeyDown","keyDown"),i("KeyUp","keyUp")})}function eU(e){var r;let t=(r=e.layers.find(i=>i.type==="light"))==null?void 0:r.data;if((t==null?void 0:t.category)==="basic"){let i=hs.defaultData("light","phong"),n=t;Object.assign(n,i),n.visible=!1}}function tU(e){ch(e,eU),hh(e,eU)}function VDe(e){e.scene.objects.traverse((t,r)=>{r.type==="Mesh"&&r.geometry.type==="SubdivGeometry"&&(r.geometry.scaleBaked||(r.geometry.scaleBaked=[1,1,1]))})}function HDe(e){e.scene.objects.traverse((t,r)=>{(r.type==="Empty"||r.type==="Mesh")&&r.cloner&&!r.cloner.randomnessObject&&!r.cloner.toObject&&!r.cloner.randomness&&(r.cloner={...r.cloner,toObject:{object:"",spreadType:"random",scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],axis:"x",seed:0,count:99,align:"normal"},randomness:!1,randomnessObject:{strength:100,scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],movement:1,seed:0,freqScale:10,noiseType:"perlin"}})})}function GDe(e){e.scene.objects.traverse((t,r)=>{r.type==="Mesh"&&r.geometry.type==="NonParametricGeometry"&&!("material"in r)&&!("materials"in r)&&(r.material=wa.defaultTwoLayerData("phong"))})}function WDe(e){e.scene.publish.orbitControls.autoZoom===void 0&&(e.scene.publish.orbitControls.autoZoom=!1),e.scene.objects.traverse((t,r)=>{(r.type==="OrthographicCamera"||r.type==="PerspectiveCamera")&&(r.orthographic.autoZoom===void 0&&(r.orthographic.autoZoom=!1),r.orthographic.autoZoomFrustumSize===void 0&&(r.orthographic.autoZoomFrustumSize=790))})}function $De(e){e.scene.objects.traverse((t,r)=>{r.pathSnapping===void 0&&(r.pathSnapping={pathId:null,slide:0,offset:0,orientation:"tangential"}),r.pathSnapping.offset===void 0&&(r.pathSnapping.offset=0)})}function YDe(e){e.scene.publish.mouseEventTarget===void 0&&(e.scene.publish.mouseEventTarget="canvas"),e.scene.publish.settings.web.hint===void 0&&(e.scene.publish.settings.web.hint=!1)}function qDe(e){let{video:t}=e.scene.publish.settings;t.format==="gif"&&t.fps>48&&(t.fps=15)}function XDe(e){e.scene.objects.traverse((t,r)=>{r.events.forEach(i=>{i.type==="GameControl"&&(i.resetYPosition=Math.abs(i.resetYPosition-r.position[1]))})})}function QDe(e){let t=e.scene.environment.usePhysics;e.scene.objects.traverse((r,i)=>{t&&i.physics===null?i.collision=!1:i.collision="visibility"})}function KDe(e){e.scene.objects.traverse((t,r)=>{r.events.forEach(i=>{i.type==="GameControl"&&(i.navmesh=VS.defaultDataThirdPerson.navmesh)})})}function ZDe(e){e.scene.styles||(e.scene.styles=sg.defaultData())}function rU(e){e.layers.forEach(t=>{t.type==="light"&&t.category!=="toon"&&t.occlusion===void 0&&(t.occlusion=!0)})}function JDe(e){e.scene.environment.ambientLight.occlusion===void 0&&(e.scene.environment.ambientLight.occlusion=!1),e.scene.environment.ambientLight.aoFullRes===void 0&&(e.scene.environment.ambientLight.aoFullRes=!1),e.scene.environment.ambientLight.radius===void 0&&(e.scene.environment.ambientLight.radius=256),e.scene.environment.ambientLight.bias===void 0&&(e.scene.environment.ambientLight.bias=.5),e.scene.environment.ambientLight.aoColor===void 0&&(e.scene.environment.ambientLight.aoColor={r:.19607843137254902,g:.19607843137254902,b:.19607843137254902}),hh(e,rU),ch(e,rU)}function e3e(e){e.scene.objects.traverse((t,r)=>{r.events.forEach(i=>{i.type==="GameControl"&&Object.assign(i.gameActions,{run:new Tt})})})}function t3e(e){e.scene.objects.traverse((t,r)=>{r.events.forEach(i=>{i.type==="GameControl"&&(i.keyAssignments=[...i.keyAssignments,["run","⇧"],["none","Ctrl"]])})})}function iU(e){e.layers&&e.layers.forEach(t=>{t.type==="light"&&t.bumpMapIntensity===void 0&&(t.bumpMapIntensity=5)})}function r3e(e,t){if(t<1&&(hh(e,XF),ch(e,XF),e.schema=1),t<2&&(bDe(e),e.schema=2),t<3&&(_De(e),e.schema=3),t<4&&(SDe(e),e.schema=4),t<5&&(EDe(e),e.schema=5),t<6&&(MDe(e),e.schema=6),t<7&&(CDe(e),e.schema=7),t<8&&(e.schema=8),t<9&&(KF(e),e.schema=9),t<10&&(DDe(e),e.schema=10),t<11&&(ODe(e),e.schema=11),t<12&&(KF(e),e.schema=12),t<13&&(IDe(e),e.schema=13),t<14&&(kDe(e),e.schema=14),t<15&&(LDe(e),e.schema=15),t<16&&(BDe(e),e.schema=16),t<17&&(hh(e,ZF),ch(e,ZF),e.schema=17),t<18&&(hh(e,QF),ch(e,QF),e.schema=18),t<19&&(wDe(e),e.schema=19),t<20&&(NDe(e),FDe(e),e.schema=20),t<21&&(UDe(e),jDe(e),e.schema=21),t<22&&(tU(e),e.schema=22),t<23&&(VDe(e),e.schema=23),t<24&&(HDe(e),e.schema=24),(t<25||e.shared.videos===void 0)&&(RDe(e),t<25&&(e.schema=25)),t<26&&(ADe(e),e.schema=26),t<27&&(TDe(e),e.schema=27),t<28&&(tU(e),e.schema=28),t<29&&(PDe(e),e.schema=29),t<30&&(GDe(e),e.schema=30),t<31&&(WDe(e),e.schema=31),t<33&&($De(e),e.schema=33),t<34&&(YDe(e),e.schema=34),t<35&&(qDe(e),e.schema=35),t<36&&(XDe(e),e.schema=36),t<37&&(QDe(e),e.schema=37),t<38&&(hh(e,JF),ch(e,JF),e.schema=38),t<39&&(KDe(e),e.schema=39),t<40&&(ZDe(e),e.schema=40),t<41&&(JDe(e),e.schema=41),t<42&&(e3e(e),e.schema=42),t<43&&(t3e(e),e.schema=43),t<99){hh(e,iU),ch(e,iU),e.scene.publish.playCamera===null&&(e.scene.publish.playCamera=_v);let r=An(e.scene.objects),i=e.scene.objects;e.scene.publish.playPage=wy,i.insertBefore(null,null,[{id:wy,data:{...qg.defaultData,backgroundColor:e.scene.backgroundColor,fog:e.scene.fog,postprocessing:e.scene.postprocessing,ao:vc(e.scene.environment.ambientLight,"occlusion","aoFullRes","radius","bias","aoColor"),publish:{playCamera:e.scene.publish.playCamera,gameControlObject:e.scene.publish.gameControlObject},shadow:vc(e.scene.environment.ambientLight,"softShadowQuality"),globalPhysics:{...$g.defaultData,...vc(e.scene.environment,"usePhysics","gravity")},camera:An(e.scene.ownerCamera)??qg.defaultData.camera,name:"Scene"},children:[]}]);for(let s of r)s.id!==og.TRASH_CAN_ID&&i.move(wy,s.fi,s.id);let n=0,a=0;e.shared.penumbraSize&&e.scene.objects.traverse((s,o)=>{o.type==="DirectionalLight"?(o.penumbraSize=e.shared.penumbraSize[Math.min(n,2)],n+=1):o.type==="SpotLight"&&(o.penumbraSize=e.shared.penumbraSize[3+Math.min(a,1)],a+=1),(o.physics===void 0||o.physics===null)&&o.type!=="Instance"&&(o.physics={},Object.assign(o.physics,Wg.defaultData)),o.physics!==void 0&&o.physics!==null&&(o.physics.enabled=o.collision??"visibility",delete o.collision)}),e.schema=99}}function nU(e){e.layers&&e.layers.forEach(t=>{t.type==="light"&&t.alphaOverride===void 0&&(t.alphaOverride=1)})}function i3e(e){e.scene.objects.traverse((t,r)=>{let i=r.geometry;i&&i.type==="PathGeometry"&&(i.extrusion.capType="flat",i.extrusion.bevel=50,i.extrusion.bevelSides=6,i.extrusion.shape.type==="Custom"&&(i.extrusion.shape.shapeQuality="low"))})}var cm=180/Math.PI;function aU(e){e.rotation=e.rotation.slice(0,3).map(t=>t*cm)}function cY(e){var r;aU(e),e.type==="Page"&&aU(e.camera),e.states.forEach(i=>{i.rotation!==void 0&&(i.rotation=i.rotation.slice(0,3).map(n=>n*cm))});let t=e.geometry;t&&t.type==="SphereGeometry"&&(t.thetaLength=t.thetaLength*cm),t&&t.type==="TorusGeometry"&&(t.arc=t.arc*cm),t&&t.type==="PathGeometry"&&(t.extrusion.angle*=cm,t.extrusion.twist*=cm),e.type==="Mesh"&&e.geometry.type==="TextGeometry"&&(e.geometry.text={textValue:e.geometry.text}),(r=e.events)==null||r.forEach(i=>{(i.type==="MouseDown"||i.type==="MouseUp"||i.type==="MousePress"||i.type==="KeyDown"||i.type==="KeyUp"||i.type==="KeyPress"||i.type==="Collision"||i.type==="Trigger")&&(i.runMode=i.toggle?"Toggle":"Once")})}function n3e(e){e.shared.variables=Dc({},Qt.prototype)}function a3e(e){let t=An(e.shared.variables);e.shared.variables=Dc(Object.entries(t??{}).map(([r,i],n)=>({fi:n,id:r,data:i})),Tt.prototype)}var dh=107;function hY(e,t){t(e.data);for(let r of e.children)hY(r,t)}function s3e(e){let t=e.schema??104;t!==dh&&t<105&&(hY(e.asset,cY),e.schema=105)}function dY(e){let t=e.schema??0;if(t!==dh){console.warn("updating from ",t,"to ",dh),r3e(e,t),t<100&&(e.scene.publish.joystickSizeAndXYOffset===void 0&&(e.scene.publish.joystickSizeAndXYOffset=Sf.defaultData.joystickSizeAndXYOffset),e.schema=100),t<101&&(hh(e,nU),ch(e,nU),e.schema=101),t<102&&(i3e(e),e.schema=102),t<104&&(e.shared.catelogs=new Qt,e.shared.lib=Xg.defaultData(),e.schema=104),t<105&&(n3e(e),e.scene.objects.traverse((r,i)=>{cY(i)}),e.schema=105);for(let r of Object.values(e.shared.lib.components))s3e(r);t<106&&(a3e(e),e.schema=106),t<107&&(e.shared.lib.variables=Xg.defaultData().variables,e.schema=107)}}var HS;(e=>{e.defaultData={schema:dh,scene:og.defaultData,frames:new Qt().add("72fc2993-2da3-4b6b-96ac-2879db3a28bd",_y.defaultData),shared:{...Kl.emptyData(),colors:Kl.defaultColors()}},e.emptyDataForImports=function(n){let a=og.emptyDataWithPage(n);return{schema:dh,scene:a,frames:new Qt().add("72fc2993-2da3-4b6b-96ac-2879db3a28bd",_y.defaultData),shared:{...Kl.emptyData(),colors:Kl.defaultColors(),images:Kl.defaultImages(n)}}},e.emptyData=function(){return{schema:dh,scene:og.emptyDataWithPage(),frames:new Qt().add("72fc2993-2da3-4b6b-96ac-2879db3a28bd",_y.defaultData),shared:Kl.emptyData()}},e.collabHelper={...TD,updateSchema(n){return(n.schema??0)<dh?g1(n,dY):(n.schema??0)-dh}};function t(n){let a=e.collabHelper.updateSchema(n);return typeof a=="number"?a===0?n:null:a.data}e.updateSchemaDirectly=t;function r(n){return{...n,shared:{...n.shared,lib:Xg.defaultData()}}}e.withoutLib=r;function i(n,a){let s=n.scene.objects.get(a);if(s&&s.data.type==="Component")return s;{let o=n.shared.lib.components[a];if(o)return o.asset}}e.getComponentData=i})(HS||(HS={}));function af(e,t=!1){let r=e[0].index!==null,i=new Set(Object.keys(e[0].attributes)),n=new Set(Object.keys(e[0].morphAttributes)),a={},s={},o=e[0].morphTargetsRelative,l=new wt,u=0;for(let h=0;h<e.length;++h){let c=e[h],d=0;if(r!==(c.index!==null))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(let f in c.attributes){if(!i.has(f))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+'. All geometries must have compatible attributes; make sure "'+f+'" attribute exists among all geometries, or in none of them.'),null;a[f]===void 0&&(a[f]=[]),a[f].push(c.attributes[f]),d++}if(d!==i.size)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+". Make sure all geometries have the same number of attributes."),null;if(o!==c.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(let f in c.morphAttributes){if(!n.has(f))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+".  .morphAttributes must be consistent throughout all geometries."),null;s[f]===void 0&&(s[f]=[]),s[f].push(c.morphAttributes[f])}if(t){let f;if(r)f=c.index.count;else if(c.attributes.position!==void 0)f=c.attributes.position.count;else return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+". The geometry must have either an index or a position attribute"),null;l.addGroup(u,f,h),u+=f}}if(r){let h=0,c=[];for(let d=0;d<e.length;++d){let f=e[d].index;for(let m=0;m<f.count;++m)c.push(f.getX(m)+h);h+=e[d].attributes.position.count}l.setIndex(c)}for(let h in a){let c=sU(a[h]);if(!c)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+h+" attribute."),null;l.setAttribute(h,c)}for(let h in s){let c=s[h][0].length;if(c===0)break;l.morphAttributes=l.morphAttributes||{},l.morphAttributes[h]=[];for(let d=0;d<c;++d){let f=[];for(let p=0;p<s[h].length;++p)f.push(s[h][p][d]);let m=sU(f);if(!m)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+h+" morphAttribute."),null;l.morphAttributes[h].push(m)}}return l}function sU(e){let t,r,i,n=0;for(let o=0;o<e.length;++o){let l=e[o];if(l.isInterleavedBufferAttribute)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. InterleavedBufferAttributes are not supported."),null;if(t===void 0&&(t=l.array.constructor),t!==l.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(r===void 0&&(r=l.itemSize),r!==l.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(i===void 0&&(i=l.normalized),i!==l.normalized)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;n+=l.array.length}let a=new t(n),s=0;for(let o=0;o<e.length;++o)a.set(e[o].array,s),s+=e[o].array.length;return new Bt(a,r,i)}var o3e=Math.pow(2,-24),Ob=class{constructor(){}};function ou(e,t,r){return r.min.x=t[e],r.min.y=t[e+1],r.min.z=t[e+2],r.max.x=t[e+3],r.max.y=t[e+4],r.max.z=t[e+5],r}function oU(e){let t=-1,r=-1/0;for(let i=0;i<3;i++){let n=e[i+3]-e[i];n>r&&(r=n,t=i)}return t}function lU(e,t){t.set(e)}function uU(e,t,r){let i,n;for(let a=0;a<3;a++){let s=a+3;i=e[a],n=t[a],r[a]=i<n?i:n,i=e[s],n=t[s],r[s]=i>n?i:n}}function Ib(e,t,r){for(let i=0;i<3;i++){let n=t[e+2*i],a=t[e+2*i+1],s=n-a,o=n+a;s<r[i]&&(r[i]=s),o>r[i+3]&&(r[i+3]=o)}}function a0(e){let t=e[3]-e[0],r=e[4]-e[1],i=e[5]-e[2];return 2*(t*r+r*i+i*t)}function l3e(e,t){if(!e.index){let r=e.attributes.position.count,i=t.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer,n;r>65535?n=new Uint32Array(new i(4*r)):n=new Uint16Array(new i(2*r)),e.setIndex(new Bt(n,1));for(let a=0;a<r;a++)n[a]=a}}function u3e(e){if(!e.groups||!e.groups.length)return[{offset:0,count:e.index.count/3}];let t=[],r=new Set;for(let n of e.groups)r.add(n.start),r.add(n.start+n.count);let i=Array.from(r.values()).sort((n,a)=>n-a);for(let n=0;n<i.length-1;n++){let a=i[n],s=i[n+1];t.push({offset:a/3,count:(s-a)/3})}return t}function gA(e,t,r,i,n=null){let a=1/0,s=1/0,o=1/0,l=-1/0,u=-1/0,h=-1/0,c=1/0,d=1/0,f=1/0,m=-1/0,p=-1/0,g=-1/0,v=n!==null;for(let y=t*6,x=(t+r)*6;y<x;y+=6){let b=e[y+0],_=e[y+1],w=b-_,E=b+_;w<a&&(a=w),E>l&&(l=E),v&&b<c&&(c=b),v&&b>m&&(m=b);let S=e[y+2],C=e[y+3],M=S-C,P=S+C;M<s&&(s=M),P>u&&(u=P),v&&S<d&&(d=S),v&&S>p&&(p=S);let I=e[y+4],k=e[y+5],L=I-k,O=I+k;L<o&&(o=L),O>h&&(h=O),v&&I<f&&(f=I),v&&I>g&&(g=I)}i[0]=a,i[1]=s,i[2]=o,i[3]=l,i[4]=u,i[5]=h,v&&(n[0]=c,n[1]=d,n[2]=f,n[3]=m,n[4]=p,n[5]=g)}function c3e(e,t,r,i){let n=1/0,a=1/0,s=1/0,o=-1/0,l=-1/0,u=-1/0;for(let h=t*6,c=(t+r)*6;h<c;h+=6){let d=e[h+0];d<n&&(n=d),d>o&&(o=d);let f=e[h+2];f<a&&(a=f),f>l&&(l=f);let m=e[h+4];m<s&&(s=m),m>u&&(u=m)}i[0]=n,i[1]=a,i[2]=s,i[3]=o,i[4]=l,i[5]=u}function h3e(e,t,r,i,n){let a=r,s=r+i-1,o=n.pos,l=n.axis*2;for(;;){for(;a<=s&&t[a*6+l]<o;)a++;for(;a<=s&&t[s*6+l]>=o;)s--;if(a<s){for(let u=0;u<3;u++){let h=e[a*3+u];e[a*3+u]=e[s*3+u],e[s*3+u]=h;let c=t[a*6+u*2+0];t[a*6+u*2+0]=t[s*6+u*2+0],t[s*6+u*2+0]=c;let d=t[a*6+u*2+1];t[a*6+u*2+1]=t[s*6+u*2+1],t[s*6+u*2+1]=d}a++,s--}else return a}}var Yu=32,d3e=(e,t)=>e.candidate-t.candidate,Yc=new Array(Yu).fill().map(()=>({count:0,bounds:new Float32Array(6),rightCacheBounds:new Float32Array(6),leftCacheBounds:new Float32Array(6),candidate:0})),Rb=new Float32Array(6);function f3e(e,t,r,i,n,a){let s=-1,o=0;if(a===0)s=oU(t),s!==-1&&(o=(t[s]+t[s+3])/2);else if(a===1)s=oU(e),s!==-1&&(o=p3e(r,i,n,s));else if(a===2){let l=a0(e),u=1.25*n,h=i*6,c=(i+n)*6;for(let d=0;d<3;d++){let f=t[d],m=(t[d+3]-f)/Yu;if(n<Yu/4){let p=[...Yc];p.length=n;let g=0;for(let y=h;y<c;y+=6,g++){let x=p[g];x.candidate=r[y+2*d],x.count=0;let{bounds:b,leftCacheBounds:_,rightCacheBounds:w}=x;for(let E=0;E<3;E++)w[E]=1/0,w[E+3]=-1/0,_[E]=1/0,_[E+3]=-1/0,b[E]=1/0,b[E+3]=-1/0;Ib(y,r,b)}p.sort(d3e);let v=n;for(let y=0;y<v;y++){let x=p[y];for(;y+1<v&&p[y+1].candidate===x.candidate;)p.splice(y+1,1),v--}for(let y=h;y<c;y+=6){let x=r[y+2*d];for(let b=0;b<v;b++){let _=p[b];x>=_.candidate?Ib(y,r,_.rightCacheBounds):(Ib(y,r,_.leftCacheBounds),_.count++)}}for(let y=0;y<v;y++){let x=p[y],b=x.count,_=n-x.count,w=x.leftCacheBounds,E=x.rightCacheBounds,S=0;b!==0&&(S=a0(w)/l);let C=0;_!==0&&(C=a0(E)/l);let M=1+1.25*(S*b+C*_);M<u&&(s=d,u=M,o=x.candidate)}}else{for(let v=0;v<Yu;v++){let y=Yc[v];y.count=0,y.candidate=f+m+v*m;let x=y.bounds;for(let b=0;b<3;b++)x[b]=1/0,x[b+3]=-1/0}for(let v=h;v<c;v+=6){let y=~~((r[v+2*d]-f)/m);y>=Yu&&(y=Yu-1);let x=Yc[y];x.count++,Ib(v,r,x.bounds)}let p=Yc[Yu-1];lU(p.bounds,p.rightCacheBounds);for(let v=Yu-2;v>=0;v--){let y=Yc[v],x=Yc[v+1];uU(y.bounds,x.rightCacheBounds,y.rightCacheBounds)}let g=0;for(let v=0;v<Yu-1;v++){let y=Yc[v],x=y.count,b=y.bounds,_=Yc[v+1].rightCacheBounds;x!==0&&(g===0?lU(b,Rb):uU(b,Rb,Rb)),g+=x;let w=0,E=0;g!==0&&(w=a0(Rb)/l);let S=n-g;S!==0&&(E=a0(_)/l);let C=1+1.25*(w*g+E*S);C<u&&(s=d,u=C,o=y.candidate)}}}}else console.warn(`MeshBVH: Invalid build strategy value ${a} used.`);return{axis:s,pos:o}}function p3e(e,t,r,i){let n=0;for(let a=t,s=t+r;a<s;a++)n+=e[a*6+i*2];return n/r}function m3e(e,t){let r=e.attributes.position,i=e.index.array,n=i.length/3,a=new Float32Array(n*6),s=r.normalized,o=r.array,l=r.offset||0,u=3;r.isInterleavedBufferAttribute&&(u=r.data.stride);let h=["getX","getY","getZ"];for(let c=0;c<n;c++){let d=c*3,f=c*6,m,p,g;s?(m=i[d+0],p=i[d+1],g=i[d+2]):(m=i[d+0]*u+l,p=i[d+1]*u+l,g=i[d+2]*u+l);for(let v=0;v<3;v++){let y,x,b;s?(y=r[h[v]](m),x=r[h[v]](p),b=r[h[v]](g)):(y=o[m+v],x=o[p+v],b=o[g+v]);let _=y;x<_&&(_=x),b<_&&(_=b);let w=y;x>w&&(w=x),b>w&&(w=b);let E=(w-_)/2,S=v*2;a[f+S+0]=_+E,a[f+S+1]=E+(Math.abs(_)+E)*o3e,_<t[v]&&(t[v]=_),w>t[v+3]&&(t[v+3]=w)}}return a}function g3e(e,t){function r(v){d&&d(v/f)}function i(v,y,x,b=null,_=0){if(!m&&_>=l&&(m=!0,u&&(console.warn(`MeshBVH: Max depth of ${l} reached when generating BVH. Consider increasing maxDepth.`),console.warn(e))),x<=h||_>=l)return r(y+x),v.offset=y,v.count=x,v;let w=f3e(v.boundingData,b,s,y,x,c);if(w.axis===-1)return r(y+x),v.offset=y,v.count=x,v;let E=h3e(o,s,y,x,w);if(E===y||E===y+x)r(y+x),v.offset=y,v.count=x;else{v.splitAxis=w.axis;let S=new Ob,C=y,M=E-y;v.left=S,S.boundingData=new Float32Array(6),gA(s,C,M,S.boundingData,a),i(S,C,M,a,_+1);let P=new Ob,I=E,k=x-M;v.right=P,P.boundingData=new Float32Array(6),gA(s,I,k,P.boundingData,a),i(P,I,k,a,_+1)}return v}l3e(e,t);let n=new Float32Array(6),a=new Float32Array(6),s=m3e(e,n),o=e.index.array,l=t.maxDepth,u=t.verbose,h=t.maxLeafTris,c=t.strategy,d=t.onProgress,f=e.index.count/3,m=!1,p=[],g=u3e(e);if(g.length===1){let v=g[0],y=new Ob;y.boundingData=n,c3e(s,v.offset,v.count,a),i(y,v.offset,v.count,a),p.push(y)}else for(let v of g){let y=new Ob;y.boundingData=new Float32Array(6),gA(s,v.offset,v.count,y.boundingData,a),i(y,v.offset,v.count,a),p.push(y)}return p}function v3e(e,t){let r=g3e(e,t),i,n,a,s=[],o=t.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;for(let h=0;h<r.length;h++){let c=r[h],d=l(c),f=new o(32*d);i=new Float32Array(f),n=new Uint32Array(f),a=new Uint16Array(f),u(0,c),s.push(f)}return s;function l(h){return h.count?1:1+l(h.left)+l(h.right)}function u(h,c){let d=h/4,f=h/2,m=!!c.count,p=c.boundingData;for(let g=0;g<6;g++)i[d+g]=p[g];if(m){let g=c.offset,v=c.count;return n[d+6]=g,a[f+14]=v,a[f+15]=65535,h+32}else{let g=c.left,v=c.right,y=c.splitAxis,x;if(x=u(h+32,g),x/4>Math.pow(2,32))throw new Error("MeshBVH: Cannot store child pointer greater than 32 bits.");return n[d+6]=x/4,x=u(x,v),n[d+7]=y,x}}}var Oc=class{constructor(){this.min=1/0,this.max=-1/0}setFromPointsField(e,t){let r=1/0,i=-1/0;for(let n=0,a=e.length;n<a;n++){let s=e[n][t];r=s<r?s:r,i=s>i?s:i}this.min=r,this.max=i}setFromPoints(e,t){let r=1/0,i=-1/0;for(let n=0,a=t.length;n<a;n++){let s=t[n],o=e.dot(s);r=o<r?o:r,i=o>i?o:i}this.min=r,this.max=i}isSeparated(e){return this.min>e.max||e.min>this.max}};Oc.prototype.setFromBox=function(){let e=new T;return function(t,r){let i=r.min,n=r.max,a=1/0,s=-1/0;for(let o=0;o<=1;o++)for(let l=0;l<=1;l++)for(let u=0;u<=1;u++){e.x=i.x*o+n.x*(1-o),e.y=i.y*l+n.y*(1-l),e.z=i.z*u+n.z*(1-u);let h=t.dot(e);a=Math.min(h,a),s=Math.max(h,s)}this.min=a,this.max=s}}();var y3e=function(){let e=new T,t=new T,r=new T;return function(i,n,a){let s=i.start,o=e,l=n.start,u=t;r.subVectors(s,l),e.subVectors(i.end,i.start),t.subVectors(n.end,n.start);let h=r.dot(u),c=u.dot(o),d=u.dot(u),f=r.dot(o),m=o.dot(o)*d-c*c,p,g;m!==0?p=(h*c-f*d)/m:p=0,g=(h+p*c)/d,a.x=p,a.y=g}}(),ck=function(){let e=new re,t=new T,r=new T;return function(i,n,a,s){y3e(i,n,e);let o=e.x,l=e.y;if(o>=0&&o<=1&&l>=0&&l<=1){i.at(o,a),n.at(l,s);return}else if(o>=0&&o<=1){l<0?n.at(0,s):n.at(1,s),i.closestPointToPoint(s,!0,a);return}else if(l>=0&&l<=1){o<0?i.at(0,a):i.at(1,a),n.closestPointToPoint(a,!0,s);return}else{let u;o<0?u=i.start:u=i.end;let h;l<0?h=n.start:h=n.end;let c=t,d=r;if(i.closestPointToPoint(h,!0,t),n.closestPointToPoint(u,!0,r),c.distanceToSquared(h)<=d.distanceToSquared(u)){a.copy(c),s.copy(h);return}else{a.copy(u),s.copy(d);return}}}}(),x3e=function(){let e=new T,t=new T,r=new Vs,i=new Lo;return function(n,a){let{radius:s,center:o}=n,{a:l,b:u,c:h}=a;if(i.start=l,i.end=u,i.closestPointToPoint(o,!0,e).distanceTo(o)<=s||(i.start=l,i.end=h,i.closestPointToPoint(o,!0,e).distanceTo(o)<=s)||(i.start=u,i.end=h,i.closestPointToPoint(o,!0,e).distanceTo(o)<=s))return!0;let c=a.getPlane(r);if(Math.abs(c.distanceToPoint(o))<=s){let d=c.projectPoint(o,t);if(a.containsPoint(d))return!0}return!1}}(),b3e=1e-15;function zp(e){return Math.abs(e)<b3e}var Ic=class extends va{constructor(...t){super(...t),this.isExtendedTriangle=!0,this.satAxes=new Array(4).fill().map(()=>new T),this.satBounds=new Array(4).fill().map(()=>new Oc),this.points=[this.a,this.b,this.c],this.sphere=new Ds,this.plane=new Vs,this.needsUpdate=!0}intersectsSphere(t){return x3e(t,this)}update(){let t=this.a,r=this.b,i=this.c,n=this.points,a=this.satAxes,s=this.satBounds,o=a[0],l=s[0];this.getNormal(o),l.setFromPoints(o,n);let u=a[1],h=s[1];u.subVectors(t,r),h.setFromPoints(u,n);let c=a[2],d=s[2];c.subVectors(r,i),d.setFromPoints(c,n);let f=a[3],m=s[3];f.subVectors(i,t),m.setFromPoints(f,n),this.sphere.setFromPoints(this.points),this.plane.setFromNormalAndCoplanarPoint(o,t),this.needsUpdate=!1}};Ic.prototype.closestPointToSegment=function(){let e=new T,t=new T,r=new Lo;return function(i,n=null,a=null){let{start:s,end:o}=i,l=this.points,u,h=1/0;for(let c=0;c<3;c++){let d=(c+1)%3;r.start.copy(l[c]),r.end.copy(l[d]),ck(r,i,e,t),u=e.distanceToSquared(t),u<h&&(h=u,n&&n.copy(e),a&&a.copy(t))}return this.closestPointToPoint(s,e),u=s.distanceToSquared(e),u<h&&(h=u,n&&n.copy(e),a&&a.copy(s)),this.closestPointToPoint(o,e),u=o.distanceToSquared(e),u<h&&(h=u,n&&n.copy(e),a&&a.copy(o)),Math.sqrt(h)}}();Ic.prototype.intersectsTriangle=function(){let e=new Ic,t=new Array(3),r=new Array(3),i=new Oc,n=new Oc,a=new T,s=new T,o=new T,l=new T,u=new Lo,h=new Lo,c=new Lo;return function(d,f=null,m=!1){this.needsUpdate&&this.update(),d.isExtendedTriangle?d.needsUpdate&&d.update():(e.copy(d),e.update(),d=e);let p=this.plane,g=d.plane;if(Math.abs(p.normal.dot(g.normal))>1-1e-10){let v=this.satBounds,y=this.satAxes;r[0]=d.a,r[1]=d.b,r[2]=d.c;for(let _=0;_<4;_++){let w=v[_],E=y[_];if(i.setFromPoints(E,r),w.isSeparated(i))return!1}let x=d.satBounds,b=d.satAxes;t[0]=this.a,t[1]=this.b,t[2]=this.c;for(let _=0;_<4;_++){let w=x[_],E=b[_];if(i.setFromPoints(E,t),w.isSeparated(i))return!1}for(let _=0;_<4;_++){let w=y[_];for(let E=0;E<4;E++){let S=b[E];if(a.crossVectors(w,S),i.setFromPoints(a,t),n.setFromPoints(a,r),i.isSeparated(n))return!1}}return f&&(m||console.warn("ExtendedTriangle.intersectsTriangle: Triangles are coplanar which does not support an output edge. Setting edge to 0, 0, 0."),f.start.set(0,0,0),f.end.set(0,0,0)),!0}else{let v=this.points,y=!1,x=0;for(let k=0;k<3;k++){let L=v[k],O=v[(k+1)%3];u.start.copy(L),u.end.copy(O),u.delta(s);let F=y?h.start:h.end,z=zp(g.distanceToPoint(L));if(zp(g.normal.dot(s))&&z){h.copy(u),x=2;break}if((g.intersectLine(u,F)||z)&&!zp(F.distanceTo(O))){if(x++,y)break;y=!0}}if(x===1&&d.containsPoint(h.end))return f&&(f.start.copy(h.end),f.end.copy(h.end)),!0;if(x!==2)return!1;let b=d.points,_=!1,w=0;for(let k=0;k<3;k++){let L=b[k],O=b[(k+1)%3];u.start.copy(L),u.end.copy(O),u.delta(o);let F=_?c.start:c.end,z=zp(p.distanceToPoint(L));if(zp(p.normal.dot(o))&&z){c.copy(u),w=2;break}if((p.intersectLine(u,F)||z)&&!zp(F.distanceTo(O))){if(w++,_)break;_=!0}}if(w===1&&this.containsPoint(c.end))return f&&(f.start.copy(c.end),f.end.copy(c.end)),!0;if(w!==2)return!1;if(h.delta(s),c.delta(o),s.dot(o)<0){let k=c.start;c.start=c.end,c.end=k}let E=h.start.dot(s),S=h.end.dot(s),C=c.start.dot(s),M=c.end.dot(s),P=S<C,I=E<M;return E!==M&&C!==S&&P===I?!1:(f&&(l.subVectors(h.start,c.start),l.dot(s)>0?f.start.copy(h.start):f.start.copy(c.start),l.subVectors(h.end,c.end),l.dot(s)<0?f.end.copy(h.end):f.end.copy(c.end)),!0)}}}();Ic.prototype.distanceToPoint=function(){let e=new T;return function(t){return this.closestPointToPoint(t,e),t.distanceTo(e)}}();Ic.prototype.distanceToTriangle=function(){let e=new T,t=new T,r=["a","b","c"],i=new Lo,n=new Lo;return function(a,s=null,o=null){let l=s||o?i:null;if(this.intersectsTriangle(a,l))return(s||o)&&(s&&l.getCenter(s),o&&l.getCenter(o)),0;let u=1/0;for(let h=0;h<3;h++){let c,d=r[h],f=a[d];this.closestPointToPoint(f,e),c=f.distanceToSquared(e),c<u&&(u=c,s&&s.copy(e),o&&o.copy(f));let m=this[d];a.closestPointToPoint(m,e),c=m.distanceToSquared(e),c<u&&(u=c,s&&s.copy(m),o&&o.copy(e))}for(let h=0;h<3;h++){let c=r[h],d=r[(h+1)%3];i.set(this[c],this[d]);for(let f=0;f<3;f++){let m=r[f],p=r[(f+1)%3];n.set(a[m],a[p]),ck(i,n,e,t);let g=e.distanceToSquared(t);g<u&&(u=g,s&&s.copy(e),o&&o.copy(t))}}return Math.sqrt(u)}}();var Cu=class{constructor(e,t,r){this.isOrientedBox=!0,this.min=new T,this.max=new T,this.matrix=new ze,this.invMatrix=new ze,this.points=new Array(8).fill().map(()=>new T),this.satAxes=new Array(3).fill().map(()=>new T),this.satBounds=new Array(3).fill().map(()=>new Oc),this.alignedSatBounds=new Array(3).fill().map(()=>new Oc),this.needsUpdate=!1,e&&this.min.copy(e),t&&this.max.copy(t),r&&this.matrix.copy(r)}set(e,t,r){this.min.copy(e),this.max.copy(t),this.matrix.copy(r),this.needsUpdate=!0}copy(e){this.min.copy(e.min),this.max.copy(e.max),this.matrix.copy(e.matrix),this.needsUpdate=!0}};Cu.prototype.update=function(){return function(){let e=this.matrix,t=this.min,r=this.max,i=this.points;for(let l=0;l<=1;l++)for(let u=0;u<=1;u++)for(let h=0;h<=1;h++){let c=1*l|2*u|4*h,d=i[c];d.x=l?r.x:t.x,d.y=u?r.y:t.y,d.z=h?r.z:t.z,d.applyMatrix4(e)}let n=this.satBounds,a=this.satAxes,s=i[0];for(let l=0;l<3;l++){let u=a[l],h=n[l],c=1<<l,d=i[c];u.subVectors(s,d),h.setFromPoints(u,i)}let o=this.alignedSatBounds;o[0].setFromPointsField(i,"x"),o[1].setFromPointsField(i,"y"),o[2].setFromPointsField(i,"z"),this.invMatrix.copy(this.matrix).invert(),this.needsUpdate=!1}}();Cu.prototype.intersectsBox=function(){let e=new Oc;return function(t){this.needsUpdate&&this.update();let r=t.min,i=t.max,n=this.satBounds,a=this.satAxes,s=this.alignedSatBounds;if(e.min=r.x,e.max=i.x,s[0].isSeparated(e)||(e.min=r.y,e.max=i.y,s[1].isSeparated(e))||(e.min=r.z,e.max=i.z,s[2].isSeparated(e)))return!1;for(let o=0;o<3;o++){let l=a[o],u=n[o];if(e.setFromBox(l,t),u.isSeparated(e))return!1}return!0}}();Cu.prototype.intersectsTriangle=function(){let e=new Ic,t=new Array(3),r=new Oc,i=new Oc,n=new T;return function(a){this.needsUpdate&&this.update(),a.isExtendedTriangle?a.needsUpdate&&a.update():(e.copy(a),e.update(),a=e);let s=this.satBounds,o=this.satAxes;t[0]=a.a,t[1]=a.b,t[2]=a.c;for(let c=0;c<3;c++){let d=s[c],f=o[c];if(r.setFromPoints(f,t),d.isSeparated(r))return!1}let l=a.satBounds,u=a.satAxes,h=this.points;for(let c=0;c<3;c++){let d=l[c],f=u[c];if(r.setFromPoints(f,h),d.isSeparated(r))return!1}for(let c=0;c<3;c++){let d=o[c];for(let f=0;f<4;f++){let m=u[f];if(n.crossVectors(d,m),r.setFromPoints(n,t),i.setFromPoints(n,h),r.isSeparated(i))return!1}}return!0}}();Cu.prototype.closestPointToPoint=function(){return function(e,t){return this.needsUpdate&&this.update(),t.copy(e).applyMatrix4(this.invMatrix).clamp(this.min,this.max).applyMatrix4(this.matrix),t}}();Cu.prototype.distanceToPoint=function(){let e=new T;return function(t){return this.closestPointToPoint(t,e),t.distanceTo(e)}}();Cu.prototype.distanceToBox=function(){let e=["x","y","z"],t=new Array(12).fill().map(()=>new Lo),r=new Array(12).fill().map(()=>new Lo),i=new T,n=new T;return function(a,s=0,o=null,l=null){if(this.needsUpdate&&this.update(),this.intersectsBox(a))return(o||l)&&(a.getCenter(n),this.closestPointToPoint(n,i),a.closestPointToPoint(i,n),o&&o.copy(i),l&&l.copy(n)),0;let u=s*s,h=a.min,c=a.max,d=this.points,f=1/0;for(let p=0;p<8;p++){let g=d[p];n.copy(g).clamp(h,c);let v=g.distanceToSquared(n);if(v<f&&(f=v,o&&o.copy(g),l&&l.copy(n),v<u))return Math.sqrt(v)}let m=0;for(let p=0;p<3;p++)for(let g=0;g<=1;g++)for(let v=0;v<=1;v++){let y=(p+1)%3,x=(p+2)%3,b=g<<y|v<<x,_=1<<p|g<<y|v<<x,w=d[b],E=d[_];t[m].set(w,E);let S=e[p],C=e[y],M=e[x],P=r[m],I=P.start,k=P.end;I[S]=h[S],I[C]=g?h[C]:c[C],I[M]=v?h[M]:c[C],k[S]=c[S],k[C]=g?h[C]:c[C],k[M]=v?h[M]:c[C],m++}for(let p=0;p<=1;p++)for(let g=0;g<=1;g++)for(let v=0;v<=1;v++){n.x=p?c.x:h.x,n.y=g?c.y:h.y,n.z=v?c.z:h.z,this.closestPointToPoint(n,i);let y=n.distanceToSquared(i);if(y<f&&(f=y,o&&o.copy(i),l&&l.copy(n),y<u))return Math.sqrt(y)}for(let p=0;p<12;p++){let g=t[p];for(let v=0;v<12;v++){let y=r[v];ck(g,y,i,n);let x=i.distanceToSquared(n);if(x<f&&(f=x,o&&o.copy(i),l&&l.copy(n),x<u))return Math.sqrt(x)}}return Math.sqrt(f)}}();var Fp=new T,Up=new T,jp=new T,kb=new re,Lb=new re,Bb=new re,cU=new T,hU=new T,dU=new T,Nb=new T;function w3e(e,t,r,i,n,a){let s;return a===Vn?s=e.intersectTriangle(i,r,t,!0,n):s=e.intersectTriangle(t,r,i,a!==Ys,n),s===null?null:{distance:e.origin.distanceTo(n),point:n.clone()}}function _3e(e,t,r,i,n,a,s,o,l){Fp.fromBufferAttribute(t,a),Up.fromBufferAttribute(t,s),jp.fromBufferAttribute(t,o);let u=w3e(e,Fp,Up,jp,Nb,l);if(u){i&&(kb.fromBufferAttribute(i,a),Lb.fromBufferAttribute(i,s),Bb.fromBufferAttribute(i,o),u.uv=va.getInterpolation(Nb,Fp,Up,jp,kb,Lb,Bb,new re)),n&&(kb.fromBufferAttribute(n,a),Lb.fromBufferAttribute(n,s),Bb.fromBufferAttribute(n,o),u.uv1=va.getInterpolation(Nb,Fp,Up,jp,kb,Lb,Bb,new re)),r&&(cU.fromBufferAttribute(r,a),hU.fromBufferAttribute(r,s),dU.fromBufferAttribute(r,o),u.normal=va.getInterpolation(Nb,Fp,Up,jp,cU,hU,dU,new T),u.normal.dot(e.direction)>0&&u.normal.multiplyScalar(-1));let h={a,b:s,c:o,normal:new T,materialIndex:0};va.getNormal(Fp,Up,jp,h.normal),u.face=h,u.faceIndex=a}return u}function fY(e,t,r,i,n){let a=i*3,s=e.index.getX(a),o=e.index.getX(a+1),l=e.index.getX(a+2),{position:u,normal:h,uv:c,uv1:d}=e.attributes,f=_3e(r,u,h,c,d,s,o,l,t);return f?(f.faceIndex=i,n&&n.push(f),f):null}function S3e(e,t,r,i,n,a){for(let s=i,o=i+n;s<o;s++)fY(e,t,r,s,a)}function E3e(e,t,r,i,n){let a=1/0,s=null;for(let o=i,l=i+n;o<l;o++){let u=fY(e,t,r,o);u&&u.distance<a&&(s=u,a=u.distance)}return s}function Zl(e,t,r,i){let n=e.a,a=e.b,s=e.c,o=t,l=t+1,u=t+2;r&&(o=r.getX(t),l=r.getX(t+1),u=r.getX(t+2)),n.x=i.getX(o),n.y=i.getY(o),n.z=i.getZ(o),a.x=i.getX(l),a.y=i.getY(l),a.z=i.getZ(l),s.x=i.getX(u),s.y=i.getY(u),s.z=i.getZ(u)}function fU(e,t,r,i,n,a,s){let o=r.index,l=r.attributes.position;for(let u=e,h=t+e;u<h;u++)if(Zl(s,u*3,o,l),s.needsUpdate=!0,i(s,u,n,a))return!0;return!1}var pY=class{constructor(e){this._getNewPrimitive=e,this._primitives=[]}getPrimitive(){let e=this._primitives;return e.length===0?this._getNewPrimitive():e.pop()}releasePrimitive(e){this._primitives.push(e)}};function fh(e,t){return t[e+15]===65535}function lg(e,t){return t[e+6]}function x1(e,t){return t[e+14]}function b1(e){return e+8}function w1(e,t){return t[e+6]}function M3e(e,t){return t[e+7]}var Bm=new Qi,GS=new T,C3e=["x","y","z"];function s3(e,t,r,i,n){let a=e*2,s=Sv,o=$h,l=Yh;if(fh(a,o)){let u=lg(e,l),h=x1(a,o);S3e(t,r,i,u,h,n)}else{let u=b1(e);WS(u,s,i,GS)&&s3(u,t,r,i,n);let h=w1(e,l);WS(h,s,i,GS)&&s3(h,t,r,i,n)}}function o3(e,t,r,i){let n=e*2,a=Sv,s=$h,o=Yh;if(fh(n,s)){let l=lg(e,o),u=x1(n,s);return E3e(t,r,i,l,u)}else{let l=M3e(e,o),u=C3e[l],h=i.direction[u]>=0,c,d;h?(c=b1(e),d=w1(e,o)):(c=w1(e,o),d=b1(e));let f=WS(c,a,i,GS)?o3(c,t,r,i):null;if(f){let p=f.point[u];if(h?p<=a[d+l]:p>=a[d+l+3])return f}let m=WS(d,a,i,GS)?o3(d,t,r,i):null;return f&&m?f.distance<=m.distance?f:m:f||m||null}}var A3e=function(){let e,t,r=[],i=new pY(()=>new Qi);return function(...a){e=i.getPrimitive(),t=i.getPrimitive(),r.push(e,t);let s=n(...a);i.releasePrimitive(e),i.releasePrimitive(t),r.pop(),r.pop();let o=r.length;return o>0&&(t=r[o-1],e=r[o-2]),s};function n(a,s,o,l,u=null,h=0,c=0){function d(y){let x=y*2,b=$h,_=Yh;for(;!fh(x,b);)y=b1(y),x=y*2;return lg(y,_)}function f(y){let x=y*2,b=$h,_=Yh;for(;!fh(x,b);)y=w1(y,_),x=y*2;return lg(y,_)+x1(x,b)}let m=a*2,p=Sv,g=$h,v=Yh;if(fh(m,g)){let y=lg(a,v),x=x1(m,g);return ou(a,p,e),l(y,x,!1,c,h+a,e)}else{let y=b1(a),x=w1(a,v),b=y,_=x,w,E,S,C;if(u&&(S=e,C=t,ou(b,p,S),ou(_,p,C),w=u(S),E=u(C),E<w)){b=x,_=y;let F=w;w=E,E=F,S=C}S||(S=e,ou(b,p,S));let M=fh(b*2,g),P=o(S,M,w,c+1,h+b),I;if(P===2){let F=d(b),z=f(b)-F;I=l(F,z,!0,c+1,h+b,S)}else I=P&&n(b,s,o,l,u,h,c+1);if(I)return!0;C=t,ou(_,p,C);let k=fh(_*2,g),L=o(C,k,E,c+1,h+_),O;if(L===2){let F=d(_),z=f(_)-F;O=l(F,z,!0,c+1,h+_,C)}else O=L&&n(_,s,o,l,u,h,c+1);return!!O}}}(),T3e=function(){let e=new Ic,t=new Ic,r=new ze,i=new Cu,n=new Cu;return function a(s,o,l,u,h=null){let c=s*2,d=Sv,f=$h,m=Yh;if(h===null&&(l.boundingBox||l.computeBoundingBox(),i.set(l.boundingBox.min,l.boundingBox.max,u),h=i),fh(c,f)){let p=o,g=p.index,v=p.attributes.position,y=l.index,x=l.attributes.position,b=lg(s,m),_=x1(c,f);if(r.copy(u).invert(),l.boundsTree)return ou(s,d,n),n.matrix.copy(r),n.needsUpdate=!0,l.boundsTree.shapecast({intersectsBounds:w=>n.intersectsBox(w),intersectsTriangle:w=>{w.a.applyMatrix4(u),w.b.applyMatrix4(u),w.c.applyMatrix4(u),w.needsUpdate=!0;for(let E=b*3,S=(_+b)*3;E<S;E+=3)if(Zl(t,E,g,v),t.needsUpdate=!0,w.intersectsTriangle(t))return!0;return!1}});for(let w=b*3,E=_+b*3;w<E;w+=3){Zl(e,w,g,v),e.a.applyMatrix4(r),e.b.applyMatrix4(r),e.c.applyMatrix4(r),e.needsUpdate=!0;for(let S=0,C=y.count;S<C;S+=3)if(Zl(t,S,y,x),t.needsUpdate=!0,e.intersectsTriangle(t))return!0}}else{let p=s+8,g=m[s+6];return ou(p,d,Bm),!!(h.intersectsBox(Bm)&&a(p,o,l,u,h)||(ou(g,d,Bm),h.intersectsBox(Bm)&&a(g,o,l,u,h)))}}}();function WS(e,t,r,i){return ou(e,t,Bm),r.intersectBox(Bm,i)}var l3=[],qw,Sv,$h,Yh;function V0(e){qw&&l3.push(qw),qw=e,Sv=new Float32Array(e),$h=new Uint16Array(e),Yh=new Uint32Array(e)}function zb(){qw=null,Sv=null,$h=null,Yh=null,l3.length&&V0(l3.pop())}var vA=Symbol("skip tree generation"),yA=new Qi,xA=new Qi,Vp=new ze,Td=new Cu,s0=new Cu,o0=new T,Fb=new T,P3e=new T,D3e=new T,O3e=new T,pU=new Qi,kl=new pY(()=>new Ic),Sy=class{static serialize(e,t={}){if(t.isBufferGeometry)return console.warn("MeshBVH.serialize: The arguments for the function have changed. See documentation for new signature."),Sy.serialize(arguments[0],{cloneBuffers:arguments[2]===void 0?!0:arguments[2]});t={cloneBuffers:!0,...t};let r=e.geometry,i=e._roots,n=r.getIndex(),a;return t.cloneBuffers?a={roots:i.map(s=>s.slice()),index:n.array.slice()}:a={roots:i,index:n.array},a}static deserialize(e,t,r={}){if(typeof r=="boolean")return console.warn("MeshBVH.deserialize: The arguments for the function have changed. See documentation for new signature."),Sy.deserialize(arguments[0],arguments[1],{setIndex:arguments[2]===void 0?!0:arguments[2]});r={setIndex:!0,...r};let{index:i,roots:n}=e,a=new Sy(t,{...r,[vA]:!0});if(a._roots=n,r.setIndex){let s=t.getIndex();if(s===null){let o=new Bt(e.index,1,!1);t.setIndex(o)}else s.array!==i&&(s.array.set(i),s.needsUpdate=!0)}return a}constructor(e,t={}){if(e.isBufferGeometry){if(e.index&&e.index.isInterleavedBufferAttribute)throw new Error("MeshBVH: InterleavedBufferAttribute is not supported for the index attribute.")}else throw new Error("MeshBVH: Only BufferGeometries are supported.");if(t=Object.assign({strategy:0,maxDepth:40,maxLeafTris:10,verbose:!0,useSharedArrayBuffer:!1,setBoundingBox:!0,onProgress:null,[vA]:!1},t),t.useSharedArrayBuffer&&typeof SharedArrayBuffer>"u")throw new Error("MeshBVH: SharedArrayBuffer is not available.");this._roots=null,t[vA]||(this._roots=v3e(e,t),!e.boundingBox&&t.setBoundingBox&&(e.boundingBox=this.getBoundingBox(new Qi))),this.geometry=e}refit(e=null){e&&Array.isArray(e)&&(e=new Set(e));let t=this.geometry,r=t.index.array,i=t.attributes.position,n,a,s,o,l=0,u=this._roots;for(let c=0,d=u.length;c<d;c++)n=u[c],a=new Uint32Array(n),s=new Uint16Array(n),o=new Float32Array(n),h(0,l),l+=n.byteLength;function h(c,d,f=!1){let m=c*2;if(s[m+15]===65535){let p=a[c+6],g=s[m+14],v=1/0,y=1/0,x=1/0,b=-1/0,_=-1/0,w=-1/0;for(let E=3*p,S=3*(p+g);E<S;E++){let C=r[E],M=i.getX(C),P=i.getY(C),I=i.getZ(C);M<v&&(v=M),M>b&&(b=M),P<y&&(y=P),P>_&&(_=P),I<x&&(x=I),I>w&&(w=I)}return o[c+0]!==v||o[c+1]!==y||o[c+2]!==x||o[c+3]!==b||o[c+4]!==_||o[c+5]!==w?(o[c+0]=v,o[c+1]=y,o[c+2]=x,o[c+3]=b,o[c+4]=_,o[c+5]=w,!0):!1}else{let p=c+8,g=a[c+6],v=p+d,y=g+d,x=f,b=!1,_=!1;e?x||(b=e.has(v),_=e.has(y),x=!b&&!_):(b=!0,_=!0);let w=x||b,E=x||_,S=!1;w&&(S=h(p,d,x));let C=!1;E&&(C=h(g,d,x));let M=S||C;if(M)for(let P=0;P<3;P++){let I=p+P,k=g+P,L=o[I],O=o[I+3],F=o[k],z=o[k+3];o[c+P]=L<F?L:F,o[c+P+3]=O>z?O:z}return M}}}traverse(e,t=0){let r=this._roots[t],i=new Uint32Array(r),n=new Uint16Array(r);a(0);function a(s,o=0){let l=s*2,u=n[l+15]===65535;if(u){let h=i[s+6],c=n[l+14];e(o,u,new Float32Array(r,s*4,6),h,c)}else{let h=s+8,c=i[s+6],d=i[s+7];e(o,u,new Float32Array(r,s*4,6),d)||(a(h,o+1),a(c,o+1))}}}raycast(e,t=Ml){let r=this._roots,i=this.geometry,n=[],a=t.isMaterial,s=Array.isArray(t),o=i.groups,l=a?t.side:t;for(let u=0,h=r.length;u<h;u++){let c=s?t[o[u].materialIndex].side:l,d=n.length;if(V0(r[u]),s3(0,i,c,e,n),zb(),s){let f=o[u].materialIndex;for(let m=d,p=n.length;m<p;m++)n[m].face.materialIndex=f}}return n}raycastFirst(e,t=Ml){let r=this._roots,i=this.geometry,n=t.isMaterial,a=Array.isArray(t),s=null,o=i.groups,l=n?t.side:t;for(let u=0,h=r.length;u<h;u++){let c=a?t[o[u].materialIndex].side:l;V0(r[u]);let d=o3(0,i,c,e);zb(),d!=null&&(s==null||d.distance<s.distance)&&(s=d,a&&(d.face.materialIndex=o[u].materialIndex))}return s}intersectsGeometry(e,t){let r=this.geometry,i=!1;for(let n of this._roots)if(V0(n),i=T3e(0,r,e,t),zb(),i)break;return i}shapecast(e,t,r){let i=this.geometry;if(e instanceof Function){if(t){let c=t;t=(d,f,m,p)=>{let g=f*3;return c(d,g,g+1,g+2,m,p)}}e={boundsTraverseOrder:r,intersectsBounds:e,intersectsTriangle:t,intersectsRange:null},console.warn("MeshBVH: Shapecast function signature has changed and now takes an object of callbacks as a second argument. See docs for new signature.")}let n=kl.getPrimitive(),{boundsTraverseOrder:a,intersectsBounds:s,intersectsRange:o,intersectsTriangle:l}=e;if(o&&l){let c=o;o=(d,f,m,p,g)=>c(d,f,m,p,g)?!0:fU(d,f,i,l,m,p,n)}else o||(l?o=(c,d,f,m)=>fU(c,d,i,l,f,m,n):o=(c,d,f)=>f);let u=!1,h=0;for(let c of this._roots){if(V0(c),u=A3e(0,i,s,o,a,h),zb(),u)break;h+=c.byteLength}return kl.releasePrimitive(n),u}bvhcast(e,t,r){let{intersectsRanges:i,intersectsTriangles:n}=r,a=this.geometry.index,s=this.geometry.attributes.position,o=e.geometry.index,l=e.geometry.attributes.position;Vp.copy(t).invert();let u=kl.getPrimitive(),h=kl.getPrimitive();if(n){let d=function(f,m,p,g,v,y,x,b){for(let _=p,w=p+g;_<w;_++){Zl(h,_*3,o,l),h.a.applyMatrix4(t),h.b.applyMatrix4(t),h.c.applyMatrix4(t),h.needsUpdate=!0;for(let E=f,S=f+m;E<S;E++)if(Zl(u,E*3,a,s),u.needsUpdate=!0,n(u,h,E,_,v,y,x,b))return!0}return!1};if(i){let f=i;i=function(m,p,g,v,y,x,b,_){return f(m,p,g,v,y,x,b,_)?!0:d(m,p,g,v,y,x,b,_)}}else i=d}e.getBoundingBox(xA),xA.applyMatrix4(t);let c=this.shapecast({intersectsBounds:d=>xA.intersectsBox(d),intersectsRange:(d,f,m,p,g,v)=>(yA.copy(v),yA.applyMatrix4(Vp),e.shapecast({intersectsBounds:y=>yA.intersectsBox(y),intersectsRange:(y,x,b,_,w)=>i(d,f,y,x,p,g,_,w)}))});return kl.releasePrimitive(u),kl.releasePrimitive(h),c}intersectsBox(e,t){return Td.set(e.min,e.max,t),Td.needsUpdate=!0,this.shapecast({intersectsBounds:r=>Td.intersectsBox(r),intersectsTriangle:r=>Td.intersectsTriangle(r)})}intersectsSphere(e){return this.shapecast({intersectsBounds:t=>e.intersectsBox(t),intersectsTriangle:t=>t.intersectsSphere(e)})}closestPointToGeometry(e,t,r={},i={},n=0,a=1/0){e.boundingBox||e.computeBoundingBox(),Td.set(e.boundingBox.min,e.boundingBox.max,t),Td.needsUpdate=!0;let s=this.geometry,o=s.attributes.position,l=s.index,u=e.attributes.position,h=e.index,c=kl.getPrimitive(),d=kl.getPrimitive(),f=Fb,m=P3e,p=null,g=null;i&&(p=D3e,g=O3e);let v=1/0,y=null,x=null;return Vp.copy(t).invert(),s0.matrix.copy(Vp),this.shapecast({boundsTraverseOrder:b=>Td.distanceToBox(b),intersectsBounds:(b,_,w)=>w<v&&w<a?(_&&(s0.min.copy(b.min),s0.max.copy(b.max),s0.needsUpdate=!0),!0):!1,intersectsRange:(b,_)=>{if(e.boundsTree)return e.boundsTree.shapecast({boundsTraverseOrder:w=>s0.distanceToBox(w),intersectsBounds:(w,E,S)=>S<v&&S<a,intersectsRange:(w,E)=>{for(let S=w*3,C=(w+E)*3;S<C;S+=3){Zl(d,S,h,u),d.a.applyMatrix4(t),d.b.applyMatrix4(t),d.c.applyMatrix4(t),d.needsUpdate=!0;for(let M=b*3,P=(b+_)*3;M<P;M+=3){Zl(c,M,l,o),c.needsUpdate=!0;let I=c.distanceToTriangle(d,f,p);if(I<v&&(m.copy(f),g&&g.copy(p),v=I,y=M/3,x=S/3),I<n)return!0}}}});{let w=h?h.count:u.count;for(let E=0,S=w;E<S;E+=3){Zl(d,E,h,u),d.a.applyMatrix4(t),d.b.applyMatrix4(t),d.c.applyMatrix4(t),d.needsUpdate=!0;for(let C=b*3,M=(b+_)*3;C<M;C+=3){Zl(c,C,l,o),c.needsUpdate=!0;let P=c.distanceToTriangle(d,f,p);if(P<v&&(m.copy(f),g&&g.copy(p),v=P,y=C/3,x=E/3),P<n)return!0}}}}}),kl.releasePrimitive(c),kl.releasePrimitive(d),v===1/0?null:(r.point?r.point.copy(m):r.point=m.clone(),r.distance=v,r.faceIndex=y,i&&(i.point?i.point.copy(g):i.point=g.clone(),i.point.applyMatrix4(Vp),m.applyMatrix4(Vp),i.distance=m.sub(i.point).length(),i.faceIndex=x),r)}closestPointToPoint(e,t={},r=0,i=1/0){let n=r*r,a=i*i,s=1/0,o=null;if(this.shapecast({boundsTraverseOrder:u=>(o0.copy(e).clamp(u.min,u.max),o0.distanceToSquared(e)),intersectsBounds:(u,h,c)=>c<s&&c<a,intersectsTriangle:(u,h)=>{u.closestPointToPoint(e,o0);let c=e.distanceToSquared(o0);return c<s&&(Fb.copy(o0),s=c,o=h),c<n}}),s===1/0)return null;let l=Math.sqrt(s);return t.point?t.point.copy(Fb):t.point=Fb.clone(),t.distance=l,t.faceIndex=o,t}getBoundingBox(e){return e.makeEmpty(),this._roots.forEach(t=>{ou(0,new Float32Array(t),pU),e.union(pU)}),e}},l0=pd(Hge()),I3e=.5*(Math.sqrt(3)-1),u0=(3-Math.sqrt(3))/6,R3e=1/3,Ll=1/6,Ey=e=>Math.floor(e)|0,mU=new Float64Array([1,1,-1,1,1,-1,-1,-1,1,0,-1,0,1,0,-1,0,0,1,0,-1,0,1,0,-1]),bA=new Float64Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]);function wA(e=Math.random){let t=mY(e),r=new Float64Array(t).map(n=>mU[n%12*2]),i=new Float64Array(t).map(n=>mU[n%12*2+1]);return function(n,a){let s=0,o=0,l=0,u=(n+a)*I3e,h=Ey(n+u),c=Ey(a+u),d=(h+c)*u0,f=h-d,m=c-d,p=n-f,g=a-m,v,y;p>g?(v=1,y=0):(v=0,y=1);let x=p-v+u0,b=g-y+u0,_=p-1+2*u0,w=g-1+2*u0,E=h&255,S=c&255,C=.5-p*p-g*g;if(C>=0){let I=E+t[S],k=r[I],L=i[I];C*=C,s=C*C*(k*p+L*g)}let M=.5-x*x-b*b;if(M>=0){let I=E+v+t[S+y],k=r[I],L=i[I];M*=M,o=M*M*(k*x+L*b)}let P=.5-_*_-w*w;if(P>=0){let I=E+1+t[S+1],k=r[I],L=i[I];P*=P,l=P*P*(k*_+L*w)}return 70*(s+o+l)}}function k3e(e=Math.random){let t=mY(e),r=new Float64Array(t).map(a=>bA[a%12*3]),i=new Float64Array(t).map(a=>bA[a%12*3+1]),n=new Float64Array(t).map(a=>bA[a%12*3+2]);return function(a,s,o){let l,u,h,c,d=(a+s+o)*R3e,f=Ey(a+d),m=Ey(s+d),p=Ey(o+d),g=(f+m+p)*Ll,v=f-g,y=m-g,x=p-g,b=a-v,_=s-y,w=o-x,E,S,C,M,P,I;b>=_?_>=w?(E=1,S=0,C=0,M=1,P=1,I=0):b>=w?(E=1,S=0,C=0,M=1,P=0,I=1):(E=0,S=0,C=1,M=1,P=0,I=1):_<w?(E=0,S=0,C=1,M=0,P=1,I=1):b<w?(E=0,S=1,C=0,M=0,P=1,I=1):(E=0,S=1,C=0,M=1,P=1,I=0);let k=b-E+Ll,L=_-S+Ll,O=w-C+Ll,F=b-M+2*Ll,z=_-P+2*Ll,B=w-I+2*Ll,V=b-1+3*Ll,R=_-1+3*Ll,H=w-1+3*Ll,W=f&255,te=m&255,G=p&255,ie=.6-b*b-_*_-w*w;if(ie<0)l=0;else{let Z=W+t[te+t[G]];ie*=ie,l=ie*ie*(r[Z]*b+i[Z]*_+n[Z]*w)}let q=.6-k*k-L*L-O*O;if(q<0)u=0;else{let Z=W+E+t[te+S+t[G+C]];q*=q,u=q*q*(r[Z]*k+i[Z]*L+n[Z]*O)}let le=.6-F*F-z*z-B*B;if(le<0)h=0;else{let Z=W+M+t[te+P+t[G+I]];le*=le,h=le*le*(r[Z]*F+i[Z]*z+n[Z]*B)}let ae=.6-V*V-R*R-H*H;if(ae<0)c=0;else{let Z=W+1+t[te+1+t[G+1]];ae*=ae,c=ae*ae*(r[Z]*V+i[Z]*R+n[Z]*H)}return 32*(l+u+h+c)}}function mY(e){let t=new Uint8Array(512);for(let r=0;r<512/2;r++)t[r]=r;for(let r=0;r<512/2-1;r++){let i=r+~~(e()*(256-r)),n=t[r];t[r]=t[i],t[i]=n}for(let r=256;r<512;r++)t[r]=t[r-256];return t}var Zo=new va,L3e=class{constructor(e){this.weightAttribute=null;let t=e.geometry;if(!t.isBufferGeometry||t.attributes.position.itemSize!==3)throw new Error("THREE.MeshSurfaceSampler: Requires BufferGeometry triangle mesh.");t.index&&(t=t.toNonIndexed()),this.geometry=t,this.randomFunction=Math.random,this.positionAttribute=this.geometry.getAttribute("position"),this.distribution=null}build(){let e=this.positionAttribute,t=new Float32Array(e.count/3);for(let i=0;i<e.count;i+=3){let n=1;Zo.a.fromBufferAttribute(e,i),Zo.b.fromBufferAttribute(e,i+1),Zo.c.fromBufferAttribute(e,i+2),n*=Zo.getArea(),t[i/3]=n}this.distribution=new Float32Array(e.count/3);let r=0;for(let i=0;i<t.length;i++)r+=t[i],this.distribution[i]=r;return this}setRandomGenerator(e){return this.randomFunction=e,this}sample(e,t){if(this.distribution){let r=this.distribution[this.distribution.length-1],i=this.binarySearch(this.randomFunction()*r);return this.sampleFace(i,e,t)}}binarySearch(e){if(!this.distribution)return 0;let t=this.distribution,r=0,i=t.length-1,n=-1;for(;r<=i;){let a=Math.ceil((r+i)/2);if(a===0||t[a-1]<=e&&t[a]>e){n=a;break}else e<t[a]?i=a-1:r=a+1}return n}sampleFace(e,t,r){let i=this.randomFunction(),n=this.randomFunction();return i+n>1&&(i=1-i,n=1-n),Zo.a.fromBufferAttribute(this.positionAttribute,e*3),Zo.b.fromBufferAttribute(this.positionAttribute,e*3+1),Zo.c.fromBufferAttribute(this.positionAttribute,e*3+2),t.set(0,0,0).addScaledVector(Zo.a,i).addScaledVector(Zo.b,n).addScaledVector(Zo.c,1-(i+n)),Zo.getNormal(r),this}},B3e=pd(e7()),N3e=new ze,z3e=new ze,F3e=new ze,_1;(e=>{function t(r){return r&&r.__isSPEObject}e.is=t})(_1||(_1={}));var hk=e=>class extends e{constructor(){super(...arguments),this.previousModelViewMatrix=new ze,this.copyPreviousMatrix=!0,this.hiddenMatrix=new ze,this.matrixWorldRigid=new ze,this.shearScale=new ze,this.shearScaleInv=new ze}get __isSPEObject(){return!0}isDescendantOf(t){t instanceof Xr&&(t=t.uuid);let r=this;for(;r.parent;){if(r.parent.uuid===t)return!0;r=r.parent}return!1}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.parent===null?this.matrixWorld.multiplyMatrices(this.hiddenMatrix,this.matrix):(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);for(let r of this.children)r.updateMatrixWorld(t)}updateWorldMatrix(t,r){let i=this.parent;if(t&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.multiplyMatrices(this.hiddenMatrix,this.matrix):(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,this.matrix)),r)for(let n of this.children)n.updateWorldMatrix(!1,!0)}traverseChildren(t,r=0){for(let i of this.children)_1.is(i)&&i.traverseObject(t,r+1)}traverseObject(t,r=0){if(t(this,r)!==!0)for(let i of this.children)_1.is(i)&&i.traverseObject(t,r+1)}updateMatrixWorldSVD(){let t=this.matrixWorld.elements,r=[[t[0],t[4],t[8]],[t[1],t[5],t[9]],[t[2],t[6],t[10]]],{u:i,v:n,q:a}=(0,B3e.SVD)(r),s=N3e.set(i[0][0],i[0][1],i[0][2],0,i[1][0],i[1][1],i[1][2],0,i[2][0],i[2][1],i[2][2],0,0,0,0,1),o=z3e.set(n[0][0],n[0][1],n[0][2],0,n[1][0],n[1][1],n[1][2],0,n[2][0],n[2][1],n[2][2],0,0,0,0,1),l=F3e.copy(o).transpose();this.shearScale.makeScale(a[0],a[1],a[2]).multiply(l).premultiply(o),this.shearScaleInv.copy(this.shearScale).invert(),this.matrixWorldRigid.multiplyMatrices(s,l).copyPosition(this.matrixWorld),a.every(u=>Math.abs(a[0]-u)<.01)?this.hasNonUniformScale=!1:this.hasNonUniformScale=!0}attach(t,r){this.updateWorldMatrix(!0,!1);let i=new ze().copy(this.matrixWorld).invert();return t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),i.multiply(t.parent.matrixWorld)),"hiddenMatrix"in t&&t.hiddenMatrix instanceof ze?t.hiddenMatrix.premultiply(i):t.applyMatrix4(i),t.updateWorldMatrix(!1,!1),this.add(t),r!==void 0&&(this.children.pop(),this.children.splice(r,0,t)),this}copy(t,r=!1){return super.copy(t,r),this.hasNonUniformScale=t.hasNonUniformScale,this}onAfterRender(t,r,i,n,a,s){this.copyPreviousMatrix&&this.previousModelViewMatrix.copy(this.modelViewMatrix)}},U3e=class extends hk(Xr){},j3e=e=>e.type==="Mesh",ya=class extends U3e{constructor(e){super(),this.object=e,this.matrixAutoUpdate=!1,this.hasNonUniformScale=e.hasNonUniformScale}raycast(e,t){}expand(){let e=0,t=this.object.entityChildren(e);for(;t;){let r=this.children[e];(r==null?void 0:r.object)!==t&&(r&&this.remove(r),r=new ya(t),this.add(r),this.children.splice(e,0,this.children.pop()),r.matrixWorldNeedsUpdate=!0,r.matrixAutoUpdate=!1,r.matrix=t.matrix,r.hiddenMatrix=t.hiddenMatrix),r.expand(),e+=1,t=this.object.entityChildren(e)}for(;this.children.length>e;)this.remove(this.children[e])}get visible(){var e;return this.playModeVisible!==void 0?this.playModeVisible:this.object.visible||this.object.dataPatched.visible&&((e=this.object.dataPatched.cloner)==null?void 0:e.hideBase)===!0}set visible(e){}get castShadow(){return this.object.castShadow}set castShadow(e){}get receiveShadow(){return this.object.receiveShadow}set receiveShadow(e){}get isMesh(){return j3e(this.object)}get isLight(){return this.object.isLight}get layers(){return this.object.layers}set layers(e){}get isCamera(){return!1}get geometry(){if(this.object.geometry)return this.object.geometry}get material(){if(this.object.material)return this.object.material}},$d=new T,Yd=new T,ug=new ze,gY=[new T(-1,1,1),new T(-1,-1,1),new T(1,-1,1),new T(1,1,1),new T(-1,1,-1),new T(-1,-1,-1),new T(1,-1,-1),new T(1,1,-1)],V3e=[[0,3],[1,2],[5,6],[4,7],[0,1],[3,2],[7,6],[4,5],[0,4],[1,5],[2,6],[3,7]],H3e=[[0,2],[7,5],[4,1],[3,6],[4,3],[1,6]],gU=(e,t,r)=>{e.updateEntityBoxSize($d,Yd),ug.copy(t).multiply(e.matrixWorld),Yd.x===0&&Yd.y===0&&Yd.z===0?r.push(new T($d.x,$d.y,$d.z).applyMatrix4(ug)):gY.forEach(i=>{r.push(i.clone().multiply(Yd).add($d).applyMatrix4(ug))})},vU=class extends Qi{constructor(){super(...arguments),this.matrix=new ze,this.vertices=[],this.faces=[],this.edges=[],this.centerEdges=[]}copy(e){return super.copy(e),this.matrix.copy(e.matrix),this.vertices=e.vertices.map(t=>t.clone()),this.faces=e.faces.map(t=>t.clone()),this.edges=e.edges.map(t=>t.clone()),this.centerEdges=e.centerEdges.map(t=>t.clone()),this}setFromObjectSize(e,t=!1){e.updateWorldMatrix(!1,t),this.makeEmpty(),this.matrix.copy(e.matrixWorld);let r=new ze().copy(e.matrixWorld).invert();return this.expandByObjectSize(e,r,t)}expandByObjectSize(e,t,r=!1){let i=[];return r===!0?e.traverseEntity(n=>{if(n.visible||n.cloner&&n.data.visible){if(!("geometry"in n)){i.push(new T);return}gU(n,t,i)}}):gU(e,t,i),this.setFromPoints(i)}getCenter(e){return e=super.getCenter(e),e.applyMatrix4(this.matrix),e}getPositionToCenter(e){return e=super.getCenter(e),e.applyMatrix4(ug.copy(this.matrix).setPosition(0,0,0)),e}computeVertices(){this.getSize(Yd).multiplyScalar(.5),this.getCenter($d),ug.copy(this.matrix).setPosition($d),this.vertices=gY.map(e=>e.clone().multiply(Yd).applyMatrix4(ug))}computeEdges(){this.vertices.length>0&&this.computeVertices(),this.edges=V3e.map(([e,t])=>new Lo(this.vertices[e],this.vertices[t])),this.centerEdges=this.edges.map(e=>e.getCenter(new T))}computeFaces(){this.vertices.length>0&&this.computeVertices(),this.faces=H3e.map(([e,t])=>this.vertices[e].clone().add(this.vertices[t]).multiplyScalar(.5))}},Ah={Cloner:()=>{},changeEntityProptotype:()=>{},createEntity:()=>{}},G3e=class extends T7{constructor(){super()}getPoints(e=12){let t=[],r,i=this.getCurveLengths(),n=i[i.length-1]/i.length;for(let a=0,s=this.curves;a<s.length;a++){let o=s[a],l=a===0?i[a]:i[a]-i[a-1],u=Math.ceil(e*l/n),h=o.getPoints(u);for(let c=0;c<h.length;c++){let d=h[c];r&&r.equals(d)||(t.push(d),r=d)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}},u3=.001;function c3(e,t,r){return t.clone().sub(e).cross(t.clone().sub(r)).length()<=u3}function _A(e,t){let r=new T(...e.position),i=new T(...e.controlNext.position),n=new T(...t.controlPrevious.position),a=new T(...t.position);return c3(r,i,a)&&c3(r,n,a)}function vY(e){let t=e.points.map(h=>new T(...h.data.position)),r=[e.points[0]],i=new T(...r[0].data.position);for(let h=0;h<e.points.length-1;h++)c3(i,t[h],t[h+1])||(r.push(e.points[h]),i=t[h]);r.push(e.points[e.points.length-1]);let n=e.isClosed,a=r.length-(n?0:1),s=r.length,o=[];for(let h=0;h<s;h++){let c=r[h].data,d=new T(...c.position),f=new T(...c.controlPrevious.position),m=new T(...c.controlNext.position),p={position:d,baseRoundness:c.roundness,controlPrevious:f,controlNext:m};if(c.roundness===0||!e.isClosed&&(h===0||h===s-1)){o[h]={...p,removedLength:0};continue}let g=n&&h==0?s-1:h-1,v=n&&h==s-1?0:h+1,y=r[g].data,x=r[v].data,b=new T(...y.position),_=new T(...x.position),w=b.clone().sub(d).normalize(),E=_.clone().sub(d).normalize();Object.assign(p,{prevDir:w,nextDir:E});let S=_A(y,c),C=_A(c,x);if(!S||!C)o[h]={...p,removedLength:0};else{let M=w.clone().add(E).normalize(),P=M.clone().cross(w).length()/w.dot(M);o[h]={...p,tan:P,removedLength:c.roundness/P}}}for(let h=0;h<a;h++){let c=h,d=n&&h===s-1?0:h+1,f=o[c],m=o[d];if(f.removedLength!==0||m.removedLength!==0){let p=f.position.distanceTo(m.position);f.removedLength=Math.min(f.removedLength,p/2),m.removedLength=Math.min(m.removedLength,p/2)}}let l=[];for(let h=0;h<a;h++){let c=h,d=n&&h===s-1?0:h+1,f=o[c],m=o[d],p=null;if(!_A(r[c].data,r[d].data))f.position.distanceTo(m.position)>u3&&(p=new Hw(f.position,f.controlNext,m.controlPrevious,m.position));else{let g=f.position.clone(),v=m.position.clone();(f.removedLength!==0||m.removedLength!==0)&&(f.nextDir&&g.add(f.nextDir.clone().setLength(f.removedLength)),m.prevDir&&v.add(m.prevDir.clone().setLength(m.removedLength))),g.distanceTo(v)>u3&&(p=new Hw(g,g.clone().lerp(v,.3),v.clone().lerp(g,.3),v))}l[2*h+1]=p}for(let h=0;h<s;h++){let c=o[h];if(c.removedLength===0){l[2*h]=null;continue}let d=c.position,f=c.prevDir.clone().multiplyScalar(c.removedLength).add(d),m=c.nextDir.clone().multiplyScalar(c.removedLength).add(d),p=c.tan*c.removedLength,g=c.prevDir.clone().add(c.nextDir).normalize(),v=f.clone().lerp(m,.5),y=f.distanceTo(m)/2,x=g.clone().multiplyScalar(Math.sqrt(Math.pow(p,2)-Math.pow(y,2))).add(v),b=g.clone().multiplyScalar(-p).add(x),_=d.distanceTo(b)/d.distanceTo(v),w=c.prevDir.clone().multiplyScalar(_*d.distanceTo(f)).add(d),E=w.clone().lerp(b,2),S=f.clone().lerp(w,4/3),C=m.clone().lerp(E,4/3);l[2*h]=new Hw(f,S,C,m)}let u=new G3e;return l.forEach(h=>{h&&u.add(h)}),u}var pr;(e=>{function t(r){return r&&r.__isEntity}e.is=t})(pr||(pr={}));var ic=e=>pr.is(e),W3e={type:"completeState",isfromEntity:!0},$3e=["x","y","z"],SA=new T,Y3e=new T().set(0,1,0),dk=e=>class extends hk(e){constructor(){super(...arguments),this.raycastLock=!1,this.scaleLock=!1,this.disposed=!1,this.stateSelection=null,this.destroyedInAction=!1,this.instances=[],this.prevState=null,this.currentState=null,this.reversibleToState=null,this.currentTransitionEvent=null,this.previousAction=null,this._singleBBox=new vU,this._recursiveBBox=new vU,this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0,this._needApplyPathSnapping=!0,this.attachedPaths=new Set}get __isEntity(){return!0}entityChildren(t){let r=this.children[t];if(pr.is(r))return r}entityChildrenCount(){let t=this.children.length;for(;t--;)if(pr.is(this.children[t]))return t+1;return 0}get isConcreteEntity(){return typeof this.identity=="string"}get isVirtualEntity(){return typeof this.identity!="string"}get isInstanceRoot(){return this.isConcreteEntity&&this.data.type==="Instance"}nearestInstanceSelfOrParent(){let t=this;for(;t.data.type!=="Instance";){let r=t.parent;if(pr.is(r))t=r;else return}return t}forInstancesRec(t){this.instances.forEach(r=>{r.disposed||t(r),r.forInstancesRec(t)})}super_Entity(t,r){typeof t=="string"&&(this.uuid=t),this.identity=t,this.data=r,this.matrixAutoUpdate=!1,this.dataPatched=this.data}changeSelectedState(t,r,i=!1){if(!(this.data.states.length===0&&!i)){for(let n of this.data.states)nf.toOps(this.data,n.data).forEach(a=>{let s=AD.replaceProps(a,this.data);this.dataPatched=this.data,this.updateByPatchedOp(s,this.data,r)});if(t!==null){let n=this.data.states.data(t);n&&(this.dataPatched=nf.patch(this.data,n),nf.toOps(this.data,n).forEach(a=>{this.updateByPatchedOp(a,this.dataPatched,r)}))}i&&this.updateTransformState(this.dataPatched,r),this.stateSelection=t,this.updatePathSnapping(this.dataPatched.pathSnapping)}}get singleBBox(){return this.singleBBoxNeedsUpdate&&(this.singleBBoxNeedsUpdate=!1,this._singleBBox.setFromObjectSize(this,!1),this._singleBBox.computeVertices(),this._singleBBox.computeEdges(),this._singleBBox.computeFaces()),this._singleBBox}get recursiveBBox(){return this.recursiveBBoxNeedsUpdate&&(this.recursiveBBoxNeedsUpdate=!1,this._recursiveBBox.setFromObjectSize(this,!0),this._recursiveBBox.computeVertices(),this._recursiveBBox.computeEdges(),this._recursiveBBox.computeFaces()),this._recursiveBBox}updateEntityBoxSize(t,r){t.setScalar(0),r.setScalar(0)}resetBBoxNeedsUpdateSelf(){this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0}resetBBoxNeedsUpdate(){this.resetBBoxNeedsUpdateSelf(),this.traverseAncestors(t=>{ic(t)&&t.resetBBoxNeedsUpdateSelf()}),this.traverseEntity(t=>{t.resetBBoxNeedsUpdateSelf()})}find(t){let r;return this.traverseEntity(i=>{i.uuid===t&&(r=i)}),r}traverseSortNextHelper(){let t=this.parent;if(t){let r=t.children,i=r.indexOf(this)+1;if(pr.is(r[i]))return r[i];if(pr.is(t))return t.traverseSortNextHelper()}}sortNext(){let t=this.children;return this.children.length>0&&pr.is(this.children[0])?t[0]:this.traverseSortNextHelper()}goUp(t){let r=this;for(;t>0&&r!==null;)r=r.parent,t-=1;return r}hasAnccestorOrSelf(t){return this===t||this.hasAnccestor(t)}hasAnccestor(t){let r=this.parent;for(;r;){if(t===r)return!0;r=r.parent}return!1}countToAccestor(t){let r=0,i=this;for(;i!==t;){if(i===null)return-1;i=i.parent,r+=1}return r}forEachEntity(t){for(let r of this.children)ic(r)&&t(r)}traverseEntityAncestors(t){this.traverseAncestors(r=>{pr.is(r)&&t(r)})}traverseConcreteEntity(t,r=0){if(t(this,r)!==!0)for(let i of this.children)ic(i)&&i.isConcreteEntity&&i.traverseEntity(t,r+1)}traverseEntity(t,r=0){if(t(this,r)!==!0)for(let i of this.children)ic(i)&&i.traverseEntity(t,r+1)}traverseVisibleEntity(t){t(this);for(let r of this.children)ic(r)&&r.visible&&r.traverseVisibleEntity(t)}updateMatrix(){super.updateMatrix(),this.cloner&&this.cloner.onObjUpdateMatrix(),this.dispatchEvent({type:"updateMatrix"})}copy(t,r=!1){return super.copy(t,r),this.dataPatched=t.dataPatched,this.raycastLock=t.raycastLock,this.scaleLock=t.scaleLock,this.hiddenMatrix.copy(t.hiddenMatrix),this}hasEntityChild(){return this.children.some(t=>ic(t))}isAncestorOf(t){if(this.uuid===t)return!1;let r=!1;return this.traverseEntity(i=>{i.uuid===t&&(r=!0)}),r}toObjectTransformState(t=[]){this.updateWorldMatrix(!0,!1);let r={position:this.position.toArray(),rotation:[this.rotation.x*bt.RAD2DEG,this.rotation.y*bt.RAD2DEG,this.rotation.z*bt.RAD2DEG],scale:this.scale.toArray(),hiddenMatrix:this.hiddenMatrix.toArray()};return CD(r,t)}getTransformValues(t,r,i){return r[t].map((n,a)=>(i==null?void 0:i.shared.getVariable(n,[this.uuid,t,$3e[a]]))??n)}updateTransformState(t,r){let i=!1;return t.position&&(this.position.fromArray(this.getTransformValues("position",t,r)),i=!0),t.rotation&&(SA.fromArray(this.getTransformValues("rotation",t,r)).multiplyScalar(bt.DEG2RAD),this.rotation.setFromVector3(SA),i=!0),t.scale&&(this.scale.fromArray(this.getTransformValues("scale",t,r)),i=!0),t.hiddenMatrix!==void 0&&(i=!0,this.hiddenMatrix.fromArray(t.hiddenMatrix??Hg.identity)),i&&(this.updateMatrix(),this.resetBBoxNeedsUpdate(),this.invalidateClonerTransform(this),this.traverseEntityAncestors(n=>{n.invalidateClonerTransform(this)})),t.position&&t.rotation&&t.scale&&t.hiddenMatrix!==void 0&&this.updateWorldMatrix(!1,!0),i}onVariableUpdate(t=!1){if(t){this.resetBBoxNeedsUpdate();return}this.updateMatrix(),this.resetBBoxNeedsUpdate(),this.invalidateClonerTransform(this),this.traverseEntityAncestors(r=>{r.invalidateClonerTransform(this)})}dispose(){this.disposed=!0,this.cloner&&(this.cloner.removeFromParent(),this.cloner=void 0)}disposeChildrenRecursively(){for(let t of this.children)pr.is(t)&&t.disposeRecursively()}disposeRecursively(){this.dispose(),this.children.forEach(t=>{pr.is(t)&&t.disposeRecursively()})}toState(t=[]){let r={name:this.name,visible:this.visible,raycastLock:this.raycastLock,...this.toObjectTransformState(t)};return CD(r,t)}updateByObjUpdateOp(t,r){t!==void 0&&this.updateByOp({type:0,props:t,path:[]},{...this.data,...t},r,!1)}updateByOp(t,r,i,n){let a=this.data;this.data=r;let s=t,o=Ao(t.path,["states","*"]);if(o!==null){if(t.type===0){let[l]=o;if((this==null?void 0:this.stateSelection)===l){let u={...t.props};if(delete u.name,Object.values(t.props).some(h=>h===void 0)){let h=this.data;if(h!==void 0){let c=vs.zoom(h,t.path.slice(2));if(c)for(let d in t.props)t.props[d]===void 0&&d in c&&(u[d]=c[d])}}s={...t,props:u,path:t.path.slice(2)}}}}else if(t.type===0){let l=this.stateSelection?this.data.states.data(this.stateSelection):void 0;if(l!==void 0){if(t.props.name!==void 0&&l.name){let{name:h,...c}=l;l=c}if(t.props.material!==void 0&&"material"in l){let{material:h,...c}=l;l=c}let u=vs.removeOverridden(t.path,t.props,l);s={...t,props:u}}}if(this.updateByPatchedOpBase(s,nf.patch(this.data,this.stateSelection?this.data.states.data(this.stateSelection):void 0),i),Ao(t.path,["overrides"])){let l=[],u=[...t.path];for(l.push(u[1]),u.splice(0,2);u.length>0&&u[0]==="descendants";)l.push(u[1]),u.splice(0,2);if(l[l.length-1]===void 0){if(t.type===0)for(let h of Object.keys(t.props)){l[l.length-1]=h;let c=i.scene.findInstance([this.uuid,...l]);c&&(c.overrideData=t.props[h],c.updateState(Gh.apply(c.component.data,c.overrideData),i))}}else{let h=i.scene.findInstance([this.uuid,...l]);if(h){let c=vs.zoom(h.component.data,u);if(t={...t,path:u},t.type===0){let d=t.props;if(c)for(let[f,m]of Object.entries(t.props))m===void 0&&(d===t.props&&(d={...t.props}),d[f]=c[f]);t={...t,props:d}}h.overrideData=zS.resolve(r.overrides,l),h.updateByOp(t,qa.applySimple(h.data,t),i,!1)}}}else if(this.instances.length>0){let l;if(t.path.length===0&&t.type===0){let u;for(let h of Ch.rootOverrideProps)h in t.props&&(u===void 0&&(u={}),u[h]=t.props[h]);u&&(l={...t,props:u})}else for(let u of Ch.rootOverrideProps)if(Ao(t.path,[u])){l=t;break}l!==void 0&&this.instances.forEach(u=>{if(u.isInstanceRoot){let h=Gh.filterOp(u.overrideData,l);h&&u.updateByOp(h,qa.applySimple(u.data,h),i,!0)}}),this.instances.forEach(u=>{if(!u.isInstanceRoot){let h=Gh.filterOp(u.overrideData,t);if(h){let c;a===u.data&&t===h?c=r:c=qa.applySimple(u.data,h),u.updateByOp(h,c,i,!0)}}})}}updateByPatchedOpBase(t,r,i){if(this.dataPatched=r,t.path.length===0&&t.type===0)t.props.type!==void 0&&!Hf.is(t.props.type)&&Ah.changeEntityProptotype(this,r,i);else if(t.path.length===1&&t.path[0]==="geometry"&&t.type===0&&"type"in t.props){Ah.changeEntityProptotype(this,r,i);for(let n of this.children)pr.is(n)&&n.updateVisible()}this.updateByPatchedOp(t,r,i)}updateByPatchedOp(t,r,i){if(t.path.length===0&&t.type===0&&this.updateState(t.props,i),Ao(t.path,["pathSnapping"])!==null&&this.updatePathSnapping(r.pathSnapping),Ao(t.path,["cloner"])!==null){let n=qa.drop(t,1);n.path.length===0&&n.type===0&&n.props.disabled===!0?this.setFromClonerState(null,i):this.cloner?this.cloner.updateState(r.cloner,i.scene):(this.setFromClonerState(r.cloner,i),this.expandCloner(i.scene)),this.updateVisible()}}updatePathSnapping(t){this._updatedPathSnapping=t,this._needApplyPathSnapping=!0}get updatedPathSnapping(){return this._updatedPathSnapping}applyPathSnapping(t){var m,p,g,v,y;let r=((m=this._updatedPathSnapping)==null?void 0:m.pathId)??this.dataPatched.pathSnapping.pathId,i=((p=this._updatedPathSnapping)==null?void 0:p.slide)??this.dataPatched.pathSnapping.slide??0,n=((g=this._updatedPathSnapping)==null?void 0:g.offset)??this.dataPatched.pathSnapping.offset,a=((v=this._updatedPathSnapping)==null?void 0:v.orientation)??this.dataPatched.pathSnapping.orientation;if(r===null)return;let s=t.find(r);if(!s||this._needApplyPathSnapping===!1)return;this._needApplyPathSnapping=!1;let o=s.data;if(o.geometry.path.points.length<=1)return;let l=vY(o.geometry.path),u=(i+n)%1;i+n===1&&u===0&&(u=1);let h=l.getPointAt(u),c=this.parent?(y=this.parent)==null?void 0:y.matrixWorld:new ze;s.updateMatrixWorld();let d=new ze().multiplyMatrices(c.clone().invert(),s.matrixWorld);h.applyMatrix4(d);let f={position:h.toArray(),rotation:o.rotation};if(a==="tangential"){let x=new ze().extractRotation(s.matrixWorld),b=l.getTangentAt(u).applyMatrix4(x).add(h),_=new ze().lookAt(h,b,Y3e),w=SA.setFromEuler(new Un().setFromRotationMatrix(_)).multiplyScalar(bt.RAD2DEG);f={...f,rotation:w.toArray()}}this.updateTransformState(f),this.traverseEntity(x=>{x._cameraType&&x.dispatchEvent(W3e)})}updateVisible(){var t;this.visible=this.dataPatched.visible&&(!this.dataPatched.cloner||(this.dataPatched.cloner.disabled??!1)||((t=this.dataPatched.cloner)==null?void 0:t.hideBase)!==!0)}updateState_Entity(t,r){t.name!==void 0&&(this.name=t.name),t.raycastLock!==void 0&&(this.raycastLock=t.raycastLock),t.visible!==void 0&&(this.updateVisible(),this.resetBBoxNeedsUpdate()),r&&"cloner"in t&&t.cloner!==void 0&&(this.setFromClonerState(t.cloner,r),this.updateVisible()),this.updateTransformState(t,r)}get attachedSurfaceCloners(){return this.children.filter(t=>t instanceof Ah.Cloner&&t.parameters.type==="toObject")}setFromClonerState(t,r){this.disposed||(t===null||t.disabled?(this.cloner&&this.cloner.removeFromParent(),this.cloner=void 0):this.cloner===void 0?(this.cloner=new Ah.Cloner(this,t),r.scene.addPendingExpandCloner(this)):this.cloner.updateState(t,r.scene))}expandCloner(t){!this.disposed&&this.cloner&&this.cloner.expandClones(t)}invalidateClonerTransform(t){this.cloner&&this.cloner.invalidateTransform(t)}},yY=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,radialSegments:64,heightSegments:1,openEnded:!1,thetaStart:0,thetaLength:360,cornerRadius:8,cornerSegments:8,hollow:0},e.parameters);r.thetaLength=bt.clamp(r.thetaLength,0,360);let i=r.width/2,n=r.radiusTop??i,a=r.radiusBottom??i;return n===a?(n=i,a=i):n>a?(n=i,a=a*i/n):(n=n*i/a,a=i),{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??r.width),radiusTop:n,radiusBottom:a})}}static build(e){let{width:t,depth:r,height:i,radialSegments:n,heightSegments:a,openEnded:s,thetaStart:o,thetaLength:l,radiusTop:u,radiusBottom:h,cornerRadius:c,cornerSegments:d,hollow:f}=e.parameters,m;return l===0?(m=new wt,m.setAttribute("position",new it([],3))):c||f?m=new xY(u,h,i,n,a,s,o,l*Math.PI/180,c,c,d,f):m=new PR(u,h,i,n,a,s,o,l*Math.PI/180),m.scale(1,1,r/t),Object.assign(m,{userData:{...e,type:"CylinderGeometry"}})}};function qc(e,t,r){r.x=e.x*t.x,r.y=e.y,r.z=e.x*t.y}function yU(e){return new re(e.y,-e.x)}var xY=class extends wt{constructor(e,t,r,i,n,a,s,o,l,u,h,c,d=!1){super(),this.type="RoundedCylinderBufferGeometry",e=e!==void 0?e:1,t=t!==void 0?t:1,r=r||1,i=Math.floor(i)||8,n=Math.floor(n)||1,a=a!==void 0?a:!1,s=s!==void 0?s:0,o=o!==void 0?o:Math.PI*2,a&&(l=0,u=0);let f=[],m=[],p=[],g=[],v=0,y=r/2,x=new T,b=new T;d&&e==0&&(e=l),d&&t==0&&(t=u);let _=new re(e,y),w=new re(t,-y),E=null,S=null,C=null,M=null,P=_.clone().sub(w),I=0,k=0,L=0;c>0&&(I=Math.min(e,t)*(1-c),k=e-I,L=t-I);let O=_.clone();O.x-=I;let F=Math.PI-P.angle(),z=P.angle(),B=Math.tan(z/2),V=Math.tan(F/2),R=B+V,H=c?R:V,W=c?R:B;if(l=Math.min(l,(e-k)/H,P.length()/R),u=Math.min(u,(t-L)/W,P.length()/R),l>0){let ae=l/B;E=_.clone().sub(new re(ae,l)),c&&(C=E.clone(),C.x-=I-R*l),_.sub(P.clone().setLength(ae))}if(u>0){let ae=u/V;S=w.clone().sub(new re(ae,-u)),w.add(P.clone().setLength(ae)),c&&(M=S.clone(),M.x-=I-R*u,O.sub(P.clone().setLength(ae)))}P=_.clone().sub(w);let te=P.length()<.5,G=[];for(let ae=0;ae<=i;ae++){let Z=[],he=ae/i,ge=he*o+s,xe=new re(Math.sin(ge),Math.cos(ge));M&&S?(ie(Z,he,xe,F,u,M,-1,!0),ie(Z,he,xe,z,u,S,-1,!1)):S?(q(Z,xe,S.x,0,-1),ie(Z,he,xe,z,u,S,-1,!1)):a||q(Z,xe,t,L,-1);let ye=yU(P).normalize();if(qc(ye,xe,x),!te)for(let Ne=0;Ne<=n;Ne++){let Re=Ne/n,qe=P.clone().multiplyScalar(Re).add(w);qc(qe,xe,b),m.push(b.x,b.y,b.z),p.push(x.x,x.y,x.z),g.push(he,.5+b.y/r),Z.push(v++)}if(C&&E?(ie(Z,he,xe,F,l,E,1,!1),ie(Z,he,xe,z,l,C,1,!0)):E?(ie(Z,he,xe,F,l,E,1,!1),q(Z,xe,E.x,0,1)):a||q(Z,xe,e,k,1),c&&!te){let Ne=yU(P).multiplyScalar(-1).normalize();qc(Ne,xe,x);for(let Re=0;Re<=n;Re++){let qe=Re/n,se=P.clone().multiplyScalar(-qe).add(O);qc(se,xe,b),m.push(b.x,b.y,b.z),p.push(x.x,x.y,x.z),g.push(he,.5+b.y/r),Z.push(v++)}}c&&!a&&Z.push(Z[0]),G.push(Z)}for(let ae=0;ae<G.length-1;ae++)for(let Z=0;Z<G[0].length-1;Z++){if(a&&c&&Z==n)continue;let he=G[ae][Z],ge=G[ae+1][Z],xe=G[ae+1][Z+1],ye=G[ae][Z+1],Ne=m[xe*3+0],Re=m[xe*3+2];f.push(he,ge,ye),(Ne!=0||Re!=0)&&f.push(ge,xe,ye)}o<Math.PI*2&&(le(-1,G[0],s),le(1,G[G.length-1],s+o)),this.setIndex(f),this.setAttribute("position",new it(m,3)),this.setAttribute("normal",new it(p,3)),this.setAttribute("uv",new it(g,2));function ie(ae,Z,he,ge,xe,ye,Ne,Re){for(let qe=0;qe<h+1;qe++){let se=qe/h,ke=Ne<0?se:1-se;Re&&(ke-=1),ke*=ge;let Be=new re(Math.sin(ke),Math.cos(ke)*Ne),at=Be.clone().multiplyScalar(xe).add(ye);qc(at,he,b),m.push(b.x,b.y,b.z),qc(Be,he,x),p.push(x.x,x.y,x.z),g.push(Z,.5+b.y/r),ae.push(v++)}}function q(ae,Z,he,ge,xe){let ye=new T,Ne=new re,Re=[he,ge];xe<0&&Re.reverse();for(let qe of Re)Ne.set(qe,y*xe),qc(Ne,Z,ye),m.push(ye.x,ye.y,ye.z),p.push(0,xe,0),g.push(.5,.5),ae.push(v++)}function le(ae,Z,he){let ge=new re(Math.sin(he),Math.cos(he)),xe=new re(-Math.cos(he),Math.sin(he)),ye=new T,Ne=ae<0?(se,ke,Be)=>f.push(se,ke,Be):(se,ke,Be)=>f.push(se,Be,ke),Re=new re((e+t+k+L)/4,0);qc(Re,ge,ye),m.push(ye.x,ye.y,ye.z),p.push(xe.x,0,xe.y),g.push(.5,.5);let qe=v++;for(let se of Z){let ke=m.slice(se*3,se*3+3);m.push(...ke),p.push(xe.x,0,xe.y);let Be=g.slice(se*2,se*2+2);g.push(...Be),v++}for(let se=qe+1;se<v-1;se++)Ne(qe,se,se+1);Ne(qe,v-1,qe+1)}}},q3e=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,radialSegments:32,heightSegments:8,openEnded:!1,thetaStart:0,thetaLength:360,cornerRadiusTop:8,cornerRadiusBottom:8,cornerSegments:8},e.parameters);return r.thetaLength=bt.clamp(r.thetaLength,0,360),{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??r.width)})}}static build(e){let{width:t,depth:r,height:i,radialSegments:n,heightSegments:a,openEnded:s,thetaStart:o,thetaLength:l,cornerRadiusTop:u,cornerRadiusBottom:h,cornerSegments:c}=e.parameters,d;return l===0?(d=new wt,d.setAttribute("position",new it([],3))):u>0||h>0||l<360?d=new xY(0,t/2,i,n,a,s,o,l*Math.PI/180,u,h,c,0,!0):d=new D7(t/2,i,n,a,s),d.scale(1,1,r/t),Object.assign(d,{userData:{...e,type:"ConeGeometry"}})}},X3e=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,widthSegments:1,heightSegments:1,depthSegments:1,cornerRadius:8,cornerSegments:8},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??r.width)})}}static build(e){let{width:t,height:r,depth:i,widthSegments:n,heightSegments:a,depthSegments:s,cornerRadius:o,cornerSegments:l}=e.parameters,u;return o==0?u=new Eu(t,r,i,n,a,s):u=new Q3e(t,r,i,n,a,s,o,l),Object.assign(u,{userData:{...e,type:"CubeGeometry"}})}},EA=Math.PI/2,Q3e=class extends wt{constructor(e=1,t=1,r=1,i=1,n=1,a=1,s=0,o=4){super(),this.type="BoxGeometry";let l=this;i=Math.floor(i),n=Math.floor(n),a=Math.floor(a),o=Math.floor(o),s=Math.min(s,e/2,t/2,r/2);let u=[],h=[],c=[],d=[],f=0,m=0;p("z","y","x",-1,-1,r,t,e,a,n,0),p("z","y","x",1,-1,r,t,-e,a,n,1),p("x","z","y",1,1,e,r,t,i,a,2),p("x","z","y",1,-1,e,r,-t,i,a,3),p("x","y","z",1,-1,e,t,r,i,n,4),p("x","y","z",-1,-1,e,t,-r,i,n,5),s>0&&(g("z","y","x",-1,-1,1,r,t,e,a,0),g("z","y","x",1,-1,-1,r,t,e,a,1),g("z","y","x",-1,1,-1,r,t,e,a,1),g("z","y","x",1,1,1,r,t,e,a,0),g("x","y","z",-1,-1,-1,e,t,r,i,0),g("x","y","z",1,-1,1,e,t,r,i,1),g("x","y","z",-1,1,1,e,t,r,i,0),g("x","y","z",1,1,-1,e,t,r,i,1),g("y","x","z",-1,-1,1,t,e,r,n,0),g("y","x","z",1,-1,-1,t,e,r,n,1),g("y","x","z",1,1,1,t,e,r,n,1),g("y","x","z",-1,1,-1,t,e,r,n,0),v(1,1,1),v(-1,1,1),v(1,-1,1),v(-1,-1,1),v(1,1,-1),v(-1,1,-1),v(1,-1,-1),v(-1,-1,-1)),this.setIndex(u),this.setAttribute("position",new it(h,3)),this.setAttribute("normal",new it(c,3)),this.setAttribute("uv",new it(d,2));function p(y,x,b,_,w,E,S,C,M,P,I){let k=(E-2*s)/M,L=(S-2*s)/P,O=E/2-s,F=S/2-s,z=C/2,B=M+1,V=P+1,R=0,H=0,W=new T;for(let te=0;te<V;te++){let G=te*L-F;for(let ie=0;ie<B;ie++){let q=ie*k-O;W[y]=q*_,W[x]=G*w,W[b]=z,h.push(W.x,W.y,W.z),W[y]=0,W[x]=0,W[b]=C>0?1:-1,c.push(W.x,W.y,W.z),d.push(ie/M),d.push(1-te/P),R+=1}}for(let te=0;te<P;te++)for(let G=0;G<M;G++){let ie=f+G+B*te,q=f+G+B*(te+1),le=f+(G+1)+B*(te+1),ae=f+(G+1)+B*te;u.push(ie,q,ae),u.push(q,le,ae),H+=6}l.addGroup(m,H,I),m+=H,f+=R}function g(y,x,b,_,w,E,S,C,M,P,I){let k=(S-2*s)/P,L=S/2-s,O=C/2-s,F=M/2,z=P+1,B=0,V=0,R=new T,H=new T;for(let W=0;W<o+1;W++){let te=W/o*EA,G=Math.sin(te)*s,ie=(1-Math.cos(te))*s,q=Math.sin(te),le=Math.cos(te);R[x]=(O+G)*w,R[b]=(F-ie)*E,H[y]=0,H[x]=q*Math.sign(R[x]),H[b]=le*Math.sign(R[b]);for(let ae=0;ae<z;ae++){let Z=ae*k-L;R[y]=Z*_,h.push(R.x,R.y,R.z),c.push(H.x,H.y,H.z),d.push(ae/P),d.push(0),B+=1}}for(let W=0;W<o;W++)for(let te=0;te<P;te++){let G=f+te+z*W,ie=f+te+z*(W+1),q=f+(te+1)+z*(W+1),le=f+(te+1)+z*W;u.push(G,ie,le),u.push(ie,q,le),V+=6}l.addGroup(m,V,I),m+=V,f+=B}function v(y,x,b){let _=new T,w=new T(e/2,t/2,r/2);w.subScalar(s);let E=[],S=y*x*b>0?(M,P,I)=>u.push(M,P,I):(M,P,I)=>u.push(M,I,P);for(let M=0;M<=o;M++){let P=[],I=EA*(1-M/o),k=Math.cos(I),L=Math.sin(I),O=0;for(let F=0;F<=M;F++){let z=Math.cos(O),B=Math.sin(O);_.x=k*z,_.y=L,_.z=k*B;let V=w.clone().addScaledVector(_,s);h.push(y*V.x,x*V.y,b*V.z),c.push(y*_.x,x*_.y,b*_.z),d.push(0,0),P.push(f++),O+=EA/M}E.push(P)}let C=E.length-1;for(let M=0;M<C;M++){let P=E[M],I=E[M+1],k=P.length-1;S(P[0],I[1],I[0]);for(let L=1;L<=k;L++)S(P[L-1],P[L],I[L]),S(P[L],I[L+1],I[L])}}}},fk=class extends wt{constructor(e=[],t=[],r="",i=1,n=.2,a=4){super(),this.type="PolyhedronGeometryRound";let s=[],o=[],l=[];u(),h(),this.setAttribute("position",new it(s,3)),this.setAttribute("normal",new it(l,3)),this.setAttribute("uv",new it(o,2));return;function u(){var z;n=Math.min(1-1e-5,n),n==0&&(a=0);let c={IcosahedronGeometry:5,DodecahedronGeometry:3,HexahedronGeometry:3,OctahedronGeometry:4,TetrahedronGeometry:3}[r],d=new T,f=d.clone(),m=new va,p=n*i,g=i-p,v=a+1,y=new T,x=(B,V)=>y.subVectors(B,V).normalize(),b=(B,V)=>Array(B).fill(void 0).map(V),_=b(e.length/3,(B,V)=>new T().fromArray(e,V*3).setLength(i)),w=[],E=1e6;for(let B=0;B<_.length;B++){let V=_[B],R=[],H,W,te,G=1e10,ie=-1;for(;(ie=t.indexOf(B,ie+1))!=-1;){let Z=ie-ie%3;H=t[Z+(ie+1)%3],W=t[Z+(ie+2)%3],te=V.distanceToSquared(_[H]),G=Math.min(G,te),R.push([H,W,te])}G+=1e-6;let q=[],le=0,ae=R.length;for(let Z=0;Z<ae;Z++){[H,W,te]=R[le];let he=((z=w[H])==null?void 0:z.includes(B))==!0;te<=G&&q.push(H+ +he*E),le=R.findIndex(ge=>ge[0]==W)}w.push(q)}let S=[];{let B=0,V=0,R,H,W=c==3;for(let te=0;te<=a;te++){R=te*(te+1)/2,H=(te+1)*(te+2)/2;for(let G=0;G<a-te;G++)[B,V]=[R+G+te+2,H+G+te+3],S.push(R,H,...W?[V,R]:[B,H],V,B),[R,H]=[B,V];S.push(R,H,R+a+2)}}let C=d.clone(),M=d.clone(),P=d.clone(),I=d.clone(),k=d.clone(),L=[],O=b(_.length,()=>b(c,()=>d.clone()));for(let B=0;B<_.length;B++){d.copy(_[B]).normalize(),C.copy(d).multiplyScalar(g);let V=w[B];for(let q=0;q<V.length;q++){let le=V[q],ae=V[(q+1)%c];m.setFromPointsAndIndices(_,B,le%E,ae%E),m.b.sub(m.a).setLength(1e10).add(m.a),m.c.sub(m.a).setLength(1e10).add(m.a),m.closestPointToPoint(C,O[B][q])}let R=[],H=[],W=[],te=new T;a==0&&[...O[B]].reduce((q,le)=>q.add(le),te).multiplyScalar(1/c);for(let q=0;q<c;q++){let le=[],ae=(q-1+c)%c,Z=O[B][ae],he=O[B][q];d.copy(Z).sub(C),f.copy(he).sub(C);let ge=C.angleTo(d),xe=d.angleTo(f),ye=Math.cos(ge)*p;a==0?M.copy(te):M.copy(C).setLength(g+ye),H.push(ye);let Ne=[M,Z,he];for(let Re=0;Re<2;Re++){let qe=Ne[Re],se=Ne[Re+1];I.subVectors(qe,C),k.subVectors(se,C),P.crossVectors(I,k).normalize();for(let ke=0;ke<v;ke++){let Be=[ge,xe][Re]*ke/v;d.copy(I).applyAxisAngle(P,Be).add(C),R.push(d.clone()),Re&&(x(d,C),le.push([ke==0?qe:d.clone(),y.clone()]))}Re&&(x(se,C),le.push([se,y.clone()]))}W.push(le)}L.push(W);let G=2*v,ie=2;for(let q=0;q<c;q++){let le=G*q,ae=G*((q+1)%c),Z=[R[le]];for(let ge=1;ge<v;ge++){I=R[le+ge],k=R[ae+ge],Z.push(I);for(let xe=1,ye=ge-ie+1;xe<=ye;xe++)d.lerpVectors(I,k,xe/(ye+1)),d.sub(C).setLength(H[q]).add(C),Z.push(d.clone());Z.push(k)}for(let ge=0;ge<v;ge++)Z.push(R[ge+v+le]);Z.push(R[ae+v]);let he=S.map(ge=>Z[ge]);s.push(...he.map(ge=>[ge.x,ge.y,ge.z]).flat()),l.push(...he.map(ge=>(x(ge,C),[y.x,y.y,y.z])).flat())}}let F=[];for(let B=0;B<w.length;B++)for(let V=0;V<c;V++){let R=w[B][V];if(R<E){let H=w[R].findIndex(G=>G%E==B),W=L[B][V],te=L[R][H];for(let G=0;G<v;G++){let ie=W[G],q=te[v-G],le=W[G+1],ae=te[v-(G+1)];[ie,q,le,le,q,ae].forEach(Z=>{s.push(Z[0].x,Z[0].y,Z[0].z),l.push(Z[1].x,Z[1].y,Z[1].z)})}F.push(W[0][0],te[v][0],W[v][0],te[0][0])}}for(;F.length;){let B,V,R,H;[B,V]=F.splice(0,2);let W=[B];for(;B!=V;)W.push(V),R=F.indexOf(V),H=R%2,V=F.splice(R-H,2)[1-H];y.subVectors(W[0],W[1]).cross(d.subVectors(W[0],W[2])).normalize();let te=y.dot(W[0])<0;te&&y.negate();for(let G=1;G<=W.length-2;G++)[W[G+ +te],W[G+1-+te],W[0]].forEach(ie=>{s.push(ie.x,ie.y,ie.z),l.push(y.x,y.y,y.z)})}}function h(){let c=new T;for(let w=0;w<s.length;w+=3){c.x=s[w+0],c.y=s[w+1],c.z=s[w+2];let E=b(c)/2/Math.PI+.5,S=_(c)/Math.PI+.5;o.push(E,1-S)}let d=new T,f=new T,m=new T,p=new T,g=new re,v=new re,y=new re,x=(w,E,S,C)=>{C<0&&w.x===1&&(o[E]=w.x-1),S.x===0&&S.z===0&&(o[E]=C/2/Math.PI+.5)};for(let w=0,E=0;w<s.length;w+=9,E+=6){d.set(s[w+0],s[w+1],s[w+2]),f.set(s[w+3],s[w+4],s[w+5]),m.set(s[w+6],s[w+7],s[w+8]),g.set(o[E+0],o[E+1]),v.set(o[E+2],o[E+3]),y.set(o[E+4],o[E+5]),p.copy(d).add(f).add(m).divideScalar(3);let S=b(p);x(g,E+0,d,S),x(v,E+2,f,S),x(y,E+4,m,S)}for(let w=0;w<o.length;w+=6){let E=o[w+0],S=o[w+2],C=o[w+4],M=Math.max(E,S,C),P=Math.min(E,S,C);M>.9&&P<.1&&(E<.2&&(o[w+0]+=1),S<.2&&(o[w+2]+=1),C<.2&&(o[w+4]+=1))}function b(w){return Math.atan2(w.z,-w.x)}function _(w){return Math.atan2(-w.y,Math.sqrt(w.x*w.x+w.z*w.z))}}}static fromJSON(e){return new fk(e.vertices,e.indices,e.radius,e.corner,e.cornerSides)}},K3e=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,detail:0,corner:0,cornerSides:4},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??r.width)})}}static build(e){let{width:t,height:r,depth:i,detail:n,corner:a,cornerSides:s}=e.parameters,o=n===0&&a!==0?new bY(t*.5,a,s):new O7(t*.5,n);return o.scale(1,r/t,i/t),Object.assign(o,{userData:{...e,type:"DodecahedronGeometry"}})}},bY=class extends fk{constructor(e=1,t=.2,r=4){let i=(1+Math.sqrt(5))/2,n=1/i,a=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-i,0,-n,i,0,n,-i,0,n,i,-n,-i,0,-n,i,0,n,-i,0,n,i,0,-i,0,-n,i,0,-n,-i,0,n,i,0,n],s=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],o="DodecahedronGeometry";super(a,s,o,e,t,r),this.type=o}static fromJSON(e){return new bY(e.radius,e.corner,e.cornerSides)}},c0=1e-12,pk=class{constructor(e){this.position=new re,this.startPosition=new re,this.uuid=bt.generateUUID(),this.position=e.clone()}start(){this.reset()}reset(){this.startPosition.copy(this.position)}applyOffset(e){this.position.copy(this.startPosition).add(e)}copy(e){return this.position.copy(e.position),this.startPosition.copy(e.startPosition),this}clone(){return new pk(this.position).copy(this)}toJSON(){return[this.position.x,this.position.y]}},h3=class extends pk{constructor(e){super(e.position),this.parent=e}copy(e){return super.copy(e),this}clone(){return new h3(this.parent).copy(this)}},cg=class extends pk{constructor(e,t){super(t),this.controls=[],this.roundness=0,this.areControlsDirectionsMirrored=!0,this.uuid=e,this.controls.push(new h3(this),new h3(this))}static create(e,t){let r=new cg(e,new re(...t.position));return r.controls[0].position.set(...t.controlPrevious.position),r.controls[1].position.set(...t.controlNext.position),r.roundness=t.roundness,r.areControlsDirectionsMirrored=t.areControlsDirectionsMirrored,r}getOppositeControl(e){let t=this.controls.indexOf(e);return t===0?this.controls[1]:t===1?this.controls[0]:null}applyOffsetToControls(e,t=1){for(let r=0,i=this.controls.length;r<i;r++){let n=this.controls[r];this.position.distanceTo(n.position)<=t?n.position.copy(this.position):n.applyOffset(e)}}controlsMoved(){return!(this.position.equals(this.controls[0].position)&&this.position.equals(this.controls[1].position))}copy(e){return super.copy(e),this.controls[0].copy(e.controls[0]),this.controls[1].copy(e.controls[1]),this.roundness=e.roundness,this.uuid=e.uuid,this}clone(){return new cg(this.uuid,this.position).copy(this)}toJSON(){return super.toJSON().concat(this.controls[0].toJSON(),this.controls[1].toJSON(),[this.roundness])}computeTangents(){var r,i;let e=(r=this.curveBefore)==null?void 0:r.getTangentAt(1),t=(i=this.curveAfter)==null?void 0:i.getTangentAt(0);return[e,t]}computeNormals(e=new re,t=new re){let[r,i]=this.computeTangents();return r&&i&&(xU(r,e),xU(i,t)),[e,t]}computeTangent(e=new re){let[t,r]=this.computeTangents();return t&&r&&e.copy(t).add(r).normalize(),e}computeNormal(e=new re){let[t,r]=this.computeNormals();return e.copy(t).add(r).normalize(),e}};function xU(e,t=new re){let r=e.length();return t.set(-e.y/r,e.x/r)}var mk=e=>e,Ev=new re,VE=new re,Z3e=new re,J3e=new re,eOe=new re,tOe=new re,wY=new T,_Y=new T;function rOe(e){let t=new re;t.addVectors(e.v0,Ev.subVectors(e.v1,e.v0).multiplyScalar(2/3));let r=new re;return r.addVectors(e.v2,VE.subVectors(e.v1,e.v2).multiplyScalar(2/3)),new hl(e.v0,t,r,e.v2)}function H0(e,t,r=Number.EPSILON){return Math.abs(e-t)<r}function iOe(e,t,r=Number.EPSILON){return e.distanceTo(t)<r}function nOe(e,t,r=Number.EPSILON){return e.distanceTo(t)<r}function SY(e,t,r){let i=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)),n=Math.sqrt(Math.pow(t.x-r.x,2)+Math.pow(t.y-r.y,2)),a=Math.sqrt(Math.pow(r.x-e.x,2)+Math.pow(r.y-e.y,2));return Math.acos((n*n+i*i-a*a)/(2*n*i))}function aOe(e,t,r){return wU(e,t)&&wU(t,r)&&d3(e.position,t.position,r.position)}function d3(e,t,r){return Ev.copy(t).sub(e).cross(VE.copy(r).sub(e))===0}function sOe(e,t,r,i,n){let a=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)),s=(e.y+t.y)/2,o=(e.x+t.x)/2,l=Math.sqrt(Math.pow(r,2)-Math.pow(a/2,2))*(e.y-t.y)/a,u=Math.sqrt(Math.pow(r,2)-Math.pow(a/2,2))*(t.x-e.x)/a;return i.set(o+l,s+u),n.set(o-l,s-u),[i,n]}function oOe(e,t,r){let i=e.distanceTo(r),n=t.distanceTo(r);return i<n?t:e}function lOe(e,t,r,i,n,a){let s=t.x-e.x,o=t.y-e.y,l=r.x-e.x,u=r.y-e.y,h=Math.sqrt((s+l)*(s+l)+(o+u)*(o+u)),c;return SY(t,e,r)>Math.PI&&(h*=-1),H0(u,o)?c=(o+u)*(i/h-.5)*8/3/(s-l):c=(s+l)*(i/h-.5)*8/3/(u-o),n.set(t.x-c*o,t.y+c*s),a.set(r.x+c*u,r.y-c*l),[n,a]}function bU(e,t){return e.position.equals(e.controls[1].position)&&t.position.equals(t.controls[0].position)}function wU(e,t){return d3(e.position,e.controls[1].position,t.position)&&d3(e.position,t.controls[0].position,t.position)}function uOe(e,t,r,i,n=.5){let a=Ev.subVectors(t,e).multiplyScalar(n).add(e),s=VE.subVectors(r,t).multiplyScalar(n).add(t),o=Z3e.subVectors(i,r).multiplyScalar(n).add(r),l=a,u=J3e.subVectors(s,a).multiplyScalar(n).add(a),h=eOe.subVectors(o,s).multiplyScalar(n).add(s),c=o,d=tOe.subVectors(h,u).multiplyScalar(n).add(u);return[e.x,e.y,l.x,l.y,u.x,u.y,d.x,d.y,h.x,h.y,c.x,c.y,i.x,i.y]}function cOe(e,t,r=12,i=!0){let n=_Y.set(0,0,0),a,s=0;for(let o=0;o<t.length;o++){let l=mk(t[o]),u=Ev,h=Ef(l,r);for(let c=0;c<=h;c++)if(l instanceof hl||l instanceof rd||l instanceof _l){if(l.getPoint(c/h,u),n.set(u.x,u.y,0),a!==void 0&&nOe(a,n))continue;a===void 0&&(a=wY),a.copy(n),e.setXYZ(s,n.x,n.y,n.z),s++}}return i&&s>1&&!(e.getX(s-1)===e.getX(0)&&e.getY(s-1)===e.getY(0)&&e.getZ(s-1)===e.getZ(0))&&(e.setXYZ(s,e.getX(0),e.getY(0),e.getZ(0)),s++),e}function hOe(e,t,r,i=12,n=!0){let a=_Y.set(0,0,0),s=0,o=[];for(let l=0;l<t.length;l++){if(r[l]===!1)continue;let u,h=mk(t[l]),c=Ev,d=Ef(h,i);o.push(d);for(let f=0;f<=d;f++)if(h instanceof hl||h instanceof rd||h instanceof _l){if(h.getPoint(f/d,c),a.set(c.x,c.y,0),u==null?void 0:u.equals(a))continue;u===void 0?u=wY:(e.setXYZ(s,u.x,u.y,u.z),s++,e.setXYZ(s,a.x,a.y,a.z),s++),u.copy(a)}}return n&&s>1&&!(e.getX(s-1)===e.getX(0)&&e.getY(s-1)===e.getY(0)&&e.getZ(s-1)===e.getZ(0))&&(e.setXYZ(s,e.getX(0),e.getY(0),e.getZ(0)),s++),o}function _U(e,t=12,r=!1){let i=[];for(let n=0,a=e.length;n<a;n++){let s=e[n],o=0;if(r&&s.roundedCurveCorner!==void 0){let l=Ef(s.roundedCurveCorner,t)*.5;n>0&&(i[n-1]+=l),o+=l}s.curveAfter!==void 0&&(o+=Ef(s.curveAfter,t)),i.push(o)}return e.length>0&&r&&e[0].roundedCurveCorner!==void 0&&(i[e.length-1]+=Ef(e[0].roundedCurveCorner,t)*.5),i}function Ef(e,t=12){return e&&e instanceof CE?t*2:e&&(e instanceof _l||e instanceof A7)?1:e&&e instanceof TR?t*e.points.length:t}function dOe(e,t,r=12,i=!0){let n,a=0;for(let s=0;s<t.length;s++){let o=mk(t[s]),l=Ef(o,r),u=Ev;for(let h=0;h<=l;h++)if(o instanceof hl||o instanceof rd||o instanceof _l){if(o.getPoint(h/l,u),n!==void 0&&iOe(n,u,c0))continue;n===void 0&&(n=VE),n.copy(u),e.push(u.x,u.y),a++}}return H0(e[0],e[e.length-2],c0)&&H0(e[1],e[e.length-1],c0)&&(e.pop(),e.pop()),i&&a>1&&!(H0(e[a-1],e[1],c0)&&H0(e[a-2],e[0],c0))&&(e.push(e[0],e[1]),a++),e}var MA=new re,fOe=new re,pOe=new re,mOe=new re,gOe=new re,vOe=new re,Li=class extends mS{constructor(e=100,t=100){super(),this.points=[],this.shapeHoles=[],this.plane=new Vs(new T(0,0,-1)),this.subdivision=0,this.controlSnapDistance=4,this.pointIDs=0,this.isMesh2D=!1,this._roundness=0,this.isClosed=!1,this.useCubicForRoundedCorners=!0,this.uuid=bt.generateUUID(),this.needsUpdate=!1,this.roundedCurves=[],this._width=e,this._height=t}static createFromState(e,t,r){let i=new Li;return i.isClosed=e.isClosed,i.points=e.points.map(n=>cg.create(n.id,n.data)),typeof e.roundness=="number"&&(i.roundness=e.roundness),i.shapeHoles=e.shapeHoles.map(n=>Li.createFromState(n)),t!==void 0&&r!==void 0&&i.applySize(t,r),i.update(),i}get width(){return this._width}get height(){return this._height}get roundness(){return this._roundness}set roundness(e){if(this._roundness!==e){this._roundness=e;for(let t=0,r=this.points.length;t<r;t++)this.points[t].roundness=e;this.needsUpdate=!0}}getPointsIndexesByIds(e){return e.map(t=>this.getPointIndexById(t)).filter(t=>t>=0)}getPointIndexById(e){let t=this.points.length,r=this.points.findIndex(i=>i.uuid===e);if(r<0){let i=t;for(let n=0,a=this.shapeHoles.length;n<a;n++){let s=this.shapeHoles[n],o=s.points.length,l=s.getPointIndexById(e);if(l<0)i+=o;else return l+i}}return r}getLineIndexById(e){return this.getPointIndexById(e)}getBezierPoint(e){if(e<=this.points.length-1)return this.points[e];if(this.shapeHoles.length>0){let t=this.points.length;for(let r=0,i=this.shapeHoles.length;r<i;r++){let n=this.shapeHoles[r],a=e-t;if(a<=n.points.length-1)return n.points[a];t+=n.points.length}}throw new Error("This shape does not have a point for this index: "+e)}getBezierPointIndex(e){let t=this.points.indexOf(e);if(t>=0)return t;if(t=this.points.length,this.shapeHoles.length>0)for(let r=0,i=this.shapeHoles.length;r<i;r++){let n=this.shapeHoles[r],a=n.points.indexOf(e);if(a>=0)return t+a;t+=n.points.length}return-1}getAllPoints(){let e=[].concat(...this.shapeHoles.map(t=>t.points));return[...this.points,...e]}applySize(e,t){e===0&&(e=.001),t===0&&(t=.001),this._width=e,this._height=t}applyScale(e,t){let r=MA.set(e,t);for(let i=0,n=this.points.length;i<n;i++){let a=this.points[i];a.position.multiply(r),a.controls[0].position.multiply(r),a.controls[1].position.multiply(r)}for(let i=0,n=this.shapeHoles.length;i<n;i++)this.shapeHoles[i].applyScale(e,t);this._update()}createPoint(e,t=0,r=bt.generateUUID()){let i;e instanceof re?i=e:i=new re(e,t);let n=new cg(r,i);return n.roundness=this.roundness,n}addPoint(e){this.points.push(e),this.needsUpdate=!0}addPointAt(e,t){this.points.splice(t,0,e),this.needsUpdate=!0}getPointByUuid(e){for(let t=0,r=this.points.length;t<r;t++){let i=this.points[t];if(i.uuid===e)return i}for(let t=0,r=this.shapeHoles.length;t<r;t++){let i=this.shapeHoles[t].getPointByUuid(e);if(i)return i}}getFirstPoint(){return this.points[0]}getLastPoint(){return this.points[this.points.length-1]}removePoint(e){let t=this.points.indexOf(e);t>=0&&this.points.splice(t,1),this.needsUpdate=!0}removePointById(e){let t=this.points.find(r=>r.uuid===e);t&&this.removePoint(t)}update(){for(let e=0,t=this.shapeHoles.length;e<t;e++)this.shapeHoles[e].update();this._update()}extractShapePointsToBuffer(e,t=12,r=!1){this.subdivision=t,this.curveDivisions===void 0&&this.computeCurveDivisions(t);let i=r?this.roundedCurveDivisions:this.curveDivisions;return cOe(e,r?this.roundedCurves:this.curves,t,this.autoClose),i.reduce((n,a)=>n+a,0)+1}computeCurveDivisions(e=12){return this.curveDivisions=_U(this.points,e,!1),this.roundedCurveDivisions=_U(this.points,e,!0),this.curveDivisions}extractFilteredShapePointsToBuffer(e,t,r=12){return hOe(e,this.curves,t,r,this.autoClose).reduce((i,n)=>i+n,0)*2}extractShapePointsToFlatArray(e,t=12){return this.subdivision=t,this.curveDivisions===void 0&&this.computeCurveDivisions(t),dOe(e,this.roundedCurves,t,this.autoClose)}getCurveIndexFromVertexId(e,t=!1){let r=0;this.curveDivisions===void 0&&this.computeCurveDivisions(this.subdivision);let i=t?this.roundedCurveDivisions:this.curveDivisions,n=0;t&&this.points[0].roundedCurveCorner!==void 0&&(n=Ef(this.points[0].roundedCurveCorner,this.subdivision)*.5);let a=e-n;a<0&&(a+=i.reduce((s,o)=>s+o,0));for(let s=0,o=i.length;s<o;s++){let l=i[s];if(a<r+l)return[s,(a-r+1)/l];r+=l}return[0,1]}getCurveT(e,t,r){let i=this.points[e],n=this.points[e>=this.points.length-1?0:e+1],a=this.curveDivisions,s=a[e];if(bU(i,n)){let l=i.position.distanceTo(n.position);return i.position.distanceTo(MA.set(r.x,r.y))/l}let o=0;for(let l=0;l<e;l++)o+=a[l];return(t-o)/s}dispose(){}_applyCurveForPoint(e,t){bU(t,e)?this.lineTo(e.position.x,e.position.y):this.bezierCurveTo(t.controls[1].position.x,t.controls[1].position.y,e.controls[0].position.x,e.controls[0].position.y,e.position.x,e.position.y);let r=this.curves[this.curves.length-1];e.curveBefore=r,t.curveAfter=r;let i=r.clone();e.roundedCurveBefore=i,t.roundedCurveAfter=i,e.roundedCurveCorner=void 0,this.roundedCurves.push(i)}_update(){if(this.curves=[],this.roundedCurves=[],!this.points.length)return;for(let t=0,r=this.points.length;t<r;t++){let i=this.points[t];if(t===0)this.moveTo(i.position.x,i.position.y);else{let n=this.points[t-1];this._applyCurveForPoint(i,n)}}let e=this.getLastPoint();if(e!=null&&e.curveAfter&&(e.curveAfter=void 0),this.isClosed){let t=this.points[0],r=this.points[this.points.length-1];this._applyCurveForPoint(t,r)}if(this.points.length>2){let t=0;for(let r=0,i=this.points.length;r<i;r++){let n=this.points[r],a=this.points[r-1]??this.points[this.points.length-1],s=this.points[r+1]??this.points[0],o=n.roundness,l=a&&s&&aOe(a,n,s);if(!n.controlsMoved()&&o>0&&!l){let u=n.curveBefore,h=n.curveAfter;if(u===void 0||h===void 0)continue;let c=n.roundedCurveBefore,d=n.roundedCurveAfter,f=u.getLength(),m=h.getLength(),p=Math.min(o,f*.499),g=Math.min(o,m*.499),v=Math.min(p,g),y=1-v/f,x=v/m,b=u.getPointAt(y,MA),_=h.getPointAt(x,fOe);this._subSplitCurve(u,c,y,b,void 0),this._subSplitCurve(h,d,x,void 0,_);let w;if(this.useCubicForRoundedCorners){let E=SY(b,n.position,_)/2,S=Math.tan(E)*b.distanceTo(n.position),[C,M]=sOe(b,_,S,pOe,mOe),P=oOe(C,M,n.position),[I,k]=lOe(P,b,_,S,gOe,vOe);w=new hl(b.clone(),I.clone(),k.clone(),_.clone())}else w=new rd(b.clone(),n.position.clone(),_.clone());n.roundedCurveCorner=w,this.roundedCurves.splice(r+t,0,w),t++}}}}_subSplitCurve(e,t,r,i,n){if(e instanceof _l)i!==void 0&&t.v2.copy(i),n!==void 0&&t.v1.copy(n);else{let a=e,s=t,o=a.getUtoTmapping(r,0),l=uOe(a.v0,a.v1,a.v2,a.v3,o);return i!==void 0&&(s.v0.set(l[0],l[1]),s.v1.set(l[2],l[3]),s.v2.set(l[4],l[5]),s.v3.set(l[6],l[7])),n!==void 0&&(s.v0.set(l[6],l[7]),s.v1.set(l[8],l[9]),s.v2.set(l[10],l[11]),s.v3.set(l[12],l[13])),s}return t}clone(){let e=new Li(this._width,this._height);return e.points=this.points.map(t=>t.clone()),e.isClosed=this.isClosed,e.roundness=this.roundness,e.isMesh2D=this.isMesh2D,e.shapeHoles=this.shapeHoles.map(t=>t.clone()),e}toJSON(){return{points:this.points.reduce((e,t)=>e.concat(t.toJSON()),[]),shapeHoles:this.shapeHoles.map(e=>e.toJSON()),isClosed:this.isClosed,roundness:this.roundness}}fromJSON(e){var r;this.points=[],this.pointIDs=0;let t=e.points.length/7;for(let i=0;i<t;i++){let n=i*7,a=e.points[n+0],s=e.points[n+1],o=e.points[n+2],l=e.points[n+3],u=e.points[n+4],h=e.points[n+5],c=e.points[n+6],d=new cg(bt.generateUUID(),new re(a,s));d.controls[0].position.set(o,l),d.controls[1].position.set(u,h),d.roundness=c,this.points.push(d)}return this.shapeHoles=(r=e.shapeHoles)!=null&&r.length?e.shapeHoles.map(i=>{let n=new Li;return n.fromJSON(i),n}):[],this.isClosed=e.isClosed,this._roundness=e.roundness,this._update(),this}fromShape(e){let t=(i,n)=>{n instanceof hl&&n.v3.equals(i.position)&&i.controls[0].position.copy(n.v2)},r=i=>{let n=[],a,s;for(a=0,s=i.length;a<s;a++)i[a]instanceof rd&&(i[a]=rOe(i[a]));for(a=0,s=i.length;a<s;a++){let u=i[a],h=a>0?i[a-1]:null,c;u instanceof hl?(c=this.createPoint(u.v0),c.controls[1].position.copy(u.v1)):u instanceof _l&&(c=this.createPoint(u.v1)),c!==void 0&&(h!==null&&t(c,h),n.push(c))}let o=i[i.length-1],l=!1;return o instanceof hl?o.v3.equals(n[0].position)&&(n[0].controls[0].position.copy(o.v2),l=!0):o instanceof _l&&o.v2.equals(n[0].position)&&(l=!0),this.isClosed=l,n};return this.points=r(e.curves),e instanceof mS&&(this.shapeHoles=e.holes.map(i=>{let n=new Li;return n.fromShape(i),n})),this.update(),this}updatePoint(e,t){let r=this.getPointByUuid(e);r&&(t.position!==void 0&&r.position.fromArray(t.position),t.roundness!==void 0&&(r.roundness=t.roundness),t.areControlsDirectionsMirrored!==void 0&&(r.areControlsDirectionsMirrored=t.areControlsDirectionsMirrored),this.needsUpdate=!0)}updatePreviousControl(e,t){var i;let r=(i=this.getPointByUuid(e))==null?void 0:i.controls[0];r&&(t.position&&r.position.fromArray(t.position),this.needsUpdate=!0)}updateNextControl(e,t){var i;let r=(i=this.getPointByUuid(e))==null?void 0:i.controls[1];r&&(t.position&&r.position.fromArray(t.position),this.needsUpdate=!0)}},f3=Math.PI*2;function CA({x:e,y:t},r,i,n,a){return{x:e*r+n,y:t*i+a}}function yOe(e,t){let r=t===1.5707963267948966?.551915024494:t===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(t/4),i=Math.cos(e),n=Math.sin(e),a=Math.cos(e+t),s=Math.sin(e+t);return[{x:i-n*r,y:n+i*r},{x:a+s*r,y:s-a*r},{x:a,y:s}]}function SU(e,t,r,i){let n=e*i-t*r<0?-1:1,a=Math.min(1,Math.max(-1,e*r+t*i));return n*Math.acos(a)}function xOe(e,t,r,i,n,a,s,o,l,u){let h=Math.pow(n,2),c=Math.pow(a,2),d=Math.pow(s,2),f=Math.pow(o,2),m=h*c-h*f-c*d;m<0&&(m=0),m/=h*f+c*d,m=Math.sqrt(m)*(l===u?-1:1);let p=m*n/a*o,g=m*-a/n*s,v=p+(e+r)/2,y=g+(t+i)/2,x=(s-p)/n,b=(o-g)/a,_=(-s-p)/n,w=(-o-g)/a,E=SU(1,0,x,b),S=SU(x,b,_,w);return!u&&S>0&&(S-=f3),u&&S<0&&(S+=f3),{centerx:v,centery:y,ang1:E,ang2:S}}function bOe({px:e,py:t,cx:r,cy:i,rx:n,ry:a,largeArcFlag:s,sweepFlag:o}){let l=[];if(n===0||a===0)return[];let u=(e-r)/2,h=(t-i)/2;if(u===0&&h===0)return[];n=Math.abs(n),a=Math.abs(a);let c=Math.pow(u,2)/Math.pow(n,2)+Math.pow(h,2)/Math.pow(a,2);c>1&&(n*=Math.sqrt(c),a*=Math.sqrt(c));let d=xOe(e,t,r,i,n,a,u,h,s,o),{ang1:f,ang2:m}=d,{centerx:p,centery:g}=d,v=Math.abs(m)/(f3/4);Math.abs(1-v)<1e-7&&(v=1);let y=Math.max(Math.ceil(v),1);m/=y;for(let x=0;x<y;x++)l.push(yOe(f,m)),f+=m;return l.map(x=>{let{x:b,y:_}=CA(x[0],n,a,p,g),{x:w,y:E}=CA(x[1],n,a,p,g),{x:S,y:C}=CA(x[2],n,a,p,g);return{x1:b,y1:_,x2:w,y2:E,x:S,y:C}})}var $r;(function(e){e[e.ODD=0]="ODD",e[e.NONZERO=1]="NONZERO",e[e.POSITIVE=2]="POSITIVE",e[e.NEGATIVE=3]="NEGATIVE",e[e.ABS_GEQ_TWO=4]="ABS_GEQ_TWO"})($r||($r={}));var ln;(function(e){e[e.POLYGONS=0]="POLYGONS",e[e.CONNECTED_POLYGONS=1]="CONNECTED_POLYGONS",e[e.BOUNDARY_CONTOURS=2]="BOUNDARY_CONTOURS"})(ln||(ln={}));function Rt(e,t){if(!e)throw t||"Assertion Failed!"}var St=function(){function e(){}return e.vertEq=function(t,r){return t.s===r.s&&t.t===r.t},e.vertLeq=function(t,r){return t.s<r.s||t.s===r.s&&t.t<=r.t},e.transLeq=function(t,r){return t.t<r.t||t.t===r.t&&t.s<=r.s},e.edgeGoesLeft=function(t){return e.vertLeq(t.Dst,t.Org)},e.edgeGoesRight=function(t){return e.vertLeq(t.Org,t.Dst)},e.vertL1dist=function(t,r){return Math.abs(t.s-r.s)+Math.abs(t.t-r.t)},e.edgeEval=function(t,r,i){Rt(e.vertLeq(t,r)&&e.vertLeq(r,i));var n=r.s-t.s,a=i.s-r.s;return n+a>0?n<a?r.t-t.t+(t.t-i.t)*(n/(n+a)):r.t-i.t+(i.t-t.t)*(a/(n+a)):0},e.edgeSign=function(t,r,i){Rt(e.vertLeq(t,r)&&e.vertLeq(r,i));var n=r.s-t.s,a=i.s-r.s;return n+a>0?(r.t-i.t)*n+(r.t-t.t)*a:0},e.transEval=function(t,r,i){Rt(e.transLeq(t,r)&&e.transLeq(r,i));var n=r.t-t.t,a=i.t-r.t;return n+a>0?n<a?r.s-t.s+(t.s-i.s)*(n/(n+a)):r.s-i.s+(i.s-t.s)*(a/(n+a)):0},e.transSign=function(t,r,i){Rt(e.transLeq(t,r)&&e.transLeq(r,i));var n=r.t-t.t,a=i.t-r.t;return n+a>0?(r.s-i.s)*n+(r.s-t.s)*a:0},e.vertCCW=function(t,r,i){return t.s*(r.t-i.t)+r.s*(i.t-t.t)+i.s*(t.t-r.t)>=0},e.interpolate=function(t,r,i,n){return t=t<0?0:t,i=i<0?0:i,t<=i?i===0?(r+n)/2:r+(n-r)*(t/(t+i)):n+(r-n)*(i/(t+i))},e.intersect=function(t,r,i,n,a){var s,o,l;e.vertLeq(t,r)||(l=t,t=r,r=l),e.vertLeq(i,n)||(l=i,i=n,n=l),e.vertLeq(t,i)||(l=t,t=i,i=l,l=r,r=n,n=l),e.vertLeq(i,r)?e.vertLeq(r,n)?(s=e.edgeEval(t,i,r),o=e.edgeEval(i,r,n),s+o<0&&(s=-s,o=-o),a.s=e.interpolate(s,i.s,o,r.s)):(s=e.edgeSign(t,i,r),o=-e.edgeSign(t,n,r),s+o<0&&(s=-s,o=-o),a.s=e.interpolate(s,i.s,o,n.s)):a.s=(i.s+r.s)/2,e.transLeq(t,r)||(l=t,t=r,r=l),e.transLeq(i,n)||(l=i,i=n,n=l),e.transLeq(t,i)||(l=t,t=i,i=l,l=r,r=n,n=l),e.transLeq(i,r)?e.transLeq(r,n)?(s=e.transEval(t,i,r),o=e.transEval(i,r,n),s+o<0&&(s=-s,o=-o),a.t=e.interpolate(s,i.t,o,r.t)):(s=e.transSign(t,i,r),o=-e.transSign(t,n,r),s+o<0&&(s=-s,o=-o),a.t=e.interpolate(s,i.t,o,n.t)):a.t=(i.t+r.t)/2},e}(),h0=function(){function e(){this.next=null,this.prev=null,this.anEdge=null,this.trail=null,this.n=0,this.marked=!1,this.inside=!1}return e}(),Ub=function(){function e(t){this.side=t,this.next=null,this.Org=null,this.Sym=null,this.Onext=null,this.Lnext=null,this.Lface=null,this.activeRegion=null,this.winding=0}return Object.defineProperty(e.prototype,"Rface",{get:function(){return this.Sym.Lface},set:function(t){this.Sym.Lface=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dst",{get:function(){return this.Sym.Org},set:function(t){this.Sym.Org=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Oprev",{get:function(){return this.Sym.Lnext},set:function(t){this.Sym.Lnext=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Lprev",{get:function(){return this.Onext.Sym},set:function(t){this.Onext.Sym=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dprev",{get:function(){return this.Lnext.Sym},set:function(t){this.Lnext.Sym=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Rprev",{get:function(){return this.Sym.Onext},set:function(t){this.Sym.Onext=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dnext",{get:function(){return this.Sym.Onext.Sym},set:function(t){this.Sym.Onext.Sym=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Rnext",{get:function(){return this.Sym.Lnext.Sym},set:function(t){this.Sym.Lnext.Sym=t},enumerable:!0,configurable:!0}),e}(),hm=function(){function e(){this.next=null,this.prev=null,this.anEdge=null,this.coords=[0,0,0],this.s=0,this.t=0,this.pqHandle=0,this.n=0,this.idx=0}return e}(),EU=function(){function e(){var t=new hm,r=new h0,i=new Ub(0),n=new Ub(1);t.next=t.prev=t,t.anEdge=null,r.next=r.prev=r,i.next=i,i.Sym=n,n.next=n,n.Sym=i,this.vHead=t,this.fHead=r,this.eHead=i,this.eHeadSym=n}return e.prototype.makeEdge_=function(t){var r=new Ub(0),i=new Ub(1);t.Sym.side<t.side&&(t=t.Sym);var n=t.Sym.next;return i.next=n,n.Sym.next=r,r.next=t,t.Sym.next=i,r.Sym=i,r.Onext=r,r.Lnext=i,r.Org=null,r.Lface=null,r.winding=0,r.activeRegion=null,i.Sym=r,i.Onext=i,i.Lnext=r,i.Org=null,i.Lface=null,i.winding=0,i.activeRegion=null,r},e.prototype.splice_=function(t,r){var i=t.Onext,n=r.Onext;i.Sym.Lnext=r,n.Sym.Lnext=t,t.Onext=n,r.Onext=i},e.prototype.makeVertex_=function(t,r,i){var n=t;Rt(n,"Vertex can't be null!");var a=i.prev;n.prev=a,a.next=n,n.next=i,i.prev=n,n.anEdge=r;var s=r;do s.Org=n,s=s.Onext;while(s!==r)},e.prototype.makeFace_=function(t,r,i){var n=t;Rt(n,"Face can't be null");var a=i.prev;n.prev=a,a.next=n,n.next=i,i.prev=n,n.anEdge=r,n.trail=null,n.marked=!1,n.inside=i.inside;var s=r;do s.Lface=n,s=s.Lnext;while(s!==r)},e.prototype.killEdge_=function(t){t.Sym.side<t.side&&(t=t.Sym);var r=t.next,i=t.Sym.next;r.Sym.next=i,i.Sym.next=r},e.prototype.killVertex_=function(t,r){var i=t.anEdge,n=i;do n.Org=r,n=n.Onext;while(n!==i);var a=t.prev,s=t.next;s.prev=a,a.next=s},e.prototype.killFace_=function(t,r){var i=t.anEdge,n=i;do n.Lface=r,n=n.Lnext;while(n!==i);var a=t.prev,s=t.next;s.prev=a,a.next=s},e.prototype.makeEdge=function(){var t=new hm,r=new hm,i=new h0,n=this.makeEdge_(this.eHead);return this.makeVertex_(t,n,this.vHead),this.makeVertex_(r,n.Sym,this.vHead),this.makeFace_(i,n,this.fHead),n},e.prototype.splice=function(t,r){var i=!1,n=!1;if(t!==r){if(r.Org!==t.Org&&(n=!0,this.killVertex_(r.Org,t.Org)),r.Lface!==t.Lface&&(i=!0,this.killFace_(r.Lface,t.Lface)),this.splice_(r,t),!n){var a=new hm;this.makeVertex_(a,r,t.Org),t.Org.anEdge=t}if(!i){var s=new h0;this.makeFace_(s,r,t.Lface),t.Lface.anEdge=t}}},e.prototype.delete=function(t){var r=t.Sym,i=!1;if(t.Lface!==t.Rface&&(i=!0,this.killFace_(t.Lface,t.Rface)),t.Onext===t)this.killVertex_(t.Org,null);else if(t.Rface.anEdge=t.Oprev,t.Org.anEdge=t.Onext,this.splice_(t,t.Oprev),!i){var n=new h0;this.makeFace_(n,t,t.Lface)}r.Onext===r?(this.killVertex_(r.Org,null),this.killFace_(r.Lface,null)):(t.Lface.anEdge=r.Oprev,r.Org.anEdge=r.Onext,this.splice_(r,r.Oprev)),this.killEdge_(t)},e.prototype.addEdgeVertex=function(t){var r=this.makeEdge_(t),i=r.Sym;this.splice_(r,t.Lnext),r.Org=t.Dst;var n=new hm;return this.makeVertex_(n,i,r.Org),r.Lface=i.Lface=t.Lface,r},e.prototype.splitEdge=function(t){var r=this.addEdgeVertex(t),i=r.Sym;return this.splice_(t.Sym,t.Sym.Oprev),this.splice_(t.Sym,i),t.Dst=i.Org,i.Dst.anEdge=i.Sym,i.Rface=t.Rface,i.winding=t.winding,i.Sym.winding=t.Sym.winding,i.idx=t.idx,i.Sym.idx=t.Sym.idx,i},e.prototype.connect=function(t,r){var i=!1,n=this.makeEdge_(t),a=n.Sym;if(r.Lface!==t.Lface&&(i=!0,this.killFace_(r.Lface,t.Lface)),this.splice_(n,t.Lnext),this.splice_(a,r),n.Org=t.Dst,a.Org=r.Org,n.Lface=a.Lface=t.Lface,t.Lface.anEdge=a,!i){var s=new h0;this.makeFace_(s,n,t.Lface)}return n},e.prototype.zapFace=function(t){var r=t.anEdge,i,n,a,s,o;n=r.Lnext;do i=n,n=i.Lnext,i.Lface=null,i.Rface===null&&(i.Onext===i?this.killVertex_(i.Org,null):(i.Org.anEdge=i.Onext,this.splice_(i,i.Oprev)),a=i.Sym,a.Onext===a?this.killVertex_(a.Org,null):(a.Org.anEdge=a.Onext,this.splice_(a,a.Oprev)),this.killEdge_(i));while(i!=r);s=t.prev,o=t.next,o.prev=s,s.next=o},e.prototype.countFaceVerts_=function(t){var r=t.anEdge,i=0;do i++,r=r.Lnext;while(r!==t.anEdge);return i},e.prototype.mergeConvexFaces=function(t){var r,i,n,a,s,o,l;for(r=this.fHead.next;r!==this.fHead;r=r.next)if(r.inside)for(i=r.anEdge,s=i.Org;n=i.Lnext,a=i.Sym,a&&a.Lface&&a.Lface.inside&&(o=this.countFaceVerts_(r),l=this.countFaceVerts_(a.Lface),o+l-2<=t&&St.vertCCW(i.Lprev.Org,i.Org,a.Lnext.Lnext.Org)&&St.vertCCW(a.Lprev.Org,a.Org,i.Lnext.Lnext.Org)&&(n=a.Lnext,this.delete(a),i=null,a=null)),!(i&&i.Lnext.Org===s);)i=n;return!0},e.prototype.check=function(){var t=this.fHead,r=this.vHead,i=this.eHead,n,a,s,o,l,u;for(a=t,a=t;(n=a.next)!==t;a=n){Rt(n.prev===a),l=n.anEdge;do Rt(l.Sym!==l),Rt(l.Sym.Sym===l),Rt(l.Lnext.Onext.Sym===l),Rt(l.Onext.Sym.Lnext===l),Rt(l.Lface===n),l=l.Lnext;while(l!==n.anEdge)}for(Rt(n.prev===a&&n.anEdge===null),o=r,o=r;(s=o.next)!==r;o=s){Rt(s.prev===o),l=s.anEdge;do Rt(l.Sym!==l),Rt(l.Sym.Sym===l),Rt(l.Lnext.Onext.Sym===l),Rt(l.Onext.Sym.Lnext===l),Rt(l.Org===s),l=l.Onext;while(l!==s.anEdge)}for(Rt(s.prev===o&&s.anEdge===null),u=i,u=i;(l=u.next)!==i;u=l)Rt(l.Sym.next===u.Sym),Rt(l.Sym!==l),Rt(l.Sym.Sym===l),Rt(l.Org!==null),Rt(l.Dst!==null),Rt(l.Lnext.Onext.Sym===l),Rt(l.Onext.Sym.Lnext===l);Rt(l.Sym.next===u.Sym&&l.Sym===this.eHeadSym&&l.Sym.Sym===l&&l.Org===null&&l.Dst===null&&l.Lface===null&&l.Rface===null)},e}(),MU=function(){function e(){this.handle=null}return e}(),CU=function(){function e(){this.key=null,this.node=0}return e}(),wOe=function(){function e(t,r){this.leq=r,this.max=0,this.nodes=[],this.handles=[],this.initialized=!1,this.freeList=0,this.size=0,this.max=t,this.nodes=[],this.handles=[];for(var i=0;i<t+1;i++)this.nodes[i]=new MU,this.handles[i]=new CU;this.initialized=!1,this.nodes[1].handle=1,this.handles[1].key=null}return e.prototype.floatDown_=function(t){var r=this.nodes,i=this.handles,n,a,s;for(n=r[t].handle;;){if(s=t<<1,s<this.size&&this.leq(i[r[s+1].handle].key,i[r[s].handle].key)&&++s,Rt(s<=this.max),a=r[s].handle,s>this.size||this.leq(i[n].key,i[a].key)){r[t].handle=n,i[n].node=t;break}r[t].handle=a,i[a].node=t,t=s}},e.prototype.floatUp_=function(t){var r=this.nodes,i=this.handles,n,a,s;for(n=r[t].handle;;){if(s=t>>1,a=r[s].handle,s===0||this.leq(i[a].key,i[n].key)){r[t].handle=n,i[n].node=t;break}r[t].handle=a,i[a].node=t,t=s}},e.prototype.init=function(){for(var t=this.size;t>=1;--t)this.floatDown_(t);this.initialized=!0},e.prototype.min=function(){return this.handles[this.nodes[1].handle].key},e.prototype.insert=function(t){var r,i;if(r=++this.size,r*2>this.max){this.max*=2;var n,a;for(a=this.nodes.length,this.nodes.length=this.max+1,n=a;n<this.nodes.length;n++)this.nodes[n]=new MU;for(a=this.handles.length,this.handles.length=this.max+1,n=a;n<this.handles.length;n++)this.handles[n]=new CU}return this.freeList===0?i=r:(i=this.freeList,this.freeList=this.handles[i].node),this.nodes[r].handle=i,this.handles[i].node=r,this.handles[i].key=t,this.initialized&&this.floatUp_(r),i},e.prototype.extractMin=function(){var t=this.nodes,r=this.handles,i=t[1].handle,n=r[i].key;return this.size>0&&(t[1].handle=t[this.size].handle,r[t[1].handle].node=1,r[i].key=null,r[i].node=this.freeList,this.freeList=i,--this.size,this.size>0&&this.floatDown_(1)),n},e.prototype.delete=function(t){var r=this.nodes,i=this.handles,n;Rt(t>=1&&t<=this.max&&i[t].key!==null),n=i[t].node,r[n].handle=r[this.size].handle,i[r[n].handle].node=n,--this.size,n<=this.size&&(n<=1||this.leq(i[r[n>>1].handle].key,i[r[n].handle].key)?this.floatDown_(n):this.floatUp_(n)),i[t].key=null,i[t].node=this.freeList,this.freeList=t},e}(),AA=function(){function e(){this.eUp=null,this.nodeUp=null,this.windingNumber=0,this.inside=!1,this.sentinel=!1,this.dirty=!1,this.fixUpperEdge=!1}return e}(),AU=function(){function e(){this.key=null,this.next=null,this.prev=null}return e}(),_Oe=function(){function e(t,r){this.frame=t,this.leq=r,this.head=new AU,this.head.next=this.head,this.head.prev=this.head}return e.prototype.min=function(){return this.head.next},e.prototype.max=function(){return this.head.prev},e.prototype.insert=function(t){return this.insertBefore(this.head,t)},e.prototype.search=function(t){var r=this.head;do r=r.next;while(r.key!==null&&!this.leq(this.frame,t,r.key));return r},e.prototype.insertBefore=function(t,r){do t=t.prev;while(t.key!==null&&!this.leq(this.frame,t.key,r));var i=new AU;return i.key=r,i.next=t.next,t.next.prev=i,i.prev=t,t.next=i,i},e.prototype.delete=function(t){t.next.prev=t.prev,t.prev.next=t.next},e}(),SOe=function(){function e(){}return e.regionBelow=function(t){return t.nodeUp.prev.key},e.regionAbove=function(t){return t.nodeUp.next.key},e.debugEvent=function(t){},e.addWinding=function(t,r){t.winding+=r.winding,t.Sym.winding+=r.Sym.winding},e.edgeLeq=function(t,r,i){var n=t.event,a=r.eUp,s=i.eUp;if(a.Dst===n)return s.Dst===n?St.vertLeq(a.Org,s.Org)?St.edgeSign(s.Dst,a.Org,s.Org)<=0:St.edgeSign(a.Dst,s.Org,a.Org)>=0:St.edgeSign(s.Dst,n,s.Org)<=0;if(s.Dst===n)return St.edgeSign(a.Dst,n,a.Org)>=0;var o=St.edgeEval(a.Dst,n,a.Org),l=St.edgeEval(s.Dst,n,s.Org);return o>=l},e.deleteRegion=function(t,r){r.fixUpperEdge&&Rt(r.eUp.winding===0),r.eUp.activeRegion=null,t.dict.delete(r.nodeUp)},e.fixUpperEdge=function(t,r,i){Rt(r.fixUpperEdge),t.mesh.delete(r.eUp),r.fixUpperEdge=!1,r.eUp=i,i.activeRegion=r},e.topLeftRegion=function(t,r){var i=r.eUp.Org,n;do r=e.regionAbove(r);while(r.eUp.Org===i);if(r.fixUpperEdge){if(n=t.mesh.connect(e.regionBelow(r).eUp.Sym,r.eUp.Lnext),n===null)return null;e.fixUpperEdge(t,r,n),r=e.regionAbove(r)}return r},e.topRightRegion=function(t){var r=t.eUp.Dst;do t=e.regionAbove(t);while(t.eUp.Dst===r);return t},e.addRegionBelow=function(t,r,i){var n=new AA;return n.eUp=i,n.nodeUp=t.dict.insertBefore(r.nodeUp,n),n.fixUpperEdge=!1,n.sentinel=!1,n.dirty=!1,i.activeRegion=n,n},e.isWindingInside=function(t,r){switch(t.windingRule){case $r.ODD:return(r&1)!==0;case $r.NONZERO:return r!==0;case $r.POSITIVE:return r>0;case $r.NEGATIVE:return r<0;case $r.ABS_GEQ_TWO:return r>=2||r<=-2}throw new Error("Invalid winding rulle")},e.computeWinding=function(t,r){r.windingNumber=e.regionAbove(r).windingNumber+r.eUp.winding,r.inside=e.isWindingInside(t,r.windingNumber)},e.finishRegion=function(t,r){var i=r.eUp,n=i.Lface;n.inside=r.inside,n.anEdge=i,e.deleteRegion(t,r)},e.finishLeftRegions=function(t,r,i){for(var n,a=null,s=r,o=r.eUp;s!==i;){if(s.fixUpperEdge=!1,a=e.regionBelow(s),n=a.eUp,n.Org!=o.Org){if(!a.fixUpperEdge){e.finishRegion(t,s);break}n=t.mesh.connect(o.Lprev,n.Sym),e.fixUpperEdge(t,a,n)}o.Onext!==n&&(t.mesh.splice(n.Oprev,n),t.mesh.splice(o,n)),e.finishRegion(t,s),o=a.eUp,s=a}return o},e.addRightEdges=function(t,r,i,n,a,s){var o,l,u,h,c=!0;u=i;do Rt(St.vertLeq(u.Org,u.Dst)),e.addRegionBelow(t,r,u.Sym),u=u.Onext;while(u!==n);for(a===null&&(a=e.regionBelow(r).eUp.Rprev),l=r,h=a;o=e.regionBelow(l),u=o.eUp.Sym,u.Org===h.Org;)u.Onext!==h&&(t.mesh.splice(u.Oprev,u),t.mesh.splice(h.Oprev,u)),o.windingNumber=l.windingNumber-u.winding,o.inside=e.isWindingInside(t,o.windingNumber),l.dirty=!0,!c&&e.checkForRightSplice(t,l)&&(e.addWinding(u,h),e.deleteRegion(t,l),t.mesh.delete(h)),c=!1,l=o,h=u;l.dirty=!0,Rt(l.windingNumber-u.winding===o.windingNumber),s&&e.walkDirtyRegions(t,l)},e.spliceMergeVertices=function(t,r,i){t.mesh.splice(r,i)},e.vertexWeights=function(t,r,i){var n=St.vertL1dist(r,t),a=St.vertL1dist(i,t),s=.5*a/(n+a),o=.5*n/(n+a);t.coords[0]+=s*r.coords[0]+o*i.coords[0],t.coords[1]+=s*r.coords[1]+o*i.coords[1],t.coords[2]+=s*r.coords[2]+o*i.coords[2]},e.getIntersectData=function(t,r,i,n,a,s){r.coords[0]=r.coords[1]=r.coords[2]=0,r.idx=-1,e.vertexWeights(r,i,n),e.vertexWeights(r,a,s)},e.checkForRightSplice=function(t,r){var i=e.regionBelow(r),n=r.eUp,a=i.eUp;if(St.vertLeq(n.Org,a.Org)){if(St.edgeSign(a.Dst,n.Org,a.Org)>0)return!1;St.vertEq(n.Org,a.Org)?n.Org!==a.Org&&(t.pq.delete(n.Org.pqHandle),e.spliceMergeVertices(t,a.Oprev,n)):(t.mesh.splitEdge(a.Sym),t.mesh.splice(n,a.Oprev),r.dirty=i.dirty=!0)}else{if(St.edgeSign(n.Dst,a.Org,n.Org)<0)return!1;e.regionAbove(r).dirty=r.dirty=!0,t.mesh.splitEdge(n.Sym),t.mesh.splice(a.Oprev,n)}return!0},e.checkForLeftSplice=function(t,r){var i=e.regionBelow(r),n=r.eUp,a=i.eUp,s;if(Rt(!St.vertEq(n.Dst,a.Dst)),St.vertLeq(n.Dst,a.Dst)){if(St.edgeSign(n.Dst,a.Dst,n.Org)<0)return!1;e.regionAbove(r).dirty=r.dirty=!0,s=t.mesh.splitEdge(n),t.mesh.splice(a.Sym,s),s.Lface.inside=r.inside}else{if(St.edgeSign(a.Dst,n.Dst,a.Org)>0)return!1;r.dirty=i.dirty=!0,s=t.mesh.splitEdge(a),t.mesh.splice(n.Lnext,a.Sym),s.Rface.inside=r.inside}return!0},e.checkForIntersect=function(t,r){var i=e.regionBelow(r),n=r.eUp,a=i.eUp,s=n.Org,o=a.Org,l=n.Dst,u=a.Dst,h,c,d=new hm,f,m;if(Rt(!St.vertEq(u,l)),Rt(St.edgeSign(l,t.event,s)<=0),Rt(St.edgeSign(u,t.event,o)>=0),Rt(s!==t.event&&o!==t.event),Rt(!r.fixUpperEdge&&!i.fixUpperEdge),s===o||(h=Math.min(s.t,l.t),c=Math.max(o.t,u.t),h>c))return!1;if(St.vertLeq(s,o)){if(St.edgeSign(u,s,o)>0)return!1}else if(St.edgeSign(l,o,s)<0)return!1;return e.debugEvent(t),St.intersect(l,s,u,o,d),Rt(Math.min(s.t,l.t)<=d.t),Rt(d.t<=Math.max(o.t,u.t)),Rt(Math.min(u.s,l.s)<=d.s),Rt(d.s<=Math.max(o.s,s.s)),St.vertLeq(d,t.event)&&(d.s=t.event.s,d.t=t.event.t),f=St.vertLeq(s,o)?s:o,St.vertLeq(f,d)&&(d.s=f.s,d.t=f.t),St.vertEq(d,s)||St.vertEq(d,o)?(e.checkForRightSplice(t,r),!1):!St.vertEq(l,t.event)&&St.edgeSign(l,t.event,d)>=0||!St.vertEq(u,t.event)&&St.edgeSign(u,t.event,d)<=0?u===t.event?(t.mesh.splitEdge(n.Sym),t.mesh.splice(a.Sym,n),r=e.topLeftRegion(t,r),n=e.regionBelow(r).eUp,e.finishLeftRegions(t,e.regionBelow(r),i),e.addRightEdges(t,r,n.Oprev,n,n,!0),!0):l===t.event?(t.mesh.splitEdge(a.Sym),t.mesh.splice(n.Lnext,a.Oprev),i=r,r=e.topRightRegion(r),m=e.regionBelow(r).eUp.Rprev,i.eUp=a.Oprev,a=e.finishLeftRegions(t,i,null),e.addRightEdges(t,r,a.Onext,n.Rprev,m,!0),!0):(St.edgeSign(l,t.event,d)>=0&&(e.regionAbove(r).dirty=r.dirty=!0,t.mesh.splitEdge(n.Sym),n.Org.s=t.event.s,n.Org.t=t.event.t),St.edgeSign(u,t.event,d)<=0&&(r.dirty=i.dirty=!0,t.mesh.splitEdge(a.Sym),a.Org.s=t.event.s,a.Org.t=t.event.t),!1):(t.mesh.splitEdge(n.Sym),t.mesh.splitEdge(a.Sym),t.mesh.splice(a.Oprev,n),n.Org.s=d.s,n.Org.t=d.t,n.Org.pqHandle=t.pq.insert(n.Org),e.getIntersectData(t,n.Org,s,l,o,u),e.regionAbove(r).dirty=r.dirty=i.dirty=!0,!1)},e.walkDirtyRegions=function(t,r){for(var i=e.regionBelow(r),n,a;;){for(;i.dirty;)r=i,i=e.regionBelow(i);if(!r.dirty&&(i=r,r=e.regionAbove(r),r===null||!r.dirty))return;if(r.dirty=!1,n=r.eUp,a=i.eUp,n.Dst!==a.Dst&&e.checkForLeftSplice(t,r)&&(i.fixUpperEdge?(e.deleteRegion(t,i),t.mesh.delete(a),i=e.regionBelow(r),a=i.eUp):r.fixUpperEdge&&(e.deleteRegion(t,r),t.mesh.delete(n),r=e.regionAbove(i),n=r.eUp)),n.Org!==a.Org)if(n.Dst!==a.Dst&&!r.fixUpperEdge&&!i.fixUpperEdge&&(n.Dst===t.event||a.Dst===t.event)){if(e.checkForIntersect(t,r))return}else e.checkForRightSplice(t,r);n.Org===a.Org&&n.Dst===a.Dst&&(e.addWinding(a,n),e.deleteRegion(t,r),t.mesh.delete(n),r=e.regionAbove(i))}},e.connectRightVertex=function(t,r,i){var n,a=i.Onext,s=e.regionBelow(r),o=r.eUp,l=s.eUp,u=!1;if(o.Dst!==l.Dst&&e.checkForIntersect(t,r),St.vertEq(o.Org,t.event)&&(t.mesh.splice(a.Oprev,o),r=e.topLeftRegion(t,r),a=e.regionBelow(r).eUp,e.finishLeftRegions(t,e.regionBelow(r),s),u=!0),St.vertEq(l.Org,t.event)&&(t.mesh.splice(i,l.Oprev),i=e.finishLeftRegions(t,s,null),u=!0),u){e.addRightEdges(t,r,i.Onext,a,a,!0);return}St.vertLeq(l.Org,o.Org)?n=l.Oprev:n=o,n=t.mesh.connect(i.Lprev,n),e.addRightEdges(t,r,n,n.Onext,n.Onext,!1),n.Sym.activeRegion.fixUpperEdge=!0,e.walkDirtyRegions(t,r)},e.connectLeftDegenerate=function(t,r,i){var n,a,s,o,l;if(n=r.eUp,St.vertEq(n.Org,i)){Rt(!1),e.spliceMergeVertices(t,n,i.anEdge);return}if(!St.vertEq(n.Dst,i)){t.mesh.splitEdge(n.Sym),r.fixUpperEdge&&(t.mesh.delete(n.Onext),r.fixUpperEdge=!1),t.mesh.splice(i.anEdge,n),e.sweepEvent(t,i);return}Rt(!1),r=e.topRightRegion(r),l=e.regionBelow(r),s=l.eUp.Sym,a=o=s.Onext,l.fixUpperEdge&&(Rt(a!==s),e.deleteRegion(t,l),t.mesh.delete(s),s=a.Oprev),t.mesh.splice(i.anEdge,s),St.edgeGoesLeft(a)||(a=null),e.addRightEdges(t,r,s.Onext,o,a,!0)},e.connectLeftVertex=function(t,r){var i,n,a,s,o,l,u=new AA;if(u.eUp=r.anEdge.Sym,i=t.dict.search(u).key,n=e.regionBelow(i),!!n){if(s=i.eUp,o=n.eUp,St.edgeSign(s.Dst,r,s.Org)===0){e.connectLeftDegenerate(t,i,r);return}if(a=St.vertLeq(o.Dst,s.Dst)?i:n,i.inside||a.fixUpperEdge){if(a===i)l=t.mesh.connect(r.anEdge.Sym,s.Lnext);else{var h=t.mesh.connect(o.Dnext,r.anEdge);l=h.Sym}a.fixUpperEdge?e.fixUpperEdge(t,a,l):e.computeWinding(t,e.addRegionBelow(t,i,l)),e.sweepEvent(t,r)}else e.addRightEdges(t,i,r.anEdge,r.anEdge,null,!0)}},e.sweepEvent=function(t,r){t.event=r,e.debugEvent(t);for(var i=r.anEdge;i.activeRegion===null;)if(i=i.Onext,i===r.anEdge){e.connectLeftVertex(t,r);return}var n=e.topLeftRegion(t,i.activeRegion);Rt(n!==null);var a=e.regionBelow(n),s=a.eUp,o=e.finishLeftRegions(t,a,null);o.Onext===s?e.connectRightVertex(t,n,o):e.addRightEdges(t,n,o.Onext,s,s,!0)},e.addSentinel=function(t,r,i,n){var a=new AA,s=t.mesh.makeEdge();s.Org.s=i,s.Org.t=n,s.Dst.s=r,s.Dst.t=n,t.event=s.Dst,a.eUp=s,a.windingNumber=0,a.inside=!1,a.fixUpperEdge=!1,a.sentinel=!0,a.dirty=!1,a.nodeUp=t.dict.insert(a)},e.initEdgeDict=function(t){t.dict=new _Oe(t,e.edgeLeq);var r=t.bmax[0]-t.bmin[0],i=t.bmax[1]-t.bmin[1],n=t.bmin[0]-r,a=t.bmax[0]+r,s=t.bmin[1]-i,o=t.bmax[1]+i;e.addSentinel(t,n,a,s),e.addSentinel(t,n,a,o)},e.doneEdgeDict=function(t){for(var r,i=0;(r=t.dict.min().key)!==null;)r.sentinel||(Rt(r.fixUpperEdge),Rt(++i===1)),Rt(r.windingNumber===0),e.deleteRegion(t,r)},e.removeDegenerateEdges=function(t){var r,i,n,a=t.mesh.eHead;for(r=a.next;r!==a;r=i)i=r.next,n=r.Lnext,St.vertEq(r.Org,r.Dst)&&r.Lnext.Lnext!==r&&(e.spliceMergeVertices(t,n,r),t.mesh.delete(r),r=n,n=r.Lnext),n.Lnext===r&&(n!==r&&((n===i||n===i.Sym)&&(i=i.next),t.mesh.delete(n)),(r===i||r===i.Sym)&&(i=i.next),t.mesh.delete(r))},e.initPriorityQ=function(t){var r,i,n,a=0;for(n=t.mesh.vHead,i=n.next;i!==n;i=i.next)a++;for(a+=8,r=t.pq=new wOe(a,St.vertLeq),n=t.mesh.vHead,i=n.next;i!==n;i=i.next)i.pqHandle=r.insert(i);return i!==n?!1:(r.init(),!0)},e.donePriorityQ=function(t){t.pq=null},e.removeDegenerateFaces=function(t,r){var i,n,a;for(i=r.fHead.next;i!==r.fHead;i=n)n=i.next,a=i.anEdge,Rt(a.Lnext!==a),a.Lnext.Lnext===a&&(e.addWinding(a.Onext,a),t.mesh.delete(a));return!0},e.computeInterior=function(t,r){r===void 0&&(r=!0);var i,n;if(e.removeDegenerateEdges(t),!e.initPriorityQ(t))return!1;for(e.initEdgeDict(t);(i=t.pq.extractMin())!==null;){for(;n=t.pq.min(),!(n===null||!St.vertEq(n,i));)n=t.pq.extractMin(),e.spliceMergeVertices(t,i.anEdge,n.anEdge);e.sweepEvent(t,i)}return t.event=t.dict.min().key.eUp.Org,e.debugEvent(t),e.doneEdgeDict(t),e.donePriorityQ(t),e.removeDegenerateFaces(t,t.mesh)?(r&&t.mesh.check(),!0):!1},e}(),EOe=function(){function e(){this.mesh=new EU,this.normal=[0,0,0],this.sUnit=[0,0,0],this.tUnit=[0,0,0],this.bmin=[0,0],this.bmax=[0,0],this.windingRule=$r.ODD,this.dict=null,this.pq=null,this.event=null,this.vertexIndexCounter=0,this.vertices=[],this.vertexIndices=[],this.vertexCount=0,this.elements=[],this.elementCount=0}return e.prototype.dot_=function(t,r){return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]},e.prototype.normalize_=function(t){var r=t[0]*t[0]+t[1]*t[1]+t[2]*t[2];if(!r)throw"Zero-size vector!";r=Math.sqrt(r),t[0]/=r,t[1]/=r,t[2]/=r},e.prototype.longAxis_=function(t){var r=0;return Math.abs(t[1])>Math.abs(t[0])&&(r=1),Math.abs(t[2])>Math.abs(t[r])&&(r=2),r},e.prototype.computeNormal_=function(t){var r,i,n,a,s,o,l=[0,0,0],u=[0,0,0],h=[0,0,0],c=[0,0,0],d=[0,0,0],f=[null,null,null],m=[null,null,null],p=this.mesh.vHead;r=p.next;for(var g=0;g<3;++g)a=r.coords[g],u[g]=a,m[g]=r,l[g]=a,f[g]=r;for(r=p.next;r!==p;r=r.next)for(var v=0;v<3;++v)a=r.coords[v],a<u[v]&&(u[v]=a,m[v]=r),a>l[v]&&(l[v]=a,f[v]=r);var y=0;if(l[1]-u[1]>l[0]-u[0]&&(y=1),l[2]-u[2]>l[y]-u[y]&&(y=2),u[y]>=l[y]){t[0]=0,t[1]=0,t[2]=1;return}for(o=0,i=m[y],n=f[y],h[0]=i.coords[0]-n.coords[0],h[1]=i.coords[1]-n.coords[1],h[2]=i.coords[2]-n.coords[2],r=p.next;r!==p;r=r.next)c[0]=r.coords[0]-n.coords[0],c[1]=r.coords[1]-n.coords[1],c[2]=r.coords[2]-n.coords[2],d[0]=h[1]*c[2]-h[2]*c[1],d[1]=h[2]*c[0]-h[0]*c[2],d[2]=h[0]*c[1]-h[1]*c[0],s=d[0]*d[0]+d[1]*d[1]+d[2]*d[2],s>o&&(o=s,t[0]=d[0],t[1]=d[1],t[2]=d[2]);o<=0&&(t[0]=t[1]=t[2]=0,t[this.longAxis_(h)]=1)},e.prototype.checkOrientation_=function(){for(var t=this.mesh.fHead,r,i=this.mesh.vHead,n,a=0,s=t.next;s!==t;s=s.next)if(n=s.anEdge,!(n.winding<=0))do a+=(n.Org.s-n.Dst.s)*(n.Org.t+n.Dst.t),n=n.Lnext;while(n!==s.anEdge);if(a<0){for(r=i.next;r!==i;r=r.next)r.t=-r.t;this.tUnit[0]=-this.tUnit[0],this.tUnit[1]=-this.tUnit[1],this.tUnit[2]=-this.tUnit[2]}},e.prototype.projectPolygon_=function(){var t=this.mesh.vHead,r=[0,0,0],i,n,a=!1;r[0]=this.normal[0],r[1]=this.normal[1],r[2]=this.normal[2],!r[0]&&!r[1]&&!r[2]&&(this.computeNormal_(r),a=!0),i=this.sUnit,n=this.tUnit;var s=this.longAxis_(r);i[s]=0,i[(s+1)%3]=1,i[(s+2)%3]=0,n[s]=0,n[(s+1)%3]=0,n[(s+2)%3]=r[s]>0?1:-1;for(var o=t.next;o!==t;o=o.next)o.s=this.dot_(o.coords,i),o.t=this.dot_(o.coords,n);a&&this.checkOrientation_();for(var l=!0,u=t.next;u!==t;u=u.next)l?(this.bmin[0]=this.bmax[0]=u.s,this.bmin[1]=this.bmax[1]=u.t,l=!1):(u.s<this.bmin[0]&&(this.bmin[0]=u.s),u.s>this.bmax[0]&&(this.bmax[0]=u.s),u.t<this.bmin[1]&&(this.bmin[1]=u.t),u.t>this.bmax[1]&&(this.bmax[1]=u.t))},e.prototype.addWinding_=function(t,r){t.winding+=r.winding,t.Sym.winding+=r.Sym.winding},e.prototype.tessellateMonoRegion_=function(t,r){var i,n;if(i=r.anEdge,!(i.Lnext!==i&&i.Lnext.Lnext!==i))throw"Mono region invalid";for(;St.vertLeq(i.Dst,i.Org);i=i.Lprev);for(;St.vertLeq(i.Org,i.Dst);i=i.Lnext);n=i.Lprev;for(var a=void 0;i.Lnext!==n;)if(St.vertLeq(i.Dst,n.Org)){for(;n.Lnext!==i&&(St.edgeGoesLeft(n.Lnext)||St.edgeSign(n.Org,n.Dst,n.Lnext.Dst)<=0);)a=t.connect(n.Lnext,n),n=a.Sym;n=n.Lprev}else{for(;n.Lnext!==i&&(St.edgeGoesRight(i.Lprev)||St.edgeSign(i.Dst,i.Org,i.Lprev.Org)>=0);)a=t.connect(i,i.Lprev),i=a.Sym;i=i.Lnext}if(n.Lnext===i)throw"Mono region invalid";for(;n.Lnext.Lnext!==i;)a=t.connect(n.Lnext,n),n=a.Sym;return!0},e.prototype.tessellateInterior_=function(t){for(var r,i=t.fHead.next;i!==t.fHead;i=r)if(r=i.next,i.inside&&!this.tessellateMonoRegion_(t,i))return!1;return!0},e.prototype.discardExterior_=function(t){for(var r,i=t.fHead.next;i!==t.fHead;i=r)r=i.next,i.inside||t.zapFace(i)},e.prototype.setWindingNumber_=function(t,r,i){for(var n,a=t.eHead.next;a!==t.eHead;a=n)n=a.next,a.Rface.inside!==a.Lface.inside?a.winding=a.Lface.inside?r:-r:i?t.delete(a):a.winding=0},e.prototype.getNeighbourFace_=function(t){return!t.Rface||!t.Rface.inside?-1:t.Rface.n},e.prototype.outputPolymesh_=function(t,r,i,n){var a,s=0,o=0,l;i>3&&t.mergeConvexFaces(i);for(var u=t.vHead.next;u!==t.vHead;u=u.next)u.n=-1;for(var h=t.fHead.next;h!==t.fHead;h=h.next)if(h.n=-1,!!h.inside){a=h.anEdge,l=0;do{var u=a.Org;u.n===-1&&(u.n=o,o++),l++,a=a.Lnext}while(a!==h.anEdge);if(l>i)throw"Face vertex greater that support polygon";h.n=s,++s}this.elementCount=s,r===ln.CONNECTED_POLYGONS&&(s*=2),this.elements=[],this.elements.length=s*i,this.vertexCount=o,this.vertices=[],this.vertices.length=o*n,this.vertexIndices=[],this.vertexIndices.length=o;for(var u=t.vHead.next;u!==t.vHead;u=u.next)if(u.n!==-1){var c=u.n*n;this.vertices[c+0]=u.coords[0],this.vertices[c+1]=u.coords[1],n>2&&(this.vertices[c+2]=u.coords[2]),this.vertexIndices[u.n]=u.idx}for(var d=0,h=t.fHead.next;h!==t.fHead;h=h.next)if(h.inside){a=h.anEdge,l=0;do{var u=a.Org;this.elements[d++]=u.n,l++,a=a.Lnext}while(a!==h.anEdge);for(var f=l;f<i;++f)this.elements[d++]=-1;if(r===ln.CONNECTED_POLYGONS){a=h.anEdge;do this.elements[d++]=this.getNeighbourFace_(a),a=a.Lnext;while(a!==h.anEdge);for(var m=l;m<i;++m)this.elements[d++]=-1}}},e.prototype.outputContours_=function(t,r){var i,n,a=0,s=0;this.vertexCount=0,this.elementCount=0;for(var o=t.fHead.next;o!==t.fHead;o=o.next)if(o.inside){n=i=o.anEdge;do this.vertexCount++,i=i.Lnext;while(i!==n);this.elementCount++}this.elements=[],this.elements.length=this.elementCount*2,this.vertices=[],this.vertices.length=this.vertexCount*r,this.vertexIndices=[],this.vertexIndices.length=this.vertexCount;var l=0,u=0,h=0;a=0;for(var o=t.fHead.next;o!==t.fHead;o=o.next)if(o.inside){s=0,n=i=o.anEdge;do this.vertices[l++]=i.Org.coords[0],this.vertices[l++]=i.Org.coords[1],r>2&&(this.vertices[l++]=i.Org.coords[2]),this.vertexIndices[u++]=this.vertexIdCallback?this.vertexIdCallback(i):i.Org.idx,s++,i=i.Lnext;while(i!==n);this.elements[h++]=a,this.elements[h++]=s,a+=s}},e.prototype.addContour=function(t,r){this.mesh===null&&(this.mesh=new EU),t<2&&(t=2),t>3&&(t=3);for(var i=null,n=0;n<r.length;n+=t)i===null?(i=this.mesh.makeEdge(),this.mesh.splice(i,i.Sym)):(this.mesh.splitEdge(i),i=i.Lnext),i.Org.coords[0]=r[n+0],i.Org.coords[1]=r[n+1],t>2?i.Org.coords[2]=r[n+2]:i.Org.coords[2]=0,i.Org.idx=this.vertexIndexCounter++,this.edgeCreateCallback&&this.edgeCreateCallback(i),i.winding=1,i.Sym.winding=-1},e.prototype.tesselate=function(t,r,i,n,a,s){if(t===void 0&&(t=$r.ODD),r===void 0&&(r=ln.POLYGONS),s===void 0&&(s=!0),this.vertices=[],this.elements=[],this.vertexIndices=[],this.vertexIndexCounter=0,a&&(this.normal[0]=a[0],this.normal[1]=a[1],this.normal[2]=a[2]),this.windingRule=t,n<2&&(n=2),n>3&&(n=3),!this.mesh)return!1;this.projectPolygon_(),SOe.computeInterior(this,s);var o=this.mesh;return r===ln.BOUNDARY_CONTOURS?this.setWindingNumber_(o,1,!0):this.tessellateInterior_(o),s&&o.check(),r===ln.BOUNDARY_CONTOURS?this.outputContours_(o,n):this.outputPolymesh_(o,r,i,n),!0},e}();function Th(e){var t=e.windingRule,r=t===void 0?$r.ODD:t,i=e.elementType,n=i===void 0?ln.POLYGONS:i,a=e.polySize,s=a===void 0?3:a,o=e.vertexSize,l=o===void 0?2:o,u=e.normal,h=u===void 0?[0,0,1]:u,c=e.contours,d=c===void 0?[]:c,f=e.strict,m=f===void 0?!0:f,p=e.debug,g=p===void 0?!1:p;if(!d&&m)throw new Error("Contours can't be empty");if(d){var v=new EOe;e.edgeCreateCallback&&(v.edgeCreateCallback=e.edgeCreateCallback),e.vertexIdCallback&&(v.vertexIdCallback=e.vertexIdCallback);for(var y=0;y<d.length;y++)v.addContour(l||2,d[y]);return v.tesselate(r,n,s,l,h,m),{vertices:v.vertices,vertexIndices:v.vertexIndices,vertexCount:v.vertexCount,elements:v.elements,elementCount:v.elementCount,mesh:g?v.mesh:void 0}}}$r.ODD;$r.NONZERO;$r.POSITIVE;$r.NEGATIVE;$r.ABS_GEQ_TWO;ln.POLYGONS;ln.CONNECTED_POLYGONS;ln.BOUNDARY_CONTOURS;var p3=class{constructor(e=256,t=!1){this.capacity=e,this.size=0,this.debug=t,this.debug&&console.log(`allocating with cap ${e}`);let r=e*p3.eSize;this.buffer=new ArrayBuffer(r);let i=Float32Array.BYTES_PER_ELEMENT,n=0;this.positions=new Float32Array(this.buffer,n*i,3*e),n+=3*e,this.normals=new Float32Array(this.buffer,n*i,3*e),n+=3*e,this.uvs=new Float32Array(this.buffer,n*i,2*e)}realloc(e,t=!1){if(e<this.size)throw Error("cannot shrink buffer");if(e<=this.capacity&&!t)return;this.debug&&console.log(`resizing from ${this.capacity} → ${e}`);let r=e*p3.eSize,i=new ArrayBuffer(r),n=Float32Array.BYTES_PER_ELEMENT,a=0,s=new Float32Array(i,a*n,3*e);a+=3*e;let o=new Float32Array(i,a*n,3*e);a+=3*e;let l=new Float32Array(i,a*n,2*e);t?(s.set(this.positions.subarray(0,this.size*3)),o.set(this.normals.subarray(0,this.size*3)),l.set(this.uvs.subarray(0,this.size*2))):(s.set(this.positions),o.set(this.normals),l.set(this.uvs)),this.buffer=i,this.positions=s,this.normals=o,this.uvs=l,this.capacity=e}get(e=1){let t=this.size+e;if(t>this.capacity){let i=this.capacity;for(;t>i;)i*=2;this.realloc(i)}let r=this.size;return this.size=t,r}reserve(e){let t=this.size+e;t>this.capacity&&this.realloc(t)}shrink(){this.debug&&console.log(`shrinking ${this.capacity} → ${this.size}`),this.realloc(this.size,!0)}},EY=p3;EY.eSize=(3+3+2)*Float32Array.BYTES_PER_ELEMENT;var MOe=pd(Wge()),gk={vertices:[160,160,-160,160,-160,-160,160,-160],vertexIndices:[1,0,3,2],vertexCount:4,elements:[0,4],elementCount:1,mesh:void 0},MY={vertices:[],vertexIndices:[],vertexCount:0,elements:[],elementCount:0,mesh:void 0},CY={vertices:[-160,160,160,-160,160,160,-160,-160],vertexIndices:[1,3,0,2],vertexCount:4,elements:[0,1,2,1,0,3],elementCount:2,mesh:void 0},TA=(e,t)=>([r,i])=>(i<r&&(i+=t),(e>=r?e:e+t)<=i),vk=class extends wt{constructor(e,t,r=0,i=12,n=3,a=$r.ODD,s=!1){super(),this.forPathBevel=s,this.type="ShapeGeometry",this.vertexCache={},this._shape=e,this._depth=t,this._curveSegments=i,this._bevelSegmentsInput=n;let o=this._shape.extractShapePointsToFlatArray([],i),l=this._shape.shapeHoles.map(C=>{let M=C.extractShapePointsToFlatArray([],i),P=[];for(let I=M.length-1;I>=1;I-=2){let k=M[I-1],L=M[I-0];P.push(k,L)}return P}),u=[],h=[];for(let C=0;C<o.length;C+=2)h.push([o[C],o[C+1]]);u.push(h);for(let C=0;C<l.length;C++){let M=l[C],P=[];for(let I=0;I<M.length;I+=2)P.push([M[I],M[I+1]]);u.push(P)}let c=u[0].length?(0,MOe.default)(u).distance:r;r<=0?(this._bevel=0,this._bevelSegments=0):(this._bevel=Math.min(r,c,t/2),this._bevelSegments=Math.floor(n));let d;try{d=Th({windingRule:a,elementType:ln.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[o]})}catch{d=gk}let f;try{f=Th({windingRule:$r.ODD,elementType:ln.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[...l]})}catch{f=MY}if(!d)throw new Error("error generating geometry");let m=d.elementCount;if(f){d.elementCount+=f.elementCount;for(let C=0;C<f.elements.length;C++){let M=f.elements[C],P=C%2===0?d.vertexCount:0;d.elements.push(M+P)}for(let C=0;C<f.vertexIndices.length;C++){let M=f.vertexIndices[C],P=d.vertexCount;d.vertexIndices.push(M+P)}for(let C=0;C<f.vertices.length;C++){let M=f.vertices[C];d.vertices.push(M)}}let p=1/0,g=-1/0,v=1/0,y=-1/0;for(let C=0,M=d.vertexCount;C<M;C++){let P=C*2,I=d.vertices[P+0],k=d.vertices[P+1];I<p&&(p=I),I>g&&(g=I),k<v&&(v=k),k>y&&(y=k)}this._minX=p,this._minY=v,this._width=g-p,this._height=y-v,this._buffer=new EY(this._computeBufferEstimatedSize(d));let x=[],b=[];for(let C=d.elementCount-1;C>=0;C--){let M=C>=m,P=C*2,I=d.elements[P+0],k=d.elements[P+1],L=I+k,O={start:I,count:k,normals:[],continuous:[],concave:[]},F=I,z=L-1,B=I+1,V=this._shape.roundedCurves.length;do{let G=F-I,ie=d.vertices[z*2+0],q=d.vertices[z*2+1],le=d.vertices[F*2+0],ae=d.vertices[F*2+1],Z=d.vertices[B*2+0],he=d.vertices[B*2+1],ge=le-ie,xe=ae-q,ye=Math.sqrt(ge*ge+xe*xe);ge/=ye,xe/=ye;let Ne=le-Z,Re=ae-he,qe=Math.sqrt(Ne*Ne+Re*Re);Ne/=qe,Re/=qe,O.normals[G*2+0]=-Re,O.normals[G*2+1]=Ne,O.concave[G]=ge*Re-xe*Ne>0;let se=d.vertexIndices[F];if(Array.isArray(se))O.continuous[G]=!1;else{let[ke,Be]=this._shape.getCurveIndexFromVertexId(se-1,!0);if(Be>0&&Be<1)O.continuous[G]=!0;else{let at=Be===1?ke+1:ke-1;at=(at+V)%V;let Ge=Be===1?0:1,$=this._shape.roundedCurves[ke].getTangent(Be),U=this._shape.roundedCurves[at].getTangent(Ge);O.continuous[G]=$.dot(U)>.95}}M&&(O.normals[G*2+0]*=-1,O.normals[G*2+1]*=-1),[z,F,B]=[F,B,B+1],B>=L&&(B-=k)}while(B!==I+1);let R=[];R.push({bevelI:0,angle:0,size:0,boundary:{vertices:d.vertices.slice(I*2,L*2),vertexCount:k,vertexIndices:new Array(k).fill(!0).map((G,ie)=>[ie,ie]),elements:[0,k],elementCount:1,mesh:null},reverseMap:[],insetPoints:d.vertices.slice(I*2,L*2)});let H=0;for(let G=1;G<=this._bevelSegments;G++){let ie=G/this._bevelSegments*Math.PI/2,q=(1-Math.cos(ie))*this._bevel,le=[],ae=[],Z=0;for(let ge=0;ge<k;ge++){let xe=ge*2,ye=(ge-1+k)%k*2,Ne=d.vertices[O.start*2+xe+0],Re=d.vertices[O.start*2+xe+1],qe=-O.normals[ye+0]*q,se=-O.normals[ye+1]*q,ke=-O.normals[xe+0]*q,Be=-O.normals[xe+1]*q;if(O.concave[ge]||!O.concave[ge]&&M){let at=Math.atan2(se,qe),Ge=Math.atan2(Be,ke);Ge>at&&(Ge-=Math.PI*2);let $=Ge-at;if(O.continuous[ge]||M){let U=at+$/2,fe=Math.cos(U)*q,Te=Math.sin(U)*q;le[2*Z+0]=Ne+fe*(M?-1:1),le[2*Z+1]=Re+Te*(M?-1:1),ae[Z]=ge,Z++}else{let U=Math.max(1,Math.floor(i/4*Math.abs($)/Math.PI));for(let fe=0;fe<=U;fe++){let Te=at+$*(fe/U),Ae=Math.cos(Te)*q,Fe=Math.sin(Te)*q;le[2*Z+0]=Ne+Ae,le[2*Z+1]=Re+Fe,ae[Z]=ge,Z++}}}else le[2*Z+0]=Ne+qe,le[2*Z+1]=Re+se,ae[Z]=ge,Z++,le[2*Z+0]=Ne,le[2*Z+1]=Re,ae[Z]=ge,Z++,le[2*Z+0]=Ne+ke,le[2*Z+1]=Re+Be,ae[Z]=ge,Z++}let he=Th({windingRule:$r.POSITIVE,elementType:ln.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[le],edgeCreateCallback:ge=>{let xe=ge.Org.idx,ye=ae[xe],Ne=ae[(xe+1)%ae.length];ge.idx=[ye,Ne],ge.Sym.idx=[Ne,ye]},vertexIdCallback:ge=>{let xe=ge.Lprev.idx;return[xe?xe[1]:0,ge.idx?ge.idx[0]:0]}});if(!he)throw console.log("Error"),new Error(`error generating bevel geometry for ${G}'th loop`);if(!he.vertexCount){let ge=(G-1)/this._bevelSegments*Math.PI/2;H=(1-Math.sin(ge))*this._bevel;break}for(let ge=0;ge<he.vertexIndices.length;ge++){let[xe,ye]=he.vertexIndices[ge];if(xe===ye)continue;let Ne=ye;ye<xe&&(Ne+=k);for(let Re=xe;Re<Ne;Re++){let qe=Re%k,se=(Re+1)%k;if(!O.continuous[qe]||!O.continuous[se]){he.vertexIndices[ge]=[xe,qe],he.vertexIndices.splice(ge+1,0,[se,ye]),he.vertices.splice((ge+1)*2,0,he.vertices[ge*2],he.vertices[ge*2+1]);break}}}R.push({bevelI:G,angle:ie,size:q,boundary:he,reverseMap:ae,insetPoints:le})}let W=(G,ie,q)=>{let le=0,ae=G.boundary.vertexIndices.length;for(;le<ae&&q(G.boundary.vertexIndices[ie]);)ie=(ie+1)%ae,le++;return le},te=x.length;for(let G=1;G<R.length;G++){let ie=R[G-1],q=R[G],le=ie.boundary.vertexIndices.length,ae=q.boundary.vertexIndices.length;if(!le||!ae)break;let Z=O.concave.length,he=0,ge=TA(he,k);for(;!ie.boundary.vertexIndices.filter(ge).length||!q.boundary.vertexIndices.filter(ge).length;)he++,ge=TA(he,k);let xe=ie.boundary.vertexIndices.findIndex(ge),ye=q.boundary.vertexIndices.findIndex(ge);do xe=(xe+1)%le;while(ge(ie.boundary.vertexIndices[xe]));do ye=(ye+1)%ae;while(ge(q.boundary.vertexIndices[ye]));he=(he+1)%k;let Ne=he,Re=0,qe=this._buildBevelVert(O,ie,(xe-1+le)%le,void 0,Re),se=this._buildBevelVert(O,q,(ye-1+ae)%ae,void 0,Re),ke=qe,Be=se,at,Ge,$=!1;do{Re=(he||Z)/Z,ge=TA(he,k);let U=W(ie,xe,ge),fe=W(q,ye,ge),Te=$;if($=!1,U&&!fe){for(let Ae=0;Ae<U;Ae++)at=this._buildBevelVert(O,ie,(xe+Ae)%le,Ae/(U-1),Re),x.push(ke.topN,at.topP,Be.topN),s===!1&&x.push(at.bottomP,ke.bottomN,Be.bottomN),ke=at;$=!0}else if(!U&&fe)for(let Ae=0;Ae<fe;Ae++)Ge=this._buildBevelVert(O,q,(ye+Ae)%ae,Ae/(fe-1),Re),x.push(Be.topN,ke.topP,Ge.topP),s===!1&&x.push(ke.bottomP,Be.bottomN,Ge.bottomP),Be=Ge;else if(U&&fe)if(at=this._buildBevelVert(O,ie,xe,0,Re),Ge=this._buildBevelVert(O,q,ye,0,Re),Te?(x.push(ke.topN,Ge.topP,Be.topN),x.push(ke.topN,at.topP,Ge.topP),s===!1&&(x.push(Ge.bottomP,ke.bottomN,Be.bottomN),x.push(Ge.bottomP,at.bottomP,ke.bottomN))):(x.push(Be.topN,ke.topN,at.topP),x.push(Be.topN,at.topP,Ge.topP),s===!1&&(x.push(at.bottomP,ke.bottomN,Be.bottomN),x.push(at.bottomP,Be.bottomN,Ge.bottomP))),ke=at,Be=Ge,U===fe)for(let Ae=1;Ae<U;Ae++)at=this._buildBevelVert(O,ie,(xe+Ae)%le,Ae/(U-1),Re),Ge=this._buildBevelVert(O,q,(ye+Ae)%ae,Ae/(fe-1),Re),x.push(ke.topN,at.topP,Be.topN),x.push(Be.topN,at.topP,Ge.topP),s===!1&&(x.push(at.bottomP,ke.bottomN,Be.bottomN),x.push(at.bottomP,Be.bottomN,Ge.bottomP)),ke=at,Be=Ge;else if(U>fe){let Ae=U/fe,Fe=0;for(let et=1;et<U;et++)at=this._buildBevelVert(O,ie,(xe+et)%le,et/(U-1),Re),x.push(ke.topN,at.topP,Be.topN),s===!1&&x.push(at.bottomP,ke.bottomN,Be.bottomN),ke=at,et>(Fe+1)*Ae&&(Fe++,Ge=this._buildBevelVert(O,q,(ye+Fe)%ae,Fe/(fe-1),Re),x.push(Be.topN,at.topP,Ge.topP),s===!1&&x.push(at.bottomP,Be.bottomN,Ge.bottomP),Be=Ge)}else{let Ae=fe/U,Fe=0;for(let et=1;et<fe;et++)Ge=this._buildBevelVert(O,q,(ye+et)%ae,et/(fe-1),Re),x.push(Be.topN,at.topP,Ge.topP),s===!1&&x.push(at.bottomP,Be.bottomN,Ge.bottomP),Be=Ge,et>(Fe+1)*Ae&&(Fe++,at=this._buildBevelVert(O,ie,(xe+Fe)%le,Fe/(U-1),Re),x.push(ke.topN,at.topP,Be.topN),s===!1&&x.push(at.bottomP,ke.bottomN,Be.bottomN),ke=at)}xe=(xe+U)%le,ye=(ye+fe)%ae,he=(he+1)%Z}while(he!==Ne)}if(s===!1&&this._depth>this._bevel*2&&this._buildWall(R,O,x),M){let G=[];for(let ie=x.length-1;ie>=te+2;ie-=3){let q=x[ie-2],le=x[ie-1],ae=x[ie-0];G.push(ae,le,q)}x.splice(te,x.length-te,...G)}if(M){let G=[];for(let ie=R[R.length-1].boundary.vertices.length-1;ie>=1;ie-=2){let q=R[R.length-1].boundary.vertices[ie-1],le=R[R.length-1].boundary.vertices[ie-0];G.push(q,le)}b.push(G)}if(!M){let G=R[R.length-1],ie;try{ie=Th({windingRule:R.length>1?$r.POSITIVE:$r.ODD,elementType:ln.POLYGONS,vertexSize:2,strict:!0,contours:[G.insetPoints,...b]})}catch{ie=CY}if(!ie)throw new Error("Error generating geometry for surface");l.length===0&&this._bevel<c&&Object.assign(this,{useNgonForTopBottomFaceDuringBake:!0});for(let q=0;q<ie.elementCount*3;q+=3){let le=this._buildSurfaceVert(ie,ie.elements[q+0],H),ae=this._buildSurfaceVert(ie,ie.elements[q+1],H),Z=this._buildSurfaceVert(ie,ie.elements[q+2],H);x.push(le.top,ae.top,Z.top),s===!1&&x.push(Z.bottom,ae.bottom,le.bottom)}}this.vertexCache={}}this._buffer.shrink();let _=new Bt(Uint32Array.from(x),1),w=new Bt(this._buffer.positions,3),E=new Bt(this._buffer.normals,3),S=new Bt(this._buffer.uvs,2);w.needsUpdate=!0,E.needsUpdate=!0,S.needsUpdate=!0,_.needsUpdate=!0,this.setAttribute("position",w),this.setAttribute("normal",E),this.setAttribute("uv",S),this.setIndex(_)}_computeBufferEstimatedSize(e){return e.vertexCount*2*(2+this._bevelSegments)}_buildWall(e,t,r){let i=e[0];for(let n=0,a=i.boundary.vertexCount;n<a;n++){let s=this._buildBevelVert(t,i,n),o=this._buildBevelVert(t,i,(n+1)%a);r.push(o.topP,s.topN,s.bottomN),r.push(o.topP,s.bottomN,o.bottomP)}}_buildSurfaceVert(e,t,r){let i=t.toString();if(i in this.vertexCache)return this.vertexCache[i];let n=e.vertices[t*2+0],a=e.vertices[t*2+1],s=(n-this._minX)/this._width,o=(a-this._minY)/this._height;this.forPathBevel&&(o=1);let l=this._buffer.get(this.forPathBevel?1:2),u=l*3,h=l*2,c={top:l+0,bottom:l+1};return this._buffer.positions[u+0]=n,this._buffer.positions[u+1]=a,this._buffer.positions[u+2]=this.forPathBevel?this._bevel:this._depth-r,this._buffer.normals[u+0]=0,this._buffer.normals[u+1]=0,this._buffer.normals[u+2]=1,this._buffer.uvs[h+0]=s,this._buffer.uvs[h+1]=o,this.forPathBevel===!1&&(this._buffer.positions[u+3]=n,this._buffer.positions[u+4]=a,this._buffer.positions[u+5]=r,this._buffer.normals[u+3]=0,this._buffer.normals[u+4]=0,this._buffer.normals[u+5]=-1,this._buffer.uvs[h+2]=s,this._buffer.uvs[h+3]=o),this.vertexCache[i]=c,c}_buildBevelVert(e,t,r,i=1,n){let a=`${t.bevelI}:${r}`;if(a in this.vertexCache&&n!==0&&n!==1&&(!n||n===this.vertexCache[a].pathBevelUCoord))return this.vertexCache[a];let[s,o]=t.boundary.vertexIndices[r],l,u,h,c;s!==o?(u=s,l=o,c=!1,h=e.continuous[u]&&e.continuous[l]):(l=s,u=(l-1+e.count)%e.count,c=e.concave[l]&&t.bevelI>0,h=e.continuous[l]||c);let d=Math.cos(t.angle),f=Math.sin(t.angle),m=r*2,p=l*2,g=u*2,v=t.boundary.vertices[m+0],y=t.boundary.vertices[m+1],x=(1-f)*this._bevel,b=(v-this._minX)/this._width,_=(y-this._minY)/this._height;this.forPathBevel&&(n!==void 0&&(b=n),_=1);let w=e.normals[p+0],E=e.normals[p+1],S=e.normals[g+0],C=e.normals[g+1];if(c){let L=S-w,O=C-E;w=w+L*(1-i),E=E+O*(1-i);let F=Math.sqrt(w*w+E*E);w/=F,E/=F}let M=this.forPathBevel?this._buffer.get(h?1:2):this._buffer.get(h?2:4),P=M*3,I=M*2,k={i:r,fi:l,topP:M+0,topN:M+0,bottomP:M+1,bottomN:M+1,pathBevelUCoord:n};return this._buffer.positions[P+0]=v,this._buffer.positions[P+1]=y,this._buffer.positions[P+2]=(this.forPathBevel?this._bevel:this._depth)-x,this._buffer.normals[P+0]=w*d,this._buffer.normals[P+1]=E*d,this._buffer.normals[P+2]=f,this._buffer.uvs[I+0]=b,this._buffer.uvs[I+1]=_,this.forPathBevel===!1&&(this._buffer.positions[P+3]=v,this._buffer.positions[P+4]=y,this._buffer.positions[P+5]=x,this._buffer.normals[P+3]=w*d,this._buffer.normals[P+4]=E*d,this._buffer.normals[P+5]=-f,this._buffer.uvs[I+2]=_,this._buffer.uvs[I+3]=b),h||(this.forPathBevel?(M+=1,P+=3,I+=2):(M+=2,P+=6,I+=4),k.topP=M+0,k.bottomP=M+1,this._buffer.positions[P+0]=v,this._buffer.positions[P+1]=y,this._buffer.positions[P+2]=(this.forPathBevel?this._bevel:this._depth)-x,this._buffer.normals[P+0]=S*d,this._buffer.normals[P+1]=C*d,this._buffer.normals[P+2]=f,this._buffer.uvs[I+0]=b,this._buffer.uvs[I+1]=_,this.forPathBevel===!1&&(this._buffer.positions[P+3]=v,this._buffer.positions[P+4]=y,this._buffer.positions[P+5]=x,this._buffer.normals[P+3]=S*d,this._buffer.normals[P+4]=C*d,this._buffer.normals[P+5]=-f,this._buffer.uvs[I+2]=_,this._buffer.uvs[I+3]=b)),this.vertexCache[a]=k,k}clone(){let e=new vk(this._shape,this._depth,this._bevel,this._curveSegments,this._bevelSegmentsInput);return e.userData=LE(this.userData),e}},AY=class extends wt{constructor(e,t=12,r={}){super(),this.type="ShapeGeometry",this.windingRule=$r.ODD,this.elementType=ln.POLYGONS,this.polySize=3,this.vertexSize=2,this.strict=!0,this._shape=e,this._curveSegments=t,this._triangulationOptions=Object.assign({windingRule:$r.ODD,elementType:ln.POLYGONS,polySize:3,vertexSize:2,strict:!0},r);let i=this._shape.extractShapePointsToFlatArray([],this._curveSegments),n=this._shape.shapeHoles.map(d=>d.extractShapePointsToFlatArray([],this._curveSegments)),a,s=!0,o=!0,l,u;for(let d=0,f=i.length/2;d<f;d++){let m=d*2,p=i[m+0],g=i[m+1];if(l!==void 0&&p!==l&&(s=!1),u!==void 0&&g!==u&&(o=!1),l=p,u=g,!s&&!o)break}if(!s&&!o)try{a=Th({contours:[i,...n],windingRule:this._triangulationOptions.windingRule,elementType:this._triangulationOptions.elementType,polySize:this._triangulationOptions.polySize,vertexSize:this._triangulationOptions.vertexSize,strict:this._triangulationOptions.strict})}catch{a=gk}let h=(a==null?void 0:a.vertexCount)??1,c=(a==null?void 0:a.elementCount)??1;if(this._positionAttribute=new Bt(new Float32Array(h*3),3),this._normalAttribute=new Bt(new Float32Array(h*3),3),this._uvAttribute=new Bt(new Float32Array(h*2),2),this._indexAttribute=new Bt(new Uint32Array(c*3),1),a){let d=1/0,f=-1/0,m=1/0,p=-1/0;for(let y=0,x=h;y<x;y++){let b=y*2,_=a.vertices[b+0],w=a.vertices[b+1];_<d&&(d=_),_>f&&(f=_),w<m&&(m=w),w>p&&(p=w)}let g=f-d,v=p-m;for(let y=0,x=h;y<x;y++){let b=y*2,_=a.vertices[b+0],w=a.vertices[b+1],E=(_-d)/g,S=(w-m)/v;this._positionAttribute.setXYZ(y,_,w,0),this._normalAttribute.setXYZ(y,0,0,1),this._uvAttribute.setXY(y,E,S)}for(let y=0,x=c;y<x;y++){let b=y*3,_=a.elements[b+0],w=a.elements[b+1],E=a.elements[b+2];this._indexAttribute.setX(b+0,_),this._indexAttribute.setX(b+1,w),this._indexAttribute.setX(b+2,E)}}this.setAttribute("position",this._positionAttribute),this.setAttribute("normal",this._normalAttribute),this.setAttribute("uv",this._uvAttribute),this.setIndex(this._indexAttribute),this.setDrawRange(0,((a==null?void 0:a.elementCount)??1)*3)}clone(){let e=new AY(this._shape,this._curveSegments);return e.userData=LE(this.userData),e}},TY=class extends vk{constructor(e,t,r=0,i=12,n=3,a=$r.ODD){super(e,t,r,i,n,a),this.type="ShapeGeometry"}_computeBufferEstimatedSize(e){return e.vertexCount*2*(2+this._bevelSegments)}_buildWall(e,t,r){let i=e[0];for(let n=0,a=i.boundary.vertexCount;n<a;n++){let s=this._buildBevelVert(t,i,n),o=this._buildBevelVert(t,i,(n+1)%a);r.push(o.topP,s.topN,s.bottomN),r.push(o.topP,s.bottomN,o.bottomP)}}clone(){let e=new TY(this._shape,this._depth,this._bevel,this._curveSegments,this._bevelSegmentsInput);return e.userData=LE(this.userData),e}},tp=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var u,h;let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,subdivisions:40,roundness:0,extrudeBevelSize:0,extrudeBevelSegments:3,windingRule:$r.ODD},e.parameters),i=Math.abs(r.width),n=Math.abs(r.height??r.width),a=Math.abs(r.depth??0),s=e.shape??(t==null?void 0:t.shape),o=(s==null?void 0:s.roundness)??r.roundness;s!==void 0&&(s instanceof Li?(s.width!==i||s.height!==n)&&s.applySize(i,n):s=new Li(i,n).fromJSON(s),((u=e.parameters)==null?void 0:u.roundness)!==void 0&&((h=e.parameters)==null?void 0:h.roundness)>0&&s.update());let l=s??new Li(i,n);return{parameters:Object.assign(r,{width:i,height:n,depth:a,roundness:o}),shape:l}}static build(e){let{depth:t,extrudeBevelSize:r,extrudeBevelSegments:i,subdivisions:n,roundness:a,windingRule:s}=e.parameters;e.shape.roundness=a;let o;return t<=0?o=new AY(e.shape,n,{windingRule:s}):o=new TY(e.shape,t,r,n,i,s),Object.assign(o,{userData:{...e,type:"VectorGeometry"}})}},PY=Math.PI*2,yk=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,depth:0,spikes:64,angle:360,innerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters);return r.angle=bt.clamp(r.angle,0,360),{shape:e.shape&&e.shape instanceof Li?e.shape:new Li,parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??0)})}}static build(e){let{width:t,height:r,spikes:i,angle:n,innerRadius:a,depth:s,extrudeBevelSize:o,extrudeBevelSegments:l}=e.parameters,u=e.shape,h=t*.5,c=r*.5,d=COe(u,h,c,n*Math.PI/180,i,a);u.isClosed=!0,u.update();let f;return n===0?(f=new wt,f.setAttribute("position",new it([],3))):f=tp.create({shape:u,parameters:{subdivisions:d,depth:s,extrudeBevelSize:o,extrudeBevelSegments:l}}),Object.assign(f,{userData:{...e,type:"EllipseGeometry"}})}};function COe(e,t,r,i,n,a){if(i>=PY)return n>30||n%4===0?(TOe(e,t,r,a),Math.round(n/4)):TU(e,i,n,t,r,a);i=Math.max(i,.001);let s={x:0,y:r},o=i+Math.PI*.5,l={x:Math.cos(o)*t,y:Math.sin(o)*r},u=bOe({px:s.x,py:s.y,cx:l.x,cy:l.y,rx:t,ry:r,largeArcFlag:i>Math.PI,sweepFlag:!0});return n>30||n%u.length===0?AOe(e,s.x,s.y,u,n,t,r,a):TU(e,i,n,t,r,a)}function AOe(e,t,r,i,n,a,s,o){let l=Math.round(n/i.length);e.addPoint(hg(t,r));for(let u=0,h=i.length;u<h;u++){let c=i[u],d=e.points[u],f=hg(c.x,c.y);d.controls[1].position.set(c.x1,c.y1),f.controls[0].position.set(c.x2,c.y2),e.addPoint(f)}return o>0?DY(e,a,s,o):e.addPoint(hg(0,0)),l}function TU(e,t,r,i,n,a){let s=-t/r;for(let o=0;o<=r;o++){let l=s*o,u=Math.sin(l)*i,h=Math.cos(l)*n;e.addPoint(hg(u,h))}return t<PY?a>0?DY(e,i,n,a):e.addPoint(hg(0,0)):(e.removePoint(e.points[e.points.length-1]),a>0&&OY(e,i,n,a)),1}function TOe(e,t,r,i=0,n=0,a=0){let s=.5522847498,o=t*s,l=r*s;e.addPoint(jb(n-t,a,n-t,a-l,n-t,a+l)),e.addPoint(jb(n,a+r,n-o,a+r,n+o,a+r)),e.addPoint(jb(n+t,a,n+t,a+l,n+t,a-l)),e.addPoint(jb(n,a-r,n+o,a-r,n-o,a-r)),i>0&&OY(e,t,r,i)}function hg(e,t){return new cg(bt.generateUUID(),new re(e,t))}function jb(e,t,r,i,n,a){let s=hg(e,t);return s.controls[0].position.set(r,i),s.controls[1].position.set(n,a),s}function DY(e,t,r,i){IY(e,t,r,i).forEach(n=>e.addPoint(n))}function OY(e,t,r,i){let n=IY(e,t,r,i),a=new Li;n.forEach(s=>a.addPoint(s)),a.isClosed=!0,e.shapeHoles.push(a)}function IY(e,t,r,i){let n=i*t/100,a=n*(Math.abs(r)/Math.abs(t)),s=new re(n/t,a/r),o=e.points.map(l=>{let u=l.clone();return u.uuid=bt.generateUUID(),u}).reverse();return o.forEach(l=>{l.position.multiply(s);let u=l.controls[0].position.clone().multiply(s),h=l.controls[1].position.clone().multiply(s);l.controls[0].position.copy(h),l.controls[1].position.copy(u)}),o}var POe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,revolutions:2,segments:40,pathRadius:10,pathType:0,pathSegments:30,cornerRadius:30,cornerSegments:4},e.parameters),i=Math.abs(r.width),n=Math.abs(r.height??i),a=Math.abs(r.depth??i),s=Math.abs(Math.min(i,a))/2;return{parameters:Object.assign(r,{width:i,height:n,depth:a,radius:s,segments:Math.round(r.segments),pathSegments:Math.round(r.pathSegments),cornerSegments:Math.round(r.cornerSegments)})}}static build(e){let{width:t,height:r,depth:i,radius:n,revolutions:a,segments:s,pathRadius:o,pathType:l,pathSegments:u,cornerRadius:h,cornerSegments:c}=e.parameters,d=new RY(!1,t,r,i,n,a,s,o,l,u,h,c);return Object.assign(d,{userData:{...e,type:"HelixGeometry"}})}},PA=new rg([0,0,0],1),RY=class extends wt{constructor(e=!0,t=1,r=1,i=1,n=1,a=1,s=1,o=1,l=1,u=1,h=1,c=1){if(super(),a===0)return;let d=e&&a===1;d&&(c=0),h>100&&(h=100),h===0&&(c=0);let f=()=>new T,m=new T,p=f(),g=f(),v=f(),y,x,b,_,w,E,S,C,M=f(),P=f(),I=f(),k=f(),L=f(),O=f(),F=f(),z=f(),B=r-2*o+.001,V=B/a,R=Math.ceil(s*a),H=R+1,W=B/R,te=-B/2,G=u+1,ie=2*Math.PI/u,q=Math.PI/2/c,le=.01,ae=Math.min((1-h/100)*o,o-le),Z=o-ae,he=0,ge=2,xe=c*ge+ge,ye=G*xe/ge,Ne=ye+G*H,Re=Math.max(0,G*(H+xe)),[qe,se,ke]=[3,3,2].map(we=>Array(Re*we).fill(0)),Be=[],at=n-o;function Ge(we,Ze){let Ke=Math.PI/2;E=Ze*W,C=2*Math.PI*(E%V)/V+Ke,E+=te,S=Math.sin(C)*at,w=Math.cos(C)*at,e?we.set(w,S,E):we.set(w,E,S)}Ge(m,-1e-10),Ge(p,0),M.copy(m),Ge(m,1);let $=m.distanceTo(p),U=d?0:Z+ae,fe=$*R+2*U,Te=ae,Ae=fe-U;for(let we=0;we<=R;we++){Ge(g,we),z.subVectors(g,M).normalize(),M.copy(g),O.copy(g).setComponent(+e+1,0).normalize(),F.crossVectors(z,O).normalize();let Ze=we===0,Ke=we===R,st=Ze?3*Math.PI/2:q,xt=Ze?Te:Ae,vt=Ze?G:Ne,$t=Ze?0:Re-G,ar=z.clone().multiplyScalar(Ze?-Z:Z).add(g),Or=z.clone().multiplyScalar(Ze?-1:1).normalize();for(let J=0;J<G;J++){let Me=J*ie;if(P.addVectors(m.copy(O).multiplyScalar(o*Math.cos(Me)),p.copy(F).multiplyScalar(o*Math.sin(Me))),I.copy(P).normalize(),Ze||Ke){d||(he=$t+J,[0,1,2].forEach(De=>{qe[he*3+De]=ar.getComponent(De),se[he*3+De]=Or.getComponent(De)}),ke[he*2]=+Ke,ke[he*2+1]=J/u),p.copy(I).multiplyScalar(ae),v.addVectors(g,p);for(let De=0;De<c;De++){let We=De*q+st;k.addVectors(m.copy(z).multiplyScalar(Z*Math.sin(We)),p.copy(I).multiplyScalar(Z*Math.cos(We))),L.copy(k).normalize(),p.addVectors(v,k),k.normalize(),he=vt+De*G+J,[0,1,2].forEach(jt=>{qe[he*3+jt]=p.getComponent(jt),se[he*3+jt]=L.getComponent(jt)});let gt=+Ze+Math.sin(We);ke[he*2]=(xt+Z*gt)/fe,ke[he*2+1]=J/u}}p.addVectors(g,P),he=ye+we*G+J,[0,1,2].forEach(De=>{qe[he*3+De]=p.getComponent(De),se[he*3+De]=I.getComponent(De)}),ke[he*2]=(U+we*$)/fe,ke[he*2+1]=J/u}}let Fe=H+2*c+ge,[et,Pe]=[+d,Fe-1];for(let we=et;we<=Pe-1;we++){let Ze=d&&we===Pe-1;for(let Ke=0;Ke<G-1;Ke++)y=we*G+Ke,x=y+1,b=(Ze?Ke:y)+G,_=(Ze?Ke+1:x)+G,we===0?Be.push(x,_,b):we===Fe-2?Be.push(y,x,b):Be.push(y,x,b,x,_,b)}this.setIndex(Be),this.setAttribute("position",new it(qe,3)),this.setAttribute("normal",new it(se,3)),this.setAttribute("uv",new it(ke,2))}getClosedTorusIndicesForBooleanOrSubdiv(){let e=this.userData.parameters,t=Math.ceil(e.tubularSegments),r=e.radialSegments+1,i=Array.from(this.getIndex().array),n,a,s,o,l=6*(t-1)*e.radialSegments,u=t,h=u===t;for(let c=0;c<e.radialSegments;c++)n=u*r+c,a=n+1,s=(h?c:n)+r,o=(h?c+1:a)+r,i[l++]=n,i[l++]=a,i[l++]=s,i[l++]=a,i[l++]=o,i[l++]=s;return i.length=l,PA.array=i,PA.count=i.length,PA}},DOe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,detail:0,corner:0,cornerSides:4},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??r.width)})}}static build(e){let{width:t,height:r,depth:i,detail:n,corner:a,cornerSides:s}=e.parameters,o=n===0&&a!==0?new kY(t*.5,a,s):new B7(t*.5,n);return o.scale(1,r/t,i/t),Object.assign(o,{userData:{...e,type:"IcosahedronGeometry"}})}},kY=class extends fk{constructor(e=1,t=.2,r=4){let i=(1+Math.sqrt(5))/2,n=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],a=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],s="IcosahedronGeometry";super(n,a,s,e,t,r),this.type=s}static fromJSON(e){return new kY(e.radius,e.corner,e.cornerSides)}},OOe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var i;(((i=e.parameters)==null?void 0:i.points)??[]).forEach(n=>{Array.isArray(n)&&(n.x=n[0],n.y=n[1])});let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,segments:64,verticalSegments:64,points:[{x:0,y:-50,id:0},{x:50,y:-50,id:1},{x:50,y:50,id:2},{x:0,y:50,id:3}]},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??r.width)})}}static build(e){let{points:t,segments:r,verticalSegments:i}=e.parameters,n=new mS;n.moveTo(t[0].x,t[0].y),n.bezierCurveTo(t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y);let a=new P7(n.extractPoints(i).shape,r);return a.rotateZ(Math.PI),Object.assign(a,{userData:{...e,type:"LatheGeometry"}})}},Bl=new ze,DA=new Xr,Vb=new T,$S=class extends sa{constructor(){super(),this.uuid=bt.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}applyMatrix4(e){let t=new Hn().getNormalMatrix(e);for(let r=0,i=this.vertices.length;r<i;r++)this.vertices[r].applyMatrix4(e);for(let r=0,i=this.faces.length;r<i;r++){let n=this.faces[r];n.normal.applyMatrix3(t).normalize();for(let a=0,s=n.vertexNormals.length;a<s;a++)n.vertexNormals[a].applyMatrix3(t).normalize()}return this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this}rotateX(e){return Bl.makeRotationX(e),this.applyMatrix4(Bl),this}rotateY(e){return Bl.makeRotationY(e),this.applyMatrix4(Bl),this}rotateZ(e){return Bl.makeRotationZ(e),this.applyMatrix4(Bl),this}translate(e,t,r){return Bl.makeTranslation(e,t,r),this.applyMatrix4(Bl),this}scale(e,t,r){return Bl.makeScale(e,t,r),this.applyMatrix4(Bl),this}lookAt(e){return DA.lookAt(e),DA.updateMatrix(),this.applyMatrix4(DA.matrix),this}fromBufferGeometry(e){let t=this,r=e.index!==null?e.index:void 0,i=e.attributes;if(i.position===void 0)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;let n=i.position,a=i.normal,s=i.color,o=i.uv,l=i.uv2;l!==void 0&&(this.faceVertexUvs[1]=[]);for(let c=0;c<n.count;c++)t.vertices.push(new T().fromBufferAttribute(n,c)),s!==void 0&&t.colors.push(new At().fromBufferAttribute(s,c));function u(c,d,f,m){let p=s===void 0?[]:[t.colors[c].clone(),t.colors[d].clone(),t.colors[f].clone()],g=a===void 0?[]:[new T().fromBufferAttribute(a,c),new T().fromBufferAttribute(a,d),new T().fromBufferAttribute(a,f)],v=new m3(c,d,f,g,p,m);t.faces.push(v),o!==void 0&&t.faceVertexUvs[0].push([new re().fromBufferAttribute(o,c),new re().fromBufferAttribute(o,d),new re().fromBufferAttribute(o,f)]),l!==void 0&&t.faceVertexUvs[1].push([new re().fromBufferAttribute(l,c),new re().fromBufferAttribute(l,d),new re().fromBufferAttribute(l,f)])}let h=e.groups;if(h.length>0)for(let c=0;c<h.length;c++){let d=h[c],f=d.start,m=d.count;for(let p=f,g=f+m;p<g;p+=3)r!==void 0?u(r.getX(p),r.getX(p+1),r.getX(p+2),d.materialIndex):u(p,p+1,p+2,d.materialIndex)}else if(r!==void 0)for(let c=0;c<r.count;c+=3)u(r.getX(c),r.getX(c+1),r.getX(c+2));else for(let c=0;c<n.count;c+=3)u(c,c+1,c+2);return this.computeFaceNormals(),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Vb).negate(),this.translate(Vb.x,Vb.y,Vb.z),this}normalize(){this.computeBoundingSphere();let e=this.boundingSphere.center,t=this.boundingSphere.radius,r=t===0?1:1/t,i=new ze;return i.set(r,0,0,-r*e.x,0,r,0,-r*e.y,0,0,r,-r*e.z,0,0,0,1),this.applyMatrix4(i),this}computeFaceNormals(){let e=new T,t=new T;for(let r=0,i=this.faces.length;r<i;r++){let n=this.faces[r],a=this.vertices[n.a],s=this.vertices[n.b],o=this.vertices[n.c];e.subVectors(o,s),t.subVectors(a,s),e.cross(t),e.normalize(),n.normal.copy(e)}}computeVertexNormals(e=!0){let t=new Array(this.vertices.length);for(let r=0,i=this.vertices.length;r<i;r++)t[r]=new T;if(e){let r=new T,i=new T;for(let n=0,a=this.faces.length;n<a;n++){let s=this.faces[n],o=this.vertices[s.a],l=this.vertices[s.b],u=this.vertices[s.c];r.subVectors(u,l),i.subVectors(o,l),r.cross(i),t[s.a].add(r),t[s.b].add(r),t[s.c].add(r)}}else{this.computeFaceNormals();for(let r=0,i=this.faces.length;r<i;r++){let n=this.faces[r];t[n.a].add(n.normal),t[n.b].add(n.normal),t[n.c].add(n.normal)}}for(let r=0,i=this.vertices.length;r<i;r++)t[r].normalize();for(let r=0,i=this.faces.length;r<i;r++){let n=this.faces[r],a=n.vertexNormals;a.length===3?(a[0].copy(t[n.a]),a[1].copy(t[n.b]),a[2].copy(t[n.c])):(a[0]=t[n.a].clone(),a[1]=t[n.b].clone(),a[2]=t[n.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}computeFlatVertexNormals(){this.computeFaceNormals();for(let e=0,t=this.faces.length;e<t;e++){let r=this.faces[e],i=r.vertexNormals;i.length===3?(i[0].copy(r.normal),i[1].copy(r.normal),i[2].copy(r.normal)):(i[0]=r.normal.clone(),i[1]=r.normal.clone(),i[2]=r.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}computeMorphNormals(){for(let t=0,r=this.faces.length;t<r;t++){let i=this.faces[t];i.__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]);for(let n=0,a=i.vertexNormals.length;n<a;n++)i.__originalVertexNormals[n]?i.__originalVertexNormals[n].copy(i.vertexNormals[n]):i.__originalVertexNormals[n]=i.vertexNormals[n].clone()}let e=new $S;e.faces=this.faces;for(let t=0,r=this.morphTargets.length;t<r;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];let n=this.morphNormals[t].faceNormals,a=this.morphNormals[t].vertexNormals;for(let s=0,o=this.faces.length;s<o;s++){let l=new T,u={a:new T,b:new T,c:new T};n.push(l),a.push(u)}}let i=this.morphNormals[t];e.vertices=this.morphTargets[t].vertices,e.computeFaceNormals(),e.computeVertexNormals();for(let n=0,a=this.faces.length;n<a;n++){let s=this.faces[n],o=i.faceNormals[n],l=i.vertexNormals[n];o.copy(s.normal),l.a.copy(s.vertexNormals[0]),l.b.copy(s.vertexNormals[1]),l.c.copy(s.vertexNormals[2])}}for(let t=0,r=this.faces.length;t<r;t++){let i=this.faces[t];i.normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals}}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Qi),this.boundingBox.setFromPoints(this.vertices)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ds),this.boundingSphere.setFromPoints(this.vertices)}merge(e,t,r=0){if(!(e&&e.isGeometry)){console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);return}let i,n=this.vertices.length,a=this.vertices,s=e.vertices,o=this.faces,l=e.faces,u=this.colors,h=e.colors;t!==void 0&&(i=new Hn().getNormalMatrix(t));for(let c=0,d=s.length;c<d;c++){let f=s[c].clone();t!==void 0&&f.applyMatrix4(t),a.push(f)}for(let c=0,d=h.length;c<d;c++)u.push(h[c].clone());for(let c=0,d=l.length;c<d;c++){let f=l[c],m,p,g=f.vertexNormals,v=f.vertexColors,y=new m3(f.a+n,f.b+n,f.c+n);y.normal.copy(f.normal),i!==void 0&&y.normal.applyMatrix3(i).normalize();for(let x=0,b=g.length;x<b;x++)m=g[x].clone(),i!==void 0&&m.applyMatrix3(i).normalize(),y.vertexNormals.push(m);y.color.copy(f.color);for(let x=0,b=v.length;x<b;x++)p=v[x],y.vertexColors.push(p.clone());y.materialIndex=f.materialIndex+r,o.push(y)}for(let c=0,d=e.faceVertexUvs.length;c<d;c++){let f=e.faceVertexUvs[c];this.faceVertexUvs[c]===void 0&&(this.faceVertexUvs[c]=[]);for(let m=0,p=f.length;m<p;m++){let g=f[m],v=[];for(let y=0,x=g.length;y<x;y++)v.push(g[y].clone());this.faceVertexUvs[c].push(v)}}}mergeMesh(e){if(!(e&&e.isMesh)){console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e);return}e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)}mergeVertices(e=4){let t={},r=[],i=[],n=Math.pow(10,e);for(let o=0,l=this.vertices.length;o<l;o++){let u=this.vertices[o],h=Math.round(u.x*n)+"_"+Math.round(u.y*n)+"_"+Math.round(u.z*n);t[h]===void 0?(t[h]=o,r.push(this.vertices[o]),i[o]=r.length-1):i[o]=i[t[h]]}let a=[];for(let o=0,l=this.faces.length;o<l;o++){let u=this.faces[o];u.a=i[u.a],u.b=i[u.b],u.c=i[u.c];let h=[u.a,u.b,u.c];for(let c=0;c<3;c++)if(h[c]===h[(c+1)%3]){a.push(o);break}}for(let o=a.length-1;o>=0;o--){let l=a[o];this.faces.splice(l,1);for(let u=0,h=this.faceVertexUvs.length;u<h;u++)this.faceVertexUvs[u].splice(l,1)}let s=this.vertices.length-r.length;return this.vertices=r,s}setFromPoints(e){this.vertices=[];for(let t=0,r=e.length;t<r;t++){let i=e[t];this.vertices.push(new T(i.x,i.y,i.z||0))}return this}sortFacesByMaterialIndex(){let e=this.faces,t=e.length;for(let o=0;o<t;o++)e[o]._id=o;function r(o,l){return o.materialIndex-l.materialIndex}e.sort(r);let i=this.faceVertexUvs[0],n=this.faceVertexUvs[1],a,s;i&&i.length===t&&(a=[]),n&&n.length===t&&(s=[]);for(let o=0;o<t;o++){let l=e[o]._id;a&&a.push(i[l]),s&&s.push(n[l])}a&&(this.faceVertexUvs[0]=a),s&&(this.faceVertexUvs[1]=s)}toJSON(){let e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),this.parameters!==void 0){let f=this.parameters;for(let m in f)f[m]!==void 0&&(e[m]=f[m]);return e}let t=[];for(let f=0;f<this.vertices.length;f++){let m=this.vertices[f];t.push(m.x,m.y,m.z)}let r=[],i=[],n={},a=[],s={},o=[],l={};for(let f=0;f<this.faces.length;f++){let m=this.faces[f],p=!0,g=!1,v=this.faceVertexUvs[0][f]!==void 0,y=m.normal.length()>0,x=m.vertexNormals.length>0,b=m.color.r!==1||m.color.g!==1||m.color.b!==1,_=m.vertexColors.length>0,w=0;if(w=u(w,0,0),w=u(w,1,p),w=u(w,2,g),w=u(w,3,v),w=u(w,4,y),w=u(w,5,x),w=u(w,6,b),w=u(w,7,_),r.push(w),r.push(m.a,m.b,m.c),r.push(m.materialIndex),v){let E=this.faceVertexUvs[0][f];r.push(d(E[0]),d(E[1]),d(E[2]))}if(y&&r.push(h(m.normal)),x){let E=m.vertexNormals;r.push(h(E[0]),h(E[1]),h(E[2]))}if(b&&r.push(c(m.color)),_){let E=m.vertexColors;r.push(c(E[0]),c(E[1]),c(E[2]))}}function u(f,m,p){return p?f|1<<m:f&~(1<<m)}function h(f){let m=f.x.toString()+f.y.toString()+f.z.toString();return n[m]!==void 0||(n[m]=i.length/3,i.push(f.x,f.y,f.z)),n[m]}function c(f){let m=f.r.toString()+f.g.toString()+f.b.toString();return s[m]!==void 0||(s[m]=a.length,a.push(f.getHex())),s[m]}function d(f){let m=f.x.toString()+f.y.toString();return l[m]!==void 0||(l[m]=o.length/2,o.push(f.x,f.y)),l[m]}return e.data={},e.data.vertices=t,e.data.normals=i,a.length>0&&(e.data.colors=a),o.length>0&&(e.data.uvs=[o]),e.data.faces=r,e}clone(){return new $S().copy(this)}copy(e){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;let t=e.vertices;for(let c=0,d=t.length;c<d;c++)this.vertices.push(t[c].clone());let r=e.colors;for(let c=0,d=r.length;c<d;c++)this.colors.push(r[c].clone());let i=e.faces;for(let c=0,d=i.length;c<d;c++)this.faces.push(i[c].clone());for(let c=0,d=e.faceVertexUvs.length;c<d;c++){let f=e.faceVertexUvs[c];this.faceVertexUvs[c]===void 0&&(this.faceVertexUvs[c]=[]);for(let m=0,p=f.length;m<p;m++){let g=f[m],v=[];for(let y=0,x=g.length;y<x;y++){let b=g[y];v.push(b.clone())}this.faceVertexUvs[c].push(v)}}let n=e.morphTargets;for(let c=0,d=n.length;c<d;c++){let f={};if(f.name=n[c].name,n[c].vertices!==void 0){f.vertices=[];for(let m=0,p=n[c].vertices.length;m<p;m++)f.vertices.push(n[c].vertices[m].clone())}if(n[c].normals!==void 0){f.normals=[];for(let m=0,p=n[c].normals.length;m<p;m++)f.normals.push(n[c].normals[m].clone())}this.morphTargets.push(f)}let a=e.morphNormals;for(let c=0,d=a.length;c<d;c++){let f={};if(a[c].vertexNormals!==void 0){f.vertexNormals=[];for(let m=0,p=a[c].vertexNormals.length;m<p;m++){let g=a[c].vertexNormals[m],v={};v.a=g.a.clone(),v.b=g.b.clone(),v.c=g.c.clone(),f.vertexNormals.push(v)}}if(a[c].faceNormals!==void 0){f.faceNormals=[];for(let m=0,p=a[c].faceNormals.length;m<p;m++)f.faceNormals.push(a[c].faceNormals[m].clone())}this.morphNormals.push(f)}let s=e.skinWeights;for(let c=0,d=s.length;c<d;c++)this.skinWeights.push(s[c].clone());let o=e.skinIndices;for(let c=0,d=o.length;c<d;c++)this.skinIndices.push(o[c].clone());let l=e.lineDistances;for(let c=0,d=l.length;c<d;c++)this.lineDistances.push(l[c]);let u=e.boundingBox;u!==null&&(this.boundingBox=u.clone());let h=e.boundingSphere;return h!==null&&(this.boundingSphere=h.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}toBufferGeometry(){let e=new IOe().fromGeometry(this),t=new wt,r=new Float32Array(e.vertices.length*3);if(t.setAttribute("position",Hb.call(new Bt(r,3),e.vertices)),e.normals.length>0){let i=new Float32Array(e.normals.length*3);t.setAttribute("normal",Hb.call(new Bt(i,3),e.normals))}if(e.colors.length>0){let i=new Float32Array(e.colors.length*3);t.setAttribute("color",PU.call(new Bt(i,3),e.colors))}if(e.uvs.length>0){let i=new Float32Array(e.uvs.length*2);t.setAttribute("uv",DU.call(new Bt(i,2),e.uvs))}if(e.uvs2.length>0){let i=new Float32Array(e.uvs2.length*2);t.setAttribute("uv2",DU.call(new Bt(i,2),e.uvs2))}t.groups=e.groups;for(let i in e.morphTargets){let n=[],a=e.morphTargets[i];for(let s=0,o=a.length;s<o;s++){let l=a[s],u=new it(l.data.length*3,3);u.name=l.name,n.push(Hb.call(u,l.data))}t.morphAttributes[i]=n}if(e.skinIndices.length>0){let i=new it(e.skinIndices.length*4,4);t.setAttribute("skinIndex",OU.call(i,e.skinIndices))}if(e.skinWeights.length>0){let i=new it(e.skinWeights.length*4,4);t.setAttribute("skinWeight",OU.call(i,e.skinWeights))}return e.boundingSphere!==null&&(t.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(t.boundingBox=e.boundingBox.clone()),t}computeTangents(){console.error("THREE.Geometry: .computeTangents() has been removed.")}computeLineDistances(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}applyMatrix(e){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}dispose(){this.dispatchEvent({type:"dispose"})}static createBufferGeometryFromObject(e){let t=new wt,r=e.geometry;if(e.isPoints||e.isLine){let i=new it(r.vertices.length*3,3),n=new it(r.colors.length*3,3);if(t.setAttribute("position",Hb.call(i,r.vertices)),t.setAttribute("color",PU.call(n,r.colors)),r.lineDistances&&r.lineDistances.length===r.vertices.length){let a=new it(r.lineDistances.length,1);t.setAttribute("lineDistance",ROe.call(a,r.lineDistances))}r.boundingSphere!==null&&(t.boundingSphere=r.boundingSphere.clone()),r.boundingBox!==null&&(t.boundingBox=r.boundingBox.clone())}else e.isMesh&&(t=r.toBufferGeometry());return t}};$S.prototype.isGeometry=!0;var IOe=class{constructor(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}computeGroups(e){let t=[],r,i,n,a=e.faces;for(i=0;i<a.length;i++){let s=a[i];s.materialIndex!==n&&(n=s.materialIndex,r!==void 0&&(r.count=i*3-r.start,t.push(r)),r={start:i*3,materialIndex:n})}r!==void 0&&(r.count=i*3-r.start,t.push(r)),this.groups=t}fromGeometry(e){let t=e.faces,r=e.vertices,i=e.faceVertexUvs,n=i[0]&&i[0].length>0,a=i[1]&&i[1].length>0,s=e.morphTargets,o=s.length,l;if(o>0){l=[];for(let g=0;g<o;g++)l[g]={name:s[g].name,data:[]};this.morphTargets.position=l}let u=e.morphNormals,h=u.length,c;if(h>0){c=[];for(let g=0;g<h;g++)c[g]={name:u[g].name,data:[]};this.morphTargets.normal=c}let d=e.skinIndices,f=e.skinWeights,m=d.length===r.length,p=f.length===r.length;r.length>0&&t.length===0&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(let g=0;g<t.length;g++){let v=t[g];this.vertices.push(r[v.a],r[v.b],r[v.c]);let y=v.vertexNormals;if(y.length===3)this.normals.push(y[0],y[1],y[2]);else{let b=v.normal;this.normals.push(b,b,b)}let x=v.vertexColors;if(x.length===3)this.colors.push(x[0],x[1],x[2]);else{let b=v.color;this.colors.push(b,b,b)}if(n===!0){let b=i[0][g];b!==void 0?this.uvs.push(b[0],b[1],b[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",g),this.uvs.push(new re,new re,new re))}if(a===!0){let b=i[1][g];b!==void 0?this.uvs2.push(b[0],b[1],b[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",g),this.uvs2.push(new re,new re,new re))}for(let b=0;b<o;b++){let _=s[b].vertices;l[b].data.push(_[v.a],_[v.b],_[v.c])}for(let b=0;b<h;b++){let _=u[b].vertexNormals[g];c[b].data.push(_.a,_.b,_.c)}m&&this.skinIndices.push(d[v.a],d[v.b],d[v.c]),p&&this.skinWeights.push(f[v.a],f[v.b],f[v.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),this}},m3=class{constructor(e,t,r,i,n,a=0){this.a=e,this.b=t,this.c=r,this.normal=i&&i.isVector3?i:new T,this.vertexNormals=Array.isArray(i)?i:[],this.color=n&&n.isColor?n:new At,this.vertexColors=Array.isArray(n)?n:[],this.materialIndex=a}clone(){return new this.constructor().copy(this)}copy(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(let t=0,r=e.vertexNormals.length;t<r;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(let t=0,r=e.vertexColors.length;t<r;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}};function ROe(e){return this.array.set(e),this}function PU(e){let t=this.array,r=0;for(let i=0,n=e.length;i<n;i++){let a=e[i];a===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),a=new At),t[r++]=a.r,t[r++]=a.g,t[r++]=a.b}return this}function DU(e){let t=this.array,r=0;for(let i=0,n=e.length;i<n;i++){let a=e[i];a===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),a=new re),t[r++]=a.x,t[r++]=a.y}return this}function Hb(e){let t=this.array,r=0;for(let i=0,n=e.length;i<n;i++){let a=e[i];a===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),a=new T),t[r++]=a.x,t[r++]=a.y,t[r++]=a.z}return this}function OU(e){let t=this.array,r=0;for(let i=0,n=e.length;i<n;i++){let a=e[i];a===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),a=new Wt),t[r++]=a.x,t[r++]=a.y,t[r++]=a.z,t[r++]=a.w}return this}var kOe=["a","b","c"];function LOe(e,t){switch(t){case"c":return e.c;case"b":return e.b;case"a":default:return e.a}}function OA(e,t,r){let i=Math.min(e,t),n=Math.max(e,t),a=i+"_"+n;return r.get(a)}function IA(e,t,r,i,n,a){let s=Math.min(e,t),o=Math.max(e,t),l=s+"_"+o,u;if(i.has(l))u=i.get(l);else{let h=r[s],c=r[o];u={a:h,b:c,newEdge:null,faces:[]},i.set(l,u)}u.faces.push(n),a[e].edges.push(u),a[t].edges.push(u)}function BOe(e,t,r,i){let n,a,s;for(n=0,a=e.length;n<a;n++)r[n]={edges:[]};for(n=0,a=t.length;n<a;n++)s=t[n],IA(s.a,s.b,e,i,s,r),IA(s.b,s.c,e,i,s,r),IA(s.c,s.a,e,i,s,r)}function Gb(e,t,r,i,n){e.push(new m3(t,r,i,void 0,void 0,n))}function Hp(e,t){return Math.abs(t-e)/2+Math.min(e,t)}function Wb(e,t,r,i){e.push([t.clone(),r.clone(),i.clone()])}var NOe=class{constructor(e=1){this.subdivisions=e}modify(e){e instanceof wt?e=new $S().fromBufferGeometry(e):e=e.clone(),e.mergeVertices();let t=this.subdivisions;for(;t-- >0;)this._smooth(e);return e.computeFaceNormals(),e.computeVertexNormals(),e}_smooth(e){let t=new T,r,i,n,a,s,o=e.vertices,l=e.faces,u=e.faceVertexUvs[0],h=u!==void 0&&u.length>0,c=[],d=new Map;BOe(o,l,c,d);let f=[],m,p,g,v,y,x,b;for(let le of Array.from(d.keys())){for(p=d.get(le),g=new T,y=3/8,x=1/8,b=p.faces.length,b!=2&&(y=.5,x=0,b!=1),g.addVectors(p.a,p.b).multiplyScalar(y),t.set(0,0,0),a=0;a<b;a++){for(v=p.faces[a],s=0;s<3&&(m=o[LOe(v,kOe[s])],!(m!==p.a&&m!==p.b));s++);m&&t.add(m)}t.multiplyScalar(x),g.add(t),p.newEdge=f.length,f.push(g)}let _,w,E,S,C,M,P,I=[];for(i=0,n=o.length;i<n;i++){for(M=o[i],C=c[i].edges,r=C.length,r==3?_=3/16:r>3&&(_=3/(8*r)),w=1-r*Number(_),E=_,r<=2&&(r==2?(w=3/4,E=1/8):r==1||r==0),P=M.clone().multiplyScalar(w),t.set(0,0,0),a=0;a<r;a++)S=C[a],m=S.a!==M?S.a:S.b,t.add(m);t.multiplyScalar(Number(E)),P.add(t),I.push(P)}let k=I.concat(f),L=I.length,O,F,z,B=[],V=[],R,H,W,te,G=new re,ie=new re,q=new re;for(i=0,n=l.length;i<n;i++)v=l[i],O=Number(OA(v.a,v.b,d).newEdge)+L,F=Number(OA(v.b,v.c,d).newEdge)+L,z=Number(OA(v.c,v.a,d).newEdge)+L,Gb(B,O,F,z,v.materialIndex),Gb(B,v.a,O,z,v.materialIndex),Gb(B,v.b,F,O,v.materialIndex),Gb(B,v.c,z,F,v.materialIndex),h&&(R=u[i],H=R[0],W=R[1],te=R[2],G.set(Hp(H.x,W.x),Hp(H.y,W.y)),ie.set(Hp(W.x,te.x),Hp(W.y,te.y)),q.set(Hp(H.x,te.x),Hp(H.y,te.y)),Wb(V,G,ie,q),Wb(V,H,G,q),Wb(V,W,ie,G),Wb(V,te,q,ie));e.vertices=k,e.faces=B,h&&(e.faceVertexUvs[0]=V)}},yn=new T,zOe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=e.geometry??(t==null?void 0:t.geometry)??new wt().copy(new Eu(100,100,100)),i;t===void 0?(r.computeBoundingBox(),r.boundingBox.getSize(yn),i={width:yn.x,height:yn.y,depth:yn.z,subdivisions:0}):i=t.parameters;let n={...i,...e.parameters};return{parameters:{width:Math.abs(n.width),height:Math.abs(n.height),depth:Math.abs(n.depth),subdivisions:Math.abs(n.subdivisions)},geometry:r}}static build(e){let{width:t,height:r,depth:i,subdivisions:n}=e.parameters,a=e.geometry??new wt().copy(new Eu(100,100,100)),s=a.userData.parameters;s===void 0?(a.computeBoundingBox(),a.boundingBox.getSize(yn)):yn.set(s.width,s.height,s.depth),(t!==yn.x||r!==yn.y||i!==yn.z)&&a.scale(yn.x===0?1:t/yn.x,yn.y===0?1:r/yn.y,yn.z===0?1:i/yn.z);let o=a.originalGeometry;try{n>0?(o===void 0||(s==null?void 0:s.subdivisions)!==n)&&(o===void 0&&(o=a),a=new NOe(n).modify(o).toBufferGeometry()):(o!==void 0&&(a=o),o=void 0,a.getAttribute("normal")===void 0&&a.computeVertexNormals())}catch{o!==void 0&&(a=o),o=void 0,a.getAttribute("normal")===void 0&&a.computeVertexNormals()}return o!==void 0&&Object.assign(a,{originalGeometry:o}),delete e.geometry,Object.assign(a,{userData:{...e,type:"NonParametricGeometry"}})}static loadFromUrl(e,t,r){new H7(r).load(e,i=>{let n=this.normalizeInputs({geometry:i});i.boundingBox.getSize(yn);let a=100/yn.x;Object.assign(n.parameters,{width:100,height:yn.y*a,depth:yn.z*a}),t(this.build(n))})}},LY=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,depth:0,spikes:5,cornerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:3},e.parameters);return{shape:e.shape&&e.shape instanceof Li?e.shape:new Li,parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??0)})}}static build(e){let{width:t,height:r,spikes:i,cornerRadius:n,depth:a,extrudeBevelSize:s,extrudeBevelSegments:o}=e.parameters,l=e.shape,u=t*.5,h=r*.5,c=0,d=0,f=2*Math.PI/i;for(let p=0;p<i;p++){let g=f*p,v=c+Math.sin(g)*u,y=d+Math.cos(g)*h;l.addPoint(l.createPoint(v,y))}l.isClosed=!0;for(let p=0,g=l.points.length;p<g;p++)l.points[p].roundness=n;l.roundness=n,l.update();let m=tp.create({shape:l,parameters:{roundness:n,depth:a,extrudeBevelSize:s,extrudeBevelSegments:o}});return Object.assign(m,{userData:{...e,type:"PolygonGeometry"}})}},FOe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,radialSegments:4,heightSegments:1,cornerRadius:0,cornerSegments:8,openEnded:!1},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??r.width)})}}static build(e){let{width:t,height:r,depth:i,radialSegments:n,heightSegments:a,openEnded:s,cornerRadius:o,cornerSegments:l}=e.parameters,u=new jOe(t*.5,r,n,a,s,o,l);return u.scale(1,1,i/t),Object.assign(u,{userData:{...e,type:"PyramidGeometry"}})}};function d0(e,t,r){r.x=e.x*t.x,r.y=e.y,r.z=e.x*t.y}function RA(e,t,r,i,n,a){let s=t.clone().sub(e),o=r.clone().sub(e),l=s.angleTo(o);if(s.normalize(),o.normalize(),i===n){let u=s.add(o).normalize();a.copy(e).addScaledVector(u,i/Math.sin(l/2))}else{let u=s.angleTo(o);a.copy(e),a.addScaledVector(s,n/Math.sin(u)),a.addScaledVector(o,i/Math.sin(u))}}function UOe(e,t,r){let i=e.clone().sub(t),n=r.clone().sub(t);return i.projectOnVector(n),i.add(t)}var jOe=class extends wt{constructor(e=.5,t=1,r=4,i=1,n=!1,a=0,s=4){super(),r=Math.floor(Math.max(3,r)),i=Math.floor(i),s=Math.floor(s);let o=[],l=[],u=[],h=[],c=0,d=t/2,f=Math.PI/r,m=e*Math.cos(Math.PI/r),p=2*Math.PI/r,g=(r-2)*Math.PI/r,v=Math.PI-g,y=new T(0,-d,0),x=new T(0,d,0),b=new re(e,-d),_=new re(m,-d),w=new re(0,x.y).sub(_),E=new re(0,x.y).sub(b),S=new re(w.y,-w.x).normalize(),C=new re(E.y,-E.x).normalize(),M=e*Math.cos(Math.PI/r)*Math.tan((Math.PI-w.angle())/2)-1e-8;a=Math.min(a,M);let P;{let z=new T(S.x,S.y,0),B=new T(Math.cos(p)*z.x,z.y,Math.sin(p)*z.x);P=z.angleTo(B)}let I=a/Math.tan((Math.PI-w.angle())/2),k=a/Math.tan((Math.PI-P)/2),L=new T;if(!n){l.push(y.x,y.y,y.z),u.push(0,-1,0),h.push(0,0);let z=c++,B=[],V=b.clone(),R=I/Math.cos(Math.PI/r);V.x-=R;for(let H=0;H<r;H++){let W=H/r*Math.PI*2+f,te=new re(Math.sin(W),Math.cos(W));d0(V,te,L),l.push(L.x,L.y,L.z),u.push(0,-1,0),h.push(0,0),B.push(c++)}for(let H=0;H<B.length;H++)o.push(B[H],z,B[(H+1)%B.length])}{let z=new T,B=new T,V=new T,R=new T,H=new T,W=new T;for(let te=0;te<r;te++){let G=te/r*Math.PI*2+f,ie=(te+.5)/r*Math.PI*2+f,q=(te+1)/r*Math.PI*2+f,le=new re(Math.sin(G),Math.cos(G)),ae=new re(Math.sin(ie),Math.cos(ie)),Z=new re(Math.sin(q),Math.cos(q));d0(b,le,B),d0(b,Z,V),d0(S,ae,z),RA(x,B,V,k,k,R),l.push(R.x,R.y,R.z),RA(B,x,V,k,I,H),l.push(H.x,H.y,H.z),RA(V,B,x,I,k,W),l.push(W.x,W.y,W.z),u.push(z.x,z.y,z.z),u.push(z.x,z.y,z.z),u.push(z.x,z.y,z.z),h.push(0,0),h.push(0,0),h.push(0,0);let he=c++,ge=c++,xe=c++;if(o.push(he,ge,xe),a>0){{let Re=B.clone().add(V).multiplyScalar(.5),qe=x.clone().sub(Re).normalize(),se=y.clone().sub(Re).normalize().add(qe).normalize().multiplyScalar(-1),ke=W.clone().sub(H);O(Re,ke,se,w.angle())}let ye,Ne;{let Re=new T;d0(C,Z,Re);let qe=W.clone().add(R).multiplyScalar(.5);qe=UOe(qe,V,x);let se=W.clone().sub(R);[ye,Ne]=O(qe,se,Re,P,R.y)}{let Re=ye,qe=Re.clone().setY(0).normalize(),se=new T(0,-1,0),ke=qe.clone().cross(se);F(Re,qe,se,ke)}{let Re=w.angle(),qe=Math.PI-Re,se=x.clone();se.y-=a/Math.sin(Re-Math.PI/2);let ke=new T,Be=[];for(let Ge=0;Ge<s;Ge++){let $=[],U=Math.PI/2-qe*Ge/s,fe=Math.cos(U),Te=Math.sin(U),Ae=ie;for(let Fe=0;Fe<=Ge;Fe++){let et=Math.cos(Ae),Pe=Math.sin(Ae);z.x=fe*Pe,z.y=Te,z.z=fe*et,ke.copy(se).addScaledVector(z,a),l.push(ke.x,ke.y,ke.z),u.push(z.x,z.y,z.z),h.push(0,0),$.push(c++),Ae+=Math.PI*2/Ge/r}Be.push($)}Ne.reverse(),Be.push(Ne);let at=Be.length-1;for(let Ge=0;Ge<at;Ge++){let $=Be[Ge],U=Be[Ge+1],fe=$.length-1;o.push(U[1],$[0],U[0]);for(let Te=1;Te<=fe;Te++)o.push($[Te],$[Te-1],U[Te]),o.push(U[Te+1],$[Te],U[Te])}}}}}this.setIndex(o),this.setAttribute("position",new it(l,3)),this.setAttribute("normal",new it(u,3)),this.setAttribute("uv",new it(h,2));function O(z,B,V,R,H){let W=-R/2,te=(Math.PI-R)/2,G=B.clone().normalize().cross(V);z.addScaledVector(V,-a/Math.sin(te));let ie=new T,q=new T,le=1,ae=c,Z=[];for(let he=0;he<=s;he++){let ge=W+he/s*R;q.set(0,0,0),q.addScaledVector(G,Math.sin(ge)),q.addScaledVector(V,Math.cos(ge));for(let xe=0;xe<=le;xe++){let ye=xe/le-.5;if(ie.copy(z),ie.addScaledVector(B,ye),ie.addScaledVector(q,a),H!=null){let Ne=Math.max(0,ie.y-H);ie.addScaledVector(B,-Ne/B.y)}l.push(ie.x,ie.y,ie.z),u.push(q.x,q.y,q.z),h.push(0,0),xe===0&&Z.push(c),c++}}for(let he=0;he<s;he++)for(let ge=0;ge<le;ge++){let xe=ae+ge+(le+1)*he,ye=xe+(le+1),Ne=ye+1,Re=xe+1;o.push(xe,ye,Re),o.push(ye,Ne,Re)}return[z.clone().addScaledVector(B,.5),Z]}function F(z,B,V,R){let H=Math.PI/2,W=E.angle()-H,te=[],G=new T,ie=new T;for(let le=0;le<=s;le++){let ae=[],Z=le/s;for(let he=0;he<=le;he++){let ge=((le?he/le:0)-.5)*v,xe=Math.cos(ge),ye=Math.sin(ge),Ne=Math.atan(Math.tan(W)*xe),Re=(H+Ne)*Z,qe=Math.cos(Re),se=Math.sin(Re);G.set(0,0,0),G.addScaledVector(B,se*xe),G.addScaledVector(V,qe),G.addScaledVector(R,se*ye),ie.copy(z).addScaledVector(G,a),l.push(ie.x,ie.y,ie.z),u.push(G.x,G.y,G.z),h.push(0,0),ae.push(c++)}te.push(ae)}let q=te.length-1;for(let le=0;le<q;le++){let ae=te[le],Z=te[le+1],he=ae.length-1;o.push(ae[0],Z[1],Z[0]);for(let ge=1;ge<=he;ge++)o.push(ae[ge-1],ae[ge],Z[ge]),o.push(ae[ge],Z[ge+1],Z[ge])}}}},BY=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,depth:0,cornerRadius:[0,0,0,0],cornerType:1,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters),i=Object.assign((t==null?void 0:t.ui)??{enabledIndieCorners:!1},e.ui);return{shape:e.shape&&e.shape instanceof Li?e.shape:new Li,parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??0)}),ui:i}}static build(e){let t=e.shape,{width:r,height:i,cornerRadius:n,cornerType:a,depth:s,extrudeBevelSize:o,extrudeBevelSegments:l}=e.parameters,u={x:r*.5,y:i*.5},h={x:-u.x,y:-u.y},c={x:u.x,y:u.y};function d(b,_,w){return _>r&&w>i?Math.min(b*r/_,b*i/w):_>r?b*r/_:w>i?b*i/w:b}let f=[];f[0]=n[0]===0?0:d(n[0],n[0]+n[3],n[0]+n[1]),f[1]=n[1]===0?0:d(n[1],n[1]+n[2],n[1]+n[0]),f[2]=n[2]===0?0:d(n[2],n[2]+n[1],n[2]+n[3]),f[3]=n[3]===0?0:d(n[3],n[3]+n[0],n[3]+n[2]);let m=h.x,p=c.x,g=c.y,v=h.y;t.addPoint(t.createPoint(m,g)),t.addPoint(t.createPoint(p,g)),t.addPoint(t.createPoint(p,v)),t.addPoint(t.createPoint(m,v)),t.isClosed=!0;let y=!0;for(let b=0,_=t.points.length;b<_;b++)t.points[b].roundness=f[b],b>0&&f[b]!==f[b-1]&&(y=!1);y&&(t.roundness=f[0]),t.useCubicForRoundedCorners=a!==1,t.update();let x=tp.create({shape:t,parameters:{depth:s,extrudeBevelSize:o,extrudeBevelSegments:l}});return Object.assign(x,{userData:{...e,type:"RectangleGeometry"}})}},VOe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,widthSegments:64,heightSegments:64,phiStart:0,phiLength:2*Math.PI,thetaStart:0,thetaLength:180},e.parameters);return r.thetaLength=bt.clamp(r.thetaLength,0,180),{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??r.width)})}}static build(e){let{width:t=100,height:r=t,depth:i=t,widthSegments:n=64,heightSegments:a=64,phiStart:s,phiLength:o,thetaStart:l,thetaLength:u}=e.parameters,h;return u===0?(h=new wt,h.setAttribute("position",new it([],3))):h=new OR(.5*t,n,a,s,o,l,u*bt.DEG2RAD),h.scale(1,r/t,i/t),Object.assign(h,{userData:{...e,type:"SphereGeometry"}})}},HOe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,depth:0,widthSegments:8,heightSegments:8},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:0})}}static build(e){let{width:t=100,height:r=t,widthSegments:i=8,heightSegments:n=8}=e.parameters,a=new EE(t,r,i,n);return a.scale(1,1,1),Object.assign(a,{userData:{...e,type:"PlaneGeometry"}})}},GOe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,angle:90,cornerRadius:24,cornerSegments:8},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??r.width)})}}static build(e){let{width:t,height:r,depth:i,angle:n,cornerRadius:a,cornerSegments:s}=e.parameters,o=new WOe(t,r,i,n,a,s);return Object.assign(o,{userData:{...e,type:"BackdropGeometry"}})}},WOe=class extends wt{constructor(e=1,t=1,r=1,i=90,n=10,a=24){super(),this.type="BackdropGeometry";let s=[],o=[],l=[],u=.001;n==0&&(a=1),a=Math.max(1,Math.floor(a)),n=Math.min(n,100),i=Math.min(180-u,i),i*=Math.PI/180;let h=[],c=Math.PI/2,d=(le=0,ae=0,Z=0)=>new T(le,ae,Z),f=d(),m=d(),[p,g,v]=[t/2,e/2,r/2],y=-g,x=+g,[b,_,w]=[d(y,-p,+v),d(y,-p,-v),d(y,+p,-v)],E=(le,ae=!1)=>Math.sin(le-Math.PI/(1+ +ae)),S=(le,ae=!1)=>Math.cos(le-Math.PI/(1+ +ae));w.y=Math.sin(i)*t-p;let C=Math.cos(i)*t-v,M=b.z-u;i<=c?(w.z=Math.min(C,M),w.z==M&&(w.y-=(C-M)/Math.tan(c-i))):_.z=Math.min(_.z-C-v,b.z-u),f.subVectors(b,_),m.subVectors(w,_);let P=Math.min(f.length(),m.length())*n/100,I=P*Math.tan(i/2),k=P/Math.cos(i/2),L=f.clone().normalize().add(m.normalize()).setLength(k).add(_);f.set(0,E(i,!0),S(i,!0)),h.push([w,f.clone()]);let O=(Math.PI-i)/a;for(let le=0;le<=a;le++){let ae=c+i+le*O;f.set(0,Math.sin(ae)*I,Math.cos(ae)*I),f.add(L),m.set(0,E(ae),S(ae)),h.push([f.clone(),m.clone()])}h.push([b,d(0,1,0)]);let F=Math.sin(O/2)*I*2,z=h.length-1,B=h[0][0].distanceTo(h[1][0]),V=h[z-1][0].distanceTo(h[z][0]),R=B+F*a+V;h[0].push(1);for(let le=0;le<=a;le++)h[le+1].push(1-(B+le*F)/R);h[z].push(0);let[H,W,te]=h[0],G,ie,q;for(let le=1;le<h.length;le++)[G,ie,q]=h[le],s.push(y,H.y,H.z,y,G.y,G.z,x,H.y,H.z,x,H.y,H.z,y,G.y,G.z,x,G.y,G.z),o.push(0,W.y,W.z,0,ie.y,ie.z,0,W.y,W.z,0,W.y,W.z,0,ie.y,ie.z,0,ie.y,ie.z),l.push(0,te,0,q,1,te,1,te,0,q,1,q),[H,W,te]=[G,ie,q];this.setAttribute("position",new it(s,3)),this.setAttribute("normal",new it(o,3)),this.setAttribute("uv",new it(l,2))}},NY=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,depth:0,innerRadiusPercent:38.19,spikes:5,cornerRadius:0,angle:360,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters);return{shape:e.shape&&e.shape instanceof Li?e.shape:new Li,parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??0)})}}static build(e){let{width:t,height:r,innerRadiusPercent:i,spikes:n,cornerRadius:a,angle:s,depth:o,extrudeBevelSize:l,extrudeBevelSegments:u}=e.parameters,h=e.shape,c=t*.5,d=r*.5,f=0,m=0,p=s*Math.PI/360/n,g=Math.PI/2*3*-1,v=c*i/100,y=d*i/100;if(n===3&&i===50){p=2*Math.PI/n;for(let b=0;b<n;b++){let _=p*b,w=f+Math.sin(_)*c,E=m+Math.cos(_)*d;h.addPoint(h.createPoint(w,E))}}else for(let b=0;b<n;b++){let _=f+Math.cos(g)*c,w=m+Math.sin(g)*d;h.addPoint(h.createPoint(_,w)),g+=p,_=f+Math.cos(g)*v,w=m+Math.sin(g)*y,h.addPoint(h.createPoint(_,w)),g+=p}h.isClosed=!0;for(let b=0,_=h.points.length;b<_;b++)h.points[b].roundness=a;h.roundness=a,h.update();let x=tp.create({shape:h,parameters:{roundness:a,depth:o,extrudeBevelSize:l,extrudeBevelSegments:u}});return Object.assign(x,{userData:{...e,type:"StarGeometry"}})}},$Oe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,depth:0},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??0)})}}static build(e){let{width:t,height:r}=e.parameters,i=new EE(t,r);return Object.assign(i,{userData:{...e,type:"TextFrameGeometry"}})}},YOe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,radialSegments:32,tubularSegments:64,arc:360,cornerRadius:30,cornerSegments:8},e.parameters),i=Math.abs(r.width),n=Math.abs(r.height??r.width),a=Math.round(Math.abs(r.depth??r.width*.25));return{parameters:Object.assign(r,{width:i,height:n,depth:a})}}static build(e){let{width:t,height:r,depth:i,radialSegments:n,tubularSegments:a,arc:s,cornerRadius:o,cornerSegments:l}=e.parameters,u=qOe(t,r,i,t*.5,s,a,0,0,n,o,l);return u.scale(1,r/t,1),Object.assign(u,{userData:{...e,type:"TorusGeometry"}})}};function qOe(e,t,r,i,n,a,s,o,l,u,h){[t,r]=[r,t],s=t/2;let c=bt.clamp(n/360,0,1);if(c===0){let d=new wt;return d.setAttribute("position",new it([],3)),d}return c===1&&(u=0),new RY(!0,e,t,r,i,c,a,s,o,l,u,h)}var XOe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,tubularSegments:64,radialSegments:32,p:2,q:3},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??r.width),tube:r.tube??r.width*.125})}}static build(e){let{width:t,tube:r,tubularSegments:i,radialSegments:n,p:a,q:s}=e.parameters,o=t*.5;o!==r&&(o-=r);let l=new N7(o,r,i,n,a,s);return Object.assign(l,{userData:{...e,type:"TorusKnotGeometry"}})}},QOe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,depth:0,spikes:5,cornerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:1,isRect:!1},e.parameters);return{shape:e.shape&&e.shape instanceof Li?e.shape:new Li,parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width*(r.isRect?1:Math.sqrt(3)/2)),depth:Math.abs(r.depth??0)})}}static build(e){let{width:t=100,height:r,cornerRadius:i,depth:n,extrudeBevelSize:a,extrudeBevelSegments:s,isRect:o}=e.parameters,l=e.shape,u=t*.5,h=r*.5;o?(l.addPoint(l.createPoint(-u,h)),l.addPoint(l.createPoint(u,-h)),l.addPoint(l.createPoint(-u,-h))):(l.addPoint(l.createPoint(0,h)),l.addPoint(l.createPoint(u,-h)),l.addPoint(l.createPoint(-u,-h))),l.isClosed=!0;for(let d=0,f=l.points.length;d<f;d++)l.points[d].roundness=i;l.roundness=i,l.update();let c=tp.create({shape:l,parameters:{roundness:i,depth:n,extrudeBevelSize:a,extrudeBevelSegments:s}});return Object.assign(c,{userData:{...e,type:"TriangleGeometry"}})}};function KOe(e,t){let r=2*Math.PI;return(e%r+r)%r===(t%r+r)%r}var ZOe=class{add(e,t,r){if(typeof arguments[0]!="string")for(let i in arguments[0])this.add(i,arguments[0][i],arguments[1]);else(Array.isArray(e)?e:[e]).forEach(function(i){this[i]=this[i]||[],t&&this[i][r?"unshift":"push"](t)},this)}run(e,t){this[e]=this[e]||[],this[e].forEach(function(r){r.call(t&&t.context?t.context:t,t)})}},JOe=class{constructor(e){this.jsep=e,this.registered={}}register(...e){e.forEach(t=>{if(typeof t!="object"||!t.name||!t.init)throw new Error("Invalid JSEP plugin format");this.registered[t.name]||(t.init(this.jsep),this.registered[t.name]=t)})}},Ce=class{static get version(){return"1.3.8"}static toString(){return"JavaScript Expression Parser (JSEP) v"+Ce.version}static addUnaryOp(e){return Ce.max_unop_len=Math.max(e.length,Ce.max_unop_len),Ce.unary_ops[e]=1,Ce}static addBinaryOp(e,t,r){return Ce.max_binop_len=Math.max(e.length,Ce.max_binop_len),Ce.binary_ops[e]=t,r?Ce.right_associative.add(e):Ce.right_associative.delete(e),Ce}static addIdentifierChar(e){return Ce.additional_identifier_chars.add(e),Ce}static addLiteral(e,t){return Ce.literals[e]=t,Ce}static removeUnaryOp(e){return delete Ce.unary_ops[e],e.length===Ce.max_unop_len&&(Ce.max_unop_len=Ce.getMaxKeyLen(Ce.unary_ops)),Ce}static removeAllUnaryOps(){return Ce.unary_ops={},Ce.max_unop_len=0,Ce}static removeIdentifierChar(e){return Ce.additional_identifier_chars.delete(e),Ce}static removeBinaryOp(e){return delete Ce.binary_ops[e],e.length===Ce.max_binop_len&&(Ce.max_binop_len=Ce.getMaxKeyLen(Ce.binary_ops)),Ce.right_associative.delete(e),Ce}static removeAllBinaryOps(){return Ce.binary_ops={},Ce.max_binop_len=0,Ce}static removeLiteral(e){return delete Ce.literals[e],Ce}static removeAllLiterals(){return Ce.literals={},Ce}get char(){return this.expr.charAt(this.index)}get code(){return this.expr.charCodeAt(this.index)}constructor(e){this.expr=e,this.index=0}static parse(e){return new Ce(e).parse()}static getMaxKeyLen(e){return Math.max(0,...Object.keys(e).map(t=>t.length))}static isDecimalDigit(e){return e>=48&&e<=57}static binaryPrecedence(e){return Ce.binary_ops[e]||0}static isIdentifierStart(e){return e>=65&&e<=90||e>=97&&e<=122||e>=128&&!Ce.binary_ops[String.fromCharCode(e)]||Ce.additional_identifier_chars.has(String.fromCharCode(e))}static isIdentifierPart(e){return Ce.isIdentifierStart(e)||Ce.isDecimalDigit(e)}throwError(e){let t=new Error(e+" at character "+this.index);throw t.index=this.index,t.description=e,t}runHook(e,t){if(Ce.hooks[e]){let r={context:this,node:t};return Ce.hooks.run(e,r),r.node}return t}searchHook(e){if(Ce.hooks[e]){let t={context:this};return Ce.hooks[e].find(function(r){return r.call(t.context,t),t.node}),t.node}}gobbleSpaces(){let e=this.code;for(;e===Ce.SPACE_CODE||e===Ce.TAB_CODE||e===Ce.LF_CODE||e===Ce.CR_CODE;)e=this.expr.charCodeAt(++this.index);this.runHook("gobble-spaces")}parse(){this.runHook("before-all");let e=this.gobbleExpressions(),t=e.length===1?e[0]:{type:Ce.COMPOUND,body:e};return this.runHook("after-all",t)}gobbleExpressions(e){let t=[],r,i;for(;this.index<this.expr.length;)if(r=this.code,r===Ce.SEMCOL_CODE||r===Ce.COMMA_CODE)this.index++;else if(i=this.gobbleExpression())t.push(i);else if(this.index<this.expr.length){if(r===e)break;this.throwError('Unexpected "'+this.char+'"')}return t}gobbleExpression(){let e=this.searchHook("gobble-expression")||this.gobbleBinaryExpression();return this.gobbleSpaces(),this.runHook("after-expression",e)}gobbleBinaryOp(){this.gobbleSpaces();let e=this.expr.substr(this.index,Ce.max_binop_len),t=e.length;for(;t>0;){if(Ce.binary_ops.hasOwnProperty(e)&&(!Ce.isIdentifierStart(this.code)||this.index+e.length<this.expr.length&&!Ce.isIdentifierPart(this.expr.charCodeAt(this.index+e.length))))return this.index+=t,e;e=e.substr(0,--t)}return!1}gobbleBinaryExpression(){let e,t,r,i,n,a,s,o,l;if(a=this.gobbleToken(),!a||(t=this.gobbleBinaryOp(),!t))return a;for(n={value:t,prec:Ce.binaryPrecedence(t),right_a:Ce.right_associative.has(t)},s=this.gobbleToken(),s||this.throwError("Expected expression after "+t),i=[a,n,s];t=this.gobbleBinaryOp();){if(r=Ce.binaryPrecedence(t),r===0){this.index-=t.length;break}n={value:t,prec:r,right_a:Ce.right_associative.has(t)},l=t;let u=h=>n.right_a&&h.right_a?r>h.prec:r<=h.prec;for(;i.length>2&&u(i[i.length-2]);)s=i.pop(),t=i.pop().value,a=i.pop(),e={type:Ce.BINARY_EXP,operator:t,left:a,right:s},i.push(e);e=this.gobbleToken(),e||this.throwError("Expected expression after "+l),i.push(n,e)}for(o=i.length-1,e=i[o];o>1;)e={type:Ce.BINARY_EXP,operator:i[o-1].value,left:i[o-2],right:e},o-=2;return e}gobbleToken(){let e,t,r,i;if(this.gobbleSpaces(),i=this.searchHook("gobble-token"),i)return this.runHook("after-token",i);if(e=this.code,Ce.isDecimalDigit(e)||e===Ce.PERIOD_CODE)return this.gobbleNumericLiteral();if(e===Ce.SQUOTE_CODE||e===Ce.DQUOTE_CODE)i=this.gobbleStringLiteral();else if(e===Ce.OBRACK_CODE)i=this.gobbleArray();else{for(t=this.expr.substr(this.index,Ce.max_unop_len),r=t.length;r>0;){if(Ce.unary_ops.hasOwnProperty(t)&&(!Ce.isIdentifierStart(this.code)||this.index+t.length<this.expr.length&&!Ce.isIdentifierPart(this.expr.charCodeAt(this.index+t.length)))){this.index+=r;let n=this.gobbleToken();return n||this.throwError("missing unaryOp argument"),this.runHook("after-token",{type:Ce.UNARY_EXP,operator:t,argument:n,prefix:!0})}t=t.substr(0,--r)}Ce.isIdentifierStart(e)?(i=this.gobbleIdentifier(),Ce.literals.hasOwnProperty(i.name)?i={type:Ce.LITERAL,value:Ce.literals[i.name],raw:i.name}:i.name===Ce.this_str&&(i={type:Ce.THIS_EXP})):e===Ce.OPAREN_CODE&&(i=this.gobbleGroup())}return i?(i=this.gobbleTokenProperty(i),this.runHook("after-token",i)):this.runHook("after-token",!1)}gobbleTokenProperty(e){this.gobbleSpaces();let t=this.code;for(;t===Ce.PERIOD_CODE||t===Ce.OBRACK_CODE||t===Ce.OPAREN_CODE||t===Ce.QUMARK_CODE;){let r;if(t===Ce.QUMARK_CODE){if(this.expr.charCodeAt(this.index+1)!==Ce.PERIOD_CODE)break;r=!0,this.index+=2,this.gobbleSpaces(),t=this.code}this.index++,t===Ce.OBRACK_CODE?(e={type:Ce.MEMBER_EXP,computed:!0,object:e,property:this.gobbleExpression()},this.gobbleSpaces(),t=this.code,t!==Ce.CBRACK_CODE&&this.throwError("Unclosed ["),this.index++):t===Ce.OPAREN_CODE?e={type:Ce.CALL_EXP,arguments:this.gobbleArguments(Ce.CPAREN_CODE),callee:e}:(t===Ce.PERIOD_CODE||r)&&(r&&this.index--,this.gobbleSpaces(),e={type:Ce.MEMBER_EXP,computed:!1,object:e,property:this.gobbleIdentifier()}),r&&(e.optional=!0),this.gobbleSpaces(),t=this.code}return e}gobbleNumericLiteral(){let e="",t,r;for(;Ce.isDecimalDigit(this.code);)e+=this.expr.charAt(this.index++);if(this.code===Ce.PERIOD_CODE)for(e+=this.expr.charAt(this.index++);Ce.isDecimalDigit(this.code);)e+=this.expr.charAt(this.index++);if(t=this.char,t==="e"||t==="E"){for(e+=this.expr.charAt(this.index++),t=this.char,(t==="+"||t==="-")&&(e+=this.expr.charAt(this.index++));Ce.isDecimalDigit(this.code);)e+=this.expr.charAt(this.index++);Ce.isDecimalDigit(this.expr.charCodeAt(this.index-1))||this.throwError("Expected exponent ("+e+this.char+")")}return r=this.code,Ce.isIdentifierStart(r)?this.throwError("Variable names cannot start with a number ("+e+this.char+")"):(r===Ce.PERIOD_CODE||e.length===1&&e.charCodeAt(0)===Ce.PERIOD_CODE)&&this.throwError("Unexpected period"),{type:Ce.LITERAL,value:parseFloat(e),raw:e}}gobbleStringLiteral(){let e="",t=this.index,r=this.expr.charAt(this.index++),i=!1;for(;this.index<this.expr.length;){let n=this.expr.charAt(this.index++);if(n===r){i=!0;break}else if(n==="\\")switch(n=this.expr.charAt(this.index++),n){case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:e+=n}else e+=n}return i||this.throwError('Unclosed quote after "'+e+'"'),{type:Ce.LITERAL,value:e,raw:this.expr.substring(t,this.index)}}gobbleIdentifier(){let e=this.code,t=this.index;for(Ce.isIdentifierStart(e)?this.index++:this.throwError("Unexpected "+this.char);this.index<this.expr.length&&(e=this.code,Ce.isIdentifierPart(e));)this.index++;return{type:Ce.IDENTIFIER,name:this.expr.slice(t,this.index)}}gobbleArguments(e){let t=[],r=!1,i=0;for(;this.index<this.expr.length;){this.gobbleSpaces();let n=this.code;if(n===e){r=!0,this.index++,e===Ce.CPAREN_CODE&&i&&i>=t.length&&this.throwError("Unexpected token "+String.fromCharCode(e));break}else if(n===Ce.COMMA_CODE){if(this.index++,i++,i!==t.length){if(e===Ce.CPAREN_CODE)this.throwError("Unexpected token ,");else if(e===Ce.CBRACK_CODE)for(let a=t.length;a<i;a++)t.push(null)}}else if(t.length!==i&&i!==0)this.throwError("Expected comma");else{let a=this.gobbleExpression();(!a||a.type===Ce.COMPOUND)&&this.throwError("Expected comma"),t.push(a)}}return r||this.throwError("Expected "+String.fromCharCode(e)),t}gobbleGroup(){this.index++;let e=this.gobbleExpressions(Ce.CPAREN_CODE);if(this.code===Ce.CPAREN_CODE)return this.index++,e.length===1?e[0]:e.length?{type:Ce.SEQUENCE_EXP,expressions:e}:!1;this.throwError("Unclosed (")}gobbleArray(){return this.index++,{type:Ce.ARRAY_EXP,elements:this.gobbleArguments(Ce.CBRACK_CODE)}}},eIe=new ZOe;Object.assign(Ce,{hooks:eIe,plugins:new JOe(Ce),COMPOUND:"Compound",SEQUENCE_EXP:"SequenceExpression",IDENTIFIER:"Identifier",MEMBER_EXP:"MemberExpression",LITERAL:"Literal",THIS_EXP:"ThisExpression",CALL_EXP:"CallExpression",UNARY_EXP:"UnaryExpression",BINARY_EXP:"BinaryExpression",ARRAY_EXP:"ArrayExpression",TAB_CODE:9,LF_CODE:10,CR_CODE:13,SPACE_CODE:32,PERIOD_CODE:46,COMMA_CODE:44,SQUOTE_CODE:39,DQUOTE_CODE:34,OPAREN_CODE:40,CPAREN_CODE:41,OBRACK_CODE:91,CBRACK_CODE:93,QUMARK_CODE:63,SEMCOL_CODE:59,COLON_CODE:58,unary_ops:{"-":1,"!":1,"~":1,"+":1},binary_ops:{"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10},right_associative:new Set,additional_identifier_chars:new Set(["$","_"]),literals:{true:!0,false:!1,null:null},this_str:"this"});Ce.max_unop_len=Ce.getMaxKeyLen(Ce.unary_ops);Ce.max_binop_len=Ce.getMaxKeyLen(Ce.binary_ops);var Qg=e=>new Ce(e).parse(),tIe=Object.getOwnPropertyNames(Ce);tIe.forEach(e=>{Qg[e]===void 0&&e!=="prototype"&&(Qg[e]=Ce[e])});Qg.Jsep=Ce;var rIe="ConditionalExpression",iIe={name:"ternary",init(e){e.hooks.add("after-expression",function(t){if(t.node&&this.code===e.QUMARK_CODE){this.index++;let r=t.node,i=this.gobbleExpression();if(i||this.throwError("Expected expression"),this.gobbleSpaces(),this.code===e.COLON_CODE){this.index++;let n=this.gobbleExpression();if(n||this.throwError("Expected expression"),t.node={type:rIe,test:r,consequent:i,alternate:n},r.operator&&e.binary_ops[r.operator]<=.9){let a=r;for(;a.right.operator&&e.binary_ops[a.right.operator]<=.9;)a=a.right;t.node.test=a.right,a.right=t.node,t.node=r}}else this.throwError("Expected :")}})}};Qg.plugins.register(iIe);var nIe=["+","-","*","/","(",")","==","!=",">","<",">=","<=","and","or","!","%","^",","],aIe=["0","1","2","3","4","5","6","7","8","9","."],sIe=["sin","cos","tan","asin","acos","atan","atan2","sqrt","abs","log","exp","floor","ceil","round","min","max","random"];function oIe(e){return typeof e!="string"?!1:!isNaN(e)&&!isNaN(parseFloat(e))}Qg.addBinaryOp("^",11,!0);function zY(e,t,r="number"){let i="";for(let s=0;s<e.length;s++){let o=e[s];if("id"in o){let l=e[s-1];if(s>0&&"id"in l){console.error("Two variables in a row",e);return}let u=t.getVariable(o.id),h=fl.getDisplayedValue(u);r==="number"&&fl.isTextValue(u)&&Array.isArray(u.textValue)&&u.textValue.length===1?h=parseFloat(h).toString():r==="boolean"&&fl.isBoolean(u)?h=u?"true":"false":r==="boolean"&&fl.isTextValue(u)&&!Array.isArray(u.textValue)&&(h='"'+h+'"'),i+=h;continue}else if(r==="string"){o.name!=='"'&&o.name!=="+"&&(i+=o.name),o.name==="+"&&i[i.length-1]==="\\"&&(i=i.slice(0,-1)+o.name);continue}if(o.name==="and"){i+="&&";continue}if(o.name==="or"){i+="||";continue}if(o.name==="True"){i+="true";continue}if(o.name==="False"){i+="false";continue}if(r==="boolean"&&!oIe(o.name)&&!aIe.includes(o.name)&&!nIe.includes(o.name)&&!sIe.includes(o.name.replace(/\($/g,""))){i+='"'+o.name+'"';continue}i+=o.name}if(r==="string")return i;if(e.length===0){if(r==="number")return 0;if(r==="boolean")return!1}let n;try{n=Qg(i)}catch(s){console.error(i,s);return}let a;try{a=Ar(n)}catch(s){console.error(i,n,s)}return a}function Ar(e){switch(e.type){case"BinaryExpression":switch(e.operator){case"==":return+(Ar(e.left)===Ar(e.right));case"!=":return+(Ar(e.left)!==Ar(e.right));case">":return+(Ar(e.left)>Ar(e.right));case">=":return+(Ar(e.left)>=Ar(e.right));case"<":return+(Ar(e.left)<Ar(e.right));case"<=":return+(Ar(e.left)<=Ar(e.right));case"+":return Ar(e.left)+Ar(e.right);case"-":return Ar(e.left)-Ar(e.right);case"*":return Ar(e.left)*Ar(e.right);case"/":return Ar(e.left)/Ar(e.right);case"%":return Ar(e.left)%Ar(e.right);case"&&":return Ar(e.left)&&Ar(e.right);case"||":return Ar(e.left)||Ar(e.right);case"^":return Math.pow(Ar(e.left),Ar(e.right));default:throw new Error("Unknown operator: "+e.operator)}case"UnaryExpression":switch(e.operator){case"-":return-Ar(e.argument);case"!":return+!Ar(e.argument);default:throw new Error("Unknown operator: "+e.operator)}case"Identifier":throw new Error("Unknown identifier: "+e.name);case"Literal":return e.value;case"CallExpression":if(e.callee.type==="Identifier"){if(e.callee.name==="random"){let t=0,r=1;if(e.arguments.length>=1)try{t=Ar(e.arguments[0])}catch(i){console.warn(i)}if(e.arguments.length>=2)try{r=Ar(e.arguments[1])}catch(i){console.warn(i)}return t=Math.min(r,t),r=Math.max(r,t),t+Math.random()*(r-t)}return Math[e.callee.name].apply(null,e.arguments.map(Ar))}else throw new Error("Unknown node");default:throw new Error("Unknown node type: "+e.type)}}var lIe=new ze,uIe=new ze;function cIe(e,t,r){let i=[new T,new T,new T],n=[new T,new T,new T];return e.extractBasis(i[0],i[1],i[2]),t.extractBasis(n[0],n[1],n[2]),i.forEach((a,s)=>{let o=n[s],l=bt.lerp(a.length(),o.length(),r);a.lerp(o,r).setLength(l)}),new ze().makeBasis(i[0],i[1],i[2])}var hIe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,height:100,depth:1,subdivisions:12,roundness:0,extrudeBevelSize:0,extrudeBevelSegments:3},e.parameters),i=Math.abs(r.width),n=Math.abs(r.height??r.width),a=Math.abs(r.depth??0),s=(t==null?void 0:t.shapeData)??yk.create({parameters:oY}).userData.shape;return{path:e.path??LS.defaultData(),parameters:Object.assign(r,{width:i,height:n,depth:a,extrusion:{...lY,...r.extrusion}}),shapeData:s}}static build(e){if(e.path.points.length>=2){let t=new dIe(e);return Object.assign(t,{userData:{...e,type:"PathGeometry"}})}else return Object.assign(new wt,{userData:{...e,type:"PathGeometry"}})}},dIe=class extends wt{constructor(e){super(),this.type="PathExtrusionGeometry",this.inputs=e,this.build()}_isGeometryClosed(){return this.inputs.path.isClosed&&this.inputs.parameters.extrusion.depth===1}_isOpenEnded(){let e=this.inputs.parameters.extrusion;return!(this.inputs.path.isClosed&&e.depth===1)||!KOe(e.twist,0)||e.startScale!==e.endScale}build(){let e=this._extractPathPoints();if(e.length<2)return;let t=this._computeBasisMatrices(e),{depth:r,offset:i}=this.inputs.parameters.extrusion,n=this.inputs.path.isClosed?e.length:e.length-1,a=Math.floor(i*n),s=this.inputs.path.isClosed?Math.ceil((r+i)*n):Math.ceil(Math.min(1,r+i)*n),o=Math.min(Math.max(2,s-a+1),n+2),l=[],u=[];for(let z=0;z<o;z++){let B=this.inputs.path.isClosed?(z+a)%e.length:Math.min(z+a,e.length-1);l.push(e[B].clone()),u.push(t[B].clone())}let h=(z,B,V)=>{l[z]=l[z].clone().lerp(l[B],V),u[z]=cIe(u[z],u[B],V)},c=0,d=i*n%1;(!this.inputs.path.isClosed||r<=1)&&(d||i===0)&&(c=d,h(0,1,c));let f=0,m=(i+r)*n%1;if((this.inputs.path.isClosed&&r<=1||!this.inputs.path.isClosed&&i+r<1)&&m&&(f=m,h(l.length-1,l.length-2,1-f)),r===0){let z=l.length-1;l[z].copy(l[0]),u[z].copy(u[0])}this._applyPathModifiers(u,c,f);let{bevel:p,bevelSides:g}=this.inputs.parameters.extrusion,v=p>0?this.inputs.parameters.extrusion.capType:"flat",y=5;this.inputs.parameters.extrusion.shape.type==="Custom"&&(y=this.inputs.parameters.extrusion.shape.shapeQuality==="low"?5:12);let{regions:x,infos:b,vertices:_}=this._computeShapePoints(y),w=0,E;v==="round"&&(E=new vk(this.inputs.shapeData,2*p,p,y,g,void 0,!0),w=E.getAttribute("position").count);let S=0,C=0;b.sort((z,B)=>z.start-B.start),b.forEach(z=>{z.verticesStart=S,z.verticesCount=z.continuous.reduce((B,V,R)=>B+(R===0||!V?2:1),0),C+=z.verticesCount,S=C});let M=C*o,P,I=0;if(this._isOpenEnded()&&v==="flat"){try{P=Th({windingRule:$r.ODD,elementType:ln.POLYGONS,polySize:3,vertexSize:2,strict:!0,contours:x})}catch{P=CY}I=P.vertexCount}let k=M+2*I+w*2,L=M+2*I,O={positions:new Float32Array(k*3),normals:new Float32Array(k*3),uvs:new Float32Array(k*2)},F=[];if(b.forEach(z=>{this._extrudeRegion(z,_,u,l,O,F,this._isGeometryClosed()&&!this._isOpenEnded())}),P&&(this._closeEnd(P,M,F,O,u[0],l[0],!1),this._closeEnd(P,M+I,F,O,u[u.length-1],l[l.length-1],!0)),E){O.positions.set(E.getAttribute("position").array,L*3),O.normals.set(E.getAttribute("normal").array,L*3),O.uvs.set(E.getAttribute("uv").array,L*2);let z=F.length;F.push(...E.getIndex().array.map(R=>R+L)),L+=w,O.positions.set(E.getAttribute("position").array,L*3),O.normals.set(E.getAttribute("normal").array,L*3),O.uvs.set(E.getAttribute("uv").array,L*2);let B=F.length;F.push(...E.getIndex().array.map(R=>R+L)),this.setAttribute("position",new Bt(O.positions,3)),this.setAttribute("normal",new Bt(O.normals,3)),this.setAttribute("uv",new Bt(O.uvs,2)),this.setIndex(F);let V=lIe;V.copy(u[u.length-1]).setPosition(l[l.length-1]),this.applyMatrix4OnRange(V,L,k),V.copy(u[0]).setPosition(l[0]).multiply(uIe.makeScale(1,1,-1)),this.applyMatrix4OnRange(V,L-w,L),this.reverseIndicesOnRange(z,B)}else this.setAttribute("position",new Bt(O.positions,3)),this.setAttribute("normal",new Bt(O.normals,3)),this.setAttribute("uv",new Bt(O.uvs,2)),this.setIndex(F)}_extractPathPoints(){let e=vY(this.inputs.path).getPoints(this.inputs.path.subdivisions);if(e.length<2)return[];let t=[e[0]];return e.forEach(r=>{t[t.length-1].distanceToSquared(r)>.001&&t.push(r)}),this.inputs.path.isClosed&&t[t.length-1].distanceTo(t[0])<.001&&t.pop(),t}_computeBasisMatrices(e){let t=[],r=e.length,i=this.inputs.path.isClosed,n=new T,a=new T,s=new T,o=new T,l=new T(0,1,0);for(let m=0;m<r;m++){let p=e[m],g;m===0?g=i?e[e.length-2]:p.clone().multiplyScalar(2).sub(e[1]):g=e[m-1];let v;m===r-1?v=i?e[1]:p.clone().multiplyScalar(2).sub(e[m-1]):v=e[m+1];let y=p.clone().sub(g).normalize(),x=v.clone().sub(p).normalize(),b=y.clone().add(x).normalize();s.copy(b),m===0&&(b.equals(l)||b.clone().negate().equals(l))&&l.set(0,0,1);let _=l.clone().cross(b).normalize(),w=b.clone().cross(_).normalize();l.copy(w),o.copy(_),m===0&&(n.copy(w),a.copy(b));let E=new ze().makeBasis(_,w,b);t.push(E)}let u=i?a:s,h=i?n:new T(0,1,0),c=u.clone().cross(o).normalize(),d=Math.acos(h.dot(c));if(isNaN(d))return t;let f=h.clone().cross(c);u.dot(f)>0&&(d*=-1);for(let m=1;m<t.length;m++){let p=new ze().makeRotationZ(d*m/t.length);t[m].multiply(p)}return t}_applyPathModifiers(e,t,r){let i=e.length,{angle:n,twist:a,startScale:s,endScale:o}=this.inputs.parameters.extrusion,l=new ze,u=new ze;return e.forEach((h,c)=>{let d=c===0?0:c===i-1?1:(c-t)/(i-(r===0?0:1)-(t+(1-r)));l.makeRotationZ(bt.lerp(n,n+a,d)*bt.DEG2RAD);let f=bt.lerp(s,o,d);u.makeScale(f,f,f),h.multiply(l).multiply(u)}),e}_computeShapePoints(e=12,t=$r.ODD){let r=this.inputs.shapeData,i=r.extractShapePointsToFlatArray([],e),n=r.shapeHoles.map(u=>{let h=u.extractShapePointsToFlatArray([],e),c=[];for(let d=h.length-1;d>=1;d-=2){let f=h[d-1],m=h[d-0];c.push(f,m)}return c}),a;try{a=Th({windingRule:t,elementType:ln.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[i]})}catch{a=gk}let s;try{s=Th({windingRule:$r.ODD,elementType:ln.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[...n]})}catch{s=MY}if(!a)throw new Error("error generating geometry");let o=a.elementCount;if(s){a.elementCount+=s.elementCount;for(let u=0;u<s.elements.length;u++){let h=s.elements[u],c=u%2===0?a.vertexCount:0;a.elements.push(h+c)}for(let u=0;u<s.vertexIndices.length;u++){let h=s.vertexIndices[u],c=a.vertexCount;a.vertexIndices.push(h+c)}for(let u=0;u<s.vertices.length;u++){let h=s.vertices[u];a.vertices.push(h)}}for(let u=0,h=a.vertexCount;u<h;u++){let c=u*2;a.vertices[c+0],a.vertices[c+1]}let l=[];for(let u=a.elementCount-1;u>=0;u--){let h=u>=o,c=u*2,d=a.elements[c+0],f=a.elements[c+1],m=d+f,p={start:d,count:f,normals:[],isHole:h,continuous:[],verticesStart:0,verticesCount:0};l.push(p);let g=d,v=m-1,y=d+1,x=r.roundedCurves.length;do{let b=g-d;a.vertices[v*2+0],a.vertices[v*2+1];let _=a.vertices[g*2+0],w=a.vertices[g*2+1],E=a.vertices[y*2+0],S=a.vertices[y*2+1],C=_-E,M=w-S,P=Math.sqrt(C*C+M*M);C/=P,M/=P,p.normals[b*2+0]=-M,p.normals[b*2+1]=C;let I=a.vertexIndices[g];if(Array.isArray(I))p.continuous[b]=!1;else{let[k,L]=r.getCurveIndexFromVertexId(I-1,!0);if(L>0&&L<1)p.continuous[b]=!0;else{let O=L===1?k+1:k-1;O=(O+x)%x;let F=L===1?0:1,z=r.roundedCurves[k].getTangent(L),B=r.roundedCurves[O].getTangent(F);p.continuous[b]=z.dot(B)>.95}}h&&(p.normals[b*2+0]*=-1,p.normals[b*2+1]*=-1),[v,g,y]=[g,y,y+1],y>=m&&(y-=f)}while(y!==d+1)}return{regions:[i,...n],infos:l,vertices:a.vertices}}_insertVertex(e,t,r,i,n){let a=t*2,s=t*3;e.positions[s+0]=r.x,e.positions[s+1]=r.y,e.positions[s+2]=r.z,e.normals[s+0]=i.x,e.normals[s+1]=i.y,e.normals[s+2]=i.z,e.uvs[a+0]=n.x,e.uvs[a+1]=n.y}_extrudeRegion(e,t,r,i,n,a,s){let o=new T,l=new T,u=new T,h=new T,c=new re;r.forEach((f,m)=>{let p=i[m],g=e.verticesStart*r.length+e.verticesCount*m;for(let v=0;v<e.count;v++){let y=(e.start+v)*2;if(o.set(t[y+0],t[y+1],0),u.copy(o).applyMatrix4(f).add(p),e.continuous[v])h.set(e.normals[v*2+0],e.normals[v*2+1],0);else{let x=v===0?(e.start+e.count-1)*2:y-2;l.set(t[x+0],t[x+1],0),h.copy(o).sub(l),h.set(-h.y,h.x,0),e.isHole||h.negate()}if(h.applyMatrix4(f).normalize(),c.set(v===0?1:v/e.count,m/(r.length-1)),this._insertVertex(n,g,u,h,c),g++,!e.continuous[v]||v===0){if(v===0)h.set(e.normals[v*2+0],e.normals[v*2+1],0),c.set(0,m/(r.length-1));else{let x=v===e.count-1?e.start*2:y+2;l.set(t[x+0],t[x+1],0),h.copy(l).sub(o),h.set(-h.y,h.x,0),e.isHole||h.negate()}h.applyMatrix4(f).normalize(),this._insertVertex(n,g,u,h,c),g++}}});let d=r.length-1;for(let f=0;f<d;f++){let m=e.verticesStart*r.length+e.verticesCount*f,p=e.verticesStart*r.length+e.verticesCount*(f+1),g=0;for(let v=0;v<e.count;v++){(!e.continuous[v]||v===0)&&g++;let y=v===e.count-1?0:g+1,x=m+g,b=m+y,_=p+y,w=p+g;e.isHole?a.push(x,_,b,x,w,_):a.push(x,b,_,x,_,w),g++}}}_closeEnd(e,t,r,i,n,a,s){let o=e.vertexCount,l=new T(0,0,s?-1:1).applyMatrix4(n),u=new T,h=new re;for(let d=0;d<o;d++){let f=2*d;u.set(e.vertices[f+0],e.vertices[f+1],0).applyMatrix4(n).add(a),this._insertVertex(i,t+d,u,l,h)}let c=e.elements;for(let d=0;d<e.elementCount;d++){let f=3*d,m=c[f+0]+t,p=c[f+(s?1:2)]+t,g=c[f+(s?2:1)]+t;r.push(m,p,g)}}applyMatrix4OnRange(e,t,r){let i=e.elements,n=new Hn().getNormalMatrix(e).elements,a,s,o,l,u=this.attributes.position,h=this.attributes.normal;if(!u||!h)return;let c=u.array,d=h.array,f=u.itemSize;for(let m=t*f,p=r*f;m<p;m+=f){if(m===t)debugger;a=c[m+0],s=c[m+1],o=c[m+2],l=1/(i[3]*a+i[7]*s+i[11]*o+i[15]),c[m+0]=(i[0]*a+i[4]*s+i[8]*o+i[12])*l,c[m+1]=(i[1]*a+i[5]*s+i[9]*o+i[13])*l,c[m+2]=(i[2]*a+i[6]*s+i[10]*o+i[14])*l,a=d[m+0],s=d[m+1],o=d[m+2],d[m+0]=n[0]*a+n[3]*s+n[6]*o,d[m+1]=n[1]*a+n[4]*s+n[7]*o,d[m+2]=n[2]*a+n[5]*s+n[8]*o}u.needsUpdate=!0,h.needsUpdate=!0}reverseIndicesOnRange(e,t){let r=this.index;if(r){for(let i=e;i<t;i+=3){let n=r.getX(i),a=r.getX(i+1),s=r.getX(i+2);r.setXYZ(i,s,a,n)}r.needsUpdate=!0}}};function FY(){let e=new wt;return e.setAttribute("position",new Bt(new Float32Array([]),3)),e.setIndex(new Bt(new Uint16Array([]),1)),e}var fIe=FY().attributes,pIe=12,mIe=1,UY=class extends wt{constructor(e,t){super(),this.charWidths=[],this.charCoords=[],this.wrappedText=[],this.isLowResolution=!1,this.vectorShapes=[],Object.assign(this.attributes,fIe),this.userData={parameters:e,type:"TextGeometry"};let r=t.getFont(e.font);r!=null&&r.isLoaded?(this.font=r,this.update(e)):this.updateFont(e.font,t).then(()=>{this.update(e),t==null||t.requestRender()})}async updateFont(e,t){let r=t.getFont(e);r&&(this.font=r,await r.loadingPromise)}update(e){let t=this.font;if(this.userData={parameters:e,type:"TextGeometry"},!(t!=null&&t.isLoaded)){console.warn("Cannot update text because its font is not loaded");return}let{width:r,height:i,depth:n,extrudeBevelSize:a,extrudeBevelSegments:s,text:o,textTransform:l}=e,u=fl.getDisplayedValue(o),h=l===2?u.toUpperCase():l===3?u.toLowerCase():u,c=gIe(e,t,h),{shapes:d,charWidths:f,charCoords:m}=t.generateShapes(c,e),p=(typeof r=="number"?r:1)*.5,g=(typeof i=="number"?i:1)*.5,v=d.map(b=>new Li().fromShape(b));this.vectorShapes=v;let y=v.map(b=>tp.create({shape:b,parameters:{depth:n,extrudeBevelSegments:s,extrudeBevelSize:a,windingRule:n<=0?$r.NONZERO:$r.ODD,subdivisions:this.isLowResolution&&n>0?mIe:pIe}})),x=y.length?af(y):FY();x.translate(-p,g,0),this.dispose(),this.wrappedText=c,this.charCoords=m,this.charWidths=f,this.deleteAttribute("extrudeNormal"),Object.entries(x.attributes).forEach(([b,_])=>{this.setAttribute(b,_)}),this.setIndex(x.index),this.computeBoundingSphere()}clone(){let e=Dc(new wt,UY.prototype);return e.copy(this),console.log("CloneGeometry",this,e),e}copy(e){return Object.entries(e.attributes).forEach(([t,r])=>{this.setAttribute(t,r)}),this.setIndex(e.index),this.userData={parameters:{...e.userData.parameters},type:"TextGeometry"},this}async setText(e){this.font&&await this.font.loadingPromise,await this.update({...this.userData.parameters,text:e})}get text(){return this.userData.parameters.text??""}};function gIe(e,t,r){let i=[""],n="";for(let a of r)n+=a,a===" "||a===`
`?(i[i.length-1]+=n,n="",a===`
`&&i.push("")):t.getTextWidth(i[i.length-1]+n,e)>e.width&&(i[i.length-1].length&&i.push(""),t.getTextWidth(i[i.length-1]+n,e)>e.width&&(n.length===1?(i[i.length-1]+=n,n=""):(i[i.length-1]+=n.slice(0,-1),n=n[n.length-1],i.push(""))));return i[i.length-1]+=n,i}var jY,xk=new Promise(e=>{jY=e}),IU=!1,$b;function vIe(){if(IU)return;if($b)return $b;async function e(){let t="https://unpkg.com/@splinetool/modelling-wasm@0.9.457/build",r=$1(()=>import("./process-10f79362.js"),[]),[i,n]=await Promise.all([r,fetch(`${t}/process.wasm`).then(o=>o.arrayBuffer())]),a=i.default,s=await a({wasmBinary:n});jY(s),IU=!0}return $b=e(),$b}function YS(e,t,r,i){var u;let n,a,s;e.type==="PathGeometry"?(a=JSON.parse(JSON.stringify(e)),s=[[],["extrusion"]]):(a={...e},s=[[]]);for(let h of s){let c=a;for(let d of h)c=c[d];for(n in c){let d=c[n];vDe(d)&&(c[n]=t.getVariable(d,[i.uuid,"geometry",...h,n]))}}let o={parameters:a,type:a.type};if(a.type==="PathGeometry")o.path=a.path;else if(a.type==="VectorGeometry"){let h=Li.createFromState(a.shape,a.width,a.height);o.shape=h}else if(a.type==="NonParametricGeometry")a.data.groups&&((u=a.data.groups)==null||u.forEach(h=>h.materialIndex=Math.max(h.materialIndex??0,0))),o.geometry=new H7().parse(a);else if(a.type==="SubdivGeometry"){let h=new ja(a,r);return h.data=e,h}else if(a.type==="TextGeometry")return new UY(a,t);let l;try{l=NU(o)}catch(h){console.error(h)}if(!l){let h=Li.createFromState(kS.defaultData(),100,100);o.shape=h,l=NU(o)}return l}var yIe=new ze;function g3(e,t,r,i){let n=e.position.array,a=e.normal.array,s=yIe.makeScale(t,r,i).invert().elements,o,l,u;for(var h=0,c=n.length;h<c;h+=3)n[h]*=t,n[h+1]*=r,n[h+2]*=i,o=a[h],l=a[h+1],u=a[h+2],a[h]=s[0]*o+s[4]*l+s[8]*u,a[h+1]=s[1]*o+s[5]*l+s[9]*u,a[h+2]=s[2]*o+s[6]*l+s[10]*u;e.position.needsUpdate=!0,e.normal.needsUpdate=!0}var Yb=new Qi,Gp=new T,Mt;xk.then(e=>{Mt=e});var RU=new Float32Array([10,10,0,-10,10,0,-10,-10,0,10,-10,0]),kU=new Uint32Array([0,1,2,3]),LU=new Uint8Array([4]),ja=class extends wt{constructor(e,t){super(),this.data=e,this.flatShading=t,this.subdivPointer=0,this.rebuild(),this.freeSubdivPointer()}mutateDirectlyScaleBaked(e,t){this.freeSubdivPointer();let r=this.data.scaleBaked,i=_f.div(t,r);this.subdividedGeometry&&g3(this.subdividedGeometry.attributes,...i),this.originalGeometry&&g3(this.originalGeometry.attributes,...i),this.data=e;let n=this.userData.parameters;this.userData.parameters={width:n.width*i[0],height:n.height*i[1],depth:n.depth*i[2]},this.originalGeometry.boundingSphere.center.multiply(Gp.fromArray(i));let a=Gp.set(n.width,n.height,n.depth).length();this.originalGeometry.boundingSphere.radius=a/2}ensureSubdivPointer(){return this.subdivPointer===0&&this.rebuild(),this.subdivPointer}rebuild(){let e,t,r;try{({originalGeometry:e,subdividedGeometry:t,subdivPointer:r}=ja.build(this.data,void 0,!this.flatShading,void 0))}catch{e=new Eu(100,100,100),r=0}this.subdivPointer=r,this.originalGeometry=e,this.subdividedGeometry=t??void 0;let i=this.subdividedGeometry??this.originalGeometry;Object.assign(this,i),this.calcBoundingBox()}freeSubdivPointer(){this.subdivPointer&&(ja.freeSubdivPointer(this.subdivPointer),this.subdivPointer=0)}dispose(){super.dispose(),this.freeSubdivPointer()}calcBoundingBox(){let e=this.originalGeometry;e.boundingSphere===null&&(e.boundingSphere=new Ds,this.subdividedGeometry&&(this.subdividedGeometry.boundingSphere=e.boundingSphere));let t=e.attributes.position,r=e.boundingSphere.center;Yb.setFromBufferAttribute(t),Yb.getCenter(r),e.boundingSphere.radius=r.distanceTo(Yb.max),isNaN(e.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this),Yb.getSize(Gp);let i={width:Gp.x,height:Gp.y,depth:Gp.z};return this.userData.parameters=i,i}static build(e,t,r,i){let n,a,s,o=(e==null?void 0:e.phongAngle)??35;r===!1&&(o=-1),t&&(Mt.free_bvh(t),Mt.free_subdivision_surface(t));try{n=ja.allocate(e,i)}catch(l){console.error(l,e),n=ja.allocate({positionWASM:RU,indexWASM:kU,verticesPerFaceWASM:LU},i)}if(Mt.set_destination_refinement_level(n,0),a=ja.buildLevel(n,!0,o),e.subdivisions>0)try{Mt.set_destination_refinement_level(n,e.subdivisions),s=ja.buildLevel(n,!1,o)}catch{try{Mt.set_destination_refinement_level(n,e.subdivisions-1),s=ja.buildLevel(n,!1,o)}catch{s=null}}else s=null;return{subdivPointer:n,originalGeometry:a,subdividedGeometry:s}}static primitiveToQuads(e,t,r){e.widthSegments>16&&(e.widthSegments=16),e.heightSegments>16&&(e.heightSegments=16),e.depthSegments>16&&(e.depthSegments=16),e.radialSegments>16&&(e.radialSegments=16),e.type==="DodecahedronGeometry"&&(e.detail=0);let i=e.shape!==void 0||e.path!==void 0?t.geometry:YS(e,r,!1),n;e.type==="TorusGeometry"&&e.arc===Math.PI*2?n=i.getClosedTorusIndicesForBooleanOrSubdiv():n=i.getIndex();let a,s,o,l;({positions:a,triIndices:l}=HE(i.getAttribute("position"),n));let u;if(e.type==="CylinderGeometry"&&e.cornerRadius===0&&e.hollow===0&&e.openEnded===!1){let h=e.radialSegments*e.heightSegments*3*2,c=h+e.radialSegments*3;u=[h,c]}return{indices:s,verticesPerFace:o}=VY(a,l,i,u),{positions:a,indices:s,verticesPerFace:o}}static allocate(e,t){var x;let r,i,n,a=[],s=[];e.positionWASM&&e.positionWASM.length>0?(r=e.positionWASM,i=e.indexWASM,n=e.verticesPerFaceWASM):(r=RU,i=kU,n=LU);let o=r.length,l=i.length,u=n.length,h=r.length+a.length+s.length,c=i.length+n.length,d=h*Float32Array.BYTES_PER_ELEMENT+c*Uint32Array.BYTES_PER_ELEMENT,f=h*Float32Array.BYTES_PER_ELEMENT,m=Mt._malloc(d),p=new Float32Array(Mt.HEAPF32.buffer,m,h),g=new Uint32Array(Mt.HEAPU32.buffer,m+f,c);p.set(r,0),p.set(a,r.length),p.set(s,r.length+a.length),g.set(i,0),g.set(n,i.length);let v;(x=e==null?void 0:e.scaleBaked)!=null&&x.some(b=>b!==1)&&(v=new ze().makeScale(...e.scaleBaked)),t&&(v?v.premultiply(t):v=t);let y=v?Mt.alloc_subdivision_surface2(m,o,m+f,l,m+f+i.length*Uint32Array.BYTES_PER_ELEMENT,u,v.elements):Mt.alloc_subdivision_surface(m,o,m+f,l,m+f+i.length*Uint32Array.BYTES_PER_ELEMENT,u);return Mt._free(m),y}static buildLevel(e,t,r,i,n){let a=n?Mt.get_mesh_data2(e,t?Mt.Level.CONTROL:Mt.Level.REFINED,r,n.elements):Mt.get_mesh_data(e,t?Mt.Level.CONTROL:Mt.Level.REFINED,r),s=8,o=Mt.HEAPU32.subarray(a>>2,(a>>2)+s),l=o.subarray(4,4+4),u=0,h=Mt.HEAPU32[o[u]>>2],c=Mt.HEAPF32.subarray(h>>2,(h>>2)+l[u]);u++;let d=Mt.HEAPU32[o[u]>>2],f=Mt.HEAPF32.subarray(d>>2,(d>>2)+l[u]);u++;let m=Mt.HEAPU32[o[u]>>2],p=Mt.HEAPU32.subarray(m>>2,(m>>2)+l[u]);u++;let g=Mt.HEAPU32[o[u]>>2],v=Mt.HEAPU32.subarray(g>>2,(g>>2)+l[u]);if(u++,i===void 0){let y=new wt;if(y.setIndex(new rg(v,1)),y.setAttribute("position",new it(c,3)),y.setAttribute("normal",new it(f,3)),t){y.setAttribute("faceMap",new rg(p,1));let x=new Float32Array(f.length/3*4).fill(0);y.setAttribute("color",new Bt(x,4))}return Mt.free_mesh_data(a),y.userData.type="SubdivGeometry",y}i.getAttribute("position").copyArray(c),i.getAttribute("normal").copyArray(f),i.attributes.position.needsUpdate=!0,i.attributes.normal.needsUpdate=!0,Mt.free_mesh_data(a)}static freeSubdivPointer(e){Mt.free_bvh(e),Mt.free_subdivision_surface(e)}static buildControlCageWireframe(e,t,r){let i=Mt.get_wireframe_data_for_base_level(e),n=4,a=Mt.HEAPU32.subarray(i>>2,(i>>2)+n),s=a.subarray(2,2+2),o=0,l=Mt.HEAPU32[a[o]>>2],u=Mt.HEAPF32.subarray(l>>2,(l>>2)+s[o]);o++;let h=Mt.HEAPU32[a[o]>>2],c=Mt.HEAPU32.subarray(h>>2,(h>>2)+s[o]);if(t===void 0){let d=new wt;d.setAttribute("position",new it(u,3));let f=new Float32Array(u.length);for(let m=0,p=u.length;m<p;)f[m++]=r.r,f[m++]=r.g,f[m++]=r.b;return d.setAttribute("color",new Bt(f,3)),d.setIndex(new rg(c,1)),Mt.free_wireframe_data_for_base_level(i),d}t.getAttribute("position").copyArray(u),t.attributes.position.needsUpdate=!0,Mt.free_wireframe_data_for_base_level(i)}static updateCollabMesh(e,t,r){let i=t===0;i||Mt.set_destination_refinement_level(e,t);let n=r?Mt.get_topological_data2(e,i?Mt.Level.CONTROL:Mt.Level.REFINED,r.elements):Mt.get_topological_data(e,i?Mt.Level.CONTROL:Mt.Level.REFINED),a=6,s=Mt.HEAPU32.subarray(n>>2,(n>>2)+a),o=s.subarray(3,3+3),l=0,u=Mt.HEAPU32[s[l]>>2],h=new Float32Array(Mt.HEAPF32.subarray(u>>2,(u>>2)+o[l]));l++;let c=Mt.HEAPU32[s[l]>>2],d=new Uint32Array(Mt.HEAPU32.subarray(c>>2,(c>>2)+o[l]));l++;let f=Mt.HEAPU32[s[l]>>2],m=new Uint8Array(Mt.HEAPU32.subarray(f>>2,(f>>2)+o[l]));return Mt.free_topological_data(n),{positions:h,indices:d,verticesPerFace:m}}},BU=["getX","getY","getZ"];function HE(e,t){let r={},i=t?t.count:e.count,n=0,a=[],s=[],o=1e4;for(let u=0;u<i;u++){let h=t?t.getX(u):u,c="";for(let d=0;d<3;d++)c+=`${~~(e[BU[d]](h)*o)},`;if(c in r)a.push(r[c]);else{for(let d=0;d<3;d++)s.push(e[BU[d]](h));r[c]=n,a.push(n),n++}}let l=[];for(let u=0;u<a.length;u+=3)a[u]===a[u+1]||a[u]===a[u+2]||a[u+1]===a[u+2]||l.push(a[u],a[u+1],a[u+2]);return{positions:s,triIndices:l}}var qb=new T,kA=new T,LA=new T,BA=new T;function VY(e,t,r,i){let n=[],a=[];if(r.userData.shape!==void 0&&r.userData.parameters.depth===0&&r.userData.shape.shapeHoles.length===0){let l=r.userData.shape.extractShapePointsToFlatArray([]),u=r.userData.parameters.spikes;if(r.userData.type==="EllipseGeometry"&&u<=24&&u%4===0&&r.userData.parameters.angle>=360){let d=l.length/2/u;l=l.filter((f,m)=>Math.floor(m/2)%d===0)}let h=0;for(let d=0;d<l.length;d+=2)h+=(l[d]-l[(d===0?l.length:d)-2])*(l[d+1]+l[(d===0?l.length:d)-1]);e.length=0;let c=0;if(h<0)for(let d=0;d<l.length;d+=2)e.push(l[d],l[d+1],0),n.push(c++);else for(let d=l.length-2;d>=0;d-=2)e.push(l[d],l[d+1],0),n.push(c++);return a.push(c),{indices:n,verticesPerFace:a}}let s=new Float32Array([r.userData.parameters.depth])[0],o=0;for(;o<t.length;){if(r.useNgonForTopBottomFaceDuringBake){let l=0;if((e[t[o]*3+2]===s||e[t[o]*3+2]===0)&&l++,(e[t[o+1]*3+2]===s||e[t[o+1]*3+2]===0)&&l++,(e[t[o+2]*3+2]===s||e[t[o+2]*3+2]===0)&&l++,l===3)break}if(t[o+1]===t[o+3]&&t[o+2]===t[o+5]||t[o+0]===t[o+3]&&t[o+2]===t[o+4]){qb.set(e[t[o]*3],e[t[o]*3+1],e[t[o]*3+2]),kA.set(e[t[o+1]*3],e[t[o+1]*3+1],e[t[o+1]*3+2]),LA.set(e[t[o+4]*3],e[t[o+4]*3+1],e[t[o+4]*3+2]),BA.set(e[t[o+5]*3],e[t[o+5]*3+1],e[t[o+5]*3+2]),kA.sub(qb).normalize(),LA.sub(qb).normalize(),BA.sub(qb).normalize();let l=kA.cross(LA).dot(BA);Math.abs(l)>.005||i&&i.some((u,h)=>h%2===1?!1:o>=i[h]&&o<i[h+1])?(n.push(t[o],t[o+1],t[o+2]),a.push(3),o+=3):(n.push(t[o],t[o+1],t[o+4],t[o+5]),a.push(4),o+=6)}else n.push(t[o],t[o+1],t[o+2]),a.push(3),o+=3}if(r.useNgonForTopBottomFaceDuringBake){let l=[],u=[],h=0;for(let c=0,d=0;c<e.length;c+=3,d++)e[c+2]===0&&(l.push(d),h++),e[c+2]===s&&u.push(d);if(r.userData.parameters.extrudeBevelSize===0){let c=u[0];u[0]=u[1],u[1]=c}l.reverse(),n.push(...l,...u),a.push(h,h)}return{indices:n,verticesPerFace:a}}var Zu={};jge(Zu,{calcBoolean:()=>SIe,calcBooleanTopological:()=>_Ie,freeMeshSet:()=>AIe,getMeshSet:()=>EIe,hasOpenEdges:()=>MIe,transformMeshSet:()=>CIe});var HY,xIe=new Promise(e=>{HY=e}),Xb;function bIe(){if(Xb)return Xb;async function e(){let t="https://unpkg.com/@splinetool/boolean-wasm@0.9.457/build",r=$1(()=>import("./boolean-613a7c9c.js"),[]),[i,n]=await Promise.all([r,fetch(`${t}/boolean.wasm`).then(o=>o.arrayBuffer())]),a=i.default,s=await a({wasmBinary:n});HY(s)}return Xb=e(),Xb}var ir,dg;xIe.then(e=>ir=e);function wIe(e,t,r){let i,n;e.userData.parameters.type==="TorusGeometry"&&e.userData.parameters.arc===Math.PI*2?n=e.getClosedTorusIndicesForBooleanOrSubdiv():n=e.getIndex();let{positions:a,triIndices:s}=HE(e.getAttribute("position"),n),o;if(t&&r){let{indices:l,verticesPerFace:u}=VY(a,s,e);o=u.length,i=[];for(let h=0,c=0;h<o;h++){i.push(u[h]);for(let d=0;d<u[h];d++)i.push(l[c++])}}else{let l=s.length;i=Array(l+l/3),o=0;for(let u=0,h=0;h<i.length;)i[h++]=3,o++,i[h++]=s[u++],i[h++]=s[u++],i[h++]=s[u++]}return{positions:a,faceIndices:i,nFaces:o}}function GY(e){let t=e.length,r=t*Uint32Array.BYTES_PER_ELEMENT,i=t*Float32Array.BYTES_PER_ELEMENT,n=Number.isInteger(e[0])?r:i,a=ir._malloc(n);return(Number.isInteger(e[0])?new Uint32Array(ir.HEAPU32.buffer,a,t):new Float32Array(ir.HEAPF32.buffer,a,t)).set(e,0),a}function WY(e){switch(e){case 0:return ir.OP.UNION;case 1:return ir.OP.INTERSECTION;case 2:return ir.OP.A_MINUS_B;case 3:return ir.OP.B_MINUS_A;case 4:return ir.OP.SYMMETRIC_DIFFERENCE;case 5:return ir.OP.ALL;default:throw new Error("Unknown boolean operation "+e)}}function _Ie(e,t){dg===void 0&&(dg=ir.init_csg());let r=GY(e),i=ir.csg_calc_topological(dg,r,e.length,WY(t));ir._free(r);let n=6,a=ir.HEAPU32.subarray(i>>2,(i>>2)+n),s=a.subarray(3,3+3),o=0,l=ir.HEAPU32[a[o]>>2],u=new Float32Array(ir.HEAPF32.subarray(l>>2,(l>>2)+s[o]));o++;let h=ir.HEAPU32[a[o]>>2],c=new Uint32Array(ir.HEAPU32.subarray(h>>2,(h>>2)+s[o]));o++;let d=ir.HEAPU32[a[o]>>2],f=new Uint8Array(ir.HEAPU32.subarray(d>>2,(d>>2)+s[o]));return ir.free_mesh_data(i),{positions:u,indices:c,verticesPerFace:f}}function SIe(e,t,r,i){dg===void 0&&(dg=ir.init_csg());let n=GY(e),a=ir.csg_calc(dg,n,e.length,i,WY(t));ir._free(n);let s=5,o=ir.HEAPU32.subarray(a>>2,(a>>2)+s),l=o.subarray(2,2+3),u=0,h=ir.HEAPU32[o[u]>>2],c=ir.HEAPF32.subarray(h>>2,(h>>2)+l[u]);u++;let d=ir.HEAPU32[o[u]>>2],f=ir.HEAPF32.subarray(d>>2,(d>>2)+l[u]);u++;let m=l[u];r.setAttribute("position",new it(c,3)),r.setAttribute("normal",new it(f,3));let p=ir.HEAPF32.subarray((a>>2)+5,(a>>2)+5+6);return r.boundingSphere===null&&(r.boundingSphere=new Ds),r.boundingSphere.center.set(p[0],p[1],p[2]),r.boundingSphere.radius=(p[3]**2+p[4]**2+p[5]**2)**.5,r.userData.parameters={width:p[3]*2,height:p[4]*2,depth:p[5]*2},ir.free_mesh_data(a),m}function EIe(e,t,r){if(ir===void 0)return-1;let i,n,a;if(t&&e.userData.positions!==void 0){let p=e.userData;a=p.verticesPerFace.length,i=p.positions,n=Array(p.verticesPerFace.reduce((g,v)=>g+v,0)+a);for(let g=0,v=0,y=0;g<p.verticesPerFace.length;g++){n[y++]=p.verticesPerFace[g];for(let x=0;x<p.verticesPerFace[g];x++)n[y++]=p.indices[v++]}}else({positions:i,faceIndices:n,nFaces:a}=wIe(e,t,r));let s=i.length,o=n.length,l=i.length,u=n.length,h=l*Float32Array.BYTES_PER_ELEMENT+u*Uint32Array.BYTES_PER_ELEMENT,c=l*Float32Array.BYTES_PER_ELEMENT,d=ir._malloc(h),f=new Float32Array(ir.HEAPF32.buffer,d,l),m=new Uint32Array(ir.HEAPU32.buffer,d+c,u);return f.set(i,0),m.set(n,0),ir.get_csg_mesh(d,s,d+c,o,a)}function MIe(e){return ir.has_open_edges(e)}function CIe(e,t){ir.transform_csg_mesh(e,t.elements)}function AIe(e){ir.free_csg_mesh(e)}var TIe={ConeGeometry:q3e,CubeGeometry:X3e,CylinderGeometry:yY,DodecahedronGeometry:K3e,EllipseGeometry:yk,HelixGeometry:POe,IcosahedronGeometry:DOe,LatheGeometry:OOe,NonParametricGeometry:zOe,PolygonGeometry:LY,PyramidGeometry:FOe,RectangleGeometry:BY,SphereGeometry:VOe,PlaneGeometry:HOe,BackdropGeometry:GOe,StarGeometry:NY,TextFrameGeometry:$Oe,TorusGeometry:YOe,TorusKnotGeometry:XOe,TriangleGeometry:QOe,PathGeometry:hIe,VectorGeometry:tp},NU=e=>TIe[e.type].create(e);function Wp(e){return e!==null&&"booleanOp"in e}var $Y=class extends dk(gs){constructor(){super(...arguments),this.booleanMeshSetAddress=-1,this.booleanWasTransformed=!1,this.booleanMatrixInvOld=new ze}updateVisible(){super.updateVisible(),this.visible=!Wp(this.parent)&&this.visible,Wp(this.parent)&&this.parent.invalidateDownstreamBooleanData()}freeBooleanPointer(){this.booleanMeshSetAddress!==-1&&(Zu.freeMeshSet(this.booleanMeshSetAddress),this.booleanMeshSetAddress=-1)}invalidateDownstreamBooleanData(e=!1){return e?this.booleanWasTransformed=!0:this.freeBooleanPointer(),Wp(this.parent)?this.parent.invalidateDownstreamBooleanData():this}invalidateUpstreamBooleanData(){this.freeBooleanPointer();for(let e of this.children)e instanceof $Y&&(e.freeBooleanPointer(),Wp(e)&&e.invalidateUpstreamBooleanData())}updateTransformState(e,t){let r=super.updateTransformState(e,t);return r&&Wp(this.parent)&&this.invalidateDownstreamBooleanData(!0),r}onVariableUpdate(e=!1){super.onVariableUpdate(e),Wp(this.parent)&&this.invalidateDownstreamBooleanData(!0)}},Qb=new Qi;function bk(e,t=0,r=e.count,i,n){let a=1/0,s=1/0,o=1/0,l=-1/0,u=-1/0,h=-1/0;for(let c=t;c<r;c++){let d=e.getX(c),f=e.getY(c),m=e.getZ(c);d<a&&(a=d),f<s&&(s=f),m<o&&(o=m),d>l&&(l=d),f>u&&(u=f),m>h&&(h=m)}Qb.min.set(a,s,o),Qb.max.set(l,u,h),Qb.getCenter(i),Qb.getSize(n).multiplyScalar(.5)}var PIe=new wt,DIe=new X1,Os=class extends $Y{constructor(e,t){super(PIe,DIe),this.super_Entity(e,t)}updateState(e,t){this.updateState_Entity(e,t)}updateEntityBoxSize(e,t){let r=this.geometry.getAttribute("position");r!==void 0?bk(r,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:r.count,e,t):super.updateEntityBoxSize(e,t)}},zU=class{constructor(e){e=e??{},this.name=e.name,this.type=e.type,this.node=e.node,this.size=e.size,this.needsUpdate=e.needsUpdate}get value(){return this.node.value}set value(e){this.node.value=e}},gd=class{constructor(e){this.hashProperties=void 0,this.isNode=!0,this.shortcuts={},this.uuid=bt.generateUUID(),this.type=e,this.name=""}analyze(e,t){t=t??{},e.analyzing=!0,this.build(e.addFlow(t.slot,t.cache,t.context),"v4"),e.clearVertexNodeCode(),e.clearFragmentNodeCode(),e.removeFlow(),e.analyzing=!1}analyzeAndFlow(e,t,r){return r=r??{},this.analyze(e,r),this.flow(e,t,r)}flow(e,t,r){r=r??{},e.addFlow(r.slot,r.cache,r.context);let i={result:this.build(e,t),code:e.clearNodeCode(),extra:e.context.extra};return e.removeFlow(),i}build(e,t,r){t=t??this.getType(e,t);let i=e.getNodeData(r??this);return e.analyzing&&this.appendDepsNode(e,i,t),e.nodes.indexOf(this)===-1&&e.nodes.push(this),this.updateFrame!==void 0&&e.updaters.indexOf(this)===-1&&e.updaters.push(this),this.generate(e,t,r)}updateFrame(e){}generateReadonly(e,t,r,i,n,a){return""}generate(e,t,r,i,n){return""}parse(e,t,r,i){}appendDepsNode(e,t,r){t.deps=(t.deps||0)+1;let i=e.getTypeLength(r);(i>(t.outputMax||0)||this.getType(e,r))&&(t.outputMax=i,t.output=r)}setName(e){this.name=e}getName(){return this.name}getType(e,t){return t==="sampler2D"||t==="samplerCube"?t:this.type}getHash(){let e="{",t,r;for(t in this)r=this[t],r instanceof gd&&(e+='"'+t+'":'+r.getHash()+",");if(this.hashProperties)for(let i=0;i<this.hashProperties.length;i++)t=this.hashProperties[i],r=this[t],e+='"'+t+'":"'+String(r)+'",';return e+='"id":"'+this.uuid+'"}',e}},OIe=class{constructor(){this.nodes={},this.keywords={}}add(e){this.nodes[e.name]=e}addKeyword(e,t,r){r=r!==void 0?r:!0,this.keywords[e]={callback:t,cache:r}}remove(e){delete this.nodes[e.name]}removeKeyword(e){delete this.keywords[e]}get(e){return this.nodes[e]}getKeyword(e,t){return this.keywords[e].callback(t)}getKeywordData(e){return this.keywords[e]}contains(e){return this.nodes[e]!==void 0}containsKeyword(e){return this.keywords[e]!==void 0}},ps=new OIe,Kr=class extends gd{constructor(e,t){super(e),this.scope="",t=t??{},this.shared=t.shared!==void 0?t.shared:!0,this.unique=t.unique!==void 0?t.unique:!1}build(e,t,r,i){if(t=t??this.getType(e),this.getShared(e,t)){let n=this.getUnique(e,t);n&&this.uuid===void 0&&(this.uuid=bt.generateUUID()),r=e.getUUID(r??this.getUUID(),!n);let a=e.getNodeData(r),s=a.output||this.getType(e);if(e.analyzing)return(a.deps||0)>0||this.getLabel()?(this.appendDepsNode(e,a,t),this.generate(e,t,r)):super.build(e,t,r);if(n)return a.name=a.name||super.build(e,t,r),a.name;if(!this.getLabel()&&(!this.getShared(e,s)||e.context.ignoreCache||a.deps===1))return super.build(e,t,r);r=this.getUUID(!1);let o=this.getTemp(e,r);if(o)return e.format(o,s,t);{o=super.generate(e,t,r,a.output,i);let l=this.generate(e,s,r);return e.addNodeCode(o+" = "+l+";"),e.format(o,s,t)}}return super.build(e,t,r)}getShared(e,t){return t!=="sampler2D"&&t!=="samplerCube"&&this.shared}getUnique(e,t){return this.unique}setLabel(e){return this.label=e,this}getLabel(){return this.label}getUUID(e){let t=this.uuid;return typeof this.scope=="string"&&(t=this.scope+"-"+t),t}getTemp(e,t){t=t||this.uuid;let r=e.getVars()[t];return r?r.name:void 0}generate(e,t,r,i,n){return this.getShared(e,t)||console.error("TempNode is not shared"),r=r??this.uuid,e.getTempVar(r,i??this.getType(e),n,this.getLabel()).name}},Is=class extends Kr{constructor(e,t){t=t??{},t.shared=t.shared!==void 0?t.shared:!1,super(e,t),this.readonly=!1}setReadonly(e){return this.readonly=e,this.hashProperties=this.readonly?["value"]:void 0,this}getReadonly(){return this.readonly}generate(e,t,r,i,n,a){r=e.getUUID(r??this.getUUID()),i=i??this.getType(e);let s=e.getNodeData(r);return this.getReadonly()&&this.generateReadonly!==void 0?this.generateReadonly(e,t,r,i,n,a):e.isShader("vertex")?(s.vertex||(s.vertex=e.createVertexUniform(i,this,n,a,this.getLabel())),e.format(s.vertex.name,i,t)):(s.fragment||(s.fragment=e.createFragmentUniform(i,this,n,a,this.getLabel())),e.format(s.fragment.name,i,t))}},ea=class extends Is{constructor(e=0,t){super("v2"),this.nodeType="Vector2",this.value=e instanceof re?e:new re(e,t)}get x(){return this.value.x}set x(e){this.value.x=e}get y(){return this.value.y}set y(e){this.value.y=e}generateReadonly(e,t,r,i,n,a){return e.format("vec2("+this.value.x+", "+this.value.y+")",i,t)}},vo=class extends Is{constructor(t=0,r,i){super("v3"),this.nodeType="Vector3",this.value=t instanceof T?t:new T(t,r,i)}get x(){return this.value.x}set x(t){this.value.x=t}get y(){return this.value.y}set y(t){this.value.y=t}get z(){return this.value.z}set z(t){this.value.z=t}generateReadonly(t,r,i,n,a,s){return t.format("vec3("+this.value.x+", "+this.value.y+", "+this.value.z+")",n,r)}},As=class extends At{constructor(e,t,r,i){super(e,t,r),this.isColorA=!0,this.a=i}setRGBA(e,t,r,i){super.setRGB(e,t,r),this.a=i}copy(e){return super.copy(e),this.a="a"in e?e.a:1,this}clone(){return new this.constructor(this.r,this.g,this.b,this.a)}setStyle(e,t="srgb"){let r;if(e==="transparent")return this.setRGBA(0,0,0,0),this;if(r=/^((?:rgb|hsl)a?)\(([^)]*)\)/.exec(e)){let i,n=r[1],a=r[2];switch(n){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.a=n==="rgba"?parseFloat(i[4]):1,super.setStyle(e,t);break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)%\s*,\s*(\d*\.?\d+)%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.a=n==="hsla"?parseFloat(i[4]):1,super.setStyle(e,t);break}}return super.setStyle(e,t)}get x(){return this.r}get y(){return this.g}get z(){return this.b}get w(){return this.a}set x(e){this.r=e}set y(e){this.g=e}set z(e){this.b=e}set w(e){this.a=e}},Ju=class extends Is{constructor(e){super("v4"),this.nodeType="Vector4",this.value=e instanceof As?e:new As(e.r,e.g,e.b,e.a)}generateReadonly(e,t,r,i,n,a){return e.format("vec4("+this.value.r+", "+this.value.g+", "+this.value.b+", "+this.value.a+")",i,t)}},IIe=/^\s*([a-z_0-9]+)\s([a-z_0-9]+)\s*\((.*?)\)/i,FU=/[a-z_0-9]+/gi,Xe=class extends Kr{constructor(e,t,r,i,n){super(n),this.src="",this.nodeType="Function",this.useKeywords=!0,this.includes=[],this.extensions={},this.keywords={},this.isMethod=n===void 0,this.isInterface=!1,this.parse(e,t,r,i)}getShared(e,t){return!this.isMethod}getType(e){return e.getTypeByFormat(this.type)}getInputByName(e){if(this.inputs){let t=this.inputs.length;for(;t--;)if(this.inputs[t].name===e)return this.inputs[t]}}getIncludeByName(e){if(this.includes){let t=this.includes.length;for(;t--;)if(this.includes[t].name===e)return this.includes[t]}}generate(e,t,r,i,n){let a,s=0,o=this.src;if(this.includes)for(let u=0;u<this.includes.length;u++)e.include(this.includes[u],this);for(let u in this.extensions)e.extensions[u]=!0;let l=[];for(;a=FU.exec(this.src);)l.push(a);for(let u=0;u<l.length;u++){let h=l[u],c=h[0],d=this.isMethod?!this.getInputByName(c):!0,f=c;if(this.keywords[c]||this.useKeywords&&d&&ps.containsKeyword(c)){let m=this.keywords[c];if(!m){let p=ps.getKeywordData(c);p.cache&&(m=e.keywords[c]),m=m||ps.getKeyword(c,e),p.cache&&(e.keywords[c]=m)}f=m.build(e)}c!==f&&o[h.index+s-1]!=="."&&(o=o.substring(0,h.index+s)+f+o.substring(h.index+c.length+s),s+=f.length-c.length),this.getIncludeByName(f)===void 0&&ps.contains(f)&&e.include(ps.get(f))}return t==="source"?o:this.isMethod?(this.isInterface||e.include(this,void 0,o),this.name):e.format("( "+o+" )",this.getType(e),t)}parse(e,t,r,i){if(this.src=e||"",this.includes=t??[],this.extensions=r??{},this.keywords=i??{},this.isMethod){let n=IIe.exec(this.src);if(this.inputs=[],n&&n.length==4){this.type=n[1],this.name=n[2];let a=n[3].match(FU);if(a){let s=0;for(;s<a.length;){let o=a[s++],l;o==="in"||o==="out"||o==="inout"?l=a[s++]:(l=o,o="");let u=a[s++];this.inputs.push({name:u,type:l,qualifier:o})}}this.isInterface=this.src.indexOf("{")===-1}else this.type="",this.name=""}}},RIe=/^([a-z_0-9]+)\s([a-z_0-9]+)\s?\=?\s?(.*?)(\;|$)/i,YY=class extends Kr{constructor(e="",t){super(),this.src="",this.useDefine=!1,this.nodeType="Const",this.parse(e||YY.PI,void 0,void 0,void 0,t)}getType(e){return e.getTypeByFormat(this.type)}parse(e,t,r,i,n){this.src=e||"";let a,s,o="",l=RIe.exec(e);this.useDefine=n??this.src.charAt(0)==="#",l&&l.length>1?(s=l[1],a=l[2],o=l[3]):(a=this.src,s="f"),this.name=a,this.type=s,this.value=o}build(e,t){if(t==="source"){if(this.value)return this.useDefine?"#define "+this.name+" "+this.value:"const "+this.type+" "+this.name+" = "+this.value+";";if(this.useDefine)return this.src}return e.include(this),e.format(this.name,this.getType(e),t)}generate(e,t,r,i,n){return e.format(this.name,this.getType(e),t)}},Wr=YY;Wr.PI="PI",Wr.PI2="PI2",Wr.RECIPROCAL_PI="RECIPROCAL_PI",Wr.RECIPROCAL_PI2="RECIPROCAL_PI2",Wr.LOG2="LOG2",Wr.EPSILON="EPSILON";var kIe=new RegExp(`^structs*([a-z_0-9]+)s*{s*((.|
)*?)}`,"gim"),LIe=new RegExp("s*(w*?)s*(w*?)(=|;)","gim"),qY=class extends Kr{constructor(e=""){super(),this.inputs=[],this.src="",this.nodeType="Struct",this.parse(e)}getType(e){return e.getTypeByFormat(this.name)}getInputByName(e){let t=this.inputs.length;for(;t--;)if(this.inputs[t].name===e)return this.inputs[t]}generate(e,t,r,i,n){return t==="source"?this.src+";":e.format("( "+this.src+" )",this.getType(e),t)}parse(e=""){this.src=e,this.inputs=[];let t=kIe.exec(e);if(t){let r=t[2],i;for(;i=LIe.exec(r);)this.inputs.push({type:i[1],name:i[2]});this.name=t[1]}else this.name="";this.type=this.name}},wk=class extends Kr{constructor(e){super("v2",{shared:!1}),this.nodeType="UV",this.index=e??0}generate(e,t){e.requires.uv[this.index]=!0;let r=this.index>0?this.index+1:"",i=e.isShader("vertex")?"uv"+r:"vUv"+r;return e.format(i,this.getType(e),t)}};ps.addKeyword("uv",function(){return new wk});ps.addKeyword("uv2",function(){return new wk(1)});var dm=class extends Kr{constructor(e,t){super("v4"),this.nodeType="ColorSpace",this.input=e,this.method=t??dm.LINEAR_TO_LINEAR,this.hashProperties=["method"]}static getEncodingComponents(e){switch(e){case Su:return["Linear"];case Ht:return["sRGB"];default:return[]}}generate(e,t){var s;let r=this.input.build(e,"v4"),i=this.getType(e),n=dm.Nodes[this.method],a=e.include(n);if(a===dm.LINEAR_TO_LINEAR)return e.format(r,i,t);if(((s=n.inputs)==null?void 0:s.length)===2){let o=this.factor.build(e,"f");return e.format(a+"( "+r+", "+o+" )",i,t)}else return e.format(a+"( "+r+" )",i,t)}fromEncoding(e){let t=dm.getEncodingComponents(e);this.method="LinearTo"+t[0],this.factor=t[1]}fromDecoding(e){let t=dm.getEncodingComponents(e);this.method=t[0]+"ToLinear",this.factor=t[1]}},hu=dm;hu.Nodes={LinearToLinear:new Xe(["vec4 LinearToLinear( in vec4 value ) {","	return value;","}"].join(`
`)),sRGBToLinear:new Xe(["vec4 sRGBToLinear( in vec4 value ) {","	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );","}"].join(`
`)),LinearTosRGB:new Xe(["vec4 LinearTosRGB( in vec4 value ) {","	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );","}"].join(`
`))},hu.LINEAR_TO_LINEAR="LinearToLinear",hu.SRGB_TO_LINEAR="sRGBToLinear",hu.LINEAR_TO_SRGB="LinearTosRGB";var hi=class extends Xe{constructor(e="",t,r,i,n){super(e,n,i,r,t),this.nodeType="Expression"}},sc=class extends Is{constructor(t=new Mn,r,i,n){super("v4",{shared:!0}),this.nodeType="Texture",this.value=t,this.uv=r??new wk,this.bias=i,this.project=n!==void 0?n:!1}getTexture(t,r){return super.generate(t,r,this.value.uuid,"t")}generate(t,r){if(r==="sampler2D")return this.getTexture(t,r);let i=this.getTexture(t,r),n=this.uv.build(t,this.project?"v4":"v2"),a=this.bias?this.bias.build(t,"f"):void 0;a===void 0&&t.context.bias&&(a=t.context.bias.setTexture(this).build(t,"f"));let s,o;this.project?s="texture2DProj":s=a?"tex2DBias":"tex2D",a?o=s+"( "+i+", "+n+", "+a+" )":o=s+"( "+i+", "+n+" )";let l={include:t.isShader("vertex"),ignoreCache:!0},u=this.getType(t);return t.addContext(l),this.colorSpace=this.colorSpace??new hu(new hi("",u)),this.colorSpace.fromDecoding(t.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(o),o=this.colorSpace.build(t,u),t.removeContext(),t.format(o,u,r)}},nt=class extends Is{constructor(e){super("f"),this.nodeType="Float",this.value=e??0}generateReadonly(e,t,r,i,n,a){return e.format(this.value+(this.value%1?"":".0"),i,t)}},UU=class extends Kr{constructor(e,t){super(),this.inputs=[],this.nodeType="FunctionCall",this.value=e,this.inputs=t??[]}getFunction(){return this.value}getType(e){return this.value.getType(e)}generate(e,t,r,i,n){i=this.getType(e);let a=this.value,s=a.build(e,t)+"( ",o=[];if(a.inputs){for(let l=0;l<a.inputs.length;l++){let u=a.inputs[l],h=this.inputs[l]||this.inputs[u.name];o.push(h.build(e,e.getTypeByFormat(u.type)))}s+=o.join(", ")+" )"}return e.format(s,i,t)}},XY=class extends Kr{constructor(e,t,r=XY.ADD){super(),this.nodeType="Operator",this.type=e.type,this.a=e,this.b=t,this.op=r}getType(e){let t=this.a.getType(e),r=this.b.getType(e);return e.isTypeMatrix(t)?"v4":e.getTypeLength(r)>e.getTypeLength(t)?r:t}generate(e,t){let r=this.getType(e);this.type=r;let i=this.a.build(e,r),n=this.b.build(e,r);return e.format("( "+i+" "+this.op+" "+n+" )",r,t)}},us=XY;us.ADD="+",us.SUB="-",us.MUL="*",us.DIV="/";var Gr=class extends Kr{constructor(e,t=Gr.ABS,r,i){super(),this.nodeType="Math",this.a=e,typeof t!="string"?this.b=t:i=t,typeof r!="string"?this.c=r:i=r,this.method=i,this.hashProperties=["method"]}getNumInputs(e){switch(this.method){case Gr.MIX:case Gr.CLAMP:case Gr.REFRACT:case Gr.SMOOTHSTEP:case Gr.FACEFORWARD:return 3;case Gr.MIN:case Gr.MAX:case Gr.MOD:case Gr.STEP:case Gr.REFLECT:case Gr.DISTANCE:case Gr.DOT:case Gr.CROSS:case Gr.POW:return 2;default:return 1}}getInputType(e){let t=e.getTypeLength(this.a.getType(e)),r=this.b?e.getTypeLength(this.b.getType(e)):0,i=this.c?e.getTypeLength(this.c.getType(e)):0;return t>r&&t>i?this.a.getType(e):r>i?this.b.getType(e):this.c.getType(e)}getType(e){switch(this.method){case Gr.LENGTH:case Gr.DISTANCE:case Gr.DOT:return"f";case Gr.CROSS:return"v3"}return this.getInputType(e)}generate(e,t){let r,i,n,a=this.a?e.getTypeLength(this.a.getType(e)):0,s=this.b?e.getTypeLength(this.b.getType(e)):0,o=this.c?e.getTypeLength(this.c.getType(e)):0,l=this.getInputType(e),u=this.getType(e);switch(this.type=u,this.method){case Gr.NEGATE:return e.format("( -"+this.a.build(e,l)+" )",l,t);case Gr.INVERT:return e.format("( 1.0 - "+this.a.build(e,l)+" )",l,t);case Gr.CROSS:r=this.a.build(e,"v3"),i=this.b.build(e,"v3");break;case Gr.STEP:r=this.a.build(e,a===1?"f":l),i=this.b.build(e,l);break;case Gr.MIN:case Gr.MAX:case Gr.MOD:r=this.a.build(e,l),i=this.b.build(e,s===1?"f":l);break;case Gr.REFRACT:r=this.a.build(e,l),i=this.b.build(e,l),n=this.c.build(e,"f");break;case Gr.MIX:r=this.a.build(e,l),i=this.b.build(e,l),n=this.c.build(e,o===1?"f":l);break;default:r=this.a.build(e,l),this.b&&(i=this.b.build(e,l)),this.c&&(n=this.c.build(e,l));break}let h=[];h.push(r),i&&h.push(i),n&&h.push(n);let c=this.getNumInputs(e);if(h.length!==c)throw Error(`Arguments not match used in "${this.method}". Require ${c}, currently ${h.length}.`);return e.format(this.method+"( "+h.join(", ")+" )",u,t)}},Ut=Gr;Ut.RAD="radians",Ut.DEG="degrees",Ut.EXP="exp",Ut.EXP2="exp2",Ut.LOG="log",Ut.LOG2="log2",Ut.SQRT="sqrt",Ut.INV_SQRT="inversesqrt",Ut.FLOOR="floor",Ut.CEIL="ceil",Ut.NORMALIZE="normalize",Ut.FRACT="fract",Ut.SATURATE="saturate",Ut.SIN="sin",Ut.COS="cos",Ut.TAN="tan",Ut.ASIN="asin",Ut.ACOS="acos",Ut.ARCTAN="atan",Ut.ABS="abs",Ut.SIGN="sign",Ut.LENGTH="length",Ut.NEGATE="negate",Ut.INVERT="invert",Ut.MIN="min",Ut.MAX="max",Ut.MOD="mod",Ut.STEP="step",Ut.REFLECT="reflect",Ut.DISTANCE="distance",Ut.DOT="dot",Ut.CROSS="cross",Ut.POW="pow",Ut.MIX="mix",Ut.CLAMP="clamp",Ut.REFRACT="refract",Ut.SMOOTHSTEP="smoothstep",Ut.FACEFORWARD="faceforward";var G0=class extends Kr{constructor(e,t,r){super("v4"),this.nodeType="TextureCubeUV",this.value=e,this.uv=t,this.bias=r}bilinearCubeUV(e,t,r,i){let n=new UU(G0.Nodes.bilinearCubeUV,[t,r,i]);this.colorSpaceTL=this.colorSpaceTL??new hu(new hi("","v4")),this.colorSpaceTL.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTL.input.parse(n.build(e)+".tl"),this.colorSpaceTR=this.colorSpaceTR??new hu(new hi("","v4")),this.colorSpaceTR.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTR.input.parse(n.build(e)+".tr"),this.colorSpaceBL=this.colorSpaceBL??new hu(new hi("","v4")),this.colorSpaceBL.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBL.input.parse(n.build(e)+".bl"),this.colorSpaceBR=this.colorSpaceBR??new hu(new hi("","v4")),this.colorSpaceBR.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBR.input.parse(n.build(e)+".br");let a={include:e.isShader("vertex"),ignoreCache:!0};e.addContext(a),this.colorSpaceTLExp=new hi(this.colorSpaceTL.build(e,"v4"),"v4"),this.colorSpaceTRExp=new hi(this.colorSpaceTR.build(e,"v4"),"v4"),this.colorSpaceBLExp=new hi(this.colorSpaceBL.build(e,"v4"),"v4"),this.colorSpaceBRExp=new hi(this.colorSpaceBR.build(e,"v4"),"v4"),e.removeContext();let s=new hi("mix( mix( cubeUV_TL, cubeUV_TR, cubeUV.f.x ), mix( cubeUV_BL, cubeUV_BR, cubeUV.f.x ), cubeUV.f.y )","v4");return s.keywords.cubeUV_TL=this.colorSpaceTLExp,s.keywords.cubeUV_TR=this.colorSpaceTRExp,s.keywords.cubeUV_BL=this.colorSpaceBLExp,s.keywords.cubeUV_BR=this.colorSpaceBRExp,s.keywords.cubeUV=n,s}generate(e,t){if(e.isShader("fragment")){let r=this.uv,i=this.bias||e.context.roughness,n=new UU(G0.Nodes.roughnessToMip,[i]),a=new Ut(n,G0.Nodes.m0,G0.Nodes.cubeUV_maxMipLevel,Ut.CLAMP),s=new Ut(a,Ut.FLOOR),o=new Ut(a,Ut.FRACT),l=this.bilinearCubeUV(e,this.value,r,s),u=this.bilinearCubeUV(e,this.value,r,new us(s,new nt(1).setReadonly(!0),us.ADD)),h=new Ut(l,u,o,Ut.MIX);return e.format(h.build(e),"v4",t)}else return console.warn("TextureCubeUVNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.getType(e),t)}},v3=G0;v3.Nodes=function(){let e=new qY(`struct TextureCubeUVData {
			vec4 tl;
			vec4 tr;
			vec4 br;
			vec4 bl;
			vec2 f;
		}`),t=new Wr("float cubeUV_maxMipLevel 8.0",!0),r=new Wr("float cubeUV_minMipLevel 4.0",!0),i=new Wr("float cubeUV_maxTileSize 256.0",!0),n=new Wr("float cubeUV_minTileSize 16.0",!0),a=new Xe(`float getFace(vec3 direction) {
				vec3 absDirection = abs(direction);
				float face = -1.0;
				if (absDirection.x > absDirection.z) {
					if (absDirection.x > absDirection.y)
						face = direction.x > 0.0 ? 0.0 : 3.0;
					else
						face = direction.y > 0.0 ? 1.0 : 4.0;
				} else {
					if (absDirection.z > absDirection.y)
						face = direction.z > 0.0 ? 2.0 : 5.0;
					else
						face = direction.y > 0.0 ? 1.0 : 4.0;
				}
				return face;
		}`);a.useKeywords=!1;let s=new Xe(`vec2 getUV(vec3 direction, float face) {
				vec2 uv;
				if (face == 0.0) {
					uv = vec2(direction.z, direction.y) / abs(direction.x); // pos x
				} else if (face == 1.0) {
					uv = vec2(-direction.x, -direction.z) / abs(direction.y); // pos y
				} else if (face == 2.0) {
					uv = vec2(-direction.x, direction.y) / abs(direction.z); // pos z
				} else if (face == 3.0) {
					uv = vec2(-direction.z, direction.y) / abs(direction.x); // neg x
				} else if (face == 4.0) {
					uv = vec2(-direction.x, direction.z) / abs(direction.y); // neg y
				} else {
					uv = vec2(direction.x, direction.y) / abs(direction.z); // neg z
				}
				return 0.5 * (uv + 1.0);
		}`);s.useKeywords=!1;let o=new Xe(`TextureCubeUVData bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {
			float face = getFace(direction);
			float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);
			mipInt = max(mipInt, cubeUV_minMipLevel);
			float faceSize = exp2(mipInt);
			float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);
			vec2 uv = getUV(direction, face) * (faceSize - 1.0);
			vec2 f = fract(uv);
			uv += 0.5 - f;
			if (face > 2.0) {
				uv.y += faceSize;
				face -= 3.0;
			}
			uv.x += face * faceSize;
			if(mipInt < cubeUV_maxMipLevel){
				uv.y += 2.0 * cubeUV_maxTileSize;
			}
			uv.y += filterInt * 2.0 * cubeUV_minTileSize;
			uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);
			uv *= texelSize;
			vec4 tl = texture2D(envMap, uv);
			uv.x += texelSize;
			vec4 tr = texture2D(envMap, uv);
			uv.y += texelSize;
			vec4 br = texture2D(envMap, uv);
			uv.x -= texelSize;
			vec4 bl = texture2D(envMap, uv);
			return TextureCubeUVData( tl, tr, br, bl, f );
		}`,[e,a,s,t,r,i,n]);o.useKeywords=!1;let l=new Wr("float r0 1.0",!0),u=new Wr("float v0 0.339",!0),h=new Wr("float m0 -2.0",!0),c=new Wr("float r1 0.8",!0),d=new Wr("float v1 0.276",!0),f=new Wr("float m1 -1.0",!0),m=new Wr("float r4 0.4",!0),p=new Wr("float v4 0.046",!0),g=new Wr("float m4 2.0",!0),v=new Wr("float r5 0.305",!0),y=new Wr("float v5 0.016",!0),x=new Wr("float m5 3.0",!0),b=new Wr("float r6 0.21",!0),_=new Wr("float v6 0.0038",!0),w=new Wr("float m6 4.0",!0),E=[l,u,h,c,d,f,m,p,g,v,y,x,b,_,w],S=new Xe(`float roughnessToMip(float roughness) {
			float mip = 0.0;
			if (roughness >= r1) {
				mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;
			} else if (roughness >= r4) {
				mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;
			} else if (roughness >= r5) {
				mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;
			} else if (roughness >= r6) {
				mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;
			} else {
				mip = -2.0 * log2(1.16 * roughness);// 1.16 = 1.79^0.25
			}
			return mip;
		}`,E);return{bilinearCubeUV:o,roughnessToMip:S,m0:h,cubeUV_maxMipLevel:t}}();var fm=class extends Kr{constructor(e){super("v3"),this.nodeType="Normal",this.scope=e??fm.VIEW}getShared(){return this.scope===fm.WORLD}build(e,t,r,i){let n=e.context[this.scope+"Normal"];return n?n.build(e,t,r,i):super.build(e,t,r)}generate(e,t,r,i,n){let a;switch(this.scope){case fm.VIEW:e.isShader("vertex")?a="transformedNormal":a="geometryNormal";break;case fm.LOCAL:e.isShader("vertex")?a="objectNormal":(e.requires.normal=!0,a="vObjectNormal");break;case fm.WORLD:e.isShader("vertex")?a="inverseTransformDirection( transformedNormal, viewMatrix ).xyz":(e.requires.worldNormal=!0,a="vWNormal");break}return e.format(a,this.getType(e),t)}},ys=fm;ys.LOCAL="local",ys.WORLD="world",ys.VIEW="view",ys.NORMAL="normal";ps.addKeyword("viewNormal",function(){return new ys(ys.VIEW)});ps.addKeyword("localNormal",function(){return new ys(ys.NORMAL)});ps.addKeyword("worldNormal",function(){return new ys(ys.WORLD)});var qu=class extends Kr{constructor(e){super("v3"),this.nodeType="Position",this.scope=e??qu.LOCAL}getType(){switch(this.scope){case qu.PROJECTION:return"v4"}return this.type}getShader(){switch(this.scope){case qu.LOCAL:case qu.WORLD:return!1}return!0}generate(e,t,r,i,n){let a;switch(this.scope){case qu.LOCAL:e.isShader("vertex")?a="transformed":(e.requires.position=!0,a="vPosition");break;case qu.WORLD:if(e.isShader("vertex"))return"( modelMatrix * vec4( transformed, 1.0 ) ).xyz";e.requires.worldPosition=!0,a="vWPosition";break;case qu.VIEW:a=e.isShader("vertex")?"-mvPosition.xyz":"vViewPosition";break;case qu.PROJECTION:a=e.isShader("vertex")?"( projectionMatrix * modelViewMatrix * vec4( position, 1.0 ) )":"vec4( 0.0 )";break}return e.format(a,this.getType(),t)}},pl=qu;pl.LOCAL="local",pl.WORLD="world",pl.VIEW="view",pl.PROJECTION="projection";ps.addKeyword("position",function(){return new pl});ps.addKeyword("worldPosition",function(){return new pl(pl.WORLD)});ps.addKeyword("viewPosition",function(){return new pl(pl.VIEW)});var Hl=class extends Kr{constructor(e){super("v3"),this.nodeType="Reflect",this.scope=e??Hl.CUBE}getUnique(e){return!e.context.viewNormal}getType(){switch(this.scope){case Hl.SPHERE:return"v2"}return this.type}generate(e,t){let r=this.getUnique(e);if(e.isShader("fragment")){let i;switch(this.scope){case Hl.VECTOR:{let n=new ys(ys.VIEW),a=e.context.roughness,s=n.build(e,"v3"),o=new pl(pl.VIEW).build(e,"v3"),l=a?a.build(e,"f"):void 0,u=`reflect( -normalize( ${o} ), ${s} )`;l&&(u=`normalize( mix( ${u}, ${s}, ${l} * ${l} ) )`);let h=`inverseTransformDirection( ${u}, viewMatrix )`;r?(e.addNodeCode(`vec3 reflectVec = ${h};`),i="reflectVec"):i=h;break}case Hl.CUBE:{let n=new Hl(Hl.VECTOR).build(e,"v3"),a="vec3( -"+n+".x, "+n+".yz )";r?(e.addNodeCode(`vec3 reflectCubeVec = ${a};`),i="reflectCubeVec"):i=a;break}case Hl.SPHERE:{let n="normalize( ( viewMatrix * vec4( "+new Hl(Hl.VECTOR).build(e,"v3")+", 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) ).xy * 0.5 + 0.5";r?(e.addNodeCode(`vec2 reflectSphereVec = ${n};`),i="reflectSphereVec"):i=n;break}}return e.format(i,this.getType(),t)}else return console.warn("ReflectNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.type,t)}},fg=Hl;fg.CUBE="cube",fg.SPHERE="sphere",fg.VECTOR="vector";var BIe=class extends Kr{constructor(e=new sc,t,r){super("v4"),this.nodeType="TextureCube",this.value=e,this.radianceNode=new v3(this.value,t??new fg(fg.VECTOR),r),this.irradianceNode=new v3(this.value,new ys(ys.WORLD),new nt(1).setReadonly(!0))}generate(e,t){return e.isShader("fragment")?(e.require("irradiance"),e.context.bias&&e.context.bias.setTexture(this.value),(e.slot==="irradiance"?this.irradianceNode:this.radianceNode).build(e,t)):(console.warn("TextureCubeNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.getType(e),t))}},NIe=class extends Is{constructor(e=new _R,t,r){super("v4",{shared:!0}),this.nodeType="CubeTexture",this.value=e,this.uv=t??new fg,this.bias=r}getTexture(e,t){return super.generate(e,t,this.value.uuid,"tc")}generate(e,t){var l;if(t==="samplerCube")return this.getTexture(e,t);let r=this.getTexture(e,t),i=(l=this.uv)==null?void 0:l.build(e,"v3"),n=this.bias?this.bias.build(e,"f"):void 0;n===void 0&&e.context.bias&&(n=e.context.bias.setTexture(this).build(e,"f"));let a;n?a="texCubeBias( "+r+", "+i+", "+n+" )":a="texCube( "+r+", "+i+" )";let s={include:e.isShader("vertex"),ignoreCache:!0},o=this.getType(e);return e.addContext(s),this.colorSpace=this.colorSpace??new hu(new hi("",o)),this.colorSpace.fromDecoding(e.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(a),a=this.colorSpace.build(e,o),e.removeContext(),e.format(a,o,t)}},zIe=`
uniform int frameIndex;
uniform vec2 resolution;
uniform mat4 previousModelViewMatrix;
uniform mat4 previousProjectionMatrix;

varying vec4 vCurrentPosition;
varying vec4 vPreviousPosition;
`,FIe=`
layout(location = 1) out vec4 gVelocity;

uniform int frameIndex;
uniform vec2 resolution;

varying vec4 vCurrentPosition;
varying vec4 vPreviousPosition;

const vec2 haltonSequence[16] = vec2[16](
vec2( 0.000000,-0.333334),
vec2(-0.500000, 0.333334),
vec2( 0.500000,-0.777778),
vec2(-0.750000,-0.111112),
vec2( 0.250000, 0.555556),
vec2(-0.250000,-0.555556),
vec2( 0.750000, 0.111112),
vec2(-0.875000, 0.777778),
vec2(0.125000, -0.925926),
vec2(-0.375000, -0.259260),
vec2(0.625000, 0.407408),
vec2(-0.625000, -0.703704),
vec2(0.375000, -0.037038),
vec2(-0.125000, 0.629630),
vec2(0.875000, -0.481482),
vec2(-0.937500, 0.185186));

vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {
  const float goldenAngle = 2.399963f; // radians
  float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));
  float theta = float(sampleIndex) * goldenAngle + angle;
  float sine = sin(theta);
  float cosine = cos(theta);
  return vec2(cosine, sine) * r;
}

// Derived from the interleaved gradient function from Jimenez 2014 http:goo.gl/eomGso
float getNoiseInterleavedGradient(vec2 screenPos) {
    vec3 magic = vec3(0.06711056f, 0.00583715f, 52.9829189f);
    return fract(magic.z * fract(dot(screenPos, magic.xy)));
}

`,UIe=`
// TODO: This could be generated CPU side and passed to the shader every frame
const vec2 haltonSequence[16] = vec2[16](
vec2( 0.000000,-0.333334),
vec2(-0.500000, 0.333334),
vec2( 0.500000,-0.777778),
vec2(-0.750000,-0.111112),
vec2( 0.250000, 0.555556),
vec2(-0.250000,-0.555556),
vec2( 0.750000, 0.111112),
vec2(-0.875000, 0.777778),
vec2(0.125000, -0.925926),
vec2(-0.375000, -0.259260),
vec2(0.625000, 0.407408),
vec2(-0.625000, -0.703704),
vec2(0.375000, -0.037038),
vec2(-0.125000, 0.629630),
vec2(0.875000, -0.481482),
vec2(-0.937500, 0.185186));

// TODO: Pass correct view size
vec2 offset = haltonSequence[frameIndex];
offset.x /= resolution.x;
offset.y /= resolution.y;

vec4 currentPosition = gl_Position;
vec4 currentPositionJittered = currentPosition + (vec4(offset.x, offset.y, 0.0, 0.0) * currentPosition.w);

// We want to calculate the velocity with unjittered positions
// so that things that are not moving get a velocity = 0
vCurrentPosition = currentPosition;
vPreviousPosition = previousProjectionMatrix * previousModelViewMatrix * vec4(transformed, 1.0);
#ifdef OUTLINE_COMPENSATION
vPreviousPosition.xy += OUTLINE_COMPENSATION;
#endif
gl_Position = currentPositionJittered;

`,jIe=`
vec2 oldPos = vPreviousPosition.xy;
    oldPos /= vPreviousPosition.w;
    oldPos.xy = (oldPos.xy+1.)/2.0;

vec2 newPos = vCurrentPosition.xy;
    newPos /= vCurrentPosition.w;
    newPos.xy = (newPos.xy+1.)/2.0;

vec2 velocity = (newPos - oldPos);

// Discard fully transparent pixels 
if (gl_FragColor.a <= 0.0) discard;

gVelocity = vec4(velocity, 0.0, 1.0);
`,jU=["x","y","z","w"],VIe=["float","vec2","vec3","vec4"],HIe={float:"f",vec2:"v2",vec3:"v3",vec4:"v4",mat4:"v4",int:"i",bool:"b","float[]":"f[]","vec4[]":"v4[]"},GIe={t:"sampler2D",tc:"samplerCube",b:"bool",i:"int",f:"float",c:"vec3",v2:"vec2",v3:"vec3",v4:"vec4",m3:"mat3",m4:"mat4","f[]":"float[]","v4[]":"vec4[]"},WIe=class{constructor(){this.includes={consts:{},functions:{},structs:{}},this.cache="",this.slot="",this.shader="",this.context={},this.needsJitter=!0,this.getIncludesCode=function(){function e(t,r){return t.deps.length-r.deps.length}return function(t,r){let i=this.getIncludes(t,r);if(!i)return"";let n="";i=i.sort(e);for(let a=0;a<i.length;a++)i[a].src&&(n+=i[a].src+`
`);return n}}(),this.slots=[],this.caches=[],this.contexts=[],this.keywords={},this.nodeData={},this.fragmentVariables={},this.fragmentParsVariables={},this.vertexParsVariables={},this.requires={uv:[],color:[],transparent:!1,irradiance:!1,position:!1,worldPosition:!1,normal:!1,worldNormal:!1,vWorldViewDir:!1,modelMatrix:!1,viewMatrix:!1,projectionMatrix:!1},this.includes={consts:[],functions:[],structs:[]},this.attributes={},this.prefixCode=["#ifdef TEXTURE_LOD_EXT","	#define texCube(a, b) textureCube(a, b)","	#define texCubeBias(a, b, c) textureCubeLodEXT(a, b, c)","	#define tex2D(a, b) texture2D(a, b)","	#define tex2DBias(a, b, c) texture2DLodEXT(a, b, c)","#else","	#define texCube(a, b) textureCube(a, b)","	#define texCubeBias(a, b, c) textureCube(a, b, c)","	#define tex2D(a, b) texture2D(a, b)","	#define tex2DBias(a, b, c) texture2D(a, b, c)","#endif",`
			// NOTE: Include Spline's blending modes. This could be part of BlendNode
			#define SPE_BLENDING_NORMAL 0
			#define SPE_BLENDING_MULTIPLY 1
			#define SPE_BLENDING_SCREEN 2
			#define SPE_BLENDING_OVERLAY 3

			vec3 spe_normalBlend( vec3 a, vec3 b, float alpha ) {
				return mix( a, b, alpha );
			}

			vec3 spe_multiplyBlend( vec3 a, vec3 b, float alpha ) {
				return mix( a, a * b, alpha );
			}

			vec3 spe_screenBlend( vec3 a, vec3 b, float alpha ) {
				vec3 tmp = 1.0 - ( 1.0 - a ) * ( 1.0 - b );
				return mix( a, tmp, alpha );
			}

			vec3 spe_overlayBlend( vec3 a, vec3 b, float alpha ) {
				vec3 tmp = mix( 1. - 2. * (1. - a) * (1. - b), 2. * a * b, step( a, vec3(.5) ) );
				return clamp( mix( a, tmp, alpha ), 0.0, 1.0 );
			}

			vec3 spe_blend( vec3 a, vec3 b, float alpha, int mode ) {
				if ( mode == SPE_BLENDING_NORMAL ) return spe_normalBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_MULTIPLY ) return spe_multiplyBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_SCREEN ) return spe_screenBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_OVERLAY ) return spe_overlayBlend( a, b, alpha );
				return vec3( 1.0 );
			}
			`,"#include <packing>","#include <common>"].join(`
`),this.parsCode={vertex:["float neighbor_offset = 0.0001;",""].join(`
`),fragment:["float accumAlpha = 0.0;",`void accumulateAlpha(float alpha) {
					accumAlpha += (1.0 - accumAlpha) * alpha;
				}`,""].join(`
`)},this.code={vertex:"",fragment:""},this.nodeCode={vertex:"",fragment:""},this.resultCode={vertex:"",fragment:""},this.finalCode={vertex:"",fragment:""},this.inputs={uniforms:{list:[],vertex:[],fragment:[]},arrayUniforms:{list:[],vertex:[],fragment:[]},vars:{varying:[],vertex:[],fragment:[]}},this.defines={},this.uniforms={},this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.updaters=[],this.nodes=[],this.analyzing=!1}build(e,t){this.addVertexParsCode(zIe),this.addFragmentParsCode(FIe),this.buildShader("vertex",e),this.buildShader("fragment",t);for(let r=0;r<this.requires.uv.length;r++)if(this.requires.uv[r]){let i=r>0?r+1:"";this.addVaryCode("varying vec2 vUv"+i+";"),r>0&&this.addVertexParsCode("attribute vec2 uv"+i+";"),this.addVertexFinalCode("vUv"+i+" = uv"+i+";")}return this.requires.color[0]&&(this.addVaryCode("varying vec4 vColor;"),this.addVertexParsCode("attribute vec4 color;"),this.addVertexFinalCode("vColor = color;")),this.requires.color[1]&&(this.addVaryCode("varying vec4 vColor2;"),this.addVertexParsCode("attribute vec4 color2;"),this.addVertexFinalCode("vColor2 = color2;")),this.requires.position&&(this.addVaryCode("varying vec3 vPosition;"),this.addVertexFinalCode("vPosition = transformed;")),this.requires.worldPosition,this.requires.normal&&(this.addVaryCode("varying vec3 vObjectNormal;"),this.addVertexFinalCode("vObjectNormal = normal;")),this.requires.modelMatrix&&this.addFragmentParsCode("uniform mat4 modelMatrix;"),this.requires.viewMatrix&&this.addFragmentParsCode("uniform mat4 viewMatrix;"),this.requires.projectionMatrix&&this.addFragmentParsCode("uniform mat4 projectionMatrix;"),this.requires.worldNormal&&(this.addVaryCode("varying vec3 vWNormal;"),this.addVertexFinalCode("vWNormal = inverseTransformDirection( transformedNormal, viewMatrix ).xyz;")),this.requires.vWorldViewDir&&(this.addVaryCode("varying vec3 vWorldViewDir;"),this.addVertexFinalCode("vWorldViewDir = isPerspectiveMatrix( projectionMatrix ) ?  ( (modelMatrix * vec4(position, 1.0)).xyz - cameraPosition ) : vec3( -viewMatrix[0][2], -viewMatrix[1][2], -viewMatrix[2][2] );")),this.needsJitter&&(this.addVertexFinalCode(UIe),this.addFragmentFinalCode(jIe)),this}buildShader(e,t){this.resultCode[e]=t.build(this.setShader(e),"v4")}setMaterial(e,t){return this.defines={},this}addFlow(e,t,r){return this.addSlot(e).addCache(t).addContext(r)}removeFlow(){return this.removeSlot().removeCache().removeContext()}addCache(e){return this.cache=e??"",this.caches.push(this.cache),this}removeCache(){return this.caches.pop(),this.cache=this.caches[this.caches.length-1]||"",this}addContext(e){return this.context=Object.assign({},this.context,e),this.context.extra=this.context.extra||{},this.contexts.push(this.context),this}removeContext(){return this.contexts.pop(),this.context=this.contexts[this.contexts.length-1]||{},this}addSlot(e){return this.slot=e||"",this.slots.push(this.slot),this}removeSlot(){return this.slots.pop(),this.slot=this.slots[this.slots.length-1]||"",this}addFragmentVariable(e,t){this.fragmentVariables[e]===void 0&&(this.addFragmentCode(`${t} ${e};`),this.fragmentVariables[e]="")}addFragmentParsVariable(e,t){this.fragmentParsVariables[e]===void 0&&(this.addFragmentParsCode(`${t} ${e};`),this.fragmentParsVariables[e]="")}addVertexParsVariable(e,t){this.vertexParsVariables[e]===void 0&&(this.addVertexParsCode(`${t} ${e};`),this.vertexParsVariables[e]="")}addVertexCode(e){this.addCode(e,"vertex")}addFragmentCode(e){this.addCode(e,"fragment")}addCode(e,t){this.code[t??this.shader]+=e+`
`}addVertexNodeCode(e){this.addNodeCode(e,"vertex")}addFragmentNodeCode(e){this.addNodeCode(e,"fragment")}addNodeCode(e,t){this.nodeCode[t??this.shader]+=e+`
`}clearNodeCode(e){e=e??this.shader;let t=this.nodeCode[e];return this.nodeCode[e]="",t}clearVertexNodeCode(){return this.clearNodeCode("vertex")}clearFragmentNodeCode(){return this.clearNodeCode("fragment")}addVertexFinalCode(e){this.addFinalCode(e,"vertex")}addFragmentFinalCode(e){this.addFinalCode(e,"fragment")}addFinalCode(e,t){this.finalCode[t??this.shader]+=e+`
`}addVertexParsCode(e){this.addParsCode(e,"vertex")}addFragmentParsCode(e){this.addParsCode(e,"fragment")}addParsCode(e,t){this.parsCode[t??this.shader]+=e+`
`}addVaryCode(e){this.addVertexParsCode(e),this.addFragmentParsCode(e)}isCache(e){return this.caches.indexOf(e)!==-1}isSlot(e){return this.slots.indexOf(e)!==-1}define(e,t){this.defines[e]=t===void 0?1:t}require(e){this.requires[e]=!0}isDefined(e){return this.defines[e]!==void 0}getVar(e,t,r,i="varying",n="V",a=""){let s=this.getVars(i),o=s[e];if(!o){let l=s.length;o={name:r||"node"+n+l+(a?"_"+a:""),type:t},s.push(o),s[e]=o}return o}getTempVar(e,t,r,i){return this.getVar(e,t,r,this.shader,"T",i)}getAttribute(e,t){if(!this.attributes[e]){let r=this.getVar(e,t);this.addVertexParsCode("attribute "+t+" "+e+";"),this.addVertexFinalCode(r.name+" = "+e+";"),this.attributes[e]={varying:r,name:e,type:t}}return this.attributes[e]}getCode(e){return[this.prefixCode,this.parsCode[e],this.getVarListCode(this.getVars("varying"),"varying"),this.getVarListCode(this.inputs.uniforms[e],"uniform"),this.getVarListCode(this.inputs.arrayUniforms[e],"uniform"),this.getIncludesCode("consts",e),this.getIncludesCode("structs",e),this.getIncludesCode("functions",e),"void main() {",this.getVarListCode(this.getVars(e)),this.code[e],this.resultCode[e],this.finalCode[e],"}"].join(`
`)}getVarListCode(e,t){t=t??"";let r="";for(let i=0,n=e.length;i<n;++i){let a=e[i],s=a.type,o=a.name,l=a.size,u=this.getFormatByType(s);if(u===void 0)throw new Error("Node pars "+u+" not found.");u.includes("[]")?r+=t+" "+u.substring(0,u.length-2)+" "+o+`[${l}];
`:r+=t+" "+u+" "+o+`;
`}return r}getVars(e){return this.inputs.vars[e??this.shader]}getNodeData(e){let t=e instanceof gd?e.uuid:e;return this.nodeData[t]=this.nodeData[t]||{}}createUniform(e,t,r,i,n,a){if(t.includes("[]")){let s=this.inputs.arrayUniforms,o=s.list.length,l=new zU({type:t,size:r.size,name:i||"nodeUA"+o+(a?"_"+a:""),node:r,needsUpdate:n});return s.list.push(l),s[e].push(l),s[e][l.name]=l,this.uniforms[l.name]=l,l}else{let s=this.inputs.uniforms,o=s.list.length,l=new zU({type:t,name:i||"nodeU"+o+(a?"_"+a:""),node:r,needsUpdate:n});return s.list.push(l),s[e].push(l),s[e][l.name]=l,this.uniforms[l.name]=l,l}}createVertexUniform(e,t,r,i,n){return this.createUniform("vertex",e,t,r,i,n)}createFragmentUniform(e,t,r,i,n){return this.createUniform("fragment",e,t,r,i,n)}include(e,t,r){var a;let i;if(e=typeof e=="string"?ps.get(e):e,this.context.include===!1)return e.name;e instanceof Xe?i=this.includes.functions:e instanceof Wr?i=this.includes.consts:e instanceof qY&&(i=this.includes.structs);let n=i[this.shader]=i[this.shader]||[];if(e){let s=n[e.name];if(s||(s=n[e.name]={node:e,deps:[]},n.push(s),s.src=e.build(this,"source")),e instanceof Xe&&t&&n[t.name]&&n[t.name].deps.indexOf(e)===-1&&(n[t.name].deps.push(e),(a=e.includes)==null?void 0:a.length)){let o=0;do this.include(e.includes[o++],t);while(o<e.includes.length)}return r&&(s.src=r),e.name}else throw new Error("Include not found.")}colorToVectorProperties(e){return e.replace("r","x").replace("g","y").replace("b","z").replace("a","w")}colorToVector(e){return e.replace(/c/g,"v3")}getIncludes(e,t){return this.includes[e][t||this.shader]}getConstructorFromLength(e){return VIe[e-1]}isTypeMatrix(e){return/^m/.test(e)}getTypeLength(e){return e==="f"?1:parseInt(this.colorToVector(e).substr(1))}getTypeFromLength(e){return e===1?"f":"v"+e}findNode(...e){for(let t=0;t<arguments.length;t++){let r=e[t];if(r!=null&&r.isNode)return r}}resolve(...e){for(let t=0;t<arguments.length;t++){let r=e[t];if(r!==void 0){if(r.isNode)return r;if(r.isTexture)switch(r.mapping){case Ff:case Uf:return new NIe(r);case Y1:return new BIe(new sc(r));default:return new sc(r)}else{if(r.isVector2)return new ea(r);if(r.isVector3)return new vo(r);if(r.isVector4)return new Ju(r)}}}}format(e,t,r){switch(this.colorToVector(r+" <- "+t)){case"f <- v2":return e+".x";case"f <- v3":return e+".x";case"f <- v4":return e+".x";case"f <- i":case"f <- b":return"float( "+e+" )";case"v2 <- f":return"vec2( "+e+" )";case"v2 <- v3":return e+".xy";case"v2 <- v4":return e+".xy";case"v2 <- i":case"v2 <- b":return"vec2( float( "+e+" ) )";case"v3 <- f":return"vec3( "+e+" )";case"v3 <- v2":return"vec3( "+e+", 0.0 )";case"v3 <- v4":return e+".xyz";case"v3 <- i":case"v3 <- b":return"vec2( float( "+e+" ) )";case"v4 <- f":return"vec4( "+e+" )";case"v4 <- v2":return"vec4( "+e+", 0.0, 1.0 )";case"v4 <- v3":return"vec4( "+e+", 1.0 )";case"v4 <- i":case"v4 <- b":return"vec4( float( "+e+" ) )";case"i <- f":case"i <- b":return"int( "+e+" )";case"i <- v2":return"int( "+e+".x )";case"i <- v3":return"int( "+e+".x )";case"i <- v4":return"int( "+e+".x )";case"b <- f":return"( "+e+" != 0.0 )";case"b <- v2":return"( "+e+" != vec2( 0.0 ) )";case"b <- v3":return"( "+e+" != vec3( 0.0 ) )";case"b <- v4":return"( "+e+" != vec4( 0.0 ) )";case"b <- i":return"( "+e+" != 0 )"}return e}getTypeByFormat(e){return HIe[e]||e}getFormatByType(e){return GIe[e]||e}getUUID(e,t){return t=t!==void 0?t:!0,t&&this.cache&&(e=this.cache+"-"+e),e}getElementByIndex(e){return jU[e]}getIndexByElement(e){return jU.indexOf(e)}isShader(e){return this.shader===e}setShader(e){return this.shader=e,this}mergeDefines(e){for(let t in e)this.defines[t]=e[t];return this.defines}mergeUniform(e){for(let t in e)this.uniforms[t]=e[t];return this.uniforms}getTextureEncodingFromMap(e){let t;return e?e.isTexture&&(t=e.encoding):t=Su,t===Su&&this.context.gamma&&(t=Ht),t}},Bi=class extends Is{constructor(e=0,t,r,i){super("c"),this.nodeType="Color",this.value=e instanceof As?e:new As(e||0,t,r,i)}setRGBA(e){this.value.setRGBA(e.r,e.g,e.b,e.a)}generate(e,t,r,i,n,a){r=e.getUUID(r??this.getUUID()),i=i??this.getType(e);let s=e.getNodeData(r),o=this.getReadonly()&&this.generateReadonly!==void 0;if(this.alpha){let l=this.alpha.build(e,"f");e.addFragmentNodeCode(`accumAlpha += ( 1.0 - accumAlpha ) * ${l};`)}return o?this.generateReadonly(e,t,r,i,n,a):e.isShader("vertex")?(s.vertex||(s.vertex=e.createVertexUniform(i,this,n,a,this.getLabel())),e.format(s.vertex.name,i,t)):(s.fragment||(s.fragment=e.createFragmentUniform(i,this,n,a,this.getLabel())),e.format(s.fragment.name,i,t))}generateReadonly(e,t,r,i,n,a){return e.format("vec3("+this.value.r+", "+this.value.g+", "+this.value.b+")",i,t)}},ei=class extends Is{constructor(e){super("i"),this.nodeType="Int",this.value=Math.floor(e??0)}generateReadonly(e,t,r,i,n,a){return e.format(this.value.toString(),i,t)}},$a=class extends Is{constructor(e){super("b"),this.nodeType="Bool",this.value=e??!1}generateReadonly(e,t,r,i){return e.format(this.value?"true":"false",i,t)}},Vd=class extends Is{constructor(e=1,t){super("f[]"),this.nodeType="FloatArray",this.size=e,this.value=Array.isArray(t)?t:typeof t=="number"?new Array(e).fill(t):new Array(e).fill(0)}},_k=class extends Is{},$Ie=class extends _k{constructor(e){super("v3"),this.image=e,this._value=new T}get value(){return this._value.x=this.image.isVideo?this.image.img.videoWidth??0:this.image.img.width,this._value.y=this.image.isVideo?this.image.img.videoHeight??0:this.image.img.height,this._value}},y3=class extends _k{constructor(e,t){super("t"),this.image=e,this.wrap=t}get value(){return this.image.getTexture(this.wrap)}},QY=class extends Is{constructor(e){super("m3"),this.nodeType="Matrix3",this.value=e??new Hn}generateReadonly(e,t,r,i,n,a){return e.format("mat3("+this.value.elements.join(", ")+")",i,t)}get elements(){return this.value.elements}set elements(e){this.value.fromArray(e)}},Au=class extends Is{constructor(t){super("m4"),this.nodeType="Matrix4",this.value=t??new ze}generateReadonly(t,r,i,n,a,s){return t.format("mat4("+this.value.elements.join(", ")+")",n,r)}get elements(){return this.value.elements}set elements(t){this.value.fromArray(t)}};function VU(e,t,r){e.setUvTransform(r[0],r[1],t[0],t[1],0,0,0)}var YIe=class extends QY{constructor(e,t){super(new Hn),this.repeat=e,this.offset=t,VU(this.value,e,t)}updateMatrix(){VU(this.value,this.repeat,this.offset)}},Hd=class extends Is{constructor(e=1,t){super("v4[]"),this.nodeType="Vector4Array",this.size=e,this.value=Array.isArray(t)?t:t instanceof Wt?new Array(e).fill(t):new Array(e).fill(new Wt(0))}},HU=class extends Kr{constructor(e,t,r,i){super("v3"),this.nodeType="Blend",this.a=e,this.b=t,this.alpha=r,this.mode=i}generate(e,t){if(e.isShader("fragment")){let r=[];return r.push(this.a.build(e,"c")),r.push(this.b.build(e,"c")),r.push(this.alpha.build(e,"f")),r.push(this.mode.build(e,"i")),e.format("spe_blend("+r.join(",")+")",this.getType(e),t)}else return console.warn("BlendNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},KY=class extends Kr{constructor(e,t){super("v3"),this.nodeType="CustomColor",this.color=e,this.alpha=t,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){let r=e.include(KY.Nodes.customColor);e.addFragmentVariable(this.calpha,"float");let i=[];return i.push(this.color.build(e,"v3")),i.push(this.mask?`luminance(${this.mask.build(e,"v3")})`:"1.0"),i.push(this.alpha.build(e,"f")),i.push(this.calpha),e.format(r+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("CustomColorNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},x3=KY;x3.Nodes=function(){return{customColor:new Xe(`vec3 customColor(vec3 color, float mask, float alpha, out float calpha) {
				float lalpha = alpha * mask;
				calpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);
				accumAlpha += (1.0 - accumAlpha) * lalpha;

				return color;
			}`)}}();var ZY=class extends Kr{constructor(e,t){super("v3"),this.nodeType="CustomNormal",this.cnormal=e,this.alpha=t,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){let r=e.include(ZY.Nodes.customNormal);e.addFragmentVariable(this.calpha,"float");let i=[];return i.push(this.cnormal.build(e,"v3")),i.push("normal"),i.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),i.push(this.alpha.build(e,"f")),i.push(this.calpha),e.format(r+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("CustomNormalNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},JY=ZY;JY.Nodes=function(){return{customNormal:new Xe(`vec3 customNormal(vec3 cnormal, vec3 norm, float mask, float alpha, out float calpha) {
				vec3 normal = packNormalToRGB( norm ).rgb;
				normal *= step( vec3(0.5), cnormal );

				float lalpha = alpha * mask;
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * lalpha;

				return normal;
			}`)}}();var W0=class extends Kr{constructor(e,t,r,i,n,a,s,o,l,u,h,c){super("v3"),this.nodeType="CustomTexture",this.texture=e,this.textureSize=t,this.crop=r,this.projection=i,this.axis=n,this.side=a,this.size=s,this.blending=o,this.mat=l,this.isMask=c,this.alpha=u,this.mode=h,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){e.require("position"),e.require("normal"),e.require("uv"),e.requires.uv=[!0],e.extensions.shaderTextureLOD=!0,e.extensions.derivatives=!0;let r=`g${this.uuid.toString().replace(/-/g,"")}`,i;switch(this.projection.value){case 3:i=e.include(W0.Nodes.cylindrical);break;case 2:i=e.include(W0.Nodes.spherical);break;case 1:let a=["vec3(1.0, 0.0, 0.0)","vec3(0.0, 1.0, 0.0)","vec3(0.0, 0.0, 1.0)"][this.axis.value],s=["zy","xz","xy"][this.axis.value],o=new Xe(`
		vec3 ${r}_planarTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {
				vec2 projected = (1. + (position.${s})) / 2.;
				vec2 uvs = ( mat * vec3( (projected * 2. - 1.) / (size * .5), 1. ) / 2. + 0.5 ).xy;
				writeUv = uvs;

				vec4 tmp = texture2D( tex, uvs );

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				${this.side.value===2?"":`lalpha *= step(0.0, ${this.side.value===1?"-1.0 * ":""}dot(vObjectNormal, mat * ${a}));`}

				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				
				lalpha *= mask;

				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;
			}`);i=e.include(o);break;case 4:i=e.include(W0.Nodes.triplanar);break;default:i=e.include(W0.Nodes.uv);break}e.addFragmentVariable(this.calpha,"float");let n=[];if(n.push("normal"),n.push(this.texture.generate(e,"t")),n.push(this.textureSize.build(e,"v2")),n.push(this.crop.build(e,"f")),n.push(this.mat.build(e,"mat3")),n.push(this.size.build(e,"v2")),n.push(this.blending.build(e,"f")),n.push(this.isMask.build(e,"b")),n.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),n.push(this.alpha.build(e,"f")),n.push(this.mode.build(e,"i")),n.push(this.calpha),this.projection.value===4){let a=`${r}_writeUvs`,s=a+"0",o=a+"1",l=a+"2",u=`${r}_triplanarWeights`;e.addFragmentVariable(s,"vec2"),e.addFragmentVariable(o,"vec2"),e.addFragmentVariable(l,"vec2"),e.addFragmentVariable(u,"vec3"),n.push(s),n.push(o),n.push(l),n.push(u)}else{let a=`${r}_writeUvs`;e.addFragmentVariable(a,"vec2"),n.push(a)}return e.format(i+"("+n.join(",")+")",this.getType(e),t)}},Sk=W0;Sk.Nodes=function(){let e=new Xe(`
vec3 cylindricalTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {
                vec3 posN = normalize(position);
                float u = 0.5 + atan(posN.z, posN.x) / (2.*3.1415);
                float scaledHeight = position.y / (size.y * 0.5);
                float v =  (scaledHeight / 2.) + .5;

                vec2 calculatedUv = vec2(u,v);
				vec2 uvs = ( mat * vec3( calculatedUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;
				writeUv = uvs;

                vec2 df = fwidth(uvs);
               	if(df.x > 0.5) df.x = 0.;

				#ifdef GL_EXT_shader_texture_lod
                vec4 tmp = texture2DLodEXT(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#else
                vec4 tmp = textureLod(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#endif

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}

				lalpha *= mask;
				
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;
			}
`),t=new Xe(`
vec3 sphericalTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {
                vec3 posN = normalize(vPosition);
                float u = 0.5 + atan(posN.z, posN.x) / (2.*3.1415);
                float v = 0.5 + asin(posN.y) / 3.1415;

                vec2 calculatedUv = vec2(u,v);
				vec2 uvs = ( mat * vec3( calculatedUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;
				writeUv = uvs;

                vec2 df = fwidth(uvs);
               	if(df.x > 0.5) df.x = 0.;
				#ifdef GL_EXT_shader_texture_lod
                vec4 tmp = texture2DLodEXT(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#else
                vec4 tmp = textureLod(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#endif

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}

				lalpha *= mask;

				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;
			}
`),r=new Xe(`vec3 uvTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {
				vec2 uvs = ( mat * vec3( vUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;
				writeUv = uvs;

				vec4 tmp = texture2D( tex, uvs );

				vec3 col = tmp.rgb;

				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				
				lalpha *= mask;

				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;
			}`),i=new Xe(`vec3 triplanarTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUvs0, out vec2 writeUvs1, out vec2 writeUvs2, out vec3 writeWeights) {
				vec3 p = position;
				vec2 uv0 = (1.0 + p.xy) / 2.0;     
				vec2 uv1 = (1.0 + p.zy) / 2.0;		
				vec2 uv2 = (1.0 + p.xz) / 2.0;		
	
				uv0 = (mat * vec3((uv0 * 2.0 - 1.0) / (size * 0.5), 1.0) / 2.0 + 0.5).xy;
				uv1 = (mat * vec3((uv1 * 2.0 - 1.0) / (size * 0.5), 1.0) / 2.0 + 0.5).xy;
				uv2 = (mat * vec3((uv2 * 2.0 - 1.0) / (size * 0.5), 1.0) / 2.0 + 0.5).xy;

				// Range from 3 to 128 seems to be good
				float exponent = (1.0 - blending) * 125.0 + 3.0;

				vec3 n = vObjectNormal;
				vec3 weights = abs(normalize(n));
				weights = pow(weights, vec3(exponent));
				weights /= dot(weights, vec3(1.0));

				// Write out all sets of UVs that we generated
				writeUvs0 = uv0;
				writeUvs1 = uv1;
				writeUvs2 = uv2;
				writeWeights = weights;

				// Derivatives for LOD
				vec2 df0 = fwidth(uv0);
				vec2 df1 = fwidth(uv1);
				vec2 df2 = fwidth(uv2);
				if (df0.x > 0.5) df0.x = 0.0;
				if (df1.x > 0.5) df1.x = 0.0;
				if (df2.x > 0.5) df2.x = 0.0;

				#ifdef GL_EXT_shader_texture_lod
                	vec4 tmp = 
						texture2DLodEXT(tex, uv0, log2(max(df0.x, df0.y)*min(textureSize.x, textureSize.y))) * weights.z + 
						texture2DLodEXT(tex, uv1, log2(max(df1.x, df1.y)*min(textureSize.x, textureSize.y))) * weights.x + 
						texture2DLodEXT(tex, uv2, log2(max(df2.x, df2.y)*min(textureSize.x, textureSize.y))) * weights.y;
				#else
                	vec4 tmp = 
						textureLod(tex, uv0, log2(max(df0.x, df0.y)*min(textureSize.x, textureSize.y))) * weights.z + 
						textureLod(tex, uv1, log2(max(df1.x, df1.y)*min(textureSize.x, textureSize.y))) * weights.x + 
						textureLod(tex, uv2, log2(max(df2.x, df2.y)*min(textureSize.x, textureSize.y))) * weights.y;
				#endif

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;

				// Apply cropping across all 3 planes
				if ( crop > 0.5 ) {
					if ( uv0.x < 0.0 || uv0.x > 1.0 || uv0.y < 0.0 || uv0.y > 1.0 )  {
						lalpha = 0.0;
					}
					if ( uv1.x < 0.0 || uv1.x > 1.0 || uv1.y < 0.0 || uv1.y > 1.0 )  {
						lalpha = 0.0;
					}
					if ( uv2.x < 0.0 || uv2.x > 1.0 || uv2.y < 0.0 || uv2.y > 1.0 )  {
						lalpha = 0.0;
					}
				}

				lalpha *= mask;
				calpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;//n * 0.5 + 0.5;
			}			
			`);return{cylindrical:e,spherical:t,uv:r,triplanar:i}}();var $0=class extends Kr{constructor(e,t,r,i,n,a,s,o,l,u,h,c){super("v3"),this.nodeType="Depth",this.gradientType=e,this.smooth=t,this.near=r,this.far=i,this.isVector=n,this.isWorldSpace=a,this.origin=s,this.direction=o,this.colors=l,this.steps=u,this.isMask=c,this.alpha=h,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){let r=`g${this.uuid.toString().replace(/-/g,"")}`,i=new Xe(`vec3 ${r}_sdepth(float near, float far, vec3 origin, vec3 direction, vec4 colors[${r}_MAX_COLORS], float steps[${r}_MAX_COLORS], bool isMask, float mask, float alpha, out float calpha) {
               vec4 color = colors[0];
               #ifdef ${r}_IS_VECTOR
                   #ifdef ${r}_LINEAR
                       #ifdef ${r}_WORLDSPACE
                       float depth = vectorLinearWorldSpaceDepth(direction, origin, near, far);
                       #else
                       float depth = vectorLinearObjectSpaceDepth(direction, origin, near, far);
                       #endif
                   #else
                       #ifdef ${r}_WORLDSPACE
                           float depth = vectorSphericalWorldSpaceDepth(origin, near, far);
                       #else
                           float depth = vectorSphericalObjectSpaceDepth(origin, near, far);
                       #endif
                   #endif
               #else
                   float dist = length(vWPosition - cameraPosition);
			       float depth = ( dist - near ) / ( far - near );
               #endif


              float p;
              #ifdef ${r}_SMOOTH
				for ( int i = 1; i < ${r}_MAX_COLORS; i++ ) {
						p = clamp( ( depth - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
					}
              #else
                for ( int i = 1; i < ${r}_MAX_COLORS; i++ ) {
                   p = clamp(( depth - steps[i - 1] ) / ( steps[i] - steps[i - 1] ), 0.0, 1.0);
                   color = mix(color, colors[i], p);
                 }
              #endif

               float lalpha = alpha * color.a * mask;
               calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
			   accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));
			   
               return color.rgb;
			}`,[$0.Nodes.vectorLinearWorldSpaceDepth,$0.Nodes.vectorLinearObjectSpaceDepth,$0.Nodes.vectorSphericalObjectSpaceDepth,$0.Nodes.vectorSphericalWorldSpaceDepth]);if(e.isShader("fragment")){e.define(`${r}_MAX_COLORS`,this.colors.value.length),this.smooth.value&&e.define(`${r}_SMOOTH`),this.isVector.value>.5&&e.define(`${r}_IS_VECTOR`),this.gradientType.value===0&&e.define(`${r}_LINEAR`),this.isWorldSpace.value>.5&&e.define(`${r}_WORLDSPACE`),e.require("worldPosition"),e.addFragmentVariable(this.calpha,"float");let n=e.include(i),a=[];return a.push(this.near.build(e,"f")),a.push(this.far.build(e,"f")),a.push(this.origin.build(e,"v3")),a.push(this.direction.build(e,"v3")),a.push(this.colors.build(e,"v4[]")),a.push(this.steps.build(e,"f[]")),a.push(this.isMask.build(e,"b")),a.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),a.push(this.alpha.build(e,"f")),a.push(this.calpha),e.format(n+"("+a.join(",")+")",this.getType(e),t)}else return console.warn("DepthNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},eq=$0;eq.Nodes=function(){let e=new Xe(`float vectorLinearWorldSpaceDepth(vec3 direction, vec3 origin, float near, float far) {
               vec3 n = normalize(direction);
               float dist = (n.x*(vWPosition.x - origin.x) + n.y*(vWPosition.y - origin.y) + n.z*(vWPosition.z - origin.z));
               return ( dist - near ) / ( far - near );
            }`),t=new Xe(`float vectorLinearObjectSpaceDepth(vec3 direction, vec3 origin, float near, float far) {
               vec3 n = normalize(direction);
               float dist = (n.x*(position.x - origin.x) + n.y*(position.y - origin.y) + n.z*(position.z - origin.z));
               return ( dist - near ) / ( far - near );
            }`),r=new Xe(`float vectorSphericalWorldSpaceDepth(vec3 origin, float near, float far) {
               float dist = length(vWPosition - origin);
               return ( dist - near ) / ( far - near );
            }`),i=new Xe(`float vectorSphericalObjectSpaceDepth(vec3 origin, float near, float far) {
               float dist = length(position - origin);
               return ( dist - near ) / ( far - near );
            }`);return{vectorLinearWorldSpaceDepth:e,vectorLinearObjectSpaceDepth:t,vectorSphericalWorldSpaceDepth:r,vectorSphericalObjectSpaceDepth:i}}();var qIe=class extends Kr{constructor(e,t,r,i,n,a,s,o){super("v3"),this.nodeType="Fresnel",this.color=e,this.bias=t,this.scale=r,this.intensity=i,this.factor=n,this.isMask=o,this.alpha=a,this.mode=s,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.require("vWorldViewDir"),e.require("worldNormal"),e.isShader("fragment")){e.addFragmentVariable(this.calpha,"float");let r=new Xe(`vec3 fresnel(vec3 color, float bias, float scale, float intensity, float factor, bool isMask, float mask, float alpha, int mode, out float calpha) {
					float fresnel = bias + scale * pow( abs( factor + dot( normalize( vWorldViewDir ), normalize( vWNormal ) ) ), intensity );

					float lalpha = clamp(fresnel, 0.0, 1.0) * alpha * mask;
					calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
					accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

					return color;
				}`),i=e.include(r),n=[];return n.push(this.color.build(e,"c")),n.push(this.bias.build(e,"f")),n.push(this.scale.build(e,"f")),n.push(this.intensity.build(e,"f")),n.push(this.factor.build(e,"f")),n.push(this.isMask.build(e,"b")),n.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),n.push(this.alpha.build(e,"f")),n.push(this.mode.build(e,"i")),n.push(this.calpha),e.format(i+"("+n.join(",")+")",this.getType(e),t)}else return console.warn("FresnelNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},tq=class extends Kr{constructor(e,t,r,i,n,a,s,o,l){super("v3"),this.nodeType="Gradient",this.gradientType=e,this.smooth=t,this.colors=r,this.steps=i,this.offset=n,this.morph=a,this.angle=s,this.isMask=l,this.alpha=o,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){e.define("GRAD_MAX",10),e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let r=e.include(tq.Nodes.gradient),i=[];return i.push(this.gradientType.build(e,"i")),i.push(this.smooth.build(e,"b")),i.push(this.colors.build(e,"v4[]")),i.push(this.steps.build(e,"f[]")),i.push(this.offset.build(e,"v2")),i.push(this.morph.build(e,"v2")),i.push(this.angle.build(e,"f")),i.push(this.isMask.build(e,"b")),i.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),i.push(this.alpha.build(e,"f")),i.push(this.calpha),e.format(r+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("GradientNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},rq=tq;rq.Nodes=function(){return{gradient:new Xe(`vec3 gradient(int gradientType, bool smoothed, vec4 colors[GRAD_MAX], float steps[GRAD_MAX], vec2 offset, vec2 morph, float angle, bool isMask, float mask, float alpha, out float calpha) {
				vec4 color = colors[0];
				vec2 m = morph / vUv.xy;
				vec2 rot = vec2( 0.5 + m.x, m.y );
				vec2 dt = vec2(
					cos( angle ) * rot.x - sin( angle ) * rot.y,
					sin( angle ) * rot.x + cos( angle ) * rot.y
				);
				vec2 pt = ( vUv - 0.5 + offset ) / 2.0 + dt / 2.0;
				float t = dot( pt, dt ) / dot( dt, dt );
				if ( gradientType == 1 ) {
					t = distance (
						( vUv + morph ) * 3.0,
						( vUv + offset ) + 1.0
					) + angle;
				} else if ( gradientType == 2 ) {
					float polar = atan(
						vUv.x + morph.x - 0.5 + offset.x,
						vUv.y + morph.y - 0.5 + offset.y
					) * -1.0;
					t = fract( ( angle / PI / -2.0 ) + 0.5 * ( polar / PI ) );
				}

				float p;
				if (smoothed) {
					for ( int i = 1; i < GRAD_MAX; i++ ) {
						p = clamp( ( t - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
					}

				} else {
					for ( int i = 1; i < GRAD_MAX; i++ ) {
						p = clamp( ( t - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], p);
					}
				}

				float lalpha = alpha * color.a * mask;
				calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));
				
				return color.xyz;
			}`)}}();var iq=class extends Kr{constructor(e,t,r,i){super("v3"),this.nodeType="Matcap",this.texture=e,this.isMask=i,this.alpha=t,this.mode=r,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){e.addFragmentVariable(this.calpha,"float");let r=e.include(iq.Nodes.matcap);e.require("normal"),e.requires.normal=!0;let i=[];return i.push(this.texture.generate(e,"t")),i.push("normal"),i.push(this.isMask.build(e,"b")),i.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),i.push(this.alpha.build(e,"f")),i.push(this.mode.build(e,"i")),i.push(this.calpha),e.format(r+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("MatcapNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},nq=iq;nq.Nodes=function(){return{matcap:new Xe(`vec3 matcap(sampler2D matcapTex, vec3 normal, bool isMask, float mask, float alpha, int mode, out float calpha) {
					vec3 viewDir = normalize( vViewPosition );
					vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
					vec3 y = cross( viewDir, x );
					vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5; // 0.495 to remove artifacts caused by undersized matcap disks
					vec4 matcapColor = texture2D( matcapTex, uv );

					float lalpha = alpha * mask;
					calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
					accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));
					
					return matcapColor.rgb;
            	}`)}}();var Ek=(e=>(e.SIMPLEX="simplex3d",e.SIMPLEX_FRACTAL="simplex3dFractal",e.ASHIMA="simplexAshima",e.FBM="fbm",e.PERLIN="perlin",e.VORONOI="voronoi",e))(Ek||{}),ds=function(){let e=new Xe(`vec3 random3(vec3 c) {
			float j = 4096.0*sin(dot(c,vec3(17.0, 59.4, 15.0)));
			vec3 r;
			r.z = fract(512.0*j);
			j *= .125;
			r.x = fract(512.0*j);
			j *= .125;
			r.y = fract(512.0*j);
			return r-0.5;
		}`),t=new Xe(`float simplex3d(vec3 p) {
			 vec3 s = floor(p + dot(p, vec3(F3)));
			 vec3 x = p - s + dot(s, vec3(G3));
			 
			 vec3 e = step(vec3(0.0), x - x.yzx);
			 vec3 i1 = e*(1.0 - e.zxy);
			 vec3 i2 = 1.0 - e.zxy*(1.0 - e);
				
			 vec3 x1 = x - i1 + G3;
			 vec3 x2 = x - i2 + 2.0*G3;
			 vec3 x3 = x - 1.0 + 3.0*G3;
			 
			 vec4 w, d;
			 
			 w.x = dot(x, x);
			 w.y = dot(x1, x1);
			 w.z = dot(x2, x2);
			 w.w = dot(x3, x3);
			 
			 w = max(0.6 - w, 0.0);
			 
			 d.x = dot(random3(s), x);
			 d.y = dot(random3(s + i1), x1);
			 d.z = dot(random3(s + i2), x2);
			 d.w = dot(random3(s + 1.0), x3);
			 
			 w *= w;
			 w *= w;
			 d *= w;
			 
			 return dot(d, vec4(52.0));
		}`,[e]);t.keywords.F3=new Wr("float F3 0.3333333"),t.keywords.G3=new Wr("float G3 0.1666667");let r=new Xe(`float simplex3dFractal(vec3 m) {
			mat3 rot1 = mat3(-0.37, 0.36, 0.85,-0.14,-0.93, 0.34,0.92, 0.01,0.4);
			mat3 rot2 = mat3(-0.55,-0.39, 0.74, 0.33,-0.91,-0.24,0.77, 0.12,0.63);
			mat3 rot3 = mat3(-0.71, 0.52,-0.47,-0.08,-0.72,-0.68,-0.7,-0.45,0.56);
			return 0.5333333 * simplex3d(m * rot1)
				 + 0.2666667 * simplex3d(2.0 * m * rot2)
				 + 0.1333333 * simplex3d(4.0 * m * rot3)
				 + 0.0666667 * simplex3d(8.0 * m);
		}`,[t]),i=new Xe("vec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}"),n=new Xe("vec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}"),a=new Xe(`float simplexAshima(vec3 v) {
		  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;
		  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);
		  vec3 i  = floor(v + dot(v, C.yyy) );
		  vec3 x0 =   v - i + dot(i, C.xxx) ;
		  vec3 g = step(x0.yzx, x0.xyz);
		  vec3 l = 1.0 - g;
		  vec3 i1 = min( g.xyz, l.zxy );
		  vec3 i2 = max( g.xyz, l.zxy );
		  vec3 x1 = x0 - i1 + 1.0 * C.xxx;
		  vec3 x2 = x0 - i2 + 2.0 * C.xxx;
		  vec3 x3 = x0 - 1. + 3.0 * C.xxx;
		  i = mod(i, 289.0 ); 
		  vec4 p = permute( permute( permute( 
					 i.z + vec4(0.0, i1.z, i2.z, 1.0 ))
				   + i.y + vec4(0.0, i1.y, i2.y, 1.0 )) 
				   + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));
		  float n_ = 1.0/7.0; // N=7
		  vec3  ns = n_ * D.wyz - D.xzx;
		  vec4 j = p - 49.0 * floor(p * ns.z *ns.z);  //  mod(p,N*N)
		  vec4 x_ = floor(j * ns.z);
		  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)
		  vec4 x = x_ *ns.x + ns.yyyy;
		  vec4 y = y_ *ns.x + ns.yyyy;
		  vec4 h = 1.0 - abs(x) - abs(y);
		  vec4 b0 = vec4( x.xy, y.xy );
		  vec4 b1 = vec4( x.zw, y.zw );
		  vec4 s0 = floor(b0)*2.0 + 1.0;
		  vec4 s1 = floor(b1)*2.0 + 1.0;
		  vec4 sh = -step(h, vec4(0.0));
		  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;
		  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;
		  vec3 p0 = vec3(a0.xy,h.x);
		  vec3 p1 = vec3(a0.zw,h.y);
		  vec3 p2 = vec3(a1.xy,h.z);
		  vec3 p3 = vec3(a1.zw,h.w);
		  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));
		  p0 *= norm.x;
		  p1 *= norm.y;
		  p2 *= norm.z;
		  p3 *= norm.w;
		  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);
		  m = m * m;
		  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1), 
										dot(p2,x2), dot(p3,x3) ) );
		}`,[i,n]),s=new Xe("vec4 mod289(vec4 x){return x - floor(x * (1.0 / 289.0)) * 289.0;}"),o=new Xe("vec4 perm(vec4 x){return mod289(((x * 34.0) + 1.0) * x);}",[s]),l=new Xe(`float noise(vec3 p){
			vec3 a = floor(p);
			vec3 d = p - a;
			d = d * d * (3.0 - 2.0 * d);
			vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);
			vec4 k1 = perm(b.xyxy);
			vec4 k2 = perm(k1.xyxy + b.zzww);
			vec4 c = k2 + a.zzzz;
			vec4 k3 = perm(c);
			vec4 k4 = perm(c + 1.0);
			vec4 o1 = fract(k3 * (1.0 / 41.0));
			vec4 o2 = fract(k4 * (1.0 / 41.0));
			vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);
			vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);
			return o4.y * d.y + o4.x * (1.0 - d.y);
		}`,[o]),u=new Xe(`float fbm(vec3 x) {
			float v = 0.0;
			float a = 0.5;
			vec3 shift = vec3(100);
			for (int i = 0; i < NUM_OCTAVES; ++i) {
				v += a * noise(x);
				x = x * 2.0 + shift;
				a *= 0.5;
			}
			return v;
		}`,[l]);u.keywords.NUM_OCTAVES=new Wr("int NUM_OCTAVES 5");let h=new Xe("vec3 fade(vec3 t) {return t*t*t*(t*(t*6.0-15.0)+10.0);}"),c=new Xe(`float perlin(vec3 P){
		  vec3 Pi0 = floor(P);
		  vec3 Pi1 = Pi0 + vec3(1.0);
		  Pi0 = mod(Pi0, 289.0);
		  Pi1 = mod(Pi1, 289.0);
		  vec3 Pf0 = fract(P);
		  vec3 Pf1 = Pf0 - vec3(1.0);
		  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
		  vec4 iy = vec4(Pi0.yy, Pi1.yy);
		  vec4 iz0 = Pi0.zzzz;
		  vec4 iz1 = Pi1.zzzz;
		  vec4 ixy = permute(permute(ix) + iy);
		  vec4 ixy0 = permute(ixy + iz0);
		  vec4 ixy1 = permute(ixy + iz1);
		  vec4 gx0 = ixy0 / 7.0;
		  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;
		  gx0 = fract(gx0);
		  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);
		  vec4 sz0 = step(gz0, vec4(0.0));
		  gx0 -= sz0 * (step(0.0, gx0) - 0.5);
		  gy0 -= sz0 * (step(0.0, gy0) - 0.5);
		  vec4 gx1 = ixy1 / 7.0;
		  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;
		  gx1 = fract(gx1);
		  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);
		  vec4 sz1 = step(gz1, vec4(0.0));
		  gx1 -= sz1 * (step(0.0, gx1) - 0.5);
		  gy1 -= sz1 * (step(0.0, gy1) - 0.5);
		  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);
		  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);
		  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);
		  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);
		  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);
		  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);
		  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);
		  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);
		  vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));
		  g000 *= norm0.x;
		  g010 *= norm0.y;
		  g100 *= norm0.z;
		  g110 *= norm0.w;
		  vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));
		  g001 *= norm1.x;
		  g011 *= norm1.y;
		  g101 *= norm1.z;
		  g111 *= norm1.w;
		  float n000 = dot(g000, Pf0);
		  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));
		  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));
		  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));
		  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));
		  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));
		  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));
		  float n111 = dot(g111, Pf1);
		  vec3 fade_xyz = fade(Pf0);
		  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);
		  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);
		  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x); 
		  return 2.2 * n_xyz;
		}`,[i,n,h]),d=new Xe(`float hashwithoutsine13(vec3 p3)
		{
			p3  = fract(p3 * .1031);
			p3 += dot(p3, p3.yzx + 33.33);
			return fract((p3.x + p3.y) * p3.z);
		}`),f=new Xe(`vec3 hashwithoutsine33(vec3 p3)
		{
			p3 = fract(p3 * vec3(.1031, .1030, .0973));
			p3 += dot(p3, p3.yxz+33.33);
			return fract((p3.xxy + p3.yxx)*p3.zyx);
		}`),m=new Xe(`float metric(in vec3 p)
		{
			// L2 
			return length(p);

			// Chebyshev 
			// vec3 a = abs(p);
			// return max(a.x, max(a.y, a.z));
		}`),p=new Xe(`float smin( float a, float b, float k )
		{
			float h = smoothstep(0.0, 1.0, 0.5 + 0.5 * (b - a) / k);
			float correction = k * h * (1.0 - h);
			return mix(b, a, h) - correction;
		}`),g=new Xe(`float smax( float a, float b, float k )
		{
			float h = smoothstep(1.0, 0.0, 0.5 + 0.5 * (a - b) / k);
			float correction = k * h * (1.0 - h);
			return mix(a, b, h) + correction;
		}`),v=new Xe(`float remap(float value, float input_min, float input_max, float output_min, float output_max) {
			// Compute width of each interval
			float input_width = input_max - input_min;
			float output_width = output_max - output_min;
		
			// Convert input range into a 0-1 range 
			float scaled = (value - input_min) / input_width;
		
			// Convert the 0-1 range into a value in output range
			return output_min + (scaled * output_width);
		}`),y=new Xe(`float voronoi(in vec3 x, in int style, in float smoothness, in float seed, in int quality) 
		{
			// Integer and fractional parts of this point's coordinates
			ivec3 p = ivec3(floor(x));
			vec3 f = fract(x);

			// Different variables that we will use to construct noise:
			//
			// f1: distance to the closest feature point
			// f2: distance to the second closest feature point
			// e: distance to the closest edge (cell boundary)
			//
			// We also compute "smooth" versions of all of the above quantites, essentially
			// replacing "hard" minimums with "smooth" minimums (described by IQ)
			float f1_smooth = 8.0;
			float f1 = 8.0;
			float f2_smooth = 8.0;
			float f2 = 8.0;
			float e_smooth = 8.0;
			float e = 8.0;

			// Variables stored from closest cell
			ivec3 mb;
			vec3 mr; 

			int steps = quality;
			
			for (int x = -steps; x <= steps; x++) 
			for (int y = -steps; y <= steps; y++)
			for (int z = -steps; z <= steps; z++)
			{
				ivec3 b = ivec3(x, y, z);
				vec3 r = vec3(b) + hashwithoutsine33(vec3(p + b) + seed) - f;
				float d = length(r);
				
				f1_smooth = smin(d, f1_smooth, smoothness);

				// Store un-smoothed distances too 
				if (d < f1) 
				{
					f2 = f1;
					f1 = d;

					mb = ivec3(x, y, z);
					mr = r;
				} 
				else if (d < f2) 
				{
					f2 = d;
				}
			}	
			
			float id = hashwithoutsine13(vec3(p + mb) + seed);

			// Second pass for edge distance  
			for (int x = -steps; x <= steps; x++) 
			for (int y = -steps; y <= steps; y++)
			for (int z = -steps; z <= steps; z++)
			{
				// Start search at the cell that contains the closest point to "x" (found in 1st pass)
				ivec3 b = mb + ivec3(x, y, z);
				vec3 r = vec3(b) + hashwithoutsine33(vec3(p + b) + seed) - f;
				float d1 = dot(0.5 * (mr + r), (r - mr)); 				// IQ normalizes "r - mr" but that breaks things for the smooth version?
				float d2 = dot(0.5 * (mr + r), normalize(r - mr));

				e_smooth = smin(d1, e_smooth, smoothness);

				e = min(e, d2);

				// Also compute a smooth version of F2 in this pass
				{
					ivec3 b = ivec3(x, y, z);
					if (b != mb) 
					{
						vec3 r = vec3(b) + hashwithoutsine33(vec3(p + b) + seed) - f;
						float d = length(r);

						f2_smooth = smin(d, f2_smooth, smoothness);
					}
				}
			}

			// Different visualization modes 
			if (style == 0) 
			{
				return f1_smooth;
			}
			if (style == 1) 
			{
				return f2_smooth;
			}
			if (style == 2) 
			{
				return f2_smooth - f1_smooth;
				
				// "Pebbles" also cool
				//return step(0.2, f2_smooth - f1_smooth);
			}
			if (style == 3) 
			{
				// This one is really good for rock / stone effects
				float a = f1; 
				float b = f2;
				float k = 3.0;
				float h = max(k - abs(a - b), 0.0) / k;
				float final = min(a, b) - h * h * k * (1.0 / 4.0);
				return final;
			}
			if (style == 4) 
			{
				// Some random adjustments to make this style stand out more 
				return exp(5.0 * e_smooth);
			}
			if (style == 5) 
			{
				return pow(f1_smooth, 3.0);
			}
			if (style == 6) 
			{				
				const float eps = 0.0125;

				// Thicker lines as the user increases the smoothness slider
				float thickness = smoothness * 0.25 + eps;

				// Blurrier lines as the user increases the smoothness slider
				float blur = pow(smoothness, 3.0) * 0.25 + eps;

				return smoothstep(
					thickness - thickness * blur, 
					thickness + thickness * blur, 
					e
				);
			}
			if (style == 7) 
			{
				return hashwithoutsine13(vec3(p + mb) + seed);
			}
		}
	`,[d,f,m,p,g,v]);return{simplex:t,simplexFractal:r,simplexAshima:a,fbm:u,perlin:c,voronoi:y}}(),aq=class extends Kr{constructor(e,t,r,i,n,a,s,o,l,u,h,c,d,f,m,p,g,v,y){super("v3"),this.nodeType="Noise",this.scale=e,this.size=t,this.move=r,this.fA=i,this.fB=n,this.distortion=a,this.colorA=s,this.colorB=o,this.colorC=l,this.colorD=u,this.noiseType=c,this.voronoiStyle=f,this.highCut=m,this.lowCut=p,this.smoothness=g,this.seed=v,this.quality=y,this.isMask=d,this.alpha=h,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t,r,i,n){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let a=Object.values(Ek)[this.noiseType.value],s=a=="voronoi"?`
		float v = ${a}(st + move, voronoiStyle, smoothness, seed, quality);

		// Apply clipping to colors
		v = remap(v, lowCut, highCut, 0.0, 1.0);
		v = smax(v, 0.0, smoothness * 0.25);
		v = smin(v, 1.0, smoothness * 0.25);

		// Note that the voronoi mode only uses colors "A" and "C" from the UI 
		vec4 color = mix(colorA, colorC, v); 
		`:`
		vec3 q = vec3(${a}(st),
					   ${a}(st + vec3(1.0)),
					   ${a}(st + vec3(1.0)));
		vec3 r = vec3(${a}(st + vec3(distortion, 1.0) * q + vec3(fA, 1.0) + move),
					  ${a}(st + vec3(distortion, 1.0) * q + vec3(fB, 1.0) + move), 
					  ${a}(st * q));
		float f = ${a}(st + r);
		vec4 color;
		color = mix(colorA, colorB, clamp((f * f) * 4.0, 0.0, 1.0));
		color = mix(color, colorC, clamp(length(q), 0.0, 1.0));
		color = mix(color, colorD, clamp(length(r.x), 0.0, 1.0));
		`,o=new Xe(`vec3 ${a}customNoise(float scale, vec3 size, float move, vec2 fA, vec2 fB, vec2 distortion, vec4 colorA, vec4 colorB, vec4 colorC, vec4 colorD, int voronoiStyle, float highCut, float lowCut, float smoothness, float seed, int quality, bool isMask, float mask, float alpha, out float calpha) 
			{
                // Prevent scale of zero 
				scale = max(abs(scale), 0.001);

				vec3 st = position / size;
				st /= scale;

				${s}

				float lalpha = alpha * color.a * mask;
				calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return clamp(color, 0.0, 1.0).rgb;
			}`,[ds.simplex,ds.simplexFractal,ds.simplexAshima,ds.fbm,ds.perlin,ds.voronoi]),l=e.include(o),u=[];return u.push(this.scale.build(e,"f")),u.push(this.size.build(e,"v3")),u.push(this.move.build(e,"f")),u.push(this.fA.build(e,"v2")),u.push(this.fB.build(e,"v2")),u.push(this.distortion.build(e,"v2")),u.push(this.colorA.build(e,"v4")),u.push(this.colorB.build(e,"v4")),u.push(this.colorC.build(e,"v4")),u.push(this.colorD.build(e,"v4")),u.push(this.voronoiStyle.build(e,"i")),u.push(this.highCut.build(e,"f")),u.push(this.lowCut.build(e,"f")),u.push(this.smoothness.build(e,"f")),u.push(this.seed.build(e,"f")),u.push(this.quality.build(e,"i")),u.push(this.isMask.build(e,"b")),u.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),u.push(this.alpha.build(e,"f")),u.push(this.calpha),e.format(l+"("+u.join(",")+")",this.getType(e),t)}};aq.numOctaves=5;var sq=class extends Kr{constructor(e,t,r,i,n,a,s,o,l,u,h,c,d,f,m,p){super("v3"),this.nodeType="Outline",this.firstTime=!0,this.outlineColor=e,this.contourColor=t,this.outlineWidth=r,this.contourWidth=i,this.contourThreshold=n,this.outlineThreshold=a,this.contourFrequency=s,this.outlineSmoothing=o,this.contourDirection=l,this.positionalLines=u,this.compensation=h,this.resolution=c,this.normalMap=d,this.depthMap=f,this.pixelRatio=m,this.alpha=p,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){let r=`g${this.uuid.toString().replace(/-/g,"")}`;if(e.require("vWorldViewDir"),e.require("worldNormal"),e.extensions.derivatives=!0,this.compensation.value&&e.define("OUTLINE_COMPENSATION",`${r}_offset`),this.firstTime){let i=this.outlineWidth.build(e,"f"),n=this.resolution.build(e,"v2"),a=this.compensation.build(e,"b"),s=this.pixelRatio.build(e,"f");e.addVertexParsVariable("randomColor","attribute vec3"),e.addVertexParsVariable("extrudeNormal","attribute vec3"),e.addVertexParsVariable(i,"uniform float"),e.addVertexParsVariable(n,"uniform vec2"),e.addVertexParsVariable(a,"uniform bool"),e.addVertexParsVariable(s,"uniform float"),e.addVertexParsVariable("vID","flat out float"),e.addFragmentParsVariable("vID","flat in float"),e.addVertexFinalCode(`
                vID = randomColor.r;
                vec2 ${r}_offset = vec2(0.0);
                if (${a}) {
                    vec4 ${r}_clipPosition = projectionMatrix * (modelViewMatrix * vec4(position, 1.0));
                    // NOTE: For certain shapes, like spheres, we get incorrect extrusion when the
                    // normals face the camera directly. So we hackily fix this by offsetting the normal
                    // by a tiny amount.
                    vec3 ${r}_clipNormal = mat3(projectionMatrix) * (mat3(modelViewMatrix) * extrudeNormal) + 0.0000001;
                    ${r}_offset = normalize(${r}_clipNormal.xy) / ${n} * (${i} / 2.0) * ${r}_clipPosition.w * 2.0 * ${s};
                    ${r}_clipPosition.xy += ${r}_offset;
                    // TODO(MAX): To handle multiple outline layers, we only want to extrude
                    // if this offset is the biggest of all the potential offsets
                    gl_Position = ${r}_clipPosition;
                }
            `)}if(e.isShader("fragment")){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let i=e.include(sq.Nodes.outline),n=[];return n.push(this.outlineColor.build(e,"c")),n.push(this.contourColor.build(e,"c")),n.push(this.outlineWidth.build(e,"f")),n.push(this.contourWidth.build(e,"f")),n.push(this.contourThreshold.build(e,"f")),n.push(this.outlineThreshold.build(e,"f")),n.push(this.contourFrequency.build(e,"f")),n.push(this.outlineSmoothing.build(e,"f")),n.push(this.contourDirection.build(e,"v3")),n.push(this.positionalLines.build(e,"b")),n.push(this.resolution.build(e,"v2")),n.push(this.normalMap.getTexture(e,"t")),n.push(this.depthMap.getTexture(e,"t")),n.push(this.pixelRatio.build(e,"f")),n.push(this.compensation.build(e,"b")),n.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),n.push(this.alpha.build(e,"f")),n.push(this.calpha),this.firstTime=!this.firstTime,e.format(i+"("+n.join(",")+")",this.getType(e),t)}else return console.warn("OutlineNode is not compatible with "+e.shader+" shader."),""}},oq=sq;oq.Nodes=function(){let e=new Xe(`
float sobelSample(sampler2D t, sampler2D d, vec2 uv, vec2 resolution, float outlineWidth, float pixelRatio)
{
    vec2 halton = haltonSequence[frameIndex];
    float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);
    float temporalAngle  = temporalOffset * PI2;

    vec2 texelSize = (vec2(1.0) / resolution);
    vec2 offsetSize = texelSize * outlineWidth * pixelRatio;

    vec2 uvSamples[9];
    vec4 normalSamples[9];

	uvSamples[0] = uv + vec2( -offsetSize.x, -offsetSize.y) + (vogelDiskSample(0, 9, temporalAngle) * texelSize);
	uvSamples[1] = uv + vec2(0.0, -offsetSize.y) + (vogelDiskSample(1, 9, temporalAngle) * texelSize);
	uvSamples[2] = uv + vec2(  offsetSize.x, -offsetSize.y) + (vogelDiskSample(2, 9, temporalAngle) * texelSize);
	uvSamples[3] = uv + vec2( -offsetSize.x, 0.0) + (vogelDiskSample(3, 9, temporalAngle) * texelSize);
	uvSamples[4] = uv;
	uvSamples[5] = uv + vec2(  offsetSize.x, 0.0) + (vogelDiskSample(5, 9, temporalAngle) * texelSize);
	uvSamples[6] = uv + vec2( -offsetSize.x, offsetSize.y) + (vogelDiskSample(6, 9, temporalAngle) * texelSize);
	uvSamples[7] = uv + vec2(0.0, offsetSize.y) + (vogelDiskSample(7, 9, temporalAngle) * texelSize);
	uvSamples[8] = uv + vec2(  offsetSize.x, offsetSize.y) + (vogelDiskSample(8, 9, temporalAngle) * texelSize);


    normalSamples[0] = texture2D(t, uvSamples[0]);
    normalSamples[1] = texture2D(t, uvSamples[1]);
    normalSamples[2] = texture2D(t, uvSamples[2]);
    normalSamples[3] = texture2D(t, uvSamples[3]);
    normalSamples[4] = texture2D(t, uvSamples[4]);
    normalSamples[5] = texture2D(t, uvSamples[5]);
    normalSamples[6] = texture2D(t, uvSamples[6]);
    normalSamples[7] = texture2D(t, uvSamples[7]);
    normalSamples[8] = texture2D(t, uvSamples[8]);

    float depthBias = 0.0001;
    // TODO(MAX): Can we somehow reduce the number of conditionals here with MATH?!
    if (normalSamples[0].a != vID && normalSamples[0].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[0]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[1].a != vID && normalSamples[1].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[1]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[2].a != vID && normalSamples[2].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[2]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[3].a != vID && normalSamples[3].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[3]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }


    if (normalSamples[4].a != vID && normalSamples[4].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[4]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[5].a != vID && normalSamples[5].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[5]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[6].a != vID && normalSamples[6].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[6]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[7].a != vID && normalSamples[7].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[7]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[8].a != vID && normalSamples[8].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[8]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    vec3 sobel_edge_h = normalSamples[2].rgb + (2.0*normalSamples[5].rgb) + normalSamples[8].rgb - (normalSamples[0].rgb + (2.0*normalSamples[3].rgb) + normalSamples[6].rgb);
  	vec3 sobel_edge_v = normalSamples[0].rgb + (2.0*normalSamples[1].rgb) + normalSamples[2].rgb - (normalSamples[6].rgb + (2.0*normalSamples[7].rgb) + normalSamples[8].rgb);

    float edgeNormal = sqrt(dot(sobel_edge_h, sobel_edge_h) + dot(sobel_edge_v, sobel_edge_v));
    return edgeNormal;
}
`);return{outline:new Xe(`vec3 outline(vec3 outlineColor, vec3 contourColor, float outlineWidth, float contourWidth, float outlineThreshold, float contourThreshold, float outlineSmoothing, float contourFrequency, vec3 contourDirection, bool positionalLines, vec2 resolution, sampler2D normalMap, sampler2D depthMap, float pixelRatio, bool compensation, float mask, float alpha, out float calpha) {
                vec3 result = outlineColor;
                float resultAlpha = 0.0;

                vec3 N = normalize(vWNormal);
                vec2 nuv = (gl_FragCoord.xy / resolution);
                float sobelSample = compensation ? sobelSample(normalMap, depthMap, nuv, resolution, outlineWidth / 2., pixelRatio) : sobelSample(normalMap, depthMap, nuv, resolution, outlineWidth, pixelRatio);
                resultAlpha = smoothstep(outlineThreshold - outlineSmoothing, outlineThreshold + outlineSmoothing, sobelSample);

                //resultAlpha = 1.0;
                //result = vec3(sobelSample);

                float t = 1.0 - contourThreshold;
                if(positionalLines) {
                    vec3 NDir = position * contourDirection;
                    float NT = NDir.x + NDir.y + NDir.z;
                    float f  = fract(NT * contourFrequency * 0.01);
                    float df = fwidth(NT * contourFrequency);

                    float g = smoothstep(df * (contourWidth * 0.01), df * (contourWidth * 0.01 * 2.0), f);
                    if (g < 1.0 && resultAlpha == 0.0) {
                        result = contourColor;
                        resultAlpha = 1.0;
                    }
                 }
                 else {
                    vec3 NDir = N * contourDirection;
                    float NT = NDir.x + NDir.y + NDir.z;
                    float df = fwidth(NT * contourThreshold);
                    float f = sin(NT * 1.0 * contourFrequency);
                    float g = smoothstep(0.0, df * contourWidth, 1.0 - f);

                    if (df > (t * 0.5) && g < 1.0 && resultAlpha == 0.0) {
                        result = contourColor;
                        resultAlpha = 1.0 - g;
                    }
                 }

                 float lalpha = alpha * resultAlpha * mask;
                 calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
                 accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
				 
                 return result;
             }`,[e])}}();var Xu=class extends Kr{constructor(e,t,r,i,n,a,s,o,l,u,h,c,d,f,m,p,g,v){super("v3"),this.nodeType="Pattern",this.style=e,this.projection=t,this.axis=r,this.blending=i,this.offset=n,this.colorA=a,this.colorB=s,this.frequency=o,this.size=l,this.variation=u,this.smoothness=h,this.zigzag=c,this.rotation=d,this.vertical=f,this.horizontal=m,this.sides=p,this.isMask=v,this.alpha=g,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){e.require("position"),e.require("uv"),e.requires.uv=[!0],e.require("normal"),e.requires.normal=!0,e.addFragmentVariable(this.calpha,"float");let r;switch(this.style.value){case 0:r="circle";break;case 1:r="ring";break;case 2:r="polygon";break;case 3:r="xcross";break;case 4:r="diamond";break;case 5:r="checkerboard";break;case 6:r="line";break;case 7:r="wave";break;default:r="circle";break}let i=`g${this.uuid.toString().replace(/-/g,"")}`,n=new Xe(`float hashwithoutsine12(vec2 p)
				{
					vec3 p3 = fract(vec3(p.xyx) * .1031);
					p3 += dot(p3, p3.yzx + 33.33);
					return fract((p3.x + p3.y) * p3.z);
				}`),a=new Xe(`vec2 rotate_uv(in vec2 uv, float a, bool repeat) 
				{
					const float mid = 0.5;
					float radians = a * (PI / 180.0);
					vec2 rotated = vec2(
						cos(radians) * (uv.x - mid) + sin(radians) * (uv.y - mid) + mid,
						cos(radians) * (uv.y - mid) - sin(radians) * (uv.x - mid) + mid
					);
					return repeat ? fract(rotated): rotated;
				}`),s="";if(this.projection.value===4){let h=this.style.value===2?`${r}(uv0, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${r}(uv0, frequency, size, variation, smoothness_remapped, zigzag, rotation)`,c=this.style.value===2?`${r}(uv1, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${r}(uv1, frequency, size, variation, smoothness_remapped, zigzag, rotation)`,d=this.style.value===2?`${r}(uv2, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${r}(uv2, frequency, size, variation, smoothness_remapped, zigzag, rotation)`;s=`
				vec3 p = position;
				float factor = 0.0125;
				vec2 uv0 = fract(p.xy * factor);
				vec2 uv1 = fract(p.zy * factor);
				vec2 uv2 = fract(p.xz * factor);
				
				uv0 = rotate_uv(uv0 + offset, rotation, true);
				uv1 = rotate_uv(uv1 + offset, rotation, true);
				uv2 = rotate_uv(uv2 + offset, rotation, true);
	
				float d0 = ${h};
				float d1 = ${c};
				float d2 = ${d};
				
				// Range from 3 to 128 seems to be good
				float exponent = (1.0 - blending) * 125.0 + 3.0;

				vec3 n = vObjectNormal;
				vec3 weights = abs(normalize(n));
				weights = pow(weights, vec3(exponent));
				weights /= dot(weights, vec3(1.0));
				d0 *= weights.z;
				d1 *= weights.x;
				d2 *= weights.y;
				float draw = d0 + d1 + d2;
	
				vec2 custom_uv = uv0 * weights.z + uv1 * weights.x + uv2 * weights.y;
				`}else{let h=this.style.value===2?`${r}(custom_uv, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${r}(custom_uv, frequency, size, variation, smoothness_remapped, zigzag, rotation)`,c="";this.axis.value===0?c=`float radius = length(p);
					float theta = atan(p.y, p.z);
					float phi = acos(p.x / radius);`:this.axis.value===1?c=`float radius = length(p);
					float theta = atan(p.x, p.z);
					float phi = acos(p.y / radius);`:(this.axis.value,c=`float radius = length(p);
					float theta = atan(p.y, p.x);
					float phi = acos(p.z / radius);`);let d="";switch(this.projection.value){case 0:d="custom_uv = vUv.st;";break;case 1:break;case 2:d=`
							vec3 p = position;
							${c}
							custom_uv = vec2(theta, phi);
							custom_uv /= PI;
							`;break}s=`
				vec2 custom_uv;
				${d}
	
				custom_uv += offset;
				custom_uv = fract(custom_uv);
				custom_uv = rotate_uv(custom_uv, rotation, true);
	
				float draw = ${h};
				`}let o=new Xe(`vec3 ${i}_pattern(vec3 normal, float blending, int style, vec2 offset, vec4 colorA, vec4 colorB, vec2 frequency, float size, float variation, float smoothness, float zigzag, float rotation, vec2 vertical, vec2 horizontal, int sides, bool isMask, float mask, float alpha, out float calpha) {
					const float TWO_PI = PI * 2.0;
					float smoothness_remapped = pow(smoothness, 5.0);	

					${s}

					// Construct final output color
					vec4 color = mix(colorA, colorB, draw);
					color.a = clamp(color.a, 0.0, 1.0);

					// Apply cuts
					color.a *= 
						step(vertical.x, custom_uv.y) * 
						step(custom_uv.y, vertical.y);
					color.a *= 
						step(horizontal.x, abs(custom_uv.x)) * 
						step(abs(custom_uv.x), horizontal.y);

					// Accumulate alpha 
					float lalpha = alpha * clamp(color.a, 0.0, 1.0) * mask;
					calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
					accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

					return clamp(color, 0.0, 1.0).rgb;
				}`,[a,n,Xu.DrawFunctions.circle,Xu.DrawFunctions.ring,Xu.DrawFunctions.polygon,Xu.DrawFunctions.cross,Xu.DrawFunctions.diamond,Xu.DrawFunctions.checkerboard,Xu.DrawFunctions.line,Xu.DrawFunctions.wave]),l=e.include(o),u=[];return u.push("normal"),u.push(this.blending.build(e,"f")),u.push(this.style.build(e,"i")),u.push(this.offset.build(e,"v2")),u.push(this.colorA.build(e,"v4")),u.push(this.colorB.build(e,"v4")),u.push(this.frequency.build(e,"v2")),u.push(this.size.build(e,"f")),u.push(this.variation.build(e,"f")),u.push(this.smoothness.build(e,"f")),u.push(this.zigzag.build(e,"f")),u.push(this.rotation.build(e,"f")),u.push(this.vertical.build(e,"v2")),u.push(this.horizontal.build(e,"v2")),u.push(this.sides.build(e,"i")),u.push(this.isMask.build(e,"b")),u.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),u.push(this.alpha.build(e,"f")),u.push(this.calpha),e.format(l+"("+u.join(",")+")",this.getType(e),t)}else return console.warn("PatterNode is not compatible with "+e.shader+" shader."),e.format("vec3(0.0)",this.getType(e),t)}},lq=Xu;lq.DrawFunctions=function(){let e=new Xe(`float hashwithoutsine12(vec2 p) {
				vec3 p3 = fract(vec3(p.xyx) * 0.1031);
				p3 += dot(p3, p3.yzx + 33.33);
				return fract((p3.x + p3.y) * p3.z);
			}`),t=new Xe(`vec2 tile_and_center(in vec2 uv, in vec2 frequency, in float variation, in float zigzag, in float rotation) {
                // Create tiles in UV-space
                uv *= frequency;

                // Integer coords
                vec2 i = floor(uv);

                // Offset every other row based on zigzag param, then compute fractional coords
                float row_offset = mod(i.y, 2.0);
                uv.x += row_offset * zigzag;
                vec2 f = fract(uv);

				// Rotate the tile itself:
				// const float mid = 0.5;
				// f = vec2(
				// 	cos(rotation) * (f.x - mid) + sin(rotation) * (f.y - mid) + mid,
				// 	cos(rotation) * (f.y - mid) - sin(rotation) * (f.x - mid) + mid
				// );
				// f = fract(f);

                f = f * 2.0 - 1.0;

				// Recompute integer coords after shifting - then, random value per tile 
				i = floor(uv);
				float rand = (hashwithoutsine12(i) * 5.0 + 1.0);
				float jitter = mix(1.0, rand, variation);
				f *= jitter;

                return f;
            }`,[e]),r=new Xe(`float circle(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);
                return smoothstep(
                    -smoothness, 
                     smoothness, 
                     length(f) - size
                );
            }`,[t]),i=new Xe(`float ring(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);

				float d = length(f);
                const float inner_width = 0.5;

                float outer = smoothstep(-smoothness, smoothness, d - size);
                float inner = smoothstep(-smoothness, smoothness, d - size * inner_width);
				return outer + (1.0 - inner);   
            }`,[t]),n=new Xe(`float sdf_ngon(in vec2 p, in float r, in int n) {
                float an = (PI * 2.0) / float(n);
                float he = r * tan(0.5 * an);
                
                // Rotate to first sector
                p = -p.yx; 
                float bn = an * floor((atan(p.y, p.x) + 0.5 * an) / an);
                vec2  cs = vec2(cos(bn), sin(bn));
                p = mat2(cs.x, -cs.y, cs.y, cs.x)*p;
            
                // Side of polygon
                return length(p - vec2(r, clamp(p.y, -he, he))) * sign(p.x - r);
            }
            
            float polygon(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation, in int sides) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);
                return smoothstep(-smoothness, smoothness, sdf_ngon(f, size, sides));
            }`,[t]),a=new Xe(`float sdf_cross(in vec2 p, in vec2 b, float r ) {
                p = abs(p); 
				p = (p.y > p.x) ? p.yx : p.xy;
                vec2  q = p - b;
                float k = max(q.y, q.x);
                vec2  w = (k > 0.0) ? q : vec2(b.y - p.x, -k);
                return sign(k) * length(max(w, 0.0)) + r;
            }
            
            // Avoid namespace conflicts 
            float xcross(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);
                return smoothstep(-smoothness, smoothness, sdf_cross(f, vec2(size, size * 0.25), smoothness));
            }`,[t]),s=new Xe(`float ndot(vec2 a, vec2 b) { 
                return a.x*b.x - a.y*b.y; 
            }
            
            float sdf_diamond(in vec2 p, in vec2 b) {
                p = abs(p);
                float h = clamp(ndot(b - 2.0 * p, b) / dot(b, b), -1.0, 1.0);
                float d = length(p - 0.5 * b * vec2(1.0 - h, 1.0 + h));
                return d * sign(p.x * b.y + p.y * b.x - b.x * b.y);
            }

            float diamond(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);
	            return smoothstep(-smoothness, smoothness, sdf_diamond(f, vec2(size)));
            }`,[t]),o=new Xe(`float checkerboard(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                uv *= frequency;
                vec2 i = floor(uv);

                float offset = mod(i.y, 2.0);

                uv.x += offset + zigzag * offset;
                float x = floor(uv.x);
                
                return mod(x, 2.0);
            }`),l=new Xe(`float line(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, 0.0, zigzag, rotation);
				
				// Different approach for variation param here
				float row = floor(uv * frequency).y;
				float rand = hashwithoutsine12(vec2(row));
				float s = mix(size, size * rand, variation);

				return smoothstep(
					s - smoothness, 
					s + smoothness, 
					abs(f.y)
				);
            }`,[t]),u=new Xe(`// Uses bisection 
            float udf_cos(in vec2 p, in float a, in float b, in float c, in float d) {
                // Convert all data to a primitive cosine wave
                p = c * (p - vec2(d, a));
                
                const float TWO_PI = PI * 2.0;

                // Reduce to principal half cycle
                p.x = mod(p.x, TWO_PI); 
                if (p.x > PI) {
                    p.x = TWO_PI - p.x;
                }
            
                // Find zero of derivative (minimize distance)
                float xa = 0.0;
                float xb = TWO_PI;

                // 24 bit precision
                for (int i = 0; i < 24; i++) {
                    float x = 0.5 * (xa + xb);
                    float y = x - p.x + b * c * sin(x) * (p.y - b * c * cos(x));
                    if (y < 0.0) xa = x; 
                    else xb = x;
                }
                float x = 0.5 * (xa + xb);
                
                // Compute distance    
                vec2 q = vec2(x, b * c * cos(x));
                return length(p - q) / c;
            }

            float wave(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                float repeat = frequency.x;
                uv *= repeat;
                vec2 i = floor(uv);
                float row_offset = mod(i.y, 2.0);
                uv.x += row_offset * zigzag;
                vec2 f = vec2(uv.x, fract(uv.y));

                // Generalized cosine: y(x) = a + b * cos(cx + d)
                const float amplitude = 0.125;
                float wave_frequency = frequency.y * 0.1;
                float distance_estimate = udf_cos(f, 0.50, amplitude, wave_frequency * (2.0 * PI), 0.0);

				// Different approach for variation param here
				float rand = hashwithoutsine12(vec2(i.y));
				float s = mix(size, size * rand, variation);

                return smoothstep(-smoothness, smoothness, distance_estimate - s * 0.5);
            }`);return{tileAndCenter:t,circle:r,ring:i,polygon:n,cross:a,diamond:s,checkerboard:o,line:l,wave:u}}();var uq=class extends Kr{constructor(e,t,r,i,n,a,s,o){super("v3"),this.nodeType="Rainbow",this.filmThickness=e,this.movement=t,this.wavelengths=r,this.noiseStrength=i,this.noiseScale=n,this.offset=a,this.isMask=o,this.alpha=s,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.require("vWorldViewDir"),e.require("worldNormal"),e.isShader("fragment")){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let r=e.include(uq.Nodes.rainbow),i=[];return i.push(this.filmThickness.build(e,"f")),i.push(this.movement.build(e,"f")),i.push(this.wavelengths.build(e,"v3")),i.push(this.noiseStrength.build(e,"f")),i.push(this.noiseScale.build(e,"f")),i.push(this.offset.build(e,"v3")),i.push(this.isMask.build(e,"b")),i.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),i.push(this.alpha.build(e,"f")),i.push(this.calpha),e.format(r+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("RainbowNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},cq=uq;cq.Nodes=function(){let e=new Xe(`vec3 attenuation(vec3 wavelengths, float filmThickness, float movement, float noiseStrength, float noiseScale, vec3 offset) {
                 vec3 st = position / noiseScale;
				 vec3 q = vec3(simplex3d(st),
							  simplex3d(st + vec3(1.0)),
							  simplex3d(st + vec3(1.0)));

				 vec3 r = vec3(simplex3d(st + vec3(1.4, 1.3, 1.0) * q + vec3(1.7, 9.2, 1.0)),
							  simplex3d(st + vec3(2.0, 1.2, 1.0) * q + vec3(8.3, 2.8, 1.0)),
							  simplex3d(st * q));

                 float noise = simplex3d(st + r);

                 return .5 + .5 * cos((((filmThickness + (noise * noiseStrength)) / (vec3(wavelengths.r * 1.0, wavelengths.g * 0.8, wavelengths.b * 0.6) + 1.0)) * dot(normalize(vWorldViewDir + (offset * -0.001)), normalize(vWNormal))) + movement);
             }`,[ds.simplex]);return{rainbow:new Xe(`vec3 rainbow(float filmThickness, float movement, vec3 wavelengths, float noiseStrength, float noiseScale, vec3 offset, bool isMask, float mask, float alpha, out float calpha) {
				vec3 res = clamp(attenuation(wavelengths, filmThickness, movement, noiseStrength, noiseScale, offset), 0.0, 2.0);

				float rainbowContribution = clamp(res.r + res.g + res.b, 0.0, 1.0);

				float lalpha = alpha * rainbowContribution * mask;
				calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return res;
             }`,[e])}}();var hq=class extends Kr{constructor(e,t,r,i,n,a,s,o,l,u){super("v3"),this.nodeType="Toon",this.positioning=e,this.colors=t,this.steps=r,this.source=i,this.isWorldSpace=n,this.noiseStrength=a,this.noiseScale=s,this.shadowColor=o,this.offset=l,this.alpha=u,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.require("worldNormal"),e.require("worldPosition"),e.isShader("fragment")){e.define("COLORS_MAX",10),e.addFragmentVariable(this.calpha,"float");let r=e.include(hq.Nodes.toon),i=[];return i.push(this.positioning.build(e,"i")),i.push(this.colors.build(e,"v4[]")),i.push(this.steps.build(e,"f[]")),i.push(this.source.build(e,"v3")),i.push(this.isWorldSpace.build(e,"b")),i.push(this.noiseStrength.build(e,"f")),i.push(this.noiseScale.build(e,"f")),i.push(this.shadowColor.build(e,"v4")),i.push(this.offset.build(e,"v3")),i.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),i.push(this.alpha.build(e,"f")),i.push(this.calpha),e.format(r+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("ToonNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},dq=hq;dq.Nodes=function(){let e=new Xe(`float rand(float n) {
				return fract(sin(n) * 43758.5453123);
			}`),t=new Xe(`float hash1(float p) { 
				p = fract(p * 0.011); 
				p *= p + 7.5; 
				p *= p + p; 
				return fract(p); 
			}`),r=new Xe(`float valueNoise(vec3 x) {
				const vec3 step = vec3(110, 241, 171);
			
				vec3 i = floor(x);
				vec3 f = fract(x);
			 
				// For performance, compute the base input to a 1D hash from the integer part of the argument and the 
				// incremental change to the 1D based on the 3D -> 1D wrapping
				float n = dot(i, step);
			
				vec3 u = f * f * (3.0 - 2.0 * f);
				return mix(mix(mix( hash1(n + dot(step, vec3(0, 0, 0))), hash1(n + dot(step, vec3(1, 0, 0))), u.x),
							   mix( hash1(n + dot(step, vec3(0, 1, 0))), hash1(n + dot(step, vec3(1, 1, 0))), u.x), u.y),
						   mix(mix( hash1(n + dot(step, vec3(0, 0, 1))), hash1(n + dot(step, vec3(1, 0, 1))), u.x),
							   mix( hash1(n + dot(step, vec3(0, 1, 1))), hash1(n + dot(step, vec3(1, 1, 1))), u.x), u.y), u.z);
			}`,[t]),i=new Xe(`vec3 hash3(vec3 x) {
				x = vec3(dot(x,vec3(127.1, 311.7, 74.7)),
						 dot(x,vec3(269.5, 183.3, 246.1)),
						 dot(x,vec3(113.5, 271.9, 124.6)));
			
				return fract(sin(x)*43758.5453123);
			}`),n=new Xe(`vec3 voronoiNoise(in vec3 x)
			{
				vec3 p = floor(x);
				vec3 f = fract(x);

				float id = 0.0;
				vec2 res = vec2(100.0);

				for(int k=-1; k<=1; k++)
				for(int j=-1; j<=1; j++)
				for(int i=-1; i<=1; i++)
				{
					vec3 b = vec3(float(i), float(j), float(k));

					// Comment out the "+ hash(p + b);" part below to get "square" cells
					vec3 r = vec3(b) - f + hash3(p + b);
					float d = dot(r, r);

					if (d < res.x)
					{
						id = dot(p + b, vec3(1.0, 57.0, 113.0));
						res = vec2(d, res.x);			
					}
					else if (d < res.y)
					{
						res.y = d;
					}
				}

				return vec3(sqrt(res), abs(id));
			}
			`,[i]);return{toon:new Xe(`vec3 toon(int positioning, vec4 colors[COLORS_MAX], float steps[COLORS_MAX], vec3 source, bool isWorldSpace, float noiseStrength, float noiseScale, vec4 shadowColor, vec3 offset, float mask, float alpha, out float calpha) {
				float t = 0.0;
				float shadow = 1.0;

				if (positioning == 0) {

					// Can't do this mode if lighting is "none"
					#if (defined(PHONG) || defined(LAMBERT) || defined(STANDARD))

						// Algorithm from Chapter 10 of Graphics Shaders
						const vec3 weights = vec3(0.2125, 0.7154, 0.0721);
						vec3 lpos;
						vec3 l;
						float dproduct;

						#if (NUM_POINT_LIGHTS > 0)

							#if defined(USE_SHADOWMAP) && (NUM_POINT_LIGHT_SHADOWS > 0)
								PointLightShadow pointLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_POINT_LIGHTS; i++) {
								// Light positions are in view-space for some reason?
								lpos = (inverse(viewMatrix) * vec4(pointLights[UNROLLED_LOOP_INDEX].position, 1.0)).xyz;
								l = normalize(lpos - worldPosition);
								
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								
								// TODO: we want to use "intensity" but it isn't available in the shader code
								//dproduct += dot(pointLights[UNROLLED_LOOP_INDEX].color, weights);

								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS)
									pointLightShadow = pointLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getPointShadow( 
											pointShadowMap[UNROLLED_LOOP_INDEX], 
											pointLightShadow.shadowMapSize, 
											pointLightShadow.shadowBias, 
											pointLightShadow.shadowRadius,
											vPointShadowCoord[UNROLLED_LOOP_INDEX], 
											pointLightShadow.shadowCameraNear, 
											pointLightShadow.shadowCameraFar);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						#if NUM_DIR_LIGHTS > 0 
							
							#if defined(USE_SHADOWMAP) && (NUM_DIR_LIGHT_SHADOWS > 0)
								DirectionalLightShadow directionalLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_DIR_LIGHTS; i++) {
								// Use the direction vector for directional lights instead
								l = (inverse(viewMatrix) * vec4(directionalLights[UNROLLED_LOOP_INDEX].direction, 0.0)).xyz;
		
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS)
									directionalLightShadow = directionalLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getShadow( 
										UNROLLED_LOOP_INDEX,
										directionalShadowMap[UNROLLED_LOOP_INDEX], 
										directionalLightShadow.shadowMapSize, 
										directionalLightShadow.shadowBias, 
										directionalLightShadow.shadowRadius, 
										vDirectionalShadowCoord[UNROLLED_LOOP_INDEX]);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						#if NUM_SPOT_LIGHTS > 0 
							
							#if defined(USE_SHADOWMAP) && (NUM_SPOT_LIGHT_SHADOWS > 0)
								SpotLightShadow spotLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_SPOT_LIGHTS; i++) {
								lpos = (inverse(viewMatrix) * vec4(spotLights[UNROLLED_LOOP_INDEX].position, 1.0)).xyz;
								l = normalize(lpos - worldPosition);
								
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS)
									spotLightShadow = spotLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getShadow(
										UNROLLED_LOOP_INDEX,
										spotShadowMap[UNROLLED_LOOP_INDEX], 
										spotLightShadow.shadowMapSize, 
										spotLightShadow.shadowBias, 
										spotLightShadow.shadowRadius, 
										vSpotLightCoord[UNROLLED_LOOP_INDEX]);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						t = clamp(t, 0.0, 1.0);
				
					#endif

				} else if (positioning == 1) {
					
					vec3 origin = mix(position, worldPosition, float(isWorldSpace));
					vec3 direction = normalize(source - origin);
					t = dot(direction, normalize(worldNormal)) * 0.5 + 0.5;	

				} else {

					vec3 origin = worldPosition;
					vec3 source = cameraPosition - offset;
					vec3 direction = normalize(source - origin);
					t = dot(direction, normalize(worldNormal)) * 0.5 + 0.5;	
					
				}

				if (noiseStrength > 0.0) {
					// Distort with noise
					vec3 st = position / noiseScale;
					
					// Voronoi "smooth" noise
					float noise = 1.0 - voronoiNoise(st).x;

					// Voronoi cellular noise
					//float noise = 1.0 - rand(voronoiNoise(st).z);

					// Position warp noise
					// vec3 offset = vec3(
					// 	simplex3d(st),
					// 	simplex3d(st + vec3(111.1, 143.89, 217.19)),
					// 	simplex3d(st + vec3(171.1, 247.89, 117.23))
					// );
					// st += offset;
					// float noise = valueNoise(st);

					t += noise * noiseStrength;
				}

				t = clamp(t, 0.0, 1.0);

				// Compute ramp color
				float p;
				vec4 color = colors[0];
				for (int i = 1; i < COLORS_MAX; i++) {
					p = clamp((t - steps[i-1]) / (steps[i] - steps[i-1]), 0.0, 1.0);
					color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
				}

				// Incorporate custom shadow color
				if (positioning == 0) {

					vec3 blendedShadow = mix(color.rgb, shadowColor.rgb, shadowColor.a);
					color.rgb = mix(blendedShadow, color.rgb, shadow);
				
				}

				// Accumulate alpha as usual
				float lalpha = alpha * color.a * mask;
				calpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);
				accumAlpha += (1.0 - accumAlpha) * lalpha;

				return color.xyz;

            }`,[ds.simplex,e,r,n])}}();var XIe=function(){return{textureBicubic:new Xe(`float w0( float a ) {
            return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
        }
    
        float w1( float a ) {
            return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
        }
    
        float w2( float a ){
            return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
        }
    
        float w3( float a ) {
            return ( 1.0 / 6.0 ) * ( a * a * a );
        }
    
        // g0 and g1 are the two amplitude functions
        float g0( float a ) {
            return w0( a ) + w1( a );
        }
    
        float g1( float a ) {
            return w2( a ) + w3( a );
        }
    
        // h0 and h1 are the two offset functions
        float h0( float a ) {
            return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
        }
    
        float h1( float a ) {
            return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
        }
    
        vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
            uv = uv * texelSize.zw + 0.5;
    
            vec2 iuv = floor( uv );
            vec2 fuv = fract( uv );
    
            float g0x = g0( fuv.x );
            float g1x = g1( fuv.x );
            float h0x = h0( fuv.x );
            float h1x = h1( fuv.x );
            float h0y = h0( fuv.y );
            float h1y = h1( fuv.y );
    
            vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
            vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
            vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
            vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
    
            return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) + 
                   g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
        }

        vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
            vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
            vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
            vec2 fLodSizeInv = 1.0 / fLodSize;
            vec2 cLodSizeInv = 1.0 / cLodSize;
            vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
            vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
            return mix( fSample, cSample, fract( lod ) );
        }`)}}();function QIe(e,t){return e>=t?new re(t/e,1):new re(1,e/t)}var fq=class extends Kr{constructor(e,t,r,i,n,a,s,o){super("v3"),this.nodeType="Transmission",this.thickness=e,this.ior=t,this.roughness=r,this.transmissionSamplerSize=i,this.transmissionSamplerMap=n,this.transmissionDepthMap=a,this.aspectRatio=s,this.alpha=o,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.extensions.shaderTextureLOD=!0,e.extensions.derivatives=!0,e.isShader("fragment")){e.define("NUM_SAMPLES",6),e.define("BLUR_SLOD",Math.pow(2,Ct.transmissionLod.value)),e.require("worldPosition"),e.requires.worldNormal=!0,e.requires.modelMatrix=!0,e.requires.projectionMatrix=!0,e.addFragmentVariable(this.calpha,"float");let r=e.include(fq.Nodes.transmission),i=[];return i.push(this.thickness.build(e,"f")),i.push(this.ior.build(e,"f")),i.push(this.roughness.build(e,"f")),i.push(this.transmissionSamplerSize.build(e,"v2")),i.push(this.transmissionSamplerMap.getTexture(e,"t")),i.push(this.transmissionDepthMap.getTexture(e,"t")),i.push(this.aspectRatio.build(e,"v2")),i.push("normal"),i.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),i.push(this.alpha.build(e,"f")),i.push(this.calpha),e.format(r+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("TransmissionNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},pq=fq;pq.Nodes=function(){let e=new Xe(`vec3 blur(sampler2D sp, vec2 U, vec2 scale, float lod, sampler2D dm, vec2 unrefractedU, vec2 aspectRatio) {
                // Slightly modified version of this:
                // https://www.shadertoy.com/view/ltScRG

				// Special case for blur == 0.0
				if (lod == 0.0) {
					#ifdef TEXTURE_LOD_EXT
					return texture2DLodEXT( sp, U, 0.0).rgb;
					#else
					return textureLod( sp, U, 0.0).rgb;
					#endif
				}
				
				vec2 texelSize = vec2(1.0) / resolution;
                vec2 halton = haltonSequence[frameIndex];
                float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);
                float temporalAngle  = temporalOffset * PI2;
				vec3 res = vec3(0.0);
                vec2 uv = vec2(0.0);
                vec2 offset = vec2(0.0);
                vec2 vogelSample = vec2(0.0);
                for (int i = 0; i < NUM_SAMPLES; i++) {
                    vogelSample =  vogelDiskSample(i, NUM_SAMPLES, temporalAngle) * texelSize;
                    offset = vogelSample * scale * (lod * 10.0); // TODO: used to be hardcoded to 20
                    uv = U + offset;
                    float opaqueDepth = unpackRGBAToDepth(textureLod(dm, uv, lod));
                    if (opaqueDepth != 0.0 && opaqueDepth < gl_FragCoord.z) {
                        uv = unrefractedU;
                        lod = lod > 4.0 ? lod : lod / 2.0;
                    }
                    res += textureLod(sp, uv, lod).rgb;
                }
                return res / float(NUM_SAMPLES);
            }`),t=new Xe(`vec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {
		        // Direction of refracted light.
		        vec3 refractionVector = refract( -v,  n, 1.0 / ior );
		        
				// Compute rotation-independant scaling of the model matrix.
		        vec3 modelScale;
		        modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		        modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		        modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );

		        // The thickness is specified in local space
		        return normalize( refractionVector ) * thickness * modelScale;
	        }`),r=new Xe(`float applyIorToRoughness( float roughness, float ior ) {
				// Scale roughness with IOR so that an IOR of 1.0 results in no microfacet refraction and
				// an IOR of 1.5 results in the default amount of microfacet refraction.
				return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
			}`),i=new Xe(`vec3 getTransmissionSample( vec2 fragCoord, float roughness, float ior, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 unrefractedCoords, vec2 aspectRatio) {
				// Threejs exports do not pass a depth map to this shader, so we have to fallback to the "Threejs method of blurring" - see
				// also the code in convertTransmission.ts, which runs during export
				#ifdef IS_THREEJS_EXPORT
					float lod = log2(transmissionSamplerSize.x) * applyIorToRoughness(roughness / 5.0, ior);
					return textureBicubic(transmissionSamplerMap, fragCoord.xy, lod).rgb;
				#else
					float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
					float lod = applyIorToRoughness(roughness, ior);
					return blur(transmissionSamplerMap, fragCoord, vec2(lod), min(framebufferLod / 5.5, 8.5), transmissionDepthMap, unrefractedCoords, aspectRatio);
				#endif
			}`,[XIe.textureBicubic,r,e]),n=new Xe(`vec3 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 aspectRatio ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;

				// Project refracted vector on the framebuffer, while mapping to normalized device coordinates.
				vec4 ndcPos = projMatrix * viewMatrix *  vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;

				vec4 ndcPosUnrefracted = projMatrix * viewMatrix * vec4(position, 1.0 );
				vec2 unrefractedCoords = ndcPosUnrefracted.xy / ndcPosUnrefracted.w;
				unrefractedCoords += 1.0;
				unrefractedCoords /= 2.0;

				// Sample framebuffer to get pixel the refracted ray hits.
				return getTransmissionSample( refractionCoords, roughness, ior, transmissionSamplerSize, transmissionSamplerMap, transmissionDepthMap, unrefractedCoords, aspectRatio );
    		}`,[i,t]);return{transmission:new Xe(`vec3 transmission(float thickness, float ior, float roughness, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 aspectRatio, vec3 normal, float mask, float alpha, out float calpha) {
                vec3 v = vec3(0.);
                if (isOrthographic) {
                    v = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
                } else {
                    v = normalize(vWPosition - cameraPosition);
                }
                vec3 transmission = getIBLVolumeRefraction(vWNormal, -v, roughness,  vWPosition, modelMatrix, viewMatrix, projectionMatrix, ior, thickness, transmissionSamplerSize, transmissionSamplerMap, transmissionDepthMap, aspectRatio );
                
				float lalpha = alpha * mask;
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * alpha;

				return transmission;
            }`,[n])}}();var b3=(e=>(e.NOISE="noise",e.MAP="map",e))(b3||{}),mq=class extends Kr{constructor(e,t,r,i,n,a,s,o,l,u,h){super("v3"),this.displacementTypeIndex=new ei(0),this.nodeType="VertexDisplacement",this.intensity=e,this.movementOrTexture=t,Object.values(b3)[this.displacementTypeIndex.value]==="map"&&(this.mat=new QY(this.movementOrTexture.value.matrix)),this.cropOrOffset=r,this.scale=u,this.noiseFunctionIndex=h,this.voronoiStyle=i,this.smoothness=n,this.seed=a,this.highCut=s,this.lowCut=o,this.quality=l}generate(e,t){if(e.isShader("vertex")){e.define("USE_LAYER_DISPLACE");let r,i=[];switch(i.push("displaced_position"),i.push("displaced_normal"),Object.values(b3)[this.displacementTypeIndex.value]){case"map":{r=e.include(mq.Nodes.map),i.push(this.movementOrTexture.getTexture(e,"t")),i.push("uv"),i.push(this.cropOrOffset.build(e,"f")),this.mat&&i.push(this.mat.build(e,"mat3"));break}case"noise":{let n=Object.values(Ek)[this.noiseFunctionIndex.value],a=new Xe(`vec3 orthogonal(vec3 v) {
							return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0) : vec3(0.0, -v.z, v.y));
						}`),s=n=="voronoi"?`
					float v = ${n}((p + offset) * scale * 0.001 + neighbour_offset + (movement * 0.1), voronoiStyle, smoothness, seed, quality);
					v = remap(v, lowCut, highCut, 0.0, 1.0);
					v = smax(v, 0.0, smoothness * 0.25);
					v = smin(v, 1.0, smoothness * 0.25);

					return p + n * v * intensity;
					`:`
					return p + n * ${n}((p + offset) * scale * 0.001 + neighbour_offset + (movement * 0.1)) * intensity;
					`,o=new Xe(`vec3 distorted(vec3 p, vec3 n, float scale, float intensity, vec3 offset, float neighbour_offset, float movement, int voronoiStyle, float smoothness, float seed, float highCut, float lowCut, int quality) {
							${s}
						}`,[ds.simplex,ds.simplexFractal,ds.simplexAshima,ds.fbm,ds.perlin,ds.voronoi]),l=new Xe(`vec3 vertexDisplacementNoise(vec3 position, vec3 normal, float scale, vec3 offset, float movement, int voronoiStyle, float smoothness, float seed, float highCut, float lowCut, int quality, float intensity, out vec3 displaced_normal) {
							vec3 displaced_position = distorted(position, normal, scale, intensity, offset, neighbor_offset, movement, voronoiStyle, smoothness, seed, highCut, lowCut, quality);
							vec3 tangent1 = orthogonal(normal);
							vec3 tangent2 = normalize(cross(normal, tangent1));

                            // TODO(Max): The distance to the neighbors was originally scaled by 0.1.
                            // This caused some small oval/circular visual artifacts in the lighting.
                            // For now, simply using neighbors further away betters the problem,
                            // but we should figure out the underlying cause when we have some time.
                            // Maybe its related to how we calculate the tangent and bitangent?
							vec3 nearby1 = position + tangent1;
							vec3 nearby2 = position + tangent2;
							vec3 distorted1 = distorted(nearby1, normal, scale, intensity, offset, neighbor_offset, movement, voronoiStyle, smoothness, seed, highCut, lowCut, quality);
							vec3 distorted2 = distorted(nearby2, normal, scale, intensity, offset, neighbor_offset, movement, voronoiStyle, smoothness, seed, highCut, lowCut, quality);
							displaced_normal = normalize(cross(distorted1 - displaced_position, distorted2 - displaced_position));
							return displaced_position;
						}`,[o,a]);r=e.include(l),i.push(this.scale.build(e,"f")),i.push(this.cropOrOffset.build(e,"v3")),i.push(this.movementOrTexture.build(e,"f")),i.push(this.voronoiStyle.build(e,"i")),i.push(this.smoothness.build(e,"f")),i.push(this.seed.build(e,"f")),i.push(this.highCut.build(e,"f")),i.push(this.lowCut.build(e,"f")),i.push(this.quality.build(e,"i"));break}}return i.push(this.intensity.build(e,"f")),i.push("displaced_normal"),e.format(r+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("VertexDisplacementNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},gq=mq;gq.Nodes=function(){let e=new Xe(`vec3 orthogonal(vec3 v) {
				return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0) : vec3(0.0, -v.z, v.y));
			}`),t=new Xe(`float displacementMapTexture(sampler2D tex, float crop, vec2 uv, mat3 mat, vec2 offset) {
				vec2 uvs = (mat * vec3(uv * 2.0 - 1.0, 1.0) / 2.0 + 0.5).xy + offset;
				vec4 tmp = texture2D(tex, uvs);
				vec3 col = tmp.rgb;
				if (crop > 0.5) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						return 0.0;
					}
				}
				return col.r;
			}`);return{map:new Xe(`vec3 vertexDisplacementMap(vec3 position, vec3 normal, sampler2D tex, vec2 uv, float crop, mat3 mat, float intensity, out vec3 displaced_normal) {
				vec3 displaced_position = position + normal * displacementMapTexture(tex, crop, uv, mat, vec2(0.0)) * intensity;
				vec3 tangent1 = normalize(orthogonal(normal));
				vec3 tangent2 = normalize(cross(normal, tangent1));
				vec3 nearby1 = position + tangent1 * 0.1;
				vec3 nearby2 = position + tangent2 * 0.1;
				vec3 distorted1 = nearby1 + normal * displacementMapTexture(tex, crop, uv, mat, vec2(neighbor_offset)) * intensity;
				vec3 distorted2 = nearby2 + normal * displacementMapTexture(tex, crop, uv, mat, vec2(neighbor_offset)) * intensity;
				displaced_normal = normalize(cross(distorted1 - displaced_position, distorted2 - displaced_position));
				return displaced_position;
			}`,[e,t])}}();var Ct={normalRenderTarget:new sc,normalRenderTargetDepth:new sc,transmissionRenderTarget:new sc,aspectRatio:new ea,transmissionSize:new ea(2048,2048),transmissionRenderTargetDepth:new sc,aoRenderTarget:new sc,aoEnabled:new $a,pixelRatioNode:new nt(1),resolution:new ea,penumbraSize:new Vd(5,.5),frameIndex:new ei(0),transmissionLod:new ei(2)};for(let e of Object.values(Ct))e.isRenderGlobal=!0;var vq=class extends gd{constructor(){super("basic"),this.nodeType="Basic",this.color=new Bi(Vo),this.shadingAlpha=new nt(1),this.shadingBlend=new ei(0),this.previousModelViewMatrix=new Au,this.previouseProjectionMatrix=new Au}get category(){return"phong"}generate(e){let t;if(e.isShader("vertex")){let r=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:Ct.frameIndex}),e.mergeUniform({resolution:Ct.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(hv.merge([$e.fog])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>"].join(`
`));let i=["#include <beginnormal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#if defined( USE_LAYER_DISPLACE )
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <begin_vertex>
				#endif /* !USE_LAYER_DISPLACE */
				`];r&&i.push(r.code,r.result?"displaced_position = "+r.result+";":""),i.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","	vNormal = transformedNormal;","#endif"),i.push("#include <project_vertex>","#include <fog_vertex>","#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>"),i.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=i.join(`
`)}else{this.color===void 0&&(this.color=new Bi(Vo)),this.color.analyze(e,{slot:"color"}),this.alpha&&this.alpha.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"});let r=this.color.flow(e,"c",{slot:"color"}),i=this.alpha?this.alpha.flow(e,"f"):void 0,n=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0,a=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0;e.requires.transparent=i!==void 0,e.addParsCode(["varying vec3 vWPosition;","#include <fog_pars_fragment>","#include <dithering_pars_fragment>","varying vec3 vViewPosition;","#include <normal_pars_fragment>"].join(`
`));let s=["#include <normal_fragment_begin>",r.code];i&&s.push(i.code,"#ifdef ALPHATEST"," if ( "+i.result+" <= ALPHATEST ) discard;","#endif"),a?s.push(a.code,`vec3 outgoingLight = ${r.result};`,`vec3 finalColor = spe_blend(outgoingLight, ${a.result}, 1.0, SPE_BLENDING_NORMAL);`):s.push(`vec3 finalColor = ${r.result};`);let o="1.0";this.mask&&(this.mask.analyze(e),o=`luminance(${this.mask.flow(e,"v3").result})`),i?s.push(`gl_FragColor = vec4( finalColor, accumAlpha * ${i.result} * ${o} );`):s.push("gl_FragColor = vec4("+r.result+", 1.0 );"),n&&s.push(`gl_FragColor.a *= ${n.result};`),s.push("#include <fog_fragment>","#include <dithering_fragment>"),t=s.join(`
`)}return t}},KIe=class extends gd{constructor(){super("lambert"),this.nodeType="Lambert",this.color=new Bi(Vo),this.emissive=new Bi(0),this.emissiveIntensity=new nt(1),this.previousModelViewMatrix=new Au,this.previouseProjectionMatrix=new Au,this.shadingAlpha=new nt(1),this.shadingBlend=new ei(0),this.occlusion=new $a(!0)}get category(){return"lambert"}build(e){let t;if(e.define("LAMBERT"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let r=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:Ct.frameIndex}),e.mergeUniform({resolution:Ct.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(hv.merge([$e.fog,$e.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","varying vec3 vLightFront;","varying vec3 vIndirectFront;","#ifndef DOUBLE_SIDED","   #define DOUBLE_SIDED","#endif","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","	varying vec3 vIndirectBack;","#endif","#include <bsdfs>","#include <lights_pars_begin>","#include <color_pars_vertex>","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let i=["#include <beginnormal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];r&&i.push(r.code,r.result?"displaced_position = "+r.result+";":""),i.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),i.push("	#include <project_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>",`
					vec3 diffuse = vec3( 1.0 );
					GeometricContext geometry;
					geometry.position = mvPosition.xyz;
					geometry.normal = normalize( transformedNormal );
					geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
				`),i.push(`
					GeometricContext backGeometry;
					backGeometry.position = geometry.position;
					backGeometry.normal = -geometry.normal;
					backGeometry.viewDir = geometry.viewDir;
					vLightFront = vec3( 0.0 );
					vIndirectFront = vec3( 0.0 );
					#ifdef DOUBLE_SIDED
						vLightBack = vec3( 0.0 );
						vIndirectBack = vec3( 0.0 );
					#endif
					IncidentLight directLight;
					float dotNL;
					vec3 directLightColor_Diffuse;
					vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
					vIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );
					#ifdef DOUBLE_SIDED
						vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
						vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );
					#endif
					#if NUM_POINT_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
							getPointLightInfo( pointLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_SPOT_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
							getSpotLightInfo( spotLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_DIR_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
							getDirectionalLightInfo( directionalLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_HEMI_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
							vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
							#ifdef DOUBLE_SIDED
								vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );
							#endif
						}
						#pragma unroll_loop_end
					#endif
				`,"	#include <shadowmap_vertex>","	#include <fog_vertex>"),i.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=i.join(`
`)}else{e.mergeUniform({penumbraSize:Ct.penumbraSize}),e.mergeUniform({frameIndex:Ct.frameIndex}),e.mergeUniform({aoMap:Ct.aoRenderTarget}),e.mergeUniform({aoEnabled:Ct.aoEnabled}),this.color===void 0&&(this.color=new Bi(Vo)),this.color.analyze(e,{slot:"color"}),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let r=this.color.flow(e,"c",{slot:"color"}),i=this.emissive.flow(e,"c",{slot:"emissive"}),n=this.emissiveIntensity.flow(e,"f",{slot:"emissive"}),a=this.occlusion.flow(e,"b",{slot:"occlusion"}),s=this.shadingAlpha.flow(e,"f"),o=this.shadingBlend.flow(e,"i"),l=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,u=this.alpha?this.alpha.flow(e,"f"):void 0,h=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0;e.requires.transparent=u!==void 0,e.addParsCode(["uniform float penumbraSize[5];","uniform sampler2D aoMap;","uniform bool aoEnabled;","varying vec3 vViewPosition;","varying vec3 vWPosition;","varying vec3 vLightFront;","varying vec3 vIndirectFront;","#ifndef DOUBLE_SIDED","   #define DOUBLE_SIDED","#endif","#include <normal_pars_fragment>","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","	varying vec3 vIndirectBack;","#endif","#include <bsdfs>","#include <lights_pars_begin>","#include <fog_pars_fragment>","#include <shadowmap_pars_fragment>","#include <shadowmask_pars_fragment>","#include <clipping_planes_pars_fragment>","#include <dithering_pars_fragment>"].join(`
`));let c=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx, viewdy));
				bool isFrontFacing = (dot(normal, faceNormal) >= 0.0);
				`,"#include <clipping_planes_fragment>"];c.push(r.code,"vec3 diffuseColor = "+r.result+";","ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );"),u&&c.push(u.code,"#ifdef ALPHATEST","if ( "+u.result+" <= ALPHATEST ) discard;","#endif"),c.push("#ifdef DOUBLE_SIDED","	reflectedLight.indirectDiffuse += ( isFrontFacing ) ? vIndirectFront : vIndirectBack;","#else","	reflectedLight.indirectDiffuse += vIndirectFront;","#endif","#include <lightmap_fragment>","reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );","#ifdef DOUBLE_SIDED","	reflectedLight.directDiffuse = ( isFrontFacing ) ? vLightFront : vLightBack;","#else","	reflectedLight.directDiffuse = vLightFront;","#endif","reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();"),i&&c.push(i.code,"reflectedLight.directDiffuse += "+i.result+" * "+n.result+";"),c.push("vec3 ao = aoEnabled && "+a.result+" ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = (reflectedLight.directDiffuse + reflectedLight.indirectDiffuse) ;");let d="1.0";this.mask&&(this.mask.analyze(e),d=`luminance(${this.mask.flow(e,"v3").result})`),c.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${s.result} * ${d} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${s.result} * ${d}, ${o.result} );

					outgoingLight *= ao;
				}
				`),l&&c.push(l.code,`outgoingLight = spe_blend(outgoingLight, ${l.result}, 1.0, SPE_BLENDING_NORMAL);`),u?c.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${u.result} );`):c.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),h&&c.push(`gl_FragColor.a *= ${h.result};`),c.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=c.join(`
`)}return t}},Kg=function(){let e=new Xe(`vec2 dHdxy(sampler2D bumpMap, vec2 bumpMapUv, float bumpScale) {

            // Gradient of UVs w.r.t. X coordinate (in screen-space)
            vec2 dSTdx = dFdx(bumpMapUv);

            // Gradient of UVs w.r.t. Y coordinate (in screen-space)
            vec2 dSTdy = dFdy(bumpMapUv);
            
            // Forward differencing
            float Hll = bumpScale * luminance(texture(bumpMap, bumpMapUv).rgb);
            float dBx = bumpScale * luminance(texture(bumpMap, bumpMapUv + dSTdx).rgb) - Hll;
            float dBy = bumpScale * luminance(texture(bumpMap, bumpMapUv + dSTdy).rgb) - Hll;
            
            return vec2( dBx, dBy );
        }`),t=new Xe(`vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
            vec3 vSigmaX = dFdx( surf_pos.xyz );
            vec3 vSigmaY = dFdy( surf_pos.xyz );
            vec3 vN = surf_norm; // normalized
            
            vN = normalize(vN);

            vec3 R1 = cross( vSigmaY, vN );
            vec3 R2 = cross( vN, vSigmaX );

            R1 = normalize(R1);
            R2 = normalize(R2);
    
            float fDet = dot( vSigmaX, R1 ) * faceDirection;
    
            vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
            return normalize( abs( fDet ) * vN - vGrad );
        }`);return{dHdxy:e,perturbNormalArb:t}}(),ZIe=class extends gd{constructor(){super("phong"),this.nodeType="Phong",this.color=new Bi(Vo),this.specular=new Bi(1118481),this.shininess=new nt(30),this.previousModelViewMatrix=new Au,this.previouseProjectionMatrix=new Au,this.shadingAlpha=new nt(1),this.shadingBlend=new ei(0),this.occlusion=new $a(!0)}get category(){return"phong"}build(e){let t;if(e.define("PHONG"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let r=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:Ct.frameIndex}),e.mergeUniform({resolution:Ct.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(hv.merge([$e.fog,$e.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <skinning_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let i=["#include <beginnormal_vertex>",`
				#include <skinbase_vertex>
				#include <skinnormal_vertex>
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif


				vec3 displaced_position = position;
				vec3 displaced_normal = objectNormal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];r&&i.push(r.code,r.result?"displaced_position = "+r.result+";":""),i.push("transformed = displaced_position;","#include <skinning_vertex>","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),i.push("	#include <project_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>","	#include <shadowmap_vertex>","	#include <fog_vertex>"),i.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=i.join(`
`)}else{e.mergeUniform({penumbraSize:Ct.penumbraSize}),e.mergeUniform({frameIndex:Ct.frameIndex}),e.mergeUniform({aoMap:Ct.aoRenderTarget}),e.mergeUniform({aoEnabled:Ct.aoEnabled}),this.color===void 0&&(this.color=new Bi(Vo)),this.color.analyze(e,{slot:"color"}),this.specular.analyze(e),this.shininess.analyze(e);let r=this.occlusion.flow(e,"b",{slot:"occlusion"});this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let i=this.color.flow(e,"c",{slot:"color"}),n=this.specular.flow(e,"c"),a=this.shininess.flow(e,"f"),s=this.shadingAlpha.flow(e,"f"),o=this.shadingBlend.flow(e,"i"),l=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,u=this.alpha?this.alpha.flow(e,"f"):void 0,h=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0;e.requires.transparent=u!==void 0,e.addParsCode(["varying vec3 vWPosition;","uniform vec3 emissive;","uniform float penumbraSize[5];","uniform sampler2D aoMap;","uniform bool aoEnabled;","#include <normal_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_phong_pars_fragment>","#include <shadowmap_pars_fragment>","#include <dithering_pars_fragment>"].join(`
`));let c=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	BlinnPhongMaterial material;"];if(this.bumpMap){e.include(Kg.dHdxy),e.include(Kg.perturbNormalArb);let f=this.bumpMap.texture.flow(e,"t"),m=this.bumpMap.flow(e,"v3"),p=this.bumpMapIntensity?this.bumpMapIntensity.flow(e,"f").result:"1.0",g="";this.bumpMap.projection.value===4?g=`
					vec3 bumpNormal = vec3(0.0);
					{
						vec2 uv0 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs0;
						vec2 uv1 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs1;
						vec2 uv2 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs2;
						vec3 weights = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_triplanarWeights;

						vec2 grad0 = dHdxy(${f.result}, uv0, ${p});
						vec3 n0 = perturbNormalArb(-vViewPosition, normal, grad0, faceDirection);

						vec2 grad1 = dHdxy(${f.result}, uv1, ${p});
						vec3 n1 = perturbNormalArb(-vViewPosition, normal, grad1, faceDirection);

						vec2 grad2 = dHdxy(${f.result}, uv2, ${p});
						vec3 n2 = perturbNormalArb(-vViewPosition, normal, grad2, faceDirection);
						
						bumpNormal = n0 * weights.z + n1 * weights.x + n2 * weights.y;
						bumpNormal = normalize(bumpNormal);
					}

					normal = bumpNormal;
					`:g=`
					vec2 bumpMapCachedUv = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs;
					vec2 grad = dHdxy(${f.result}, bumpMapCachedUv, ${p});
					normal = perturbNormalArb( - vViewPosition, normal, grad, faceDirection );
					`,c.push(`// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates
					${m.result};
					${g}
					`)}c.push(i.code,"	vec3 diffuseColor = "+i.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );","	vec3 totalEmissiveRadiance = emissive;",n.code,"	vec3 specular = "+n.result+";",a.code,"	float shininess = max( 0.0001, "+a.result+" );","	float specularStrength = 1.0;"),u&&c.push(u.code,"#ifdef ALPHATEST","if ( "+u.result+" <= ALPHATEST ) discard;","#endif"),c.push("material.diffuseColor = diffuseColor;"),c.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),c.push("vec3 ao = aoEnabled && "+r.result+" ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = ((reflectedLight.directDiffuse + reflectedLight.indirectDiffuse)) + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;");let d="1.0";this.mask&&(this.mask.analyze(e),d=`luminance(${this.mask.flow(e,"v3").result})`),c.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${s.result} * ${d} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${s.result} * ${d}, ${o.result} );
					
					outgoingLight *= ao;
				}
				`),l&&c.push(l.code,`outgoingLight = spe_blend(outgoingLight, ${l.result}, 1.0, SPE_BLENDING_NORMAL);`),u?c.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${u.result});`):c.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),h&&c.push(`gl_FragColor.a *= ${h.result};`),c.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=c.join(`
`)}return t}},JIe=class extends gd{constructor(){super("standard"),this.nodeType="Standard",this.color=new Bi(Vo),this.roughness=new nt(.3),this.metalness=new nt(0),this.reflectivity=new nt(.5),this.previousModelViewMatrix=new Au,this.previouseProjectionMatrix=new Au,this.shadingAlpha=new nt(1),this.shadingBlend=new ei(0),this.occlusion=new $a(!0)}get category(){return"physical"}build(e){let t;if(e.define("STANDARD"),e.requires.lights=!0,e.extensions.derivatives=!0,e.extensions.shaderTextureLOD=!0,e.isShader("vertex")){let r=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:Ct.frameIndex}),e.mergeUniform({resolution:Ct.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(hv.merge([$e.fog,$e.lights])),$e.LTC_1&&(e.uniforms.ltc_1={value:void 0},e.uniforms.ltc_2={value:void 0}),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let i=["#include <beginnormal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#if defined( USE_LAYER_DISPLACE )
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <begin_vertex>
				#endif /* !USE_LAYER_DISPLACE */
				`];r&&i.push(r.code,r.result?"displaced_position = "+r.result+";":""),i.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),i.push("#include <project_vertex>","#include <fog_vertex>","#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>","#include <shadowmap_vertex>"),i.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=i.join(`
`)}else{e.mergeUniform({penumbraSize:Ct.penumbraSize}),e.mergeUniform({frameIndex:Ct.frameIndex}),e.mergeUniform({aoMap:Ct.aoRenderTarget}),e.mergeUniform({aoEnabled:Ct.aoEnabled});let r={gamma:!0};this.color===void 0&&(this.color=new Bi(Vo)),this.color.analyze(e,{slot:"color",context:r}),this.roughness.analyze(e),this.metalness.analyze(e);let i=this.occlusion.flow(e,"b",{slot:"occlusion"});this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e),this.reflectivity&&this.reflectivity.analyze(e);let n=this.color.flow(e,"c",{slot:"color",context:r}),a=this.roughness.flow(e,"f"),s=this.metalness.flow(e,"f"),o=this.shadingAlpha.flow(e,"f"),l=this.shadingBlend.flow(e,"i"),u=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,h=this.alpha?this.alpha.flow(e,"f"):void 0,c=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0,d=this.reflectivity?this.reflectivity.flow(e,"f"):void 0;e.requires.transparent=h!==void 0,e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","uniform float penumbraSize[5];","uniform sampler2D aoMap;","uniform bool aoEnabled;","#include <normal_pars_fragment>","#include <dithering_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_physical_pars_fragment>","#include <shadowmap_pars_fragment>"].join(`
`));let f=["#include <clipping_planes_fragment>","	#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	PhysicalMaterial material;","	material.diffuseColor = vec3( 1.0 );"];if(this.bumpMap){e.include(Kg.dHdxy),e.include(Kg.perturbNormalArb);let p=this.bumpMap.texture.flow(e,"t"),g=this.bumpMap.flow(e,"v3"),v=this.bumpMapIntensity?this.bumpMapIntensity.flow(e,"f").result:"1.0",y="";this.bumpMap.projection.value===4?y=`
					vec3 bumpNormal = vec3(0.0);
					{
						vec2 uv0 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs0;
						vec2 uv1 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs1;
						vec2 uv2 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs2;
						vec3 weights = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_triplanarWeights;

						vec2 grad0 = dHdxy(${p.result}, uv0, ${v});
						vec3 n0 = perturbNormalArb(-vViewPosition, normal, grad0, faceDirection);

						vec2 grad1 = dHdxy(${p.result}, uv1, ${v});
						vec3 n1 = perturbNormalArb(-vViewPosition, normal, grad1, faceDirection);

						vec2 grad2 = dHdxy(${p.result}, uv2, ${v});
						vec3 n2 = perturbNormalArb(-vViewPosition, normal, grad2, faceDirection);
						
						bumpNormal = n0 * weights.z + n1 * weights.x + n2 * weights.y;
						bumpNormal = normalize(bumpNormal);
					}

					normal = bumpNormal;
					`:y=`
					vec2 bumpMapCachedUv = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs;
					vec2 grad = dHdxy(${p.result}, bumpMapCachedUv, ${v});
					normal = perturbNormalArb( - vViewPosition, normal, grad, faceDirection );
					`,f.push(`// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates
					${g.result};
					${y}
					`)}if(f.push(n.code,"	vec3 diffuseColor = "+n.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );",s.code,"	float metalnessFactor = "+s.result+";"),this.roughnessMap){let p=this.roughnessMap.texture.flow(e,"t"),g=this.roughnessMap.flow(e,"v3"),v="";this.roughnessMap.projection.value===4?v=`
					float roughnessChange = 1.0;
					{
						vec2 uv0 = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_writeUvs0;
						vec2 uv1 = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_writeUvs1;
						vec2 uv2 = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_writeUvs2;
						vec3 weights = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_triplanarWeights;

						float r0 = luminance(texture(${p.result}, uv0).rgb) * roughnessScale;
						float r1 = luminance(texture(${p.result}, uv1).rgb) * roughnessScale;
						float r2 = luminance(texture(${p.result}, uv2).rgb) * roughnessScale;

						roughnessChange = (r0 * weights.z + r1 * weights.x + r2 * weights.y);
					}
					float roughnessFactor = roughnessChange * ${a.result};
					`:v=`
					vec2 roughnessMapCachedUv = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_writeUvs;

					vec4 vals = texture(${p.result},  roughnessMapCachedUv);
					float roughnessFactor = luminance(vals.rgb) * ${a.result};
					`,f.push(`// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates
					${g.result};

					const float roughnessScale = 1.0;

					${v}
				`)}else f.push(a.code,"	float roughnessFactor = "+a.result+";");h&&f.push(h.code,"#ifdef ALPHATEST","	if ( "+h.result+" <= ALPHATEST ) discard;","#endif"),f.push("vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );"),f.push("material.diffuseColor = diffuseColor * ( 1.0 - metalnessFactor );","material.roughness = max( roughnessFactor, 0.0525 );","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.roughness = clamp( roughnessFactor, 0.04, 1.0 );"),d?f.push(d.code,"material.specularColor = mix( vec3( 0.16 * pow2( "+d.result+" ) ), diffuseColor, metalnessFactor );"):f.push("material.specularColor = mix( vec3( 0.04 ), diffuseColor, metalnessFactor );"),f.push("#include <lights_fragment_begin>"),f.push("#include <lights_fragment_end>"),f.push("vec3 ao = aoEnabled && "+i.result+" ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = ((reflectedLight.directDiffuse + reflectedLight.indirectDiffuse)) + reflectedLight.directSpecular + reflectedLight.indirectSpecular;");let m="1.0";this.mask&&(this.mask.analyze(e),m=`luminance(${this.mask.flow(e,"v3").result})`),f.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${o.result} * ${m} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${o.result} * ${m}, ${l.result} );
					
					outgoingLight *= ao;
				}
				`),u&&f.push(u.code,`outgoingLight = spe_blend(outgoingLight, ${u.result}, 1.0, SPE_BLENDING_NORMAL);`),h?f.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${h.result} );`):f.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),c&&f.push(`gl_FragColor.a *= ${c.result};`),f.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=f.join(`
`)}return t}},eRe=class extends gd{constructor(){super("toon"),this.nodeType="Toon",this.color=new Bi(Vo),this.specular=new Bi(1118481),this.shininess=new nt(30),this.previousModelViewMatrix=new Au,this.previouseProjectionMatrix=new Au,this.shadingAlpha=new nt(1),this.shadingBlend=new ei(0)}get category(){return"toon"}build(e){let t;if(e.define("TOON"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let r=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:Ct.frameIndex}),e.mergeUniform({resolution:Ct.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(hv.merge([$e.fog,$e.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let i=["#include <beginnormal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];r&&i.push(r.code,r.result?"displaced_position = "+r.result+";":""),i.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),i.push("	#include <project_vertex>","	#include <fog_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>","	#include <shadowmap_vertex>","	#include <fog_vertex>"),i.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=i.join(`
`)}else{e.mergeUniform({penumbraSize:Ct.penumbraSize}),e.mergeUniform({frameIndex:Ct.frameIndex}),e.mergeUniform({aoMap:Ct.aoRenderTarget}),e.mergeUniform({aoEnabled:Ct.aoEnabled}),this.color===void 0&&(this.color=new Bi(Vo)),this.color.analyze(e,{slot:"color"}),this.specular.analyze(e),this.shininess.analyze(e),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let r=this.color.flow(e,"c",{slot:"color"}),i=this.specular.flow(e,"c"),n=this.shininess.flow(e,"f"),a=this.shadingAlpha.flow(e,"f"),s=this.shadingBlend.flow(e,"i"),o=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,l=this.alpha?this.alpha.flow(e,"f"):void 0,u=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0;e.requires.transparent=l!==void 0,e.addParsCode(["uniform float penumbraSize[5];","uniform sampler2D aoMap;","uniform bool aoEnabled;","varying vec3 vWPosition;","#include <normal_pars_fragment>","#include <gradientmap_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <dithering_pars_fragment>",`
					varying vec3 vViewPosition;
					struct ToonMaterial {
						vec3	diffuseColor;
						vec3	specularColor;
						float	specularShininess;
						float	specularStrength;
					};
					void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
						vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
			
						reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
						reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
					}
					void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
						reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
					}
					#define RE_Direct				RE_Direct_Toon
					#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
					#define Material_LightProbeLOD( material )	(0)
					`,"#include <shadowmap_pars_fragment>","#include <bumpmap_pars_fragment>","#include <normalmap_pars_fragment>"].join(`
`));let h=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	ToonMaterial material;"];if(this.bumpMap){e.include(Kg.dHdxy),e.include(Kg.perturbNormalArb);let d=this.bumpMap.texture.flow(e,"t"),f=this.bumpMap.flow(e,"v3"),m=this.bumpMapIntensity?this.bumpMapIntensity.flow(e,"f").result:"1.0",p="";this.bumpMap.projection.value===4?p=`
					vec3 bumpNormal = vec3(0.0);
					{
						vec2 uv0 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs0;
						vec2 uv1 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs1;
						vec2 uv2 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs2;
						vec3 weights = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_triplanarWeights;

						vec2 grad0 = dHdxy(${d.result}, uv0, ${m});
						vec3 n0 = perturbNormalArb(-vViewPosition, normal, grad0, faceDirection);

						vec2 grad1 = dHdxy(${d.result}, uv1, ${m});
						vec3 n1 = perturbNormalArb(-vViewPosition, normal, grad1, faceDirection);

						vec2 grad2 = dHdxy(${d.result}, uv2, ${m});
						vec3 n2 = perturbNormalArb(-vViewPosition, normal, grad2, faceDirection);
						
						bumpNormal = n0 * weights.z + n1 * weights.x + n2 * weights.y;
						bumpNormal = normalize(bumpNormal);
					}

					normal = bumpNormal;
					`:p=`
					vec2 bumpMapCachedUv = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs;
					vec2 grad = dHdxy(${d.result}, bumpMapCachedUv, ${m});
					normal = perturbNormalArb( - vViewPosition, normal, grad, faceDirection );
					`,h.push(`// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates
					${f.result};
					${p}
					`)}h.push(r.code,"	vec3 diffuseColor = "+r.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );",i.code,"	vec3 specular = "+i.result+";",n.code,"	float shininess = max( 0.0001, "+n.result+" );","	float specularStrength = 1.0;"),l&&h.push(l.code,"#ifdef ALPHATEST","if ( "+l.result+" <= ALPHATEST ) discard;","#endif"),h.push("material.diffuseColor = diffuseColor;"),h.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),h.push("vec3 ao = aoEnabled ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = ((reflectedLight.directDiffuse + reflectedLight.indirectDiffuse) * ao) + reflectedLight.directSpecular;");let c="1.0";this.mask&&(this.mask.analyze(e),c=`luminance(${this.mask.flow(e,"v3").result})`),h.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${a.result} * ${c} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${a.result} * ${c}, ${s.result} );
				}
				`),o&&h.push(o.code,`outgoingLight = spe_blend(outgoingLight, ${o.result}, 1.0, SPE_BLENDING_NORMAL);`),l?h.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${l.result} );`):h.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),u&&h.push(`gl_FragColor.a *= ${u.result};`),h.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=h.join(`
`)}return t}},tRe=class{constructor(e=1e3*10){this.timeout=e,this.cache=new Map,this.head={data:null,time:0,src:null,next:null,prev:null},this.tail={data:null,time:1/0,src:null,next:null,prev:null},this.hasClean=!1,this.head.next=this.tail,this.tail.prev=this.head}log(...e){}remove(e){let t=this.cache.get(e);t&&(this.dispose(e,t.data),this.cache.delete(e),t.prev.next=t.next,t.next.prev=t.prev)}scheduleCleanup(){this.hasClean||(this.log("scheduled cleanup"),this.hasClean=!0,setTimeout(()=>{this.hasClean=!1,this.log("cleaning");let e=Date.now(),t=this.head.next;for(;t.time<e-this.timeout;)this.dispose(t.src,t.data),this.cache.delete(t.src),t=t.next,t.prev=this.head,this.head.next=t;this.head.next!==this.tail?this.scheduleCleanup():this.log("no more cleanup")},this.timeout+1e3))}has(e){var t;return(t=this.cache.get(e))==null?void 0:t.data}load(e){let t=Date.now(),r=this.cache.get(e);return r===void 0?(r={data:this.create(e),src:e,time:t,next:null,prev:null},this.cache.set(e,r)):(r.time=t,r.prev.next=r.next,r.next.prev=r.prev),r.prev=this.tail.prev,r.next=this.tail,this.tail.prev.next=r,this.tail.prev=r,this.scheduleCleanup(),r.data}},rRe=class extends tRe{create(e){return URL.createObjectURL(new Blob([e]))}dispose(e,t){URL.revokeObjectURL(t)}},NA;function iRe(e){return typeof e=="string"?e:(NA||(NA=new rRe),NA.load(e))}var nRe=class{constructor(e,t){this.data=e,this.cache=t,this.refCount=0}deref(){this.refCount,this.refCount-=1,this.refCount===0&&(this.cache.remove(this),this.dispose())}dispose(){this.refCount}},aRe=class{constructor(){this.cache=new Map}remove(e){this.cache.delete(e.data)}load(e){let t=this.cache.get(e);return t===void 0&&(t=this.create(e),this.cache.set(e,t)),t.refCount+=1,t}},yq=class extends nRe{constructor(e,t){super(e,t.imageHolderCache),this.data=e,this.shared=t,this.loaded=!1,this.isVideo=!1,this.isVideo=e.type==="video",this.updateSrc(e.data)}async updateSrc(e){if(typeof document>"u")return;this.disposeTextures(),this.loaded=!1;let t=()=>{this.loaded=!0;let i=[1e3,1001,1002];for(let n of i){let a=this[n];a&&(a.image=this.img,a.needsUpdate=!0)}this.shared.requestRender()};if(this.isVideo){if(this.img=document.createElement("video"),this.img.preload="auto",this.img.playsInline=!0,this.img.currentTime=.01,typeof e!="string"){var r=new FileReader;r.readAsDataURL(new Blob([e],{type:"video/mp4"}));let i;await new Promise(n=>{r.onloadend=a=>{var s;i=(s=a.target)==null?void 0:s.result,n(null)}}),this.img.src=i}else this.img.src=e;this.img.onloadeddata=()=>{t()}}else this.img=new Image,this.img.src=iRe(e),this.img.onload=t}getTexture(e){let t=this[e];if(t)return t;{let r;return this.isVideo?r=new nwe(this.img,void 0,e,e):r=new Mn(this.img,void 0,e,e),this.loaded&&(r.needsUpdate=!0),this[e]=r,r}}disposeTextures(){var e,t,r;(e=this[1e3])==null||e.dispose(),this[1e3]=void 0,(t=this[1001])==null||t.dispose(),this[1001]=void 0,(r=this[1002])==null||r.dispose(),this[1002]=void 0}dispose(){super.dispose(),this.disposeTextures()}},sf=class extends yq{};function sRe(e,t){var r=cRe(t);return r.formatToParts?lRe(r,e):uRe(r,e)}var oRe={year:0,month:1,day:2,hour:3,minute:4,second:5};function lRe(e,t){try{for(var r=e.formatToParts(t),i=[],n=0;n<r.length;n++){var a=oRe[r[n].type];a>=0&&(i[a]=parseInt(r[n].value,10))}return i}catch(s){if(s instanceof RangeError)return[NaN];throw s}}function uRe(e,t){var r=e.format(t).replace(/\u200E/g,""),i=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(r);return[i[3],i[1],i[2],i[4],i[5],i[6]]}var zA={};function cRe(e){if(!zA[e]){var t=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:"America/New_York",year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),r=t==="06/25/2014, 00:00:00"||t==="‎06‎/‎25‎/‎2014‎ ‎00‎:‎00‎:‎00";zA[e]=r?new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}return zA[e]}function xq(e,t,r,i,n,a,s){var o=new Date(0);return o.setUTCFullYear(e,t,r),o.setUTCHours(i,n,a,s),o}var GU=36e5,hRe=6e4,FA={timezone:/([Z+-].*)$/,timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-]\d{2}):?(\d{2})$/};function bq(e,t,r){var i,n;if(!e||(i=FA.timezoneZ.exec(e),i))return 0;var a;if(i=FA.timezoneHH.exec(e),i)return a=parseInt(i[1],10),WU(a)?-(a*GU):NaN;if(i=FA.timezoneHHMM.exec(e),i){a=parseInt(i[1],10);var s=parseInt(i[2],10);return WU(a,s)?(n=Math.abs(a)*GU+s*hRe,a>0?-n:n):NaN}if(pRe(e)){t=new Date(t||Date.now());var o=r?t:dRe(t),l=w3(o,e),u=r?l:fRe(t,l,e);return-u}return NaN}function dRe(e){return xq(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}function w3(e,t){var r=sRe(e,t),i=xq(r[0],r[1]-1,r[2],r[3]%24,r[4],r[5],0).getTime(),n=e.getTime(),a=n%1e3;return n-=a>=0?a:1e3+a,i-n}function fRe(e,t,r){var i=e.getTime(),n=i-t,a=w3(new Date(n),r);if(t===a)return t;n-=a-t;var s=w3(new Date(n),r);return a===s?a:Math.max(a,s)}function WU(e,t){return-23<=e&&e<=23&&(t==null||0<=t&&t<=59)}var $U={};function pRe(e){if($U[e])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:e}),$U[e]=!0,!0}catch{return!1}}var mRe=pd($ge(),1),YU=pd(Yge(),1),gRe=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/,vRe=gRe,UA=36e5,qU=6e4,yRe=2,Ya={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,plainTime:/:/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:vRe};function xRe(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(e===null)return new Date(NaN);var r=t||{},i=r.additionalDigits==null?yRe:(0,mRe.default)(r.additionalDigits);if(i!==2&&i!==1&&i!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]")return new Date(e.getTime());if(typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]")return new Date(e);if(!(typeof e=="string"||Object.prototype.toString.call(e)==="[object String]"))return new Date(NaN);var n=bRe(e),a=wRe(n.date,i),s=a.year,o=a.restDateString,l=_Re(o,s);if(isNaN(l))return new Date(NaN);if(l){var u=l.getTime(),h=0,c;if(n.time&&(h=SRe(n.time),isNaN(h)))return new Date(NaN);if(n.timeZone||r.timeZone){if(c=bq(n.timeZone||r.timeZone,new Date(u+h)),isNaN(c))return new Date(NaN)}else c=(0,YU.default)(new Date(u+h)),c=(0,YU.default)(new Date(u+h+c));return new Date(u+h+c)}else return new Date(NaN)}function bRe(e){var t={},r=Ya.dateTimePattern.exec(e),i;if(r?(t.date=r[1],i=r[3]):(r=Ya.datePattern.exec(e),r?(t.date=r[1],i=r[2]):(t.date=null,i=e)),i){var n=Ya.timeZone.exec(i);n?(t.time=i.replace(n[1],""),t.timeZone=n[1].trim()):t.time=i}return t}function wRe(e,t){var r=Ya.YYY[t],i=Ya.YYYYY[t],n;if(n=Ya.YYYY.exec(e)||i.exec(e),n){var a=n[1];return{year:parseInt(a,10),restDateString:e.slice(a.length)}}if(n=Ya.YY.exec(e)||r.exec(e),n){var s=n[1];return{year:parseInt(s,10)*100,restDateString:e.slice(s.length)}}return{year:null}}function _Re(e,t){if(t===null)return null;var r,i,n,a;if(e.length===0)return i=new Date(0),i.setUTCFullYear(t),i;if(r=Ya.MM.exec(e),r)return i=new Date(0),n=parseInt(r[1],10)-1,QU(t,n)?(i.setUTCFullYear(t,n),i):new Date(NaN);if(r=Ya.DDD.exec(e),r){i=new Date(0);var s=parseInt(r[1],10);return CRe(t,s)?(i.setUTCFullYear(t,0,s),i):new Date(NaN)}if(r=Ya.MMDD.exec(e),r){i=new Date(0),n=parseInt(r[1],10)-1;var o=parseInt(r[2],10);return QU(t,n,o)?(i.setUTCFullYear(t,n,o),i):new Date(NaN)}if(r=Ya.Www.exec(e),r)return a=parseInt(r[1],10)-1,KU(t,a)?XU(t,a):new Date(NaN);if(r=Ya.WwwD.exec(e),r){a=parseInt(r[1],10)-1;var l=parseInt(r[2],10)-1;return KU(t,a,l)?XU(t,a,l):new Date(NaN)}return null}function SRe(e){var t,r,i;if(t=Ya.HH.exec(e),t)return r=parseFloat(t[1].replace(",",".")),jA(r)?r%24*UA:NaN;if(t=Ya.HHMM.exec(e),t)return r=parseInt(t[1],10),i=parseFloat(t[2].replace(",",".")),jA(r,i)?r%24*UA+i*qU:NaN;if(t=Ya.HHMMSS.exec(e),t){r=parseInt(t[1],10),i=parseInt(t[2],10);var n=parseFloat(t[3].replace(",","."));return jA(r,i,n)?r%24*UA+i*qU+n*1e3:NaN}return null}function XU(e,t,r){t=t||0,r=r||0;var i=new Date(0);i.setUTCFullYear(e,0,4);var n=i.getUTCDay()||7,a=t*7+r+1-n;return i.setUTCDate(i.getUTCDate()+a),i}var ERe=[31,28,31,30,31,30,31,31,30,31,30,31],MRe=[31,29,31,30,31,30,31,31,30,31,30,31];function wq(e){return e%400===0||e%4===0&&e%100!==0}function QU(e,t,r){if(t<0||t>11)return!1;if(r!=null){if(r<1)return!1;var i=wq(e);if(i&&r>MRe[t]||!i&&r>ERe[t])return!1}return!0}function CRe(e,t){if(t<1)return!1;var r=wq(e);return!(r&&t>366||!r&&t>365)}function KU(e,t,r){return!(t<0||t>52||r!=null&&(r<0||r>6))}function jA(e,t,r){return!(e!=null&&(e<0||e>=25)||t!=null&&(t<0||t>=60)||r!=null&&(r<0||r>=60))}function ARe(e,t,r){var i=xRe(e,r),n=bq(t,i,!0),a=new Date(i.getTime()-n),s=new Date(0);return s.setFullYear(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()),s.setHours(a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds()),s}function Xa(e,t){return t.color(e)}function ZU(e=new Date,t){let r=t.format,i=e.getSeconds(),n=e;t&&t.timeZone!==null&&(n=ARe(new Date,t.timeZone));let a=n.getHours(),s=n.getMinutes(),o;t.format12h24h==="12ampm"&&(o=a>=12?"PM":"AM");let l=a;t.format12h24h!=="24"&&(l=a%12,l===0&&(l=12));let u,h;switch(r){case"HH:mm:ss":u=[l,s,i];break;case"HH:mm":u=[l,s];break;case"HH":u=[l],o=void 0;break;case"mm":u=[s],o=void 0;break;case"ss":u=[i],o=void 0;break;case"year":h=n.getFullYear();break;case"month":h=n.getMonth()+1;break;case"dayOfYear":h=Math.floor((n.getTime()-new Date(n.getFullYear(),0,0).getTime())/864e5);break;case"dayOfMonth":h=n.getDate();break;case"secondOfDay":h=a*60*60+s*60+i;break;default:console.error("Unknown time format",r),h=0;break}return u!==void 0?{textValue:u,suffix:o}:h}function TRe(e,t){switch(e.type){case"fresnel":return ORe(e,t);case"gradient":return IRe(e,t);case"depth":return RRe(e,t);case"normal":return kRe(e,t);case"noise":return LRe(e,t);case"rainbow":return BRe(e,t);case"toon":return NRe(e,t);case"outline":return zRe(e,t);case"transmission":return FRe(e,t);case"color":return DRe(e,t);case"pattern":return URe(e,t)}}function PRe(e){return{type:e.type}}function Tl(e,t){let{alpha:r,mode:i,isMask:n}=e,a=typeof r=="string"?(Number(t.getVariable(r))??100)/100:r;return{...PRe(e),alpha:a,mode:i,isMask:n}}function DRe(e,t){return{...Tl(e,t),color:Xa(e.color,t)}}function ORe(e,t){let{bias:r,scale:i,intensity:n,factor:a,color:s}=e;return{...Tl(e,t),color:Xa(s,t),bias:r,scale:i,intensity:n,factor:a}}function IRe(e,t){let{gradientType:r,smooth:i,colors:n,steps:a,angle:s,offset:o,morph:l}=e;return{...Tl(e,t),gradientType:r,smooth:i,colors:n.map(u=>new Wt(u[0],u[1],u[2],u[3])),num:n.length,steps:a,offset:new re(...o),morph:new re(...l),angle:s}}function RRe(e,t){let{gradientType:r,near:i,far:n,isVector:a,isWorldSpace:s,origin:o,direction:l,colors:u,steps:h,smooth:c}=e;return{...Tl(e,t),gradientType:r,near:i,far:n,isVector:a,isWorldSpace:s,origin:new T(...o),direction:l?new T(...l):new T(1,0,0),colors:u.map(d=>d!==void 0?new Wt(d[0],d[1],d[2],d[3]):new Wt(0,0,0,0)),steps:h.slice(0,u.length),smooth:c}}function kRe(e,t){let{cnormal:r}=e;return{...Tl(e,t),cnormal:new T(r[0],r[1],r[2])}}function LRe(e,t){return{...Tl(e,t),scale:e.scale,move:e.move,fA:new re(...e.fA),fB:new re(...e.fB),size:new T(...e.size),distortion:new re(...e.distortion),colorA:Xa(e.colorA,t),colorB:Xa(e.colorB,t),colorC:Xa(e.colorC,t),colorD:Xa(e.colorD,t),noiseType:e.noiseType,voronoiStyle:e.voronoiStyle,highCut:e.highCut,lowCut:e.lowCut,smoothness:e.smoothness,seed:e.seed,quality:e.quality}}function BRe(e,t){return{...Tl(e,t),filmThickness:e.filmThickness,movement:e.movement,wavelengths:new T(...e.wavelengths),noiseStrength:e.noiseStrength,noiseScale:e.noiseScale,offset:new T(...e.offset)}}function NRe(e,t){return{...Tl(e,t),positioning:e.positioning,colors:e.colors.map(r=>new Wt(r[0],r[1],r[2],r[3])),num:e.colors.length,steps:e.steps,source:new T(...e.source),isWorldSpace:e.isWorldSpace,noiseStrength:e.noiseStrength,noiseScale:e.noiseScale,shadowColor:Xa(e.shadowColor,t),offset:new T(...e.offset)}}function zRe(e,t){return{...Tl(e,t),outlineColor:Xa(e.outlineColor,t),contourColor:Xa(e.contourColor,t),outlineWidth:e.outlineWidth,contourWidth:e.contourWidth,outlineThreshold:e.outlineThreshold,contourThreshold:e.contourThreshold,outlineSmoothing:e.outlineSmoothing,contourFrequency:e.contourFrequency,contourDirection:new T(...e.contourDirection),positionalLines:e.positionalLines,compensation:e.compensation}}function FRe(e,t){return{...Tl(e,t),thickness:e.thickness,ior:e.ior,roughness:e.roughness}}function URe(e,t){return{...Tl(e,t),style:e.style,projection:e.projection,axis:e.axis,blending:e.blending,offset:new re(...e.offset),colorA:Xa(e.colorA,t),colorB:Xa(e.colorB,t),frequency:new re(...e.frequency),size:e.size,variation:e.variation,smoothness:e.smoothness,zigzag:e.zigzag,rotation:e.rotation,vertical:new re(...e.vertical),horizontal:new re(...e.horizontal),sides:e.sides}}var qS=class extends As{},_q={noise:["noiseType"],texture:["projection","axis","side"],video:["projection","axis","side"],displace:["noiseType"],light:["roughnessMap","bumpMap"],depth:["smooth","isWorldSpace","gradientType","isVector"],pattern:["style","projection","axis"]},Sq={depth:["colors"]};function jRe(e,t,r){var a,s;if(t==="isMask")return!0;let i=_q[e.type],n=Sq[e.type];if(n!==void 0){let o=e.color;if(n.includes(t)){let l=(s=(a=o[t])==null?void 0:a.value)==null?void 0:s.length;if(l!==void 0&&l!==r.length)return!0}}return i!==void 0?i.includes(t):!1}function Eq(e,t,r){let i=r.uniforms[`f${r.id}_texture`];if(!i)return!1;let n=!1,a=e;if("image"in a){let s=a.image,o=t.image(s),l=i;l.image instanceof sf||l.image.deref(),l.image=o}if("video"in a){let s=a.video,o=t.video(s),l=i;l.image instanceof sf||l.image.deref(),l.image=o}if("wrapping"in a){let s=i;s.wrap=a.wrapping}if("repeat"in a||"offset"in a){let s="mat",o=r.uniforms[`f${r.id}_${s}`];"repeat"in a&&(o.repeat=a.repeat),"offset"in a&&(o.offset=a.offset),o.updateMatrix()}return n}function VRe(e,t,r,i){let n=!1;for(let[a,s]of Object.entries(e)){if(a==="bumpMap"||a==="roughnessMap"){n=!0;continue}if(!a||s===void 0)continue;if(Cq(a,r,i,t)){a==="visible"&&r.type==="light"&&(n=!0);continue}r.visible=i.visible;let o=r.uniforms[`f${r.id}_${a}`];if(o&&!(o instanceof _k))switch(n=n||jRe(r,a,s),o.constructor){case Bi:if(typeof s=="string"){let l=t.getColor(s);l&&(o.value=l);break}else{let l=s;o.value instanceof qS?o.value=new As(l.r,l.g,l.b,l.a):o.setRGBA(l);break}case Ju:if(typeof s=="string"){let l=t.getColor(s);l&&(o.value=l);break}else{let l=s;o.value instanceof qS?o.value=new As(l.r,l.g,l.b,l.a):o.value.setRGBA(l.r,l.g,l.b,l.a);break}case ea:{let l=s;o.value.setX(l[0]),o.value.setY(l[1]);break}case vo:{let l=s;o.value.setX(l[0]),o.value.setY(l[1]),o.value.setZ(l[2]);break}case sc:{Eq(s,t,r);break}case Hd:{o.value=s.map(l=>new Wt(...l));break}default:{o.value=s;break}}}return n}var S1=(e,t)=>(typeof e=="string"?Math.max(0,Math.min(1,Number(t.getVariable(e)??100)/100)):e)??1,Mf=class{constructor(e,t,r,i,n){this.id=e,this.uuid=t,this.data=r,this.uniforms={};for(let a in i)this.uniforms[`f${this.id}_${a}`]=i[a];for(let a in r)Cq(a,this,r,n)}get type(){return this.data.type}static create(e,t,r,i){if(r.type==="light")return ec.createLigherLayer(e,t,r,i);if(r.type==="texture"||r.type==="video"){let n=r.type==="texture"?i.image(r.texture.image):i.video(r.texture.video),a=new y3(n,r.texture.wrapping),s=new $Ie(n),o=new YIe(r.texture.repeat,r.texture.offset),l=new nt(r.crop?1:0),u=new ei(r.projection??0),h=new ei(["x","y","z"].indexOf(r.axis)??0),c=new ei(r.side??0),d=new ea(r.size?new re(r.size[0],r.size[1]):new re(100,100)),f=new nt(r.blending??0),m=new nt(S1(r.alpha,i)),p=new ei(r.mode??0),g=new $a(r.isMask??!1),v=new Sk(a,s,l,u,h,c,d,f,o,m,p,g),y=new hi(v.calpha,"f");return new Di(e,t,r,{texture:a,textureSize:s,crop:l,projection:u,axis:h,side:c,size:d,blending:f,mat:o,alpha:m,mode:p,isMask:g},v,p,y,g,i)}else if(r.type==="matcap"){let n=i.image(r.texture.image),a=new y3(n,r.texture.wrapping),s=new nt(S1(r.alpha,i)),o=new ei(r.mode??0),l=new $a(r.isMask??!1),u=new nq(a,s,o,l),h=new hi(u.calpha,"f");return new Di(e,t,r,{texture:a,alpha:s,mode:o,isMask:l},u,o,h,l,i)}else if(r.type==="displace")if(r.displacementType==="noise"){let n=new vo(new T(...r.offset)),a=new nt(r.scale??10),s=new nt(r.intensity??8),o=new nt(r.movement??1),l=new ei(r.noiseType??0),u=new ei(r.voronoiStyle??0),h=new nt(r.smoothness??.5),c=new nt(r.seed??0),d=new nt(r.highCut??1),f=new nt(r.lowCut??0),m=new ei(r.quality??1),p=new gq(s,o,n,u,h,c,d,f,m,a,l);return new Mq(e,t,r,{offset:n,scale:a,intensity:s,movement:o,noiseType:l,voronoiStyle:u,smoothness:h,seed:c,highCut:d,lowCut:f,quality:m},p,i)}else throw new Error;else return WRe(e,t,r,i)}updateByOp(e,t,r){let i=e;if(i.path[0]===void 0){if(i.type===0)return"type"in i.props||"category"in i.props||"visible"in i.props?(r.scene.markNeedsUpdateRendererDirty(),!0):VRe(i.props,r.shared,this,t)}else if(i.path[0]==="texture")return"texture"in t||"video"in t?Eq(i.props,r.shared,this):!0;return!1}dispose(){if(HRe(this)){let e=this.uniforms[`f${this.id}_texture`];if(!e)return!1;let t=e;t.image instanceof sf||t.image.deref()}}hasValueByKey(e){return this.uniforms[e]!==void 0}hasValue(e){return this.hasValueByKey(`f${this.id}_${e}`)}setValue(e,t){let r=`f${this.id}_${e}`;this.hasValueByKey(r)&&t!==void 0&&(this.uniforms[r].value=t)}getNode(e){let t=`f${this.id}_${e}`;if(this.hasValueByKey(t))return this.uniforms[t]}getValue(e){let t=`f${this.id}_${e}`;if(this.hasValueByKey(t))return this.uniforms[t].value}getName(e){let t=/f\d+_(.*)/.exec(e);if(t&&t.length>1)return t[1];console.log(`Layer.getName: error ${e}`)}getNames(){let e=[];for(let t in this.uniforms){let r=this.getName(t);r&&e.push(r)}return e}},Di=class extends Mf{constructor(e,t,r,i,n,a,s,o,l){super(e,t,r,i,l),this.params=i,this.color=n,this.mode=a,this.alpha=s,this.isMask=o}},Mq=class extends Mf{constructor(e,t,r,i,n,a){super(e,t,r,i,a),this.position=n}},ec=class extends Mf{constructor(e,t,r,i,n,a){super(e,t,r,n,a),this.node=i}static createLigherLayer(e,t,r,i){let n,a=new nt(S1(r.alpha,i)),s=new ei(r.mode),o=new nt(r.bumpMapIntensity),l=new nt(S1(r.alphaOverride,i)),u;if(!r.visible)n=new vq,u={};else if(r.category==="lambert"){n=new KIe;let h=new Bi(i.color(r.emissive)??0),c=new $a(r.occlusion??!0);u={emissive:h,occlusion:c},n.emissive=h,n.occlusion=c}else if(r.category==="toon"){n=new eRe;let h=new nt(r.shininess??30),c=new Bi(i.color(r.specular)??1118481);u={shininess:h,specular:c},n.shininess=h,n.specular=c}else if(r.category==="physical"){n=new JIe;let h=new nt(r.roughness??.3),c=new nt(r.metalness??0),d=new nt(r.reflectivity??.5),f=new $a(r.occlusion??!0);u={roughness:h,metalness:c,reflectivity:d,occlusion:f},n.roughness=h,n.metalness=c,n.reflectivity=d,n.occlusion=f}else{n=new ZIe;let h=new nt(r.shininess??30),c=new Bi(r.specular!==void 0?i.color(r.specular)??1118481:1118481),d=new $a(r.occlusion??!0);u={shininess:h,specular:c,occlusion:d},n.shininess=h,n.specular=c,n.occlusion=d}return n.alpha=new nt(1),n.shadingAlpha=a,n.shadingBlend=s,n.bumpMapIntensity=o,n.alphaOverride=l,u.alpha=n.shadingAlpha,u.mode=n.shadingBlend,u.bumpMapIntensity=n.bumpMapIntensity,u.alphaOverride=n.alphaOverride,new ec(e,t,r,n,u,i)}get category(){return this.node.category}};function HRe(e){let t=e instanceof Mf?e.type:e;return t==="texture"||t==="video"||t==="displace_map"||t==="matcap"}function co(e){return{alpha:new nt(e.alpha??1),mode:new ei(e.mode??0),isMask:new $a(e.isMask??!1)}}function GRe(e,t,r,i,n){switch(e.type){case"color":{let a=new Bi(i.color??Vo),s=co(i),o=new x3(a,s.alpha),l=new hi(o.calpha,"f");return new Di(t,r,e,{color:a,...s},o,s.mode,l,s.isMask,n)}case"fresnel":{let a=new Bi(i.color??16777215),s=new nt(i.bias??.1),o=new nt(i.scale??1),l=new nt(i.intensity??2),u=new nt(i.factor??1),h=co(i),c=new qIe(a,s,o,l,u,h.alpha,h.mode,h.isMask),d=new hi(c.calpha,"f");return new Di(t,r,e,{color:a,bias:s,scale:o,intensity:l,factor:u,...h},c,h.mode,d,h.isMask,n)}case"rainbow":{let a=new nt(i.filmThickness??30),s=new nt(i.movement??0),o=new vo(i.wavelengths??new T(0,0,0)),l=new nt(i.noiseStrength??0),u=new nt(i.noiseScale??1),h=new vo(i.offset??new T(0,0,0)),c=co(i),d=new cq(a,s,o,l,u,h,c.alpha,c.isMask),f=new hi(d.calpha,"f");return new Di(t,r,e,{filmThickness:a,movement:s,wavelengths:o,noiseStrength:l,noiseScale:u,offset:h,...c},d,c.mode,f,c.isMask,n)}case"transmission":{let a=new nt(i.thickness??10),s=new nt(i.ior??1.5),o=new nt(i.roughness??.5),l=Ct.transmissionSize,u=Ct.transmissionRenderTarget,h=Ct.transmissionRenderTargetDepth,c=window.innerWidth,d=window.innerHeight,f=c>=d?new ea(d/c,1):new ea(1,c/d),m=co(i),p=new pq(a,s,o,l,u,h,f,m.alpha),g=new hi(p.calpha,"f");return new Di(t,r,e,{thickness:a,ior:s,roughness:o,aspectRatio:f,...m},p,m.mode,g,m.isMask,n)}case"toon":{let a=new ei(i.positioning??0),s;i.colors?s=new Hd(i.colors.length,i.colors):(s=new Hd(10,new Wt(0,0,0,1)),s.value[1]=new Wt(1,1,1,1));let o;i.steps?o=new Vd(i.steps.length,i.steps):(o=new Vd(10,1),o.value[0]=0);let l=new vo(i.source??new T(0,0,0)),u=new $a(i.isWorldSpace??!0),h=new nt(i.noiseStrength??0),c=new nt(i.noiseScale??1),d=new Ju(i.shadowColor),f=new vo(i.offset??new T(0,0,0)),m=co(i),p=new dq(a,s,o,l,u,h,c,d,f,m.alpha),g=new hi(p.calpha,"f");return new Di(t,r,e,{positioning:a,colors:s,steps:o,source:l,isWorldSpace:u,noiseStrength:h,noiseScale:c,shadowColor:d,offset:f,...m},p,m.mode,g,m.isMask,n)}case"outline":{let a=new Bi(i.outlineColor??16777215),s=new Bi(i.contourColor??16777215),o=new nt(i.outlineWidth??.1),l=new nt(i.contourWidth??.1),u=new nt(i.outlineThreshold??.1),h=new nt(i.contourThreshold??.1),c=new nt(i.outlineSmoothing??.1),d=new nt(i.contourFrequency??.1),f=new vo(i.contourDirection??new T(0,1,0)),m=new $a(i.positionalLines??!1),p=new $a(i.compensation??!0),g=Ct.normalRenderTarget,v=Ct.normalRenderTargetDepth,y=Ct.pixelRatioNode,x=Ct.resolution,b=co(i),_=new oq(a,s,o,l,u,h,c,d,f,m,p,x,g,v,y,b.alpha),w=new hi(_.calpha,"f");return new Di(t,r,e,{outlineColor:a,contourColor:s,outlineWidth:o,contourWidth:l,outlineThreshold:u,contourThreshold:h,outlineSmoothing:c,contourFrequency:d,contourDirection:f,positionalLines:m,compensation:p,...b},_,b.mode,w,b.isMask,n)}case"depth":{let a=new ei(i.gradientType??0),s=new $a(i.smooth??!1),o=new nt(i.near??50),l=new nt(i.far??200),u=new nt(i.isVector??1),h=new nt(i.isWorldSpace??0),c=new vo(i.origin??new T),d=new vo(i.direction??new T),f;i.colors?f=new Hd(i.colors.length,i.colors):(f=new Hd(2,new Wt(0,0,0,1)),f.value[1]=new Wt(1,1,1,1));let m;i.steps?m=new Vd(i.steps.length,i.steps):(m=new Vd(2,1),m.value[0]=0);let p=co(i),g=new eq(a,s,o,l,u,h,c,d,f,m,p.alpha,p.isMask),v=new hi(g.calpha,"f");return new Di(t,r,e,{gradientType:a,smooth:s,near:o,far:l,isVector:u,isWorldSpace:h,origin:c,direction:d,colors:f,steps:m,...p},g,p.mode,v,p.isMask,n)}case"noise":{let a=new nt(i.scale??1),s=new vo(i.size??new T(100,100,100)),o=new nt(i.move??1),l=new ea(i.fA??new re(1.7,9.2)),u=new ea(i.fB??new re(8.3,2.8)),h=new ea(i.distortion??new re(1,1)),c=new Ju(i.colorA),d=new Ju(i.colorB),f=new Ju(i.colorC),m=new Ju(i.colorD),p=new ei(i.noiseType??0),g=new ei(i.voronoiStyle??0),v=new nt(i.highCut??1),y=new nt(i.lowCut??0),x=new nt(i.smoothness??.5),b=new nt(i.seed??.5),_=new ei(i.quality??1),w=co(i),E=new aq(a,s,o,l,u,h,c,d,f,m,w.alpha,p,w.isMask,g,v,y,x,b,_),S=new hi(E.calpha,"f");return new Di(t,r,e,{scale:a,size:s,move:o,fA:l,fB:u,distortion:h,colorA:c,colorB:d,colorC:f,colorD:m,noiseType:p,...w,voronoiStyle:g,highCut:v,lowCut:y,smoothness:x,seed:b,quality:_},E,w.mode,S,w.isMask,n)}case"normal":{let a=new vo(i.cnormal??new T(1,1,1)),s=co(i),o=new JY(a,s.alpha),l=new hi(o.calpha,"f");return new Di(t,r,e,{cnormal:a,...s},o,s.mode,l,s.isMask,n)}case"gradient":{let a=new ei(i.gradientType??0),s=new $a(i.smooth??!1),o;i.colors?o=new Hd(i.colors.length,i.colors):(o=new Hd(10,new Wt(0,0,0,1)),o.value[1]=new Wt(1,1,1,1));let l;i.steps?l=new Vd(i.steps.length,i.steps):(l=new Vd(10,1),l.value[0]=0);let u=new ea(i.offset??new re(0,0)),h=new ea(i.morph??new re(0,0)),c=new nt(i.angle??0),d=co(i),f=new rq(a,s,o,l,u,h,c,d.alpha,d.isMask),m=new hi(f.calpha,"f");return new Di(t,r,e,{gradientType:a,smooth:s,colors:o,steps:l,offset:u,morph:h,angle:c,...d},f,d.mode,m,d.isMask,n)}case"pattern":{let a=new ei(i.style??0),s=new ei(i.projection??0),o=new ei(["x","y","z"].indexOf(i.axis)??0),l=new nt(i.blending??0),u=new ea(i.offset??new re(0,0)),h=new Ju(i.colorA),c=new Ju(i.colorB),d=new ea(i.frequency??new re(10,10)),f=new nt(i.size??.5),m=new nt(i.variation??0),p=new nt(i.smoothness??.5),g=new nt(i.zigzag??0),v=new nt(i.rotation??0),y=new ea(i.vertical??new re(0,1)),x=new ea(i.horizontal??new re(0,1)),b=new ei(i.sides??6),_=co(i),w=new lq(a,s,o,l,u,h,c,d,f,m,p,g,v,y,x,b,_.alpha,_.isMask),E=new hi(w.calpha,"f");return new Di(t,r,e,{style:a,projection:s,axis:o,blending:l,offset:u,colorA:h,colorB:c,frequency:d,size:f,variation:m,smoothness:p,zigzag:g,rotation:v,vertical:y,horizontal:x,sides:b,..._},w,_.mode,E,_.isMask,n)}default:{let a=new Bi(1,0,0,1),s=co(i),o=new x3(a,s.alpha),l=new hi(o.calpha,"f");return new Di(t,r,e,{color:a,...s},o,s.mode,l,s.isMask,n)}}}function WRe(e,t,r,i){let n=TRe(r,i);return GRe(r,e,t,n,i)}function Cq(e,t,r,i){if(r.type==="displace"&&(e==="intensity"||e==="visible")){let n=t.uniforms[`f${t.id}_intensity`];return n?(n.value=r.intensity*(r.visible?1:0),n):void 0}if(r.type!=="displace"&&(e==="alpha"||e==="visible")){let n=t.uniforms[`f${t.id}_alpha`];if(!n)return;if(n.value=S1(r.alpha,i)*(r.visible?1:0),r.type==="outline"&&e==="visible"){let a=t.uniforms[`f${t.id}_compensation`];a&&(a.value=r.compensation&&r.visible)}return n}}function XS(e,t){let r=0,i=e.layers.find(n=>n.data.type==="light");if(i){let n=i.data,a=Number(t.getVariable(n.alphaOverride));if((typeof n.alphaOverride=="string"?a/100:n.alphaOverride)<1)return!0}for(let n of e.layers){if(n.data.type!=="displace"&&n.data.isMask)return!0;if(n.data.type!=="displace"&&"alpha"in n.data&&n.data.type!=="light"&&n.data.type!=="fresnel"&&n.data.type!=="texture"&&n.data.type!=="matcap"&&n.data.type!=="rainbow"&&n.data.type!=="outline"&&n.data.type!=="pattern"){let a=n.data.visible?n.data.alpha:0;if(typeof a=="string"&&(a=Math.max(0,Math.min(1,Number(t.getVariable(a)??100)/100))),a===1&&n.data.type==="depth"||n.data.type==="gradient"){for(let s of n.data.colors)if(s[3]<1){a=s[3];break}}else if(a===1&&n.data.type==="noise"){let s=t.color(n.data.colorA).a,o=t.color(n.data.colorB).a,l=t.color(n.data.colorC).a,u=t.color(n.data.colorD).a,h=Math.min(s,Math.min(o,Math.min(l,u)));h<1&&(a=h)}r+=(1-r)*a}}return r<1}var nd=class extends oi{constructor(){super(void 0),this.flatShading=!1,this.needsJitter=!0,this.cacheKey="",this.fog=!0,this.dithering=!0,this.vertexColors=!0,this.transparent=!0}customProgramCacheKey(){return this.cacheKey}},$Re=class extends nd{constructor(e,t,r,i){super(),this.flatShading=e,this.side=t,this.wireframe=r,this.root=i}updateAfterBuild(){let e=this.root;this.lights=e.lights,this.vertexShader=e.vertexShader,this.fragmentShader=e.fragmentShader,this.defines=e.defines,this.uniforms=e.uniforms,this.extensions=e.extensions,this.transparent=e.transparent,this.cacheKey=e.customProgramCacheKey()+"flat"+this.flatShading+this.side}onBeforeCompile(e,t){this.root.onBeforeCompile(e)}get data(){return this.root.data}get category(){return this.root.category}get hasAO(){return this.root.hasAO}getFlavor(e,t,r){return this.root.getFlavor(e,t,r)}get layers(){return this.root.layers}get fragment(){return this.root.fragment}getLayersOfType(e){return this.root.getLayersOfType(e)}getLayerByUuid(e){return this.root.getLayerByUuid(e)}updateByOp(e,t,r){this.root.updateByOp(e,t,r)}nodeMaterialDispose(){this.root.nodeMaterialDispose()}},Mk=class extends nd{constructor(e,t,r=!0){super(),this.data=e,this.allowVariableSaves=r,this.layerIdGen=0,this.flavors=[],this.masks={},this.type="NodeMaterial",this.updaters=[],this.reset0(e,t)}get nodeMaterial(){return this}getFlavor(e,t,r){let i=r?6:(e?3:0)+t;if(i===0)return this;this.flavors===void 0&&(this.flavors=[]),i-=1;let n=this.flavors[i];return n===void 0&&(n=new $Re(e,t,r,this),this.flavors[i]=n,n.flatShading=e,n.side=t,n.updateAfterBuild()),n}get fragment(){return this.lightLayer.node}get category(){return this.lightLayer.category}get hasAO(){var e;return((e=this.lightLayer.getNode("occlusion"))==null?void 0:e.value)??!1}reset(e,t){this.data!==e&&this.reset0(e,t)}reset0(e,t){this.data=e;let r=e.layers??wa.defaultTwoLayerData("phong").layers;try{this.layers=r.map(i=>Mf.create(this.layerIdGen++,i.id,i.data,t.shared))}catch{this.layers=[]}this.layers.reverse(),this.name=e.name??"Untitled Material",this.onUpdate(t.shared),this.transparent=XS(e,t.shared),this.saveVariableLocations(t)}saveVariableLocations(e){if(!this.allowVariableSaves)return;let t=this.data.layers.find(r=>r.data.type==="light");t&&e.shared.getVariable(t.data.alphaOverride,["material",this.uuid,"alphaOverride"]),this.data.layers.forEach(r=>{"alpha"in r.data&&typeof r.data.alpha=="string"&&e.shared.getVariable(r.data.alpha,["material",this.uuid,"layer",r.id,"alpha"])})}getLayersOfType(e){return this.layers.filter(t=>t.type===e)}getLayerByUuid(e){return this.layers.find(t=>t.uuid===e)}onUpdate(e){this.cacheKey=this.computeCacheKey(),this.lightLayer=this.layers.find(t=>t instanceof ec),this.lightLayer===void 0&&(this.lightLayer=new ec(0,"",{...hs.defaultData("light","phong"),visible:!1},new vq,{},e)),this.dispose();for(let t of this.flavors)t&&t.dispose();this.applyTextureMaps(),this.applyMasks(),this.blendColors(),this.blendAfterColors(),this.blendPositions()}applyTextureMaps(){let e=this.layers.find(n=>n instanceof ec);if(!e)return;let t=e.data,r=t.bumpMap,i=t.roughnessMap;e.node.bumpMap=void 0,e.node.roughnessMap=void 0;for(let n=0;n<this.layers.length;++n){let a=this.layers[n];a instanceof Di&&a.color instanceof Sk&&(a.uuid===r&&(e.node.bumpMap=a.color),a.uuid===i&&(e.node.roughnessMap=a.color))}}updateByOp(e,t,r){if(t!==void 0?this.data=t:t=this.data,this.transparent=XS(t,r.shared),e.path[0]==="layers"){this.data=t;let i=r.shared,n=e.path[1];if(n===void 0){if(this.layers.reverse(),e.type===4){let a=Mf.create(this.layerIdGen++,e.id,e.data,r.shared);this.layers.splice(e.localIndex,0,a),r.scene.markNeedsUpdateRendererDirty()}else if(e.type===5)this.layers.splice(e.localIndex,1)[0].dispose(),r.scene.markNeedsUpdateRendererDirty();else if(e.type===6){let a=this.layers.findIndex(o=>o.uuid===e.id),s=this.layers[a];this.layers.splice(a,1),this.layers.splice(e.localIndex,0,s),r.scene.markNeedsUpdateRendererDirty()}this.layers.reverse(),this.onUpdate(r.shared)}else{e.type===0&&e.props.occlusion!==void 0&&r.scene.markNeedsUpdateRendererDirty();let a=this.layers.find(s=>s.uuid===n);if(a){let s=t.layers.data(n);if(a.updateByOp({...e,path:e.path.slice(2)},s,r)){let o=Mf.create(this.layerIdGen++,n,s,i);this.layers.splice(this.layers.findIndex(l=>l.uuid===n),1,o),this.onUpdate(r.shared)}}}}else this.reset(t,r)}applyMasks(){for(let e=0;e<this.layers.length;++e){let t=this.layers[e];t instanceof Di?t.color.mask=void 0:t instanceof ec&&(t.node.mask=void 0)}for(let e=0;e<this.layers.length;++e){let t=this.layers[e];if(t instanceof Di&&t.isMask.value&&t.data.visible&&e>0){let r=e-1,i=this.layers[r];i instanceof ec?i.node.mask=new us(t.color,t.alpha,us.MUL):i instanceof Di&&(i.isMask.value||(i.color.mask=new us(t.color,t.alpha,us.MUL)))}}}blendColors(){let e=this.layers.findIndex(r=>r instanceof Di),t=this.layers.findIndex(r=>r instanceof ec);if(e!==-1&&e<t){let r=this.layers[e].color;for(let i=e+1;i<t;++i){let n=this.layers[i];if(n instanceof Di){if(n.isMask.value)continue;r=new HU(r,n.color,n.alpha,n.mode)}}this.fragment.color=r}else this.fragment.color=void 0}blendAfterColors(){let e=new hi("outgoingLight","f"),t=this.layers.findIndex(r=>r instanceof ec);if(this.layers.length>t+1){for(let r=t+1;r<this.layers.length;++r){let i=this.layers[r];if(i instanceof Di){if(i.isMask.value)continue;e=new HU(e,i.color,i.alpha,i.mode)}}this.fragment.afterColor=e}else this.fragment.afterColor=void 0}blendPositions(){let e=this.layers.filter(t=>t instanceof Mq);if(e.length>0){let t=e[0].position;for(let r=1;r<e.length;++r)e[r]&&(t=new us(t,e[r].position,us.ADD),t=new us(t,new nt(.5).setReadonly(!0),us.MUL));this.fragment.position=t}else this.fragment.position=void 0}getDefines(){return this.defines}getUniforms(){return this.uniforms}getVertexShader(){return this.vertexShader}getFragmentShader(){return this.fragmentShader}onBeforeCompile(e){this.build(),e.defines=this.defines,e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.extensionDerivatives=this.extensions.derivatives===!0,e.extensionFragDepth=this.extensions.fragDepth===!0,e.extensionDrawBuffers=this.extensions.drawBuffers===!0,e.extensionShaderTextureLOD=this.extensions.shaderTextureLOD===!0}clampUniformsForPreview(e,t){let r=(i,n,a)=>Math.min(Math.max(i,n),a);for(let i of this.layers)if(i.type==="displace"){let n=r(i.uniforms[`f${i.id}_intensity`].value,e,t);i.uniforms[`f${i.id}_intensity`].value=n}}computeCacheKey(){let e="[";for(let{data:t}of this.data.layers)if(t.type==="light")e+=`"${t.visible?t.category.toUpperCase():"Basic"}"`;else{let r=(_q[t.type]??[]).map(o=>t[o]),i=(Sq[t.type]??[]).map(o=>{var l;return((l=t[o])==null?void 0:l.length)??0}),n=[...r,...i],a="isMask"in t&&t.isMask,s=`"${t.type}-${t.visible}-${a}"`;n.length?e+=`[${s}, "${n.join('","')}"],`:e+=s}return e=e.slice(0,-1)+"]",e}updateFrame(e){for(let t=0;t<this.updaters.length;++t)e.updateNode(this.updaters[t])}build(){let e=new WIe;e.needsJitter=this.needsJitter,this.lights=this.lightLayer.data.visible,e.build(this.fragment,this.fragment),this.vertexShader=e.getCode("vertex"),this.fragmentShader=e.getCode("fragment"),this.defines=e.defines,this.uniforms=e.uniforms,this.extensions=e.extensions,this.updaters=e.updaters;for(let t of this.flavors)t&&t.updateAfterBuild();return this}nodeMaterialDispose(){this.layers.forEach(e=>e.dispose()),super.dispose();for(let e of this.flavors)e&&e.dispose()}assetsLoaded(){for(let e of this.layers)if(e instanceof Di){let t=e.params.texture;if(t instanceof y3&&!t.image.loaded)return!1}return!0}getHash(){let e="{";return e+='"fragment":'+this.fragment.getHash(),e+="}",e}};Object.defineProperties(nd.prototype,{properties:{get:function(){return this.fragment.properties}}});var _3=class extends Mk{constructor(e,t,r){super(e,t,!1),this.uuid=r,this.allowVariableSaves=!0,this.saveVariableLocations(t)}},YRe=pd(qge()),JU=new Map;function qRe(e){if(typeof e=="string")return e;let t=JU.get(e);return t||(t={url:URL.createObjectURL(new Blob([e]))},JU.set(e,t)),t.url}var Y0=class{constructor({src:e,volume:t,delay:r,loop:i}){this._volume=1,this.delay=0,this._loop=1,this.loopsRemaining=0,this._status="stopped",this.onEnd=()=>{this.loopsRemaining===1/0?this.replay():this.loopsRemaining>1?(this.replay(),this.loopsRemaining--):(this._status="stopped",this.loopsRemaining=this._loop)};let n;typeof e=="string"?n={src:e}:n={src:qRe(e),format:"wav"},this.sound=new YRe.Howl(n),this.sound.on("end",this.onEnd),this.src=e,t!==void 0&&(this.volume=t),r!==void 0&&(this.delay=r),i!==void 0&&(this.loop=i)}get status(){return this._status}get volume(){return this._volume}set volume(e){this._volume=e,this.sound.volume(e)}get loop(){return this._loop}set loop(e){this._loop=e,this.loopsRemaining=e}replay(){this.clearDelay(),this.delayTimerId=window.setTimeout(()=>{this.sound.play(),this.clearDelay()},this.delay)}fade(e,t=1e3){e?(this.sound.volume(this._volume),this.clearFade(),this.fadeTimerId=window.setTimeout(()=>{this.sound.fade(this._volume,0,t),this.clearFade()},e)):this.sound.fade(this._volume,0,t)}on(e,t,r){this.sound.on(e,t,r)}off(e,t,r){this.sound.off(e,t,r)}play(){this._status==="playing"||this.sound.playing()||(this._status==="paused"?(this.sound.seek()===0?this.replay():this.sound.play(),this._status="playing"):this._status==="stopped"&&(this.replay(),this._status="playing"))}pause(){this._status==="playing"&&(this.sound.pause(),this.clearFade(),this.clearDelay(),this._status="paused")}stop(){this.sound.stop(),this.loopsRemaining=this._loop,this.clearFade(),this.clearDelay(),this._status="stopped"}clearFade(){this.fadeTimerId&&(clearTimeout(this.fadeTimerId),delete this.fadeTimerId)}clearDelay(){this.delayTimerId&&(clearTimeout(this.delayTimerId),delete this.delayTimerId)}dispose(e=!1){this.off(),this.stop(),this.clearFade(),this.clearDelay()}},XRe=class{constructor(){this.type="ShapePath",this.color=new At,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new pS,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){var r;return(r=this.currentPath)==null||r.lineTo(e,t),this}quadraticCurveTo(e,t,r,i){var n;return(n=this.currentPath)==null||n.quadraticCurveTo(e,t,r,i),this}bezierCurveTo(e,t,r,i,n,a){var s;return(s=this.currentPath)==null||s.bezierCurveTo(e,t,r,i,n,a),this}splineThru(e){var t;return(t=this.currentPath)==null||t.splineThru(e),this}toShapes(){let e={ORIGIN:0,DESTINATION:1,BETWEEN:2,LEFT:3,RIGHT:4,BEHIND:5,BEYOND:6},t={loc:e.ORIGIN,t:0};function r(f,m,p,g){let v=f.x,y=m.x,x=p.x,b=g.x,_=f.y,w=m.y,E=p.y,S=g.y,C=(b-x)*(_-E)-(S-E)*(v-x),M=(y-v)*(_-E)-(w-_)*(v-x),P=(S-E)*(y-v)-(b-x)*(w-_),I=C/P,k=M/P;if(P===0&&C!==0||I<=0||I>=1||k<0||k>1)return null;if(C===0&&P===0){for(let L=0;L<2;L++)if(i(L===0?p:g,f,m),t.loc===e.ORIGIN){let O=L===0?p:g;return{x:O.x,y:O.y,t:t.t}}else if(t.loc===e.BETWEEN){let O=+(v+t.t*(y-v)).toPrecision(10),F=+(_+t.t*(w-_)).toPrecision(10);return{x:O,y:F,t:t.t}}return null}else{for(let F=0;F<2;F++)if(i(F===0?p:g,f,m),t.loc===e.ORIGIN){let z=F===0?p:g;return{x:z.x,y:z.y,t:t.t}}let L=+(v+I*(y-v)).toPrecision(10),O=+(_+I*(w-_)).toPrecision(10);return{x:L,y:O,t:I}}}function i(f,m,p){let g=p.x-m.x,v=p.y-m.y,y=f.x-m.x,x=f.y-m.y,b=g*x-y*v;if(f.x===m.x&&f.y===m.y){t.loc=e.ORIGIN,t.t=0;return}if(f.x===p.x&&f.y===p.y){t.loc=e.DESTINATION,t.t=1;return}if(b<-Number.EPSILON){t.loc=e.LEFT;return}if(b>Number.EPSILON){t.loc=e.RIGHT;return}if(g*y<0||v*x<0){t.loc=e.BEHIND;return}if(Math.sqrt(g*g+v*v)<Math.sqrt(y*y+x*x)){t.loc=e.BEYOND;return}let _;g!==0?_=y/g:_=x/v,t.loc=e.BETWEEN,t.t=_}function n(f,m){let p=[],g=[];for(let v=1;v<f.length;v++){let y=f[v-1],x=f[v];for(let b=1;b<m.length;b++){let _=m[b-1],w=m[b],E=r(y,x,_,w);E!==null&&p.find(S=>S.t<=E.t+Number.EPSILON&&S.t>=E.t-Number.EPSILON)===void 0&&(p.push(E),g.push(new re(E.x,E.y)))}}return g}function a(f,m,p){let g=new re;m.getCenter(g);let v=[];return p.forEach(y=>{y.boundingBox.containsPoint(g)&&n(f,y.points).forEach(x=>{v.push({identifier:y.identifier,isCW:y.isCW,point:x})})}),v.sort((y,x)=>y.point.x-x.point.x),v}function s(f,m,p,g,v){(v==null||v==="")&&(v="nonzero");let y=new re;f.boundingBox.getCenter(y);let x=[new re(p,y.y),new re(g,y.y)],b=a(x,f.boundingBox,m);b.sort((M,P)=>M.point.x-P.point.x);let _=[],w=[];b.forEach(M=>{M.identifier===f.identifier?_.push(M):w.push(M)});let E=_[0].point.x,S=[],C=0;for(;C<w.length&&w[C].point.x<E;)S.length>0&&S[S.length-1]===w[C].identifier?S.pop():S.push(w[C].identifier),C++;if(S.push(f.identifier),v==="evenodd"){let M=S.length%2===0,P=S[S.length-2];return{identifier:f.identifier,isHole:M,for:P}}else if(v==="nonzero"){let M=!0,P=null,I=null;for(let k=0;k<S.length;k++){let L=S[k];m[L]&&(M?(I=m[L].isCW,M=!1,P=L):I!==m[L].isCW&&(I=m[L].isCW,M=!0))}return{identifier:f.identifier,isHole:M,for:P}}else console.warn('fill-rule: "'+v+'" is currently not implemented.')}let o=0,l=999999999,u=-999999999,h=[];this.subPaths.forEach(f=>{let m=f.getPoints(),p=-999999999,g=999999999,v=-999999999,y=999999999;for(let x=0;x<m.length;x++){let b=m[x];b.y>p&&(p=b.y),b.y<g&&(g=b.y),b.x>v&&(v=b.x),b.x<y&&(y=b.x)}u<=v&&(u=v+1),l>=y&&(l=y-1),m.length&&h.push({curves:f.curves,points:m,isCW:L7.isClockWise(m),identifier:o++,boundingBox:new u_e(new re(y,g),new re(v,p))})});let c=h.map(f=>{var m;return s(f,h,l,u,(m=this.userData)==null?void 0:m.style.fillRule)}),d=[];return h.forEach(f=>{let m=c[f.identifier];if(m&&!m.isHole){let p=new mS;p.curves=f.curves,c.filter(g=>(g==null?void 0:g.isHole)&&g.for===f.identifier).forEach(g=>{if(g){let v=h[g.identifier],y=new pS;y.curves=v.curves,p.holes.push(y)}}),d.push(p)}}),d}},Aq,e6=new Promise(e=>{Aq=e}),t6=!1,Kb;function QRe(){if(t6)return;if(Kb)return Kb;async function e(){let t=await $1(()=>import("./opentype-fc28cde9.js"),[]);Aq(t),t6=!0}return Kb=e(),Kb}var KRe=class{async load(e,t,r=()=>{}){let{load:i}=await e6;i(e,(n,a)=>{n||!a?r(n??"Something went wrong"):t(a)})}async parse(e){let{parse:t,Bidi:r}=await e6;try{let i=t(e),n=new r,a=s=>i.charToGlyphIndex(s.char);return n.registerModifier("glyphIndex",null,a),n.applyFeatures(i,i.defaultRenderOptions.features),{font:i,bidi:n}}catch(i){console.error(i)}}};async function ZRe(e){return await(await fetch(e)).arrayBuffer()}var JRe=new KRe;async function r6(e){let t,r,i=!1;if(e.url?(t=await ZRe(e.url),r=e.url,i=e.url.startsWith("/")):e.data&&(t=e.data.buffer.slice(e.data.byteOffset,e.data.byteOffset+e.data.byteLength)),t){let n=await JRe.parse(t);if(n)return{font:n.font,url:r,intercepted:i,arr:t,bidi:n.bidi}}}function eke(e,t){return t.state.glyphIndex===e||t.state.fina===e||t.state.medi===e||t.state.init===e}var tke=class{constructor(e){this._arrayBuffer=new ArrayBuffer(1),this._isLoaded=!1,this._intercepted=!1,this._isUserFont=e.isUserFont??!1,this._loadingPromise=r6(e).then(t=>{t&&(this._arrayBuffer=t.arr,this._url=t.url,this.font=t.font,this._intercepted=t.intercepted,this._isLoaded=!0,this._bidi=t.bidi)})}update(e){this._isLoaded=!1,this._isUserFont=e.isUserFont??!1,this._loadingPromise=r6(e).then(t=>{t&&(this._arrayBuffer=t.arr,this._url=t.url,this.font=t.font,this._intercepted=t.intercepted,this._isLoaded=!0,this._bidi=t.bidi)})}get url(){return this._url}get intercepted(){return this._intercepted}get isLoaded(){return this._isLoaded}get loadingPromise(){return this._loadingPromise}reverseLigaturesTable(e,t,r){if(!this._bidi)return[];let i=this._bidi;i.getTextGlyphs(t);let n=i.tokenizer.tokens,a=[],s=0,o=r.length===n.length;for(let l=0;l<r.length;l++){let u=r[l].index,h=String.fromCharCode(r[l].unicode),c=n[s];if(eke(u,c)||o)a.push({char:h,index:u,replacements:[c.state.glyphIndex],replacementChars:[c.char]}),s++;else{let d=c.char,f="",m=[c.state.glyphIndex],p=[],g=!1;for(;!g;)s++,f=t.charAt(s),d+=f,m.push(e.charToGlyphIndex(f)),p=e.stringToGlyphs(d),p.length===1&&p[0].index===u&&(g=!0),s>t.length&&(g=!0);a.push({char:h,index:u,replacements:m,replacementChars:Array.from(d)}),s++}}return a}generateShapes(e,t){if(!this._isLoaded)return;let r=this.font,i=t.fontSize/this.unitsPerEm,n=t.fontSize*t.lineHeight,a=e.map(v=>this.getTextWidth(v,t)),s=t.width,o=this.getCharWidth(`
`,t),l=t.horizontalAlign===1?o:0,u=this.computeSpaceWidthForLine(e,0,t),h=this.getLineInitialOffsetX(a[0],s,t.horizontalAlign,e[0],o),c=this.getLineInitialOffsetY(n,e.length,t.height,i,t.verticalAlign),d=[],f=e.map(v=>[]),m=e.map(v=>[]),p;for(let v=0;v<e.length;v++){let y=e[v],x={features:{liga:!0}},b=[];try{b=r.stringToGlyphs(y,x)}catch(w){console.warn(w)}h=this.getLineInitialOffsetX(a[v],s,t.horizontalAlign,y,o);let _=[];try{_=this.reverseLigaturesTable(r,y,b)}catch(w){console.warn(w)}u=this.computeSpaceWidthForLine(e,v,t);for(let w=0;w<b.length;w++){let E=b[w],S=E.index===0?`
`:E.unicode?String.fromCharCode(E.unicode):void 0,C=_[w],M=0,P=0;w===0&&t.horizontalAlign===2&&E.leftSideBearing!==void 0&&(P=-E.leftSideBearing*i),p&&(M=r.getKerningValue(E,p)*i),h+=P+M;let I=0;if(S===`
`)I=l;else if(S===" ")I=u;else{let k=this.createPath(E,i,h,c,t);k&&(I=k.offsetX-(M+P),d.push(k.path))}if(C.replacements.length===1)m[v].push([h,c]),f[v].push(I);else{let k=C.replacements.map(z=>(r.glyphs.get(z).advanceWidth??0)*i),L=k.reduce((z,B)=>z+=B,0),O=k.map(z=>z/L),F=h;for(let z=0;z<O.length;z++){let B=I*O[z];m[v].push([F,c]),f[v].push(B),F+=B}}h+=I,p=E}c-=n}let g=[];for(let v=0,y=d.length;v<y;v++)g.push(...d[v].toShapes());return{shapes:g,charWidths:f,lineWidths:a,charCoords:m}}get isUserFont(){return this._isUserFont}get arrayBuffer(){return this._arrayBuffer}get ascender(){var e;return((e=this.font)==null?void 0:e.ascender)??0}get descender(){var e;return((e=this.font)==null?void 0:e.descender)??0}get familyName(){var e;return((e=this.font)==null?void 0:e.names.fontFamily)??""}get subfamilyName(){var e;return((e=this.font)==null?void 0:e.names.fontSubfamily)??""}get unitsPerEm(){var e;return((e=this.font)==null?void 0:e.unitsPerEm)??1}getLineInitialOffsetX(e,t,r,i,n){return(r===3||r===2)&&i.indexOf(`
`)>=0&&(e-=n),r===3?t*.5-e*.5:r===2?t-e:0}getLineInitialOffsetY(e,t,r,i,n){let a=t*e,s=Math.abs(this.ascender-this.descender)*i,o=e-s,l=-this.ascender*i-o/2;return n===3?-(r-a-l):n===2?-(r*.5-a*.5-l):l}createPath(e,t,r,i,n){var l;let a=e.getPath(r,-i,n.fontSize,{kerning:!1,letterSpacing:n.letterSpacing});if(!a){console.error('THREE.Font: character "'+e+'" does not exists in font family '+this.familyName+".");return}let s=new XRe,o=(e.advanceWidth??1)*t;if(e)for(let u of a.commands){let h=(l=s.currentPath)==null?void 0:l.currentPoint;if(!(h&&u.type!=="Z"&&h.x===u.x&&-h.y===u.y))switch(u.type){case"M":s.moveTo(u.x,-u.y);break;case"L":s.lineTo(u.x,-u.y);break;case"Q":s.quadraticCurveTo(u.x1,-u.y1,u.x,-u.y);break;case"C":s.bezierCurveTo(u.x1,-u.y1,u.x2,-u.y2,u.x,-u.y);break}}return s.subPaths.forEach(u=>{let h=rke(u.curves);h!==void 0&&u.currentPoint.distanceTo(h)>0&&u.lineTo(h.x,h.y)}),{offsetX:o+n.fontSize*n.letterSpacing,path:s}}getCharWidth(e,t){var r;return((r=this.font)==null?void 0:r.getAdvanceWidth(e,t.fontSize,{kerning:!0,letterSpacing:t.letterSpacing}))??0}getTextWidth(e,t){var r;return((r=this.font)==null?void 0:r.getAdvanceWidth(e,t.fontSize,{kerning:!0,letterSpacing:t.letterSpacing}))??0}computeSpaceWidthForLine(e,t,r){let i=this.getCharWidth(" ",r),n=e[t];if(n){let a=this.countSpaces(n.trimEnd());if(r.horizontalAlign===4&&t<e.length-1&&a){let s=r.width,o=this.getTextWidth(n,r);return(s-(o-a*i))/a}}return i}countSpaces(e){return(e.match(/ /g)||[]).length}};function rke(e){if(e.length){let t=e[0];if(t instanceof _l)return t.v1;if(t instanceof hl||t instanceof rd)return t.v0}}var ike=class{constructor(){this.objects=new Map,this.unreachable=new Set}getCached(e){return this.objects.get(e)}get size(){return this.objects.size}get(e,t,r){let i=this.objects.get(e);return i===void 0?(i=this.createObject(e,t,r),this.objects.set(e,i)):i.isShared=!0,i}forceDelete(e){let t=this.objects.get(e);t&&(this.disposeObject(t),this.objects.delete(e))}mutateIfUnique(e,t){let r=this.objects.get(e);if(r&&r.isShared!==!0)return this.objects.delete(e),this.objects.set(t,r),r}startGc(){this.unreachable=new Set(this.objects.keys())}markAsReachable(e,t){let r=this.objects.get(e);t===r&&this.unreachable.delete(e)}endGc(){this.unreachable.forEach(e=>{this.disposeObject(this.objects.get(e)),this.objects.delete(e)}),this.unreachable.clear()}dispose(){this.objects.forEach(e=>{this.disposeObject(e)}),this.objects.clear()}},i6=class extends ike{constructor(e){super(),this.flatShading=e}disposeObject(e){e.dispose()}createObject(e,t,r){let i=YS(e,t,this.flatShading,r);return i.computeBoundingSphere(),i}},nke={markNeedsUpdateRendererDirty:()=>{}},ake=class extends aRe{constructor(e){super(),this.shared=e}create(e){return new yq(e,this.shared)}},Ck=class{constructor(e,t={}){if(this.data=e,this.geometryCache=new i6(!0),this.geometryCache2=new i6(!1),this.imageHolderCache=new ake(this),this.thisContext={scene:nke,shared:this},this.deletedMaterial=new _3(wa.defaultTwoLayerData("phong"),this.thisContext,""),this.deletedImage=new sf(US.emptyImage,this),this.deletedVideo=new sf(RS.defaultVideo,this),this.materials={},this.images={},this.videos={},this.colors={},this.audios={},this.fonts={},this.variables={},this.mouseProperty=null,this.raycastProperty=null,this.requestRender=()=>{this._requestRender&&this._requestRender()},t.images)for(let[r,i]of Object.entries(t.images))this.addImage(r,i);if(t.videos)for(let[r,i]of Object.entries(t.videos))this.addVideo(r,i);if(t.audios)for(let[r,i]of Object.entries(t.audios))this.addAudio(r,i);this.reset(e)}setRequestRender(e){this._requestRender=e}setEntityOpContext(e){this.entityOpContext=e}reset(e,t=!1){this.resetLib(e.lib);for(let{id:r,data:i}of e.variables)this.addVariableHolder(r,i),t&&this.updateVariableHolder(r,i);for(let[r,i]of Object.entries(e.images))this.addImage(r,i);for(let[r,i]of Object.entries(e.videos))this.addVideo(r,i);for(let[r,i]of Object.entries(e.colors))this.addColor(r,i);for(let[r,i]of Object.entries(e.materials))this.addMaterial(r,i);for(let[r,i]of Object.entries(e.audios))this.addAudio(r,i);for(let[r,i]of Object.entries(e.fonts))this.addFont(r,i)}addMaterial(e,t){if(this.materials[e]){let r=this.materials[e];r.reset(t,this.thisContext),r.dispose()}else{let r=new _3(t,this.thisContext,e);this.materials[e]=r}}deleteMaterial(e){this.materials[e]&&(this.materials[e].nodeMaterialDispose(),delete this.materials[e])}getMaterial(e){return this.materials[e]}getMaterialOrDeletedPlaceholder(e){return this.materials[e]??this.deletedMaterial}material(e){return typeof e=="string"?this.getMaterialOrDeletedPlaceholder(e):e==null?(console.error("material is undefined or null"),this.deletedMaterial):new Mk(e,this.thisContext)}getMaterials(){return this.materials}addImage(e,t){return this.images[e]?(this.onColorOrImageUpdate&&this.onColorOrImageUpdate(),this.images[e].updateSrc(t.data),!0):(this.images[e]=new sf(t,this),!1)}deleteImage(e){let t=this.images[e];t&&(t.dispose(),delete this.images[e])}getDefaultImage(){return this.images.image_0}getImage(e){return this.images[e]??this.deletedImage}image(e){return typeof e=="string"?this.getImage(e):this.imageHolderCache.load(e)}addVideo(e,t){return this.videos[e]?(this.videos[e].updateSrc(t.data),!0):(this.videos[e]=new sf(t,this),!1)}deleteVideo(e){let t=this.videos[e];t&&(t.dispose(),delete this.videos[e])}getVideo(e){return this.videos[e]??this.deletedVideo}video(e){return typeof e=="string"?this.getVideo(e):this.imageHolderCache.load(e)}addColor(e,t){return this.colors[e]?(this.onColorOrImageUpdate&&this.onColorOrImageUpdate(),"a"in t?this.colors[e].setRGBA(t.r,t.g,t.b,t.a):this.colors[e].setRGBA(t.r,t.g,t.b,1),!0):("a"in t?this.colors[e]=new qS(t.r,t.g,t.b,t.a):this.colors[e]=new qS(t.r,t.g,t.b,1),!1)}updateColor(e,t){if(this.colors[e]){this.onColorOrImageUpdate&&this.onColorOrImageUpdate();let r=this.colors[e];return this.colors[e].r=t.r??r.r,this.colors[e].g=t.g??r.g,this.colors[e].b=t.b??r.b,this.colors[e].a=t.a??r.a,!0}return!1}deleteColor(e){this.colors[e]&&delete this.colors[e]}getColor(e){return this.colors[e]}color(e){let t;if(typeof e=="string"){let r=this.getColor(e);r?t=r:(console.warn("Tried to create color layer params with a color key that does not exist in the assets manager"),t=new As(0,0,0,0))}else return"a"in e?new As(e.r,e.g,e.b,e.a):new As(e.r,e.g,e.b,1);return t}addAudio(e,t){this.audios[e]=t}getAudio(e){let t=this.audios[e];if(t instanceof Y0)return t;{let r=new Y0({src:t.data});return this.audios[e]=r,r}}deleteAudio(e){let t=this.audios[e];t&&(t instanceof Y0&&t.dispose(),delete this.audios[e])}addFont(e,t){this.fonts[e]=new tke(t),this.fonts[e].loadingPromise.then(()=>this.requestRender())}getFont(e){return this.fonts[e]}deleteFont(e){this.fonts[e]&&delete this.fonts[e]}dispose(){Object.keys(this.materials).forEach(e=>this.deleteMaterial(e)),this._requestRender=void 0,Object.values(this.audios).forEach(e=>{e instanceof Y0&&e.dispose()}),this.audios={},this.geometryCache.dispose(),this.geometryCache2.dispose()}addVariableHolder(e,t){this.addVariable(e,t.value)}addVariable(e,t){return this.variables[e]===void 0?(this.variables[e]={value:t,locations:[]},!0):(this.variables[e].value=t,!1)}updateVariableHolder(e,t){this.updateVariable(e,t.value)}updateVariable(e,t){if(this.variables[e]===void 0)return!1;this.variables[e].value=t;let r=t;for(;typeof r=="string";)r=this.variables[r].value;let i=this.entityOpContext.scene;for(let n=this.variables[e].locations.length-1;n>=0;n--){let a=this.variables[e].locations[n];if(a[0]==="material"){let s=a[1];i.traverseMaterial(l=>{let u=l.root??l;u.uuid===s&&u.reset({...l.data},{scene:i,shared:this})});let o=this.materials[s];o&&o.reset({...o.data},{scene:i,shared:this})}else{let s=i.find(a[0]);if(s===void 0){this.variables[e].locations.splice(n,1);continue}if(a[1]!=="geometry"){for(let o=1;o<a.length-1;o++)s=s[a[o]];a[1]==="rotation"&&(r=bt.DEG2RAD*r),s[a[a.length-1]]=r}if(s=i.find(a[0]),pr.is(s)){if(a[1]==="position"||a[1]==="rotation"||a[1]==="scale")s.onVariableUpdate();else if(a[1]==="geometry"){let o=s;s.component&&(o=s.component);let l=o.dataPatched;o.chooseGeoemtryCache(this).forceDelete(l.geometry),o.createGeometryDelayed(this.entityOpContext),o.onVariableUpdate(!0),o.instances.forEach(u=>{let h=u.dataPatched;u.chooseGeoemtryCache(this).forceDelete(h.geometry),u.createGeometryDelayed(this.entityOpContext),u.onVariableUpdate(!0)})}}}}return!0}deleteVariable(e){this.variables[e]&&delete this.variables[e]}getVariable(e,t){var r,i,n;if(Array.isArray(e)){if(e[0]==="mouse")return((r=this.mouseProperty)==null?void 0:r[e[1]])??0;if(e[0]==="raycast")return((i=this.raycastProperty)==null?void 0:i[e[1]])??0;let a=this.entityOpContext.scene.find(e[0]);if(e[1]==="width"||e[1]==="height"||e[1]==="depth")return a.geometry.userData.parameters[e[1]];for(let s=1;s<e.length;s++)a=a[e[s]];return a}for(let a in this.variables){if(t===void 0)break;let s=this.variables[a],o=(n=s.locations)==null?void 0:n.findIndex(l=>vs.equal(l,t));o!==void 0&&o!==-1&&s.locations.splice(o,1)}if(typeof e=="string"){let a=e,s=e;do{if(s=a,this.variables[a]===void 0)break;a=this.variables[a].value}while(typeof a=="string");return t&&this.variables[s]!==void 0&&this.variables[s].locations.push(t),a}else return e}resetLib(e){for(let[t,r]of Object.entries(e.images))this.addImage(t,r.asset);for(let[t,r]of Object.entries(e.audios))this.addAudio(t,r.asset);for(let[t,r]of Object.entries(e.colors))this.addColor(t,r.asset);for(let[t,r]of Object.entries(e.fonts))this.addFont(t,r.asset);for(let[t,r]of Object.entries(e.materials))this.addMaterial(t,r.asset);for(let[t,r]of Object.entries(e.videos))this.addVideo(t,r.asset);for(let[t,r]of Object.entries(e.variables))this.addVariableHolder(t,r.asset)}updateLibByOp(e,t){e.path[0]==="images"?e.path.length===1&&e.type===1?this.addImage(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteImage(e.id):e.path[0]==="videos"?e.path.length===1&&e.type===1?this.addVideo(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteVideo(e.id):e.path[0]==="audios"?e.path.length===1&&e.type===1?this.addAudio(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteAudio(e.id):e.path[0]==="colors"?e.path.length===1&&e.type===1?this.addColor(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteColor(e.id):e.path[0]==="materials"?e.path.length===1&&e.type===1?this.addMaterial(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteMaterial(e.id):e.path[0]==="fonts"?e.path.length===1&&e.type===1?this.addFont(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteFont(e.id):e.path[0]==="variables"?e.path.length===1&&e.type===1?this.addVariableHolder(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteVariable(e.id):e.path[0]==="components"&&t.updateByLibOp(e,this)}updateByOp(e,t,r){this.data=t,e.path[0]==="images"?e.path.length===2&&e.type===0?e.props.data&&this.getImage(e.path[1]).updateSrc(e.props.data):e.path.length===1&&e.type===1?this.addImage(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteImage(e.id):e.path[0]==="videos"?e.path.length===2&&e.type===0?e.props.data&&this.getVideo(e.path[1]).updateSrc(e.props.data):e.path.length===1&&e.type===1?this.addVideo(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteVideo(e.id):e.path[0]==="audios"?e.path.length===2&&e.type===0?e.props.data&&this.addAudio(e.path[1],t.audios[e.path[1]]):e.path.length===1&&e.type===1?this.addAudio(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteAudio(e.id):e.path[0]==="colors"?e.path.length===2&&e.type===0?this.updateColor(e.path[1],e.props):e.path.length===1&&e.type===1?this.addColor(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteColor(e.id):e.path[0]==="materials"?e.path.length===1&&e.type===1?this.addMaterial(e.id,e.data):e.path.length===1&&e.type===2?this.deleteMaterial(e.id):e.path.length>1&&this.getMaterial(e.path[1]).updateByOp(qa.drop(e,2),t.materials[e.path[1]],{shared:this,scene:r}):e.path[0]==="fonts"?e.path.length===2&&e.type===0?this.updateFont(e.path[1],e,r):e.path.length===1&&e.type===1?this.addFont(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteFont(e.id):e.path[0]==="variables"?e.path.length===2&&e.type===0&&"value"in e.props?this.updateVariable(e.path[1],e.props.value):e.path.length===1&&e.type===4?this.addVariable(e.id,e.data.value):e.path.length===1&&e.type===5&&this.deleteVariable(e.id):e.path[0]==="lib"&&this.updateLibByOp(qa.drop(e,1),r)}updateFont(e,t,r){if(t.props.url){let i=this.getFont(e),n={...this.data.fonts[e],url:t.props.url};i.update(n),i.loadingPromise.then(()=>this.requestRender()),r.updateFont(e,this)}}};new Ck(Kl.emptyData());var Mv=class extends Os{updateByPatchedOp(e,t,r){if(super.updateByPatchedOp(e,t,r),iDe(e.path,["materials"])!==null&&e.type===0&&Array.isArray(this.material))for(let[i,n]of Object.entries(e.props)){let a=r.shared.material(n);this.material[Number(i)]=a}else if(Ao(e.path,["material"])&&this.material instanceof nd)"material"in t&&typeof t.material!="string"&&this.material.updateByOp(qa.drop(e,1),t.material,r);else if(Ao(e.path,["materials","*"])&&Array.isArray(this.material)){let i=e.path[1];if("materials"in t&&i<this.material.length){let n=t.materials[i];typeof n!="string"&&this.material[i].updateByOp(qa.drop(e,2),n,r)}}}get needsAO(){return this.material!==void 0?(Array.isArray(this.material)?this.material[0]:this.material).hasAO:!1}updateState(e,t){var i,n;super.updateState(e,t),e.castShadow!==void 0&&(this.castShadow=e.castShadow),e.receiveShadow!==void 0&&(this.receiveShadow=e.receiveShadow);let r=this.dataPatched;if(((i=e.geometry)==null?void 0:i.type)!=="NonParametricGeometry"&&"material"in e&&e.material!==void 0&&(this.disposeMaterial(),this.material=t.shared.material(e.material).getFlavor(r.flatShading,r.side,r.wireframe),t.scene.markNeedsUpdateRendererDirty()),((n=e.geometry)==null?void 0:n.type)==="NonParametricGeometry"&&("materials"in e&&e.materials!==void 0?(this.disposeMaterial(),this.material=e.materials.map(a=>t.shared.material(a).getFlavor(r.flatShading,r.side,r.wireframe)),t.scene.markNeedsUpdateRendererDirty()):"material"in e&&e.material!==void 0&&(this.disposeMaterial(),this.material=[t.shared.material(e.material).getFlavor(r.flatShading,r.side,r.wireframe)],t.scene.markNeedsUpdateRendererDirty())),e.flatShading!==void 0||e.wireframe!==void 0||e.side!==void 0)if(Array.isArray(this.material))for(let a=0;a<this.material.length;a++)this.material[a]=this.material[a].getFlavor(r.flatShading,r.side,r.wireframe);else this.material=this.material.getFlavor(r.flatShading,r.side,r.wireframe)}disposeMaterial(){this.material&&T$(this.material).forEach(e=>{e instanceof nd&&(e instanceof _3||e.nodeMaterialDispose())})}dispose(){this.disposeMaterial(),super.dispose()}},n6=new T,a6=new Wt,s6=new Wt,ske=new T,o6=new ze,Qa=class extends Mv{constructor(e,t,r){super(e,t),this.data=t,this.localGeometry=void 0,t.bindMode&&t.bindMatrix&&(this.isSkinnedMesh=!0,this.bindMode=t.bindMode,this.bindMatrix=new ze().fromArray(t.bindMatrix),this.bindMatrixInverse=new ze)}chooseGeoemtryCache(e){return e.geometryCache}markGeometryAsReachable(e){this.geometryCreateDeleyed instanceof wt&&this.chooseGeoemtryCache(e).markAsReachable(this.dataPatched.geometry,this.geometryCreateDeleyed)}get geometry(){if(this.localGeometry!==void 0)return this.localGeometry;if(this.geometryCreateDeleyed instanceof Ck){let e=this.geometryCreateDeleyed,t=this.chooseGeoemtryCache(e);this.geometryCreateDeleyed=t.get(this.dataPatched.geometry,e,this)}return this.geometryCreateDeleyed}set geometry(e){this.localGeometry=e}get is2DAndNoDepth(){let e=this.dataPatched.geometry;return BS.is2DParametricMesh(e.type)&&e.depth===0}get is2DType(){return BS.is2DParametricMesh(this.geometry.userData.type)}get isNonParametric(){return this.geometry.userData.type==="NonParametricGeometry"}updateByPatchedOp(e,t,r){super.updateByPatchedOp(e,t,r),Ao(e.path,["geometry"])&&this.updateByPatchedOpGeometry(qa.drop(e,1),t.geometry,r)}removeInteractionGeometry(){var e;(e=this.localGeometry)==null||e.dispose(),this.localGeometry=void 0}updateGeometryInteractions(e,t){var i;this.invalidateDownstreamBooleanData();let r=this.data.geometry.type;if(r==="NonParametricGeometry"||r==="SubdivGeometry"){let n=e;if(this.localGeometry===void 0){let u={...this.data.geometry,...n};this.localGeometry=YS(u,t,this.data.flatShading,this)}let a,s,o;n.scaleBaked?[a,s,o]=n.scaleBaked:{width:a,height:s,depth:o}=n;let l=this.localGeometry.userData;l.sxPrev!==void 0&&g3(this.localGeometry.attributes,a/l.sxPrev,s/l.syPrev,o/l.szPrev),l.sxPrev=a,l.syPrev=s,l.szPrev=o}else{let n={...this.data.geometry,...e};(i=this.localGeometry)==null||i.dispose(),this.localGeometry=YS(n,t,this.data.flatShading,this)}}refreshAttachedCloners(e){for(let t of this.attachedSurfaceCloners)e.scene.addPendingUpdateCloner(t.object)}refreshAttachedPaths(e){for(let t of this.attachedPaths)e.scene.addPendingCommand(()=>t.updateShape())}createGeometryDelayed(e){this.geometryCreateDeleyed=e.shared,this.refreshAttachedCloners(e),this.refreshAttachedPaths(e)}updateByPatchedOpGeometry(e,t,r){var n;let i=!1;e.type===0&&e.path.length===0&&Object.keys(e.props).includes("scaleBaked")&&this.geometryCreateDeleyed instanceof ja&&this.chooseGeoemtryCache(r.shared).mutateIfUnique(this.geometryCreateDeleyed.data,t)===this.geometryCreateDeleyed&&(i=!0,this.geometryCreateDeleyed.mutateDirectlyScaleBaked(t,e.props.scaleBaked),this.refreshAttachedCloners(r),this.refreshAttachedPaths(r)),i||((n=r.scene)==null||n.markGeometryCacheDirty(),this.createGeometryDelayed(r)),this.resetBBoxNeedsUpdate(),this.invalidateDownstreamBooleanData()}updateGeometryOnStateUpdate(e,t){this.createGeometryDelayed(t)}updateState(e,t){e.geometry!==void 0&&this.updateGeometryOnStateUpdate(e.geometry,t),super.updateState(e,t)}updateGeometryGroupsIfNeeded(){var e;Array.isArray(this.material)&&this.geometry.groups.length===0&&this.geometry.addGroup(0,Math.max(((e=this.geometry.getIndex())==null?void 0:e.count)??0,this.geometry.getAttribute("position").count),0)}updateEntityBoxSize(e,t){let r=this.geometry.userData.parameters;this.is2DType?e.set(0,0,r.depth*.5):this.isNonParametric?(e.setScalar(0),this.geometry.boundingSphere&&e.copy(this.geometry.boundingSphere.center),t.set(r.width,r.height,r.depth??0).multiplyScalar(.5)):e.setScalar(0),t.set(r.width,r.height,r.depth??0).multiplyScalar(.5)}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"&&this.bindMatrixInverse.copy(this.bindMatrix).invert()}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(e){let t=new Wt,r=this.geometry.attributes.skinWeight;for(let i=0,n=r.count;i<n;i++){t.fromBufferAttribute(r,i);let a=1/t.manhattanLength();a!==1/0?t.multiplyScalar(a):t.set(1,0,0,0),r.setXYZW(i,t.x,t.y,t.z,t.w)}}boneTransform(e,t){let r=this.skeleton;if(r===void 0)return;let i=this.geometry;a6.fromBufferAttribute(i.attributes.skinIndex,e),s6.fromBufferAttribute(i.attributes.skinWeight,e),n6.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let n=0;n<4;n++){let a=s6.getComponent(n);if(a!==0){let s=a6.getComponent(n);o6.multiplyMatrices(r.bones[s].matrixWorld,r.boneInverses[s]),t.addScaledVector(ske.copy(n6).applyMatrix4(o6),a)}}return t.applyMatrix4(this.bindMatrixInverse)}};function oke(e){var s,o;if(e.geometry.attributes.extrudeNormal||!e.geometry.attributes.position||!e.geometry.attributes.normal)return;let t=new Map,r=e.geometry.attributes,i=r.position.array,n=r.normal.array,a=new Float32Array(i.length);for(let l=0;l<i.length;l+=3){let u=`${i[l]}_${i[l+1]}_${i[l+2]}`,h=new T(n[l],n[l+1],n[l+2]);t.has(u)?(s=t.get(u))==null||s.normals.push(h):t.set(u,{normals:[h],result:new T})}t.forEach((l,u)=>{for(let h of l.normals)l.result.add(h);l.result.divideScalar(l.normals.length)});for(let l=0;l<i.length;l+=3){let u=`${i[l]}_${i[l+1]}_${i[l+2]}`,h=(o=t.get(u))==null?void 0:o.result;h&&(a[l]=h.x,a[l+1]=h.y,a[l+2]=h.z)}e.geometry.setAttribute("extrudeNormal",new it(a,3))}function lke(e){if(e.geometry.attributes.extrudeNormals||!e.geometry.attributes.position)return;let t=e.geometry.attributes.position.array,r=new Float32Array(t.length),i=new T;for(let n=0;n<t.length;n+=3)i.set(t[n],t[n+1],t[n+2]).normalize(),r[n]=i.x,r[n+1]=i.y,r[n+2]=i.z;e.geometry.setAttribute("extrudeNormal",new it(r,3))}function Ak(e){if(Array.isArray(e.material)){for(let t of e.material)if(t.getLayersOfType("outline").length===0)return}else if(!(e.material instanceof nd)||e.material.getLayersOfType("outline").length===0)return;e instanceof Qa&&e.is2DAndNoDepth?lke(e):oke(e)}function Tk(e){if(!e.geometry.attributes.position)return;let t=e.geometry.attributes.position.array,r=new Float32Array(t.length),i=parseInt(e.uuid.replace(/\D/g,"")),n=[bt.seededRandom(i),bt.seededRandom(i+1e4),bt.seededRandom(i+2e4)];for(let a=0;a<t.length;a++)r[a]=n[a%3];e.geometry.setAttribute("randomColor",new Bt(r,3))}xk.then(e=>{});var Nl=new Qi,f0=new T;function uke(e){let t=!1;return e.scene.objects.traverse((r,i)=>{i.type==="Mesh"&&i.geometry.type==="SubdivGeometry"&&(t=!0)}),t}var E1=class extends Qa{constructor(e,t,r){super(e,t,r),this.data=t,this.hiddenMatrixOld=new ze,this.smoothShading=!0,this.skipReactionUpdate=!1}chooseGeoemtryCache(e){return this.dataPatched.flatShading?e.geometryCache:e.geometryCache2}get subdivPointerNew(){return this.localGeometry!==void 0?this.subdivPointer:this.geometry.ensureSubdivPointer()}get originalGeometryNew(){return this.localGeometry!==void 0?this.originalGeometry:this.geometry.originalGeometry}get phongAngle(){return this.data.geometry.phongAngle??45}updateEntityBoxSize(e,t){let r=this.geometry.userData.parameters;e.copy(this.originalGeometryNew.boundingSphere.center),t.set(r.width,r.height,r.depth??0).multiplyScalar(.5)}createGeometryByControls(e){var a,s,o;if(this.skipReactionUpdate===!0)return;let t=(a=this.localGeometry)==null?void 0:a.uuid,{originalGeometry:r,subdividedGeometry:i,subdivPointer:n}=ja.build(e,this.subdivPointer,this.smoothShading,this.hasNonUniformScale?this.shearScale:void 0);this.subdivPointer=n,r!==void 0&&((s=this.originalGeometry)==null||s.dispose(),this.originalGeometry=r),i!==void 0&&((o=this.subdividedGeometry)==null||o.dispose(),this.subdividedGeometry=i??void 0),this.localGeometry=this.subdividedGeometry??this.originalGeometry,Ak(this),Tk(this),this.calcBoundingBox(),t&&(this.localGeometry.uuid=t)}updateState(e,t){if(super.updateState(e,t),e.flatShading!==void 0){let r=this.material;this.material=r.getFlavor(!1,r.side,r.wireframe),this.smoothShading=!e.flatShading,this.createGeometryDelayed(t)}}updateMesh(e=!1){ja.buildLevel(this.subdivPointer,!0,this.smoothShading?this.phongAngle:-1,this.originalGeometry,e&&this.hasNonUniformScale?this.shearScaleInv:void 0),this.subdividedGeometry&&ja.buildLevel(this.subdivPointer,!1,this.smoothShading?this.phongAngle:-1,this.subdividedGeometry,e&&this.hasNonUniformScale?this.shearScaleInv:void 0)}updateTopology(){this.originalGeometry.dispose(),this.originalGeometry=ja.buildLevel(this.subdivPointer,!0,this.smoothShading?this.phongAngle:-1),this.subdividedGeometry&&(this.subdividedGeometry.dispose(),this.subdividedGeometry=ja.buildLevel(this.subdivPointer,!1,this.smoothShading?this.phongAngle:-1)),this.localGeometry=this.subdividedGeometry??this.originalGeometry}raycast(e,t){let r=this.localGeometry;this.localGeometry=this.originalGeometryNew,Os.prototype.raycast.call(this,e,t),this.localGeometry=r}activateSVDCompensation(){!this.hasNonUniformScale||(this.matrix.copy(this.matrixWorldRigid),this.hiddenMatrixOld.copy(this.hiddenMatrix),this.hiddenMatrix.copy(this.parent.matrixWorld).invert())}deactivateSVDCompensation(){!this.hasNonUniformScale||(this.updateMatrix(),this.hasNonUniformScale=void 0,this.hiddenMatrix.copy(this.hiddenMatrixOld))}calcBoundingBox(){let e=this.originalGeometry;e.boundingSphere===null&&(e.boundingSphere=new Ds,this.subdividedGeometry&&(this.subdividedGeometry.boundingSphere=e.boundingSphere));let t=e.attributes.position,r=e.boundingSphere.center;Nl.setFromBufferAttribute(t),Nl.getCenter(r),e.boundingSphere.radius=r.distanceTo(Nl.max),isNaN(e.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this),Nl.getSize(f0),this.hasNonUniformScale&&f0.divide(this.scale);let i={width:f0.x,height:f0.y,depth:f0.z};return this.geometry.userData.parameters=i,i}updateBoundingSphere(e){let t=this.originalGeometry;Nl.min.set(e[0],e[2],e[4]),Nl.max.set(e[1],e[3],e[5]),this.hasNonUniformScale&&(Nl.min.applyMatrix4(this.shearScaleInv),Nl.max.applyMatrix4(this.shearScaleInv)),t.boundingSphere===null&&(t.boundingSphere=new Ds);let r=t.boundingSphere.center;Nl.getCenter(r),t.boundingSphere.radius=r.distanceTo(Nl.max)}freeSubdivPointer(){var e,t;this.subdivPointer&&(ja.freeSubdivPointer(this.subdivPointer),this.subdivPointer=0),this.localGeometry=void 0,(e=this.originalGeometry)==null||e.dispose(),(t=this.subdividedGeometry)==null||t.dispose()}dispose(){super.dispose(),this.freeSubdivPointer()}updateByPatchedOpGeometry(e,t,r){super.updateByPatchedOpGeometry(e,t,r),this.localGeometry&&this.createGeometryByControls(t)}},l6=-1,cke=1,hke={x:[1,0,0],"-x":[-1,0,0],y:[0,1,0],"-y":[0,-1,0],z:[0,0,1],"-z":[0,0,-1]},dke={polygon_center:0,edge:1,vertex:2},Zb=(e,t)=>(r,i)=>!t||r===0||e===0?0:e*i/100,Vt=(e,t)=>{let r=Math.abs(t),i=r*-1;return(e-l6)*(r-i)/(cke-l6)+i};function fke(e){let t=[],r={};for(var i=0,n=e.length;i<n;i++){var a=JSON.stringify(e[i].pos.map(s=>Math.round(s*1e4)/1e4));r[a]||(t.push(e[i]),r[a]=!0)}return t}var pke=new T,Jb=new T,mke=new T,gke=new T;function pg(e,t){let r=mke.fromArray(e),i=gke.fromArray(t);Jb.copy(i).sub(r);let n=Jb.length();return Jb.normalize().multiplyScalar(n*.5),pke.copy(r).add(Jb).toArray()}var Mo=new va,ew=new T,QS=new T,qd=new T;function vke(e){let t=[];for(let r=0;r<=e.index.count;r++)if(ew.fromArray(e.index.array,r*3),Mo.setFromAttributeAndIndices(e.attributes.position,ew.x,ew.y,ew.z),Mo.getNormal(QS),Mo.getMidpoint(qd),!(isNaN(qd.x)||isNaN(qd.y)||isNaN(qd.z))){let{a:i,b:n,c:a}=Mo,s=i.toArray(),o=n.toArray(),l=a.toArray(),u=i.distanceTo(n),h=n.distanceTo(a),c=a.distanceTo(i),d=pg(s,o),f=pg(o,l),m=pg(l,s),p=[u,h,c],g=Math.max(...p),v=p.filter(b=>Math.round(b)===Math.round(g)).length>1,y=[],x=Mo.getMidpoint(qd).toArray();g===u&&!v&&(y=[f,m,m],x=d),g===h&&!v&&(y=[d,m,m],x=f),g===c&&!v&&(y=[d,f,f],x=m),v&&(y=[d,f,m]),t.push({vertices:[s,o,l],faceCenters:y,midpoint:x,norm:Mo.getNormal(QS).toArray()})}return t}function yke(e){let t=[],{position:r}=e.attributes;for(let i=0;i<r.count;i++){Mo.setFromAttributeAndIndices(r,i*3,i*3+1,i*3+2),Mo.getNormal(QS),Mo.getMidpoint(qd);let n=Mo.a.toArray(),a=Mo.b.toArray(),s=Mo.c.toArray();t.push({vertices:[n,a,s],faceCenters:[pg(n,a),pg(a,s),pg(s,n)],midpoint:qd.toArray(),norm:QS.toArray()})}return t}var xke=4,bke=.5,VA=e=>.5*(1-Math.cos(e*Math.PI)),wke=class{constructor(){this.perlin=new Array(4095+1)}noise(e,t=0,r=0){if(this.perlin==null){this.perlin=new Array(4095+1);for(let g=0;g<4095+1;g++)this.perlin[g]=Math.random()}e<0&&(e=-e),t<0&&(t=-t),r<0&&(r=-r);let i=Math.floor(e),n=Math.floor(t),a=Math.floor(r),s=e-i,o=t-n,l=r-a,u,h,c=0,d=.5,f,m,p;for(let g=0;g<xke;g++){let v=i+(n<<4)+(a<<8);u=VA(s),h=VA(o),f=this.perlin[v&4095],f+=u*(this.perlin[v+1&4095]-f),m=this.perlin[v+16&4095],m+=u*(this.perlin[v+16+1&4095]-m),f+=h*(m-f),v+=256,m=this.perlin[v&4095],m+=u*(this.perlin[v+1&4095]-m),p=this.perlin[v+16&4095],p+=u*(this.perlin[v+16+1&4095]-p),m+=h*(p-m),f+=VA(l)*(m-f),c+=f*d,d*=bke,i<<=1,s*=2,n<<=1,o*=2,a<<=1,l*=2,s>=1&&(i++,s--),o>=1&&(n++,o--),l>=1&&(a++,l--)}return c}noiseSeed(e){let t=(()=>{let r,i;return{setSeed(n){i=r=(n??Math.random()*4294967296)>>>0},getSeed(){return r},rand(){return i=(1664525*i+1013904223)%4294967296,i/4294967296}}})();t.setSeed(e),this.perlin=new Array(4095+1);for(let r=0;r<4095+1;r++)this.perlin[r]=t.rand()}},_ke=wke,u6=new T,c6=new ze,h6=new cv;function d6(e){let t=!1;return e.scene.objects.traverse((r,i)=>{i.type==="Mesh"&&i.geometry.type==="TextGeometry"&&(t=!0)}),t}var Tq=class extends Qa{constructor(e,t,r){super(e,t,r),this.data=t}get textGeometry(){return this.geometry}get charWidths(){return this.textGeometry.charWidths}get charCoords(){return this.textGeometry.charCoords}get wrappedText(){return this.textGeometry.wrappedText}get font(){return this.textGeometry.font}get initialOffsetY(){var t;let e=this.dataPatched;return((t=this.font)==null?void 0:t.getLineInitialOffsetY(this.lineHeight,this.wrappedText.length,e.geometry.height,this.fontScale,e.geometry.verticalAlign))??0}get fontScale(){let e=this.dataPatched;return this.font?e.geometry.fontSize/this.font.unitsPerEm:1}get AD(){return Math.abs(this.ascender-this.descender)}get ascender(){var e;return(((e=this.font)==null?void 0:e.ascender)??1)*this.fontScale}get descender(){var e;return(((e=this.font)==null?void 0:e.descender)??1)*this.fontScale}get lineHeight(){let e=this.dataPatched;return e.geometry.fontSize*e.geometry.lineHeight}raycast(e,t){let{matrixWorld:r}=this;if(!(isNaN(e.ray.origin.x)||this.scale.x===0||this.scale.y===0||this.scale.z===0)&&(c6.copy(r).invert(),h6.copy(e.ray).applyMatrix4(c6),h6.intersectBox(this.singleBBox,u6))){let i=u6.applyMatrix4(r),n=e.ray.origin.distanceTo(i);t.push({distance:n,point:i.clone(),object:this})}}},Oa=1e-4,zl,Pq,Dq,Oq,f6=new T,p6=new T;xk.then(e=>{zl=e,Pq=[zl.get_face_center,zl.get_edge_midpoint,zl.get_vertex_position],Dq=[zl.get_face_normal,zl.get_edge_normal,zl.get_vertex_normal],Oq=[zl.face_count,zl.edge_count,zl.vertex_count]});var Ske=new ze,Eke=new ze,Xc=new T,Pd=new T,p0=new T,HA=new T,Mke=new T,Cke=new T,Uu=new _ke,ml=class extends hk(Xr){constructor(t,r){super(),this.parameters=r,this.objectForSample=void 0,this._pendingMediaLoad=!1,this.object=t}resetOnMove(){this.removeFromParent(),this.parent=null}expandClones(t){if(this.parent===null)this.updateState(this.parameters,t);else for(let r of this.children)r instanceof ya&&r.expand()}invalidateTransform(t){this.matrixWorldNeedsUpdate=!0,this.traverse(r=>{r instanceof ya&&r.object===t&&(r.matrixWorldNeedsUpdate=!0)})}onObjUpdateMatrix(){this.parameters.type!=="toObject"&&(this.matrixWorldNeedsUpdate=!0)}update(){switch(this._updateCount(),this.parameters.type){case"radial":this._updateRadial(this.parameters);break;case"linear":this._updateLinear(this.parameters);break;case"grid":this._updateGrid(this.parameters);break;case"toObject":this._updateToObject(this.parameters)}for(let t of this.children)t.updateMatrix(),t.hasNonUniformScale&&(t.updateMatrixWorld(),t.updateMatrixWorldSVD())}_updateCount(t){let r;if(t!==void 0?r=t:r=this.parameters.type==="grid"?Math.round(this.parameters.grid.count[0])*Math.round(this.parameters.grid.count[1])*Math.round(this.parameters.grid.count[2]):this.parameters.count,this.parameters.type==="toObject"&&!this.parameters.toObject.object&&(r=0),this.parameters.type==="toObject"&&this.objectForSample){for(let n=0,a=this.children.length;n<a;++n)this.remove(this.children[0]);let i=this.children;if(i.length===r)return;if(i.length<r)for(let n=0,a=r-i.length;n<a;++n){let s=new ya(this.object);s.expand(),this.add(s)}else for(let n=0,a=i.length-r;n<a;++n)this.remove(i[n])}else{if(this.children.length===r)return;if(this.children.length<r)for(let i=0,n=r-this.children.length;i<n;++i){let a=new ya(this.object);a.expand(),this.add(a)}else for(let i=0,n=this.children.length-r;i<n;++i)this.remove(this.children[0])}}_updateRadial(t){let r=t.radial,i=r.start*bt.DEG2RAD,n=r.end*bt.DEG2RAD,a=i-n,s=new Un(r.rotation[0],r.rotation[1],r.rotation[2]),o;switch(r.axis){case"z":o=new T(0,0,1);break;case"y":o=new T(0,1,0);break;default:case"x":o=new T(1,0,0);break}let l=t.randomnessObject??Mh.defaultData([1,1,1]).randomnessObject,u=l.noiseType==="perlin";Uu.noiseSeed(l.seed);let h=wA((0,l0.default)(l.seed)),c=Zb(l.strength,this.parameters.randomness);for(let[d,f]of this.children.entries()){let m=d*(l.freqScale/10)+l.movement,p=u?Uu.noise(m):h(m,m),g=d+1;f.scale.x=r.scale[0]+c(g,Vt(p,l.scale[0]))||Oa,f.scale.y=r.scale[1]+c(g,Vt(p,l.scale[1]))||Oa,f.scale.z=r.scale[2]+c(g,Vt(p,l.scale[2]))||Oa,f.position.setScalar(0);let v=a/t.count*d-i;switch(r.axis){case"x":f.rotation.set(0,v,0);break;case"y":f.rotation.set(0,0,v);break;case"z":f.rotation.set(v,0,0);break}f.translateOnAxis(o,r.radius),f.position.x+=r.position[0]+c(g,Vt(p,l.position[0])),f.position.y+=r.position[1]+c(g,Vt(p,l.position[1])),f.position.z+=r.position[2]+c(g,Vt(p,l.position[2]));let y=c(g,Vt(p,l.rotation[0])),x=c(g,Vt(p,l.rotation[1])),b=c(g,Vt(p,l.rotation[2]));r.alignment===!0?(f.rotation.x+=s.x+y,f.rotation.y+=s.y+x,f.rotation.z+=s.z+b):f.rotation.set(s.x+y,s.y+x,s.z+b)}}_updateLinear(t){if(t.type!=="linear")throw new Error;let r=t.linear,i=new Un(r.rotation[0],r.rotation[1],r.rotation[2]),n=t.randomnessObject??Mh.defaultData([1,1,1]).randomnessObject,a=n.noiseType==="perlin";Uu.noiseSeed(n.seed);let s=wA((0,l0.default)(n.seed)),o=Zb(n.strength,this.parameters.randomness);for(let[l,u]of this.children.entries()){let h=l*(n.freqScale/10)+n.movement,c=a?Uu.noise(h):s(h,h),d=l+1,f=o(d,Vt(c,n.rotation[0])),m=o(d,Vt(c,n.rotation[1])),p=o(d,Vt(c,n.rotation[2]));u.scale.x=1+(r.scale[0]-1)*l+o(d,Vt(c,n.scale[0]))||Oa,u.scale.y=1+(r.scale[1]-1)*l+o(d,Vt(c,n.scale[1]))||Oa,u.scale.z=1+(r.scale[2]-1)*l+o(d,Vt(c,n.scale[2]))||Oa,u.rotation.x=i.x*l+f,u.rotation.y=i.y*l+m,u.rotation.z=i.z*l+p,u.position.x=r.position[0]*l+o(d,Vt(c,n.position[0])),u.position.y=r.position[1]*l+o(d,Vt(c,n.position[1])),u.position.z=r.position[2]*l+o(d,Vt(c,n.position[2]))}}_updateGrid(t){let r=0,i=t.grid,n=t.randomnessObject??Mh.defaultData([1,1,1]).randomnessObject,a=Zb(n.strength,this.parameters.randomness),s=n.noiseType==="perlin";Uu.noiseSeed(n.seed);let o=k3e((0,l0.default)(n.seed));if(i.useCenter===!0){let l={x:i.count[0]%2===0?2:1,y:i.count[1]%2===0?2:1,z:i.count[2]%2===0?2:1},u=new T(i.size[0]*(i.count[0]-l.x)*.5,i.size[1]*(i.count[1]-l.y)*.5,i.size[2]*(i.count[2]-l.z)*.5);for(let h=0;h<i.count[0];h++)for(let c=0;c<i.count[1];c++)for(let d=0;d<i.count[2];d++){let f=[(h+1)*(n.freqScale/10)+n.movement,(c+1)*(n.freqScale/10)+n.movement,(d+1)*(n.freqScale/10)+n.movement],m=s?Uu.noise(...f):o(...f),p=this.children[r++];p.scale.x=1+a(r,Vt(m,n.scale[0]))||Oa,p.scale.y=1+a(r,Vt(m,n.scale[1]))||Oa,p.scale.z=1+a(r,Vt(m,n.scale[2]))||Oa;let g=a(r,Vt(m,n.rotation[0])),v=a(r,Vt(m,n.rotation[1])),y=a(r,Vt(m,n.rotation[2]));p.rotation.set(g,v,y),p.position.x=i.size[0]*h-u.x+a(r,Vt(m,n.position[0])),p.position.y=i.size[1]*c-u.y+a(r,Vt(m,n.position[1])),p.position.z=i.size[2]*d-u.z+a(r,Vt(m,n.position[2]))}}else for(let l=0;l<i.count[0];l++)for(let u=0;u<i.count[1];u++)for(let h=0;h<i.count[2];h++){let c=[(l+1)*(n.freqScale/10)+n.movement,(u+1)*(n.freqScale/10)+n.movement,(h+1)*(n.freqScale/10)+n.movement],d=s?Uu.noise(...c):o(...c),f=this.children[r++];f.scale.x=1+a(r,Vt(d,n.scale[0]))||Oa,f.scale.y=1+a(r,Vt(d,n.scale[1]))||Oa,f.scale.z=1+a(r,Vt(d,n.scale[2]))||Oa;let m=a(r,Vt(d,n.rotation[0])),p=a(r,Vt(d,n.rotation[1])),g=a(r,Vt(d,n.rotation[2]));f.rotation.set(m,p,g),f.position.x=i.size[0]*l+a(r,Vt(d,n.position[0])),f.position.y=-i.size[1]*u+a(r,Vt(d,n.position[1])),f.position.z=-i.size[2]*h+a(r,Vt(d,n.position[2]))}}_updateToObject(t){var g;if(t.type!=="toObject")throw new Error;let{toObject:r}=t,i=new Un(r.rotation[0],r.rotation[1],r.rotation[2]),n=t.randomnessObject??Mh.defaultData([1,1,1]).randomnessObject,a=n.noiseType==="perlin";Uu.noiseSeed(n.seed);let s=wA((0,l0.default)(n.seed)),o=Zb(n.strength,this.parameters.randomness);if(!r.object){for(let[,v]of this.children.entries())v.position.set(0,0,0),v.scale.setScalar(1),v.rotation.set(0,0,0);this.objectForSample=void 0;return}if(!this.objectForSample)return;if(this.objectForSample instanceof Tq)if(!((g=this.objectForSample.font)!=null&&g.isLoaded)||this.objectForSample.geometry.attributes.position===void 0){this._pendingMediaLoad=!0;return}else this._pendingMediaLoad=!1;if(this.objectForSample.geometry===void 0&&this.objectForSample.isAncestorOf(this.object.uuid)){console.warn(`Oh no! The object "${this.object.name}" (${this.object.uuid}) seem to be a child/descendant of the object it's being cloned to. Please re-parent it so that they are siblings instead.`);return}let l=this.getSubdivData(),u=[],h=v=>{let y=v.length,x=v.map(w=>w[0]).reduce((w,E)=>w+E,0),b=v.map(w=>w[1]).reduce((w,E)=>w+E,0),_=v.map(w=>w[2]).reduce((w,E)=>w+E,0);return[x/y,b/y,_/y]},c=v=>Math.round(v*1e6)/1e6;l.forEach(v=>{let y=l.filter(x=>c(v.pos[0])===c(x.pos[0])&&c(v.pos[1])===c(x.pos[1])&&c(v.pos[2])===c(x.pos[2]));y.length>1?u.push({pos:v.pos,norm:h(y.map(x=>x.norm))}):u.push(v)});let d=fke(u);if(d.length>0){let v=Math.round(d.length*r.count/100);this._updateCount(v)}else{let v=this.objectForSample.geometry.getAttribute("position");if(!v||isNaN(v.count)||v.count===0){console.warn(`Oh no! The object "${this.object.name}" (${this.object.uuid}) cannot be cloned on the surface of "${this.objectForSample.name}" (${this.objectForSample.uuid}) because the latter does not have a valid geometry.`);return}}this.objectForSample.updateMatrixWorld();let f=new L3e(this.objectForSample).build(),m=hke[r.axis],p=this.children;f.setRandomGenerator((0,l0.default)(this.object.uuid+r.seed));for(let[v,y]of p.entries()){let x=v*(n.freqScale/10)+n.movement,b=a?Uu.noise(x):s(x,x),_=v+1,w=o(_,Vt(b,n.rotation[0])),E=o(_,Vt(b,n.rotation[1])),S=o(_,Vt(b,n.rotation[2]));r.spreadType==="random"?f.sample(p0,HA):(d.length&&(p0.fromArray(d[v].pos),HA.fromArray(d[v].norm)),this.objectForSample instanceof E1&&p0.applyMatrix4(Ske.copy(this.objectForSample.matrixWorld).invert())),p0.applyMatrix4(this.object.hiddenMatrix.clone().invert()),y.position.copy(p0),Xc.fromArray(m);let C=r.align==="normal"?HA:this.object.getWorldDirection(Cke),M=Pd.fromArray(r.position);Pd.x+=Pd.x+o(_,Vt(b,n.position[0])),Pd.y+=Pd.y+o(_,Vt(b,n.position[1])),Pd.z+=Pd.z+o(_,Vt(b,n.position[2]));let P=Math.acos(C.dot(Xc)),I=Mke.crossVectors(Xc,C).normalize(),k=Eke.makeRotationAxis(I,P),L=C.clone().cross(this.object.up).normalize(),O=L.clone().cross(C).normalize(),F=new ze().makeBasis(L,C,O),z=new T(Xc.y,Xc.z,Xc.x).normalize(),B=z.clone().cross(Xc).normalize(),V=new ze().makeBasis(z,Xc,B).invert(),R=new ze().multiplyMatrices(F,V);y.rotation.setFromRotationMatrix(R),M.applyMatrix4(k),y.position.add(M),y.rotation.x=y.rotation.x+i.x+w,y.rotation.y=y.rotation.y+i.y+E,y.rotation.z=y.rotation.z+i.z+S,y.scale.setScalar(1),y.scale.x=y.scale.x+r.scale[0]+o(_,Vt(b,n.scale[0]))||Oa,y.scale.y=y.scale.y+r.scale[1]+o(_,Vt(b,n.scale[1]))||Oa,y.scale.z=y.scale.z+r.scale[2]+o(_,Vt(b,n.scale[2]))||Oa,y.scale.multiply(this.object.scale),y.hiddenMatrix=this.object.hiddenMatrix}}getSubdivData(){if(!this.objectForSample)return[];let t=this.parameters.toObject.spreadType;if(t==="random")return[];if(this.objectForSample instanceof E1){let r=this.objectForSample,i=dke[t],n=Oq[i],a=Pq[i],s=Dq[i],o=[],l=n(r.subdivPointerNew);for(let u=0;u<=l-1;u++){let h=a(r.subdivPointerNew,u),c=s(r.subdivPointerNew,u);f6.fromArray(h).applyMatrix4(r.matrixWorld),p6.fromArray(c),o.push({pos:f6.toArray(),norm:p6.toArray()})}return o}else return(this.objectForSample.geometry.index?vke(this.objectForSample.geometry):yke(this.objectForSample.geometry)).map((r,i)=>t==="polygon_center"?{pos:r.midpoint,norm:r.norm}:t==="vertex"?[{pos:r.vertices[0],norm:r.norm},{pos:r.vertices[1],norm:r.norm},{pos:r.vertices[2],norm:r.norm}]:t==="edge"?[{pos:r.faceCenters[0],norm:r.norm},{pos:r.faceCenters[1],norm:r.norm},{pos:r.faceCenters[2],norm:r.norm}]:[]).flat()}updateState(t,r){var i;if(this.parameters=LE(t),this.parameters.type!=="toObject")(this.parent===null||this.parent!==this.object)&&(this.removeFromParent(),(i=this.object.parent)==null||i.add(this),this.matrix=this.object.matrix,this.hiddenMatrix=this.object.hiddenMatrix,this.matrixWorldNeedsUpdate=!0,this.matrixAutoUpdate=!1);else if(this.parent===null||this.parent.uuid!==this.parameters.toObject.object){this.removeFromParent();let n=r.find(this.parameters.toObject.object);n instanceof Os?this.objectForSample=n:this.objectForSample=void 0,this.matrix=new ze,this.hiddenMatrix=new ze,this.matrixWorldNeedsUpdate=!0,this.matrixAutoUpdate=!1,n&&n.add(this)}this.update()}get pendingMediaLoad(){return this._pendingMediaLoad}},tx=e=>{var t;return t=class extends e{},t.geometryHelper=new Eu(30,30,30),t},tw=new cv,GA=new Ds,m6=new ze,rx=(e,t,r,i,n=!1)=>{let a=t,s=e.matrixWorld;if(a.boundingSphere===null&&a.computeBoundingSphere(),GA.copy(a.boundingSphere),GA.applyMatrix4(s),r.ray.intersectsSphere(GA)===!1||(m6.copy(s).invert(),tw.copy(r.ray).applyMatrix4(m6),a.boundingBox!==null&&tw.intersectsBox(a.boundingBox)===!1))return;let o,l,u,h,c=a.index,d=a.attributes.position,f=a.drawRange,m,p;if(n===!1){let v=Math.max(0,f.start),y=Math.min(c.count,f.start+f.count);for(m=v,p=y;m<p;m+=3)if(l=c.getX(m),u=c.getX(m+1),h=c.getX(m+2),o=g(e,r,tw,d,l,u,h),o){o.faceIndex=Math.floor(m/3),i.push(o);return}}else{let v=a.attributes.position,y=new T,x=new T,b=new T,_=new T,w=2,E=1/((e.scale.x+e.scale.y+e.scale.z)/3),S=E*E,C=Math.max(0,f.start),M=Math.min(v.count,f.start+f.count);for(let P=C,I=M-1;P<I;P+=w){if(y.fromBufferAttribute(v,P),x.fromBufferAttribute(v,P+1),tw.distanceSqToSegment(y,x,_,b)>S)continue;_.applyMatrix4(e.matrixWorld);let k=r.ray.origin.distanceTo(_);k<r.near||k>r.far||i.push({distance:k,point:b.clone().applyMatrix4(e.matrixWorld),object:e})}}function g(v,y,x,b,_,w,E){let S=new T,C=new T,M=new T,P=new T,I=new T;if(S.fromBufferAttribute(b,_),C.fromBufferAttribute(b,w),M.fromBufferAttribute(b,E),x.intersectTriangle(S,C,M,!1,P)===null)return null;I.copy(P),I.applyMatrix4(v.matrixWorld);let k=y.ray.origin.distanceTo(I);return k<y.near||k>y.far?null:{faceIndex:1,distance:k,point:I.clone(),object:v}}},rw=new T,ho=new dv,Ake=class extends Q1{constructor(e){let t=new wt,r=new md({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],n=[],a={},s=new At(15711266),o=new At(15711266),l=new At(2857471);u("n1","n2",s),u("n2","n4",s),u("n4","n3",s),u("n3","n1",s),u("f1","f2",s),u("f2","f4",s),u("f4","f3",s),u("f3","f1",s),u("n1","f1",s),u("n2","f2",s),u("n3","f3",s),u("n4","f4",s),u("p","n1",o),u("p","n2",o),u("p","n3",o),u("p","n4",o),u("u1","u2",l),u("u2","u3",l),u("u3","u1",l);function u(c,d,f){h(c,f),h(d,f)}function h(c,d){i.push(0,0,0),n.push(d.r,d.g,d.b),a[c]===void 0&&(a[c]=[]),a[c].push(i.length/3-1)}t.setAttribute("position",new it(i,3)),t.setAttribute("color",new it(n,3)),super(t,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update()}update(){let e=this.geometry,t=this.pointMap;ho.projectionMatrixInverse.elements=[.5112609807824982,-0,-0,-0,-0,.41421356237309503,-0,-0,-0,-0,-0,-.099999,-0,-0,-1.0000000000000002,.100001];let r=1,i=1,n=.8;Jo("n1",t,e,ho,-r,-i,n),Jo("n2",t,e,ho,r,-i,n),Jo("n3",t,e,ho,-r,i,n),Jo("n4",t,e,ho,r,i,n);let a=n;Jo("f1",t,e,ho,-r,-i,a),Jo("f2",t,e,ho,r,-i,a),Jo("f3",t,e,ho,-r,i,a),Jo("f4",t,e,ho,r,i,a);let s=a,o=.5;Jo("u1",t,e,ho,r*.7*o,i*1.1,s),Jo("u2",t,e,ho,-r*.7*o,i*1.1,s),Jo("u3",t,e,ho,0,i*(1.1+.9*o),s),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}};function Jo(e,t,r,i,n,a,s){rw.set(n,a,s).unproject(i);let o=t[e];if(o!==void 0){let l=r.getAttribute("position");for(let u=0,h=o.length;u<h;u++)l.setXYZ(o[u],rw.x,rw.y,rw.z)}}var Tke=class extends tx(Ake){constructor(e){super(e),this.object=e,this.object=e,this.name=`CombinedCameraHelper: ${e.uuid}`}updateMatrixWorld(e){super.updateMatrixWorld(e),this.updateTarget()}updateTarget(){let e=this.object.getTarget();this.updateWorldMatrix(!0,!1),this.worldToLocal(e)}raycast(e,t){rx(this.object,this.geometry,e,t,!0)}},S3;(e=>e.is=t=>"objectHelper"in t)(S3||(S3={}));var ix=(e,t)=>class extends dk(e){constructor(){super(...arguments),this.objectHelper=new t(this),this.gizmos={}}get geometryHelper(){return t.geometryHelper}raycast(r,i){this.objectHelper.raycast(r,i)}showGizmos(){for(let r in this.gizmos){let i=this.gizmos[r];i instanceof xS&&(i.visible=!0)}}updateEntityBoxSize(r,i){this.objectHelper.visible&&this.geometryHelper instanceof Eu?(r.setScalar(0),i.set(this.geometryHelper.parameters.width,this.geometryHelper.parameters.height,this.geometryHelper.parameters.height).multiplyScalar(.5)):super.updateEntityBoxSize(r,i)}hideGizmos(){for(let r in this.gizmos){let i=this.gizmos[r];i instanceof xS&&(i.visible=!1)}}},iw=790,$p=new T,WA=new T,$A=new Gt,YA=new T,m0=new T,qA=new T,_a=class extends ix(dv,Tke){constructor(e="",t={...v1.defaultData,name:""}){super(),this._cameraType="OrthographicCamera",this.targetOffset=Gg.DefaultTargetOffset,this.isUpVectorFlipped=!1,this.angleOffsetFromUp=0,this.wasMovedByUser=!1,this.wasMovedBySwitchCameraAction=!1,this.super_Entity(e,t),this.previousProjectionMatrix=new ze,this.matrixAutoUpdate=!0,this.width=window.innerWidth,this.height=window.innerHeight;let r=this.width,i=this.height;this.orthoCamera=new ER(r*-.5,r*.5,i*.5,i*-.5,-5e4,1e4),this.perspCamera=new ma(45,r/i,50,1e4),this.left=this.orthoCamera.left,this.right=this.orthoCamera.right,this.top=this.orthoCamera.top,this.bottom=this.orthoCamera.bottom,this.far=this.orthoCamera.far,this.view=this.orthoCamera.view,this.aspect=this.perspCamera.aspect,this.focus=this.perspCamera.focus,this.filmGauge=this.perspCamera.filmGauge,this.filmOffset=this.perspCamera.filmOffset,this.objectHelper.update()}get isPerspectiveCamera(){return this.cameraType==="PerspectiveCamera"}get isOrthographicCamera(){return!this.isPerspectiveCamera}get cameraType(){return this._cameraType}set fov(e){this.perspCamera.fov=e}get fov(){return this.perspCamera.fov}setNear(e,t){e==="PerspectiveCamera"?this.perspCamera.near=t:this.orthoCamera.near=t}setZoom(e,t){t>=0&&(e==="PerspectiveCamera"?this.perspCamera.zoom=t:this.orthoCamera.zoom=t)}set cameraType(e){e==="PerspectiveCamera"?this.toPerspective():e==="OrthographicCamera"&&this.toOrthographic()}get near(){return this._cameraType==="PerspectiveCamera"?this.perspCamera.near:this.orthoCamera.near}set near(e){this._cameraType==="PerspectiveCamera"?this.perspCamera.near=e:this.orthoCamera.near=e}get zoom(){return this._cameraType==="PerspectiveCamera"?this.perspCamera.zoom:this.orthoCamera.zoom}set zoom(e){e>=0&&(this._cameraType==="PerspectiveCamera"?this.perspCamera.zoom=e:this.orthoCamera.zoom=e)}lookAt(e,t,r){typeof e=="number"&&(e=new T(e,t,r)),super.lookAt(e),this.getWorldPosition($p),this.targetOffset=$p.distanceTo(e)}getTarget(e=new T){return this.getWorldDirection(WA),this.getWorldPosition($p),WA.multiplyScalar(this.targetOffset),e.copy($p).add(WA),e}getDistanceToTarget(){let e=this.getTarget();return this.getWorldPosition($p),$p.distanceTo(e)}updateUp(){this.getWorldQuaternion($A),YA.set(0,0,1).applyQuaternion($A),m0.copy(Xr.DEFAULT_UP),this.isUpVectorFlipped&&m0.negate(),m0.applyQuaternion($A),qA.copy(Xr.DEFAULT_UP).projectOnPlane(YA),this.angleOffsetFromUp=qA.angleTo(m0),this.angleOffsetFromUp*=qA.cross(m0).dot(YA)>=0?1:-1}updateTransformState(e,t){let r=super.updateTransformState(e,t);return e.isUpVectorFlipped!==void 0&&(this.isUpVectorFlipped=e.isUpVectorFlipped),this.updateUp(),r}getViewFrontToObject(e){let t=e.getWorldPosition(new T),r=e.getWorldDirection(new T).multiplyScalar(this.targetOffset);return{position:t.clone().add(r),target:t}}getViewToTarget(e){let t=this.getWorldDirection(new T).multiplyScalar(this.targetOffset);return{position:e.clone().sub(t),target:e}}getViewToObject(e){let t=new T;return e.getWorldPosition(t),this.getViewToTarget(t)}setViewplaneSize(e,t,r=!1){if(this.aspect=e/t,r){let i=e>t?this.aspect:1,n=e>t?1:this.aspect;this.left=-iw*.5*i,this.right=iw*.5*i,this.top=iw*.5*(1/n),this.bottom=-iw*.5*(1/n)}else this.left=-e*.5,this.right=e*.5,this.top=t*.5,this.bottom=-t*.5;this.updateProjectionMatrix()}copyViewPlaneSize(e){this.aspect=e.aspect,this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.updateProjectionMatrix()}toOrthographic(){this.orthoCamera.left=this.left,this.orthoCamera.right=this.right,this.orthoCamera.top=this.top,this.orthoCamera.bottom=this.bottom,this.orthoCamera.view=this.view,this.orthoCamera.far=this.far,this.orthoCamera.updateProjectionMatrix(),this.projectionMatrix=this.orthoCamera.projectionMatrix,this.projectionMatrixInverse=this.orthoCamera.projectionMatrixInverse,this._cameraType="OrthographicCamera",this.objectHelper&&this.objectHelper.update()}toPerspective(){this.perspCamera.aspect=this.aspect,this.perspCamera.fov=this.fov,this.perspCamera.view=this.view,this.perspCamera.far=this.far,this.perspCamera.updateProjectionMatrix(),this.projectionMatrix=this.perspCamera.projectionMatrix,this.projectionMatrixInverse=this.perspCamera.projectionMatrixInverse,this._cameraType="PerspectiveCamera",this.objectHelper&&this.objectHelper.update()}setFocalLength(e){this.perspCamera.setFocalLength(e),this.toPerspective()}getFocalLength(){return this.perspCamera.getFocalLength()}getEffectiveFOV(){return this.perspCamera.getEffectiveFOV()}getFilmWidth(){return this.perspCamera.getFilmWidth()}getFilmHeight(){return this.perspCamera.getFilmHeight()}setViewOffset(e,t,r,i,n,a){this._cameraType==="PerspectiveCamera"?this.perspCamera.setViewOffset(e,t,r,i,n,a):this.orthoCamera.setViewOffset(e,t,r,i,n,a)}clearViewOffset(){this._cameraType==="PerspectiveCamera"?(this.perspCamera.clearViewOffset(),this.toPerspective()):(this.orthoCamera.clearViewOffset(),this.toOrthographic())}copyHistory(){this.previousProjectionMatrix&&this.previousProjectionMatrix.copy(this.projectionMatrix)}updateProjectionMatrix(){this._cameraType==="PerspectiveCamera"?this.toPerspective():this._cameraType==="OrthographicCamera"&&this.toOrthographic()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}copy(e,t){return super.copy(e,t),this.parent=e.parent,this.orthoCamera.copy(e.orthoCamera),this.perspCamera.copy(e.perspCamera),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.far=e.far,this.view=e.view===null?null:Object.assign({},e.view),this._cameraType=e._cameraType,this.aspect=e.aspect,this.fov=e.fov,this.focus=e.focus,this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this.targetOffset=e.targetOffset,this.updateProjectionMatrix(),this}toCameraState(e=[]){let t={type:this.cameraType,far:this.far,orthographic:{near:this.orthoCamera.near,zoom:this.orthoCamera.zoom},perspective:{near:this.perspCamera.near,fov:this.perspCamera.fov,zoom:this.perspCamera.zoom},up:this.up.toArray(),targetOffset:this.targetOffset,isUpVectorFlipped:this.isUpVectorFlipped};return CD(t,e)}updateCameraSubtype(e,t){let r=e==="perspective"?"PerspectiveCamera":"OrthographicCamera";t.zoom!==void 0&&this.setZoom(r,t.zoom),t.near!==void 0&&this.setNear(r,t.near),t.fov!==void 0&&r==="PerspectiveCamera"&&(this.fov=t.fov)}updateState(e,t){this.updateCameraState(e,t)}updateCameraState(e,t){this.updateState_Entity(e,t),e.far!==void 0&&(this.far=e.far),e.orthographic!==void 0&&this.updateCameraSubtype("orthographic",e.orthographic),e.perspective!==void 0&&this.updateCameraSubtype("perspective",e.perspective),e.type!==void 0&&(this.cameraType=e.type),e.up!==void 0&&this.up.fromArray(e.up),e.targetOffset!==void 0&&(this.targetOffset=e.targetOffset),e.isUpVectorFlipped!==void 0&&(this.isUpVectorFlipped=e.isUpVectorFlipped),this.updateProjectionMatrix()}updateByPatchedOp(e,t,r){super.updateByPatchedOp(e,t,r),e.path.length===1&&e.type===0&&this.updateCameraSubtype(e.path[0],e.props)}toState(e){return{...super.toState(e),...this.toCameraState(e),type:this.cameraType}}},Yp=new ze,Pke=new ze;function g6(e){let t=!1;return e.scene.objects.traverse((r,i)=>{var n;((n=i.geometry)==null?void 0:n.type)==="BooleanGeometry"&&(t=!0)}),t}var Zg=class extends Mv{constructor(e,t,r){super(e,t),this.data=t,this.meshSetAddresses=[],this.needsTransformForDownstream=!1,this.geometry=new wt,this.onAfterRender=(i,n,a,s,o,l)=>{super.onAfterRender(i,n,a,s,o,l),this.recomputeBoolean()},this.geometry.userData.parameters={width:0,height:0,depth:0}}get booleanOp(){return this.data.geometry.operation}get phongAngle(){return this.data.geometry.phongAngle??45}get isLOD(){return this.recomputeBoolean(),!1}updateByPatchedOp(e,t,r){super.updateByPatchedOp(e,t,r),e.path.length===1&&e.path[0]==="geometry"&&e.type===0&&e.props.operation!==void 0&&(this.freeBooleanPointer(),this.resetBBoxNeedsUpdate())}freeBooleanPointer(){super.freeBooleanPointer(),this.geometry.dispose()}recomputeBoolean(e,t=!0){var i;if(this.booleanMeshSetAddress!==-1&&!e)return;for(let n=0;n<this.children.length;n++){let a=this.children[n];a instanceof Zg&&a.dataPatched.visible===!0&&a.recomputeBoolean(e===!0,t)}this.meshSetAddresses=[];for(let n=0;n<this.children.length;n++){let a=this.children[n];if(a instanceof Os&&a.dataPatched.visible===!0&&((i=a.geometry.attributes.position)==null?void 0:i.count)>0&&a.geometry.drawRange.count>0){if(Yp.multiplyMatrices(a.hiddenMatrix,a.matrix),a.booleanMeshSetAddress===-1){if((a.geometry.index??a.geometry.getAttribute("position")).count/3<15e5&&(a.booleanMeshSetAddress=Zu.getMeshSet(a.geometry,e===!0,t)),a.booleanMeshSetAddress===-1)return;Zu.transformMeshSet(a.booleanMeshSetAddress,Yp),a.booleanMatrixInvOld.copy(Yp).invert(),a.booleanWasTransformed=!1}else a instanceof Zg&&a.needsTransformForDownstream===!0?(Zu.transformMeshSet(a.booleanMeshSetAddress,Yp),a.needsTransformForDownstream=!1):a.booleanWasTransformed===!0&&(Zu.transformMeshSet(a.booleanMeshSetAddress,Pke.multiplyMatrices(Yp,a.booleanMatrixInvOld)),a.booleanMatrixInvOld.copy(Yp).invert(),a.booleanWasTransformed=!1);Zu.hasOpenEdges(a.booleanMeshSetAddress)===!1||n===this.children.length-1&&this.booleanOp===2?(this.meshSetAddresses.push(a.booleanMeshSetAddress),a.geometry.userData.wasFilteredFromBoolean=!1):a.geometry.userData.wasFilteredFromBoolean=!0}}if(this.meshSetAddresses.length===0){this.geometry.setAttribute("position",new it([],0)),this.geometry.setDrawRange(0,0);return}if(e===!0)return Zu.calcBooleanTopological(this.meshSetAddresses,this.booleanOp);let r=this.geometry;r.dispose(),this.geometry=new wt,this.geometry.userData=r.userData,this.geometry.boundingSphere=r.boundingSphere;try{this.booleanMeshSetAddress=Zu.calcBoolean(this.meshSetAddresses,this.booleanOp,this.geometry,this.phongAngle)}catch(n){this.booleanMeshSetAddress=0,console.error(n)}this.booleanMatrixInvOld.copy(this.matrix).invert(),this.needsTransformForDownstream=!0,Ak(this),Tk(this)}dispose(){super.dispose(),this.geometry.dispose()}},E3;(e=>{function t(r){return pr.is(r)&&r instanceof Z1}e.is=t})(E3||(E3={}));var Pk=(e,t)=>class extends ix(e,t){updateState_Light(r,i){this.updateState_Entity(r,i),r.color!==void 0&&(this.color=i.shared.color(r.color)),r.intensity!==void 0&&(this.intensity=r.intensity),r.depth!==void 0&&(this.shadow.camera.far=r.depth,this.shadow.needsUpdate=!0),r.shadows!==void 0&&(this.castShadow=r.shadows)}},cl=e=>e instanceof Os,lu=e=>e!==null&&e instanceof Zg,Dke=e=>e instanceof _a,Oke=e=>E3.is(e),M3=e=>S3.is(e),GE=class extends tx(f_e){constructor(e,t=15){super(t),this.object=e,this.object.updateMatrixWorld(),this.name=`EmptyObjectHelper: ${e.uuid}`,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.object.isBone&&(this.visible=!1)}raycast(e,t){rx(this.object,GE.geometryHelper,e,t)}update(){}},M1=class extends ix(Rm,GE){constructor(e,t){super(),this.super_Entity(e,t),this.objectHelper.update()}updateState(e,t){this.updateState_Entity(e,t)}},Iq={RED:0,GREEN:1,BLUE:2,ALPHA:3},nx="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",Ike=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform lowp sampler2D cocBuffer;uniform vec2 texelSize;uniform float scale;
#if PASS == 1
uniform vec4 kernel64[32];
#else
uniform vec4 kernel16[8];
#endif
varying vec2 vUv;void main(){
#ifdef FOREGROUND
vec2 CoCNearFar=texture2D(cocBuffer,vUv).rg;float CoC=CoCNearFar.r*scale;
#else
float CoC=texture2D(cocBuffer,vUv).g*scale;
#endif
if(CoC==0.0){gl_FragColor=texture2D(inputBuffer,vUv);}else{
#ifdef FOREGROUND
vec2 step=texelSize*max(CoC,CoCNearFar.g*scale);
#else
vec2 step=texelSize*CoC;
#endif
#if PASS == 1
vec4 acc=vec4(0.0);for(int i=0;i<32;++i){vec4 kernel=kernel64[i];vec2 uv=step*kernel.xy+vUv;acc+=texture2D(inputBuffer,uv);uv=step*kernel.zw+vUv;acc+=texture2D(inputBuffer,uv);}gl_FragColor=acc/64.0;
#else
vec4 maxValue=texture2D(inputBuffer,vUv);for(int i=0;i<8;++i){vec4 kernel=kernel16[i];vec2 uv=step*kernel.xy+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);uv=step*kernel.zw+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);}gl_FragColor=maxValue;
#endif
}}`,nw=class extends oi{constructor(e=!1,t=!1){super({name:"BokehMaterial",defines:{PASS:e?"2":"1"},uniforms:{kernel64:new Le(null),kernel16:new Le(null),inputBuffer:new Le(null),cocBuffer:new Le(null),texelSize:new Le(new re),scale:new Le(1)},blending:hn,depthWrite:!1,depthTest:!1,fragmentShader:Ike,vertexShader:nx}),this.toneMapped=!1,t&&(this.defines.FOREGROUND="1"),this.generateKernel()}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}set cocBuffer(e){this.uniforms.cocBuffer.value=e}setCoCBuffer(e){this.uniforms.cocBuffer.value=e}get scale(){return this.uniforms.scale.value}set scale(e){this.uniforms.scale.value=e}getScale(e){return this.uniforms.scale.value=e}setScale(e){this.uniforms.scale.value=e}generateKernel(){let e=2.39996323,t=new Float32Array(128),r=new Float32Array(32),i=0,n=0;for(let o=0;o<80;++o){let l=o*e,u=Math.sqrt(o)/Math.sqrt(80),h=u*Math.cos(l),c=u*Math.sin(l);o%5===0?(r[n++]=h,r[n++]=c):(t[i++]=h,t[i++]=c)}let a=[],s=[];for(let o=0;o<128;)a.push(new Wt(t[o++],t[o++],t[o++],t[o++]));for(let o=0;o<32;)s.push(new Wt(r[o++],r[o++],r[o++],r[o++]));this.uniforms.kernel64.value=a,this.uniforms.kernel16.value=s}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t)}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}};function v6(e,t,r){return e*(t-r)-t}function C3(e,t,r){return Math.min(Math.max((e+t)/(t-r),0),1)}var Rke=`#include <common>
#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform float focusDistance;uniform float focusRange;uniform float cameraNear;uniform float cameraFar;varying vec2 vUv;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}void main(){float depth=readDepth(vUv);
#ifdef PERSPECTIVE_CAMERA
float viewZ=perspectiveDepthToViewZ(depth,cameraNear,cameraFar);float linearDepth=viewZToOrthographicDepth(viewZ,cameraNear,cameraFar);
#else
float linearDepth=depth;
#endif
float signedDistance=linearDepth-focusDistance;float magnitude=smoothstep(0.0,focusRange,abs(signedDistance));gl_FragColor.rg=magnitude*vec2(step(signedDistance,0.0),step(0.0,signedDistance));}`,kke=class extends oi{constructor(e){super({name:"CircleOfConfusionMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new Le(null),focusDistance:new Le(0),focusRange:new Le(0),cameraNear:new Le(.3),cameraFar:new Le(1e3)},blending:hn,depthWrite:!1,depthTest:!1,fragmentShader:Rke,vertexShader:nx}),this.toneMapped=!1,this.uniforms.focalLength=this.uniforms.focusRange,this.adoptCameraSettings(e)}get near(){return this.uniforms.cameraNear.value}get far(){return this.uniforms.cameraFar.value}set depthBuffer(e){this.uniforms.depthBuffer.value=e}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=Lc){this.depthBuffer=e,this.depthPacking=t}get focusDistance(){return this.uniforms.focusDistance.value}set focusDistance(e){this.uniforms.focusDistance.value=e}get worldFocusDistance(){return-v6(this.focusDistance,this.near,this.far)}set worldFocusDistance(e){this.focusDistance=C3(-e,this.near,this.far)}getFocusDistance(e){this.uniforms.focusDistance.value=e}setFocusDistance(e){this.uniforms.focusDistance.value=e}get focalLength(){return this.focusRange}set focalLength(e){this.focusRange=e}get focusRange(){return this.uniforms.focusRange.value}set focusRange(e){this.uniforms.focusRange.value=e}get worldFocusRange(){return-v6(this.focusRange,this.near,this.far)}set worldFocusRange(e){this.focusRange=C3(-e,this.near,this.far)}getFocalLength(e){return this.focusRange}setFocalLength(e){this.focusRange=e}adoptCameraSettings(e){e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof ma?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},Lke=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <encodings_fragment>
#include <dithering_fragment>
}`,Bke="uniform vec2 texelSize;uniform vec2 halfTexelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize*vec2(kernel)+halfTexelSize)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",y6=class extends oi{constructor(e=new re){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new Le(null),texelSize:new Le(new re),halfTexelSize:new Le(new re),kernel:new Le(0),scale:new Le(1)},blending:hn,depthWrite:!1,depthTest:!1,fragmentShader:Lke,vertexShader:Bke}),this.toneMapped=!1,this.setTexelSize(e.x,e.y)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.inputBuffer=e}get scale(){return this.uniforms.scale.value}set scale(e){this.uniforms.scale.value=e}getScale(){return this.uniforms.scale.value}setScale(e){this.uniforms.scale.value=e}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(e){this.uniforms.kernel.value=e}setKernel(e){this.kernel=e}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t),this.uniforms.halfTexelSize.value.set(e,t).multiplyScalar(.5)}setSize(e,t){let r=this.uniforms;r.texelSize.value.set(1/e,1/t),r.halfTexelSize.value.copy(r.texelSize.value).multiplyScalar(.5)}},Nke=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <encodings_fragment>
}`,zke=class extends oi{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new Le(null),opacity:new Le(1)},blending:hn,depthWrite:!1,depthTest:!1,fragmentShader:Nke,vertexShader:nx}),this.toneMapped=!1}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}getOpacity(e){return this.uniforms.opacity.value}setOpacity(e){this.uniforms.opacity.value=e}},Fke=`varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#if EDGE_DETECTION_MODE != 0
varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;
#endif
#if EDGE_DETECTION_MODE == 1
#include <common>
#endif
#if EDGE_DETECTION_MODE == 0 || PREDICATION_MODE == 1
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}vec3 gatherNeighbors(){float p=readDepth(vUv);float pLeft=readDepth(vUv0);float pTop=readDepth(vUv1);return vec3(p,pLeft,pTop);}
#elif PREDICATION_MODE == 2
uniform sampler2D predicationBuffer;vec3 gatherNeighbors(){float p=texture2D(predicationBuffer,vUv).r;float pLeft=texture2D(predicationBuffer,vUv0).r;float pTop=texture2D(predicationBuffer,vUv1).r;return vec3(p,pLeft,pTop);}
#endif
#if PREDICATION_MODE != 0
vec2 calculatePredicatedThreshold(){vec3 neighbours=gatherNeighbors();vec2 delta=abs(neighbours.xx-neighbours.yz);vec2 edges=step(PREDICATION_THRESHOLD,delta);return PREDICATION_SCALE*EDGE_THRESHOLD*(1.0-PREDICATION_STRENGTH*edges);}
#endif
#if EDGE_DETECTION_MODE != 0
uniform sampler2D inputBuffer;
#endif
void main(){
#if EDGE_DETECTION_MODE == 0
const vec2 threshold=vec2(DEPTH_THRESHOLD);
#elif PREDICATION_MODE != 0
vec2 threshold=calculatePredicatedThreshold();
#else
const vec2 threshold=vec2(EDGE_THRESHOLD);
#endif
#if EDGE_DETECTION_MODE == 0
vec3 neighbors=gatherNeighbors();vec2 delta=abs(neighbors.xx-vec2(neighbors.y,neighbors.z));vec2 edges=step(threshold,delta);if(dot(edges,vec2(1.0))==0.0){discard;}gl_FragColor=vec4(edges,0.0,1.0);
#elif EDGE_DETECTION_MODE == 1
float l=luminance(texture2D(inputBuffer,vUv).rgb);float lLeft=luminance(texture2D(inputBuffer,vUv0).rgb);float lTop=luminance(texture2D(inputBuffer,vUv1).rgb);vec4 delta;delta.xy=abs(l-vec2(lLeft,lTop));vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}float lRight=luminance(texture2D(inputBuffer,vUv2).rgb);float lBottom=luminance(texture2D(inputBuffer,vUv3).rgb);delta.zw=abs(l-vec2(lRight,lBottom));vec2 maxDelta=max(delta.xy,delta.zw);float lLeftLeft=luminance(texture2D(inputBuffer,vUv4).rgb);float lTopTop=luminance(texture2D(inputBuffer,vUv5).rgb);delta.zw=abs(vec2(lLeft,lTop)-vec2(lLeftLeft,lTopTop));maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges.xy*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);
#elif EDGE_DETECTION_MODE == 2
vec4 delta;vec3 c=texture2D(inputBuffer,vUv).rgb;vec3 cLeft=texture2D(inputBuffer,vUv0).rgb;vec3 t=abs(c-cLeft);delta.x=max(max(t.r,t.g),t.b);vec3 cTop=texture2D(inputBuffer,vUv1).rgb;t=abs(c-cTop);delta.y=max(max(t.r,t.g),t.b);vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}vec3 cRight=texture2D(inputBuffer,vUv2).rgb;t=abs(c-cRight);delta.z=max(max(t.r,t.g),t.b);vec3 cBottom=texture2D(inputBuffer,vUv3).rgb;t=abs(c-cBottom);delta.w=max(max(t.r,t.g),t.b);vec2 maxDelta=max(delta.xy,delta.zw);vec3 cLeftLeft=texture2D(inputBuffer,vUv4).rgb;t=abs(c-cLeftLeft);delta.z=max(max(t.r,t.g),t.b);vec3 cTopTop=texture2D(inputBuffer,vUv5).rgb;t=abs(c-cTopTop);delta.w=max(max(t.r,t.g),t.b);maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);
#endif
}`,Uke=`uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;
#if EDGE_DETECTION_MODE != 0
varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;
#endif
void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,0.0);vUv1=vUv+texelSize*vec2(0.0,-1.0);
#if EDGE_DETECTION_MODE != 0
vUv2=vUv+texelSize*vec2(1.0,0.0);vUv3=vUv+texelSize*vec2(0.0,1.0);vUv4=vUv+texelSize*vec2(-2.0,0.0);vUv5=vUv+texelSize*vec2(0.0,-2.0);
#endif
gl_Position=vec4(position.xy,1.0,1.0);}`,WE={DEPTH:0,LUMA:1,COLOR:2},jke={DISABLED:0,DEPTH:1,CUSTOM:2},Vke=class extends oi{constructor(e=new re,t=WE.COLOR){super({name:"EdgeDetectionMaterial",defines:{THREE_REVISION:uv.replace(/\D+/g,""),LOCAL_CONTRAST_ADAPTATION_FACTOR:"2.0",EDGE_THRESHOLD:"0.1",DEPTH_THRESHOLD:"0.01",PREDICATION_MODE:"0",PREDICATION_THRESHOLD:"0.01",PREDICATION_SCALE:"2.0",PREDICATION_STRENGTH:"1.0",DEPTH_PACKING:"0"},uniforms:{inputBuffer:new Le(null),depthBuffer:new Le(null),predicationBuffer:new Le(null),texelSize:new Le(e)},blending:hn,depthWrite:!1,depthTest:!1,fragmentShader:Fke,vertexShader:Uke}),this.toneMapped=!1,this.edgeDetectionMode=t}set depthBuffer(e){this.uniforms.depthBuffer.value=e}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=Lc){this.depthBuffer=e,this.depthPacking=t}get edgeDetectionMode(){return Number(this.defines.EDGE_DETECTION_MODE)}set edgeDetectionMode(e){this.defines.EDGE_DETECTION_MODE=e.toFixed(0),this.needsUpdate=!0}getEdgeDetectionMode(){return this.edgeDetectionMode}setEdgeDetectionMode(e){this.edgeDetectionMode=e}get localContrastAdaptationFactor(){return Number(this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR)}set localContrastAdaptationFactor(e){this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR=e.toFixed("6"),this.needsUpdate=!0}getLocalContrastAdaptationFactor(){return this.localContrastAdaptationFactor}setLocalContrastAdaptationFactor(e){this.localContrastAdaptationFactor=e}get edgeDetectionThreshold(){return Number(this.defines.EDGE_THRESHOLD)}set edgeDetectionThreshold(e){this.defines.EDGE_THRESHOLD=e.toFixed("6"),this.defines.DEPTH_THRESHOLD=(e*.1).toFixed("6"),this.needsUpdate=!0}getEdgeDetectionThreshold(){return this.edgeDetectionThreshold}setEdgeDetectionThreshold(e){this.edgeDetectionThreshold=e}get predicationMode(){return Number(this.defines.PREDICATION_MODE)}set predicationMode(e){this.defines.PREDICATION_MODE=e.toFixed(0),this.needsUpdate=!0}getPredicationMode(){return this.predicationMode}setPredicationMode(e){this.predicationMode=e}set predicationBuffer(e){this.uniforms.predicationBuffer.value=e}setPredicationBuffer(e){this.uniforms.predicationBuffer.value=e}get predicationThreshold(){return Number(this.defines.PREDICATION_THRESHOLD)}set predicationThreshold(e){this.defines.PREDICATION_THRESHOLD=e.toFixed("6"),this.needsUpdate=!0}getPredicationThreshold(){return this.predicationThreshold}setPredicationThreshold(e){this.predicationThreshold=e}get predicationScale(){return Number(this.defines.PREDICATION_SCALE)}set predicationScale(e){this.defines.PREDICATION_SCALE=e.toFixed("6"),this.needsUpdate=!0}getPredicationScale(){return this.predicationScale}setPredicationScale(e){this.predicationScale=e}get predicationStrength(){return Number(this.defines.PREDICATION_STRENGTH)}set predicationStrength(e){this.defines.PREDICATION_STRENGTH=e.toFixed("6"),this.needsUpdate=!0}getPredicationStrength(){return this.predicationStrength}setPredicationStrength(e){this.predicationStrength=e}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}},Hke=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#if THREE_REVISION >= 137
vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}FRAGMENT_HEADvoid main(){FRAGMENT_MAIN_UVvec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGEgl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <encodings_fragment>
#endif
#include <dithering_fragment>
}`,Gke="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEADvoid main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORTgl_Position=vec4(position.xy,1.0,1.0);}",el={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},A3=class extends oi{constructor(e,t,r,i,n=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:uv.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new Le(null),depthBuffer:new Le(null),resolution:new Le(new re),texelSize:new Le(new re),cameraNear:new Le(.3),cameraFar:new Le(1e3),aspect:new Le(1),time:new Le(0)},blending:hn,depthWrite:!1,depthTest:!1,dithering:n}),this.toneMapped=!1,e&&this.setShaderParts(e),t&&this.setDefines(t),r&&this.setUniforms(r),this.adoptCameraSettings(i)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(e){this.uniforms.depthBuffer.value=e}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=Lc){this.depthBuffer=e,this.depthPacking=t}setShaderParts(e){return this.fragmentShader=Hke.replace(el.FRAGMENT_HEAD,e.get(el.FRAGMENT_HEAD)).replace(el.FRAGMENT_MAIN_UV,e.get(el.FRAGMENT_MAIN_UV)).replace(el.FRAGMENT_MAIN_IMAGE,e.get(el.FRAGMENT_MAIN_IMAGE)),this.vertexShader=Gke.replace(el.VERTEX_HEAD,e.get(el.VERTEX_HEAD)).replace(el.VERTEX_MAIN_SUPPORT,e.get(el.VERTEX_MAIN_SUPPORT)),this.needsUpdate=!0,this}setDefines(e){for(let t of e.entries())this.defines[t[0]]=t[1];return this.needsUpdate=!0,this}setUniforms(e){for(let t of e.entries())this.uniforms[t[0]]=t[1];return this}setExtensions(e){this.extensions={};for(let t of e)this.extensions[t]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(e){this.encodeOutput!==e&&(e?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(e){return this.encodeOutput}setOutputEncodingEnabled(e){this.encodeOutput=e}get time(){return this.uniforms.time.value}set time(e){this.uniforms.time.value=e}setDeltaTime(e){this.uniforms.time.value+=e}adoptCameraSettings(e){e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof ma?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(e,t){let r=this.uniforms;r.resolution.value.set(e,t),r.texelSize.value.set(1/e,1/t),r.aspect.value=e/t}static get Section(){return el}},Wke=`#include <common>
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);l*=low*high;
#elif defined(THRESHOLD)
l=smoothstep(threshold,threshold+smoothing,l);
#endif
#ifdef COLOR
gl_FragColor=vec4(texel.rgb*l,l);
#else
gl_FragColor=vec4(l);
#endif
}`,$ke=class extends oi{constructor(e=!1,t=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:uv.replace(/\D+/g,"")},uniforms:{inputBuffer:new Le(null),threshold:new Le(0),smoothing:new Le(1),range:new Le(null)},blending:hn,depthWrite:!1,depthTest:!1,fragmentShader:Wke,vertexShader:nx}),this.toneMapped=!1,this.colorOutput=e,this.luminanceRange=t}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get threshold(){return this.uniforms.threshold.value}set threshold(e){this.smoothing>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=e}getThreshold(){return this.threshold}setThreshold(e){this.threshold=e}get smoothing(){return this.uniforms.smoothing.value}set smoothing(e){this.threshold>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=e}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(e){this.smoothing=e}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(e){}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(e){e?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(e){return this.colorOutput}setColorOutputEnabled(e){this.colorOutput=e}get useRange(){return this.luminanceRange!==null}set useRange(e){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(e){e!==null?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=e,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(e){this.luminanceRange=e}},Yke=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef MASK_PRECISION_HIGH
uniform mediump sampler2D maskTexture;
#else
uniform lowp sampler2D maskTexture;
#endif
#if MASK_FUNCTION != 0
uniform float strength;
#endif
varying vec2 vUv;void main(){
#if COLOR_CHANNEL == 0
float mask=texture2D(maskTexture,vUv).r;
#elif COLOR_CHANNEL == 1
float mask=texture2D(maskTexture,vUv).g;
#elif COLOR_CHANNEL == 2
float mask=texture2D(maskTexture,vUv).b;
#else
float mask=texture2D(maskTexture,vUv).a;
#endif
#if MASK_FUNCTION == 0
#ifdef INVERTED
mask=step(mask,0.0);
#else
mask=1.0-step(mask,0.0);
#endif
#else
mask=clamp(mask*strength,0.0,1.0);
#ifdef INVERTED
mask=1.0-mask;
#endif
#endif
#if MASK_FUNCTION == 2
gl_FragColor=vec4(mask*texture2D(inputBuffer,vUv).rgb,mask);
#else
gl_FragColor=mask*texture2D(inputBuffer,vUv);
#endif
}`,Rq={DISCARD:0,MULTIPLY:1,MULTIPLY_RGB_SET_ALPHA:2},qke=class extends oi{constructor(e=null){super({name:"MaskMaterial",uniforms:{maskTexture:new Le(e),inputBuffer:new Le(null),strength:new Le(1)},blending:hn,depthWrite:!1,depthTest:!1,fragmentShader:Yke,vertexShader:nx}),this.toneMapped=!1,this.setColorChannel(Iq.RED),this.setMaskFunction(Rq.DISCARD)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}set maskTexture(e){this.uniforms.maskTexture.value=e,delete this.defines.MASK_PRECISION_HIGH,e.type!==Ea&&(this.defines.MASK_PRECISION_HIGH="1"),this.needsUpdate=!0}setMaskTexture(e){this.maskTexture=e}set colorChannel(e){this.defines.COLOR_CHANNEL=e.toFixed(0),this.needsUpdate=!0}setColorChannel(e){this.colorChannel=e}set maskFunction(e){this.defines.MASK_FUNCTION=e.toFixed(0),this.needsUpdate=!0}setMaskFunction(e){this.maskFunction=e}get inverted(){return this.defines.INVERTED!==void 0}set inverted(e){this.inverted&&!e?delete this.defines.INVERTED:e&&(this.defines.INVERTED="1"),this.needsUpdate=!0}isInverted(){return this.inverted}setInverted(e){this.inverted=e}get strength(){return this.uniforms.strength.value}set strength(e){this.uniforms.strength.value=e}getStrength(){return this.strength}setStrength(e){this.strength=e}},Xke=`#define sampleLevelZeroOffset(t, coord, offset) texture2D(t, coord + offset * texelSize)
#if __VERSION__ < 300
#define round(v) floor(v + 0.5)
#endif
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform lowp sampler2D areaTexture;uniform lowp sampler2D searchTexture;uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}vec2 decodeDiagBilinearAccess(in vec2 e){e.r=e.r*abs(5.0*e.r-5.0*0.75);return round(e);}vec4 decodeDiagBilinearAccess(in vec4 e){e.rb=e.rb*abs(5.0*e.rb-5.0*0.75);return round(e);}vec2 searchDiag1(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 searchDiag2(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);coord.x+=0.25*texelSize.x;vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;e=decodeDiagBilinearAccess(e);coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 areaDiag(const in vec2 dist,const in vec2 e,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE_DIAG,AREATEX_MAX_DISTANCE_DIAG)*e+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.x+=0.5;texCoord.y+=AREATEX_SUBTEX_SIZE*offset;return texture2D(areaTexture,texCoord).rg;}vec2 calculateDiagWeights(const in vec2 texCoord,const in vec2 e,const in vec4 subsampleIndices){vec2 weights=vec2(0.0);vec4 d;vec2 end;if(e.r>0.0){d.xz=searchDiag1(texCoord,vec2(-1.0,1.0),end);d.x+=float(end.y>0.9);}else{d.xz=vec2(0.0);}d.yw=searchDiag1(texCoord,vec2(1.0,-1.0),end);if(d.x+d.y>2.0){vec4 coords=vec4(-d.x+0.25,d.x,d.y,-d.y-0.25)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.xy=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).rg;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).rg;c.yxwz=decodeDiagBilinearAccess(c.xyzw);vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.z);}d.xz=searchDiag2(texCoord,vec2(-1.0,-1.0),end);if(sampleLevelZeroOffset(inputBuffer,texCoord,vec2(1,0)).r>0.0){d.yw=searchDiag2(texCoord,vec2(1.0),end);d.y+=float(end.y>0.9);}else{d.yw=vec2(0.0);}if(d.x+d.y>2.0){vec4 coords=vec4(-d.x,-d.x,d.y,d.y)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.x=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).g;c.y=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(0,-1)).r;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).gr;vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.w).gr;}return weights;}float searchLength(const in vec2 e,const in float offset){vec2 scale=SEARCHTEX_SIZE*vec2(0.5,-1.0);vec2 bias=SEARCHTEX_SIZE*vec2(offset,1.0);scale+=vec2(-1.0,1.0);bias+=vec2(0.5,-0.5);scale*=1.0/SEARCHTEX_PACKED_SIZE;bias*=1.0/SEARCHTEX_PACKED_SIZE;return texture2D(searchTexture,scale*e+bias).r;}float searchXLeft(in vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x>end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(-2.0,0.0)*texelSize+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.0)+3.25;return texelSize.x*offset+texCoord.x;}float searchXRight(vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x<end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(2.0,0.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.5)+3.25;return-texelSize.x*offset+texCoord.x;}float searchYUp(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.y>end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=-vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.0)+3.25;return texelSize.y*offset+texCoord.y;}float searchYDown(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;i++){if(!(texCoord.y<end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.5)+3.25;return-texelSize.y*offset+texCoord.y;}vec2 area(const in vec2 dist,const in float e1,const in float e2,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE)*round(4.0*vec2(e1,e2))+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.y=AREATEX_SUBTEX_SIZE*offset+texCoord.y;return texture2D(areaTexture,texCoord).rg;}void detectHorizontalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){
#if !defined(DISABLE_CORNER_DETECTION)
vec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,1)).r;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).r;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,-2)).r;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,-2)).r;weights*=clamp(factor,0.0,1.0);
#endif
}void detectVerticalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){
#if !defined(DISABLE_CORNER_DETECTION)
vec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(1,0)).g;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).g;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(-2,0)).g;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(-2,1)).g;weights*=clamp(factor,0.0,1.0);
#endif
}void main(){vec4 weights=vec4(0.0);vec4 subsampleIndices=vec4(0.0);vec2 e=texture2D(inputBuffer,vUv).rg;if(e.g>0.0){
#if !defined(DISABLE_DIAG_DETECTION)
weights.rg=calculateDiagWeights(vUv,e,subsampleIndices);if(weights.r==-weights.g){
#endif
vec2 d;vec3 coords;coords.x=searchXLeft(vOffset[0].xy,vOffset[2].x);coords.y=vOffset[1].y;d.x=coords.x;float e1=texture2D(inputBuffer,coords.xy).r;coords.z=searchXRight(vOffset[0].zw,vOffset[2].y);d.y=coords.z;d=round(resolution.xx*d+-vPixCoord.xx);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.zy,vec2(1,0)).r;weights.rg=area(sqrtD,e1,e2,subsampleIndices.y);coords.y=vUv.y;detectHorizontalCornerPattern(weights.rg,coords.xyzy,d);
#if !defined(DISABLE_DIAG_DETECTION)
}else{e.r=0.0;}
#endif
}if(e.r>0.0){vec2 d;vec3 coords;coords.y=searchYUp(vOffset[1].xy,vOffset[2].z);coords.x=vOffset[0].x;d.x=coords.y;float e1=texture2D(inputBuffer,coords.xy).g;coords.z=searchYDown(vOffset[1].zw,vOffset[2].w);d.y=coords.z;d=round(resolution.yy*d-vPixCoord.yy);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.xz,vec2(0,1)).g;weights.ba=area(sqrtD,e1,e2,subsampleIndices.x);coords.x=vUv.x;detectVerticalCornerPattern(weights.ba,coords.xyxz,d);}gl_FragColor=weights;}`,Qke="uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void main(){vUv=position.xy*0.5+0.5;vPixCoord=vUv*resolution;vOffset[0]=vUv.xyxy+texelSize.xyxy*vec4(-0.25,-0.125,1.25,-0.125);vOffset[1]=vUv.xyxy+texelSize.xyxy*vec4(-0.125,-0.25,-0.125,1.25);vOffset[2]=vec4(vOffset[0].xz,vOffset[1].yw)+vec4(-2.0,2.0,-2.0,2.0)*texelSize.xxyy*MAX_SEARCH_STEPS_FLOAT;gl_Position=vec4(position.xy,1.0,1.0);}",Kke=class extends oi{constructor(e=new re,t=new re){super({name:"SMAAWeightsMaterial",defines:{MAX_SEARCH_STEPS_INT:"16",MAX_SEARCH_STEPS_FLOAT:"16.0",MAX_SEARCH_STEPS_DIAG_INT:"8",MAX_SEARCH_STEPS_DIAG_FLOAT:"8.0",CORNER_ROUNDING:"25",CORNER_ROUNDING_NORM:"0.25",AREATEX_MAX_DISTANCE:"16.0",AREATEX_MAX_DISTANCE_DIAG:"20.0",AREATEX_PIXEL_SIZE:"(1.0 / vec2(160.0, 560.0))",AREATEX_SUBTEX_SIZE:"(1.0 / 7.0)",SEARCHTEX_SIZE:"vec2(66.0, 33.0)",SEARCHTEX_PACKED_SIZE:"vec2(64.0, 16.0)"},uniforms:{inputBuffer:new Le(null),searchTexture:new Le(null),areaTexture:new Le(null),resolution:new Le(t),texelSize:new Le(e)},blending:hn,depthWrite:!1,depthTest:!1,fragmentShader:Xke,vertexShader:Qke}),this.toneMapped=!1}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get searchTexture(){return this.uniforms.searchTexture.value}set searchTexture(e){this.uniforms.searchTexture.value=e}get areaTexture(){return this.uniforms.areaTexture.value}set areaTexture(e){this.uniforms.areaTexture.value=e}setLookupTextures(e,t){this.searchTexture=e,this.areaTexture=t}get orthogonalSearchSteps(){return Number(this.defines.MAX_SEARCH_STEPS_INT)}set orthogonalSearchSteps(e){let t=Math.min(Math.max(e,0),112);this.defines.MAX_SEARCH_STEPS_INT=t.toFixed("0"),this.defines.MAX_SEARCH_STEPS_FLOAT=t.toFixed("1"),this.needsUpdate=!0}setOrthogonalSearchSteps(e){this.orthogonalSearchSteps=e}get diagonalSearchSteps(){return Number(this.defines.MAX_SEARCH_STEPS_DIAG_INT)}set diagonalSearchSteps(e){let t=Math.min(Math.max(e,0),20);this.defines.MAX_SEARCH_STEPS_DIAG_INT=t.toFixed("0"),this.defines.MAX_SEARCH_STEPS_DIAG_FLOAT=t.toFixed("1"),this.needsUpdate=!0}setDiagonalSearchSteps(e){this.diagonalSearchSteps=e}get diagonalDetection(){return this.defines.DISABLE_DIAG_DETECTION===void 0}set diagonalDetection(e){e?delete this.defines.DISABLE_DIAG_DETECTION:this.defines.DISABLE_DIAG_DETECTION="1",this.needsUpdate=!0}isDiagonalDetectionEnabled(){return this.diagonalDetection}setDiagonalDetectionEnabled(e){this.diagonalDetection=e}get cornerRounding(){return Number(this.defines.CORNER_ROUNDING)}set cornerRounding(e){let t=Math.min(Math.max(e,0),100);this.defines.CORNER_ROUNDING=t.toFixed("4"),this.defines.CORNER_ROUNDING_NORM=(t/100).toFixed("4"),this.needsUpdate=!0}setCornerRounding(e){this.cornerRounding=e}get cornerDetection(){return this.defines.DISABLE_CORNER_DETECTION===void 0}set cornerDetection(e){e?delete this.defines.DISABLE_CORNER_DETECTION:this.defines.DISABLE_CORNER_DETECTION="1",this.needsUpdate=!0}isCornerRoundingEnabled(){return this.cornerDetection}setCornerRoundingEnabled(e){this.cornerDetection=e}setSize(e,t){let r=this.uniforms;r.texelSize.value.set(1/e,1/t),r.resolution.value.set(e,t)}},Zke=new dv,Qc=null;function Jke(){if(Qc===null){let e=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),t=new Float32Array([0,0,2,0,0,2]);Qc=new wt,Qc.setAttribute!==void 0?(Qc.setAttribute("position",new Bt(e,3)),Qc.setAttribute("uv",new Bt(t,2))):(Qc.addAttribute("position",new Bt(e,3)),Qc.addAttribute("uv",new Bt(t,2)))}return Qc}var as=class{constructor(e="Pass",t=new Hh,r=Zke){this.name=e,this.renderer=null,this.scene=t,this.camera=r,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(e){if(this.rtt===e){let t=this.getFullscreenMaterial();t!==null&&(t.needsUpdate=!0),this.rtt=!e}}setRenderer(e){this.renderer=e}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(e){let t=this.screen;t!==null?t.material=e:(t=new gs(Jke(),e),t.frustumCulled=!1,this.scene===null&&(this.scene=new Hh),this.scene.add(t),this.screen=t)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(e){this.fullscreenMaterial=e}getDepthTexture(){return null}setDepthTexture(e,t=Lc){}render(e,t,r,i,n){throw new Error("Render method not implemented!")}setSize(e,t){}initialize(e,t,r){}dispose(){for(let e of Object.keys(this)){let t=this[e];if(t!==null&&typeof t.dispose=="function"){if(t instanceof Hh||t===this.renderer)continue;this[e].dispose()}}}},T3=class extends as{constructor(e,t=!0){super("CopyPass"),this.fullscreenMaterial=new zke,this.needsSwap=!1,this.renderTarget=e,e===void 0&&(this.renderTarget=new Yr(1,1,{minFilter:Kt,magFilter:Kt,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=t}get resize(){return this.autoResize}set resize(e){this.autoResize=e}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(e){this.autoResize=e}render(e,t,r,i,n){this.fullscreenMaterial.inputBuffer=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){this.autoResize&&this.renderTarget.setSize(e,t)}initialize(e,t,r){r!==void 0&&(this.renderTarget.texture.type=r,r!==Ea?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":e.outputEncoding===Ht&&(this.renderTarget.texture.encoding=Ht))}},eLe=class extends as{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(e,t,r,i,n){let a=e.state.buffers.stencil;a.setLocked(!1),a.setTest(!1)}},XA=new At,Dk=class extends as{constructor(e=!0,t=!0,r=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=e,this.depth=t,this.stencil=r,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(e,t,r){this.color=e,this.depth=t,this.stencil=r}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(e){this.overrideClearColor=e}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(e){this.overrideClearAlpha=e}render(e,t,r,i,n){let a=this.overrideClearColor,s=this.overrideClearAlpha,o=e.getClearAlpha(),l=a!==null,u=s>=0;l?(XA.copy(e.getClearColor(XA)),e.setClearColor(a,u?s:o)):u&&e.setClearAlpha(s),e.setRenderTarget(this.renderToScreen?null:t),e.clear(this.color,this.depth,this.stencil),l?e.setClearColor(XA,o):u&&e.setClearAlpha(o)}},Kc=-1,xs=class extends sa{constructor(e,t=Kc,r=Kc,i=1){super(),this.resizable=e,this.base=new re(1,1),this.preferred=new re(t,r),this.target=this.preferred,this.s=i}get width(){let{base:e,preferred:t,scale:r}=this,i;return t.width!==Kc?i=t.width:t.height!==Kc?i=Math.round(t.height*(e.width/Math.max(e.height,1))):i=Math.round(e.width*r),i}set width(e){this.preferredWidth=e}get height(){let{base:e,preferred:t,scale:r}=this,i;return t.height!==Kc?i=t.height:t.width!==Kc?i=Math.round(t.width/Math.max(e.width/Math.max(e.height,1),1)):i=Math.round(e.height*r),i}set height(e){this.preferredHeight=e}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(e){this.s!==e&&(this.s=e,this.preferred.setScalar(Kc),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getScale(){return this.scale}setScale(e){this.scale=e}get baseWidth(){return this.base.width}set baseWidth(e){this.base.width!==e&&(this.base.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getBaseWidth(){return this.base.width}setBaseWidth(e){this.base.width!==e&&(this.base.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}get baseHeight(){return this.base.height}set baseHeight(e){this.base.height!==e&&(this.base.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(e){this.baseHeight=e}setBaseSize(e,t){(this.base.width!==e||this.base.height!==t)&&(this.base.set(e,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}get preferredWidth(){return this.preferred.width}set preferredWidth(e){this.preferred.width!==e&&(this.preferred.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(e){this.preferredWidth=e}get preferredHeight(){return this.preferred.height}set preferredHeight(e){this.preferred.height!==e&&(this.preferred.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(e){this.preferredHeight=e}setPreferredSize(e,t){(this.preferred.width!==e||this.preferred.height!==t)&&(this.preferred.set(e,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}copy(e){this.base.set(e.getBaseWidth(),e.getBaseHeight()),this.preferred.set(e.getPreferredWidth(),e.getPreferredHeight()),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height)}static get AUTO_SIZE(){return Kc}},QA=!1,x6=class{constructor(e=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(e),this.meshCount=0,this.replaceMaterial=t=>{if(t.isMesh){let r;if(t.material.flatShading)switch(t.material.side){case Ys:r=this.materialsFlatShadedDoubleSide;break;case Vn:r=this.materialsFlatShadedBackSide;break;default:r=this.materialsFlatShaded;break}else switch(t.material.side){case Ys:r=this.materialsDoubleSide;break;case Vn:r=this.materialsBackSide;break;default:r=this.materials;break}this.originalMaterials.set(t,t.material),t.isSkinnedMesh?t.material=r[2]:t.isInstancedMesh?t.material=r[1]:t.material=r[0],++this.meshCount}}}setMaterial(e){if(this.disposeMaterials(),this.material=e,e!==null){let t=this.materials=[e.clone(),e.clone(),e.clone()];for(let r of t)r.uniforms=Object.assign({},e.uniforms),r.side=Ml;t[2].skinning=!0,this.materialsBackSide=t.map(r=>{let i=r.clone();return i.uniforms=Object.assign({},e.uniforms),i.side=Vn,i}),this.materialsDoubleSide=t.map(r=>{let i=r.clone();return i.uniforms=Object.assign({},e.uniforms),i.side=Ys,i}),this.materialsFlatShaded=t.map(r=>{let i=r.clone();return i.uniforms=Object.assign({},e.uniforms),i.flatShading=!0,i}),this.materialsFlatShadedBackSide=t.map(r=>{let i=r.clone();return i.uniforms=Object.assign({},e.uniforms),i.flatShading=!0,i.side=Vn,i}),this.materialsFlatShadedDoubleSide=t.map(r=>{let i=r.clone();return i.uniforms=Object.assign({},e.uniforms),i.flatShading=!0,i.side=Ys,i})}}render(e,t,r){let i=e.shadowMap.enabled;if(e.shadowMap.enabled=!1,QA){let n=this.originalMaterials;this.meshCount=0,t.traverse(this.replaceMaterial),e.render(t,r);for(let a of n)a[0].material=a[1];this.meshCount!==n.size&&n.clear()}else{let n=t.overrideMaterial;t.overrideMaterial=this.material,e.render(t,r),t.overrideMaterial=n}e.shadowMap.enabled=i}disposeMaterials(){if(this.material!==null){let e=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(let t of e)t.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return QA}static set workaroundEnabled(e){QA=e}},tLe=class extends as{constructor(e,t,r=null){super("RenderPass",e,t),this.needsSwap=!1,this.clearPass=new Dk,this.overrideMaterialManager=r===null?null:new x6(r),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}get renderToScreen(){return super.renderToScreen}set renderToScreen(e){super.renderToScreen=e,this.clearPass.renderToScreen=e}get overrideMaterial(){let e=this.overrideMaterialManager;return e!==null?e.material:null}set overrideMaterial(e){let t=this.overrideMaterialManager;e!==null?t!==null?t.setMaterial(e):this.overrideMaterialManager=new x6(e):t!==null&&(t.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(e){this.overrideMaterial=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getSelection(){return this.selection}setSelection(e){this.selection=e}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(e){this.ignoreBackground=e}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(e){this.skipShadowMapUpdate=e}getClearPass(){return this.clearPass}render(e,t,r,i,n){let a=this.scene,s=this.camera,o=this.selection,l=s.layers.mask,u=a.background,h=e.shadowMap.autoUpdate,c=this.renderToScreen?null:t;o!==null&&s.layers.set(o.getLayer()),this.skipShadowMapUpdate&&(e.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(a.background=null),this.clearPass.enabled&&this.clearPass.render(e,t),e.setRenderTarget(c),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(e,a,s):e.render(a,s),s.layers.mask=l,a.background=u,e.shadowMap.autoUpdate=h}},b6=class extends as{constructor(e,t,{resolutionScale:r=1,width:i=xs.AUTO_SIZE,height:n=xs.AUTO_SIZE,renderTarget:a}={}){super("DepthPass"),this.needsSwap=!1,this.renderPass=new tLe(e,t,new S7({depthPacking:u7}));let s=this.renderPass;s.skipShadowMapUpdate=!0,s.ignoreBackground=!0;let o=s.getClearPass();o.overrideClearColor=new At(16777215),o.overrideClearAlpha=1,this.renderTarget=a,this.renderTarget===void 0&&(this.renderTarget=new Yr(1,1,{minFilter:si,magFilter:si,stencilBuffer:!1}),this.renderTarget.texture.name="DepthPass.Target");let l=this.resolution=new xs(this,i,n,r);l.addEventListener("change",u=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,t,r,i,n){let a=this.renderToScreen?null:this.renderTarget;this.renderPass.render(e,a)}setSize(e,t){let r=this.resolution;r.setBaseSize(e,t),this.renderTarget.setSize(r.width,r.height)}},wr={SKIP:0,ADD:1,ALPHA:2,AVERAGE:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,EXCLUSION:8,LIGHTEN:9,MULTIPLY:10,DIVIDE:11,NEGATION:12,NORMAL:13,OVERLAY:14,REFLECT:15,SCREEN:16,SOFT_LIGHT:17,SUBTRACT:18},rLe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x+y,1.0)*opacity+x*(1.0-opacity);}",iLe="vec3 blend(const in vec3 x,const in vec3 y,const in float opacity){return y*opacity+x*(1.0-opacity);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){float a=min(y.a,opacity);return vec4(blend(x.rgb,y.rgb,a),max(x.a,a));}",nLe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y)*0.5*opacity+x*(1.0-opacity);}",aLe="float blend(const in float x,const in float y){return(y==0.0)?y:max(1.0-(1.0-x)/y,0.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",sLe="float blend(const in float x,const in float y){return(y==1.0)?y:min(x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",oLe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x,y)*opacity+x*(1.0-opacity);}",lLe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return abs(x-y)*opacity+x*(1.0-opacity);}",uLe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y-2.0*x*y)*opacity+x*(1.0-opacity);}",cLe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x,y)*opacity+x*(1.0-opacity);}",hLe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return x*y*opacity+x*(1.0-opacity);}",dLe="float blend(const in float x,const in float y){return(y>0.0)?min(x/y,1.0):1.0;}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",fLe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-abs(1.0-x-y))*opacity+x*(1.0-opacity);}",pLe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y*opacity+x*(1.0-opacity);}",mLe="float blend(const in float x,const in float y){return(x<0.5)?(2.0*x*y):(1.0-2.0*(1.0-x)*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",gLe="float blend(const in float x,const in float y){return(y==1.0)?y:min(x*x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",vLe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-(1.0-x)*(1.0-y))*opacity+x*(1.0-opacity);}",yLe="float blend(const in float x,const in float y){return(y<0.5)?(2.0*x*y+x*x*(1.0-2.0*y)):(sqrt(x)*(2.0*y-1.0)+2.0*x*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",xLe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x+y-1.0,0.0)*opacity+x*(1.0-opacity);}",bLe=new Map([[wr.SKIP,null],[wr.ADD,rLe],[wr.ALPHA,iLe],[wr.AVERAGE,nLe],[wr.COLOR_BURN,aLe],[wr.COLOR_DODGE,sLe],[wr.DARKEN,oLe],[wr.DIFFERENCE,lLe],[wr.EXCLUSION,uLe],[wr.LIGHTEN,cLe],[wr.MULTIPLY,hLe],[wr.DIVIDE,dLe],[wr.NEGATION,fLe],[wr.NORMAL,pLe],[wr.OVERLAY,mLe],[wr.REFLECT,gLe],[wr.SCREEN,vLe],[wr.SOFT_LIGHT,yLe],[wr.SUBTRACT,xLe]]),wLe=class extends sa{constructor(e,t=1){super(),this.f=e,this.opacity=new Le(t)}getOpacity(){return this.opacity.value}setOpacity(e){this.opacity.value=e}get blendFunction(){return this.f}set blendFunction(e){this.f=e,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(e){this.blendFunction=e}getShaderCode(){return bLe.get(this.blendFunction)}},bu={NONE:0,DEPTH:1,CONVOLUTION:2},Du=class extends sa{constructor(e,t,{attributes:r=bu.NONE,blendFunction:i=wr.SCREEN,defines:n=new Map,uniforms:a=new Map,extensions:s=null,vertexShader:o=null}={}){super(),this.name=e,this.renderer=null,this.attributes=r,this.fragmentShader=t,this.vertexShader=o,this.defines=n,this.uniforms=a,this.extensions=s,this.blendMode=new wLe(i),this.blendMode.addEventListener("change",l=>this.setChanged())}getName(){return this.name}setRenderer(e){this.renderer=e}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(e){this.attributes=e,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(e){this.fragmentShader=e,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(e){this.vertexShader=e,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(e,t=Lc){}update(e,t,r){}setSize(e,t){}initialize(e,t,r){}dispose(){for(let e of Object.keys(this)){let t=this[e];if(t!==null&&typeof t.dispose=="function"){if(t instanceof Hh||t===this.renderer)continue;this[e].dispose()}}}};function w6(e,t,r){for(let i of t){let n="$1"+e+i.charAt(0).toUpperCase()+i.slice(1),a=new RegExp("([^\\.])(\\b"+i+"\\b)","g");for(let s of r.entries())s[1]!==null&&r.set(s[0],s[1].replace(a,n))}}function _Le(e,t,r,i,n,a,s){let o=new Map([["fragment",t.getFragmentShader()],["vertex",t.getVertexShader()]]),l=o.get("fragment")!==void 0&&/mainImage/.test(o.get("fragment")),u=o.get("fragment")!==void 0&&/mainUv/.test(o.get("fragment")),h=[],c=[],d=!1,f=!1;if(o.get("fragment")===void 0)console.error("Missing fragment shader",t);else if(u&&s&bu.CONVOLUTION)console.error("Effects that transform UV coordinates are incompatible with convolution effects",t);else if(!l&&!u)console.error("The fragment shader contains neither a mainImage nor a mainUv function",t);else{let m=/(?:\w+\s+(\w+)\([\w\s,]*\)\s*{[^}]+})/g,p=A3.Section;if(u){let v=`	${e}MainUv(UV);
`;r.set(p.FRAGMENT_MAIN_UV,r.get(p.FRAGMENT_MAIN_UV)+v),d=!0}if(o.get("vertex")!==null&&/mainSupport/.test(o.get("vertex"))){let v=`	${e}MainSupport(`;v+=/mainSupport *\([\w\s]*?uv\s*?\)/.test(o.get("vertex"))?`vUv);
`:`);
`,r.set(p.VERTEX_MAIN_SUPPORT,r.get(p.VERTEX_MAIN_SUPPORT)+v),h=h.concat([...o.get("vertex").matchAll(/(?:varying\s+\w+\s+(\w*))/g)].map(y=>y[1])),c=c.concat(h).concat([...o.get("vertex").matchAll(m)].map(y=>y[1]))}c=c.concat([...o.get("fragment").matchAll(m)].map(v=>v[1])),c=c.concat([...t.defines.keys()].map(v=>v.replace(/\([\w\s,]*\)/g,""))),c=c.concat([...t.uniforms.keys()]),t.uniforms.forEach((v,y)=>a.set(e+y.charAt(0).toUpperCase()+y.slice(1),v)),t.defines.forEach((v,y)=>n.set(e+y.charAt(0).toUpperCase()+y.slice(1),v)),w6(e,c,n),w6(e,c,o);let g=t.blendMode;if(i.set(g.blendFunction,g),l){let v=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/,y=`${e}MainImage(color0, UV, `;s&bu.DEPTH&&v.test(o.get("fragment"))&&(y+="depth, ",f=!0),y+=`color1);
	`;let x=e+"BlendOpacity";a.set(x,g.opacity),y+=`color0 = blend${g.blendFunction}(color0, color1, ${x});

	`,r.set(p.FRAGMENT_MAIN_IMAGE,r.get(p.FRAGMENT_MAIN_IMAGE)+y),y=`uniform float ${x};

`,r.set(p.FRAGMENT_HEAD,r.get(p.FRAGMENT_HEAD)+y)}r.set(p.FRAGMENT_HEAD,r.get(p.FRAGMENT_HEAD)+o.get("fragment")+`
`),o.get("vertex")!==null&&r.set(p.VERTEX_HEAD,r.get(p.VERTEX_HEAD)+o.get("vertex")+`
`)}return{varyings:h,transformedUv:d,readDepth:f}}var KS=class extends as{constructor(e,...t){super("EffectPass"),this.fullscreenMaterial=new A3(null,null,null,e),this.effects=t.sort((r,i)=>i.attributes-r.attributes),this.skipRendering=!1,this.uniformCount=0,this.varyingCount=0,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(e){this.fullscreenMaterial.encodeOutput=e}get dithering(){return this.fullscreenMaterial.dithering}set dithering(e){let t=this.fullscreenMaterial;t.dithering=e,t.needsUpdate=!0}verifyResources(){let e=this.renderer.capabilities,t=Math.min(e.maxFragmentUniforms,e.maxVertexUniforms);this.uniformCount>t&&console.warn("The current rendering context doesn't support more than "+t+" uniforms, but "+this.uniformCount+" were defined"),t=e.maxVaryings,this.varyingCount>t&&console.warn("The current rendering context doesn't support more than "+t+" varyings, but "+this.varyingCount+" were defined")}updateMaterial(){let e=A3.Section,t=new Map([[e.FRAGMENT_HEAD,""],[e.FRAGMENT_MAIN_UV,""],[e.FRAGMENT_MAIN_IMAGE,""],[e.VERTEX_HEAD,""],[e.VERTEX_MAIN_SUPPORT,""]]),r=new Map,i=new Map,n=new Map,a=new Set,s=0,o=0,l=0,u=!1,h=!1;for(let d of this.effects)if(d.blendMode.blendFunction===wr.SKIP)l|=d.getAttributes()&bu.DEPTH;else if(l&d.getAttributes()&bu.CONVOLUTION)console.error("Convolution effects cannot be merged",d);else{l|=d.getAttributes();let f="e"+s++,m=_Le(f,d,t,r,i,n,l);if(o+=m.varyings.length,u=u||m.transformedUv,h=h||m.readDepth,d.extensions!==null)for(let p of d.extensions)a.add(p)}let c=/\bblend\b/g;for(let d of r.values()){let f=d.getShaderCode().replace(c,`blend${d.blendFunction}`);t.set(e.FRAGMENT_HEAD,t.get(e.FRAGMENT_HEAD)+f+`
`)}if(l&bu.DEPTH){if(h){let d=`float depth = readDepth(UV);

	`;t.set(e.FRAGMENT_MAIN_IMAGE,d+t.get(e.FRAGMENT_MAIN_IMAGE))}this.needsDepthTexture=this.getDepthTexture()===null}else this.needsDepthTexture=!1;if(u){let d=`vec2 transformedUv = vUv;
`;t.set(e.FRAGMENT_MAIN_UV,d+t.get(e.FRAGMENT_MAIN_UV)),i.set("UV","transformedUv")}else i.set("UV","vUv");t.forEach((d,f,m)=>m.set(f,d.trim().replace(/^#/,`
#`))),this.uniformCount=n.size,this.varyingCount=o,this.skipRendering=s===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderParts(t).setExtensions(a).setUniforms(n).setDefines(i)}recompile(){this.updateMaterial(),this.verifyResources()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(e,t=Lc){this.fullscreenMaterial.depthBuffer=e,this.fullscreenMaterial.depthPacking=t;for(let r of this.effects)r.setDepthTexture(e,t)}render(e,t,r,i,n){for(let a of this.effects)a.update(e,t,i);if(!this.skipRendering||this.renderToScreen){let a=this.fullscreenMaterial;a.inputBuffer=t.texture,a.time+=i,e.setRenderTarget(this.renderToScreen?null:r),e.render(this.scene,this.camera)}}setSize(e,t){this.fullscreenMaterial.setSize(e,t);for(let r of this.effects)r.setSize(e,t)}initialize(e,t,r){this.renderer=e;for(let i of this.effects)i.initialize(e,t,r),i.addEventListener("change",n=>this.handleEvent(n));this.updateMaterial(),this.verifyResources(),r!==void 0&&r!==Ea&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(let e of this.effects)e.dispose()}handleEvent(e){switch(e.type){case"change":this.recompile();break}}},SLe=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],kq=class extends as{constructor({resolutionScale:e=.5,width:t=xs.AUTO_SIZE,height:r=xs.AUTO_SIZE,kernelSize:i=Ok.LARGE}={}){super("KawaseBlurPass"),this.renderTargetA=new Yr(1,1,{minFilter:Kt,magFilter:Kt,stencilBuffer:!1,depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";let n=this.resolution=new xs(this,t,r,e);n.addEventListener("change",a=>this.setSize(n.baseWidth,n.baseHeight)),this.blurMaterial=new y6,this.ditheredBlurMaterial=new y6,this.ditheredBlurMaterial.uniforms.scale=this.blurMaterial.uniforms.scale,this.ditheredBlurMaterial.dithering=!0,this.dithering=!1,this.kernelSize=i}getResolution(){return this.resolution}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get scale(){return this.blurMaterial.scale}set scale(e){this.blurMaterial.scale=e}getScale(){return this.blurMaterial.scale}setScale(e){this.blurMaterial.scale=e}getKernelSize(){return this.kernelSize}setKernelSize(e){this.kernelSize=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,t,r,i,n){let a=this.scene,s=this.camera,o=this.renderTargetA,l=this.renderTargetB,u=SLe[this.kernelSize],h=this.blurMaterial,c=t,d,f;for(this.fullscreenMaterial=h,d=0,f=u.length-1;d<f;++d){let m=d&1?l:o;h.kernel=u[d],h.inputBuffer=c.texture,e.setRenderTarget(m),e.render(a,s),c=m}this.dithering&&(h=this.ditheredBlurMaterial,this.fullscreenMaterial=h),h.kernel=u[d],h.inputBuffer=c.texture,e.setRenderTarget(this.renderToScreen?null:r),e.render(a,s)}setSize(e,t){let r=this.resolution;r.setBaseSize(e,t);let i=r.width,n=r.height;this.renderTargetA.setSize(i,n),this.renderTargetB.setSize(i,n),this.blurMaterial.setSize(i,n),this.ditheredBlurMaterial.setSize(i,n)}initialize(e,t,r){r!==void 0&&(this.renderTargetA.texture.type=r,this.renderTargetB.texture.type=r,r!==Ea?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.ditheredBlurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):e.outputEncoding===Ht&&(this.renderTargetA.texture.encoding=Ht,this.renderTargetB.texture.encoding=Ht))}static get AUTO_SIZE(){return xs.AUTO_SIZE}},ELe=class extends as{constructor({width:e=xs.AUTO_SIZE,height:t=xs.AUTO_SIZE,renderTarget:r,luminanceRange:i,colorOutput:n}={}){super("LuminancePass"),this.fullscreenMaterial=new $ke(n,i),this.needsSwap=!1,this.renderTarget=r,this.renderTarget===void 0&&(this.renderTarget=new Yr(1,1,{minFilter:Kt,magFilter:Kt,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target",this.renderTarget.texture.generateMipmaps=!1);let a=this.resolution=new xs(this,e,t);a.addEventListener("change",s=>this.setSize(a.baseWidth,a.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(e,t,r,i,n){let a=this.fullscreenMaterial;a.inputBuffer=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){let r=this.resolution;r.setBaseSize(e,t),this.renderTarget.setSize(r.width,r.height)}initialize(e,t,r){r!==void 0&&r!==Ea&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},MLe=class extends as{constructor(e,t){super("MaskPass",e,t),this.needsSwap=!1,this.clearPass=new Dk(!1,!1,!0),this.inverse=!1}get inverted(){return this.inverse}set inverted(e){this.inverse=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(e){this.inverted=e}render(e,t,r,i,n){let a=e.getContext(),s=e.state.buffers,o=this.scene,l=this.camera,u=this.clearPass,h=this.inverted?0:1,c=1-h;s.color.setMask(!1),s.depth.setMask(!1),s.color.setLocked(!0),s.depth.setLocked(!0),s.stencil.setTest(!0),s.stencil.setOp(a.REPLACE,a.REPLACE,a.REPLACE),s.stencil.setFunc(a.ALWAYS,h,4294967295),s.stencil.setClear(c),s.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?u.render(e,null):(u.render(e,t),u.render(e,r))),this.renderToScreen?(e.setRenderTarget(null),e.render(o,l)):(e.setRenderTarget(t),e.render(o,l),e.setRenderTarget(r),e.render(o,l)),s.color.setLocked(!1),s.depth.setLocked(!1),s.stencil.setLocked(!1),s.stencil.setFunc(a.EQUAL,1,4294967295),s.stencil.setOp(a.KEEP,a.KEEP,a.KEEP),s.stencil.setLocked(!0)}},Jl=class extends as{constructor(e,t="inputBuffer"){super("ShaderPass"),this.fullscreenMaterial=e,this.inputBufferUniform=null,this.setInput(t)}setInput(e){if(this.inputBufferUniform=null,this.fullscreenMaterial!==null){let t=this.fullscreenMaterial.uniforms;t!==void 0&&t[e]!==void 0&&(this.inputBufferUniform=t[e])}}render(e,t,r,i,n){this.inputBufferUniform!==null&&t!==null&&(this.inputBufferUniform.value=t.texture),e.setRenderTarget(this.renderToScreen?null:r),e.render(this.scene,this.camera)}initialize(e,t,r){r!==void 0&&r!==Ea&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},KA=1/1e3,CLe=1e3,ALe=class{constructor(){this.previousTime=0,this.currentTime=0,this.delta=0,this.fixedDelta=1e3/60,this.elapsed=0,this.timescale=1,this.fixedDeltaEnabled=!1,this.autoReset=!1}setFixedDeltaEnabled(e){return this.fixedDeltaEnabled=e,this}isAutoResetEnabled(e){return this.autoReset}setAutoResetEnabled(e){return typeof document<"u"&&document.hidden!==void 0&&(e?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this.autoReset=e),this}getDelta(){return this.delta*KA}getFixedDelta(){return this.fixedDelta*KA}setFixedDelta(e){return this.fixedDelta=e*CLe,this}getElapsed(){return this.elapsed*KA}getTimescale(){return this.timescale}setTimescale(e){return this.timescale=e,this}update(e){return this.fixedDeltaEnabled?this.delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=e!==void 0?e:performance.now(),this.delta=this.currentTime-this.previousTime),this.delta*=this.timescale,this.elapsed+=this.delta,this}reset(){return this.delta=0,this.elapsed=0,this.currentTime=performance.now(),this}handleEvent(e){document.hidden||(this.currentTime=performance.now())}dispose(){this.setAutoResetEnabled(!1)}},Ok={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},TLe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=clamp(texture2D(map,uv)*intensity,0.0,1.0);}`,PLe=class extends Du{constructor({blendFunction:e=wr.SCREEN,luminanceThreshold:t=.9,luminanceSmoothing:r=.025,resolutionScale:i=.5,intensity:n=1,width:a=xs.AUTO_SIZE,height:s=xs.AUTO_SIZE,kernelSize:o=Ok.LARGE}={}){super("BloomEffect",TLe,{blendFunction:e,uniforms:new Map([["map",new Le(null)],["intensity",new Le(n)]])}),this.renderTarget=new Yr(1,1,{minFilter:Kt,magFilter:Kt,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.renderTarget.texture.generateMipmaps=!1,this.uniforms.get("map").value=this.renderTarget.texture,this.luminancePass=new ELe({renderTarget:this.renderTarget,colorOutput:!0}),this.luminanceMaterial.threshold=t,this.luminanceMaterial.smoothingFactor=r,this.blurPass=new kq({resolutionScale:i,width:a,height:s,kernelSize:o});let l=this.blurPass.getResolution();l.addEventListener("change",u=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}get resolution(){return this.blurPass.resolution}getResolution(){return this.blurPass.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get dithering(){return this.blurPass.dithering}set dithering(e){this.blurPass.dithering=e}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(e){this.blurPass.kernelSize=e}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(e){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(e){this.uniforms.get("intensity").value=e}getIntensity(){return this.intensity}setIntensity(e){this.intensity=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}update(e,t,r){let i=this.renderTarget;this.luminancePass.enabled?(this.luminancePass.render(e,t,i),this.blurPass.render(e,i,i)):this.blurPass.render(e,t,i)}setSize(e,t){let r=this.resolution;r.setBaseSize(e,t),this.renderTarget.setSize(r.width,r.height),this.luminancePass.resolution.copy(r)}initialize(e,t,r){this.blurPass.initialize(e,t,r),r!==void 0&&(this.renderTarget.texture.type=r,e.outputEncoding===Ht&&(this.renderTarget.texture.encoding=Ht))}},DLe="uniform float brightness;uniform float contrast;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=inputColor.rgb+vec3(brightness-0.5);if(contrast>0.0){color/=vec3(1.0-contrast);}else{color*=vec3(1.0+contrast);}outputColor=vec4(min(color+vec3(0.5),1.0),inputColor.a);}",OLe=class extends Du{constructor({blendFunction:e=wr.NORMAL,brightness:t=0,contrast:r=0}={}){super("BrightnessContrastEffect",DLe,{blendFunction:e,uniforms:new Map([["brightness",new Le(t)],["contrast",new Le(r)]])})}get brightness(){return this.uniforms.get("brightness").value}set brightness(e){this.uniforms.get("brightness").value=e}getBrightness(e){return this.brightness}setBrightness(e){this.brightness=e}get contrast(){return this.uniforms.get("contrast").value}set contrast(e){this.uniforms.get("contrast").value=e}getContrast(e){return this.contrast}setContrast(e){this.contrast=e}},ILe="void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=vec4(vec3(average(inputColor.rgb)),inputColor.a);}",RLe=class extends Du{constructor(e=wr.NORMAL){super("ColorAverageEffect",ILe,{blendFunction:e})}},kLe="varying vec2 vUvR;varying vec2 vUvB;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 ra=texture2D(inputBuffer,vUvR).ra;vec2 ba=texture2D(inputBuffer,vUvB).ba;outputColor=vec4(ra.x,inputColor.g,ba.x,max(max(ra.y,ba.y),inputColor.a));}",LLe="uniform vec2 offset;varying vec2 vUvR;varying vec2 vUvB;void mainSupport(const in vec2 uv){vec2 shift=offset*vec2(1.0,aspect);vUvR=uv+shift;vUvB=uv-shift;}",BLe=class extends Du{constructor({blendFunction:e=wr.NORMAL,offset:t=new re(.001,5e-4)}={}){super("ChromaticAberrationEffect",kLe,{vertexShader:LLe,blendFunction:e,attributes:bu.CONVOLUTION,uniforms:new Map([["offset",new Le(t)]])})}get offset(){return this.uniforms.get("offset").value}set offset(e){this.uniforms.get("offset").value=e}getOffset(){return this.offset}setOffset(e){this.offset=e}},NLe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D nearColorBuffer;uniform mediump sampler2D farColorBuffer;
#else
uniform lowp sampler2D nearColorBuffer;uniform lowp sampler2D farColorBuffer;
#endif
uniform lowp sampler2D nearCoCBuffer;uniform float scale;void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){vec4 colorNear=texture2D(nearColorBuffer,uv);vec4 colorFar=texture2D(farColorBuffer,uv);float CoCNear=texture2D(nearCoCBuffer,uv).r;CoCNear=min(CoCNear*scale,1.0);vec4 result=inputColor*(1.0-colorFar.a)+colorFar;result=mix(result,colorNear,CoCNear);outputColor=result;}`,zLe=class extends Du{constructor(e,{blendFunction:t=wr.NORMAL,worldFocusDistance:r,worldFocusRange:i,focusDistance:n=0,focalLength:a=.1,focusRange:s=a,bokehScale:o=1,width:l=xs.AUTO_SIZE,height:u=xs.AUTO_SIZE}={}){super("DepthOfFieldEffect",NLe,{blendFunction:t,attributes:bu.DEPTH,uniforms:new Map([["nearColorBuffer",new Le(null)],["farColorBuffer",new Le(null)],["nearCoCBuffer",new Le(null)],["scale",new Le(1)]])}),this.camera=e,this.renderTarget=new Yr(1,1,{minFilter:Kt,magFilter:Kt,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="DoF.Intermediate",this.renderTarget.texture.generateMipmaps=!1,this.renderTargetMasked=this.renderTarget.clone(),this.renderTargetMasked.texture.name="DoF.Masked.Far",this.renderTargetNear=this.renderTarget.clone(),this.renderTargetNear.texture.name="DoF.Bokeh.Near",this.uniforms.get("nearColorBuffer").value=this.renderTargetNear.texture,this.renderTargetFar=this.renderTarget.clone(),this.renderTargetFar.texture.name="DoF.Bokeh.Far",this.uniforms.get("farColorBuffer").value=this.renderTargetFar.texture,this.renderTargetCoC=this.renderTarget.clone(),this.renderTargetCoC.texture.name="DoF.CoC",this.renderTargetCoCBlurred=this.renderTargetCoC.clone(),this.renderTargetCoCBlurred.texture.name="DoF.CoC.Blurred",this.uniforms.get("nearCoCBuffer").value=this.renderTargetCoCBlurred.texture,this.cocPass=new Jl(new kke(e));let h=this.cocMaterial;h.focusDistance=n,h.focusRange=s,r!==void 0&&(h.worldFocusDistance=r),i!==void 0&&(h.worldFocusRange=i),this.blurPass=new kq({kernelSize:Ok.MEDIUM,width:l,height:u});let c=this.blurPass.getResolution();c.addEventListener("change",f=>this.setSize(c.getBaseWidth(),c.getBaseHeight())),this.maskPass=new Jl(new qke(this.renderTargetCoC.texture));let d=this.maskPass.fullscreenMaterial;d.maskFunction=Rq.MULTIPLY,d.colorChannel=Iq.GREEN,this.bokehNearBasePass=new Jl(new nw(!1,!0)),this.bokehNearBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehNearFillPass=new Jl(new nw(!0,!0)),this.bokehNearFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehFarBasePass=new Jl(new nw(!1,!1)),this.bokehFarBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.bokehFarFillPass=new Jl(new nw(!0,!1)),this.bokehFarFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.target=null,this.bokehScale=o}get cocTexture(){return this.renderTargetCoC.texture}get cocMaterial(){return this.cocPass.fullscreenMaterial}get circleOfConfusionMaterial(){return this.cocMaterial}getCircleOfConfusionMaterial(){return this.circleOfConfusionMaterial}getBlurPass(){return this.blurPass}get resolution(){return this.blurPass.getResolution()}getResolution(){return this.blurPass.getResolution()}get bokehScale(){return this.uniforms.get("scale").value}set bokehScale(e){let t=[this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass];for(let r of t)r.fullscreenMaterial.setScale(e);this.maskPass.fullscreenMaterial.setStrength(e),this.uniforms.get("scale").value=e}getBokehScale(){return this.bokehScale}setBokehScale(e){this.bokehScale=e}getTarget(){return this.target}setTarget(e){this.target=e}calculateFocusDistance(e){let t=this.camera,r=t.position.distanceTo(e);return C3(-r,t.near,t.far)}setDepthTexture(e,t=Lc){this.circleOfConfusionMaterial.depthBuffer=e,this.circleOfConfusionMaterial.depthPacking=t}update(e,t,r){let i=this.renderTarget,n=this.renderTargetCoC,a=this.renderTargetCoCBlurred,s=this.renderTargetMasked;if(this.target!==null){let o=this.calculateFocusDistance(this.target);this.circleOfConfusionMaterial.focusDistance=o}this.cocPass.render(e,null,n),this.blurPass.render(e,n,a),this.maskPass.render(e,t,s),this.bokehFarBasePass.render(e,s,i),this.bokehFarFillPass.render(e,i,this.renderTargetFar),this.bokehNearBasePass.render(e,t,i),this.bokehNearFillPass.render(e,i,this.renderTargetNear)}setSize(e,t){let r=this.resolution;r.setBaseSize(e,t);let i=r.width,n=r.height,a=[this.cocPass,this.blurPass,this.maskPass,this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass];a.push(this.renderTargetCoC,this.renderTargetMasked),a.forEach(s=>s.setSize(e,t)),a=[this.renderTarget,this.renderTargetNear,this.renderTargetFar,this.renderTargetCoCBlurred],a.forEach(s=>s.setSize(i,n)),[this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass].forEach(s=>s.fullscreenMaterial.setSize(i,n))}initialize(e,t,r){[this.cocPass,this.maskPass,this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass].forEach(i=>i.initialize(e,t,r)),this.blurPass.initialize(e,t,Ea),r!==void 0&&(this.renderTarget.texture.type=r,this.renderTargetNear.texture.type=r,this.renderTargetFar.texture.type=r,this.renderTargetMasked.texture.type=r,e.outputEncoding===Ht&&(this.renderTarget.texture.encoding=Ht,this.renderTargetNear.texture.encoding=Ht,this.renderTargetFar.texture.encoding=Ht,this.renderTargetMasked.texture.encoding=Ht))}};new T;new ze;var FLe="uniform vec3 hue;uniform float saturation;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(dot(inputColor.rgb,hue.xyz),dot(inputColor.rgb,hue.zxy),dot(inputColor.rgb,hue.yzx));float average=(color.r+color.g+color.b)/3.0;vec3 diff=average-color;if(saturation>0.0){color+=diff*(1.0-1.0/(1.001-saturation));}else{color+=diff*-saturation;}outputColor=vec4(min(color,1.0),inputColor.a);}",ULe=class extends Du{constructor({blendFunction:e=wr.NORMAL,hue:t=0,saturation:r=0}={}){super("HueSaturationEffect",FLe,{blendFunction:e,uniforms:new Map([["hue",new Le(new T)],["saturation",new Le(r)]])}),this.hue=t}get saturation(){return this.uniforms.get("saturation").value}set saturation(e){this.uniforms.get("saturation").value=e}getSaturation(){return this.saturation}setSaturation(e){this.saturation=e}get hue(){let e=this.uniforms.get("hue").value;return Math.acos((e.x*3-1)/2)}set hue(e){let t=Math.sin(e),r=Math.cos(e);this.uniforms.get("hue").value.set((2*r+1)/3,(-Math.sqrt(3)*t-r+1)/3,(Math.sqrt(3)*t-r+1)/3)}getHue(){return this.hue}setHue(e){this.hue=e}};new At;var jLe=`void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 noise=vec3(rand(uv*time));
#ifdef PREMULTIPLY
outputColor=vec4(min(inputColor.rgb*noise,vec3(1.0)),inputColor.a);
#else
outputColor=vec4(noise,inputColor.a);
#endif
}`,VLe=class extends Du{constructor({blendFunction:e=wr.SCREEN,premultiply:t=!1}={}){super("NoiseEffect",jLe,{blendFunction:e}),this.premultiply=t}get premultiply(){return this.defines.has("PREMULTIPLY")}set premultiply(e){this.premultiply!==e&&(e?this.defines.set("PREMULTIPLY","1"):this.defines.delete("PREMULTIPLY"),this.setChanged())}isPremultiplied(){return this.premultiply}setPremultiplied(e){this.premultiply=e}},HLe="uniform bool active;uniform vec2 d;void mainUv(inout vec2 uv){if(active){uv=vec2(d.x*(floor(uv.x/d.x)+0.5),d.y*(floor(uv.y/d.y)+0.5));}}",GLe=class extends Du{constructor(e=30){super("PixelationEffect",HLe,{uniforms:new Map([["active",new Le(!1)],["d",new Le(new re)]])}),this.resolution=new re,this.d=0,this.granularity=e}get granularity(){return this.d}set granularity(e){let t=Math.floor(e);t%2>0&&(t+=1),this.d=t,this.uniforms.get("active").value=t>0,this.setSize(this.resolution.width,this.resolution.height)}getGranularity(){return this.granularity}setGranularity(e){this.granularity=e}setSize(e,t){this.resolution.set(e,t),this.uniforms.get("d").value.setScalar(this.d).divide(this.resolution)}};new T;new T;var _6="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAQCAYAAACm53kpAAAAeElEQVRYR+2XSwqAMAxEJ168ePEqwRSKhIIiuHjJqiU0gWE+1CQdApcVAMUAuARaMGCX1MIL/Ow13++9lW2s3mW9MWvsnWc/2fvGygwPAN4E8QzAA4CXAB6AHjG4JTHYI1ey3pcx6FHnEfhLDOIBKAmUBK6/ANUDTlROXAHd9EC1AAAAAElFTkSuQmCC",S6="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAAIwCAYAAAABNmBHAAAgAElEQVR4Xuy9CbhlV1ktOvbpq09DkiIkUBI6kxASIH0DlAQiIK1wRfSJTx+i4JX7vKIigs8HXpXvqVcvrcC9agQ7IDTSSWgqCQQliDRBJKkkhDSkqVPNqVOnP+8b//rH3P+eZ+199tlznVTlvVrft7+1T7OaueZY42/m37QALKNk2wHg1pITlB17mC+Pp11W3X/LHyT32vhg48/5SOv+PnwpsHA70JoGlueB1iKApeqzvOzn44GatTB76Xzhd7suBR7+WWADgDEAwwCG/L54b/poDLrHuvvm70Z2Avhsc+PVcxscBU8F8C8ADg5+ipIjD/PlGwfgju8B924E5seARUfLsiNmqQW0IjL8+7L2NYD/7COBzfcCm+aB8SVgdAkYIRCXKyDax4EdAanL5PuNPllNvXDlAHwFgP8AcC2AhRIoDXbsYb48dl5WkVFTE3LGDcC9m4CZCWBuFFgeAZaGAYJQQCRqDHT+McJrVb8zwATUXH02MHYfMHEIGFsAxgjApQqACYQORjtd/B7Axt/z79sC0+cMPgjjlwPwVwHcA+DfAHzTxcVgWBroqMN8+cYBeM71wH0TwKExYHYUWCIAHYRLTlkCYgcIBcAgU/n3qy8GRu4HRgnAOWBkERhddPAJhGJDBxkvw7cqimr+zFM/ZLnZF64cgL8BYD+AWwB8x/dlWuWagHiYL984AJ/0RWBy1AE4AizyM1yxYAcTigW55xMbAkxEiwEdkJ/ZCQxPAiOHgBECcKEC4TBZcKkSv+mTieNcNPNC26mLNsj45QD8LQDTAO4GcJt/7iw2bfoG4WG+vAGwm9ExiEg69zpg/wgwPQLMjgALzn4E4aIzoJjQ9g4024uygkj+pyuAoX0VAIfngOH5NgCHMhAm8Sv2y3XDZeBhNIp8OzJE8OsBzAKYBHAXgDt8/4O+MVT0j4f58o0D8Pxrgf3DwMwIMEPQEYRkNwfgsuuDZLskip0No0gWMD/9HGDoADAkAC4Aw/wsAgZAgs2Z0ABI0GU6IVmKv+f28KDnHxkA/G0A8y6G73N9kOCjXnh/Ebb6OvgwX75xAF5wLTA1VIHPADgMLDj4yIA5AAm6aCUnv4oz46eeDwxNAUMzwJAz4BABSNDFTwSfg7DDKHE23MG5PqIY8A1u/dINs9dBdy8AgnGPM2NfUBrsnw7z5RsH4IXXAAcJviFgluAbygBINnSLWOAjGxJ4pgOKDV0v/OSLKp8iGXBovhLBBOCQM2ACoTOhnYrAdItYbCij5JFzRyIAqRccAnDAQUjg6UNQ7hsMXP0cRQAexss3DsCLCECCLwCQzMcPwUi2MwAScAKbfnY/YRLFQ8DHX+IAJAMSfDkAF13kLvleIjhjQQHxUVS3jjgGpKeeNzYVQEjgUS8k+PghONdhIwAP4+XXBYCHKIJbwJyDTgaIAdCBJx3Q2M8tYAHP9m4df/ylQOsQ0JqtRLCx30K1wtLBggScQOgsKBGcWHAJeOwRC0BSM1mQIKRbhh+Bj98JQP6t4U0APEyXXxcAEnxkQAFwoVUxID9kvQg+c1C7vidRbIDkc24B//hTQGumDcCWA5DgMxASdNIFBUI5pCML8v8API5zfEQx4BudgqiczviSnJhQwCP4BMCGl+wO8+U7AJi/W4O4YS6+pmK/2ciADsAOBhTIIiAJnPB7AvNjP+0AnANaYkAHX2JBAc+tYaJXOqBZv24Vc386XW5dtkHGW+4HFAJonpOe+YYQZAShgKjv3PNvPQaxVoI8zJdfFwASfPzMUwS3Kt1v0UFIlos6oDFdAGFcliMAP/ryAEAGNwQRnDOgLbdlIEwrIs6AZ/QgkMMHQF6ZAKQcJAsSYPwIeAIk9wJgoPK1gi7+PwF4GC/fOAAvIQPSs0URTPBJ/Pp3GSEGRHfBCIQ0xowBtUbcAj7ys5X4Jfu1HIAGQrIgQRXEsAFQIORDFhiDY/rMHmrU4QUgR08AkgUjCAW6CD6CkwBsAIQC4GG6fPMA3OXiNzCg2I9gNCMksmAAoemDzoimFwL48M85AKkiuQVMAAp8CYRRDAt8GQiJ67N6GJODAXAHlsGguscA2AJg1IPGYmxOpBxFWkRN9LsATgIwXnNs/v/5z/9XCf8BO3YAtxbc/46/KDt+5+ea1Yku2VUxHz/z0v24FwMGK1gWsK2OUUxHHdCBeRUB6OxHABr4ZICIBd0QWSF+XRdMTAjgCdTrG9cBNwE4F8CpDkICyYLGsuhFt6zs+gISwUen8zEAjgMw4cfx2H6O/90yAFo84Cbg4ID3/9TfLTt+5+ebnRABkODjx0SwPi5ec/FrYpmqSAxM8Dn60CsqAFI6GfhqAMiDE/gokmvEr0C4PgDkBQm40wE8zMFEUDKEVoxIMLl/KS73mE7H9d+vcKHQQcjwW0Yu9nP8m8sAmOIBuWY6wP2/4s0ezjjg8TuvaR6ABJ70vxUApGrm7EbGE+i472BAB+WHfqHS/eoAaEwY2E9+wLSXTqhI7CXgnB6LCoOJ4BiST+hTnG0HcCwAglCx3ARoZEVFXnBPp/O/A/hXACc7CPs9/i1lAOyIB+RDX+P9/+pbQjjjAMfv/PL6AFDs1wFAgs/9fgKfgdE/ZEpuiQlbwAde6QAMBgiRmsSwA9BY0JfjovGRDBMH4TlcXGhcBOc6HkF0gjPhZgchxTLZMAci/04W/B6Ab3t09EPXcPyflgFwRTwgJ2MN9/8bf5qFM67x+B/aW4XQz42FeL0YrRyikztUFw0704mf9kXgxhOAqc3AAsPyRxxQCs/PdXOFY0W1KHy3QIUGtx+6vdnx1vsB+dsTncm2AogglFgVEAlUWrOMB2RyEmMCGQ/Y7/HvKns6tfGAnJQ+r/9b76oJZ1zD8WdyQjYBh8aBhVEHjELouQ8ukQ7VRSCJAALwkr+sALhnGzDD3JAJYJHg9uhoi4bx8ytkWUtvHT/7+Zc4dw1uZ3612fH2dkQf7yxIEEockwkJQn4IQoq8unhAhmPRKKFx0uv4K8ueTs94wD7u//VX9ghn7OP4c+4G7h8HpseB+dF2AKlFLwuAIZ8jD6NPrOhAffmfA9/ZBuzZCkyRWSeqBCWyoYGQ5yQrBpDbum/ME1HoPo0XEkSD2zlfbna8q6+EUJcTCxKEtHL5EQjP6BEPyIgYAZBvYt3xHyx7OqvGA65y/7/9wVXCGVc5/sl7qxD66dEqiYgRzAqhN1A4CBNAAlDyAFI+iZ9/N3DLJuC+jcDUBmCWyUnOrmTYCMIOkNclLg0B8/RsNLg9+UvNjnd1APLmmQpFHyEBROuWACQT8nN+H/GAvY7/VNnT6SsesMf13/CpahGnZzhjj+PPmwX2MYdDIfQexWyBAwEUOQDrRDN/98p3A7dvAO6fAA5sqHJDBEAyoUVGkwEd6HR12XU4kwzfl6fCXTZzjy57vvnR513X7Hj7AyDvggAUi9EyFgiZqNxPQF6345nOWbD1HQ/Y5fpvuLa/2+82/vNHgAPDFQDnhoF5j2C2qBWCI8bw1eRw5CL5l94L3DEOTI4DB8Y9OWmsEu/zBJ3rgsaybqBob/7A4C7jtWcooRrczr+u2fH2D0AOQgAUCxKEP7aGgLy64+m6KdjWFA9Yc/03/Osa4glrjr+AupqHz1sEs0cxG0BC9HIePLoit9eNkVf9L+DuUWByDJgaq4ybGYLPAWgiXmLedUE7dwC7saL7CqfPKXi4NYdaykCD410bAHlDEsNiwZ9wAPYbkJcfz6T2gm3N8YDZ9d/wHxUA+739fPwXPrSKYGb+BuP3jAFDElFH9HIWwbzCIGkBr/or4J4RYO8oMOW6ZVcAuvi1Cgoha04BCwT5gfMKHm7NoRde2+x41w5A3hQZkADk5+cGiAeMx3+/7AENFA8Yrv/G71cAXFM4Yzj+otOAaQLQA0gZxaIIZtMDFTigKJV8H9Iq6aZ59ZXAvSPAvpEKgBTtBODcSCWCZeRYtpzrmLyeGNCAyFl1v+Hei8qeb370Rdc2O97BAMi7EgB/2QG41nhAHU9LuWAbOB7Qr//GPRUA13r7Gv9FZwIMoVcEswEwfDoimEP0shKKtIphaZQAXv1+YM+wA3DEdcvRKkGJADQQEsQuhi1Tjt95vBsh5nx2IO59SsHDrTmUOStNjndwAAqEry0IyCMICkOyiuIBNwBvPFQQT7gBuPjc9oRYAIHyOEL4vIFEYVNaOou5vCGE/tV/A0wOVcnpzI47NOri3QFIBpSeaSDUdYLOSWvYImSGgftpJDa4MWJbAGxivGUA5MAOc0Be6eVLj7/4Mk+hzCOYPYpZDBiNkLh+G/M3yFyv/ltgL3W3YQfgcFUhgRY2PwY+Z7/EhAR1SFyXCOb57r28QfQBsJQBMn5D4y0HYLPje9Cd7RIC0PM3EiMofF4gVCBp1P840ix/gyz56r+vAMjk9Gl375iB4+CzveuZdLkkEPJ8ZEfX/6R73vOjzT5Si9hucLxHAVg4PwJgRwh9CKOXK8YA4ZEqKZXSQWh5P+5AftXfA/uGKvYjCKn72cctbFrZNECka5L5CPwIPtMH3TVz17MLB5gdLgA2Nd6jACycHwLQxFEUSR5ASvARDB0h9AQb9bXIgCGk6lUfAPYTgEPAITKgg1BObk58srTJgG58WMkWMaAbQQT1nc8rHGANAJsc71EAFs4PAagQestgC1lsBJ4BMCSOK6dDUcwqqaFiQr/0QeAAAdjy+jBiQQeeMSBZT3nCPUDIa9z+/MIB1gCwyfEeBWDh/BCAeQSzgkjFfGLBBD5nxQ4DxN0wv3hVxX5TBGDwL5obxvVA5YqYL5BeMLd66YYxJpRB0gK+96LCAdYAsMnxHgVg4fwIgMrhUPKQ2C+Bz0PmBTqBMQehAbDlIjj4F80KJguSVZ0FuXpjoCOgXawLjALhbT9eOMAuAGxqvEcBWDg/l1IE05Ed0ygZnyHdz0VwCqEPIfNyx0QQvvLDFQCp+8nfZk5und8tXwIgWcHSNX0N2CJmnAl3v6RwgNnhl17T7HiPArBwfghAS7mV/hey2JS9FvM3BLpUUi1YwDRMXvkRYJoAlAh2l0dcZ04s6JUTDIjyBcrl4yDc/dLCAdYAsMnxHgVg4fxwKVwJgGEJNmWtxpQMpX9on2eRhVA+O56AjMfnP+e3Xvf3NwG4xIPTleiY55bpGh6UbafNU0l0z0p+5Jh5HqYJ6b51nP6XP8cx12XNHQVgIQB/bFPVg2OC7Q+WgVFWng/FvtWLI06uWh5oguKEcXVS/9sEAF//VGD7t4ETDgJbF4CNi8CGZWBs2fPL/H6Vwp2KEtVk4fJ+v/EIYPN9wKa5qu+IncfPwXHVZe/aOL3EbwS7xv8A1rQvnO0j8PArTgTGZ4BxFv9mIxhOCGsv+0OPYDRghcLfkWkEuq0+G00x4OtfDGz+d2DbHmDLjL8si8AYP/7CGIAiEEMTG92zXqSbH+d9R2aA0XnvO+JjthiIrOVDHHPOkBrzUQAWAPsZp3oPDpa/Xag6EVkLBK+5rAnJC3/nYk/APD704WiEAV8OTHwX2LQH2DgFbJgFNrBhjd8r79deGoEwsllgNBOzy8CdjweG9wBj08AIAci2D6HafmyAk4/Z7SJ72hGYRwFYAMDLTwOGp4FRFgD3HhzqRGQiyeurqOdG6r0Rm8IEZjzRlkiqCWoEgK8Axm4BJu4HJhyAbFhDxmbDGnZO4j0SgLGDkpibgEq66TJw/1nA0F5gdLpq+zDqFfd5LMeWqu5HNST0uJOIllg+qgMWgI+HPv0xwLA3gWHpW2sC441gCECbmKziaGrnUdMO4aHeh6MxAP4SMHI7ML4HGD8AjHvHJGNAgpDgY/ck3stipRemvVhc+uASMPUEYGh/9dIRgGx8Y+MNbR/00uVtH0wEx94j/v0oAxaA8Ed+GBieAYZZg5kADC0QWGOFzGJlcGPzl1BxNLXD8sk4xftwNAbA/wwM3wGMUmxOOQBnHXzetIYvibonmSiuYTNjriVg7glAiwBk0fNZH6+PmX9P6kfNmCXGpftJ7TgKwBIAnln14BAAYxMYm5C6RjCyCoOyr0qkD/c+HI0B8DXA8N3AyCQwesD1VQKH7EcASm1Q+y4CkN9pUKiVF5nLvy+fBbTUd8QBaH1HvNBROiZvfsNnrF4kcvPwpdsBLBeU18Nf7AB23Dp4ecHC8oBgUlJJecLS+7+WOpE3gbE+HKw+yoevCYkMGKqPJrdEKARutaFYRs1fiEZ0wP8CDN8LDO8FRqYq3W10pgKgfYLaYCzootgA6KXaTA90y374TKB1sBozy77xHFZ536utRgAmEaw6g5kUSFZwSXnA330qsOlfgHMPDlZesLA8IOjoLypPWHj/11EnCiVwkz7kAExtsGraYUWdSDX5TmsagL8KDBGA7Bd30JsW0oWivnEOQNP7yGTSBR101AlZSUtGyfgZDkCWY1HnJdcBVe6325hTvelg2CQjZNDygG/2An0j1wKnL6y9vGBheUC8prQ8YeH9X39OVQSc7Mc6fCaKvAeHdCIVf4yMYCynTpX+nb97NJmlSQb8r8DQHm9YOFUZTKOzoXGhs6AxF0HIexcLBvWBuiHN8s2ne98R3qc6L4Vyb2oBVjfm9MIFHbjDCh6kPOBbQoG+oW8CO5bWVl6wsDwgfr20PGHh/X/1iaEIuDcCTIW/1Q4rFv8OnYiW3c+W2iKwUjKbyjQNwL1uuR6sAEgDgq1brXOmV81PxhNB6DUDBSYzQJwFtz623XcktX1Q1VWKaTF/zZhVazBVYA1tX5MazsGvobwe/jQr0Ne6BTh5uf/ygoXlAfG60vKEhff/rSe1i4DnTWDUACY1guFTDqLYdCBvf6DJYSMYATBfOx1kLfj1v1axH10nQ3Sd0GUkBnTfpemtBJgseIKQAHLQcVxa2TnuMW0Aqui5es8xBIegVdVVE8VhzHnLh65WMB9An+X18K6aAn2tO4ETl6vqbKuVFywsDwhevqg8YeH93/Rk70JE90nowxZbIJjvS3WYNSGUwGHJTpPxwwcbBuBrgRYBeKACn7VtpdUu/c0NJxO9BIxcKu4TTODzbkonPLoaL0vyUQRb2y8HsL1ckfWzMeuFi40Qezqi+yiPhyt7FOjr6/gCFwgP7Xb5vssTFt7/nQRg6MGRWmDRoeyTlpgw68GRTwgZgo1gGmXAX6/8dtaylSKY/koyID9BhzML3q1gAos2AcOrZYSoq/pJp1VtODRm9Z3LS/7WjVkvXOzEtOpKyGrlAT+4SoG+VY8vBGCvy/dVnrDw/vee65NBJiAjBIVcAJQjOm+DkCZEeiGAMw6sAwDZsJrAdhFM9rPGhd4904Co5oVuCZPV6kD40Ec6+9W8dBTBsfdc3nkpvnB82fp2RPcs79dHgb51LA9ofsDV6vut5/3PnxcAmLVBiDqgevDaJLkYrpuQxzcNwN8AWgIgRbB8loEBzXDwl4cGiDGft58SCOWGedgjvOJ+bPvgRkiuA+ZjzhnQQOiFNVbloa7l/fos0LdO5QENgEXlCfs8Qbf7HyMA3QVjYihYhLENgjX9y/qwxQmRU/asfd0ZcLU2CHVGyusJQLKfVi98CS12T5f7iECkHpsMkAhCF8+nshWH2I/jXsOYO144GV/9ApAIrS3vt4YCfetQHtAA2G+/4PW4/2PPbzMgmUMi2NoeSCRxIt2/FvuxWURIWCXg357gfTjEDNIHnTRXRCpH5ugKwGl3HpMBXQc0v6WLYVm/5limj04rG762K2uYY9jBkr9+rI03NL5ZbczS/dJ+LQyoga4o77fGAn0NlwdMAOy3vl/T938KAcj121z8Bn+Y9eWQJRz8Y6kNagDh2ey5EvxjxQD8TWdAuneCCO4An1vw5vdzQMmdktwq7pLZQR+dM34+ZumAxvY1Y04uqOAJ6FsExzeto7zfAAX6GiwPaLWR1lrfr8n7f/Rl3QGzmsis+/uO71V9OFgP2gpPhgr7TGRqRUT6dyvr4aIs/pm/2zVUNbBSv6G8e5pEv0Cvec7Po7+bTtjlBRlkvAMBkDeQyvsNWKCvofKACYBrre/X1P0/oWEAnnFD1YdjhtXxR73mX10FfCHHE9pVWcGAI/S0gKsfA2y+twrFZw6Hxf/F0Pk8Ri/kpGSnMuDx5T0iACgQHioo0NdAecBUHW6QdsV2/cL7v/Cyqr5gnc42CCOcfX1VIZ/V8We9IDmTzVXwPDJiXuKXPxtDBma8+lzP4WAgKkPxCUAPE4v5GzEuMX0PYJPLhB6FJsc7MAMmkVxaYC/K9gG+F1++8AQ7Gwbgk78I7GFpXgIwFiRXOwaJZPUbiR0yCUDRk+cHf+YpwMj9HgfI8ClGPyvsSiH0WSKRuYlitLb/zHM/JOSs5C/YIC9cMQDZr/dwxgOW9gtGYUBi0wA8l304vDQvAchilFbpIBQhZ7Ejq6ZQ0/Yhil8y4j89Axie9DAsD6FX9HOK3QtROTFkviN83kG4felIY8DCeLrSeMDSfsEovAECUFsTjHD+tcB+tkFgcXKvBRir7qtFl9owmO4Xy/1G3bAFfPrZHorFNWBFwHjQAFctIghj2kBarw06If/+MM9ZqTN6DgsDojCerjQesLRfMApvoGkAWh8Ob/tgAPSKWCp8ngNQtadjmTdltvNvn3peFYhgQQgh+iUmEaUAUoXM1yRLmWuFLaE9Z+XIAWBhPF1pPGBpv2AU3kDTALzwmqo6qtVh9kJErAudABia38TC5wJgS2xIhAwBn3yhByL4EhzXfRXxYsDTJ4IvrNN2JFMxZcBzVo4cABbG05XGA5b2C0bhDTQNQLZBYH1AVsQSAAU+imI1obHyblnjG/kJk3U8BHz8xVUQAhnQIl5CyNgKAGp5LKSSCoAySh5Jj79vTagcxUaIBeRNe79g9gq+DXig4wGzy+PONfT7RWFA4noAkGXZVAhcBckJQgNgrLiaNb3paIDo1vHHX+oA9LQBi4DxJcOUPJUnTgU2NJUyROs8irGARxQAC+PpCtsFd40H/AEf0gMQkLgeACT41PiGoLOKqyrJq3K/Ya9mNyr5FusN/uPLPIeDa8Bc+w3rtyl4VFHaMZc3i9RWBM9jjzgAFsbTFbYLRmm/YBTeQNMAtD4cBKDXBTQGdAB2MGBo8SCLmEuS1AFVAJ3A/NhPt0PoCcA8bSDG76XI7aySg6JYuGfKwJHFgH0E5B3ueMCe/Y4L+xVHAOZ+9EHcEgQgwbeiEYx6jwTdz4qfu7EhEJqxGqruf/RnHIAEnxgwBM0aC8aUAYWNBRCmoIll4HTqO122QcZbrgMWxtMVtgvuOx6wa7/jwhtoGoDWh4MBJ16WN4lfr8AqI0TVV1O1fa9BbQzovkAy4Ed+NgCQUSxZCFWvCOaOFREXyUwZOPIA2GdA3uGOB6wPaOz+QPv5S+MA3OXiN9aclghW+d3IgupBF2pPqxcxGenDPxfSRh2ASiKKiVP2PaZScvAKoA0VDc6cOlIB2GdA3uGOB1zR77iwX/F6AFB9ONSOQW0frA50sILVcckWJyIDSgwPAVcJgFbYuZ3FJvAlEHbJ3IsgJLGedeBIA+AAAXmHOx6wo99xYb/i9QKg2iAIfDJEJHqj4SExbEty0gkdhB/6P9oZbBZIGiKYVb9GKaN50lRHBLOvhDxh/5EKwDUG5B3ueMB2QGM/grb7/6wHAPNGMAY+GSGUjC52VX2f2CD4+HO0gqkZfegXKgBaHkcWtS0AWii9xG1ImrLlN5XR8L8fmQD05BVrmEENmpYSP9QX+KHiqj2/82+HqqDWwnbBRfGATdzAegGwru2DpRq7Mzq2fpAf0Nq0Rl2wBXzglZ4yUAPAmDSVWDBPHQjLcgTqOZ6zUvdKHh4ruDCerox/Dnu7YqwXAC1NI/QcEQuK6WK/kdgCTGC0PYAP/KIDMBgglq+hIkrOfsaCviLSofcJgJ5AdM7kkSaCj/HqQKVIGvD4swF8bcBjmzjsaQ2H5D/6acBd9wALB4DFWWB5AVherMp4GKIYEOp7+26UF0aSfT/xYuDG7wDjrIpAERytXf2vajj7ueryQXSFl10K/ON3gIWDwCLvjfGB8Z54O+Ee4ve6513uB2R1yzsqC+twbC8HcNVhfAeaBuDP/TvwtS3A/ePAIfYFVlPq2HHTuyulZCTlhbjhETF5yxTQGgPGhoHhIWC4VSXGD3n0tLkMHXHxu+YyB+MlPwDuZs5K6FlsbCzdVO9DuKfkHM8AEkP7B8fOkwDcD+B7np42+JkGOvKdAL4E4K8P0zvQdET0b14D3DgB3D0B7B8HZka9WzrD88N6sFm+YcUjrn7E1ZDvMtF9DBgeAYaHgSGB0PNHCD4BLwLRsByAyX/ij0/dDUxuqlIG5hix7eFhvLcOVUAtyPSydAFmOQNe6EYGV/9ZESiKgIEgtbaD/gHALQC4ovY5r5KwtjOU/XfTAHzzLuCmIeDuMWDvKHBwpMoN0WQzNtAaYSs0K4ZlOSAjGG9kPjCBRwZ0ABKEBJexYAZEAU3A7Oi1BeDym4EDnjQ1TwCGWMW8MXcKks0YOyZNlQOQjcgYIUHllEzYQ0ktm+r6oz8G4F4AXwXwRd8/kO9A0wB8y65KmPxgGJgcqYJTKYpTv2CCzyddQJRDOjKivn+Deh8BF8BnwBtaCUA+YYEyAU8h+c6Az9gNHHRmrgOgmDA3jHQ+iWupCeUAvNSrA9HNwqx+muk9nJVNg/CTfrmbAPwbgK8D+PcHkIibjob5o13A3XypWsAkG1cPA9PDFQDZM1id0i1KxsWfOrKnAFXlifCFFMMRcASigOcs2MGAIfE9iWXplS6On7UbmPaUUTXQrgsVMzcRj5Folg2V5ayUA5BWYKwOxKUafnosWjcJwk+7W5F2EKvlE3xcXaNYfiCYsGkA/smuqug6hcleAnAImPbO6YwRpMgjCAVAm/yQmKTv5hNsAf/i7SyNBSl2a8Qv/4/M1yF+BZSYlNQCnnVrpbC+mToAACAASURBVJcaI7sOSEY2NpaDXLqpR+vE/OVksDgImgGgghHoYJbTWc7oJtFWc65/cg2AYvh2ALsB3AzgVv95nS/f4QdsIkT9T3cBrGtITWZfC5hqtQHInsEGQn3UDDvEDEY/ICf7SxMOrAg8T+c00JGkvHGd2DABUYZIAONzCUDppCFhSukCBsLQrFtZe/IixYQpSyEoJoqnuPWrVRAubQh83HNlZB23z7j1ywmj6CIIqUPxw2Xeu9bx2jx10wz4Z7sqTYZaDD8EIDuoE3hMVEphWg66JIp90k0sBxBcy+iPIIaT1RtEsHS/yIAqw+VSNPWQfe5tlVEk8auXgVa5BUsEJuT5uoliAbE5AGotmIAjCPnR9xDG3TQernYAUupTdBGEFMf83OkApHG+XlvTAPwfuyrgSZOhas3u6cwTsUBVn2gTwyFMi8wjHZAA1M9fYGHDULJD1m8Cpa8fRxDad+l+Ykf/3XNvd11U+qiL39SxXevSsshdDFvgbI1O2AwAtRZMZzTBRuDFjxe1Xg8QEIB8yyj5yYIUxfQIkfkIRnmHCM712JoG4FsdgHHp3ACoMH2G6jM4lWzoQarSvwQ6MSB/vporVaFkh+mCLlpVR8Z+dqDZLoDOpHSiQeAFDkBjPrlgCHgCUaFifg67H/9uYjn4Ai1vpTERTAASBaoQJBAKeNqHlL6mwPDZYAOROag/EYRkPX34MwHIvzW9rQcA+TLpI22G7EcQKlJGsYIJhC6ClUMiXfBTbFUQAej6nPS/OuAl9pOOqIc2BLzg++3VmWgIEUz82cRuCAtLIHQQm0gO52uOAb22sC3JEWgRfPpZf2sQBQIgLydPEIFGwPEj8MlF2bSbsulghLftqsCXq9HGgHysznrGgi5qzTUTFH8FLhAUn3hIJwCN0HLncw37qaF2zoYvuKNivmQIuUNc7GvWt6sHNs26twA6vhyq8NEMAHlyntFrDCcQehyaPTl+FwAbXDcmAKMRThakEk8Q8kPg8SPL0qzLBl+A9QCgR6uZGs3vfHz8TtBZvkgGQrEPBVAUg2Sij50QAOjiVKI3saADJRm7dSLYWfSFDkCem/dhZeMy9pPY5QvSDYQyUJoDIK8qMezh3wY6fSL49PcGgCAA8pScJLIgAUYQEmz8RPA17StvGoBv39W24eREiBoNQSgWNI1HBkdgxJSw1AI+dFIbgOYmkjimQ1r6XXC3rAbCHycAgytohf8vsB/r2KRaRq7zpZ+D37HMX0s3DDcCUGLYaw53MJ4YUODzusqlGCQAOQCejuxA8UULUkxIwAmMAp8Wa3qkN/R9W+sBwOhIEPjk5SLr8HeKFbTQfb77csPIMHGl/4MPbReslPhNe4+MiTpi9AFGV4nI7MfvagNQLh/pfrYnDAS8aJQ42A2w4em2cAyWQUuJVQTGWLs1uL7DG9J1RjhA+jvYk4t3KXeMqijpzrud4At9z3XtP16yGfjKZmCGooYh1tZzvv8xXPFl4PoJYC97k9FlwZWD+Azi/deMZWeP13eQCGEyoERudChIjbb3mJYwH7V0QIKuCwj/gfMj0asn2I0FXRSHXfL/iRkNgLyeVj8ccMY//J1fyxzTAXT2+xoQViKYD/1hDqLxPiYxTgSvQrphphG97tz4Slqafnj7uk1kIQDZrvWTw8B3jwEW+RLxPgSiCERdPwPR7+wCPg/gulFgfruDkOMQkFc5x84e708JAMmCuRNBXi4TIg5CGRzGiBGE/D4E/C2r2vcAYJoify62i0aJSMhB+2IHoNwu0fkcjQ85pu3ack5nIBREqneYFyWLkAXIJHESe00Cyx5QyeL6F/tyEcDcrOW2n7fX8df0mME+/vQ/PQjhoy3gzo3AISYf80MQaQx1peH9wb7v2mrtmCBkIMMejp3jIJD1MsaxaMZ8v5N/67INAsB3BAYU4JL4DSo1J15AFPAEwuQHZJzkKfUAtOHLJSOQRWndBYQvCQA01cfnNopfsaCJaD2baBn79QjSTiOEP1EcawIpkq2kegBTNgHWEpOKF8Uwq2NRFPM4AqCf46/rA2U9/uVDvurB01zvAJpiiwOl3fEeciCGF+Ij11f+QkbSfMPfIzqw57mEFZ9Dl3Ps5HXWAYByHJAJKV7N+s0cCQQhwSlfm4lGZ0KB8C/rABgZUS6ZHITBSEhCowUYAAksF7cStWREyxRwtuPpOlgw+5s9sq6OaIJIIlUgEhA1edoTgHxa9HVw5jibZNF+j/9yGQA/7pbujZ4bwv2+cWB6tFo0NzYnkxFA+cvEAo43VBoEo2e+48EMXEOmD9F6xhCE8RwZEJ80VblKvDlmzwicfqy93/o+8K8TwB2jVSgW138FrJQTXBNlnJgmrjZwanow9CBP/rL9wF0jwAGWDtFyoN9PHutnIHT05mPXz93dMGQAPniJsjiBXiTbxDZFMF9NLUPQxKR5qezz1Y6/YZDH0D6GkdAkYJIvRalAdHAMmPZoYhb6NhDWvEyf/ma737CXN7R1ZC7hUbPgcFgqt/ZZjADnM1xqEVhYBpb4CUk5UsL7jQvj///5buDrLeCOEeD+YQchYwG9VIfyg1NaZszFiCH6DkRGLze5/dgk8IMWcMCjdCiCzR8od1B8OTwvJM8JEShFut1fzMhi+eRJr6LI7hYP2M/xVLwKNoZjUTwRMAQQmYyhWGQxsSADOflZ4kukj7PhZ75bETjBpkAGahMkcrGgwhsXeCyBHBj1wmOBQwvAwqKzoFeRV8ZaerjKYAuirmPY/o9X7q5Cyr7fAvYMAftCPGAEoYlBiVtFwLjtp2U4irj7yOANbi+crHyrfCbTquJV44O0F1FrwQGIMZFqdQDyP/gGSZ8TC0ZRRsOlVzzgasd/u+zpMByLehAfCgMQCDyGZJHFCCgLZ2f8mgI5qauEcVx9e5vACTgCTwEMWr5TdIpWKJb5MvrnoocDswvAPAG4VLGg6UKeqmi4iuDz4er30oX0FP7u5moMvIf7W8B+jwlUNAzFnlZCIhvGFRCeWzrgXSSIBreXTFZSgVLHAp4UHOFuociEEsn2PJwl/XEk0dzfSojeerFg1IOo5BKAveIBex1P67lgUzgWQaJwLAKRH04i14ItgDKEtGsRnWx49b2Vkk9wUefTGrKCF7R0JxZMqxN8cmPAxWcAcxGABKEAKPA5u9lEaAbCmKMI+sDN1X3z+ro24wEZFc0VEE64ABgT180PF9ZdBcDb6JpqcPtPk+1ACbmKjJnllwyuILunEAWjZHkBsrsRUnfD0qEiC5IJfyisgMhzWhcP2O14Ro4WbASgAMQJ48SJwchmBCDFa8qpyBbSP7OvU4PQ0p2W7+LSnSJUFOrI4V7w5IoBTQQTfJ6oTSYk2mQcpGRyH2syGjIF6EM3V/fM++C1CfwUExhCsmzCaQT43lZC3e1hBpEHh36XEqrB7Scmq5dV0XZxmV8WuDFzAF9iwhow9seAGoBcGtKjqAc+1l9rLb/1igesO55ysmCrC8ei6IxRMAKTWNBi6Xw98xNTFUi0jEcmpYgRAPhddpVi9OIEPP5cYD4CcLkCooHPwaW9kV+iwWrQHT8uA1fd3F7DFvgUHUP2k8jTiogAqLoxFpDgbMj9jXSuN7i9dLIdaxzBp5XVBMIMgFEnFAPKT9qPd6A9BIGI7MfPmf4U+40HzI8nWgq2PBxL4FEkjKJixGRRFyQQPzzd1iAUzCAQas1YOmAEoFjwkecDC/PAwhKw6CxIkCXwOdVJLxTobMjBdyIgfvimNvNJ7Evf4jWtdnRYD1YNGVuG93VWuWs4Jf+mlZCCZxwP/cnJ6mXVKk2+tK8lQQVHRTGc64SDAZB3Ey3JcxyACkToJx4wHl+YwqloGDICmYmTFgMQFBET8yyYzyAG/AfWX8mCGQg0BTRoHwt9KVaPE/HQ890AIfgWK+CRAaMRYnVdxHbhdY8Wslw1V93UDsmPIj9GxgiAioRRMIJNvoti+SW/Ikd0gwAU8+XxJcbGITJPDvI6XdCFREFSknTB83xka40H1PGF9dnycCxFwygkK0bASJQSVAbAYeD98xUAe5U3jKIwBosSgNsuABYogl3/IwgFPrOIg1Xc4ZrpAsSrvruykl2ucykapkMMh4CExD5DwJfWAYAxwk4MKPAJgOIjGSEGwuCakRhemw6Yv0UUwRf7L00L9pnsNx6Qx4feY4O8pDEcixOjsoTKKpMYjSFYYjOC8Eq3Wnnr0YYS+0Tmi2HysrPGLqwASNYzBnT2Mz2QD91laxLB0gs12GAh81cf/o/OcHyJ+qj0S/zxnhUZbSyYWaL8+Rq2S29wowiWkJPan4MvgrDDGAlRe7KIywDIgR3meEDWg9HbJgApNTkXo8o0i7oVgxnEgFr8F7jEdnU5GvqfJQKQKyEOPlsNIQvyvupAGHS/Okv4qv9oh+PHxMLk8ggBCRxvAmEN+AiEzz2iQfQBeNmkh4K52hJBKOaNe/FSLobLRXCz43rQnu2yi9oMSMDxs2jo8303ERz1wsCGZECF4kd3DwEYYwJjhoNlQrgIjlYodbBPrwMAZfEmyzcIv27gs6XDzC/IR1DOgA9a6DRz4wZAsZ+LYXvQYsHoD4ziOFklna6YD3+nnU6dZ7bGDAcBUImIAmEUw/zbJ1i/scGNDJiLXmle3RhQ+l/aq57gUQCWzwwBKPeLsZ/LFrGg/ShRXAe64Ajkv30kALAjF8R11Dy3K7KRwJcsUTaqWScARou3w/INVnCH+A36n8RvM3nB5XP4oD6DATBYwGb5ajlOLOh6X8JaBKRG77+7ygGYp1bn+V25/01AzBnwQ1ypanD7KWfA1QDYC3zJIj7KgOUzc9nFbetX/r+O5biwNhyX5uSEDr5o0xsJwLp8/m4A7GaJUv/j3/5+HQFYJ3oFPPkho/hNeqBcMkcB2BAA6XrxmMBkfFAci/m0JpwzXw0TXvXtzrz+PKc/Ml/ugzM9MDqCAbz/keVjjGcQA/YLvjoguo1mRslRI6RwfsiA5nqhL5D6nscF8gfTdfxpS+/hLzvWfzMQCoB1Fq/8b3VWaPIDZqsRV64DALsZHVHs1gEvsqFAeBSApQC8pHK90Oql4UEAyvCwNeGcBXNLOPMLftgZsI75ouUr9ousp2TEyIJ/sU4AzC1e+WIFshyAHPZREVwItrrD3wGAhibTYBhxVpe/xePyrNBuWaoNp3DgFwC81O+RAepK/a5Lfe51jxr7JwA83nPXYgq1asl0yX5N48+f4VEGLATlK1vAo5YB1gBSRmsM+NFE57lcfPD5pPFWCJImtyvGgGfOAacBYO59zFglgHgPefZsXV6/gPXBYeC0RVgyJNOGYuJjPka9eHWgjL9bWzhWk0/n/wPn+k8bgFNmgYcsVflZnBRmIShtJM/m7JGibGBoOIIez9wKPP4AcNpylfbNlGfdI+9NjBjz8JVzppckZuJ+dBw4aQ44drk6j1LIY9JkPD7P4s2lwVEGLHwJnncscNIh4Nh5YMsSsHm5ndOu1BGFThJ8/K6JrZtoslST2+XHA6ftB05ZAE5crgAups5TfaL6EF+UyIif3gAcOwtsXep82eIYY9JkXpMgMp/AeZQBC2b8OduBYw8C2+aALQvARgJwGZhY7swEzbNa88IRvAVO1qkF91J36DNOBE7eD2yfB45fqphLnevzdGeBKBfL8UX5/CZgyyyweRHYsFwxYHzRNK6oetSBMDLjUQAWTPqPngpsnQK2zgKbCMAlYMMSME4ALrcnR6JYQIwsoUnjpDRstOLy7cBJB4CHUGwuAtuW2nUDVH1EFUhycSwWjGD64mZg0xywcaECoI0z5P3X5P6nWlHdgHgUgAUAfOYOYMtBYNMssHEe2LgITBCADkIzSJZXpCOnIg25uPrhgnupO/TyhwLHHwSOmwW2LVSik2pCrDsQskzNIBGIpBdGI+VfNgMb5oENCxX4yPRjPj4xaJ0+WGeEHRXBDUz2Mx4FbDoIbJypADixUAFwzAFI8KUJChMV2SUaAGc1cE/xFJef3FYRti64nkqWDrqqEhbrsm5zvZCdPCd8nHzJOLZuABRz9hTHZwPL7LnLnoNMIY2VyaKcjtZLHOAbNgNPngKe4BacfGF1pnydD+hphQ/8XV5UiEueLGnDN1tWXj/3/4cTwAUzwGPcRcFJiDpPt3FLmf5vjwE2HAQ2zPrEzDv7OQg5OSM+ScYQy5Xbo8465u/ZfLTJ7fKHAdumKxVh8wKwealSE6inEoSy2MWCdbUHIghv3AqMzwHji9VLZuDzD8cXxxWZs5c7apmW0fMBnIHKn5X7d6I5npvRz94O7LgXuGIReJSb+Xl1tzqflybwRwqf9i97BQRWomWJQ7oZVFtJoqDX/b/oGODsvcBTATB9gsfGqmzdjtVz+G+PAyamgYmZCoDjFE2anCVg1CeJwOMnTRB/DmUINVkkgia3y08BtkwDW+YqAFJFMD1VAAw6XG61R31O9/fdrcDYPDDmY0zjc1UjivBuAMx1QdMB+WAYXU8dhEU16dOSkppbcHFSrng8MHwnsGMPcN5ypURHp2xMIa7zDz2z8Gn/kVe0YomO0wEwBYKujL7v/zHA6C3AxfOVh58g5AsZxx4fZM7sf3h6BcDxWWeGBZ+cMEFiwGEHHRnDzun7ONHs/djkRgBunql0VDOSHIDU3cxSD4aEajhFXS4H4S1bgVGN0V8we7E0Fh9jVDG6Obr1LJMRwn+kOCaTEYT0dsfqZHXl/p7PrLi9wIY7gO0H2yAgCAWCWCowKrYE8nMLn/a7PQn9X7zIJPPkCcK+758y7x7guNsB6l98gZjLLYet3Ay5n0sv4R+fCYxPA2MOwLEAQLIDPyP8uBg2cRYmzFweAYilKkn+OC8/Fdh0CNhEA4nGA40kd6FES13WLO8v1qHKAfh9B+DoYjU2Ak/js/8NAIwg7OUb7LCC+WAfB4CpBJoIiTRNRmS1l13kqWh3Adv2A8cdqqp1MB+aIOSxWv6pq5D2kkIAvt8rF7BLJksN/jMqfa7v+7/Ak4B3A6ceqpasKMq5akAmlLWY37t8ZW97PDB2qALg2BxgAFwANEGcnI5JcrDZRPlkaXL4u1KJUAfAjbTQ59x6dSvdLPXAgGYshZWR6JIRaXB/NwFI8C1WwLMXzMeSwLfcXuKrA2G+wrLCDcN/IIg4ERRn0qvyySAQX6mG1XuA4fuAbTOVwktRRr2MLCoQyvEZ/UY/WwjAj3jtFJZkU79g1ghkgEBf98+0Umb/3A2M3lkBl/fOcdMok2EjkZyv8773LAfgHDDKjwNwxEUw9yailpwdxBAEYhBbAuGzG3aKkQEJwAkCkOCjlb7Y6SYyf2UwlAS+vKYnAXjfNmDEX7DEfA5CjUcsnzvbu1nDtUMmCDkRZEEyGdlAk6G6lQTSa6m0MP6HuY73AxNTlcJLZ6WOJYC5/CNxLpHMgdKIKNl69Qvu6/75AjHOiTU87gKOOViJb748BKCWrnK/maTA+58AjM0Ao7PA6Lx/xBAupoYDC9okBRAmPdBZ47lNA/DhwMRsxX7mPgl+SrmK5EaRNRslXFQ9CKB9DkADn79cZtkHFkysJ103eBbqlh97DpmTQTYgk9VNxu+xYbXKU3lhFoJPOgdFGY+lPkgQxokkgF9Xgj4AvfoFs84eX4Ke9x9fIC+tRfDxvvniif358sSir2LCj5wNjBKAc8CIi2AxxLCzIAGY9L7AhGIKgpATw4l8wToB0JjPrfTkp+SLQbHrOqm5jNyajS6VCMIpApDAWwQ4LrGgXqzIfnq5cv0vN0ZXHTInME5GBNLb1DGdOYQsI7AfGKFjlgqve8wJwG4T+fuFAFytXzCLb+VgWnH/fIGYfc46Hs7iHC8ZkPcdXx4VfVXJw8+cA4wIgM6AHSLKWZCTESfLfg7WsIyRF3ckiRQ+HACXkwHptyP4KHrpJvKVGnOhRF9eBF9wE0mUEogz2wC+WGI/vVxiQQIxAs9+rmHA6E1YFYB8DJwQMZl0OrLZ++i7sfT8zroYHLS9df4RACWKxSZvLXzG/fQLZqk2gqn2/vUCUQ9UZaM9wDaPeSPrC4A5C1KV+NITKwCS/SiCR/jRBDlLmP7nHynsxno1IPwJSyRpbiMADXzuPDYfZfBTEoAmcuVQdiaW0zwXwQsCYDYmMaDA1wG8TBSvaoR0G77EcGSET6hjOvVApfRPAUN0zjr45JzVcSqiTxD+VeGzXku/4Nr7JwDJOkxFIwt6j6+RqUrlkO4bXzp1gCAAv04AzgLDDsBhKugLFUvQUhTwCEKbnKCw14HwJ9cDgGQ9WegRgDI8XEcVEDvAl7lVlglAgi+I4CR+Zf1mLGgMmDFhBGFfDCicRJFERviSABjLS7FC0MFKMU+07wOPE0kGvaoQgGvtF9z1/iODkwn3VWoEXxres5ib9xx1wZufBAwLgAQexbAD0JiQwJOuJBA68/H3Zhk6+3CifqqwWNMKN8wjKgbk6gWJgC+FMaBb5vJVmsUbV2vCqo3cRWZcCIACoax53+ulkqNd7iqOcU1WcC9cxEm5kQBUdZ+sTnSL/jEtTWngi21jhJNJBivZBukXvOL+yYBkcOqxKjJ4AGgxzMrBVwdAMmHrZOAYF2l6y/mwV6xD17zmWo6MbRyeWtOHwxJ91IIhr6rqZS70DPPLXDVUrfBwzHKr1EUp6/h0T/6L/GcCqslt4IhoTcwdAqDSs7I60WQH6R329pHuFyuXDJmEjuOSbdB+wSvuP5bGUjmsA5XoUvcvBXKKAQnApUdXwah0b8jXR2YzJTsC0ZHB33FL+2yiX3h/1YeD1fFZGT81g/H6yqkVa9YEpqMhTADle8erHA6t7Mh6j4ZBXdBGjFyO4CSIm9wGBiBvgqxwIAJQlXIyEJLyI/i0SkAG/FbhaEr6BXfcv+5dLKhCg4z1C1HEBJ8+BODQGZXfk/quAZC6ketAZEQCTWAU8PIJt0fgwHzZvVWNaKqi7JLOmtDWFy42g1FxH/XfqGkII0C+a0tnDkfsGxQjn3VPsk7tXmuy+Xp0JhtoJosAaFcUAJUYKiYJxcqHqKAH9rPlG2cMrmCUbMX9guMLpGTcCMKDlZGhMK8IPnPIn1X5PA2AwegwEEYmDGBMjOI5whGQP3NPBT7VJlRNaKvF4t2IWHbDErtDlSk1p4lJ7/zd246tglGZryIfrFhQ7pU8WCAX0ZENG+57U14Z4YrCeLrSxXdev6TfLwrbxT7znMrfKQXfHLQCnyvmRIv0Q3430ezMmL98P393G3wqz6am1NYzzoGn+svqRmTAU2citctqAX/2EI8F9ACEmLHXLZGoFxtSl2xyK2bAYwrj6Xr12+1noL/jUTCD9vvFrn6u0v1/nvGkaoVBAQi0eummMAuXQHMWJAA7gCixG8U0gFfcXdlBKk4Z6zELgAJfZEKrxpC1xOIl/+Sk7jkcdYlSco90y9+gK6vJrRiADD0piad7RuFo3udNCgft94vCdrGXn+tujgV3QAcHLcFnroelivHkchEL8ue0uQ74S3eubAITS3IQhKkMRjBMokgWG3L//2z3VSnP4VDgQWxUEEUxAZFHL0eR3HDfm3IRbDHkBfF0zy4EIKNhSvr9goGEBdvTz/MIYQLQdVsTwRTFDj5jQmdArRDYJQNDSs961R3tPhx5NXoVgoxleHnarjohgLec3D2HI492yQNvIwvqO9fJm9zKGbAwnu6FhaP5pFuMg/b7tTbpBdvTz68cz/zI8azVj8iAHTqgmFHXDUB89R2dtaC7tUGw4kDOgFb0R2wYRDGZ8g9O8aU4XwPOczhiwGlMjqqLWiFYGu570wADFsbTvaxg8nkow7E8nM/atfKzln6/1mS4YHv6BQ4+Z0BbqHcd0NwwYbVD3+1yWhXJxPBrbq8AqE/XApSqAxiBV2MZ/54DMOZwKE00rnDUWcR5KiV/brjtSAMALIyn+/mCyeehjIYp6fdrvVELth8RAClyHXxmhPi6r1m8FM0ucgk8+y4RHC1kAK/5XgW+2hZYofafWcPq1B5AqDqEYsQ3nepR2gqhV2yiol1COkD0C+aOaoGx4aL7DQCwMJ7uVwomn4fm7VrX2u/XAlELth+5sHPtN+l/Ap6sX2dCsZ/phZkIJgv9l++1wbcq+2WFv2NXIjNKAPzuw7MUAV8DTuynFIEsQy83RgTAhiv+NgBABaQOGE/3mwWTLwAqHnaQfr9GnwUbARgDNBUlkpzQboyYCyYDYdILdf0l4NduW9kGoa4geNdazLElKoA3Prx7DofiETtC6XvE7hGEzJlpcis3Qgrj6d5UOJoYDcMglrX2+y0NPtl5UZUjkfx/Hqbecoe0OZzdF1gHQrln9Bhee4s3f3Zxm4MvAk9VSFdUIw0i+Q2PaBtISiBSSFgCYMjMW00MP7pwvvLDmwFgQTzdHxcOSGvBg/b7ZRZByWYAlOERluKM3Ra9CKWc0q73dTBhMFT4ZwIw9l5Lrpes+HjeBiGCUOKXeuBvPcKTiEIOR0f+RhDBMYi0Lhea4GTaa5NbOQAVDzhgPB1La5RssV3rIP1+7yy5OAADoAchEHBkFbKfGRpiweAPtMs5IFNokyOGk/7rAYC9OhBFwNXVY1at5tftCBHaWVS2AJdEcEinrDNC+Lumiyc1B8AB4+muLARAXTDCWvr93lR4/Z0Xt6ODFQkj8WtumEwHTKDLQejAfN3uds/dfjoQdatGLxb8jQBAYz6/boxiFgAVudzNIc2/s3xLk1szAORoB4yn+2DhaATAGJCtbpkCYq9+v4V+aBgAQ4i66XtaC85YkDog/zdZvzUgfN1N7a633Xqv6fe9msDIHfNaB6Ay2JRE1AHAEDIfI5nzZCLeN4Nbm9yaA+CA8XSsul6yqV0rJ2WQfr+splCyCYBR/HJyKX4phs0PKBZ0lqOYTpvniAiUAmAd+HKjo1cvDjHgr+3wPJQsVCymUZrPMuRsRBDG4AQCsunyJtFGHwAAIABJREFUcc0BUJlxQoH62q8ST8cggpKNAFRGwCD9fkuvbwAkyGgJE3C+Nz1P1q9/T3F1EZBxvZh50s6AEYC5yyUHXt5/Q8zI5/KrAmAIkkipkyGPYwXz1aRT8v5ZO6jJrRyAvKOvNXlLazsXs9bo/ztc29Pohgotp5J49Rcj/pzfIwGS//3OM4CNd1dpntQpFUmjEH4LYIgnyn/OLjL8FeDGhwJbNgFjI8DIEDA8BAy1PFK7FSKf43cNKrvHx+8C/vmxwMgmYHgEaA35J0StpvvzL/nP8RbLAfhyT207TChgDRiu/ZL9DsfWNABvYzbhCDBKoBAk/pEobGWTqp819hzQ1/0k0PoaMDEJbJjxVZFgDad0SaUO5LksWVj+XScDmw5UEUDJ6U4d0nVbC91S3ovfVHp5al64cgC+k7mZAP768KCA0WD3A/ieLz090CDceVmlAuhBljLgrfcAw6PAyDAwPFwBkCAbItM4a/FiNtERjBl76W9ffD2AbwJDdwFj+6syImRXrd5Y2FjIYcnzWPLEqnsfC0zsr6qBMQmfIDR/pyJ6xMhKyMrSDiKD2xja6TADTt0/AGAs1KcAUCFrOLF6tbtiRVFavT/wuMCa7MfVTlH098YBeBcwNAIMEYAUlS4uBULOmK3LCnwOPANlEIOSoF9+C4DvVoWXhvdWZVOYqWgi3vOXDUQhgieB0EElViMYJ08HxqeqnG8D4IIDkAzo51DKQQJvBKUmKACzbM4+5hUivwrgiwC4LzvjmgCh6nBcgiMTcv9Abo0D8E6g5eCjfpUA6AxoQIzgi8ALmWwC4z//DxcPPwBak8DQFDB8yJPpPZHeGCyC0KN5DFCByfh9/+OAsekKgEzCTwD047X0SCPM1IYQjCv2E/MJoGVwUUQoPboq0MdqkWVn7RtDDMahB4g+P6qhXFpjVtkDtRGA2nKjos7IyOyHFUbIrXe0FXsTuzIYfNb4O2M3ATGIYQOmPn6hG6gi3eUkQQAeAIYOAUOzALMVh2pAlESqGFBAXAYOMQVjxll03iO/yYKRAT0FQXkwZkjp1pz51LO2XAT3KtD3AIAwj4Wg05kfiuUHYlsXAJLVnP0INLM0OYFx78AzcRySeTsw2AJueI+Dj2Fne4EWKz5MA0MzDkCCkAByUWqsJzarEanzj2zXwjEGFHuGY+pYsMojzZL1G9EBexXou339IRBrC3lJGmNDuSHX+w7WC4Cm6wWxm8DngLTImgC8pBcGBuTXf/1fXnyTugnFwxTQOgi0CECyIFlsvvJfEnh0mhsYI/s5uxFYi1xZof7oOqSAawwYjRGBzYGXbtWXaCIrlvHUagX6SP/ruMVYCEbEqECXAMjfree2HgA0ESur1/0vtnNwGSsG0RsZME20/+/XWH6Mugk/yngPAGy5GDYALjiIHIgRUIrsZjM7Ax+BSx1S4pfffQVIep8dL7dMDsTGjJB+CvQxTHmdtrw4l0CovFruC2NOe975egDQsCXRK/eK634JhBK90q2C7I1i+Gt0jxF40k1cPJAB7UP2m3MGJAAFQrGei9iUTH9yBUDTHfU3B5+BOIKQ43BWtNtPcWIOzEZE8FoK9K0DCGNxLi3FqaKA9gTgeoFwPQAoI0OulWT11oEwiFz7cwbErzNxWtEYBB+VY76Vh4DWrH8IOoGQ7Ocg1CqMRLPltmxvs1/SHaP4dcAJePYyyUCRIzrTB8tE8FoL9DUMwl61kQQ87Rmy2PS2rgB0a1ci18RudEJH57OsY02y/+83/sZdBKr4FXQTApBvprGgQCg9UEAM+h9F6ugJDkC3gJPBEvRGrYoYCBX9IxEcS5K4i6cZAHIw8oXQ4mLBb35YH5d7OekadtTV1UZSjaEIPH4nQzYNwgjAHNwDuWGYpZc7lzPfX1cQur5oBorfzDf+zi0yVTuSkuxBI2Q+PhQDIUEnMLo1TBCZLufGw/ixbQa0KB8CTODjPohdY78IQmfDjmW7Yo/doAX6GqIiAtDHaYswSmeMubV81kp11L6hy2PdAcgblfslOKC1IiKRmyRxZgV/8++DS8BFrxXi5Hd/U6MeSKdqEsEKhpBRsgRMbAtuG4KU/+9ry5brzP/lPVMv1EPOQegharrVcgZUhVHFxNPcp9VFtlOWkL437C0WABWypFRGsV0sb5Hn2zYBwvUGoKl10v1knDgo0y7XA8Pfv0UACnjaK33Co9gJQAOe64FkNvtZAHQdjz9v2Nz2GSa3jYej2W3KGuZ9ixGdIVSoKT13B2s5AHkGheST6qn0erHv5AIgAAU+LVfw/wq3CEAV7clBKDDGZG9/5oVXx/oyYARczcqH5GyH8eFplTawFvAtrtXLGpNrQDGbejupB3omlIHQGc/ErzOcGSRs8zrhAbbuL1Tco/JfbLlNwHOmi2kIcs3owbdwNpYtynDQhsFcgvuG9/YapGFvYX22zZcAU0/GwA2LJ/4AmGF9mwEbBu98Y3cMF+uAGQCj2HVp3BbPuo3IlqxAy5wHAq4OfARmEBXGfNIBa0BIsG0ecwC67merHgRpZLwocrWaovuTxew/V0txJQ2DWeae3WAGbdhb2DB4+wRw7w5g8Qpv88liyGtoWHzMi4C9fAEHbBi8kwUKu2xNAdBxaGBLbJdZux1LwAGECYAEm6wyfpelJrEgFnRDxESwgyUxIUsVMwjVy5AYO0bG89Auu1/5BF38KqjBHlUAYXsteNCGwTeWNuwtk4JMkrlzGNizA1hm69g1Nix+zDOBW0aBeRZZGqBh8M4emfWNADDT+zqMjQyESdQFHfDbZECCLRgdHeCTe8CBaKJY1rDnBRCIAuGW4TYAZeFG8ZuMkGiQ1IEwGCJtHZBmy1obBsvVMnDD3jIAerti3LEBOMjGcOpa3WfD4ic9t6oveDtLfw7QMHjnH6wPAybW6yaG4+8D4HIQfvtDIVtLejpBFsVvUI7NIBHw3DUjRzL3rDVtsYPOkAScuX3coNDynT2VYJCkn+PjqvUD8hVbS8NgjphGxcANe8sAGNoVY/824BCBtIaGxRe8pLKZdpMkTvXiJ2toGHzSNHDPScAyq3er4qPyGaNc7JCRXWLT2TjwGmCOeQashq6+qSpZmp8vojQpheF58ncdZVjLnjWPHr4VWKTKxrHGUqq97qXu3jp0wPy+eEC/DYNZsZAO6IEb9pY9lNCuGPcNV830ZmkM9dmw+OKfbdcXvJMPdY0Ng0/7GnDXKcDMccBS7MwdKz8KCAKQIgY0MWGCtr4TOHAasMwOkTqf6unyuLykfd254nkb7qsw/iVg7jhgmSX31Vpd9yRHeLx+zRhjEGRbB6wDYT8NdymyubzDzCCGfpMJWfSRYfr9HP/aMgBm7YoxNQHMbQHm+ID6aFh8yS93tAvGQb7da2gYfPoXgbtPAqaPA+a3AEubgGU1RM6B060fgkRoCzj+TcD+04CFE4BldZdRc4/YxlxgjJMewSiwN1zWfsOngdljq3EmY08vm5i/7j5yIMqpvupKyGoNg9lngYosl9wY/0dZdrMzYl8Ne8sAWNOu2MA3zw/F2CoNiy99XbvftrcLriz6PhsGn3U9cM9xMODObQYWCMANwPJ49UliuW6SaqqBn/gGYP8pwPyJwNIxwDK76ahDeN6uXYCuYyABkEza4LbpY5WEWdSLxjF26/dQB0SJ6r4ByAN6NQxmkWcqrnQ00x1DEDJFjR8CcNWGvWVPp6ZdMQ6OVOCb3wAscPJ6NCy+7PerkP5Q3tBY1PrT9tEw+JwbgPu2AlNbgVkCcCOwtAFYcgAuiwWlM/XqDjMEbP9t4MB2YO54YJFMo/5gHIcALV1TRZ17FXOhPtvgtvkqf9H4kvHDlyKK4l6VzvVSBF22uwjOb7pbw+CfcwBSkyeFEHAUx/yw9JTyEbo27C17Ol3aFWNuAlgIn9QxO2tYfNlbK6MvaxeMRYquvL9rTcPgJ30TuH8LcHAzMOugX3QALo21WXBZLEHwRF1OgHS2eOgbgIPHA7PHAezNu7QFWFZ7JnXJ5rnqxHEulvlzwyVNN3+wern5Yovl7SXLGwvn4riLWO4fgMRJXcPd/+pmOymELEhRzBxJAo9gVL4kwVnbsLccgHEpWi3epocCAMeBRU5eTcPiy/6qtl0wpvhA+2gYfO7NwOQm4OBGYGaDs+5ExYDGgqP+ccAkINaVpB8GTv4d4OBxwNw2YGFrxYCmV0YxLNYheCXau7EhV3ga3Lb8g4+R45uoGLADgHWqhsBXA8K1AZADyRvuvtkBSArh+i9DsQhCOtf0UUgW/7aiYW/Z0+nRrhizoxXwFhyAi5y4rGHxU66qAFhT3rDSIVdpGHzencDejcDBDcDsBDBP1uX1CMJRwFiQIBzxieL3KIY1YW5MPOxNwLRb8gs0aghAss1GZ1O+SFHsdRPt0i/PLHu++dFb/x4mXfhcbWxhfCtYMFr/uWvKxfDaAcg7ipPCvFOVpuo3HrCjYW/ZA+rRrti6TS6MVQ+L4NPH2nx698GnXF0BsKa8Iab4dFZpGHz+JLBvApieqAA4J8CPOQuOBBAOV0CUYbIskRkAecrvAdNbXc/aDCxSpyT4CEIyTgRgneiLIp3nP6fs+a4A4N8B8/48CUC+ZGJA29fpuLmxJW+5h5kNFg2jiWHSi0r0Uv4pCoZsxw8DUfnhd4Vk0XGdGvaWPaBV2hVjdjgA0BlpkQ/K9bmn/HOVqtClvKEBqlfD4AtmgP3jDsBxB6DA7tdbcvYzJvQJkii2n4NOeMpbgJktbYPGACiF3wFoEx1ZMNe/4jnPLXu+KwD4t/5SO/iMBcXuesHylyACMBPDgzGg7opM8mEHIGdwrfGA1rC37AH10a64Yr4APvvOSdwEPOVbKxu+K2pdKRTmdI3dqkPPVgbSTBGAY8AsATjWniBdx0QxJylOFCcr6HBiw1P/CDgU3EgEIMW52M8YkLolQRddIN1AyKWiBretf9MJQN6HsaCPxe4rvgDdHOcOxDIAcmDFDXvLnk4f7Yqt63gEIB/Yoj+4p9xaAbBHeUPM8qF2aRh84QQwNQYcGgdmx4C50WqCFngNsgSvQ+Dxu4MuiawhwIAXVk1O+e/A7CZgThY1dcno1nHL2oDIyZULpBsAFTBZ9pjT0QQgn2V6ufRicS8QRgbs5ZYpEsENDejBfpoLrwAOjgIzZMBRZ0AHoUC+SOA56xJwNlEyTFw5FxBPeWvlzpnbANCdQ1eSGTRybMuydgMggVBsKmtYoC6Mt8znZxsZMLzAxoAOvsh+ydDqtXx4FIDl8L/omQ7A0QqA82S/ERdTI22mNfaTuBIIxR4BhKe+y61punQC+MytI/Zz/c9EuvyBeetLAfGZ5WOMZ9j2/gqABB1fMLsHAVBqhfTcyH5d9MByEdzs+B50Z7voGZX+NzNSsd8cwUcG5ASRKYbdHRNYwhhDIHRgGmO0gFP+HJh15jOXjnyKblVT5Cbfoq+yJOszF8P8+VnNPlICkMAzds/YLxlYznrJwIpO6egTPMqA5ZNDAB6iCCYAyYBcBqTRQ0e4630SxZyQJQIvMJ8mSeLrYe+p/GzGfnTpEIBy6US/out+K1wg+brs88rHmDOgAVCMnrEfxxMte1Mt6j7u9zzKgIXzczEBOJIB0BnCJoqgIfDEhM58SWzJEPGJe9hfVH42un/Mfxl9bgSiBySIBWnAJBDGEDAB8QWFA8wO3/a+wH4+rg4RLPYLul8tCI8CsJmJMQAOuwFC9qMI9g9Z0CxhZz65K0wfFBPqu7PEyVdWAOTHVlTcpxhXHZLz1w0ZA6EDLhkCskRf0sw4dRYC0PQ/vVSRAYPo7QCdj7GqVOSMeBSAzUzMxZcDMwLgcKX/zbv45SQlHXDIgagJc+bjZBqAWhUoH/Y+B2D0J7rFa6LYDRmzomsAaOeKqxEvbWacHQB08JkRIteSXiSBLYJOLB+X4xrzAzY7vgfd2S4RAKkDDgPzNEAIxMASSWF38WsgkuXLyXTRSRCe/DduSZMBMwe6ObTd8JBj24Aot07uDObPP9XsIzUGFPs5+JJ/M6oT4buxHv9X7BeY8KgOWDg/Z58GTC9Xq5FxTXOw9c3Cm6k5fPcjgbHbgAlvVG2tH1T3Oavoq6BlniZ+12n5u/2sDbOvasqoFg8x2Lnbcd1GdhSAhXN+7qMrAC4sA8sORJ6yHwD28z+Ft4fdv8UyqUDrDmCEBcpZ39kLS6aq9l4D2rLb/KYsFTPWdfbvh86vQu2s1K/K+zIjTsXIVQ9a59Egs4Y6sZfIA/EcSp/jEXv8BWcAhxaA+SVgSQAkGAMICcwVlNLlqTc9Gbv/HAA7MrL4+f1VlXwrUq7SvCoyGcrrWpGhuur2fNGYwM8YT67hT3s1LaZvqn5MLM0bzmHMmIFSgdFNj/mIBct63NhFZwEzDsBFgpDPeanNgATfCtGsX9TIKwNrg9tuVkhlng7TI/YArX1VkXKrEe1l2SynN1RCsFJsqnQv3UIMxhwIRjU5AGN9QUteVz3BUAvahuNgjC3HxLAND7nBp/cgONXF5wCz8xUDGgCjKPbvevlzcKUHH2ag6cnYzepYBB9Zi2FxDJdjoXJv1WDFiLJ6MKqKZUzoQFTfj2HmwTKcTpVWvcxHKm6kKgoORAEvVclPD6NdzLXpMT8IYNPcLV7yJGB2AVhYrAC4SNA5AxKM9ryDPE5fs6eeVKWGZ2M3S3MQfEyJUKV8L1ZpJXpVJ9pLilmlAxWkVJHKwIhjjD9TtVXVm1HdOy/pJiaMFRWM+bo0rWl4yM1N7oPhTJecC8wRgAttBjQWdBBGESwgSiV0Pb9DRgu0TY19N+M1mRKh8niqFx3rRDsLqjgl9yaGXT80vcL1wnE252PAZCzAHQCoiqoW3yYWFIt664fUpKaREr1NPakH6XkuOQ+YDwy4FMSwgU8GSRSz0UJx3Vx/5vFNbrs/EiLRY+v4ACITww6iJEodQKwBIyBRv9vwhKzUW6z66TUGEwhDS3ezqusAyNxnJn8xa1KRPSFts9YfFB/QDZcAm78CnDBT5U8rCqjfc3yh8Gn/hGd/MsKf1+QzYJ4891Jye13iy1cAE9cDJ+6FpYrEkidxDN3OtXR+FwBGMezoMmxJLOumAuD4J4rxJrfdH/XCoLGFVKiUbw+LAPQqWWaMMLrd6/+JycSIm85w9lOpt1j1MwAwFTiqAWEUxeYH5ENn/jInUVHeMXQ/f/jRePvCa4DhTwLHfBc4frGqqaNJzLPw6iZxV+HTplFGvZrXZT45N39+HW3TujlZv8D6fp8HRq8Dts9XIOR5YtakgBgdrrrt5Qsq8Ssd0BhQ4HMwmVitAWHAY/LbLDQNQDaTVJ8Q6W4qVB51OOqDZDPVB3TLOBepW5jmqaLbec3jGgBGMSxvvemDYkQ9GoKF1ShUCSKCqBeQrvmfVZPC1keBjXcCmw911tTJ8q5XgOLaQgA+x/OdWA2EGZ98gbjleTHdQHQN+2iwls3nK3/Zhj3VeQhovYzdxmArSwQgDRA3QiSCJUrTnjfl4KozRCSCCeYmt90EoJJbVCk/1+FiCwFZxLk4dRfLFia6x8LbYkD9v9cXtLG6+O4AYQRfrgPygVIcqyhTXcWFOJH8fh3rz7EKwnUArq8mcGwK2MCC1i7WY7Zenh56feHT/jE3yliE4TZncd636gPFCKWavGhcRx2J+cvs9MlSw0Ty3cCm+c7n0G0MExdW4BMIbTXE9UCynvyCCX+Ovm4gbByA/xisVgJPpXrzLj4EoRJjJIZrWHArS9iprK+KcefgiyB0XVKGjOmCmW9xhRVMUSyRFnNeFGEdI2q+/HFXclkp9WsAbgTG9wGj08CI64WxRk/OTDcUAvBHXSLQxcVCDMQSWbzv+1e7WVbz+k5w2tJtsbcCYV6WJY7hmAsDA7r1Sz3OgOgoM+KTOJbcjSI5yGIaNE1uuwlAAU/MF+tF5/0sIghVLdVdM2S0bSzHx2Mi+FTxXf8X925NC4BycK8QwfmgVX1LlcFiykEMcL2BndJJ7aQfijKfxLGDwAhByM7aC5U4qwPzNwufNnNuOH4VZaCPlPo2AahqFqoPVFc14ga2m+WEEL0cAz9kdPrOmMu8r1o/rTsXz7f9oswFs+jO6LAqkvC3Ggg5Fg6mwW03CUI6X12h8lyfcz3QHqr3DIl64DbqaQKc9mI87QXACD6vpJqY0EVxz2CEyCI5eMSGX2e7VtI5J4yTRyZhscrvt1nQuivOAaNLlYESwcySgiVbr37Bfd0/u31yEgg2FVaiPCeVOguqAfGov0iR0R9JABJ0bnwk9nMxw+fOh55EbgRhzozrBUA1polN9CLwok5HEEUQBjFMQB7D+j656PW+IrJ8O/bBCo4sGFdGejqiyYCx3mKe9/JtTiBvmI5OFiTisg9LtJFF7gZGDrUbHKs79+hyu5hSaUvh1foFr3r/6vZJCiXgCDwVVFJ7MVmRLsrGltuFCc68yFdACMDAflwR4QM3HPoKgIExt4gz42SuaQb8hBOE2oZmlu+KFlKR3QSssMJxDPWbbjpfLoJrxG8CYT8MKGZSVTCxYFTIb84nkCxCIPLDiby30gXFghaF4c2ReR466Uu2fvoFr3r/fKAEFxvpqMcd9yonIrkuK5LLV7MVCM+/uDJCyIC2J8a0z1iwqyESgMl15Sa33QKgmtPEBnp11mwuXgO70Ud4DHWzfgDYC3zBEOk7HlA6XKyHQzb8HgGoCSQLqsxorIy1Bxie7Wx0rFaf+wr9Xv32C+56/7HbJ5VHtRYT+GJrsehHcya57PyKAQk6+vBkBZPpjPEExlwU59awg3C24W6KBsC6tqHR+MidyVG3i3rdAnAsH2T093XT+zLr197MTA80h3SfsZP2UqpCrPQ46oF317VrpeiKXTJ9MhMLkgGdCacKG/mupV9w1/vnwyGgCDCKWzJe3lqsyzLWZWe6/kc/oKzgKH4jC7oolhdC4jiuzM0WPo+cPQ2AsX1obFCTO5Jzn566PwbReiwnfTWjI4KvDoh1juh+aT+WKSYD3i8Aql2rJk+VsVQly5kkddv2FvHT61icqO7Fr71/IkLNXOi0FQjV0046oBy6wZ922Q95ICqDEaL4XWw3COcf9Mw73DFB9AqE6wZAAS8XuzGQIDKf+oVkqxt00ttAc+YT0PJ9qRFSB8xoye5Xu1ZVeCSgCLbYLVNswoncHxoeLwCzBGjBNki/4BX3z9lXgUCyIIGmhova83cRgO5Te9yLgP3MfmsBS8xs8/U67ePQOqy9umBUruDchqo8sHSd3PMfT5ifo+ack8eFHI6QEcnT5GvdOnVdXof+ptJ+BVPWceiaRHA8Us/nkACo8mzqlqmWrbFDppT5A5UIZm7CPA2Vgm3QfsEd909kKIqB1qJAKCBG8ZstZz3xHOAAiwmpDIdng1maZQAkZzsHZ537YfQrwNyxoQ+HakrnS0h1mUA1C96TdJTmORyhC3oeqdwROi+GDhkFI6bYNrcNDEDeAkXwQizPRpmnIs3OdqZPSaRFUcbchHlgie6agq2kX7Dd/+d8lUJVXuUzk8ERmS+2vfd4uvN2VOV5rSwb0y3JhgIh9wJeN3YMQCIgR78Q+nDEVYBYZUrUpbXFnM7COSdf7N4IPvtDnT2BY/h8Chh10MXQeYGS+7GGjaQiABpuNIFiECnzdWJMIUHcazLptC7YivsF8/7FgLFMqpiQL5TuNbKfA/DC46rqqAbAwIKWK+timRUBEiNGsOQsyQm+Gpjd4n046hbT84KPuYjOmHHyp92gcgDS2OoIuVIeh/xyUkaVwyEWdLrewHE3uBUDcKIwnq40HpDXL+n3CzbaKdguel5VnFJl2awaghLQBTzteZ0cjLq2A2n0M6EPh2pC57Wg41poLzZsAZNso0Hw6eVR/J8bF9YjWGmVCpGKwQLBRCcrbiSxNLgVAxCF8XSl8YDHHFPW7xeFBRwv/rGqOKUBkODzqgdWPYAM53vTASMQu4Bx9J+69OHIF+N71F1O1gUB+AsBfFqKC+4Wi4BWX+CYgOTAU36wdMVNVKka3MoBWBhPxyiuko3xkSX9fvGMkqsDlzzHC1N6SQ4DoINOe7KelWWTheziObeKCdARApD1AdVnRH048gKUAmAEYi6Oh4DJV4VoGDWqjq4XLbO5o1jBoimEPhPJmwu9FvnTLgdgYTwd2wyXbMyRKen3i2eXXB245FlVYUpVxUpGiLtmGBlrTEhVUwV8dEkVKAq3MHJ1uzRbRx+OOgDWFX6MsXJU/36lJoEoA2AKvw8+uwTEDIBbStdOs8ddDsDCeDom7ZdszBIs6fcL9ror2C75US9IxJJsEsHdGFBil4yYuUwknofJgF4XcEUfjrz+X7fKo4EJJ//PkMORO6FrVjQMeL5kJhZMMXzLwNZCt1nzDFgYT8cQwpLt4hDON0i/X7ys5OrAJVe0S/ISgFY7j9ZvnQ7I3+lyqpYaL98CWp/N+nDkZdhi6bW8An1kP3fRTLKVWlwF6RZCH2L4zDDR0k1IqeTNb2OQSYNbOQMWxtMxeqtkY6I+ny9VEz6btfb7xc+XXB249AoXv85+tIBVgJJ6n4lf6oV+mfjdDJNMH0wAVFX90GMk1f5TxlS3Fggh92DyN0IORy5665KIfCktsl+K3VsGtpVOWOMiuDCerlSnjQ2rB+n3C+pIBdulz8wqonrNPLKgwKaC5B3s53qhXVq6oDNg6sOhqvqhEr3V2VNLBjmnSSNdrOLJ1zkAu6VPRjFcFz4fXDJ8i45hG94Gt3IGjOFYA8TTlQZ/qGH1oP1+8ZtlT1MAtHK8mQg25zOZUSCLIliWcbw8wfW5Ln04ssqnHX04euiCk6/3de66MPpuAQVZAEFkw2MKFw6a1wEL4+lSBvmAOMhD8vkOkFX77feLNw14YT/ssmc4A6oOdHBEkwXlgjH2k4Nal6wB4fIuX9LzZjAmorNeHMo5Tc0OewHwDTUh9HXxfGJsYkAbAAAgAElEQVS/uvCpoAcew6zBBrdyBlQwwoDxdLZWXLDFkHyF8xGE/fb7xR8XXByAAVC1oB18HQYIT+8uGfP75SCUs1o64he8v4j6cIQ+IqkPhxrBCHjdjBH6AblQkAeY1ondukSiELmsUPpjbyp7XuvDgAXxdNZVvWCLIfmKg6Bbhrjup98v3lVwcQLw8gqA5v9zC9jErutltg8gMxDWWMBaMVkmANWFyEV6R0uH2I1IzW7ypbkQOTP5f2ch9KsFkwp0kQlDAOmxzHpscGuGAQvi6VD4RgmAg/b7xZVlT5MATNXwqQc6KGwf2U2uGV2uzg3D4ua7fDnPwZcKgIdq9GaIBPZb0YdD7hgyIFWMXiH0eQ5vXS5HcMkc++9lz2t9GLAgns7KxxZsCkgdtN8vWD+vYDMAUpcja7lOR9eLVcIP4tcuob/3AOHCdW02VTX62ApB4Mv1v24gnPy9HiH03fJ366KYHYTHsgBBg1s5AxbG0+HLZaOp65i+ln6/YM5EwdYBwGj1cmUkE7+8THLNdAHhwrUOXtcrO/pwhF4cct2oN68BMDCfmsJM/n6PEPoYPp8bH3kCkbtjji2tJJA962YAWBBPZ0WBCrbYsFoOf9pDAiENk179fkuvf9nTXewKcBSjsn7ldonWbgQpx+26otaLIwAlfi2QQSJY3Yjy5i9dmsFM/oEDMM/Z7Uf0RiYUA7J+ToNbOQC3e0WBBm9qLad6HICG1ZK1XB5PoxnuOOIcxSXe/Of8xHV/P+FpwN47gKUpYHmuSve0pKZgCKSq5wqniWE1WZz/xouBm74KTMwBI17lVBXwtWSs+8/vL45Ff3vhpcAnvwos8d48DZX3M2hx9XIAnu0IIO0chu35AOgLL0yuG/jOmwbg028G/mNz1YWdETbm4I5BrFlov+EtD2wIo7l+Atg8D2xY7iw3V5diEqO54mnj6XdMAYcU+6gon7A3NSO2qFjlyZYDkAX6uD5Iam44YaUfVNDNxaJcLIPXcGGpfi6PnZdVD1wPspQBX/wl4OaNwN6Jqg+xwrxslcVFuYJblehkcYYZGPS3L20BxueBcS8nwg5H5kZkx6TQSbXFZcCQKadx5Cz5mPurAFxrRaa17pAR2PFC+ElSHKQ/0QjQcgCyGyM9v3SnsDBRJgL6msWCf6IfWeUJac8UFlpY8500DcCfvgb43hiwZwyYVhd2D/VSrKGAmIDnBkiafEcN9cprHgKMzgNjS1V7rRjRlceyrqif6KAkMgXIM+6tAnDl+zSL36O9+U8p9jGHQo285/2XA/AnXeNnKAorDXH/AILwbSvLEz6Ql2+cAf/3XcCdw8DkKHBwpOpFbE2wadzIdyh3jjNQirYWEwYq+/zJwMh8pf+xKNSwM6DZMmzNRRbM2K+2Ii6TlFrAWfd5V3i/F7IgT2LBF5LbIdkqxLPWvtzlAGQ3RpU3Y7AiixMxLOUB2t7pKQ8M0qCTnp8HkojJgNqaMEJesQv4AR3Iw8DB4QqAs+6SWRiqgJgY0HVDAdBA4Ba4xN7ndlSFAAjAYX4IPO5dBDMAdS2i+Jx7XTf1eEdTDfgAQnR34p/wQkRmjNAoByDT/ugFphXAmjAEn8qaPQAgZCs0lSckCNmVigEbFMsPBBE3DcBX7gLuawH7hoAD7EM8DMw48AhATrjtQwiXoqkTEwWd7LOneXNCbz6Tiq/TInb2M8ZzIFrTQbGiy92oGz7pXl/7jvdAJnb2470IbB3T77Sai+hyAP5voTqW6sKwFAc/TAdc5+3dvcsTrvPVYSK4SQb8xV3+6IaAqSHg0FDVh3iOIFTIFxtit9orL5Z/LD1Q4s+B8OnHVuXwhhdd5DoLGsgCCJ04q66X/Ju/vSaeAxDPvbdtmdtKDV90gVEPIl/xySkviOhmAEjrlzSkwj40SlQZYZ39I+8JBMx8mZryhOsKwqYB+KpdVSDFvhYwPVR9BD7uyX4SwRS59nNI+bRck/DzJ05v12M0nY8fAk8iWL5BB5qASPGRCi8EVjzv3mqpkC9ACrrwhKukB67GhpqRRowQMqCiYbj8oOoHeUWpdYIBAUj8c8WjrjyhNIJ1unzjDPjqXdUjJAAP8TMEzLYq9uOHICQALe/EwWe+QgddAqCzzD8+vgIgg0qp+5nYjaDzCgjmnCYone0klqP4JSgvvK+6LoFPoFMlkPGh+0rPWta4RHTNJJQz4M8EAGoNTPVU8opS64CC9zoAWTFChcq7lCdch6s3L4J/2QFIEBKA1P9mHIBmhPh3Ai354RyAAmWsR/PRs6vOR8Z8FMPS97yxtIlYgVB/I7jC0rIKSfLXF1EEB+BFFjQ3jCLA49OWsRTTEPzvzQEwry7VrZ5KwzAQAPssT9jw1dcHgCrORQCS/bgn+1HsCYQSveaHkzvGv1scgU/6R55Y1YIxhvOm1EZekQWl8wVDxJgwc88QiJc6AKX/meHDawX9z16M/Em7bO8Q08GBP/jEkAEVjMBoAFWXUjRA3KtNwOBXW3EkAZhrALktpC6lKtTV4OU7RHB+3kHWgv/zrnYZl2kCkF4uF8MGQGc+MqEYUCA0n1tkwxbw4ScHAHr71Q7W4++c8czwcBAmHVB/c7Bcek9b3FuwbdD/kjGWgzJjQ3thGmVA3jhfOyU+RxB6FamOFp8NrhsTgLy8Cpzm5QlVptAU+6CiNgXCaIQ0BcDYV8b0P4pi30vfIxD5+w72C9aliegW8MHzqrmh/meuFhYi0pKbs6D9fsh/n1XFMrYMbPgUByCZz6J+uEknDA9AornWFRb01WZEsACoHhOqyC7wdetT0QAK2KqOb5MCUvPyhLE0oQxzqaYNXL5xBvyVXe12vByLADjXAvgxBvSPGFGMIjCmJbEW8HfntxtQmxT0cmxp9UPAdKAZ1upA6EB7qgDo6oCUxXRtPVSpAwJpnUhuxAqWCCYK1MBExZljY5S8SYr+pxAFAuBayhNG26jw8usCQLX0SAAkwwcAEngyQizaXoziIli+Oe7/9kJvNk1LmBMe9ECO3XRB7aPeF0EYHNVPdT8gj016YBcWtBfBVYJuz7mF7VgGY/pO8f5WdQ1/7U67nIKNS7j0wIbDPFZsyNHHY7od/xdlEHj8CcC3TgCWHgGAPSxiSdt4312u/8SPAl8/Dlh4pDeZW2PD4J1c9+uyDaIDkgEJQKnTfG/N8nUAmu5HUnMW5ARbPfEuIHy/ACjRK7FL5pOR4RaxgTHofKl8r/S1ZWBnAGDKefbn3AFIPRPXB7sFiVQimKVgGdl5ooNwLQ1/1U+DQGSXQ9r5Evy1q9rZbP1lGQDZsPpzI8APHgXgod7qUx11YtBbFzC+/C+BL7SAWwhgdoLkONSLqy5oLogYft3ZI1F7EAC+phsAnekokhP4HIzml/PvthQWmPB9LJ7jxkcSr14jWj4/0wFlgJD5eoDw6fe4DzAYPHokWhHJZ3TFSkn4h7YOSOBwEtiMTv1aY0uktFYTmI2/43EMQmCuAJmUE0gmVD8EFdPpdnxhVhqzDr8F4NMtYM9Jfg98EVTeNu9Q2OFZBX7vr9vtgm/lcezczZ61ZNN8DCvilYCdPXqNDQpAlfGTKm0M6AA0PTAyoMSx64cRfPQHXsniOTI+fEWDFGp+Qb9BeySRBV2kpl0QxxGAlHDmkI56X6z+EP7UDYSdRgh/IouwIZ36lHabBE0GJ0r10Rgb/xA/tt/j/6aMAf+7R4CxzuBXWRGULwBfIrY6UNfpvLae7n0I+LO/reoLMqiVMbW38oUhkNkQIzZO7tIweGePcmWlAFTjAYHPVGwXxWoLYblEDkLuTT8MDPhXLJ4jALpaJB+ggU6xfgJknT7IKXIQXh4Y0FZCog+wxiUTwSkXUbSMV1rB/A31OXWuFpPUda/mRHKi1e6U+hA7Zq7l+A+UAfDtHg/LrptkQpZ727cRWOL9542Pa3rOvuOqagUltgtmJM08j4/PILbIDKz6w5PAHsbraTnMGdZWIwIzxIfeK0rn578J3LAVuH8CODRahV/FFQ/1IumIvXP1QudNfyNT8oVqcHviPcBd48A0g2RDuoDqHdb2SalZAdG9dnfDkAE0gXnH5ijWCDbKCq5/MRiV0QD8HgHQ63jG0hdsLGxA3x9Bw1Asli7hO3BwApgng/Gjvq01IHrXJ7q3Cz7E++YziF2rs1ZLZ+8H9jJsSoECWXj6igmR87aLgfbGq4GvbgLu2gjsHwdmCEIPSI1h+SkCRjpfUC3iNWcpoRrcnrYbuGsUOMBo7QBCxSTG/igxVcBIVGPWM1h1JYQPnyKNExGZMDIJ9b66eEBGxPDY1Y5nv+GCjfGAxD+DDpiawphABWZPjwNzNLAEIH4XCH0M7/5c93bBfI8Yk2cgVAdvdT10ifDkBWC/r9lGH51NhIsnsWHOfPmEUKT94WeAG8eAO8aAfWPAwVEHISNQlKQUglJjJExqC+H6Nq93kOpUg9szbwLuHa66QzFWkaFieXxi6hgVHOMCYGRuJ+5V4jYJIDKI9KlsAvFDq8QDrnb8NWVPh9EwdFkQ79TlSMIsN0Mi5s9MoOGno4U6f3YAvefL7Y7rvdoFLxOANSA8f7xSgWmd0kCQbmZ6mTLEnJ0UqWLhUkxlrBn6n3wWuGkYuGukCsufGq2iojnRFpafsU7MDxErJuZhYCsJosHtWTcBe1oeq+hxigJgXBrMmTBPnJKLrr+VED54ibHYvZos8sO+DNcrHrDX8YVVyglAKud0LtMjFPtNMz6QLDY7VomLJd671AEH4Xu+3g7nWq28ISvX58/hguOBg8vtFQvV/hEzxfqOevuTfpjri8vAWz8L3NYCfjBc6ZYHmBcitnFd06pxyb8W4gPlgonBqffTtdTg9pybqiVNBssyUsdUD7eGO9amnf3sXtxQipl7Wg/sD4A8AwHIyZMYky50Tp/xgN2OL8y051qw2hXzwRCEdT2nmck1RxHG+w5jeO9NFQBpR6ldMIMXlFWgVndqF2dVFsJzuOgRwMElB6DcI6rznemD0RnbwQiSRS3g7Z+tVIl7PC9kahiYZm6IizuLigliT/VoUog+p8P9l3wJ7qGEanB77k3VczroUToWLCsABud4ypaLCUoxf9i/9w9ADiICULrQRWuIB6w7nuZrwaZwLBGwClSqSyz3AhHbaRGEFGOmC44D72UVgjW2C2Z4lIF4ArjodODQcqUGqAxfcpG4mJVuVqcL5tbs2z/veV0tYK/nhTAqesYNHdO5PCJZos+WuzxHJIViuXFyJxupNLg976ZK2lizUKodilGUgzyGhokF8yw5Mf+qRkjdjfuDtwkkm7DTkNaBaQ2ox1q3eMD8+B6O3H6em8Kx1Ccx9ptWl9iYIUAAWrI3I3nHgPdOtsO5eOuxXXBdj0V1vOL/so3Cxef60tlSpYwveKf0pAu6ohfdJ8k4CUqgvr5jV6VGTBKALeCAh+VbZLTnh5gu6D44A6H8cVlkNK95O1WkBrfn31R5HSy+JCwPplAxRegE/2T+AloGncNmbQyogUQx/KwB4gHj8YWNTwRAOW0FIIIndoqNkTAxz/bd09XDGLBdMM6/pLKi5whAX60gCK2ujxzEAqGL2pQ1Jis5AJEAFHvTujYAKjRf+SEugm1d2COQLU/DAwQ44caEw8AtZzSIPgAvuKkdrWMM6M7xCMBoiBn4YpCE2NCfxWAA5MEuwvCCEICwlnhAHV+YORfDsWJGgPpMKwg1b9QpFnzHbD2BK2JGul9s8KkYW17vLALQRTCBpzXZpS4gtCXXMAkduuAy8E7PijPWprXJ5CR38ygw1fJDohh2BlRAgq2OeN7uTWc1D0AFNtmL54ESBsCaJcLkDajxj5ZXRiCIGA0waDwgjy8sk5+HY+X9ppUbJSCp6TnFCMXwny1WAFQ8rUAc2wUrRL6mXTAefWnFfnz3FpbagQKLAqAzoZjAKkkpXkNO5GCEvOMLFXOnnC4xIKOjnQGNdWSM+GqHQGd7JSsxUf+JzQLwhTdV4je1nQvr1MkPGtlf9yP2Dy+gAqZ6rQytfvdHSDxgLwBF8AmAYjHWluEDiKGMiqOVvtejXTBOuRSYJwDJAARgZAGWL9Nk+IM3SzgTydE4eec1nZHbtDaNAf1Dpd/SMx2END6kD0oXtFhBXmcY+OY6AFChnKnzl7NfdMR3qCAae2B+VVMYXASvDs3/X/zHJZcB84vuiqABEo0QPnhnwqQLyRURmZBPytnwHde0M1vN2lR6picoKULaxHDIEdHkW2iWg4/7b5zb7DSQAVd0/griV2JYojfpwRGEYsGBrOBmx/OgP5sAKANkcbFzNWTRnX/GSGImMYH/LYlk+gGvdT+bW+SWH+Ig1GqL5QeTtR2EYj5LVHfjw/ZDwL8yJ6TB7UU3VVoTjTYxYDK+Ivv7dzNAZIxpZSiU8jjKgIWTcykZkBawDBBnQdMr5QeTKI5iWCB09AmEb7+ucnOQ/aTPWn6wuzyS4u+R0Ob6CUGqJpIDA97AdqINbgRgBJ69CG4Jp6q/ckjXqB/RKla4WpkO2ODgHoynigA0JiLwaNiEt95YQKJ4FRC+7brKzRH9jZbN6iJYuSHm9I5iOAOhHNJfZkh+gxsBKPbLu3+JgaWDdojhMO5kkDWSlNTg4B6MpyIAjf3IggJgMD4MCARjFMU9QCgAykhSKnUCYHB9JB0wy5aTRUxmup4h+Q1uAmDs+hpXgFLnB6ULONOn5xACNJqxghsc3IPxVBGAiQG9aLeilWUJW1FvVXEN0TKp1C6At19TMSCBpz1dHtT/JH7N9yaxp6QkF73KBxYIr10nAMproB44qQGTj6sjUrtOFPtLeFQHLES9AdDFrq1E6M13MaxVCTNAXNFThIylLcor40zxtgDAPKuVwDMrOKw+SBTbtR2MND7sZwC7Qvm4wqHa4T/uIrhb+7n0EgbQdTijoyg+agWXT8llDsAFWr/B8qP1K7bT0pvtVwHhW6+t2C/m8svvZlawi2CKe37nhFtapkDnILRqBQA+v04AjMyn79EIkXO/DnzyCBwVweX4wxs9B4rRZgyPVFqykgDd+5JSpBU5r0vHyHz+jsc3ub0KABsZMCyQgeExKyFPVIz3lmcM6OfPAGCADYPE67Jfs6h7G0o+xvi7oyK4cLZfOgpsXwC2Lq9MwuuVERonKn4nSJrcXnQKcM7dwMMXgYcsVxkSebJgzOWPqdB1ad2f3gpsnwK2LXWeR9m3danUIV1lBSCPArBwtp+7DThuBti6UDWDmWA/DvXk8LRptfPtNUlihYZTOPCi04GH3wFsnwGOW6iAs5n3GeJJ+KLoE+9VDClQ8R6vOQHYegDYwuY3S6H/iJ8jb11ck0q9Qhoc9QMWgPBZJwFbpoFN88DGRWBiqQIgWyJY3lPozaGJ1KTEPh36zpTkJrcXPRE44S7g+Cng2DlgyyKwaclfFoIwvCwx9Zn3Q1DmIPx/2/sSaMuusszvjfXq1ZRUElJkKsBEGQyYhJCBSkUqAW1tsBdpuxEVaBzowXZqe1g90G2LotjQdmMjKqtBxQERdAWUAkUlZNBGkQRNyIAEMAkxpFKpqjfUG3t9//m/c/+737njPq9uVeqcte66b7jnnn32/s6///3v//++Tz0dmD0KzC4DM6vAFpd/0L3Gh6yTDgnvLwKzAWDGiH/ThcC2OWDrErB1pRgQisIQhAa+AED+HEEY6uNLyrRnZLSl6tSbrgLOeBQ44yiw8ziwfaV4UGbdegmA5QMTLFlqsfn7XecDW+eAmePAltXiXnkuZSBkRcm4UGXtU2uo3xsAZgz6y54JzMwDWzkgBOAqMMVBCSAUObh8QuN/CiTgcWAuyWhL1amvvBbY+VgxbW477paa7gIBqCnUrbUBiQuhAKDUot13IbBlDtiyBEyvtO5VDxvvVfxW/JkWNFrCeK8NAGsY7BsvKQC4hQCkJNaKy2LRIsg6SJ3IQSe1onKKC2CsOYMeN+0Dtj0ObDsGbFsEZmWp5S74g2Ir2uA22BScAJGA+dJFwPQ8ML0ETAUAkgDTPq9zdK/+sMWpPF19NxYwA4g3PtsHxAE4SQC6FdSgmGWRRIJLZJll8EGKjHiX1jwaN10HzD4BbD0GzC4WrsKMW2pNobZoCu6CLCDfCTqzgg6sr+wFphaAKQfgZHKvpRSYg7HN5XCL2AbAZwPrZGaj6ippXhgn0kqmU1woxnHedg5AATuWHig2FE1uVRwoxoX+Wcbg89S3AqCKPONcCi8oPtVP+9++G3j+oSK2xRBFDElUxbTS+3nvc4FpDsjxllXQoJg8FgdCQoGJJTTicLcQ6vPL6wbg9cDM4cJv27oAzFA5ky9/UOSvmg8oP86n0dICBn25JwjARWDSAUgBHN6vfdbv10AbARh8X91vDM2ss+NvAECKPVLCsHoyUgRqrlbnRwB933OBc+4DXrIC0IEmiLnE75di8HsyAcjzWUVGUi6uICMpVwwJVMXdeOk3XAxc+Hng+vV2esAYw+sWoP31r3eLcLwQBeQUrEHh4Jo2h4vDmJPuAyMLGAeEn7uqbgB+I7DlSWBGCwe31Gb9aL20kGDb/EGRxY6WTz8f2wtM8l4pgL1SgM8esHCvsuylME4nn9cfQLtldg6TZ0kUKorAfij23vAPCmqp3fcCl60XFINid1PlZrf41/dnApB6wSQjutUfIDJR8CGIQOwWEH7DywpKrWc8CFzqRLHkVYrB2jS2FQH5vkuBycXCAlIUUAAkCM2iRBA6+ARCe7DjYmQduLYTleiQ/XTTS4DpI+6nLhZW2nzVCEBaMLd+soIGqjD1ampdugiYWCpeBKA9bBJC9ActAk8LES26SqsftInLZ44dQif4Igdhym5WLrPDyuYH/7HTCNwDnPko8LXrBccjQaioe6BiKad3+QY/MGTH6rS3OBvCnQDuAIyqhiDkQ9RX+29yE3on8IwjxQPI8zkTiApGU3oVkD/4fGDieAuAdMw5MFQjEgg1DYsUku+a3uI0TGBfV7PotwHwaOEmbHEATvuDIutni6UAQoFRIFRYhfe/dhEw7tbe9Of0Si1g8HkrwRcevDajz07gIJ7n05rYyWIpb4ya/7vv8PRdFpj/LXDmkQLAnA4jCCOlTBRN/rFMAJKgkkVHpGUjySSBSFeg7/azqk8EgbSEq8UDRACLKDXSyaQ7Br//DcA4LSCtwnKhTEkQcmAIQhtM+Uaajl0uS9NatITXWzpzfcdNB4DpY+6nBgDaCtanYLN6fCj4u1ay0QIqtML/EYC61wSA9tAJeP6eWsAoDysFpg1eB0HIQRCIIkVeCqQf/05P3WCB+UPA+CPAzvmCaFWDKEuYcl1yMN+Y2dckqGTeHPEvvWDSNhOAfbefX0A6rS8CUw8X9066bFIfdqMHJID++DJgLACQumyc3gyAEYRRKFCLD1eu5ODLF6QvXedx0w3A1BwwxdAJLTXjd8seQnGrZ9bPFxLyA7WIKON63tYtCQBN/sv9QPm6BkLp0vl9t/m6ietR6fbyBA4gnXtORwRRpNnTtPpW6gWLH83lKqcOFTEnDiKtoHwy8RNFhrefyeztbnrBfbWfgttsP+kIyO32ELD1cHHvInrlvWs6TsnB7qAUlg/suFtAWkE55zYQ0QpqcALoNCXTEt7A3KoaDwGQfqoAOEUBa7fUbKctltwCajVbxvSiyvoasM0BaBKwwdKb9fN7NfcqBWGiSWykWXER0umeacUEonQgCKRfIgDFjya5yq8Wfsfs8dYgiuMxgpAg/vnMzu6mF0z6Zj5APdvPQec0TEosnvQosGOhaLuIYvnwEYSithE52F1XFAA0p5yigD4otCqygFKnpHUpLYP0OcKURYv6Mj4MNR433QhM0gL6QongawOg+6rl9CswKoSkEIxPyTsuAPigCYBmAXVfYcVf+n0SRYw6dP1YwNgHsgSajiJP429RrpWOM6cxDiJB6NINM4w7LbUGMQUwB/M9mZ3dSy+YVG0EoBiDBST5ddZ+PkCsAiIlQZDa3LVatJ0WXG2PbL98AB+4omB3oP/HgTUhmGgBfRqWf2TTrUSjExDSP/qWzQDgfAFAWyzR8rkFtDAKX75jo6nUguZxZ8NByHbvvqBQ36T1swcsBaBAGGRg40Ir+rt9WUDhQ5ZAU7Es2e9LLzglqHRxNkbeuW+oQRRls5jaMjnK0a9ecNf2R4LAwO829kQB3LTtEYQPUwzQAWgW0AGo8AQH0ljp/V17pm0KRcEifGuNOnocO1rACQbKPXhs8TtNwVr5uh+n6Zf3wDgu29g2FdMtOc8B6PdpFj08ZFrplw+ZA5FTvAQQ0/BT36FPDkRqBT9Jag7xYlQItY0f88j78sZzCcKPZlrAQfSCK9uvB4h577SCotUiEJ8opq8IQFl/PUBPEoBLxbRE62LSqG4dFB8r5bHcOtiOQSqT5T7RKzYDgJx+BUCCTxZQCwhaQc9oKcEnEBKknj5FsJ1LAPo9xoWWPWDy+6IIoqbeaO0VA+zHB0zxIQDKkn1GgtXiRxMIAx0Vn0Db+lkuFjLRCt5WEwD71Qvu2H5OfekD5FaciQay/GIbFgBXriwAyGmJADR1ck3DwTE3TQ4B0LetzBJErTYAr2BBSI3HTS8tLKBZPo/fWQDZp197Z3scjGb5BDp/L3+njMweB6B83Gj9wj3atOsPWin9WgXCFlVO/3ctf4iD8XkBkH5USlAZlNPZAQqARr5vxu1yjmH0givbX0UQKI63o0Wun/xHuR8E4VnPK5JQLd4VNttTBvK2uoiKOUf/f+GjwMNBh0NMV6J0c0NpcRv7mrYv3kh8/uHxYp+bVpwLp3R7sts2YzouSq3KGa+q7+x7Co4nazAerRKsVlV1QitF59dyyFZaYY0HMu9mWL3gtvZXMbymBIFMZ1ov2h0B+LTLisxgW+Eq5uU92iZ72ud9vvR+4JFp4NjkRh2ONi0OB1/UBCkvEYRhfuNs4OmhhiPKnFQlx6aAjMnSXJUAACAASURBVPjmz1w41nnwO4cCIBvBwZgTAOUHRq3gyDExD4zRGVYEnpm5LqmQc0M5esFt7acFl0SlHiBxuTkYxxdaihUC4QVXFu5FCUD5QtJl85sjGA0ziQxqeu/fem+hw0F2fLLQGxFlYMRvo7v1WmIVtpt1DFkXvOR7LwJ2HSkyoZmEypoVVe8p7b6qEMnidGG/Vl/L2aPOIwuA1pAIQE3DAmFa4j9f7CPaFpCHKujr5xzZesGdHqAqKz5X+FLRAl58le+jui+kTBALMcgZ73CDBkpN2/7+bfcWOhwUyCEAjQTcAVhKdjkPc2RajewKyu/n1//qJcA2uhBMRGXQOcn9U6JIOjXHQqSYOsVoQp1HNgAvz8yny80H5PVz9H6RqVd849WtXQ/zA0Ow2ayGLJ474L0G79vvbulwkJi8BGCg4S01SKqofoNvSIC+5zkhFUupV8rUTpJN06KpaBkFQm5M1HlkA3AyM5/u9Zl38zrk6f0iU6/4hmscgK5ISUtCTowyDqb7UxwsqFJW3fo/vbuIBJEZ1YRgyHwQKNi0KEl1OKTCZJdxtPDn//v8ooaDaVgqFyiTD2IKfcjZS4Fo+7g+HXOPv84jG4DIzKfLzQf8KVfI/FNKrQ6h94tfz+vOA9cGAAbrpylY2SDlVTTt+uCnV3/V3a7DQQAysJAwobZJgUXi78Qayhd812WeiOAZzEyUiAkHMeu5BF5FwZQAWLPwknkLQy9CrPMy8+lIHZFzvN3T+YbV+8X7c64OHHix74V6zIxB+RJ0wQ+UU992tYoFy3fcXcTDxQkoPsCUhFIczKVCegSg5B8A/PILN9ZwxBSxtiKiUAOi7JW0dLTustF8AGbm0/1o3vjjnSGdj+lYlGwdRO8XN+c1wABIoHk6k61yuSCJITq3jDY9Vx0BqK++uwAfX6JkI/hME0SC1EGguiQ+isqcQRLrF6/0jO2w+6FMnZhyZYsQ1W50qOHgPX1NXndtODsfgMwHzMin+0+ZN0S9YOllMzWfLwKQSS396P3iY3kNOLDPM1y065H4gOW3p4uTDkB8zWdb7FgbdDhEgJkCUDRvogTmd/vPv3BVAUBuvylNzAAYi4hisVQnEHoIqWblrxqm4Mx8ujfljT+YjsWBYgIOc0oJPsq1slCpH71fKybJOEoAuuVTRSCnYlmU6P/Z4iSJEcbLv+Yu9/1EAh7JKEXDKxq4ChUiKymRbwjgHdcUWTARgLYXHSr2LOU+BV7MVwzxwOfkOWybYAGZD5iRT0edjpxD6VhcOQ6j94tP51wdOHBdMeXa9OqWRcmWXA1XLUIUH6zyCwlAs3z+YBkfs1u+VIejJEF3ckrjI9T0y/aMA2+/tgAg08VURKT8vbKMUgAMIGzzAcOi5HknHQAz8+l+MW/829KxhtH7tTz+jIMAJPCYMULAWd6fvi+EY9ouoZBM/Kx/4LUBgFLgNC5o16FrE8JJVJgkiFhaQQBv3+dVbMrWVsC8UxFRkjjaVsW2DtRdOJ/vAyohVYK7A+bTvTdj8HlqTMcaRu/XxHkzjgNkIOWuDr8jnYYDKDutgpUhra0uAlAyCCUAK8BXcjBXgLCk/h0D/hcByDxFAdAzoFUqUBYRJTUcMWdPP7ONL6i5bLQeALJRQ+bT/W7G4AuAOXq/lsGdcRgAY+glLkYclJVTsa6ptCX3uQjAKINQstFrAZKIwWxQIhIJuovB/Nx+r2LzFCwlj8Y0evl/MYk0kieVtcvrwGUnHQCVjjVkPl3mItQsIPuElx9G79dOzDgMgGkAWlNyBJn8xKprBRC+zgEo4LWRgcdVcOCjjlNvmx84DrzNAahaFZWLygKWxUNibIhTcPD9BMLLa65bzreAMSGVoXvJ/Cgh1WUfO+XTZS5CDYDs9GH1fnOrIDcAkABTTDCCLYK0Cwi/586WcKJUiEpC8CCBYDsiiSplqUIUmOjf+o2tIiKVUJbgU5uSWl4DWwX4+PcXnrQATBNS+8yny1yEopdcay+930y5YhgAg+9n2OoUeI5TdQer+32fdhmGoOBZanBo+g1yEKU4dYgFSvqB//vZBIBt9RshkTbW8ZZZ2hUgvDL3iU3uux4LSBM0ZD7dPRnTH08VAIfV+2XAOucQAMuVcKfFSD/+IAABsEoGwYAoHZIKEEYxRIHwLS8pUuhjFVs6/ZZhIVWyxVKBBIRXnbQATBNS+8ynI4tBzkEACv+chlUVIKE/5cRGsWmlKfIzudc3APLQSlg3E2OCyVRc1kpU3DgBmKoQsWtlBcswjPu+nfTYtBL+GQdgOf16GCZW6pXlBCqWSgqJypoOAFfXXDifbwFJLvi5HAjlnUsiIe6AjOp4iQNQHRlT2PlgJCUbbc2s+v/hFwFb/q7gm6HlYpBbmTV2sscQyy/qFBj2v0/cAdz/HGD7NDA1AUyOOU+1CwWOewNjKj6/O03F1/WuugW4/XJgfBoYmwDGdH7IxB5kLPIB+I8AfNwZgga5ck2fJbEm8V9zNWPfrasbgMuPAcuseJ8Exsb9FdBhA+7gaQNKB6TfcgCYug+YJT+g89aoBDMmIMScP12uTKj13uDv8zsKig/uJ1uQOsnojm3qB5P5ACRBH3OhPuzzRN9DV88HqQLEWPJnvTy5nm/t/1s4BcuSpRZtGAu4fi+wtBVYEyccrYwn6hF8/FkJp9bKxAKVFsn/d8urgbHPA9NPOEOWl4+2cfoFHhfVrJTZPKHSj5daOtup6JyCpPx8rHWRVQ7WOlrYCMx8AHIzlxkALPD9c0VB+x/A3E/+E2fUYHXdF7KTGwdvTd0AHP9r4PgWYG0KWBdfsBdsMPfPrKKsoL9XAVLAvO2fFylCE4cKliyrDVZNcGS1CqEYhWFiAZV+XntaURdTLmpCEbpchTYLqi6NrkMCzLzt5Xc4HwyJmmkJ+Z73jQOh4NWeDUZiK1K08f0EXt7CMHVawIk7gaVpYJUA9LI1Ao8bzKX1cytoFtFfpdCIWz7rgzHgth8u0oPGDwETc8CEMySUzFaikgtlpW1Ta8JqNba7lVljSRgW+Q6ZP/57WQvj6fydBjXfAjKbgEvMLwWCvhNoipgNpnQshlS4IGFWzIk6ylWwAz93ETLxGWB5ClidLABoIOS7pmGfG+33YAG5mND0G8F4678vkiPJczNOAC4UyQm2N8w94kirFlfIAl7i402d6dbPWWAtrsjOFiuCvAJZOQE0pHTFsckHYDeCvhNgipQNxoAz8/8IPr5nbvH2jd+6AThJAE4AqwTdZKEBLDoDgU4+YVkPHIBoPwareOt/BkDexsMFAFnbzNJYm0IDnVwbt4uyur1kwL7Tp+iZM/08WT9Rc7DHUmuYTr/x+6o4ovvu9fjBbgR9JyA+omwwxvZI5ULg6ZW7y9FPf9QNwKm/CgCcKABovh8ByVy/UCtJq2f+X1yYJPGU27lIZLbuEWDsWBHesZeDz4iURLUWa1TE47LqK12fZmd3OXidFctqm92KatVs1jAEsNv6sdymaa2g8+xUL4I+Pn2beCgbLGWHI/h8G3oTr45iK86POlbBU9yKI/AcfLR+ouQwH9BfmmbLlTHboOnZ/T9+5vaf8FUaAThXsFOQ45mUcgZCWTAxe0UQ+urYMO1/37GtxQmoLCBtRSp30LrDp2SFdzYMgk/R+VNwvwR9mwQDsaspGSfJgYDYNTbp8psCQFJxEIBkQjDrxt8dXCUIY+COH5MVFPi8SOn2n/QYLZ9Gp0cxANIP5IvAkzVzxivRydnKNzBa8fddM84b6AFyAriMF2pajk9kYIeoClXmA3AQgr5NQEHMBqMVFMNaIOayNRL/vhlH3RZwmhbQQUcAasrVVGz4EtjCu/3dfb/ID3PbT7uKAZ/MhcIC0vqRTo4W0IBIEAmEtFwCYqjW03bcmdwBYeoWgetUbrR8snrloiR2drpACf+rD4D9EvTVjIJu7HBV+781X752Czj9lwUZkTEgcPoNPp5Nv4oBRhCG6dd+1DkMz1JIhR1BAHJ7zwqO3fIRRM5tmDK5CoQKsSgOeBYBKFZULTqcB9r6Ni5KYmd3WKDUA0BlhNLM8EbT1QBXBU72aI5ZjUcVOxz7WLkQ8d37vsart/uA6RcPsxNSAtAXHDYNC1AEpf9s01kKwuBwGU7HgVt/1jtD1e60fgQigSe/j5bQp+KYpGB+H62jT7P8/ZypBIC8Dhcx8eY9wF015abhmnoAyJ5WSrKeNgKO9SHxnT/LSasJBim5lRjWBEIVeROInKL1qunybRawLgASdEy74qjaNNzJCgqEEYzBGvK0297mAFSHEIB6ebKDgc8J1ksmV8t29f1en6L5v6cxIK5iK6Xne/5jCTiFcTqVn/r/tWDPWwXnEPTVgIKUHU7ljASawKefIwDpMdRxRB+wFgD+RREDJABpwSzz2c0LfxczVjkVKwaYgtBBezu3SvX08d39P5uO3QKahXMQciourZRAGKZWar/YZ1xXRPe8wQr2AUK7TvbOVTZBXx4MBECRnConUBSFEXT6mf/TK+/qmzAF/0UBOPqBZYF52HrTFCw2LH5G8UCzJEko5nZqmRnPh/uCXmpnVpDTsIPPwKApOaSA2QLDLSHf97iPx0tpISLfz7bl4iFfsUsnj+HZWEeOYDCDnDmCvZkEgedcCjxGseIhBYt3vx049HwMLRh8gA9gh2MoH9ABqKJzxf0McO7XlSAU4HzhYYFq+5D7hwBu/98OQLlIBCKnW39SlXNY+nqeiq2dkQg+gnGPb9/ZpT0lq6MV5D96gLCwgDmCwbdnCvZmCgY/dxy47xxg5SWuUjigYPHFbwA+fyGwfr2rXrMvPB+vp3L3GHCgi9JOHQCkRVPppeUBigXLFymyejYTB4YsgfA20ofRAlYB0FfAlvQqP0/TsX5PLOB5DNu471cmIwiBaRww/F01J+mz2pqChxUMZvpJlmBv3iTocsW4dzewfhkGFix+2febXDAeJO/YEILBB7pU1g8LQFo98QASVGYNQ6DZfEG3fnEqrgLhbf/HV15anbkFNCvohWSl9XPQ2XTM/2s3I4DwPIZwBEDfgitH0Ek6N6x+u/iD7T4g/YdBBYPpWHEaHlqwNw+AQa4Yj54JrJO+aQDB4pt+oCAyYvOPEIQDCgYfeF/9U3AbAMX7ItAlVtAspKZdz5SOlvA2pstxjES3wJ+92NgAGK2gwi78QoVfEhBeQACqNNP1RdoA18kKdgDhxkUI/zKIYDCnqyzB3jwAJnLFOEIW7QEEi1/1Y21ywVglCAcQDD5/Efj7M4CVrZ5AKlkhxeQUaxBI4nvFzxf8IfCVC4HV7cC6ZEX5nen3VX1vAGLZq8ysrvHY+QBwbGfI2E6JpLvdX+ksthpUvQrmX/sVDGZVUJZgb17vJHLFeGQcmCdVb5+Cxd/5xjZ6QzzMLOQBBIOfTV2Ps4HFHQ7CLQUQmUrV0rgKJMsCjsxGAqTn/hzw0EXA4tnAyg5gbTYBorKkUyLnkB9YVhTxu+kT13iccwtwdBewPAus+b2ar9xJAafqfgMQO4dh+J9+BHe5gqZZZzYok1JJUcpaR6bp93P+W/N6p0KuGIemgEWKgPQhWPxdP7NBLhiHKYHUp2DwpZ8rLOD8tmJQVplOLxAqmbRKC6EDYC7/CeCRPcCx3cDSrsISrs04CPm9ArZk55UvKAspYLqPaPdR4/H0g8DRHcDyVr/X6VabLHk2PhjpPVZY7d5xwF6CwS9y/4LbbVyQsEKIufGiKe0p2JvXOx3kinF0GjhOQY+oNRtljji9TQPf/fOV9IZY4Gq4D8Hgy/4W+Oo2YG5bUUy04vUcLCqSJVRWszJbNgxSmMau+q/Ao2cBR88EjtOqbgNWWaTkIFz3YiWrF4nAjtN0nBZrJnU+/8PA3CxwfMYB6LUra3oglL0tps6wlVha5rLiqd9AdDfB4Je6U0s/0BXTDYh80Sr2FOzNA2AXuWIszABL1JaKWq1R+nwGeM17OsoFY5XTVw/B4Cv+Djg0C8xvLYqJCECzgsxmZlq9T8e0XGUyaUizavPtxoFr/zvw2BnA0Z3A8e2FVV3x6c4sqwObckeyhiXAowUSADhD1XhceDMwx37lvU4XxVN2n3rJIocygkr/Vbs7fe+EdBLcfaXXQ3IPWIrpBB6XlnwpR76jYG9e7/SQKzarxM7qJFj8mg8UarMV9IZ4gvNDD8HgKx8HDs8A8zMFAFnPYQPDl0Co2g4fpDZLqKCxT0/7fhJ4fCdwbFvhRiwRgJruCOwUgCpeCvUjZmEFxhfk9W969kW/B8xvKQqnVgg+B6CB0MsI7P70AHgmd2n1NQ0rv7FvALIlVYK73MnQCDLThSGZoDpuP7uCeuX5n8zroB5yxThGnQ0CgyBMxY63Aq/5aBHG6EBviDlOLV0Eg1+0AByZLgbl+HRxnZXJoqqttA4ODovlJZVuSjTQFtq+NwNPbHMAzramdVpVs6wEoPtdNg37wJfvsYiJP9NFqvHY+7vAwjSwxAeNxVO8T6aNVRRRlT6hHrJ0Ovaw0WDJCKng7g86APvNB9wg2JvXO33IFWOBgn8EIf2nRLD4tbe1+AU7yAWbZeskGHwVdd2mgAUCcNKnJgLQrZ/V9/Jnn5JUYmnAE3hCmv3+t8AWQfSzyPK/POOgJgDdsgqA5nfJAvLdLV+bz0kK4RqPZ3wQWJxyAPqDVhZQyQr7gyaXI9axWCFVAGLvRUhV46PgLnUWBs0HbBPszeudPuWKsTRZAJDTo8l8ui/42juL5veQC7ZpsEow+OrZQlqVVuH4FLA8WVyDAOTAmHUQCAWQkOlsQAwDt/9/AE8SgPQpNa07+AhAA6HLXbb5Xr4IaAMfv/eGvP5NzyYA7UGjBWTWjh40v9fSyscHLtaxhJWxFVsNNAXH1khw983+DYPmA5aCvXkdNIBccemfceooAfhAAcA+6A2xLuAGucxrzgKOMexDfV9OwbS2BB/BEoqLSrBoYGgJ3E8qLcIEsP/ngCPuUy7S13L3wb6PU56/m/Xj4Ps0TKCXQA6AXuNeZY3HMz5QANAeND1kwcKXlj6wOZQ+b7R+Pi0PD0DeFAfk590CKg8qncfoFzIRVWVqfFfBhgn25vXOAHLFWCDbvPstBsJZ4LUPt+jdesgFg+qVptWq11bg2gtgfuLiRAAgQeg+oEmsOujsXb5SsAoCIN/3vx04OlNM6Yv0tdx1MKvK7/TFjVmeCD4HQQQhf159eV7/pmc/kwCcKABoeYvR0oept7SEoZQ0Tr1lPuPQFlAtO0nyAcWhpzw/FSjFzGjLx+RGvxzoSeC1hwsA9klvaFN5FAy+9mJgnhaQ0qqagglADo4c9AhCDpJPl5ZommQ8738HcGw6AJBW1VecZv0cePwOY0/wl1lAD/WUCx0mMlDLr8bjmb+Dwp3x4nkDYbD0thIO5aNtfmDi/xGEeRawxhs7Vb/q2huABQJwAlhyy2cC0xoggjAAUCWWAkksOiIY978TmOOqeqqwqAx3WGhHK06n7TDwOcAV/iipPAKjwgrZm2o8nkUA0gKmAHTrp+o9MTrEYvq44o9pZIOtgmu8mafCV72YAKT/RwAy5OPOuVlAAk9Oule6xQRTWUKlWtkU/IvAHAHti5oIwDK841ZPFtCmdr0U8PaC9hVultd4CIC8P2Ztt/m5/qC11TJXlJDGGpfGAmYODgFoCxACkLpuWh3KCgqE8gNVZK4KtxgjJAB/2X1Krao1rfN7CWZf3LSBT4uAEIyWBVpipL7GgwA0AW25GbGENBTRx3rm1M2w39mmrFVwjTd1Kn+VAZALEE5LtIDyMWUBvbLNLGHgd5H/V07BDp7r3uU+Jadgn3ptxekA5MBri0/Wp4wzBjDbCnkMWMqVpE8GJwLQqvfc0pqbkVj5aNk7gbCxgJno30cAjntowtXNaZ1suvSKNhsYTcVKmw9F5xGE+94dfEoP+JYhD/8OC8eIPUsUHokVVKB78XszbzAF4Pvd//PCKVGIpOAr78mn4DZOm8YC1jco+w6EFTDDPJqeCEBZBa5GffVbhmQ8DtZW5TYOvPhXip0GTuu22lTMLSw+aAVl9QhEWjurI/aQiLJkTMLsX9R3r/ymZ73fp1+37OU9hunXSkdl7T3QrhKCtlCM59k2i5CMMSIAGdqxEIwrmptzTsCEut5yilKoJLAcxCq3fe8tLCDBFwO+tKjyuxSCMdYEXoeDrHcHvu0tTwLzmwHA4N/Gh6zNCqqeOSxC2lb8tQSiMwbuqXIqAcjFh2JjBKGJyShQG6ygVbfJegULWBYcMR3rvb6oCRaQwFPgl1M5rR7/JtBZOIZWx/0+s4QeY5z/1/X2tFnAxPpFELaVkdLN8MWGVr4pCBsfMHN8bmTKfCjZ0Ncp456/x58zLzfw6Qf3ABd8pUgEYmqk5bGyek06IQl1bkXScnlN/u8L24Gdx1qVq91KQvrpgwaAAw9p+wnXPw1YjyWMGtDo2ASOFGMU7SIEUzdYD34vMPmXwLbHgdkFYAtlGiim6DpxJtvq9LtlVr/aWKEB8pUXAOOPAFPzwBTZ9r04vdQ9Ts4pAZ3cd+yHxgfMAOH+vcA69/9Uxijmz/AerYpdar1lNSMYzV+vWY/34I8DY58Gph8Bpo8A04vAFEFIknIHohGVR62QhFRSYjQE6qFri2z3iaPAhHNNlxKwArI0Q1IAxwfReacbC5gBPp66/5ICgLKCtqnsrKKlrFZUFPKOr7osMTtdsxzqQRZ93Q1MPARMPllohUxRqkEK6gShOP0S+dY2hlRv99y+ovRi7IiTnTvLqmg6xDPYpqAUgRgsoR7MxgJmgHD/c4E1FXu7FRRbvEgd7evXWlbPpp9EgUjiJpwe6zwOMlvpAWCMVusJYPIYMOlSDZRpoGiNxKzbdIQlXONMWJbGtw4svdgz3El47nzTRvPrrKptAJT6ZrzfintvAJgx4vsvdQvIXK5VYF3sUZxmJUvgA1FOvwF8spKyBtM1y6EepI4LqVMedbEaTp0EIKdPKh5FqYYqSxgo2jgFr13j6XXHnOiSZOeBVSvyC8qC2r05FVvVw9cAMAOA178AWPMp2LJaaekiCPXExwHw660n1oB/niGQazwOkkSepbJ/72I1x4CJ+cJ6lYI1riccrVicUuVSmIW82pkwnHHVOKbFsOozQGkFkwewnBES37ABYMaAX39ZAUCCb82nIlo+40p2gNnvsoKunxH1xGwA/LOzdQOQJPIuHzV2GBg7Cow7AI0l33XfjOsv6oVodes6ISbBsAZMX+kJxU56KY7pkmFVhOciuvTzSt05v0+ryuT/9gDrZNe4wPMsI7VJP3GcP7gUOOdvgL1rRYJ0ZI5IV3hV4/wrGYPPU3/AiRhYusy2K7mU999P+z90ObD7LuBZK0Xdkeq9NSX2+o4HLwfWlopFCC0fgciBMtAFC8CGrYXVoVjnU2G7rTXrzh4kfRzLY1kyGwBoeiGcPiXb5eAzdXWnazPCSScb4j3xfmav8Cx2p50lAMW0VXINitCogl2r9H2dcctWwQxQsn6ZTBbMNtcgdKIbiZj51VcBk38CXPxoQcfCUg8pjcYgZScw/momACnXyr4leBhs5QaBTHpf7X8dMPYJYO8XgAv9e8QJlAZZq8D4xSuANYKPJQn0AR2AHKy1MACKe9nfFI6IEqduEWoHIJ9wlsVKLekoMCa9EAegSTYQeM4TXco2SEMkAHEbBZoj4bbYtdyCVrFqGXgTSxgXYTZeHLi9AMjEQRCVUXP/n4KUaaT8vVTi+Rtg7GPAuYcAWlMCgUVkQfJ2Q12yBvPXMwHImhDWwf81imsTiLSEvHZkr+jY/p9CQRD4p8DOBwteItai05qn31FFdfLlFxYWgCDUIkRkj/TxbCEi/89jfPZ3X2VqYSJQbmUNQY3HQT7hbv2sLoerVwKQHNEEoCsm8R4MhPRjXUGzVEIKIoY7yaEYuY4dgGb5RXruoSgtSCLLarkICQ9f6QNykGjFdjsIBaI4kGlt8W+Rg5g0HJ8qAp47nihAzFpuWtPIMBZJlASILvR6fQ0DCVbJCkJOJCqnk4pGpb99tZ8MopyiKDX7WWDiwYKXiEQOehCrgKh+eJQ+EQHo1Lby/zRlyf8TIbf9XS5ftIb8I92YugH4ay2pLusorl7dAoonWtMwQSTdOFuQSLTGHyIC8kxSIQuA4hwU2WUAoO4/grBcDbsfWElSzg+JCoYDoEGM1ixSkHzgF/wG7y8sIa3J7JPAGWuFJSQIaU01iJHUiYP4e33BrPOHmG/JMaOfTZVYRhwGav87vWKPJ9/rSH4IOGO5sITqg/ggxXs4TOaBAECbeoOsgfl+DrQShFqcEIhyyt0MbMusEkx76iAZXKM8BvXiZAGlF+KaIbaadYpem4aDgpJZQz6YJABV5VcHAJZ0v4FxX6KG5UpYs0KnqjhRuagEVgPglYAl9ciHf8mdUrJh0Qx9vkDBzBywfbkYQIGwahA/kglATsHsDzKA0BATiPyZ4NEDwIeoa/uFYKKXL2f24nQoIgd9R3yQCMTFqwIAfdBWI7+yB5ZLECYLETd85YJl+2YAUNosLIel/xYlu4Jsl6bhNhD6it4WJCvA2Zc4Gxo73RcgJeOqFmGR6rcChLYACyGojmEYdj59KnZ+tIQRhH9IvWA2hiREjDeRI9Cly7fMF3EtWRFawhQIf5IJwE56wdTIYdt7tp9ys1K8JnoJvod9Wn682PNkP4hUy1ndWgstAtBDMLYN5/6PAc5DGNoF4SrZfN+4+IhT8jqwg2Cp8ThIJ5vfSWBXAVCrWN9SMxDK+skaOvhoAc8me654pmUB3f0wyt+E8FyRAGmPlOEoiSD2qgvmAKoOm52fAuiTDHSyIRxx+lI0QxxADubfF5vffMmSajrWlP7nmZ3dSy+4r/ZzAUEHnQ8R70HsXlK+PgJsW68G4XYGZj0EY2EYATCAT6tAhmE0DXcC4faapcwMgAIfLb0kuzT9Qmw5uwAAIABJREFUSi+EfeALkSrpBovbrQDnkm8wAo8/E3i+CCsZ98NCpAp8cUekZyBavI4ET/TnaAk/RQCyAXy6uNSPA0i+wMeB6ePA5HFgZq2wpNGK3FUDAHmv3fSCe7afX8CB4UNEEOolVi/3obastNwJ9cO5BOBKEQMsAcifHWzRAigWWAlCn5K2bQYAOe1KMjTIR2kRUhKVS7IrLia0v+3xwHMZMCbYNP0KfG79zAqK5DxOvyEuWu6VD5KSHy2YAEQAfpaRdl5UkuUctIpBnCIIl4psD03FtIIP1ADAlBuJM47EqqUX3LX9kSBQcuuyftK78xUkHyQ+RLqHZ3Fv1KcgLj5kAQ1s0Qo6IA1nHhNLQzA8ZxvBXuNx8DcS5UYpNnoYxsCnUIqvZo0F3wPTMa7Hv53HOJVbS/l+5bumX7d+5WLE44hxIRJB2NMCqj9ixwuE90svWCaIA6bAp959EKeWChAyA0PTOV2unGMQveCO7bfqHbcS4rJR7Ewqnw5AWhLuImg2uFQAXAVs8RGmntW4+g2hB3P79L/EJ9zGvqrxOPibiVihAOgrWQOf/EBfBcsPNBBqW9Hv6zzGqFzmoXz3B9AePgXiq6bgiv4YOB9QHS8AfpkAFMMjrWAcQA0iO9XJiQyAnos2vV7ESHOOQfWCO7Zf7F40mZFQScRKAYBaSU6vAVcTgN7xXHiUFpDTMK2dFh56912BTiDcvpkATIXzCL4g3WXTZ4jpGfjoF/oihL+fx+0yWUABLwIwtYKKIabgCzHQvi2ggBKn0McEQDaKT5cGkIOo6SuyYzEfjQB0EM5nZgAPoxe8of3sgSqCQM3jkdFLvpRvR13+7UVRuhUFSavNO6otwp88ZZ3+t4M6HLtch6OT9AG/q9cmtf//gV1JDYcnQ2zY6/YakfSrU+Pg1M45NqPt3IEtoM7WFHokyrWKkooglCMWLYjiUXMtK3g8Uzd1WL3gDe3vRRCoUEYCwGtYFxxqgA2E/jI20F5hhmQod98BHNnlxOTig1aGiDanO21yV4DygWuB8YeB6fnC9WEtiKVVKeE0ZGiXWczeJoWMIig5a9V5DA1ANoKDeDylZ9NSXxyAsiKawrQqmCv2HVf5e8aRoxfc1n7xs+khItAUvojvyWryxVcWJZksVSyZoQRA3dcAoHzax4Gj2wtu6FVKM7gMgti02jbV476oUJJs1j/AbA1mQ3Pm8eTRsoZDtR+xZKCiEKmMXTIeXHPGdhYArX8FwG4DGMEnAHIK4yvT58nWC2b73cexaZgWWaEKgU1gjNbPP7PvOYGsUSBkv3hBtmRWNzxjTk9RWktvxp6POj0vARjY9sWkFel8RWxegjIF4RjwAOnZWMPBTGjqvHmszxJOBUD3xyznL2bqROvoP3N3q84jG4C7M/PpcvMBef0cvV9k6hXv+2Yno5QfGArRbaCC0mWv2YtF3ecerNDhkNZIIsXQRv5dlTtGADJSz2gEE1EJQM//026HdIEZLC8B6A0tk0g1Ja8DuzJdphS82QBEZj5dbj7gxZN5er/IZI+67pscgE7QaDOUMyC0Wb8+gXjuR4F5J6YsaXnFhBoAGEVvUhb60jISgCQnoh/OLBgvIrL8v7DdFkEYM5dtNg97tvz5zJqzdfIBmJlPl5sP+DJP5xtW7xffnzeh7H+Z+3+RpkyWT1YxuURJYVtx6T0fCTocouQV85VkHRIGegEuEv/YKpkA/JceVmL8kv6t5/9pu62tfiPWcFQVEa0DZ9WcLJEPwMx8uvfnjT9IgZyj94t/ldeA/S9tMaGa9SNdmsIxbvVscVJ1GScoMt4UPwhAsmMZ0aXzQBsvdGRBjQz0FUpEJRAJQOq4KAnBdz+sfiPJ3bOYn8fsykyVWMfiN3BOzckS+QDMzKe7OW/88aqQzsfE5kH1fvGjeQ0wADodmVGwOeiMsUqHrGOnS4UFy9P/wAEojkEnI+IqOIJQNLgpCXhcmLAtD/D+kgQE235L93tj+YBqgTX9BiCeW/NedT4AmQ+YkU/3sbzxBymQuZhm8g1T+QbV+wWFdjKO/Te2mEFNlCb6gPF708VJ1TXHgKd91GnZpDfi1k/gM2vqU3DUnCuBmNQe3P9vw6pe229KOvB0K1k+ZS+rnrfM2AlA3JMZtah/EZKZT3drxuDz1O/yxAwu9JgJxr3lQfR+8aa8Buy/wdWQZAVl+ZzCrG3q9c/YrkmHy3IRYryAAqAkEBIlopJxNNUbER+fA/H+/+AAdP9PmS9dazicJybm7mlB8nR2dI1HvgVkOlZGPt2nM29GCamcGZjAwlQ+vvrV+8X/zGsAAUiLVPp/wd+zaTMFWw+/kAA0GQQnpCw5mDsAMIrcRB5mC/+MAffTwgfwKY2KfmCZ6ZIkUShrxXxBX4yYaV8Hzmcn13jUA8CMfDqWYeQcSkhVOl8U6uxH7xekrsg49h8oiCENgC5TUG5vKxxT8f2aRtOtcAKQ1s8soPuOVUIwpchNlEEIOyNSIrrvv3hwnckWIZPZsnbcDyzTpvg3lU8mpZQqozyfK74aj3wAKh1LgrsD5tMxiz/nkGD1sHq/YNFOxkEAcuW7oqmXlisuQOT7VV2jwi/kTgj1RkoZhBje8Z83SCAEEJZW0C3gff8tADCt4VASaWIBK0HI9q8BF5yUAMzIp8tNx5Jg9bB6v/jdDPSRns0BWIZeUitIo9IhHmhXTvzCPQddccnZ76U1V/IvC4SBCFyg26DFNg7c++Mhhb6qiCikT7WVUmr6lYn2nRKyrdZ51GMBlZIc07GUBdMjny6XCiUmpA6j94vMZbgBMFo552pu27PXAqXTyAUQcitOQjAm9xX0N9pIwIPmSCmH5QuPqER0L4kDYgp9zOUL6fYxkbZcFceyAreAF3GlV+NRDwAz8uksnT3jiILVSmpWNlhMze+k94vMZfgGAPJeHDjpCrgM01Tdry9OzvmYAzAqLVWIwEShwzbRwwSEn+MqP6bQK5tZlWyhjCCCsC19Xv7gOnBRbgp7cu/5AOyVjqVMmA75dJZ9nHF0yohWNlhMxKnS+0XmMtwAmFq4imnYbrEqNJPc+9kfd62RKh0On8qV9hXZ9askEPgAfI56ziocUgVbzGT28lEtRMoKtg7lBHtznfZNA+CQ+XQWM8k4uglWK/NLYKzS+8U9GReXD0g/Tyvh4Ne17Yb4Zbr6g6y7/aNWcoPpjKRTsJIags5IJwkEAv6en05S6GUBfRWsUExZyVZVQCQwrgN7Wfdd41GPBczIp8ODeXfTSbBa6YYxlY8/p3q/udc3C+jTbtvqt2oadnB2m4oNgMn0W0p+hYWHWbwg9yU/0Kb9EIy+5y2hiCit4UgKyTeAkN8Valk4Le/ldlONRz4AWWBRM6fdIPfHstw/G+SE5rMnVQ/kA5AkLHS0ak7V7reXfhgACaBqDtD3e/nmc5k9kA/A80JReq+U38zGVp3ObJo/BvAOD3dtwiWar9zEHsgHIGlFubqSx7+Jja36anLLcDvvgwA+NDpDfILv+qlzuXwAXuSjrkKemlO2e3U1uWUYnL8dwB/5e2apca9LNv+vsQfyAUheX4VguB+mzIsaG9ntqxhF4Xbe3QD+n7/uHLAW9wQ1tblMRQ/UA0CaHC7plXEh+q4T0OWcfhleYTSHBK0EH/mi+fcRuKQn4I6fWpeoB4AevCz3HOOm9yb3F5mBlZBNclYCj1aRfyfrbgPCTR6AzK+vD4CyglX7jpmN7HY66d1E0ctdIrEEE4wEIMlam+Pk7YF6AMj7EwAVbU82vTerCwhAXopJN9zVI+AYrOeULLZgErY2x8nZA/kAJGWr0naUWdFpy2cT+oCWjpdjLFxE5UzYIBBpEUX5nLnlvAktb76SPVAfAOUHpiAMm96bsVtCAMaKALICMyxDq6cXfycA+b/mOLl6oF4AiqBRIEzBp7/X2Af0+fi1XIioMIlAI+AIPIGPmeROWV3j1Zuvyu2B+gHoFfZiDS2lC0LiY52WUADkQoTTMH1BFSYRdHoRfKSu5v9qrizMHYPT+vx6ARhSuDcAzzmDo5ZGHT1PAKYMwQxME2jiSo/gEwBrrq+u41ZOy++oD4BaCcsXTPiSI3ey8s4KGoG8QwCMFM+0ggQhLR0BF19SXuD/ayakz7uR0/TsMcxg3SjfqWNA0hsrga/ojaq/8WPcC+YIk4Ke4CMSuB2XVht1Oj8zIfXlU8BtU8DhmYRXWdfrdF1fgr3+S8At48CD04DVjXQSDO70PTUnaJ5uOCwsIIFHSSFy1pKPWCDsZxCpw8UVgKSPxLXM937OzxxAljzcPAbcswU4Qh4V3UN8mKoeKm/bu78IfKJQa8VD48CylHQiL3O3/qg5Rf30BKACMtJXjXKQcfBSK8Dfqc3KVCwuN2VFGRnm/yKZtq4Re5ifyQQgM2A+BeB3GHaZBo5MAIue0l7Kt3cC4xhw+5eL7TuCkJk1jBtyerbUfYG5ExjZ/pqrxE5fAOrOq5SmowVIrRp1IyT2R6+fg0bgVYG4CsyZe2UsaiOGKXr4Sfp9k8CxCYAFSKyvXeY1o1BxQux91yMtfsHPutgnnyUuUvhc0ZsgUXib+nVkq6+ZKaABIHsgVZnuwD9sVo66rrR4ImdhLGSQ8zPL/JgBQxeU1ouWkO9PTgDzbgmXxrzMkatl3keivfG5x4r4IRcz5BfkO5vEZ0kgpIfBZ8yKjlL17syy0tMNcOn9dl4Fy6dLFabj1Mpvow9Ify+I4Nlo9Xt+ZqU9VdJpqZh4QDDyxUyYOYJwHDg+DhgI/WUVZl7aSEt93+GO9Ia2iuZKOfA7lhp9JpvAVy61w2mOwO5hmCgMHC1H9O24gu6UD9jP+ZmbtLRaSsei9SL4XDPbAEh/kGQ/pSUcc0lbApFWb67lQUhpVnLBsoKqqZclFMmUtrxPcwxl3X7vOCAtYLSCcugFQmqhdssH7HU+RznjiOlYXA8wqkOfkItTAom+oKygca4ES8jY+N3z7fSG4hfUtp3ihUHruVSsFy1iRvNP+1N7A5BdJACmVpAgZPhGOyCigEjlPLudn7kvFtOxuB4g6OjD8UWLRkCZFRwrLCEXJQQhp2K+37lQeBCRX1A7KPQto1prFEmSYn2mB9EAsO+kYfk8KQhZF8yjVz5gp/MztyOUjiW9bCUhEBhKRCCgSis45uQ/PhX/xfFWMgOnWu2gxB0TF/o0kEZ/kCDM1Ts+3RHYnwVUL6XhDFrAswfIB6w6P1MrTulY0sum1VICglKwCEACqvQFCUK3gHcsFQCM/ILayqP1k9JshVqrncMalOYYvgcGAyCvIwuod8YBJQmZpmGJeyRwkGw4n8jJOJQNw3idLFhMRNB0SgASTJyKoy/4ieXCeFfJBUeV2SoAclFyR0bbm1OHTUiN0/DTAwD7zQeM52dqj8VsGEkVE2jKetG7AEhQ0frJAv6RC0trC1skl+IWlNinGLbSaZg7Mc0xfA8MbgF1LQV1z08A2G8+oM7PVF9Ms2GUE0gQyp+Lwu2yagLgR9ZaYpkSypQ6a6Q2DCqzpkvietXIFdoZfuieGmcOD0DeP0HEbBhNwYPmA/L8zJQsATAKnguEqS+XTqkE4YfWWwCUFZTksYAYwZfIBeN9Tw0cjOwu8gDIZqsoSSvhEeQDiiGYFoyWiSDRypWgi69UP5sc5fIcquSCNeXqe2X9ZAHfM7Khe2pcOB+AT41+aO5iRD3QAHBEHd9ctuiBBoANEkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cvAFgg4GR9kADwJF2f3PxBoANBkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cfOxqYJ2au9RdPtdp/khoEOlglDYT39V1PzQFXLsMXAlgt9PCxJKPbufyf8/KHIPfBPAZABf79Xc5XQ0ZQ1Q7360NbxoHrlsDvs5ZRsgo0une06by6X1mZvtP99PNAp4F4LsBXA5gjw8EGTeqaGF4QhzQF80CX7cAvGIdeDYAfhdZ2sTKUcVrpE7nd31N5gj8e2dIo2osk7NZpMdK0Z19tv+bJ4F9K8D1ACj8yfNSikHeg+5Z969m57Y/8/ZP+dPLKZhP/rcA+AYAF7g1oRUhEMUzFMt6eSJfX78b2DkPfM0i8GIAX+uWlAMppreUUErn8p2gzTl+2flg/sDbTkvIOik+CP20//mzwAXzwDcCuNTPJeFXpEpM6QEjIHm/zTF8D7T5gATYNQCe69aAloRTGulfBESBSYNyxR5g/Bhw7hKwZwl4vk9LnM5JmsBzUyDGAX3B8G23Mz/g9BuUa/0IiutfMkj7zwKmngAuXSvOpUvAWYBtF4BTnspIj/O8zPaf7qdvWITw6eZA0JLQEhKEGgxZhUj/dz3NzSKwbR44exnYvVKcy+mM5Km0JhxInUtrGkmzCPicg3W5LMGkQiZZTm9xS9Z3+4m2o8C5c4X15pTKW2Lb+fCx7WLtjYxzqiql29Icw/dA5SqYf6RTTilg+lYCIXmICKQ4IK9wxfSJY8AZK8CuFWDnanEua9ZTAMsaCog3Dt92O/MvnRGBtGwkqKRmMEkqCaa+2k+0LQDTh4rP88UHj74kF1WaATo9QHQ7mmP4HugYhtEKj4PB6ZQ+FS0hQahpldPya1kXTOqNY8DscgG+HavAttUCvBxInitrkgL4lcO33c7spBdM3kAuSnq2nx9gQfAh4JyVwvrxwel2z3p4aMlzH6DM2z/lT+8aB+Q/OT4EEqckWQSBkGD6EQKQnDCLwBSnYgcf32fXioGUFawC4esyu7CXXnDP9tOCsyD4KLB1rmgvX7zfbu2WG/Jtme0/3U/vKxBNAMoi0KcjkATCN3HOEr3UAjDrwOP71rXixYEkeKMFlSX8ocwR6KUXTJ7AaNE2tF8WfA4Ye7Kw1mwvX/yZn+eKnvcrfzC6IK/ObP/pfnpfAGQnySoISBqUXyAASS1AK0JfagWYcRDOrAF66TxZQU7jBOEbM0egH71gcgXSFZAV54NQtj9YcNIpbONCyh8Ygi8CVospApDuB63g92W2/3Q/vW8AsqM4gLIKBBIH8bcJwMCNMX68BTqBb8s6sGWtsIA6jwDk662ZI9CvXjA5A6NVa2t/IAicnC/aGV+8T74IQPm/AmGuBc+8/VP+9IEAyLslAKMV/LgAyIUInfnjwPQqMOOgI/DstQ5Mr7UAqMF8V2YXDqoXXNl+EQQ6N9v29aKdesUpWJZbAPyPme0/3U8fGIDssDid/pUASCvCaXgJmFguAEfgEXT27gDkuwaUg/nbmSMwjF7whvbLhSDL5TwwvdRqo9oqHzACkCB8U2b7T/fThwIgO01T1IMCoAZxGRhbKoAXQUcQTjkI+a4B5e5FzjGsXvCG9gdqrLGFYrpVG/UuHzBOw2/LaXxzbh43DKeoJwlAHqLndSs4udoCoIBHQE45EPk3DuitmYOQoxdctp8+rFwIWsGFYiFFoLGNchcEQC6e+OJC5J2Z7T/dTx/aApYdJ37AyJK/DIwvFxYvWr0IwEn/H1Opco5sveDUhSAAF4HJpQJkWixp6k2n4IYfMGf0amDHev2I8+l4/UbvNw8Eozw72wJePOJ8und7EkKj9ztKGA1/7WwATo44n45pWI3e7/AAGPWZ2QBkYHCU+XTMfGGQmYIxjd7vqOE0+PXzATjifDrKtTZ6v4MP/MlyRj4AR5xPF+VaqZLJF1UzKdPV6P2eLDDr3I58AI44n07ZMARbo/d78gMubWE+AEecT8e9YOn2Uheu0fs9tUCYD8AR59MpG6bR+z21gKfW1gNAz4geRT5dTEZo9H5PPRDmAzBmRM8BJzqfLiYjSKKr0fs9dYBYDwBHmE9XtRfMsIz04aQZ1+j9npygrA+Akqs8wfl0BCCTWRq935MTYL1aVQ8Ao1zlAnAi8+kEQGZTNXq/vYb75Pt/fQAcUT5dBGCj93vyAaxXi+oDoFLyT3A+3Rcavd9eY3xS/z8fgCQX/LPR3SOzkon55jg1eyAfgD8M4NcAPD6aDmBtB1e4NMDNcer1QD4AbwbwxwDe4UvRE9wHZG1gNSXDLlwLNcep1QP5APxzzwj9IIAPnXhT5ORc5EYCA9HNcWr1QD4AmRH6FQBMTSZZH98ZmD5Bh5g1FopiNns1x6nTA/kAvAfAEwDudnI+EvQxPfkEzYfaCXRSBluQMB7YHKdGD+QDsBNBH/9+AkAobqTADGK7Inw1x8nfA/kA7EXQt8kgrGAGMfBxZ5Cv5ji5eyAfgL0I+r68uR0QmUFoBQU8vfNvzXHy9kA9AORoMw7CdGQCjoUZDwL4kv/+8OZ1gJhBIjGDgMh3vTavBc035/RAPgD7JegjODfhiMwgoqeJwNPPTaB6Ezq/hq+sB4AcXeXEP+ZhGVo9vRimIQD5v5oPAZCupgDI9wg8/qz/1Xz55usyeyAfgMMQ9GU2Op4eAchpOIJQQEz/VuPlm6/K7IH6AMjgGzdl6QtyX5jWjpQFevF3lq3xf6yhrOlIAUgQCojR8gmE+l9Nl2++JrMH6gEgR5UA5KYsc+AZmCbQCDi+IvgEQMob1XBEAHIajgBMLV+0kCdws6aGu3zqfkV9AGTwjftg3JRVVRAtHQEXX/wbAcoXP5d5CID8GoJKvqDAloKOoIz/y7x8c3pmD4zhaqwjRzCYyQg5gr2ZgsFTLweWr8XQgsXjbwLWrnNtMlKgNoLBmZAa7PTCAuYIBlMvlWQswwr2UlUw45jdDSx8HbD+Ctd+HVCwePKbgJV9aASDM8Yg59TWFDysYPBtmYK91IbNOHaPA/M7gUXKXA4hWDz79cA8+W0aweCMURj+1HYfcBjBYO54MMY3tGDv8I3nmWSHOzYOLJ0LLPGXAQWLz3oB8MQUsEa16kYwOG8whjh74yJkUMFgbsNlCfYO0epwissVY34bsHw2sEIRkAEEi/dcU0SP5qhF1ggG5w3GEGdXr4L5134Fg4kAjuDQgr1DtDqcUmZETwArZwAru4BVqsv0KVh8/o3F4v0QXZBGMDhvMIY4u3MYhv95Zh+Cu1xBcxuOU/HfeDIq5cv7FuwdotXhlCBXjOXZAnyrO4BV6in0IVh8wStLuWCsUAyvEQzOG5ABz+4eB+R/ewnu/kOP/3G/l4kJTERlljQtIot2e53/IwO2OPl4FLtcnCqAp9cahT56CBZf+LpSLhhz1N5qBIPzBmTAs/sLRHcTDKbiNHdBGGymOC/3hglEvgjAnoK9A7Y4+XgiV4zVWYDAs/etxaubYPFFP1QkLtCIP8neaASD8wZkwLP7AyC/tJNg8L/xLNBu+YBdBXsHbHEFAINcMVamgdWZAoRrfPdXm8KitLdmgYveWAq+2y7iMqfuRjA4b1AGOLt/APJLqwSD3+y5T1yI0AoSbAxMMzGV1o8/My2ro2DvAK2t+GgiV4zj4+3AIwDXtwBrVJeuECze+9aW4Dut4PxkIhYsdetGMDhvoDqcPRgA+SWp4O4veQ5Uv/mAGwR78+6rQq4Yq9PAOi2fA4/vBkKudKVU7VZw77uKvWFuZbtcMNb5v0YwOG9g+jx7cADyi6Pg7gccgIxlcA5TKhaD01yYKBmVFpBZMfx/m2Bvny3t8LGqoqTliZbVI+gMgHwnMAnCIFi897cLAAZ6QyzFzzSCwXkD1OPs4QDIL5XgLmk5JHk/SD5gKdibd38VcsVYGmuBTaAzEHLHgyCcaokB7/1IkUET5IKxwF5pBIPzBqbPs4cHIC/AaeqvPL9pmHxAE+zts6VdLCD/lcgVY3UyWD0Bj1ZwqgCggXA7sPfWAoAJvaEtZBrB4Lyx6efsPADyCtmCvf00s/NnOsgVY3m8BTRZPZuGBUACdArY+5lWDqGmYbIrLHEx0ggG5w1OH2fnA7CPizQfaXqgUw80AGywMdIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0BxoAjrT7m4s3AGwwMNIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0B8ZYNMbkX+ZekpuIiOQrPar+xs889HJg6jZg5jAwvVZ8B+ll9PlO5/Fc/o+ECjnHfi8zYfkvM5ulmp4qJXVqx5deD4zfAkw/CGxdAZgoHfuh131QkaI5hu8Bs4Ds8B0AWLnIRGCBsFfn87JffDMwdjOw5R5g8giwZa34jnQQUwDo99wBfJ4TM7COiNdlaj2rA/jeV/vfDeATAP4UGH8I2Lrc6gc+SHqY4oMZ74VSKM0xfA+UUzB/oBUUCKMl6zSQ/PsXqZD5KQC/A0w/DEwcAcYXgYnVwppwADuBkefnCim90FmBWXwnK87Uen53BI8sbuwqaz9p5UgnQhBS+ZN1zE8Ak0utviCwq8DI8/nx5hi+Bzb4gJzKZE1SEFZZgS9/2pWR/gTAJ4HJQ8DEMWB8ARhfBsaWCwDquwQKvvNgHXvOcYVbPFJPkw+dDxC/W1Y4tWDpw/Rlgo4lo1T4/KxTihDNpJwj3/UiMLXemprjffC7eWpzDN8DlYsQDiKtVxzEqoHkyX9HRizW+nIgaQnvAiaeBCbmC0s4tgSMu2rMePAR9X252jXklaTFU108K0MHav/nvJ6ZxVVk9OI7GR2IZoGQNc/HgbHgIwqILIVujuF7oOMqWFawCoRxkfEIB5CWgkREBCNf9wMTc8A4QciBWyoGz16rwNgaML5eWKpctYZL3N+TWLX0gvtuP0HHk2n16JDyxXmVhfU0qywbJbr5GSuXKxA/sV5Y9UYWdnjwyS3qKKgarWA69Wg6fjQOIK0HadnIjPVFB+AiME4AuiUkCFnESyCSkmAuU7Cjm15wX+2X2ifBRn9A8mKcW2UFjULVQcgVDl80u40SYh763FfvquhLCxitoBYUsoJfjXKttByMq9CKcHn4sPuCbgXNJwyWkECcz5Q376UX3LNncZyQAAADEklEQVT9fFgIJs6lBBwtn3Tt6FpIz4RWnuQxPh2XIGzm4CwQ9hWIFgBTK0gQHiIAJddKq0ELQh+KL1qUR4MvSEsoENIKrgALHNiMox+94K7tl9qnnMio8MSf6SNwGpYVjCDk/Ju7isq496fCqX0BkDeqlWwKwic1gAQSpzGREnFgREz01eALLvvq2Kfi45m6cf3qBXdsfxRbJMho8dimqOhEK8cXQRr9QVpvPoDNMXQP9A3ACELFxPh+jACkP0fLIKFCCRRqKuPUdqjlC9o07JZwKVNHeBC94DQcZO0XAAkmgotAk9QYrR9f/BvByYfMSATDVMzwTXMM3QMDAVAgVHCZ7/MaQK4QZUHiNCbBQlqUw74YCb7gcmYkelC9YFlwvVv7RRAorTuBkECU9asCID9/x9B935zYzyKkqpfiNHxcA0gLQgvBAaPVkCqm3h2AtC5m/RyEqzw/4xhGL3hD++MmslgqCbgUfLKAcRrmTlBzDN0DA1tAXUlWcDm1IOIIJAjlT/Fd05lbFQFwjdtgGcewesFt7Rc/Gx8iWjUCjGCT1YvWT1MwgUqrf3NG45tTbcu0aximWx9xENcEQHGbcYAEwtSXSqY0gnCdgeuMI0cvuGx/FUGgFhwEYrR80QckWN+X0fjm1DwAWv8RgJFilJZBznz0pQg+AZAAlVWh1GvGka0XzB0cCQi30aSGVa9AF62fLOB7MhrfnJoPwPER59Px+o3e76mL5Kwp2G57xPl0kxc3er+nLvyKtLmhfUC78RHn081ONnq/pzcAR5xPR9mRRu/31IVgvgUccT4dNaobvd/TGYAjzqejumqj93s6A3DE+XRUg2VSCjdaGr3fUw+I+VPwiPPpqJjO8J1Nw43e7ymHwHoAKMFd7QErAeEE5NNJMb3R+z3lsGcNzgfgiPPpomJ6o/d76oGwPgCOKJ8uKqY3er+nKwBHmE+noqRG7/fUA199U/AI8+kEwEbv93QHoEhZTnA+nYqSGr3fBoAtaiqBUImdm5hPJwA2er+nKwBHnE+X1gUzSbnR+z11wPj/AeCpPDD3t7rvAAAAAElFTkSuQmCC",WLe="uniform sampler2D weightMap;varying vec2 vOffset0;varying vec2 vOffset1;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 a;a.x=texture2D(weightMap,vOffset0).a;a.y=texture2D(weightMap,vOffset1).g;a.wz=texture2D(weightMap,uv).rb;vec4 color=inputColor;if(dot(a,vec4(1.0))>=1e-5){bool h=max(a.x,a.z)>max(a.y,a.w);vec4 blendingOffset=vec4(0.0,a.y,0.0,a.w);vec2 blendingWeight=a.yw;movec(bvec4(h),blendingOffset,vec4(a.x,0.0,a.z,0.0));movec(bvec2(h),blendingWeight,a.xz);blendingWeight/=dot(blendingWeight,vec2(1.0));vec4 blendingCoord=blendingOffset*vec4(texelSize,-texelSize)+uv.xyxy;color=blendingWeight.x*texture2D(inputBuffer,blendingCoord.xy);color+=blendingWeight.y*texture2D(inputBuffer,blendingCoord.zw);}outputColor=color;}",$Le="varying vec2 vOffset0;varying vec2 vOffset1;void mainSupport(const in vec2 uv){vOffset0=uv+texelSize*vec2(1.0,0.0);vOffset1=uv+texelSize*vec2(0.0,1.0);}",Xd={LOW:0,MEDIUM:1,HIGH:2,ULTRA:3},Lq=class extends Du{constructor({preset:e=Xd.MEDIUM,edgeDetectionMode:t=WE.COLOR,predicationMode:r=jke.DISABLED}={}){super("SMAAEffect",WLe,{vertexShader:$Le,blendFunction:wr.NORMAL,attributes:bu.CONVOLUTION|bu.DEPTH,uniforms:new Map([["weightMap",new Le(null)]])});let i,n;arguments.length>1&&(i=arguments[0],n=arguments[1],arguments.length>2&&(e=arguments[2]),arguments.length>3&&(t=arguments[3])),this.renderTargetEdges=new Yr(1,1,{minFilter:Kt,stencilBuffer:!1,depthBuffer:!1}),this.renderTargetEdges.texture.name="SMAA.Edges",this.renderTargetWeights=this.renderTargetEdges.clone(),this.renderTargetWeights.texture.name="SMAA.Weights",this.uniforms.get("weightMap").value=this.renderTargetWeights.texture,this.clearPass=new Dk(!0,!1,!1),this.clearPass.overrideClearColor=new At(0),this.clearPass.overrideClearAlpha=1,this.edgeDetectionPass=new Jl(new Vke),this.edgeDetectionMaterial.edgeDetectionMode=t,this.edgeDetectionMaterial.predicationMode=r,this.weightsPass=new Jl(new Kke);let a=new V7;a.onLoad=()=>{let s=new Mn(i);s.name="SMAA.Search",s.magFilter=si,s.minFilter=si,s.generateMipmaps=!1,s.needsUpdate=!0,s.flipY=!0,this.weightsMaterial.searchTexture=s;let o=new Mn(n);o.name="SMAA.Area",o.magFilter=Kt,o.minFilter=Kt,o.generateMipmaps=!1,o.needsUpdate=!0,o.flipY=!1,this.weightsMaterial.areaTexture=o,this.dispatchEvent({type:"load"})},a.itemStart("search"),a.itemStart("area"),i!==void 0&&n!==void 0?(a.itemEnd("search"),a.itemEnd("area")):typeof Image<"u"&&(i=new Image,n=new Image,i.addEventListener("load",()=>a.itemEnd("search")),n.addEventListener("load",()=>a.itemEnd("area")),i.src=_6,n.src=S6),this.applyPreset(e)}get edgesTexture(){return this.renderTargetEdges.texture}getEdgesTexture(){return this.edgesTexture}get weightsTexture(){return this.renderTargetWeights.texture}getWeightsTexture(){return this.weightsTexture}get edgeDetectionMaterial(){return this.edgeDetectionPass.fullscreenMaterial}get colorEdgesMaterial(){return this.edgeDetectionMaterial}getEdgeDetectionMaterial(){return this.edgeDetectionMaterial}get weightsMaterial(){return this.weightsPass.fullscreenMaterial}getWeightsMaterial(){return this.weightsMaterial}setEdgeDetectionThreshold(e){this.edgeDetectionMaterial.edgeDetectionThreshold=e}setOrthogonalSearchSteps(e){this.weightsMaterial.orthogonalSearchSteps=e}applyPreset(e){let t=this.edgeDetectionMaterial,r=this.weightsMaterial;switch(e){case Xd.LOW:t.edgeDetectionThreshold=.15,r.orthogonalSearchSteps=4,r.diagonalDetection=!1,r.cornerDetection=!1;break;case Xd.MEDIUM:t.edgeDetectionThreshold=.1,r.orthogonalSearchSteps=8,r.diagonalDetection=!1,r.cornerDetection=!1;break;case Xd.HIGH:t.edgeDetectionThreshold=.1,r.orthogonalSearchSteps=16,r.diagonalSearchSteps=8,r.cornerRounding=25,r.diagonalDetection=!0,r.cornerDetection=!0;break;case Xd.ULTRA:t.edgeDetectionThreshold=.05,r.orthogonalSearchSteps=32,r.diagonalSearchSteps=16,r.cornerRounding=25,r.diagonalDetection=!0,r.cornerDetection=!0;break}}setDepthTexture(e,t=Lc){this.edgeDetectionMaterial.depthBuffer=e,this.edgeDetectionMaterial.depthPacking=t}update(e,t,r){this.clearPass.render(e,this.renderTargetEdges),this.edgeDetectionPass.render(e,t,this.renderTargetEdges),this.weightsPass.render(e,this.renderTargetEdges,this.renderTargetWeights)}setSize(e,t){this.edgeDetectionMaterial.setSize(e,t),this.weightsMaterial.setSize(e,t),this.renderTargetEdges.setSize(e,t),this.renderTargetWeights.setSize(e,t)}dispose(){let{searchTexture:e,areaTexture:t}=this.weightsMaterial;e!==null&&t!==null&&(e.dispose(),t.dispose()),super.dispose()}static get searchImageDataURL(){return _6}static get areaImageDataURL(){return S6}},YLe=`uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;
#if VIGNETTE_TECHNIQUE == 0
float d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));
#else
vec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));
#endif
outputColor=vec4(color,inputColor.a);}`,aw={DEFAULT:0,ESKIL:1},qLe=class extends Du{constructor({blendFunction:e=wr.NORMAL,technique:t=aw.DEFAULT,eskil:r=!1,offset:i=.5,darkness:n=.5}={}){super("VignetteEffect",YLe,{blendFunction:e,defines:new Map([["VIGNETTE_TECHNIQUE",t.toFixed(0)]]),uniforms:new Map([["offset",new Le(i)],["darkness",new Le(n)]])})}get technique(){return Number(this.defines.get("VIGNETTE_TECHNIQUE"))}set technique(e){this.technique!==e&&(this.defines.set("VIGNETTE_TECHNIQUE",e.toFixed(0)),this.setChanged())}get eskil(){return this.technique===aw.ESKIL}set eskil(e){this.technique=e?aw.ESKIL:aw.DEFAULT}getTechnique(){return this.technique}setTechnique(e){this.technique=e}get offset(){return this.uniforms.get("offset").value}set offset(e){this.uniforms.get("offset").value=e}getOffset(){return this.offset}setOffset(e){this.offset=e}get darkness(){return this.uniforms.get("darkness").value}set darkness(e){this.uniforms.get("darkness").value=e}getDarkness(){return this.darkness}setDarkness(e){this.darkness=e}},Bc=class{constructor(e,t){this.enabled=!1,this.effect=new e(t),Object.defineProperty(this,"opacity",{enumerable:!0,set(r){this.effect.blendMode.opacity.value=r},get(){return this.effect.blendMode.opacity.value}}),Object.defineProperty(this,"blendFunction",{enumerable:!0,set(r){this.effect.blendMode.setBlendFunction(Number(r))},get(){return this.effect.blendMode.blendFunction}}),this.blendFunction=wr.NORMAL}},XLe=class extends Bc{constructor(){super(PLe),this.blendFunction=wr.SCREEN}set intensity(e){this.effect.intensity=e}get intensity(){return this.effect.intensity}set luminanceThreshold(e){this.effect.luminanceMaterial.threshold=e}get luminanceThreshold(){return this.effect.luminanceMaterial.threshold}set luminanceSmoothing(e){this.effect.luminanceMaterial.smoothing=e}get luminanceSmoothing(){return this.effect.luminanceMaterial.smoothing}set blurScale(e){this.effect.blurPass.scale=e}get blurScale(){return this.effect.blurPass.scale}set kernelSize(e){this.effect.blurPass.kernelSize=e}get kernelSize(){return this.effect.blurPass.kernelSize}},QLe=class extends Bc{constructor(){super(OLe)}set contrast(e){this.effect.uniforms.get("contrast").value=e}get contrast(){return this.effect.uniforms.get("contrast").value}set brightness(e){this.effect.uniforms.get("brightness").value=e}get brightness(){return this.effect.uniforms.get("brightness").value}},KLe=class extends Bc{constructor(){super(BLe),this.effect.offset=new re(.01,.01)}set offset(e){this.effect.offset.set(e[0]/1e3,e[1]/1e3)}get offset(){return[this.effect.offset.x*1e3,this.effect.offset.y*1e3]}},ZLe=class extends Bc{constructor(){super(RLe)}},JLe=class extends Bc{constructor(){super(ULe),this._hue=0}set hue(e){this._hue=e,this.effect.setHue(e)}get hue(){return this._hue}set saturation(e){this.effect.uniforms.get("saturation").value=e}get saturation(){return this.effect.uniforms.get("saturation").value}},eBe=class extends Bc{constructor(){super(VLe),this.blendFunction=wr.OVERLAY}},tBe=class extends Bc{constructor(){super(qLe)}get eskil(){return this.effect.eskil}set eskil(e){this.effect.eskil=e}get darkness(){return this.effect.uniforms.get("darkness").value}set darkness(e){this.effect.uniforms.get("darkness").value=e}get offset(){return this.effect.uniforms.get("offset").value}set offset(e){this.effect.uniforms.get("offset").value=e}},rBe=class extends Bc{constructor(e){super(zLe,e)}set focalLength(e){this.effect.circleOfConfusionMaterial.uniforms.focalLength.value=e}get focalLength(){return this.effect.circleOfConfusionMaterial.uniforms.focalLength.value}set focusDistance(e){this.effect.circleOfConfusionMaterial.uniforms.focusDistance.value=e}get focusDistance(){return this.effect.circleOfConfusionMaterial.uniforms.focusDistance.value}get bokehScale(){return this.effect.bokehScale}set bokehScale(e){this.effect.bokehScale=e}},iBe=class extends Bc{constructor(){super(GLe)}get granularity(){return this.effect.getGranularity()}set granularity(e){this.effect.setGranularity(e)}},nBe=`#define GLSLIFY 1
varying vec2 vUv;varying vec2 vTexCoords[9];uniform vec2 resolution;void main(){vUv=position.xy*0.5+0.5;vec2 texelSize=vec2(1.0)/resolution;vTexCoords[0]=vUv+vec2(-texelSize.x,-texelSize.y);vTexCoords[1]=vUv+vec2(0.0,-texelSize.y);vTexCoords[2]=vUv+vec2(texelSize.x,-texelSize.y);vTexCoords[3]=vUv+vec2(-texelSize.x,0.0);vTexCoords[4]=vUv+vec2(0.0,0.0);vTexCoords[5]=vUv+vec2(texelSize.x,0.0);vTexCoords[6]=vUv+vec2(-texelSize.x,texelSize.y);vTexCoords[7]=vUv+vec2(0.0,texelSize.y);vTexCoords[8]=vUv+vec2(texelSize.x,texelSize.y);gl_Position=vec4(position.xy,1.0,1.0);}`,aBe=`#define GLSLIFY 1
#include <common>
varying vec2 vUv;varying vec2 vTexCoords[9];uniform sampler2D inputBuffer;uniform sampler2D historyBuffer;uniform sampler2D velocityBuffer;uniform sampler2D depthBuffer;uniform vec2 resolution;
#define USE_YCOCG
#define USE_CATMULL_ROM
const float feedback_min=0.5;const float feedback_max=0.95;vec3 RGB_YCoCg(vec3 c){return vec3(c.x/4.0+c.y/2.0+c.z/4.0,c.x/2.0-c.z/2.0,-c.x/4.0+c.y/2.0-c.z/4.0);}vec3 YCoCg_RGB(vec3 c){return clamp(vec3(c.x+c.y-c.z,c.x+c.z,c.x-c.y-c.z),vec3(0.0),vec3(1.0));}vec4 sample_color(sampler2D tex,vec2 uv){
#ifdef USE_YCOCG
vec4 c=texture(tex,uv);return vec4(RGB_YCoCg(c.rgb),c.a);
#else
return texture(tex,uv);
#endif
}vec4 sample_catmull_rom(sampler2D tex,vec2 uv,vec2 texSize){vec2 samplePos=uv*texSize;vec2 texPos1=floor(samplePos-0.5)+0.5;vec2 f=samplePos-texPos1;vec2 w0=f*(-0.5+f*(1.0-0.5*f));vec2 w1=1.0+f*f*(-2.5+1.5*f);vec2 w2=f*(0.5+f*(2.0-1.5*f));vec2 w3=f*f*(-0.5+0.5*f);vec2 w12=w1+w2;vec2 offset12=w2/(w1+w2);vec2 texPos0=texPos1-1.0;vec2 texPos3=texPos1+2.0;vec2 texPos12=texPos1+offset12;texPos0/=texSize;texPos3/=texSize;texPos12/=texSize;vec4 result=vec4(0.0);result+=texture2D(tex,vec2(texPos12.x,texPos0.y))*w12.x*w0.y;result+=texture2D(tex,vec2(texPos0.x,texPos12.y))*w0.x*w12.y;result+=texture2D(tex,vec2(texPos12.x,texPos12.y))*w12.x*w12.y;result+=texture2D(tex,vec2(texPos3.x,texPos12.y))*w3.x*w12.y;result+=texture2D(tex,vec2(texPos12.x,texPos3.y))*w12.x*w3.y;return result;}vec3 choose_motion_vector(){
#ifdef CHOOSE_LONGEST_MOTION_VECTOR
float longest=-1.0;vec3 v_choose=vec3(-1.0);for(int i=0;i<9;i++){vec3 v=texture2D(velocityBuffer,vTexCoords[i]).rgb;float l=length(v.xy);if(l>longest){longest=l;v_choose=v;}}return v_choose;
#else
float closest_depth=1000.0;vec2 closest_uv_offset=vec2(0.0);for(int i=0;i<9;i++){float neighbor_depth=texture2D(depthBuffer,vTexCoords[i]).r;if(neighbor_depth<closest_depth){closest_uv_offset=vTexCoords[i];closest_depth=neighbor_depth;}}return texture2D(velocityBuffer,closest_uv_offset).rgb;
#endif
}vec4 clipAabb(vec3 aabb_min,vec3 aabb_max,vec4 avg,vec4 input_texel){const float FLT_EPS=0.00000001;vec3 p_clip=0.5*(aabb_max+aabb_min);vec3 e_clip=0.5*(aabb_max-aabb_min)+FLT_EPS;vec4 v_clip=input_texel-vec4(p_clip,avg.w);vec3 v_unit=v_clip.xyz/e_clip;vec3 a_unit=abs(v_unit);float ma_unit=max(a_unit.x,max(a_unit.y,a_unit.z));if(ma_unit>1.0){return vec4(p_clip,avg.w)+v_clip/ma_unit;}else{return input_texel;}}vec3 clip_aabb_variance(in vec3 cOld,in vec3 cNew,in vec3 centre,in vec3 halfSize){if(all(lessThanEqual(abs(cOld-centre),halfSize))){return cOld;}vec3 dir=(cNew-cOld);vec3 near=centre-sign(dir)*halfSize;vec3 tAll=(near-cOld)/dir;float t=0.0001;for(int i=0;i<3;i++){if(tAll[i]>=0.0&&tAll[i]<t){t=tAll[i];}}if(t>=0.0001){return cOld;}return cOld+dir*t;}void main(){vec3 v=choose_motion_vector();vec2 velocity=v.rg;vec2 previousPixelPos=vUv-velocity;vec4 currentColor=sample_color(inputBuffer,vUv);
#ifdef USE_CATMULL_ROM
vec4 previousColor=sample_catmull_rom(historyBuffer,previousPixelPos,resolution);
#else
vec4 previousColor=sample_color(historyBuffer,previousPixelPos);
#endif
#ifdef USE_YCOCG
previousColor=vec4(RGB_YCoCg(previousColor.rgb),previousColor.a);
#endif
vec4 ctl=sample_color(inputBuffer,vTexCoords[0]);vec4 ctc=sample_color(inputBuffer,vTexCoords[1]);vec4 ctr=sample_color(inputBuffer,vTexCoords[2]);vec4 cml=sample_color(inputBuffer,vTexCoords[3]);vec4 cmc=sample_color(inputBuffer,vTexCoords[4]);vec4 cmr=sample_color(inputBuffer,vTexCoords[5]);vec4 cbl=sample_color(inputBuffer,vTexCoords[6]);vec4 cbc=sample_color(inputBuffer,vTexCoords[7]);vec4 cbr=sample_color(inputBuffer,vTexCoords[8]);vec4 cmin=min(ctl,min(ctc,min(ctr,min(cml,min(cmc,min(cmr,min(cbl,min(cbc,cbr))))))));vec4 cmax=max(ctl,max(ctc,max(ctr,max(cml,max(cmc,max(cmr,max(cbl,max(cbc,cbr))))))));vec4 cavg=(ctl+ctc+ctr+cml+cmc+cmr+cbl+cbc+cbr)/9.0;vec4 cmin5=min(ctc,min(cml,min(cmc,min(cmr,cbc))));vec4 cmax5=max(ctc,max(cml,max(cmc,max(cmr,cbc))));vec4 cavg5=(ctc+cml+cmc+cmr+cbc)/5.0;cmin=0.5*(cmin+cmin5);cmax=0.5*(cmax+cmax5);cavg=0.5*(cavg+cavg5);
#ifdef USE_YCOCG
vec2 chroma_extent=vec2(0.25*0.5*(cmax.r-cmin.r));vec2 chroma_center=currentColor.gb;cmin.yz=chroma_center-chroma_extent;cmax.yz=chroma_center+chroma_extent;cavg.yz=chroma_center;
#endif
vec4 previousColorClipped=clamp(previousColor,cmin,cmax);
#ifdef LUMINANCE_DIFFERENCES
#ifdef USE_YCOCG
float lum0=currentColor.r;float lum1=previousColorClipped.r;
#else
float lum0=luminance(currentColor.rgb);float lum1=luminance(previousColorClipped.rgb);
#endif
float unbiased_diff=abs(lum0-lum1)/max(lum0,max(lum1,0.2));float unbiased_weight=1.0-unbiased_diff;float unbiased_weight_sqr=unbiased_weight*unbiased_weight;float k_feedback=mix(feedback_min,feedback_max,unbiased_weight_sqr);vec4 result=mix(currentColor,previousColorClipped,vec4(k_feedback));
#else
const float alpha=0.1;vec4 result=mix(currentColor,previousColorClipped,1.0-alpha);
#endif
#ifdef USE_YCOCG
gl_FragColor=vec4(YCoCg_RGB(result.rgb).rgb,result.a);
#else
gl_FragColor=result;
#endif
}`,sBe=`#define GLSLIFY 1
varying vec2 vUv;void main(){gl_Position=vec4(position.xy,1.0,1.0);vUv=position.xy*0.5+0.5;}`,oBe=`#define GLSLIFY 1
layout(location=1)out vec4 gVelocity;varying vec2 vUv;uniform sampler2D inputBuffer;void main(){gl_FragColor=texture2D(inputBuffer,vUv);gVelocity=vec4(0.0);}`,P3=class extends oi{constructor(){super({name:"PassthroughMaterial",uniforms:{inputBuffer:new Le(null)},blending:hn,depthWrite:!1,depthTest:!1,vertexShader:sBe,fragmentShader:oBe})}set inputBuffer(e){this.uniforms.inputBuffer.value=e}},lBe=class extends as{constructor(){super("TAAResolvePass"),this.MRTCompatible=!0,this.needsSwap=!1,this.passThroughMaterial=new P3,this.resolutionVector=new re,this.resolveMaterial=new oi({name:"TAAResolveMaterial",uniforms:{inputBuffer:new Le(null),historyBuffer:new Le(null),velocityBuffer:new Le(null),depthBuffer:new Le(null),resolution:new Le(new re)},blending:hn,depthWrite:!1,depthTest:!1,vertexShader:nBe,fragmentShader:aBe}),this.historyRenderTarget=new Yr(1024,1024,{minFilter:Kt,stencilBuffer:!1,depthBuffer:!1}),this.historyRenderTarget.texture.name="TAA.History",this.resultRenderTarget=new Yr(1024,1024,{minFilter:Kt,stencilBuffer:!1,depthBuffer:!1}),this.resultRenderTarget.texture.name="TAA.Output"}setSize(e,t){this.historyRenderTarget.setSize(e,t),this.resultRenderTarget.setSize(e,t)}render(e,t){this.fullscreenMaterial=this.resolveMaterial,this.resolveMaterial.uniforms.inputBuffer.value=t.texture[0],this.resolveMaterial.uniforms.velocityBuffer.value=t.texture[1],this.resolveMaterial.uniforms.depthBuffer.value=t.depthTexture,this.resolveMaterial.uniforms.historyBuffer.value=this.historyRenderTarget.texture,this.resolveMaterial.uniforms.resolution.value.set(t.width,t.height),e.setRenderTarget(this.resultRenderTarget),e.render(this.scene,this.camera),this.fullscreenMaterial=this.passThroughMaterial,this.passThroughMaterial.inputBuffer=this.resultRenderTarget.texture,e.setRenderTarget(this.historyRenderTarget),e.render(this.scene,this.camera);let r=this.renderToScreen?null:t;this.fullscreenMaterial=this.passThroughMaterial,this.passThroughMaterial.inputBuffer=this.resultRenderTarget.texture,e.setRenderTarget(r),e.render(this.scene,this.camera)}dispose(){this.resultRenderTarget.dispose(),this.historyRenderTarget.dispose(),this.resolveMaterial.dispose(),this.passThroughMaterial.dispose()}},uBe=class extends as{constructor(e,t,r){super("TransmissionPass",void 0,t),this.MRTCompatible=!0,this.depthPass=new b6(e,t,{renderTarget:r.transmissionDepthTarget}),this.passThroughMaterial=new P3,this.splineScene=e,this.needsSwap=!1}updatePasses(e){this.passThroughMaterial=new P3,this.depthPass=new b6(this.splineScene,this.camera,{renderTarget:e.transmissionDepthTarget})}setCamera(e){this.camera=e}setScene(e){this.splineScene=e}render(e,t,r){let i=this.camera.layers.mask,n=e;n.setRenderTarget(n.transmissionRenderTarget),this.fullscreenMaterial=this.passThroughMaterial,this.passThroughMaterial.inputBuffer=t.texture[0],n.clear(),n.render(this.scene,this.camera),this.camera.layers.disable(3),this.depthPass.render(e,t,r),n.shadowMap.needsUpdate=!1,n.shadowMap.autoUpdate=!1;let a=this.renderToScreen?null:t;this.camera.layers.set(3),e.setRenderTarget(a),e.render(this.splineScene,this.camera),this.camera.layers.mask=i}},E6=new Hh,cBe=new oi({transparent:!0,vertexShader:`
        void main() {
            gl_Position = vec4(0.0);
        }
    `,fragmentShader:`
        layout(location = 1) out vec4 gVelocity;

        void main() {
            gl_FragColor = vec4(0.0);
			gVelocity = vec4(0.0);
        }
    `}),D3=class extends as{constructor(e,t,r){super("OpaquePass",t??E6,r),this.MRTCompatible=!0,this.hasTransmissionPass=!1,this.clear=!0,this.clearColorOnly=!1,this.clearDepth=!1,this.needsSwap=!1,this.originalMaterials=new Map,this.MRTCompatible=e}setCamera(e){this.camera=e}setScene(e){this.scene=e??E6}getScene(){return this.scene}render(e,t){this.camera.layers.enable(3),this.hasTransmissionPass&&(this.originalMaterials.clear(),this.scene.traverse(i=>{i.layers.isEnabled(3)&&i instanceof Os&&(this.originalMaterials.set(i.id,i.material),i.material=cBe)}),e.shadowMap.needsUpdate=!0,e.shadowMap.autoUpdate=!0),this.camera.layers.enable(8);let r=this.renderToScreen?null:t;e.setRenderTarget(r),this.clearColorOnly&&e.clear(!0,!1,!0),this.clear&&e.clear(),e.render(this.scene,this.camera),this.clearDepth&&e.clear(!1,!0,!1),this.hasTransmissionPass&&this.originalMaterials.forEach((i,n)=>{let a=this.scene.getObjectById(n);a&&(a.material=i)})}},hBe=class{constructor(e,{depthBuffer:t=!0,stencilBuffer:r=!1,multisampling:i=0,frameBufferType:n=0}={}){this.renderer=e,this.helperStartIndex=0,this.copyPass=new T3,this.depthTexture=null,this.timer=new ALe,this._width=1,this._height=1,this.passes=[],this.helperPasses=[],this.autoRenderToScreen=!0,this.inputBuffer=this.createBuffer(t,r,n,i,!0,"input buffer mrt"),this.inputBufferSingle=this.createBuffer(t,r,n,i,!1," input buffer single"),this.inputBufferSingle.texture.dispose(),this.inputBufferSingle.depthTexture.dispose(),this.inputBufferSingle.texture=this.inputBuffer.texture[0],this.inputBufferSingle.depthTexture=this.inputBuffer.depthTexture,this.outputBuffer=this.inputBuffer.clone(),this.outputBuffer.name="output buffer mrt",this.outputBufferSingle=this.createBuffer(t,r,n,i,!1,"output buffer single"),this.outputBufferSingle.texture.dispose(),this.outputBufferSingle.depthTexture.dispose(),this.outputBufferSingle.texture=this.outputBuffer.texture[0],this.outputBufferSingle.depthTexture=this.outputBuffer.depthTexture,this.setRenderer(e)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(e){let t=this.inputBuffer,r=this.multisampling;r>0&&e>0?(this.inputBuffer.samples=e,this.outputBuffer.samples=e,this.inputBuffer.dispose(),this.outputBuffer.dispose()):r!==e&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),console.log("creating new input buffer"),this.inputBuffer=this.createBuffer(t.depthBuffer,t.stencilBuffer,t.texture.type,e,!0,"new input buffer"),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(e){var t;if(this.renderer=e,e!==null){let r=e.getSize(new re),i=((t=e.getContext().getContextAttributes())==null?void 0:t.alpha)??!1,n=this.inputBuffer.texture[0].type;n===Ea&&e.outputEncoding===Ht&&(this.inputBuffer.texture[0].encoding=Ht,this.outputBuffer.texture[0].encoding=Ht,this.inputBuffer.dispose(),this.outputBuffer.dispose(),console.log("doing some kinda dispose??")),e.autoClear=!1,this.setSize(r.width,r.height,!1);for(let a of this.passes)a.initialize(e,i,n)}}replaceRenderer(e,t=!0){let r=this.renderer,i=r.domElement.parentNode;return this.setRenderer(e),t&&i!==null&&(i.removeChild(r.domElement),i.appendChild(e.domElement)),r}createDepthTexture(){let e=this.depthTexture=new Fg(this._width,this._height);return this.inputBuffer.depthTexture=e,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(e.format=jf,e.type=xf):e.type=_h,e}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(let e of this.passes)e.setDepthTexture(null)}}createBuffer(e,t,r,i,n,a){let s=this.renderer,o=s===null?new re:s.getDrawingBufferSize(new re),l={minFilter:Kt,magFilter:Kt,wrapS:$i,wrapT:$i,stencilBuffer:t,depthBuffer:e},u;return i>0?(u=new Yr(o.width,o.height,l),u.samples=i):(n?(u=new s0e(o.width,o.height,2,l),u.texture[1].type=Ng):u=new Yr(o.width,o.height,l),u.depthTexture=new Fg(2048,2048),u.depthTexture.type=qs),r===Ea&&s!==null&&s.outputEncoding===Ht&&(Array.isArray(u.texture)?u.texture.forEach(h=>h.encoding=Ht):u.texture.encoding=Ht),Array.isArray(u.texture)?u.texture.forEach((h,c)=>{h.name=`EffectComposer.Buffer ${n} ${c}`,h.generateMipmaps=!1}):(u.texture.name=`EffectComposer.Buffer ${n}`,u.texture.generateMipmaps=!1),u.name=a,u}addPass(e,t){var o;let r=this.passes,i=this.renderer,n=i.getDrawingBufferSize(new re),a=((o=i.getContext().getContextAttributes())==null?void 0:o.alpha)??!1,s;if(e.MRTCompatible&&(s=this.inputBuffer.texture[0].type),e.MRTCompatible||(s=this.inputBuffer.texture.type),e.setRenderer(i),e.setSize(n.width,n.height),e.initialize(i,a,s),this.autoRenderToScreen&&(r.length>0&&(r[r.length-1].renderToScreen=!1),e.renderToScreen&&(this.autoRenderToScreen=!1)),t!==void 0?r.splice(t,0,e):r.push(e),this.autoRenderToScreen&&(r[r.length-1].renderToScreen=!0),e.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){let l=this.createDepthTexture();for(e of r)e.setDepthTexture(l)}else e.setDepthTexture(this.depthTexture)}setHelperStartIndex(e){this.helperStartIndex=e}removePass(e){let t=this.passes,r=t.indexOf(e);if(r!==-1&&t.splice(r,1).length>0){if(this.depthTexture!==null){let i=(n,a)=>n||a.needsDepthTexture;t.reduce(i,!1)||(e.getDepthTexture()===this.depthTexture&&e.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&r===t.length&&(e.renderToScreen=!1,t.length>0&&(t[t.length-1].renderToScreen=!0))}}removeAllPasses(){let e=this.passes;this.deleteDepthTexture(),e.length>0&&(this.autoRenderToScreen&&(e[e.length-1].renderToScreen=!1),this.passes=[])}render(e){let t=this.renderer,r=this.copyPass,i=this.inputBuffer,n=this.outputBuffer,a=this.inputBufferSingle,s=this.outputBufferSingle,o=!1,l,u,h,c;e===void 0&&(e=this.timer.update().getDelta());for(let d of this.passes)d.enabled&&(d.MRTCompatible?d.render(t,i,n,e,o):d.render(t,a,s,e,o),d.needsSwap&&(o&&(r.renderToScreen=d.renderToScreen,l=t.getContext(),u=t.state.buffers.stencil,u.setFunc(l.NOTEQUAL,1,4294967295),r.render(t,i,n,e,o),u.setFunc(l.EQUAL,1,4294967295)),h=i,c=a,i=n,a=s,n=h,s=c),d instanceof MLe?o=!0:d instanceof eLe&&(o=!1))}setSize(e,t,r){let i=this.renderer;if(this._width=e,this._height=t,e===void 0||t===void 0){let a=i.getSize(new re);e=a.width,t=a.height}i.setSize(e,t,r);let n=i.getDrawingBufferSize(new re);this.inputBuffer.setSize(n.width,n.height),this.outputBuffer.setSize(n.width,n.height),this.inputBufferSingle.setSize(n.width,n.height),this.outputBufferSingle.setSize(n.width,n.height);for(let a of this.passes)a.setSize(n.width,n.height)}reset(){let e=this.timer.isAutoResetEnabled();this.dispose(),this.autoRenderToScreen=!0,this.timer.setAutoResetEnabled(e)}dispose(){for(let e of this.passes)e.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.inputBufferSingle!==null&&this.inputBufferSingle.dispose(),this.outputBufferSingle!==null&&this.outputBufferSingle.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose()}},dBe=new oi({name:"CombineMaterial",uniforms:{inputBufferA:new Le(null),inputBufferB:new Le(null)},blending:hn,depthWrite:!1,depthTest:!1,vertexShader:`
varying vec2 vUv;
void main() {
    gl_Position = vec4(position.xy, 1.0, 1.0);
    vUv = position.xy * 0.5 + 0.5;
}
`,fragmentShader:`
    varying vec2 vUv;
    uniform sampler2D inputBufferA;
    uniform sampler2D inputBufferB;

    // TODO: Why do we need these when postpro of framemode is enabled???
    layout(location = 1) out vec4 gVelocity;

    void main() {
	vec4 resA = texture2D(inputBufferA, vUv);
	vec4 resB = texture2D(inputBufferB, vUv);
    float a = resA.a + resB.a * ( 1.0 - resA.a );

	vec4 res;
	res.rgb =  resA.rgb + (resB.rgb * (1.0 - resA.a));
	res.a = resA.a + resB.a * (1.0 - resA.a);
	gl_FragColor = res;
    gVelocity = vec4(0.0);
    }
`}),fBe=class extends as{constructor(e){super("HelperPass",void 0,e),this.MRTCompatible=!1,this.fullscreenMaterial=dBe,this.helperPass=new D3(!1,void 0,this.camera),this.helperPass.hasTransmissionPass=!1,this.helperPass.clear=!1,this.helperPass.renderToScreen=!1,this.helperPassOnTop=new D3(!1,void 0,this.camera),this.helperPassOnTop.hasTransmissionPass=!1,this.helperPassOnTop.clear=!1,this.helperPassOnTop.renderToScreen=!1;let t=new Lq({preset:Xd.LOW,edgeDetectionMode:WE.COLOR});this.effectPass=new KS(this.camera,t),this.rt=new Yr(10,10,{minFilter:Kt,magFilter:Kt,wrapS:$i,wrapT:$i,depthBuffer:!0})}setSize(e,t){this.rt.setSize(e,t),this.effectPass.setSize(e,t)}set sceneHelpers(e){this.helperPass.setScene(e)}get sceneHelpers(){return this.helperPass.getScene()}set sceneHelpersOnTop(e){this.helperPassOnTop.setScene(e)}get sceneHelpersOnTop(){return this.helperPassOnTop.getScene()}setCamera(e){this.helperPass.setCamera(e),this.helperPassOnTop.setCamera(e)}initialize(e,t,r){super.initialize(e,t,r),this.effectPass.initialize(e,t,r)}dispose(){super.dispose(),this.rt.dispose(),this.effectPass.dispose()}render(e,t,r){this.rt.depthTexture=t.depthTexture;let i=e.getClearAlpha();e.setClearAlpha(0),this.helperPass.clearDepth=!0,this.helperPass.clearColorOnly=!0,this.helperPass.render(e,this.rt),this.helperPassOnTop.render(e,this.rt),this.effectPass.renderToScreen=!1,this.effectPass.render(e,this.rt,r),this.fullscreenMaterial.uniforms.inputBufferA.value=r.texture,this.fullscreenMaterial.uniforms.inputBufferB.value=t.texture,e.setClearAlpha(i),e.setRenderTarget(null),e.clear(),e.render(this.scene,this.camera)}},pBe=`#define GLSLIFY 1
#include <skinning_pars_vertex>
out vec3 n;void main(){
#include <beginnormal_vertex>
#include <skinbase_vertex>
#include <skinnormal_vertex>
#include <defaultnormal_vertex>
#include <begin_vertex>
#include <skinning_vertex>
vec4 view_space=viewMatrix*modelMatrix*vec4(transformed,1.0);gl_Position=projectionMatrix*view_space;n=normalize(transformedNormal);}`,mBe=`#define GLSLIFY 1
in vec3 n;void main(){gl_FragColor=vec4(n,1.0);}`,gBe=`#define GLSLIFY 1
out vec2 v_uv;void main(){v_uv=uv;gl_Position=vec4(position.xy,1.0,1.0);}`,vBe=`#define GLSLIFY 1
in vec2 v_uv;const float pi=3.14159265;const float num_steps=4.0;const float num_directions=4.0;uniform float near;uniform float far;uniform float fov;uniform vec4 proj_info;uniform bool is_ortho;uniform vec2 resolution;uniform float radius_of_influence;uniform float radius_in_screen_space;uniform float exponent;uniform vec3 ao_color;uniform float bias;uniform sampler2D texture_depth;uniform sampler2D texture_normals;uniform sampler2D texture_blue_noise;uniform sampler2D texture_blue_noise_in_disk;uniform sampler2D texture_color_pass;uniform int frame_index;uniform bool fog_enabled;uniform float fog_near;uniform float fog_far;vec3 uv_to_view_space(vec2 uv,float eye_z){return vec3((uv*proj_info.xy+proj_info.zw)*(is_ortho ? 1.0 : eye_z),eye_z);}float linearize_depth(float depth_sampled){float z=is_ortho ? depth_sampled : depth_sampled*2.0-1.0;return mix((2.0*near*far)/(far+near-z*(far-near)),near+z*(far-near),float(is_ortho));}vec3 get_view_position(vec2 uv_coords){float linear_depth=linearize_depth(texture(texture_depth,uv_coords).x);return uv_to_view_space(uv_coords,linear_depth);}vec3 min_difference(vec3 p,vec3 right,vec3 left){vec3 v1=right-p;vec3 v2=p-left;return(dot(v1,v1)<dot(v2,v2))? v1 : v2;}vec3 rebuild_normal(in vec2 uv,in vec3 p){vec2 one_over_resolution=1.0/resolution;vec3 r=get_view_position(uv+vec2(one_over_resolution.x,0));vec3 l=get_view_position(uv+vec2(-one_over_resolution.x,0));vec3 t=get_view_position(uv+vec2(0,one_over_resolution.y));vec3 b=get_view_position(uv+vec2(0,-one_over_resolution.y));return normalize(cross(min_difference(p,r,l),min_difference(p,t,b)));}float falloff(float distance_squared){float neg_inv_r2=-1.0/(radius_of_influence*radius_of_influence);return distance_squared*neg_inv_r2+1.0;}float ao_contribution(vec3 P,vec3 N,vec3 S){vec3 to_sample=S-P;float norm_squared=dot(to_sample,to_sample);float norm=sqrt(norm_squared);float cos_theta=dot(N,to_sample)/norm;return clamp(cos_theta-bias,0.0,1.0)*clamp(falloff(norm_squared),0.0,1.0);}float compute_ambient_occlusion(vec2 uv,float radius_in_screen_space,vec3 pc,vec3 view_space_n){vec2 one_over_resolution=1.0/resolution;ivec2 noise_uv=ivec2(int(mod(gl_FragCoord.x,128.0)),int(mod(gl_FragCoord.y,128.0)));float noise=texelFetch(texture_blue_noise,noise_uv,0).r;noise=fract(noise+0.61803398875*float(frame_index));float theta=noise*2.0*3.1415;float ct=cos(theta);float st=sin(theta);float step_size=radius_in_screen_space/(num_steps+1.0);const float angle_step=2.0*pi/num_directions;float contribution=0.0;for(int i=0;i<int(num_directions);++i){float current_pixel=step_size+1.0;for(int j=0;j<int(num_steps);++j){int index=i*int(num_steps)+j;vec2 blue_noise_sample=texelFetch(texture_blue_noise_in_disk,ivec2(index,0),0).rg;vec2 disk_point;disk_point.x=blue_noise_sample.x*ct-blue_noise_sample.y*st;disk_point.y=blue_noise_sample.x*st+blue_noise_sample.y*ct;vec2 sample_direction=disk_point;vec2 snapped_uv=round(current_pixel*sample_direction)*one_over_resolution+uv;vec3 ps=get_view_position(snapped_uv);current_pixel+=step_size;contribution+=ao_contribution(pc,view_space_n,ps);}}float mult=1.0/(1.0-bias);contribution*=mult/(num_directions*num_steps);return clamp(1.0-contribution*2.0,0.0,1.0);}
#define USE_GBUFFER_NORMALS
void main(){vec3 view_space_p=get_view_position(v_uv);
#ifdef USE_GBUFFER_NORMALS
vec3 view_space_n=texture(texture_normals,v_uv).rgb;view_space_n.z*=-1.0;
#else
vec3 view_space_n=-rebuild_normal(v_uv,view_space_p);
#endif
float radius_ss=radius_in_screen_space/(is_ortho ? 1.0 : view_space_p.z);float ao=compute_ambient_occlusion(v_uv,radius_ss,view_space_p,view_space_n);float final=pow(ao,exponent);if(view_space_p.z>=far){final=1.0;}vec3 color=mix(ao_color,vec3(1.0),final);if(fog_enabled){float fog_factor=smoothstep(fog_near,fog_far,view_space_p.z);color=mix(color,vec3(1.0),fog_factor);}gl_FragColor=vec4(color,1.0);}`,yBe=`#define GLSLIFY 1
out vec2 v_uv;void main(){gl_Position=vec4(position.xy,1.0,1.0);v_uv=uv;}`,xBe=`#define GLSLIFY 1
in vec2 v_uv;uniform sampler2D texture_ao_lrez;uniform sampler2D texture_depth_lrez;uniform sampler2D texture_depth_hrez;uniform float near;uniform float far;float linearize_depth(float depth_sampled){float z=depth_sampled*2.0-1.0;return(2.0*near*far)/(far+near-z*(far-near));}vec2 nearest_depth_filter(in vec2 uv){vec2 resolution=vec2(textureSize(texture_depth_lrez,0));vec2 texel_size=1.0/resolution;vec2 offset=uv-0.5*texel_size;float d_hrez=texture(texture_depth_hrez,uv).r;float a=abs(d_hrez-texture(texture_depth_lrez,offset).r);float b=abs(d_hrez-texture(texture_depth_lrez,offset+vec2(texel_size.x,0.0)).r);float c=abs(d_hrez-texture(texture_depth_lrez,offset+vec2(0.0,texel_size.y)).r);float d=abs(d_hrez-texture(texture_depth_lrez,offset+vec2(texel_size.x,texel_size.y)).r);float min_diff=min(a,min(b,min(c,d)));if(min_diff==a)return offset;if(min_diff==b)return offset+vec2(texel_size.x,0.0);if(min_diff==c)return offset+vec2(0.0,texel_size.y);if(min_diff==d)return offset+vec2(texel_size.x,texel_size.y);}void main(){
#ifdef DEBUG
float d_lrez=texture(texture_depth_lrez,v_uv).r;float d_hrez=texture(texture_depth_hrez,v_uv).r;float output_d=mix(linearize_depth(d_lrez)/far,linearize_depth(d_hrez)/far,step(0.5,v_uv.x));gl_FragColor=vec4(vec3(output_d),1.0);
#else
vec2 filtered_uv=nearest_depth_filter(v_uv);vec4 ao=texture(texture_ao_lrez,filtered_uv);gl_FragColor=vec4(ao.rgb,1.0);gl_FragColor=ao;
#endif
}`,g0=[[.478712,.875764],[-.337956,-.793959],[-.955259,-.028164],[.864527,.325689],[.209342,-.395657],[-.106779,.672585],[.156213,.235113],[-.413644,-.082856],[-.415667,.323909],[.141896,-.93998],[.954932,-.182516],[-.766184,.410799],[-.434912,-.458845],[.415242,-.078724],[.728335,-.491777],[-.058086,-.066401],[.20299,.686837],[-.808362,-.556402],[.507386,-.640839],[-.723494,-.22924],[.48974,.317826],[-.622663,.765301],[-.01064,.929347],[.663146,.647618],[-.096674,-.413835],[.525945,-.321063],[-.122533,.366019],[.195235,-.687983],[-.563203,.098748],[.418563,.561335],[-.378595,.800367],[.826922,.001024],[-.085372,-.766651],[-.92192,.183673],[-.590008,-.721799],[.167751,-.164393],[.032961,-.56253],[.6329,-.107059],[-.46408,.569669],[-.173676,-.958758],[-.242648,-.234303],[-.275362,.157163],[.382295,-.795131],[.562955,.115562],[.190586,.470121],[.770764,-.297576],[.237281,.93105],[-.666642,-.455871],[-.905649,-.298379],[.33952,.157829],[.701438,-.7041],[-.062758,.160346],[-.220674,.957141],[.642692,.432706],[-.77339,-.015272],[-.671467,.24688],[.158051,.062859],[.806009,.527232],[-.05762,-.247071],[.333436,-.51671],[-.550658,-.315773],[-.652078,.589846],[.008818,.530556],[-.210004,.519896]],bBe=new oi({vertexShader:pBe,fragmentShader:mBe}),sw=new oi({vertexShader:yBe,fragmentShader:xBe,uniforms:{texture_ao_lrez:new Le(null),texture_depth_lrez:new Le(null),texture_depth_hrez:new Le(null),near:new Le(null),far:new Le(null)}}),wBe=class extends as{constructor(e,t){super("AmbientOcclusionPass",void 0,t),this.fogEnabled=!1,this.fogNear=1,this.fogFar=1e3,this.frameIndex=0,this._runHalfRes=!0,this._width=1,this._height=1;let r=1024,i=1024;this.gBuffer=new Yr(r,i,{type:qs,depthTexture:new Fg(r,i),minFilter:Kt,magFilter:Kt}),this.depthBufferHighRes=new Yr(r,i,{depthTexture:new Fg(r,i)}),this.aoBuffer=new Yr(r,i,{minFilter:Kt,magFilter:Kt}),this.splineScene=e,this.splineCamera=t;let n=new Float32Array(g0.length*2);for(let s=0;s<g0.length;s++){let o=s*2;n[o+0]=g0[s][0],n[o+1]=g0[s][1]}this.blueNoiseInDiskTexture=new dS(n,g0.length,1,s7,qs),this.blueNoiseInDiskTexture.wrapS=hc,this.blueNoiseInDiskTexture.wrapT=hc,this.blueNoiseInDiskTexture.needsUpdate=!0,this.hbaoMaterial=new oi({vertexShader:gBe,fragmentShader:vBe,uniforms:{near:new Le(null),far:new Le(null),fov:new Le(null),proj_info:new Le(new Wt),is_ortho:new Le(!1),resolution:new Le(new re),radius_of_influence:new Le(8),radius_in_screen_space:new Le(1),exponent:new Le(1),ao_color:new Le(new T),bias:new Le(.5),texture_depth:new Le(null),texture_normals:new Le(null),texture_blue_noise:new Le(null),texture_blue_noise_in_disk:new Le(this.blueNoiseInDiskTexture),frame_index:new Le(0),fog_enabled:new Le(!1),fog_near:new Le(1),fog_far:new Le(1e3)}}),this.radius=128,this.aoColor={r:0,g:0,b:0},this.bias=.5,this.hbaoMaterial.uniforms.texture_depth.value=this.gBuffer.depthTexture,this.hbaoMaterial.uniforms.texture_normals.value=this.gBuffer.texture,this.needsSwap=!0,this.aaBuffer=new Yr(r,i,{minFilter:Kt,magFilter:Kt,wrapS:$i,wrapT:$i,depthBuffer:!1,type:qs});let a=new Lq({preset:Xd.ULTRA,edgeDetectionMode:WE.COLOR});this.effectPass=new KS(this.camera,a)}initialize(e,t,r){super.initialize(e,t,r),this.effectPass.initialize(e,t,r)}setBlueNoiseTexture(e){this.hbaoMaterial.uniforms.texture_blue_noise.value=e}setSize(e,t){this._width=e,this._height=t,this.depthBufferHighRes.setSize(e,t);let r=this._runHalfRes?.5:1,i=e*r,n=t*r;this.gBuffer.setSize(i,n),this.aoBuffer.setSize(i,n),this.hbaoMaterial.uniforms.resolution.value.set(i,n),this.aaBuffer.setSize(i,n),this.effectPass.setSize(i,n)}get runHalfRes(){return this._runHalfRes}set runHalfRes(e){this._runHalfRes=e,this.setSize(this._width,this._height)}setCamera(e){this.splineCamera=e}setScene(e){this.splineScene=e}render(e,t,r){this.splineScene.overrideMaterial=bBe;let i=this.splineCamera.layers.mask;if(this.splineCamera.layers.set(5),e.setRenderTarget(this.gBuffer),e.clear(),e.render(this.splineScene,this.splineCamera),e.setRenderTarget(this.depthBufferHighRes),e.clear(),e.render(this.splineScene,this.splineCamera),this.splineScene.overrideMaterial=null,this.splineCamera.layers.mask=i,this.hbaoMaterial.uniforms.radius_of_influence.value=this.radius,this.hbaoMaterial.uniforms.ao_color.value.set(this.aoColor.r,this.aoColor.g,this.aoColor.b),this.hbaoMaterial.uniforms.bias.value=this.bias,this.hbaoMaterial.uniforms.fog_enabled.value=this.fogEnabled,this.hbaoMaterial.uniforms.fog_near.value=this.fogNear,this.hbaoMaterial.uniforms.fog_far.value=this.fogFar,this.hbaoMaterial.uniforms.frame_index.value=this.frameIndex,this.frameIndex++,this.splineCamera.isPerspectiveCamera){this.hbaoMaterial.uniforms.near.value=this.splineCamera.perspCamera.near,this.hbaoMaterial.uniforms.far.value=this.splineCamera.perspCamera.far;let n=this.splineCamera.perspCamera.projectionMatrix.elements,a=2/n[0],s=2/n[5],o=-(1-n[8])/n[0],l=-(1+n[9])/n[5];this.hbaoMaterial.uniforms.proj_info.value.set(a,s,o,l);let u=this.splineCamera.perspCamera.fov*(Math.PI/180),h=this.hbaoMaterial.uniforms.resolution.value.y/(Math.tan(u*.5)*2),c=this.hbaoMaterial.uniforms.radius_of_influence.value*.5*h;this.hbaoMaterial.uniforms.radius_in_screen_space.value=c,this.hbaoMaterial.uniforms.is_ortho.value=!1}else{this.hbaoMaterial.uniforms.near.value=this.splineCamera.orthoCamera.near,this.hbaoMaterial.uniforms.far.value=this.splineCamera.orthoCamera.far;let n=this.splineCamera.orthoCamera.projectionMatrix.elements,a=2/n[0],s=2/n[5],o=-(1+n[12])/n[0],l=-(1-n[13])/n[5];this.hbaoMaterial.uniforms.proj_info.value.set(a,s,o,l);let u=.5*(this.hbaoMaterial.uniforms.resolution.value.y/s),h=this.hbaoMaterial.uniforms.radius_of_influence.value*u;this.hbaoMaterial.uniforms.radius_in_screen_space.value=h,this.hbaoMaterial.uniforms.is_ortho.value=!0}this.runHalfRes?(this.fullscreenMaterial=this.hbaoMaterial,e.setRenderTarget(this.aoBuffer),e.clear(),e.render(this.scene,this.camera),this.fullscreenMaterial=sw,sw.uniforms.texture_ao_lrez.value=this.aoBuffer.texture,sw.uniforms.texture_depth_lrez.value=this.gBuffer.depthTexture,sw.uniforms.texture_depth_hrez.value=this.depthBufferHighRes.depthTexture,e.setRenderTarget(e.aoRenderTarget),e.clear(),e.render(this.scene,this.camera)):(this.fullscreenMaterial=this.hbaoMaterial,e.setRenderTarget(this.aaBuffer),e.clear(),e.render(this.scene,this.camera),this.effectPass.renderToScreen=!1,this.effectPass.render(e,this.aaBuffer,e.aoRenderTarget))}dispose(){this.gBuffer.dispose(),this.depthBufferHighRes.dispose(),this.aoBuffer.dispose()}},_Be=`
varying vec2 vUv;
void main() {
    vUv = uv;
    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,SBe=`
uniform sampler2D tInput;
uniform sampler2D tMap;
uniform vec2 resolution;
varying vec2 vUv;

uniform vec2 uResolution;
uniform vec2 uCoords;

// Draws a rectangle at center <st> with size <size>
float rectangle(vec2 st, vec2 size) {
    size = vec2(0.5) - size * 0.5;
    vec2 uv = vec2(step(size.x, st.x), step(size.y, st.y));
    uv *= vec2(step(size.x, 1.0 - st.x), step(size.y, 1.0 - st.y));

    return uv.x * uv.y;
}

uniform vec2 uSize;
uniform float uScale;
uniform float uDPR;
uniform float uCurrent;
uniform vec3 uSceneColor;

void main() {
    vec2 screenUv = gl_FragCoord.xy / uResolution.xy;
    screenUv *= 1.0 / uDPR;

    vec2 center = vec2(0.5, -0.5);
    vec2 outsideUv = screenUv;
    outsideUv += center;
    outsideUv -= uCoords.xy / uResolution.xy;
    outsideUv = (outsideUv - 0.5) + 0.5;
    outsideUv -= center;
    vec2 s = (uSize / uResolution) * uScale;
    float isOutside = 1.0 - rectangle(outsideUv, s);
    
    vec2 mid = vec2(0.5);
    vec2 insideUv = (screenUv - mid + s * mid) / s;
    vec4 background = texture2D(tInput, screenUv);
    vec4 image = texture2D(tMap, insideUv);
    gl_FragColor = mix(image, background, isOutside);
}
`,EBe=class extends Jl{constructor(){super(new oi({vertexShader:_Be,fragmentShader:SBe,uniforms:{tInput:new Le(null),tMap:new Le(null),uResolution:new Le(new re),uSize:new Le(new re),uCoords:new Le(new re),uScale:new Le(1),uSceneColor:new Le(new At(16711680)),uDPR:new Le(1),uCurrent:new Le(0)}}),"tInput"),this.needsSwap=!0}get uniforms(){return this.fullscreenMaterial.uniforms}get texture(){return this.uniforms.tMap.value}set texture(e){this.uniforms.tMap.value=e}},MBe=`
void main() {
    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,CBe=`
uniform sampler2D toScene;
uniform sampler2D fromScene;
uniform vec2 resolution;

uniform vec2 uResolution;
uniform float uDPR;

uniform float mixRatio;
uniform sampler2D tMixTexture;
uniform int useTexture;
uniform float threshold;

void main() {
	vec2 screenUv = gl_FragCoord.xy / uResolution.xy;
	screenUv *= 1.0 / uDPR;

	vec4 texel1 = texture2D( fromScene, screenUv );
	vec4 texel2 = texture2D( toScene, screenUv );

	if (useTexture==1) {
		
		vec4 transitionTexel = texture2D( tMixTexture, screenUv );
		float r = mixRatio * (1.0 + threshold * 2.0) - threshold;
		float mixf=clamp((transitionTexel.r - r)*(1.0/threshold), 0.0, 1.0);
		
		gl_FragColor = mix( texel1, texel2, mixf );
	} else {
		
		gl_FragColor = mix( texel1, texel2, mixRatio );
		
	}
}
`,ABe=[],TBe=class extends Jl{constructor(){super(new oi({vertexShader:MBe,fragmentShader:CBe,uniforms:{toScene:new Le(null),fromScene:new Le(null),uResolution:new Le(new re),uDPR:new Le(1),mixRatio:new Le(0),threshold:new Le(.1),useTexture:new Le(0),tMixTexture:{value:ABe[0]}}}),"toScene"),this.needsSwap=!0}get uniforms(){return this.fullscreenMaterial.uniforms}get texture(){return this.uniforms.fromScene.value}set texture(e){this.uniforms.fromScene.value=e}};function M6(e,t){return t&&t.enabled&&e.push(t.effect),e}var PBe=e=>Object.values(wr).includes(e)?e:wr.NORMAL,DBe=class extends sa{constructor(e){super(),this.postprocessingState=NS.defaultData,this._scene=new Hh,this._camera=new _a,this.effects=new Map,this.blueNoiseTexture=new dS,this._renderToScreen=!0,this.clock=new Xwe,this.renderer=e,this.debug=!1,this.effects.set("bloom",new XLe),this.effects.set("chromaticAberration",new KLe),this.effects.set("vignette",new tBe),this.effects.set("noise",new eBe),this.effects.set("colorAverage",new ZLe),this.effects.set("hueSaturation",new JLe),this.effects.set("brightnessContrast",new QLe),this.effects.set("depthOfField",new rBe),this.effects.set("pixelation",new iBe),this.effectComposer=new hBe(this.renderer),this.effectComposer.autoRenderToScreen=!1,this.opaquePass=new D3(!0,this.scene,this.camera),this.opaquePass.clear=!0,this.transmissionPass=new uBe(this.scene,this.camera,this.renderer),this.aoPass=new wBe(this.scene,this.camera),this.taaPass=new lBe,this.taaPass.renderToScreen=!1,this.helperPass=new fBe(this.camera),this.helperPass.renderToScreen=!1,this.overlayPass=new EBe,this.overlayPass.enabled=!1,this.sceneTransitionPass=new TBe,this.sceneTransitionPass.enabled=!1,this._initCopyPass(),this._initPasses()}set overlayTexture(e){e!==void 0?(this.overlayPass.texture=e,this.overlayPass.enabled=!0):this.overlayPass.enabled=!1}get overlayTexture(){return this.overlayPass.texture}set sceneHelpers(e){this.helperPass.sceneHelpers=e}get sceneHelpers(){return this.helperPass.sceneHelpers}set sceneHelpersOnTop(e){this.helperPass.sceneHelpersOnTop=e}get sceneHelpersOnTop(){return this.helperPass.sceneHelpersOnTop}get scene(){return this._scene}set scene(e){this._scene=e,this.opaquePass.setScene(e),this.transmissionPass.setScene(e),this.aoPass.setScene(e)}get camera(){return this._camera}set camera(e){this._camera=e,this.opaquePass.setCamera(e),this.transmissionPass.setCamera(e),this.aoPass.setCamera(e),this.helperPass.setCamera(e)}updateRenderToScreen(){let e=!1;for(let t=this.effectComposer.passes.length-1;t>=0;t--){let r=this.effectComposer.passes[t];if(r.enabled===!0&&!e&&this._renderToScreen){r.renderToScreen=!0,e=!0;continue}r.renderToScreen=!1}}disableHelpers(){this.helperPass.enabled=!1,this.updateRenderToScreen()}enableHelpers(){this.helperPass.enabled=!0,this.updateRenderToScreen()}updateBlueNoiseTexture(e){this.blueNoiseTexture=new dS(e,128,128),this.blueNoiseTexture.wrapS=hc,this.blueNoiseTexture.wrapT=hc,this.blueNoiseTexture.minFilter=si,this.blueNoiseTexture.magFilter=si,this.blueNoiseTexture.needsUpdate=!0}setAmbientOcclusionParams(e,t,r,i,n,a,s,o){this.aoPass.enabled=e,this.aoPass.radius=t,this.aoPass.bias=r,this.aoPass.aoColor=i,this.aoPass.fogEnabled=n,this.aoPass.fogNear=a,this.aoPass.fogFar=s,this.aoPass.runHalfRes!==!o&&(this.aoPass.runHalfRes=!o)}setTransmissionPassEnabled(e){this.transmissionPass.enabled=e,this.opaquePass.hasTransmissionPass=e}_initPasses(){var e,t;if((e=this.uvEffectPass)==null||e.dispose(),(t=this.effectPass)==null||t.dispose(),this.effectComposer.removeAllPasses(),this.transmissionPass.updatePasses(this.renderer),this.effectComposer.addPass(this.aoPass),this.effectComposer.addPass(this.opaquePass),this.effectComposer.addPass(this.transmissionPass),this.effectComposer.addPass(this.taaPass),this.postprocessingState.enabled){let r=[this.effects.get("pixelation")].reduce(M6,[]);r.length>0&&(this.uvEffectPass=new KS(this.camera,...r),this.uvEffectPass.renderToScreen=!1,this.effectComposer.addPass(this.uvEffectPass));let i=[this.effects.get("chromaticAberration"),this.effects.get("bloom"),this.effects.get("colorAverage"),this.effects.get("hueSaturation"),this.effects.get("brightnessContrast"),this.effects.get("vignette"),this.effects.get("noise")].reduce(M6,[]);i.length>0&&(this.effectPass=new KS(this.camera,...i),this.effectPass.renderToScreen=!1,this.effectComposer.addPass(this.effectPass))}this.effectComposer.addPass(this.overlayPass),this.effectComposer.addPass(this.sceneTransitionPass),this.effectComposer.addPass(this.helperPass)}_initCopyPass(){if(this._savePass)return;let e=new re;this.renderer.getDrawingBufferSize(e),this._rt=new Yr(e.x,e.y,{depthBuffer:!1,stencilBuffer:!1,wrapS:hc,wrapT:hc}),this._rt.samples=0,this._savePass=new T3(this._rt,!1),this._savePass.renderToScreen=!1}setCopyPass(e){this._rt=e,this._savePass=new T3(this._rt,!1),this.renderToScreen=!1}get renderToScreen(){return this._renderToScreen}set renderToScreen(e){if(this._renderToScreen===e)return;let t=this.effectComposer;!t||(e===!0?t.removePass(this._savePass):t.addPass(this._savePass),this._renderToScreen=e,this.updateRenderToScreen())}set sceneTransitionFromTexture(e){e!==this.sceneTransitionPass.texture&&(e!==null?this.sceneTransitionPass.enabled=!0:(this.sceneTransitionPass.enabled=!1,this.updateRenderToScreen()),this.sceneTransitionPass.texture=e)}get texture(){return this._rt&&this._rt.texture}get renderTarget(){return this._rt}updatePostprocessing(e){let{enabled:t,...r}=e,i=!1;t!==this.postprocessingState.enabled&&(i=!0);for(let n of Object.entries(r)){let a=n[1],s=this.effects.get(n[0]);if(s){s.enabled!==a.enabled&&(i=!0),s.enabled=a.enabled;for(let[o,l]of Object.entries(a))o==="blendFunction"?s.blendFunction=PBe(l):s[o]=l}}this.postprocessingState=e,i&&this._initPasses()}render(){this.effectComposer.render(this.clock.getDelta())}setScissor(e,t,r,i){e instanceof Wt?(this.effectComposer.inputBuffer.scissor.set(e.x,e.y,e.z,e.w),this.effectComposer.outputBuffer.scissor.set(e.x,e.y,e.z,e.w)):(this.effectComposer.inputBuffer.scissor.set(e,t,r,i),this.effectComposer.outputBuffer.scissor.set(e,t,r,i));let n=this.renderer.getPixelRatio();this.effectComposer.inputBuffer.scissor.multiplyScalar(n),this.effectComposer.outputBuffer.scissor.multiplyScalar(n),this.renderer.setScissor(e,t,r,i)}setScissorTest(e){this.effectComposer.inputBuffer.scissorTest=e,this.effectComposer.outputBuffer.scissorTest=e,this.renderer.setScissorTest(e)}setViewport(e,t,r,i){e instanceof Wt?(this.effectComposer.inputBuffer.viewport.copy(e),this.effectComposer.outputBuffer.viewport.copy(e)):(this.effectComposer.inputBuffer.viewport.set(e,t,r,i),this.effectComposer.outputBuffer.viewport.set(e,t,r,i))}resize(e,t,r){if(this.effectComposer.setSize(e,t,r),this._rt){let i=this.renderer.getPixelRatio();this._rt.setSize(e*i,t*i)}}dispose(){var e,t;(e=this.uvEffectPass)==null||e.dispose(),(t=this.effectPass)==null||t.dispose(),this.effectComposer.dispose()}},OBe=e=>`

// PCSS implementation based on:
// https://www.gamedev.net/articles/programming/graphics/contact-hardening-soft-shadows-made-fast-r4906/
// NOTE: This number affects how big the shadow blur can
// possibly get. Bigger number == bigger blur, but less precise results

const float  gPenumbraFilterSize = 80.0;
const int   gPenumbraSamples = ${e};
const int gShadowSamples = ${e};
const float gShadowSamplesRpc = 1.0f / float(gShadowSamples);

#ifdef USE_SHADOWMAP
    #if NUM_DIR_LIGHT_SHADOWS > 0

        uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
        varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];

        struct DirectionalLightShadow {
            float shadowBias;
            float shadowNormalBias;
            float shadowRadius;
            vec2 shadowMapSize;
        };

        uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];

    #endif

    #if NUM_SPOT_LIGHT_SHADOWS > 0

        uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
        varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_SHADOWS ];

        struct SpotLightShadow {
            float shadowBias;
            float shadowNormalBias;
            float shadowRadius;
            vec2 shadowMapSize;
        };

        uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];

    #endif

    #if NUM_POINT_LIGHT_SHADOWS > 0

        uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
        varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];

        struct PointLightShadow {
            float shadowBias;
            float shadowNormalBias;
            float shadowRadius;
            vec2 shadowMapSize;
            float shadowCameraNear;
            float shadowCameraFar;
        };

        uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];

    #endif

    /*
    #if NUM_RECT_AREA_LIGHTS > 0

        // TODO (abelnation): create uniforms for area light shadows

    #endif
    */

float computePenumbra(int index, sampler2D shadowMap, float temporalAngle, float texelSize, vec2 uv, float compare, float texelScalar, float shadowRadius)
{
    float penumbra = 1.0;
    float blockerDepthAvg = 0.0;
    float blockerCount = 0.0;

    #pragma unroll_loop_start
    for(int i = 0; i < gPenumbraSamples; i ++)
    {
        vec2 offset = (vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize) * texelScalar;
        float depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) );

        if(depth < compare + 0.0001)
        {
            blockerDepthAvg += depth;
            blockerCount++;
        }
    }
    #pragma unroll_loop_end

    if (blockerCount > 0.0)
    {
        blockerDepthAvg /= blockerCount;

        // Compute penumbra
        penumbra = (compare - blockerDepthAvg) / (blockerDepthAvg);
        penumbra *= penumbra;
        penumbra *= 200.0 * penumbraSize[min(index, 5 - 1)]; // Magic number that affects how quickly the penumbra grows

        return clamp(penumbra, 0.00, 1.0);
    }
    return 0.0;
}

float vogelShadow(int index, sampler2D shadowMap, vec2 uv, float texelSize, float compare, float shadowRadius)
{
    float shadow         = 0.0f;

    // NOTE: When using TAA, we should use screen space interleaved gradient noise
    vec2 halton = haltonSequence[frameIndex];
    float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);
    float temporalAngle  = temporalOffset * PI2;

    float texelScalar = (gPenumbraFilterSize) / (texelSize * 1024.);
    float penumbra = computePenumbra(index, shadowMap, temporalAngle, texelSize, uv, compare, texelScalar, shadowRadius);
    if (penumbra == -1.0) {
        return 1.0;
    }

    #pragma unroll_loop_start
    for (int i = 0; i < gShadowSamples; i++)
    {
        vec2 vogelSample =  vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;
        // Overall blurring offset
        vec2 offset = vogelSample * (shadowRadius * 2.);

        // Penumbra offset
        offset += vogelSample * (penumbra * texelScalar);

        shadow += step( compare, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );
    }
    #pragma unroll_loop_end

    return shadow * gShadowSamplesRpc;
}


    float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {

        return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );

    }

    vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {

        return unpackRGBATo2Half( texture2D( shadow, uv ) );

    }

    float VSMShadow (sampler2D shadow, vec2 uv, float compare ){

        float occlusion = 1.0;

        vec2 distribution = texture2DDistribution( shadow, uv );

        float hard_shadow = step( compare , distribution.x ); // Hard Shadow

        if (hard_shadow != 1.0 ) {

            float distance = compare - distribution.x ;
            float variance = max( 0.00000, distribution.y * distribution.y );
            float softness_probability = variance / (variance + distance * distance ); // Chebeyshevs inequality
            softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 ); // 0.3 reduces light bleed
            occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );

        }
        return occlusion;

    }

    float getShadow( int i, sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {

        float shadow = 1.0;

        shadowCoord.xyz /= shadowCoord.w;
        shadowCoord.z += shadowBias;

        // if ( something && something ) breaks ATI OpenGL shader compiler
        // if ( all( something, something ) ) using this instead

        bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
        bool inFrustum = all( inFrustumVec );

        bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );

        bool frustumTest = all( frustumTestVec );

        if ( frustumTest ) {

        #if defined( SHADOWMAP_TYPE_PCF )

            vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
            return vogelShadow(i, shadowMap, shadowCoord.xy, texelSize.x, shadowCoord.z, shadowRadius );

        #elif defined( SHADOWMAP_TYPE_PCF_SOFT )

            vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
            float dx = texelSize.x;
            float dy = texelSize.y;

            vec2 uv = shadowCoord.xy;
            vec2 f = fract( uv * shadowMapSize + 0.5 );
            uv -= f * texelSize;

            shadow = (
                texture2DCompare( shadowMap, uv, shadowCoord.z ) +
                texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
                texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
                texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
                mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
                     f.x ) +
                mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
                     f.x ) +
                mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
                     f.y ) +
                mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
                     f.y ) +
                mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
                          texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
                          f.x ),
                     mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
                          texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
                          f.x ),
                     f.y )
            ) * ( 1.0 / 9.0 );

        #elif defined( SHADOWMAP_TYPE_VSM )

            shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );

        #else // no percentage-closer filtering:

            shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );

        #endif

        }

        return shadow;

    }

    // cubeToUV() maps a 3D direction vector suitable for cube texture mapping to a 2D
    // vector suitable for 2D texture mapping. This code uses the following layout for the
    // 2D texture:
    //
    // xzXZ
    //  y Y
    //
    // Y - Positive y direction
    // y - Negative y direction
    // X - Positive x direction
    // x - Negative x direction
    // Z - Positive z direction
    // z - Negative z direction
    //
    // Source and test bed:
    // https://gist.github.com/tschw/da10c43c467ce8afd0c4

    vec2 cubeToUV( vec3 v, float texelSizeY ) {

        // Number of texels to avoid at the edge of each square

        vec3 absV = abs( v );

        // Intersect unit cube

        float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
        absV *= scaleToCube;

        // Apply scale to avoid seams

        // two texels less per square (one texel will do for NEAREST)
        v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );

        // Unwrap

        // space: -1 ... 1 range for each square
        //
        // #X##         dim    := ( 4 , 2 )
        //  # #         center := ( 1 , 1 )

        vec2 planar = v.xy;

        float almostATexel = 1.5 * texelSizeY;
        float almostOne = 1.0 - almostATexel;

        if ( absV.z >= almostOne ) {

            if ( v.z > 0.0 )
                planar.x = 4.0 - v.x;

        } else if ( absV.x >= almostOne ) {

            float signX = sign( v.x );
            planar.x = v.z * signX + 2.0 * signX;

        } else if ( absV.y >= almostOne ) {

            float signY = sign( v.y );
            planar.x = v.x + 2.0 * signY + 2.0;
            planar.y = v.z * signY - 2.0;

        }

        // Transform to UV space

        // scale := 0.5 / dim
        // translate := ( center + 0.5 ) / dim
        return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );

    }

    float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {

        float shadow = 1.0;
        vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );

        // for point lights, the uniform @vShadowCoord is re-purposed to hold
        // the vector from the light to the world-space position of the fragment.
        vec3 lightToPosition = shadowCoord.xyz;

        // dp = normalized distance from light to fragment position
        float compare = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear ); // need to clamp?
        compare += shadowBias;

        // bd3D = base direction 3D
        vec3 bd3D = normalize( lightToPosition );

        vec2 halton = haltonSequence[frameIndex];
        float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);
        float temporalAngle  = temporalOffset * PI2;

        #if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_VSM )
            for (int i = 0; i < gShadowSamples; i++) {
                vec2 vogelSample = vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;

                // Overall blurring offset
                vec3 offset = vec3(vogelSample.x, vogelSample.y, -vogelSample.x) * (shadowRadius + 5.);

                // NOTE: Removed for now
                // Penumbra offset
                //offset += vec3(vogelSample.x, vogelSample.y, vogelSample.y)  * (penumbra * gPenumbraFilterSize);

                shadow += texture2DCompare( shadowMap, cubeToUV( bd3D + offset, texelSize.y ), compare );

            }
            return shadow * gShadowSamplesRpc;

        #elif defined( SHADOWMAP_TYPE_PCF_SOFT )
            for (int i = 0; i < 16; i++) {
                vec2 vogelSample = vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;

                // Overall blurring offset
                vec3 offset = vec3(vogelSample.x, vogelSample.y, -vogelSample.x) * (shadowRadius + 5.);

                shadow += texture2DCompare( shadowMap, cubeToUV( bd3D + offset, texelSize.y ), compare );

            }
            return shadow * (1.0 / 16.0);
        #else // no percentage-closer filtering

            return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), compare );

        #endif

    }

#endif
`,IBe=Yt.lights_fragment_begin,RBe=Yt.shadowmask_pars_fragment,C6=null,kBe=e=>{switch(e){case"low":return 8;case"medium":return 16;case"high":return 32;default:return 16}},LBe=(e="medium")=>{if(C6===e)return!1;C6=e;let t=kBe(e);Yt.shadowmap_pars_fragment=OBe(t);let r=IBe.slice();r=r.replace("getShadow( spotShadowMap[ i ]","getShadow( UNROLLED_LOOP_INDEX + 3, spotShadowMap[ i ]"),r=r.replace("getShadow( directionalShadowMap[ i ]","getShadow( UNROLLED_LOOP_INDEX, directionalShadowMap[ i ]"),Yt.lights_fragment_begin=r;let i=RBe.slice();return i=i.replaceAll("getShadow(","getShadow( UNROLLED_LOOP_INDEX, "),Yt.shadowmask_pars_fragment=i,!0},BBe=`
attribute vec3 randomColor;
varying vec3 vNormal;
flat out vec3 vColor;

void main()
{
vNormal = normal;
vColor = randomColor;
gl_Position = projectionMatrix * (modelViewMatrix * vec4(position, 1.0));
}
`,NBe=`
uniform float depthContrast;
varying vec3 vNormal;
flat in vec3 vColor;
void main()
{
vec3 normal = (normalize(vNormal)).rgb;

float contrastDepth = (gl_FragCoord.z - 0.5) * depthContrast + 0.5;

vec3 resultColor = mix(mix(vColor, normal, 0.2), vec3(contrastDepth), 0.4);
gl_FragColor = vec4(resultColor, vColor.r);
}
`,ZA=new oi({vertexShader:BBe,fragmentShader:NBe,uniforms:{depthContrast:{value:1}}}),A6=new Mn,zBe=class extends E7{constructor(e){super(e),this._pixelRatio=this.getPixelRatio(),this.viewportWidth=1,this.viewportHeight=1,this.resolution=new re,this.pipeline=new DBe(this),this.dummyCamra=new _a,this.sceneTransitionDuration=0,this.sceneTransitionTimeRemaining=-1,this.isXRCopyPassSet=!1,this.clear=(n=!0,a=!0,s=!0)=>{let o=this.getContext(),l=0;n&&(l|=o.COLOR_BUFFER_BIT),a&&(l|=o.DEPTH_BUFFER_BIT),s&&(l|=o.STENCIL_BUFFER_BIT),o.clear(l),o.clearBufferfv(o.COLOR,1,[0,0,0,1])},this.autoClear=!1;let t=this.setPixelRatio.bind(this),r=this.setSize.bind(this);this.shadowMap.enabled=!0,this.shadowMap.type=vR;let i=this.getContext();if(i&&"drawingBufferColorSpace"in i)try{i.drawingBufferColorSpace="display-p3"}catch(n){console.warn(n)}this.setPixelRatio=n=>{this._pixelRatio!==n&&(this._pixelRatio=n,t(n))},this.setSize=(n,a,s=!0)=>{var o,l;(this.viewportWidth!==n||this.viewportHeight!==a)&&(this.viewportWidth=n,this.viewportHeight=a,r(n,a,s),(o=this.normalRenderTarget)==null||o.setSize(n*this._pixelRatio,a*this._pixelRatio),this._resizeTransmission(n,a),(l=this.transmissionDepthTarget)==null||l.setSize(n*this._pixelRatio/2,a*this._pixelRatio/2),this.pipeline.resize(n,a,s))},this._superDispose=this.dispose,this.dispose=this._currentDispose}createAORenderTarget(){this.aoRenderTarget===void 0&&(this.aoRenderTarget=new Yr(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio,{generateMipmaps:!1,minFilter:Kt,magFilter:Kt,wrapS:$i,wrapT:$i,depthBuffer:!1}))}_resizeTransmission(e,t){var r,i;(r=this.transmissionRenderTarget)==null||r.setSize(e*this._pixelRatio/(this.hdTransmission?1:2),t*this._pixelRatio/(this.hdTransmission?1:2)),(i=this.aoRenderTarget)==null||i.setSize(e*this._pixelRatio/1,t*this._pixelRatio/1)}get hdTransmission(){return Ct.transmissionLod.value===1}set hdTransmission(e){Ct.transmissionLod.value=e===!0?1:2,this._resizeTransmission(this.viewportWidth,this.viewportHeight)}createTransmissionRenderTarget(){this.transmissionRenderTarget===void 0&&(this.transmissionRenderTarget=new Yr(this.viewportWidth*this._pixelRatio/(this.hdTransmission?1:2),this.viewportHeight*this._pixelRatio/(this.hdTransmission?1:2),{generateMipmaps:!0,minFilter:Bg,magFilter:Kt,wrapS:$i,wrapT:$i,depthBuffer:!1}),this.transmissionDepthTarget=new Yr(this.viewportWidth*this._pixelRatio/2,this.viewportHeight*this._pixelRatio/2,{minFilter:si,magFilter:si,depthBuffer:!1}))}createNormalRenderTarget(){this.normalRenderTarget===void 0&&(this.normalRenderTarget=new Yr(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio,{generateMipmaps:!1,minFilter:si,magFilter:si,type:qs,depthTexture:new Fg(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio)}))}renderNormal(e,t,r){this.normalRenderTarget&&(this.setClearColor(0),r.layers.enable(8),r.layers.disable(0),r.layers.disable(3),t.traverseEntity(i=>{i.layers.isEnabled(8)&&(i.copyPreviousMatrix=!1)}),this.setRenderTarget(this.normalRenderTarget),this.clear(),r instanceof _a?ZA.uniforms.depthContrast.value=(r.far-r.near)/1e4:ZA.uniforms.depthContrast.value=1,t.overrideMaterial=ZA,this.render(t,r),this.setClearColor(t.bgColor,t.bgColor.a),this.setRenderTarget(null),t.overrideMaterial=e.wireframeState?R3:null,r.layers.enable(0),r.layers.enable(3),t.traverseEntity(i=>{i.layers.isEnabled(8)&&(i.copyPreviousMatrix=!0)}))}renderSplineSceneWithDummyCamera(e,t,r=1){this.dummyCamra.updateCameraState(t.dataPatched);let i=t.height,n=t.width,a=this.viewportWidth/this.viewportHeight;n<i?n=i*a:i=n/a,this.dummyCamra.setViewplaneSize(n,i);for(let s=0;s<r;s++)this.renderSplineScene(e,this.dummyCamra)}renderSplineScene(e,t,{sceneHelpers:r=void 0,sceneHelpersOnTop:i=void 0,overrideTransmission:n=void 0,overrideNormal:a=void 0}={}){let s=e instanceof Lk?e.activePage:e,o=s.visible;s.visible=!0;let l=s.scene;this.xr.enabled&&(this.isXRCopyPassSet===!1&&this.getRenderTarget()!==null&&(this.pipeline.setCopyPass(this.getRenderTarget()),this.isXRCopyPassSet=!0),this.xr.updateCamera(t)),this.setClearColor(s.bgColor,s.bgColor.a),s.penumbraSizeArray.forEach((d,f)=>{Ct.penumbraSize.value[f]=d}),Ct.pixelRatioNode.value=this.getPixelRatio(),this.resolution.x!==0&&this.resolution.y!==0?Ct.resolution.value.set(this.resolution.x,this.resolution.y):Ct.resolution.value.set(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio),a!==void 0?(Ct.normalRenderTarget.value=a,Ct.normalRenderTargetDepth.value=A6):l.needsNormal()&&(this.createNormalRenderTarget(),Ct.normalRenderTarget.value=this.normalRenderTarget.texture,Ct.normalRenderTargetDepth.value=this.normalRenderTarget.depthTexture,this.renderNormal(l,s,t));let u=s.data.ao,h=u.occlusion;h&&(this.createAORenderTarget(),Ct.aoRenderTarget.value=this.aoRenderTarget.texture),Ct.aoEnabled.value=h,this.pipeline.setAmbientOcclusionParams(u.occlusion,u.radius,u.bias,s.aoColor,s.fog!==null,s.backupFog.near,s.backupFog.far,u.aoFullRes),this.pipeline.aoPass.setBlueNoiseTexture(this.pipeline.blueNoiseTexture);let c=!1;if(n!==void 0)Ct.transmissionRenderTarget.value=n,Ct.transmissionRenderTargetDepth.value=A6,this.pipeline.setTransmissionPassEnabled(!1);else{let d=l.needsTransmission();d&&(this.transmissionRenderTarget===void 0&&(c=!0),this.createTransmissionRenderTarget(),Ct.transmissionRenderTarget.value=this.transmissionRenderTarget.texture,Ct.aspectRatio.value=QIe(this.viewportWidth,this.viewportHeight),Ct.transmissionRenderTargetDepth.value=this.transmissionDepthTarget.texture),this.pipeline.setTransmissionPassEnabled(d)}t.layers.enable(3),t.layers.enable(8),this.pipeline.sceneHelpers=r,this.pipeline.sceneHelpersOnTop=i,this.pipeline.scene=s,this.pipeline.camera=t,c&&this.pipeline.transmissionPass.updatePasses(this),this.pipeline.postprocessingState!==s.postprocessing&&(this.pipeline.updatePostprocessing(s.postprocessing),!r&&!i&&this.pipeline.disableHelpers()),this.clearAlphaOverride!==void 0&&this.setClearAlpha(this.clearAlphaOverride),s.overrideMaterial=l.wireframeState?R3:null,this.pipeline.render(),Ct.frameIndex.value=(Ct.frameIndex.value+1)%16,t instanceof _a&&t.copyHistory(),s.visible=o}renderFromSceneForSceneTransitionPass(e,t,r){this.pipeline.renderToScreen=!1,this.pipeline.renderTarget,this.renderSplineScene(e,t),this.pipeline.sceneTransitionFromTexture=this.pipeline.renderTarget.texture,this.sceneTransitionDuration=r,this.sceneTransitionTimeRemaining=r,this.pipeline.renderToScreen=!0;let i=this.pipeline.sceneTransitionPass.uniforms;i.uDPR.value=window.devicePixelRatio,i.uResolution.value.set(this.domElement.width,this.domElement.height).divideScalar(window.devicePixelRatio)}_currentDispose(){var e,t,r,i,n,a;this._superDispose(),this.pipeline.dispose(),(e=this.aoRenderTarget)==null||e.dispose(),(t=this.transmissionRenderTarget)==null||t.dispose(),(r=this.transmissionDepthTarget)==null||r.dispose(),(i=this.normalRenderTarget)==null||i.dispose(),(a=(n=this.normalRenderTarget)==null?void 0:n.depthTexture)==null||a.dispose()}},Bq=class extends tx(d_e){constructor(e,t=15,r=10066329){super(e,t,r),this.object=e,this.added=!1,this.name=`DirectionalLightHelper: ${e.uuid}`}raycast(e,t){rx(this.object,Bq.geometryHelper,e,t)}},Nq=class extends tx(h_e){constructor(e,t=15,r=6710886){super(e,t,r),this.object=e,this.name=`PointLightHelper: ${e.uuid}`}raycast(e,t){rx(this.object,Nq.geometryHelper,e,t)}},O3=class extends tx(c_e){constructor(e,t=6710886){super(e,t),this.object=e,this.name=`SpotLightHelper: ${e.uuid}`}raycast(e,t){rx(this.object,O3.geometryHelper,e,t)}update(){if(this.object!==void 0){let e=O3._vector,t=this.object.distance?this.object.distance:1e3,r=t*Math.tan(this.object.angle);this.cone.scale.set(r,r,t),e.setFromMatrixPosition(this.object.target.matrixWorld),this.cone.lookAt(e);let i=this.color!==void 0?this.color:this.light.color;if(this.cone.material instanceof Array)for(let n=0,a=this.cone.material.length;n<a;n++)this.cone.material[n].color.set(i);else this.cone.material.color.set(i)}}},zq=O3;zq._vector=new T;function FBe(e,t){e.shadow.camera.right=t/2,e.shadow.camera.left=-t/2,e.shadow.camera.top=t/2,e.shadow.camera.bottom=-t/2,e.shadow.needsUpdate=!0}var Fq=class extends Pk(Ywe,Bq){constructor(e,t,r){super(),this.super_Entity(e,t),this.castShadow=!0,this.shadow.mapSize.width=2048,this.shadow.mapSize.height=2048,this.shadow.normalBias=1,this.layers.enable(3);let i=this.shadow.camera;i.top=1250,i.bottom=-1250,i.right=1250,i.left=-1250,i.near=-1e4,i.far=2500;let n=new yS(this.shadow.camera);n.visible=!1,this.gizmos.shadowmap=n}update(){this.shadow.camera.updateProjectionMatrix();for(let e in this.gizmos){let t=this.gizmos[e];t instanceof yS&&t.update()}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.objectHelper&&this.objectHelper.update()}updateState(e,t){this.updateState_Light(e,t);let r=e.depth!==void 0&&e.depth!==this.shadow.camera.far||e.size!==void 0&&e.size/2!==this.shadow.camera.right;e.size!==void 0&&FBe(this,e.size),e.shadowRadius!==void 0&&(this.shadow.radius=e.shadowRadius),e.shadowResolution!==void 0&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null)),e.penumbraSize!==void 0&&t.scene.markPenumbraSizeDirty(),r&&this.update()}},T6=new T,P6=new T,D6=new Gt,Uq=class extends Pk(Hwe,zq){constructor(e,t,r){super(),this.super_Entity(e,t),this.castShadow=!0,this.shadow.mapSize.width=1024,this.shadow.mapSize.height=1024,this.shadow.normalBias=1,this.layers.enable(3);let i=this.shadow.camera;i.fov=bt.RAD2DEG*2*this.angle,i.aspect=1,i.near=100,i.far=2500;let n=new yS(this.shadow.camera);n.visible=!1,this.gizmos.shadowmap=n,this.update()}update(){this.shadow.camera.updateProjectionMatrix();for(let e in this.gizmos){let t=this.gizmos[e];t instanceof yS&&t.update()}}updateMatrixWorld(e){super.updateMatrixWorld(e),P6.setFromMatrixPosition(this.matrixWorld),D6.setFromRotationMatrix(this.matrixWorld),T6.copy(this.up).applyQuaternion(D6).negate().multiplyScalar(this.distance),this.target.position.copy(P6).add(T6),this.target.updateMatrixWorld(),this.objectHelper&&this.objectHelper.update()}updateState(e,t){this.updateState_Light(e,t),e.distance!==void 0&&(this.distance=e.distance),e.decay!==void 0&&(this.decay=e.decay),e.angle!==void 0&&(this.angle=e.angle),e.penumbra!==void 0&&(this.penumbra=e.penumbra),e.shadowRadius!==void 0&&(this.shadow.radius=e.shadowRadius),e.penumbraSize!==void 0&&t.scene.markPenumbraSizeDirty(),e.shadowResolution!==void 0&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null))}},qh=class extends dk(Hh){constructor(e,t){super(),this.data=t,this.bgColor=new As(1,1,1,1),this.fog=null,this.backupFog=new M7(16777215,.1,2e3),this.fogUseBGColor=!1,this.isActive=!1,this.aoColor=new At,this.penumbraSizeArrayCache=null,this.super_Entity(e,t),this.personalCamera=new _a(_v,{...v1.defaultData,...t.camera,name:"Personal Camera"}),this.personalCamera.objectHelper.visible=!1,this.add(this.personalCamera),this.activeCamera=this.personalCamera,this.ambientLight=new jwe(13882323,8553090,.75),this.ambientLight.name="Default Ambient Light",this.ambientLight.layers.enable(3),this.ambientLight.removeFromParent(),this.add(this.ambientLight)}get scene(){return this.parent}get postprocessing(){return this.data.postprocessing}updateVisible(){}setBackgroundColor(e){this.bgColor=e,this.fogUseBGColor===!0&&(this.backupFog.color=e)}updateAmbientLight(e,t){e.color!==void 0&&(this.ambientLight.color=Xa(e.color,t)),e.intensity!==void 0&&(this.ambientLight.intensity=e.intensity),e.enabled!==void 0&&(e.enabled?this.add(this.ambientLight):this.remove(this.ambientLight))}onDeactive(){this.isActive=!1}onActive(e){this.isActive=!0,e.fog=this.fog,this.updateShadow(this.data.shadow)}forceMaterialsUpdate(){this.traverseEntity(e=>{if(e instanceof Mv)if(Array.isArray(e.material))for(let t of e.material)t.needsUpdate=!0;else e.material.needsUpdate=!0,e.material.dispose()})}updateShadow(e){e.softShadowQuality!==void 0&&this.isActive&&LBe(e.softShadowQuality)&&this.forceMaterialsUpdate()}updateFog(e,t){if(e.enabled?this.fog=this.backupFog:this.fog=null,this.isActive){let r=this.scene;r.fog=this.fog}this.fogUseBGColor=e.useBackgroundColor,e.useBackgroundColor?this.backupFog.color.set(this.bgColor):this.backupFog.color=Xa(e.color,t),this.backupFog.near=e.near,this.backupFog.far=e.far}updateAo(e,t){e.aoColor!==void 0&&(this.aoColor=Xa(e.aoColor,t))}updateByOp(e,t,r,i){super.updateByOp(e,t,r,i);let n=t;Ao(e.path,["fog"])?this.updateFog(n.fog,r.shared):Ao(e.path,["ao"])?this.updateAo(n.ao,r.shared):Ao(e.path,["ambient"])?this.updateAmbientLight(n.ambient,r.shared):Ao(e.path,["shadow"])&&this.updateShadow(n.shadow)}updateState(e,t){this.updateState_Entity(e,t),e.backgroundColor!==void 0&&this.setBackgroundColor(Xa(e.backgroundColor,t.shared)),e.fog!==void 0&&this.updateFog(e.fog,t.shared),e.ambient!==void 0&&this.updateAmbientLight(e.ambient,t.shared),e.ao!==void 0&&this.updateAo(e.ao,t.shared),e.shadow!==void 0&&this.updateShadow(e.shadow)}raycast(e,t){super.raycast(e,t)}switchActiveCamera(e){e&&e.isDescendantOf(this)&&(this.activeCamera!==this.personalCamera&&(this.activeCamera.objectHelper.visible=!0),this.activeCamera=e,e.objectHelper.visible=!1)}get playCamera(){var e;return((e=this.scene)==null?void 0:e.find(this.data.publish.playCamera))??this.personalCamera}switchToPlayCamera(){this.switchActiveCamera(this.playCamera)}get penumbraSizeArray(){return this.penumbraSizeArrayCache===null&&this.updatePenumbraSizeArray(),this.penumbraSizeArrayCache}updatePenumbraSizeArray(){this.penumbraSizeArrayCache=new Array(5).fill(.5);let e=0,t=0;this.traverseEntity(r=>{if(!r.visible)return!0;r instanceof Fq&&r.visible&&e<3&&(this.penumbraSizeArrayCache[e]=r.data.penumbraSize,e+=1),r instanceof Uq&&r.visible&&e<5-3&&(this.penumbraSizeArrayCache[3+t]=r.data.penumbraSize,t+=1)})}raycastWithClones(e){let t=[],r=i=>{for(let n of i.children){let a=n.cloner;pr.is(n)&&(n.visible||a!=null&&a.object.data.visible)&&((cl(n)||M3(n)&&this.scene.enableHelpers&&n.objectHelper.visible)&&(e.intersectObject(n,!1,t),I3(n,e,t,!0)),r(n))}};return r(this),t}},UBe=class extends Pk(Wwe,Nq){constructor(e,t,r){super(),this.super_Entity(e,t),this.castShadow=!0,this.shadow.mapSize.width=1024,this.shadow.mapSize.height=1024,this.shadow.normalBias=1,this.layers.enable(3);let i=this.shadow.camera;i.fov=90,i.aspect=1,i.near=100,i.far=2500;let n=new T(-i.far+this.position.x,-i.far+this.position.y,-i.far+this.position.z),a=new T(i.far+this.position.x,i.far+this.position.y,i.far+this.position.z),s=new Qi(n,a),o=new xS(s,new At(16755200));o.visible=!1,this.gizmos.shadowmap=o,this.update()}update(){if(this.shadow&&(this.shadow.camera.updateProjectionMatrix(),this.gizmos))for(let e in this.gizmos){let t=this.gizmos[e];if(t instanceof xS){let r=this.shadow.camera,i=new T(-r.far+this.position.x,-r.far+this.position.y,-r.far+this.position.z),n=new T(r.far+this.position.x,r.far+this.position.y,r.far+this.position.z);t.box.set(i,n),t.updateMatrixWorld(!0)}}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.objectHelper&&this.objectHelper.update()}updateState(e,t){this.updateState_Light(e,t),e.distance!==void 0&&(this.distance=e.distance),e.decay!==void 0&&(this.decay=e.decay),e.shadowRadius!==void 0&&(this.shadow.radius=e.shadowRadius),e.shadowResolution!==void 0&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null))}},jBe=class extends Qa{get forceComputeSize(){return!0}get shape(){return this.geometry.userData.shape}updateEntityBoxSize(e,t){let r=this.geometry.getAttribute("position");r!==void 0?bk(r,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:r.count,e,t):super.updateEntityBoxSize(e,t)}},Ik=class extends Qa{constructor(e,t,r){super(e,t,r),this._shapeId=null,this._context=r}updateState(e,t){super.updateState(e,t),this.updateShape()}updateShape(){var i;let e={...this.data.geometry.extrusion.shape};for(let n in e)typeof e[n]=="string"&&(e[n]=this._context.shared.getVariable(e[n],[this.uuid,"geometry","extrusion","shape",n]));let t;if(e.type==="Custom"){let n=e.shapeId;if(n!==this._shapeId&&this.detachShape(),n){this._shapeId=n;let a=this._context.scene.find(n);a!=null&&a.data&&(a.attachedPaths.add(this),t=(i=a.geometry.userData)==null?void 0:i.shape),t||this._context.scene.addPendingCommand(()=>this.updateShape())}}else{let n;switch(e.type){case"Rectangle":n=BY;break;case"Ellipse":n=yk;break;case"Polygon":n=LY;break;case"Star":n=NY;break;default:throw new Error(`Unknown shape type: ${e.type}`)}t=n.create({parameters:e}).userData.shape}let r=this.geometry;t&&r.inputs&&(r.inputs.shapeData=t,r.build(),this.attachedSurfaceCloners.forEach(n=>n.update()))}detachShape(){var e;this._shapeId!==null&&((e=this._context.scene.find(this._shapeId))==null||e.attachedPaths.delete(this))}createGeometryDelayed(e){this.geometryCreateDeleyed=e.shared,this.updateShape(),this.refreshAttachedPaths(e)}updateTransformState(e,t){return super.updateTransformState(e,t)}updateGeometryInteractions(e,t){super.updateGeometryInteractions(e,t),this.updateShape()}updateEntityBoxSize(e,t){let r=this.geometry.getAttribute("position");r!==void 0?bk(r,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:r.count,e,t):super.updateEntityBoxSize(e,t)}},mg=class extends ix(Rm,GE){constructor(e,t,r){super(),t.type==="Instance"&&typeof e=="string"&&(t=this.transformAssignData(t,r)),this.super_Entity(e,t),this.objectHelper.update()}get isComponentRoot(){return this.data.type==="Component"&&typeof this.identity=="string"}get isInstanceRoot(){return this.data.type==="Instance"&&typeof this.identity=="string"}transformAssignData(e,t){let r=HS.getComponentData({scene:t.scene.data,shared:t.shared.data},e.component);if(r){let i,n;for(let a of Ch.rootOverrideProps)e[a]===void 0?(i===void 0&&(i={...e}),i[a]=r.data[a]):(n===void 0&&(n={}),n[a]=e[a],i===void 0&&(i={...e}),i[a]=Gh.apply(r.data[a],e[a]));return this.overrideData=n,i}else return{...Za.defaultData,...e,...vc(Za.defaultData,Ch.rootOverrideProps)}}updateByOp(e,t,r,i){let n;if(this.isInstanceRoot&&!i){if(t=this.transformAssignData(t,r),e.type===0&&e.path.length===0&&this.component)for(let a of Ch.rootOverrideProps)a in e.props&&e.props[a]===void 0&&(n===void 0&&(n={...e,props:{...e.props}}),n.props[a]=this.component.data[a]);else if(e.type===0&&e.path.length>0&&Ch.rootOverrideProps.includes(e.path[0])){let a=e.path[0];n===void 0&&(n={...e,path:[],props:{[a]:t[a]}})}}super.updateByOp(n??e,t,r,i)}updateState(e,t){this.updateState_Entity(e,t)}expandInstanceChildren(e){let t=this.data;if(this.component===void 0){let r=e.scene.find(t.component)??null,i=!1;if(r!==this.oldComponent){if(this.oldComponent){let n=0;for(let a of this.children)if(pr.is(a))e.scene.disposeAndUnregisterEntityRecursivelyIfNotReregistered(a),Rk(a),n+=1;else break;this.children.splice(0,n)}i=!0}if(r){let n={};jq(e,[this.uuid],t.overrides,this,r,r,0,i,n);for(let a of this.children)if(pr.is(a)){let s=a.data;s.type==="Empty"&&s.animations&&a.traverseEntity(o=>{if(o instanceof Qa&&o.isSkinnedMesh){let l=o.dataPatched;if(l.bones&&l.boneInverses){let u=l.bones.map(d=>e.scene.find(n[d])),h=l.boneInverses.map(d=>new ze().fromArray(d)),c=new CR(u,h);o.bind(c,o.bindMatrix)}}else o.matrixAutoUpdate=!0})}}this.oldComponent=this.component}}};function Rk(e){if(e.component){let t=e.component.instances.indexOf(e);t>=0&&e.component.instances.splice(t,1);for(let r of e.children)pr.is(r)&&Rk(r)}}function O6(e,t,r,i){return e.component===t&&C$(e.identity,i)?e.overrideData===r?2:1:0}function jq(e,t,r,i,n,a,s,o,l){if(s>50)return!1;if(i.component!==n){if(i.component){let h=i.component.instances.indexOf(i);h>=0&&i.component.instances.splice(h,1)}n.instances.push(i),i.component=n}n instanceof mg&&n.isInstanceRoot&&n.expandInstanceChildren(e);let u=0;for(let h of n.children)if(pr.is(h)){let c=[...t,...typeof h.identity=="string"?[h.identity]:h.identity],d=zS.resolve(r,c,1);d!=null&&!(d instanceof Cn)&&(Object.setPrototypeOf(d,Cn.prototype),console.error("wrong prototype"));let f=null,m;if(!o){let p=i.children[u];if(f=pr.is(p)?p:null,f!==null){let g=O6(f,h,d,c);m=g>=1?f.stateSelection:void 0,g!==2&&(f=null)}if(f===null&&(f=e.scene.findInstance(c)??null,f!==null)){let g=O6(f,h,d,c);if(m=g>=1?f.stateSelection:void 0,g!==2)f=null;else{let v=f.parent.children.indexOf(f);f.parent.children.splice(v,1),i.children.splice(u,0,f),f.parent===i?v<=u&&console.error("not possible"):(f.parent=i,f.matrixWorldNeedsUpdate=!0,f.resetBBoxNeedsUpdate(),f.updateVisible(),e.pendingDeletes.delete(f))}}}if(f===null){let p=d?Gh.apply(h.data,d):h.data;Hf.is(p.type)&&(p={...p,type:"Empty"}),f=Ah.createEntity(c,p,e),f.overrideData=d,i.add(f),i.children.splice(i.children.length-1,1),i.children.splice(u,0,f),f.updateState(f.data,e),m&&f.changeSelectedState(m,e),e.scene.registerInstanceAndSetUuid(f)}if(f.isBone){let p=f.identity[f.identity.length-1];l[p]=f.uuid}u+=1,jq(e,t,r,f,h,a,s+1,o,l)}if(!o){let h=u;for(;;){let c=i.children[u];if(pr.is(c))e.pendingDeletes.add(c);else break;u+=1}i.children.splice(h,u-h)}return!0}var VBe=class extends ix(C7,GE){constructor(e,t){super(),this.super_Entity(e,t),this.objectHelper.update(),this.matrixAutoUpdate=!0}updateState(e,t){this.updateState_Entity(e,t)}};function HBe(e,t,r){let i;return t.geometry.type==="TextGeometry"?new Tq(e,t,r):(t.geometry.type==="SubdivGeometry"?i=new E1(e,t,r):t.geometry.type==="PathGeometry"?i=new Ik(e,t,r):t.geometry.type==="VectorGeometry"?i=new jBe(e,t,r):t.geometry.type==="BooleanGeometry"?i=new Zg(e,t,r):i=new Qa(e,t,r),i)}function kk(e,t,r){return t.type==="Mesh"?HBe(e,t,r):t.type==="Empty"?new M1(e,t):t.type==="Bone"?new VBe(e,t):t.type==="Page"?new qh(e,t):t.type==="PointLight"?new UBe(e,t,r):t.type==="SpotLight"?new Uq(e,t,r):t.type==="DirectionalLight"?new Fq(e,t,r):t.type==="Component"||t.type==="Instance"?new mg(e,t,r):Hf.is(t.type)?new _a(e,t):(console.error(t),new M1(e,t))}Ah.createEntity=kk;function GBe(e,t,r){let i=kk(e.identity,t,r),n=e.children,a=e.attachedPaths,s=e.parent,o=e.component,l=e.instances,u=e.overrideData,h=e.uuid,c=e.stateSelection;e.dispose();for(let d of Object.keys(e))delete e[d];Object.setPrototypeOf(e,Object.getPrototypeOf(i));for(let d of Object.keys(i))e[d]=i[d];e.children=[...e.children,...n],e.attachedPaths=a,e.parent=s,e.component=o,e.instances=l,e.uuid=h,e.overrideData=u,e.updateState(e.data,r),c&&e.changeSelectedState(c,r),e.resetBBoxNeedsUpdate()}Ah.changeEntityProptotype=GBe;Ah.Cloner=ml;function WBe(e,t,r,i){e.updateByOp(t,r,i,!1)}function I6(e,t){let r=!1,i=t.getLayersOfType("transmission"),n=t.getLayersOfType("outline");return n.length>0&&(e.layers.set(8),i.length>0&&e.layers.enable(3),r=!0,Tk(e),Ak(e)),i.length===0&&n.length===0&&e.layers.set(0),e instanceof Mv&&e.needsAO&&e.layers.enable(5),r}function R6(e,t){if(!t.layers)return!1;let r=!1,i=t.getLayersOfType("transmission").filter(a=>a.data.visible),n=t.getLayersOfType("outline").filter(a=>a.data.visible);return i.length>0&&(e.layers.set(3),n.length>0&&e.layers.enable(8),r=!0),i.length===0&&n.length===0&&e.layers.set(0),e.needsAO&&e.layers.enable(5),r}function $Be(e){let t=!1;return e.traverseEntity(r=>{if(r instanceof Mv)if(Array.isArray(r.material))for(let i=0;i<r.material.length;i++)I6(r,r.material[i])&&(t=!0);else I6(r,r.material)&&(t=!0)}),t}function YBe(e){let t=!1;return e.traverseEntity(r=>{if(r instanceof Mv)if(Array.isArray(r.material))for(let i=0;i<r.material.length;i++)R6(r,r.material[i])&&(t=!0);else R6(r,r.material)&&(t=!0)}),t}var qBe=new G7,XBe=new ze,QBe=new cv;function I3(e,t,r,i=!1){let n=e.cloner;if(n)for(let a of n.children){let s=XBe.copy(a.matrixWorld).invert(),o=QBe.copy(t.ray).applyMatrix4(s),l=e.matrixWorld;o.applyMatrix4(l);let u=qBe;u.set(o.origin,o.direction),u.near=t.near,u.far=t.far;let h=u.intersectObject(e,!1);h.length>0&&r.push({...h[0],object:i?a:e})}}var KBe=class{constructor(){this._constraints=new Map}setConstraint(e,t){t===null?this._constraints.delete(e):this._constraints.set(e,t)}removeDependencies(e){this._constraints.delete(e)}applyConstraints(e){let t=new Set;this._constraints.forEach((r,i)=>{let n=[i,r],a=r;for(;this._constraints.has(a);)a=this._constraints.get(a),t.has(a)||n.push(a);for(let s=n.length-2;s>=0;s--)if(!t.has(n[s])){let o=e.find(n[s]);o?o.applyPathSnapping(e):console.warn(`missing entity ${n[s]}`),t.add(n[s])}})}findDependency(e,t){let r=e;for(;this._constraints.has(r);)if(r=this._constraints.get(r),r===t)return!0;return!1}},R3=new X1;R3.wireframe=!0;var k6=new T,Lk=class extends Hh{constructor(e,t){super(),this.data=e,this.enableHelpers=!1,this.wireframeState=!1,this.needsTransmissionDirty=!0,this.needsNormalDirty=!0,this._needsTransmission=!1,this._needsNormal=!1,this.geometryCacheChanged=!1,this.entityByUuid={},this.entityIdentityToEntity={},this.toExpandCloner=new Set,this.toUpdateCloner=new Set,this.pendingCommands=[],this.pathConstraints=new KBe,this.errorPage=new qh("fdasfa",{...qg.defaultData,name:""}),this.invisibleObjects=new M1("jflkdsafjasdifjaslk",{...e3.defaultData,visible:!1,name:"buildin invisible"}),this.needsRecomputeInstances=!1,this.init(e,t),this.matrixAutoUpdate=!1}markGeometryCacheDirty(){this.geometryCacheChanged=!0}markNeedsUpdateRendererDirty(){this.needsTransmissionDirty=!0,this.needsNormalDirty=!0}needsTransmission(){return this.needsTransmissionDirty&&(this._needsTransmission=YBe(this),this.needsTransmissionDirty=!1),this._needsTransmission}needsNormal(){return this.needsNormalDirty&&(this._needsNormal=$Be(this),this.needsNormalDirty=!1),this._needsNormal}registerInstanceAndSetUuid(e){let t=e.identity.join("-"),r=this.entityIdentityToEntity[t];r&&(e.uuid=r.uuid),this.entityIdentityToEntity[t]=e,this.entityByUuid[e.uuid]=e}markPenumbraSizeDirty(){for(let e of this.children)e instanceof qh&&(e.penumbraSizeArrayCache=null)}findInstance(e){return this.entityIdentityToEntity[e.join("-")]}get bgColor(){return this.activePage.bgColor}get postprocessing(){return this.activePage.data.postprocessing}getWithSortKey(e){let t=this.find(e);if(t===void 0)return;let r=[],i=t;for(;i!==this;){let n=i;i=i.parent;let a=i.children.indexOf(n);r.splice(0,0,a)}return{entity:t,sortKey:r}}getAllSorted(e){let t=[];for(let r of e){let i=this.getWithSortKey(r.id);i!==void 0&&t.push(i)}return t.sort((r,i)=>zPe(r.sortKey,i.sortKey)),t.map(r=>r.entity)}nonExistOrDescendantOf(e,t){let r=this.find(e);if(r===void 0)return!0;for(;r;){if(r.uuid===t)return!0;r=r.parent}return!1}find(e){if(this.activePage&&this.activePage.personalCamera.parent){if(e==="f23858d0-4a3b-4bd8-8173-66ed0af7f6fb-personalCamera")return this.activePage.personalCamera;if(e===_v)return this.activePage.personalCamera}if(e===""||e===void 0)return;let t=this.entityByUuid[e];return t===void 0?this.getObjectByProperty("uuid",e):t}debugEnsureEntity(e){let t=this.find(e);if(t){if(Array.isArray(t.identity)&&this.findInstance(t.identity)===void 0){console.error("not found instance");debugger}}else{console.error("not found");debugger}}addPendingExpandCloner(e){this.toExpandCloner.add(e)}addPendingUpdateCloner(e){this.toUpdateCloner.add(e)}markToExpandCloner(e){this.toExpandCloner.add(e),e.traverseEntityAncestors(t=>{this.toExpandCloner.add(t)})}doPendingExpandCloner(){this.toExpandCloner.forEach(e=>{e.expandCloner(this)}),this.toExpandCloner.clear()}doPendingUpdateCloner(){this.toUpdateCloner.forEach(e=>{var t;(t=e.cloner)==null||t.update()}),this.toUpdateCloner.clear()}doPendingUpdates(){this.doPendingExpandCloner(),this.doPendingUpdateCloner(),this.applyPendingCommands()}addPendingCommand(e){this.pendingCommands.push(e)}applyPendingCommands(){this.pendingCommands.forEach(e=>e()),this.pendingCommands.length=0}updateByLibOp(e,t){e.path.length===1&&e.path[0]==="components"&&e.type===1&&this.createChildrenObjects([{...e.data.asset,id:e.id}],this.invisibleObjects,t)}updateTreeByOp(e,t){var r;if(e.path.length===0&&e.type===7){let i=e.parent===null?this:this.find(e.parent);if(i===void 0)throw new Error("unexpected");let n=this.createObject(e.id,e.data,e.children,i,e.localIndex,t);n.updateVisible(),n.resetBBoxNeedsUpdate(),cl(n)&&lu(n.parent)&&(n.invalidateUpstreamBooleanData(),n.parent.invalidateDownstreamBooleanData().recomputeBoolean()),this.markNeedsRecomputeInstancesForAncessors(i),this.markNeedsRecomputeInstancesForChildren(n),this.markToExpandCloner(n),this.markPenumbraSizeDirty()}else if(e.path.length===0&&e.type===8){let i=this.find(e.id);if(i===void 0)throw new Error("unexpected");this.markToExpandCloner(i),i.resetBBoxNeedsUpdate(),this.unregisterObject(i);let n=i.parent;this.markNeedsRecomputeInstancesForAncessors(n),this.markNeedsRecomputeInstancesForChildren(i),this.markPenumbraSizeDirty(),i.parent.remove(i),lu(i.parent)&&(i.parent.invalidateUpstreamBooleanData(),i.parent.invalidateDownstreamBooleanData().recomputeBoolean()),cl(i)&&(i.freeBooleanPointer(),n instanceof Zg&&n.invalidateDownstreamBooleanData().recomputeBoolean()),i instanceof Ik&&i.detachShape(),this.disposeAndUnregisterEntityRecursivelyIfNotReregistered(i),this.pathConstraints.removeDependencies(i.uuid)}else if(e.path.length===0&&e.type===9){let i=this.find(e.id);if(i===void 0)throw new Error("unexpected");this.markNeedsRecomputeInstancesForChildren(i);let n=i.parent;this.markNeedsRecomputeInstancesForAncessors(n),(r=i.cloner)==null||r.resetOnMove(),this.markToExpandCloner(i);let a=e.parent===null?this:this.find(e.parent);if(a===void 0)throw new Error("unexpected");a.add(i),this.markNeedsRecomputeInstancesForAncessors(a),this.markToExpandCloner(i),i.invalidateClonerTransform(i),i.updateVisible(),i.resetBBoxNeedsUpdate(),this.markPenumbraSizeDirty();let s=e.localIndex;a.children.splice(s,0,a.children.pop()),cl(i)&&(i.invalidateUpstreamBooleanData(),lu(i.parent)?i.parent.invalidateDownstreamBooleanData().recomputeBoolean():n instanceof Zg&&n.invalidateDownstreamBooleanData().recomputeBoolean())}this.markNeedsUpdateRendererDirty(),this.markGeometryCacheDirty()}get playPage(){return this.find(this.data.publish.playPage)??this.errorPage}updatePage(e){this.activePage&&this.activePage.onDeactive(),this.activePage=this.errorPage;for(let t of this.children)t instanceof qh&&(t.visible=t.uuid===e,t.visible&&(this.activePage=t,this.activePage.onActive(this)))}updateEntityByOp(e,t,r,i){if(t.type===0){if(("overrides"in t.props||"component"in t.props)&&this.markNeedsRecomputeInstances(),"visible"in t.props&&this.markPenumbraSizeDirty(),t.path.includes("overrides")&&"states"in t.props){let{rest:a}=t.props;t={...t,props:a},this.markNeedsRecomputeInstances()}t.path[0]==="pathSnapping"&&t.props.pathId!==void 0&&this.pathConstraints.setConstraint(e,t.props.pathId)}let n=this.find(e);if(n)try{WBe(n,t,r,{scene:this,shared:i}),n instanceof Qa&&n.updateGeometryGroupsIfNeeded()}catch(a){console.error(a)}}get activeCamera(){return this.activePage.activeCamera}switchActiveCamera(e){this.activePage.switchActiveCamera(e)}isInvisibleObjects(e){return e===this.invisibleObjects||e.hasAnccestor(this.invisibleObjects)}init(e,t){let r=Object.entries(t.data.lib.components).map((i,n)=>({data:i[1].asset.data,children:i[1].asset.children,id:i[0],fi:n}));this.invisibleObjects.updateState(this.invisibleObjects.data,{scene:this,shared:t}),this.add(this.invisibleObjects),this.createChildrenObjects(r,this.invisibleObjects,t),this.createChildrenObjects(e.objects,this,t),this.updatePage(e.publish.playPage),this.activePage.switchToPlayCamera(),this.expandInstances(t,!0),this.traverseEntity(i=>{lu(i)&&i.recomputeBoolean(),i instanceof _a&&i.updateUp()}),this.doPendingExpandCloner(),this.applyPendingCommands()}markNeedsRecomputeInstances(){this.needsRecomputeInstances=!0}markNeedsRecomputeInstancesForChildren(e){e.traverseEntity(t=>{(t.data.type==="Component"||t.data.type==="Instance")&&this.markNeedsRecomputeInstances()})}markNeedsRecomputeInstancesForAncessors(e){pr.is(e)&&(e.data.type==="Component"&&this.markNeedsRecomputeInstances(),e.traverseAncestors(t=>{pr.is(t)&&t.data.type==="Component"&&this.markNeedsRecomputeInstances()}))}relativeizeInner(e,t,r,i,n,a,s){if(e){let o=i.find(e);o&&o!==i&&n.forInstancesRec(l=>{l.data=g1(l.data,u=>{let h=u.events.data(s.id),c=l.goUp(a);if(c){let d=[...T$(c.identity),e].join("-"),f=this.entityIdentityToEntity[d];if(f){let m=f.uuid,p=vs.zoom(h,t);p[r]=m}else console.warn("cannot find instance")}}).data})}}rewriteActions(e,t,r,i,n,a){e.forEach(s=>{s.data.type==="Transition"?this.relativeizeInner(s.data.object,[...t,s.id],"object",r,i,n,a):s.data.type==="Animation"&&this.relativeizeInner(s.data.object,[...t,s.id],"object",r,i,n,a)})}rewriteEventsBeforeGoToPlayMode(){this.traverseEntity(e=>{if(e instanceof mg&&typeof e.identity=="string"&&e.data.type==="Component")return e.traverseEntity((t,r)=>{t.data.events.forEach(i=>{if(i.data.type==="GameControl"){let n=!1;if(t.forInstancesRec(a=>{a.data=g1(a.data,s=>{a.isInstanceRoot||(s.events.delete(i.id),n=!0)}).data}),n===!1)for(let a of jS.list)this.rewriteActions(i.data.gameActions[a],["gameActions",a],e,t,r,i)}else i.data.type==="Conditional"?(i.data.condition.type==="Distance"?(this.relativeizeInner(i.data.condition.fromObject,["condition"],"fromObject",e,t,r,i),this.relativeizeInner(i.data.condition.toObject,["condition"],"toObject",e,t,r,i)):i.data.condition.type==="State"?this.relativeizeInner(i.data.condition.object,["condition"],"object",e,t,r,i):i.data.condition.type==="Comparison"&&(i.data.condition.lOperand.type==="Property"&&this.relativeizeInner(i.data.condition.lOperand.value[0],["condition","lOperand","value"],0,e,t,r,i),i.data.condition.rOperand.type==="Property"&&this.relativeizeInner(i.data.condition.rOperand.value[0],["condition","rOperand","value"],0,e,t,r,i)),this.rewriteActions(i.data.inActions,["inActions"],e,t,r,i),this.rewriteActions(i.data.outActions,["outActions"],e,t,r,i)):"actions"in i.data&&this.rewriteActions(i.data.actions,["actions"],e,t,r,i)})}),!0})}expandInstances(e,t,r){let i=new Set;this.traverseEntity(n=>{if(n instanceof mg&&n.isInstanceRoot)return n.expandInstanceChildren({scene:this,shared:e,pendingDeletes:i}),t||n.resetBBoxNeedsUpdate(),r&&n.traverseEntity(a=>{r.addClip(a)}),!0});for(let n of i)this.disposeAndUnregisterEntityRecursivelyIfNotReregistered(n),Rk(n)}recomputeInstances(e,t){this.needsRecomputeInstances&&(this.needsRecomputeInstances=!1,this.traverseEntity(r=>{r instanceof mg&&r.isInstanceRoot&&(r.component=void 0)}),this.expandInstances(e,!1,t))}disposeAndUnregisterEntityRecursivelyIfNotReregistered(e){e.traverseEntity(t=>{let r=typeof t.identity=="string"?t.identity:t.identity.join("-");this.entityIdentityToEntity[r]===t&&(delete this.entityByUuid[t.uuid],delete this.entityIdentityToEntity[r]),t.dispose()})}clearScene(){for(let e of this.children)pr.is(e)&&e.disposeRecursively();this.children.length=0}resetAfterClear(e,t){this.init(e,t)}raycast(e){return this.raycast1(e,!1)}raycast1(e,t){let r=[],i=n=>{for(let a of n.children){let s=a.cloner;if(pr.is(a)&&!a.raycastLock&&(a.visible||s!=null&&s.object.data.visible))if(t===!0&&a.isInstanceRoot){let o=[];if(e.intersectObject(a,!0,o),o.length){let l=o[0];l.object=a,l.point.applyMatrix4(l.object.matrixWorld);let u=a.matrixWorld.clone().invert();l.point.applyMatrix4(u),r.push(l)}}else(cl(a)||M3(a)&&this.enableHelpers&&a.objectHelper.visible)&&(e.intersectObject(a,!1,r),I3(a,e,r)),i(a)}};return i(this),r}raycastWithClones(e){let t=[],r=i=>{for(let n of i.children){let a=n.cloner;pr.is(n)&&(n.visible||a!=null&&a.object.data.visible)&&((cl(n)||M3(n)&&this.enableHelpers&&n.objectHelper.visible)&&(e.intersectObject(n,!1,t),I3(n,e,t,!0)),r(n))}};return r(this),t}forEachEntity(e){for(let t of this.children)pr.is(t)&&e(t)}traverseConcreteEntity(e){for(let t of this.children)pr.is(t)&&t.isConcreteEntity&&t.traverseEntity(e)}traverseEntity(e){for(let t of this.children)pr.is(t)&&t.traverseEntity(e)}updateFont(e,t){this.traverseEntity(r=>{if(r instanceof Qa&&r.data.type==="Mesh"&&r.data.geometry.type==="TextGeometry"&&r.data.geometry.font===e){let i=r.geometry,n=r.data.geometry;i.updateFont(e,t).then(()=>{i.update(n);let a=r.invalidateDownstreamBooleanData();lu(a)&&a.recomputeBoolean()})}})}traverseObject(e){for(let t of this.children)_1.is(t)&&t.traverseObject(e)}traverseVisibleEntity(e){for(let t of this.children)pr.is(t)&&t.visible&&t.traverseVisibleEntity(e)}dispose(){this.clearScene()}createChildrenObjects(e,t,r){let i=0;for(let n of e)this.createObject(n.id,n.data,n.children,t,i,r),i+=1}registerObjectCreatedInLegacy(e){this.entityByUuid[e.uuid]=e}unregisterObject(e){delete this.entityByUuid[e.uuid];for(let t of e.children)this.unregisterObject(t)}createObject(e,t,r,i,n,a){var l;let s={scene:this,shared:a},o=kk(e,t,s);return o&&(this.entityByUuid[e]=o,i.add(o),i.children.splice(n,0,i.children.pop()),r.length>0&&(o.isInstanceRoot?console.error("instance should not have children!"):this.createChildrenObjects(r,o,a)),o.updateState(t,s),o instanceof Qa&&o.updateGeometryGroupsIfNeeded(),o.updateVisible(),o.cloner&&this.toExpandCloner.add(o),(l=t.pathSnapping)!=null&&l.pathId&&this.pathConstraints.setConstraint(e,t.pathSnapping.pathId)),t.type==="Empty"&&t.animations&&o.traverseEntity(u=>{if(u instanceof Qa&&u.isSkinnedMesh){let h=u.dataPatched;if(h.bones&&h.boneInverses){let c=h.bones.map(m=>this.find(m)),d=h.boneInverses.map(m=>new ze().fromArray(m)),f=new CR(c,d);u.bind(f,u.bindMatrix)}}else u.matrixAutoUpdate=!0}),o}getCenter(e){let t=[];for(let i=0,n=e.length;i<n;++i){let{id:a,recursive:s}=e[i],o=this.find(a),l=s?o.recursiveBBox:o.singleBBox;t.push(...l.vertices)}let r=new Qi;return r.setFromPoints(t),r.getCenter(k6),k6}copyMatrixWorld(e,t){if(e===null){t.identity();return}let r=this.find(e);r?t.copy(r.matrixWorld):t.identity()}copyParentMatrixWorld(e,t){var i;if(e===null){t.identity();return}let r=(i=this.find(e))==null?void 0:i.parent;r?t.copy(r.matrixWorld):t.identity()}traverseMaterial(e){this.traverseEntity(t=>{if(t instanceof Os)if(Array.isArray(t.material))for(let r=0;r<t.material.length;r++)t.material[r]instanceof nd&&e(t.material[r]);else t.material instanceof nd&&e(t.material)})}updateViewPlaneSize(e,t,r=!1){this.traverseConcreteEntity(i=>{i instanceof _a&&i.setViewplaneSize(e,t,r)})}},Xw=(e,t)=>{let r=t.x-e.x,i=t.y-e.y;return Math.sqrt(r*r+i*i)},ZBe=(e,t)=>{let r=t.x-e.x,i=t.y-e.y;return eNe(Math.atan2(i,r))},JBe=(e,t,r)=>{let i={x:0,y:0};return r=k3(r),i.x=e.x-t*Math.cos(r),i.y=e.y-t*Math.sin(r),i},k3=e=>e*(Math.PI/180),eNe=e=>e*(180/Math.PI),tNe=e=>isNaN(e.buttons)?e.pressure!==0:e.buttons!==0,JA=new Map,L6=e=>{JA.has(e)&&clearTimeout(JA.get(e)),JA.set(e,setTimeout(e,100))},ZS=(e,t,r)=>{let i=t.split(/[ ,]+/g),n;for(let a=0;a<i.length;a+=1)n=i[a],e.addEventListener?e.addEventListener(n,r,!1):e.attachEvent&&e.attachEvent(n,r)},B6=(e,t,r)=>{let i=t.split(/[ ,]+/g),n;for(let a=0;a<i.length;a+=1)n=i[a],e.removeEventListener?e.removeEventListener(n,r):e.detachEvent&&e.detachEvent(n,r)},Vq=e=>(e.preventDefault(),e.type.match(/^touch/)?e.changedTouches:e),N6=()=>{if(typeof window>"u")return;let e=window.pageXOffset!==void 0?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,t=window.pageYOffset!==void 0?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;return{x:e,y:t}},L3=(e,t)=>{t.top||t.right||t.bottom||t.left?(e.style.top=t.top,e.style.right=t.right,e.style.bottom=t.bottom,e.style.left=t.left):(e.style.left=t.x+"px",e.style.top=t.y+"px")},Bk=(e,t,r)=>{let i=Hq(e);for(let n in i)if(i.hasOwnProperty(n))if(typeof t=="string")i[n]=t+" "+r;else{let a="";for(let s=0,o=t.length;s<o;s+=1)a+=t[s]+" "+r+", ";i[n]=a.slice(0,-2)}return i},rNe=(e,t)=>{let r=Hq(e);for(let i in r)r.hasOwnProperty(i)&&(r[i]=t);return r},Hq=e=>{let t={};return t[e]="",["webkit","Moz","o"].forEach(function(r){t[r+e.charAt(0).toUpperCase()+e.slice(1)]=""}),t},eT=(e,t)=>{for(let r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e},iNe=(e,t)=>{let r={};for(let i in e)e.hasOwnProperty(i)&&t.hasOwnProperty(i)?r[i]=t[i]:e.hasOwnProperty(i)&&(r[i]=e[i]);return r},B3=(e,t)=>{if(e.length)for(let r=0,i=e.length;r<i;r+=1)t(e[r]);else t(e)},nNe=(e,t,r)=>({x:Math.min(Math.max(e.x,t.x-r),t.x+r),y:Math.min(Math.max(e.y,t.y-r),t.y+r)});typeof window<"u"&&(Gq="ontouchstart"in window,Wq=!!window.PointerEvent,$q=!!window.MSPointerEvent);var Gq,Wq,$q,v0={touch:{start:"touchstart",move:"touchmove",end:"touchend, touchcancel"},mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},pointer:{start:"pointerdown",move:"pointermove",end:"pointerup, pointercancel"},MSPointer:{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}},Nm,C1={};Wq?Nm=v0.pointer:$q?Nm=v0.MSPointer:Gq?(Nm=v0.touch,C1=v0.mouse):Nm=v0.mouse;function rp(){}rp.prototype.on=function(e,t){var r=this,i=e.split(/[ ,]+/g),n;r._handlers_=r._handlers_||{};for(var a=0;a<i.length;a+=1)n=i[a],r._handlers_[n]=r._handlers_[n]||[],r._handlers_[n].push(t);return r};rp.prototype.off=function(e,t){var r=this;return r._handlers_=r._handlers_||{},e===void 0?r._handlers_={}:t===void 0?r._handlers_[e]=null:r._handlers_[e]&&r._handlers_[e].indexOf(t)>=0&&r._handlers_[e].splice(r._handlers_[e].indexOf(t),1),r};rp.prototype.trigger=function(e,t){var r=this,i=e.split(/[ ,]+/g),n;r._handlers_=r._handlers_||{};for(var a=0;a<i.length;a+=1)n=i[a],r._handlers_[n]&&r._handlers_[n].length&&r._handlers_[n].forEach(function(s){s.call(r,{type:n,target:r},t)})};rp.prototype.config=function(e){var t=this;t.options=t.defaults||{},e&&(t.options=iNe(t.options,e))};rp.prototype.bindEvt=function(e,t){var r=this;return r._domHandlers_=r._domHandlers_||{},r._domHandlers_[t]=function(){typeof r["on"+t]=="function"?r["on"+t].apply(r,arguments):console.warn('[WARNING] : Missing "on'+t+'" handler.')},ZS(e,Nm[t],r._domHandlers_[t]),C1[t]&&ZS(e,C1[t],r._domHandlers_[t]),r};rp.prototype.unbindEvt=function(e,t){var r=this;return r._domHandlers_=r._domHandlers_||{},B6(e,Nm[t],r._domHandlers_[t]),C1[t]&&B6(e,C1[t],r._domHandlers_[t]),delete r._domHandlers_[t],this};var Nk=rp;function On(e,t){return this.identifier=t.identifier,this.position=t.position,this.frontPosition=t.frontPosition,this.collection=e,this.defaults={size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:1,mode:"dynamic",zone:document.body,lockX:!1,lockY:!1,shape:"circle"},this.config(t),this.options.mode==="dynamic"&&(this.options.restOpacity=0),this.id=On.id,On.id+=1,this.buildEl().stylize(),this.instance={el:this.ui.el,on:this.on.bind(this),off:this.off.bind(this),show:this.show.bind(this),hide:this.hide.bind(this),add:this.addToDom.bind(this),remove:this.removeFromDom.bind(this),destroy:this.destroy.bind(this),setPosition:this.setPosition.bind(this),resetDirection:this.resetDirection.bind(this),computeDirection:this.computeDirection.bind(this),trigger:this.trigger.bind(this),position:this.position,frontPosition:this.frontPosition,ui:this.ui,identifier:this.identifier,id:this.id,options:this.options},this.instance}On.prototype=new Nk;On.constructor=On;On.id=0;On.prototype.buildEl=function(e){return this.ui={},this.options.dataOnly?this:(this.ui.el=document.createElement("div"),this.ui.back=document.createElement("div"),this.ui.front=document.createElement("div"),this.ui.el.className="nipple collection_"+this.collection.id,this.ui.back.className="back",this.ui.front.className="front",this.ui.el.setAttribute("id","nipple_"+this.collection.id+"_"+this.id),this.ui.el.appendChild(this.ui.back),this.ui.el.appendChild(this.ui.front),this)};On.prototype.stylize=function(){if(this.options.dataOnly)return this;var e=this.options.fadeTime+"ms",t=rNe("borderRadius","50%"),r=Bk("transition","opacity",e),i={};return i.el={position:"absolute",opacity:this.options.restOpacity,display:"block",zIndex:999},i.back={position:"absolute",display:"block",width:this.options.size+"px",height:this.options.size+"px",marginLeft:-this.options.size/2+"px",marginTop:-this.options.size/2+"px",background:"rgba(255, 255, 255, .4)",border:"solid 2px rgba(0, 0, 0, .1)"},i.front={width:this.options.size/2+"px",height:this.options.size/2+"px",position:"absolute",display:"block",marginLeft:-this.options.size/4+"px",marginTop:-this.options.size/4+"px",background:"rgba(255, 255, 255, .8)",border:"solid 2px rgba(0, 0, 0, .1)"},eT(i.el,r),this.options.shape==="circle"&&eT(i.back,t),eT(i.front,t),this.applyStyles(i),this};On.prototype.applyStyles=function(e){for(var t in this.ui)if(this.ui.hasOwnProperty(t))for(var r in e[t])this.ui[t].style[r]=e[t][r];return this};On.prototype.addToDom=function(){return this.options.dataOnly||document.body.contains(this.ui.el)?this:(this.options.zone.appendChild(this.ui.el),this)};On.prototype.removeFromDom=function(){return this.options.dataOnly||!document.body.contains(this.ui.el)?this:(this.options.zone.removeChild(this.ui.el),this)};On.prototype.destroy=function(){clearTimeout(this.removeTimeout),clearTimeout(this.showTimeout),clearTimeout(this.restTimeout),this.trigger("destroyed",this.instance),this.removeFromDom(),this.off()};On.prototype.show=function(e){var t=this;return t.options.dataOnly||(clearTimeout(t.removeTimeout),clearTimeout(t.showTimeout),clearTimeout(t.restTimeout),t.addToDom(),t.restCallback(),setTimeout(function(){t.ui.el.style.opacity=1},0),t.showTimeout=setTimeout(function(){t.trigger("shown",t.instance),typeof e=="function"&&e.call(this)},t.options.fadeTime)),t};On.prototype.hide=function(e){var t=this;if(t.options.dataOnly)return t;if(t.ui.el.style.opacity=t.options.restOpacity,clearTimeout(t.removeTimeout),clearTimeout(t.showTimeout),clearTimeout(t.restTimeout),t.removeTimeout=setTimeout(function(){var r=t.options.mode==="dynamic"?"none":"block";t.ui.el.style.display=r,typeof e=="function"&&e.call(t),t.trigger("hidden",t.instance)},t.options.fadeTime),t.options.restJoystick){let r=t.options.restJoystick,i={};i.x=r===!0||r.x!==!1?0:t.instance.frontPosition.x,i.y=r===!0||r.y!==!1?0:t.instance.frontPosition.y,t.setPosition(e,i)}return t};On.prototype.setPosition=function(e,t){var r=this;r.frontPosition={x:t.x,y:t.y};var i=r.options.fadeTime+"ms",n={};n.front=Bk("transition",["top","left"],i);var a={front:{}};a.front={left:r.frontPosition.x+"px",top:r.frontPosition.y+"px"},r.applyStyles(n),r.applyStyles(a),r.restTimeout=setTimeout(function(){typeof e=="function"&&e.call(r),r.restCallback()},r.options.fadeTime)};On.prototype.restCallback=function(){var e=this,t={};t.front=Bk("transition","none",""),e.applyStyles(t),e.trigger("rested",e.instance)};On.prototype.resetDirection=function(){this.direction={x:!1,y:!1,angle:!1}};On.prototype.computeDirection=function(e){var t=e.angle.radian,r=Math.PI/4,i=Math.PI/2,n,a,s;if(t>r&&t<r*3&&!e.lockX?n="up":t>-r&&t<=r&&!e.lockY?n="left":t>-r*3&&t<=-r&&!e.lockX?n="down":e.lockY||(n="right"),e.lockY||(t>-i&&t<i?a="left":a="right"),e.lockX||(t>0?s="up":s="down"),e.force>this.options.threshold){var o={},l;for(l in this.direction)this.direction.hasOwnProperty(l)&&(o[l]=this.direction[l]);var u={};this.direction={x:a,y:s,angle:n},e.direction=this.direction;for(l in o)o[l]===this.direction[l]&&(u[l]=!0);if(u.x&&u.y&&u.angle)return e;(!u.x||!u.y)&&this.trigger("plain",e),u.x||this.trigger("plain:"+a,e),u.y||this.trigger("plain:"+s,e),u.angle||this.trigger("dir dir:"+n,e)}else this.resetDirection();return e};var aNe=On;function Ki(e,t){var r=this;r.nipples=[],r.idles=[],r.actives=[],r.ids=[],r.pressureIntervals={},r.manager=e,r.id=Ki.id,Ki.id+=1,r.defaults={zone:document.body,multitouch:!1,maxNumberOfNipples:10,mode:"dynamic",position:{top:0,left:0},catchDistance:200,size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:1,lockX:!1,lockY:!1,shape:"circle",dynamicPage:!1,follow:!1},r.config(t),(r.options.mode==="static"||r.options.mode==="semi")&&(r.options.multitouch=!1),r.options.multitouch||(r.options.maxNumberOfNipples=1);let i=getComputedStyle(r.options.zone.parentElement);return i&&i.display==="flex"&&(r.parentIsFlex=!0),r.updateBox(),r.prepareNipples(),r.bindings(),r.begin(),r.nipples}Ki.prototype=new Nk;Ki.constructor=Ki;Ki.id=0;Ki.prototype.prepareNipples=function(){var e=this,t=e.nipples;t.on=e.on.bind(e),t.off=e.off.bind(e),t.options=e.options,t.destroy=e.destroy.bind(e),t.ids=e.ids,t.id=e.id,t.processOnMove=e.processOnMove.bind(e),t.processOnEnd=e.processOnEnd.bind(e),t.get=function(r){if(r===void 0)return t[0];for(var i=0,n=t.length;i<n;i+=1)if(t[i].identifier===r)return t[i];return!1}};Ki.prototype.bindings=function(){var e=this;e.bindEvt(e.options.zone,"start"),e.options.zone.style.touchAction="none",e.options.zone.style.msTouchAction="none"};Ki.prototype.begin=function(){var e=this,t=e.options;if(t.mode==="static"){var r=e.createNipple(t.position,e.manager.getIdentifier());r.add(),e.idles.push(r)}};Ki.prototype.createNipple=function(e,t){var r=this,i=r.manager.scroll,n={},a=r.options,s={x:r.parentIsFlex?i.x:i.x+r.box.left,y:r.parentIsFlex?i.y:i.y+r.box.top};if(e.x&&e.y)n={x:e.x-s.x,y:e.y-s.y};else if(e.top||e.right||e.bottom||e.left){var o=document.createElement("DIV");o.style.display="hidden",o.style.top=e.top,o.style.right=e.right,o.style.bottom=e.bottom,o.style.left=e.left,o.style.position="absolute",a.zone.appendChild(o);var l=o.getBoundingClientRect();a.zone.removeChild(o),n=e,e={x:l.left+i.x,y:l.top+i.y}}var u=new aNe(r,{color:a.color,size:a.size,threshold:a.threshold,fadeTime:a.fadeTime,dataOnly:a.dataOnly,restJoystick:a.restJoystick,restOpacity:a.restOpacity,mode:a.mode,identifier:t,position:e,zone:a.zone,frontPosition:{x:0,y:0},shape:a.shape});return a.dataOnly||(L3(u.ui.el,n),L3(u.ui.front,u.frontPosition)),r.nipples.push(u),r.trigger("added "+u.identifier+":added",u),r.manager.trigger("added "+u.identifier+":added",u),r.bindNipple(u),u};Ki.prototype.updateBox=function(){var e=this;e.box=e.options.zone.getBoundingClientRect()};Ki.prototype.bindNipple=function(e){var t=this,r,i=function(n,a){r=n.type+" "+a.id+":"+n.type,t.trigger(r,a)};e.on("destroyed",t.onDestroyed.bind(t)),e.on("shown hidden rested dir plain",i),e.on("dir:up dir:right dir:down dir:left",i),e.on("plain:up plain:right plain:down plain:left",i)};Ki.prototype.pressureFn=function(e,t,r){var i=this,n=0;clearInterval(i.pressureIntervals[r]),i.pressureIntervals[r]=setInterval((function(){var a=e.force||e.pressure||e.webkitForce||0;a!==n&&(t.trigger("pressure",a),i.trigger("pressure "+t.identifier+":pressure",a),n=a)}).bind(i),100)};Ki.prototype.onstart=function(e){var t=this,r=t.options,i=e;e=Vq(e),t.updateBox();var n=function(a){t.actives.length<r.maxNumberOfNipples?t.processOnStart(a):i.type.match(/^touch/)&&(Object.keys(t.manager.ids).forEach(function(s){if(Object.values(i.touches).findIndex(function(l){return l.identifier===s})<0){var o=[e[0]];o.identifier=s,t.processOnEnd(o)}}),t.actives.length<r.maxNumberOfNipples&&t.processOnStart(a))};return B3(e,n),t.manager.bindDocument(),!1};Ki.prototype.processOnStart=function(e){var t=this,r=t.options,i,n=t.manager.getIdentifier(e),a=e.force||e.pressure||e.webkitForce||0,s={x:e.pageX,y:e.pageY},o=t.getOrCreate(n,s);o.identifier!==n&&t.manager.removeIdentifier(o.identifier),o.identifier=n;var l=function(h){h.trigger("start",h),t.trigger("start "+h.id+":start",h),h.show(),a>0&&t.pressureFn(e,h,h.identifier),t.processOnMove(e)};if((i=t.idles.indexOf(o))>=0&&t.idles.splice(i,1),t.actives.push(o),t.ids.push(o.identifier),r.mode!=="semi")l(o);else{var u=Xw(s,o.position);if(u<=r.catchDistance)l(o);else{o.destroy(),t.processOnStart(e);return}}return o};Ki.prototype.getOrCreate=function(e,t){var r=this,i=r.options,n;return/(semi|static)/.test(i.mode)?(n=r.idles[0],n?(r.idles.splice(0,1),n):i.mode==="semi"?r.createNipple(t,e):(console.warn("Coudln't find the needed nipple."),!1)):(n=r.createNipple(t,e),n)};Ki.prototype.processOnMove=function(e){var t=this,r=t.options,i=t.manager.getIdentifier(e),n=t.nipples.get(i),a=t.manager.scroll;if(!tNe(e)){this.processOnEnd(e);return}if(!n){console.error("Found zombie joystick with ID "+i),t.manager.removeIdentifier(i);return}if(r.dynamicPage){var s=n.el.getBoundingClientRect();n.position={x:a.x+s.left,y:a.y+s.top}}n.identifier=i;var o=n.options.size/2,l={x:e.pageX,y:e.pageY};r.lockX&&(l.y=n.position.y),r.lockY&&(l.x=n.position.x);var u=Xw(l,n.position),h=ZBe(l,n.position),c=k3(h),d=u/o,f={distance:u,position:l},m,p;if(n.options.shape==="circle"?(m=Math.min(u,o),p=JBe(n.position,m,h)):(p=nNe(l,n.position,o),m=Xw(p,n.position)),r.follow){if(u>o){let x=l.x-p.x,b=l.y-p.y;n.position.x+=x,n.position.y+=b,n.el.style.top=n.position.y-(t.box.top+a.y)+"px",n.el.style.left=n.position.x-(t.box.left+a.x)+"px",u=Xw(l,n.position)}}else l=p,u=m;var g=l.x-n.position.x,v=l.y-n.position.y;n.frontPosition={x:g,y:v},r.dataOnly||L3(n.ui.front,n.frontPosition);var y={identifier:n.identifier,position:l,force:d,pressure:e.force||e.pressure||e.webkitForce||0,distance:u,angle:{radian:c,degree:h},vector:{x:g/o,y:-v/o},raw:f,instance:n,lockX:r.lockX,lockY:r.lockY};y=n.computeDirection(y),y.angle={radian:k3(180-h),degree:180-h},n.trigger("move",y),t.trigger("move "+n.id+":move",y)};Ki.prototype.processOnEnd=function(e){var t=this,r=t.options,i=t.manager.getIdentifier(e),n=t.nipples.get(i),a=t.manager.removeIdentifier(n.identifier);!n||(r.dataOnly||n.hide(function(){r.mode==="dynamic"&&(n.trigger("removed",n),t.trigger("removed "+n.id+":removed",n),t.manager.trigger("removed "+n.id+":removed",n),n.destroy())}),clearInterval(t.pressureIntervals[n.identifier]),n.resetDirection(),n.trigger("end",n),t.trigger("end "+n.id+":end",n),t.ids.indexOf(n.identifier)>=0&&t.ids.splice(t.ids.indexOf(n.identifier),1),t.actives.indexOf(n)>=0&&t.actives.splice(t.actives.indexOf(n),1),/(semi|static)/.test(r.mode)?t.idles.push(n):t.nipples.indexOf(n)>=0&&t.nipples.splice(t.nipples.indexOf(n),1),t.manager.unbindDocument(),/(semi|static)/.test(r.mode)&&(t.manager.ids[a.id]=a.identifier))};Ki.prototype.onDestroyed=function(e,t){var r=this;r.nipples.indexOf(t)>=0&&r.nipples.splice(r.nipples.indexOf(t),1),r.actives.indexOf(t)>=0&&r.actives.splice(r.actives.indexOf(t),1),r.idles.indexOf(t)>=0&&r.idles.splice(r.idles.indexOf(t),1),r.ids.indexOf(t.identifier)>=0&&r.ids.splice(r.ids.indexOf(t.identifier),1),r.manager.removeIdentifier(t.identifier),r.manager.unbindDocument()};Ki.prototype.destroy=function(){var e=this;e.unbindEvt(e.options.zone,"start"),e.nipples.forEach(function(r){r.destroy()});for(var t in e.pressureIntervals)e.pressureIntervals.hasOwnProperty(t)&&clearInterval(e.pressureIntervals[t]);e.trigger("destroyed",e.nipples),e.manager.unbindDocument(),e.off()};var sNe=Ki;function Yn(e){var t=this;t.ids={},t.index=0,t.collections=[],t.scroll=N6(),t.config(e),t.prepareCollections();var r=function(){var n;t.collections.forEach(function(a){a.forEach(function(s){n=s.el.getBoundingClientRect(),s.position={x:t.scroll.x+n.left,y:t.scroll.y+n.top}})})};if(typeof window>"u")return t.collections;ZS(window,"resize",function(){L6(r)});var i=function(){t.scroll=N6()};return ZS(window,"scroll",function(){L6(i)}),t.collections}Yn.prototype=new Nk;Yn.constructor=Yn;Yn.prototype.prepareCollections=function(){var e=this;e.collections.create=e.create.bind(e),e.collections.on=e.on.bind(e),e.collections.off=e.off.bind(e),e.collections.destroy=e.destroy.bind(e),e.collections.get=function(t){var r;return e.collections.every(function(i){return r=i.get(t),!r}),r}};Yn.prototype.create=function(e){return this.createCollection(e)};Yn.prototype.createCollection=function(e){var t=this,r=new sNe(t,e);return t.bindCollection(r),t.collections.push(r),r};Yn.prototype.bindCollection=function(e){var t=this,r,i=function(n,a){r=n.type+" "+a.id+":"+n.type,t.trigger(r,a)};e.on("destroyed",t.onDestroyed.bind(t)),e.on("shown hidden rested dir plain",i),e.on("dir:up dir:right dir:down dir:left",i),e.on("plain:up plain:right plain:down plain:left",i)};Yn.prototype.bindDocument=function(){var e=this;e.binded||(e.bindEvt(document,"move").bindEvt(document,"end"),e.binded=!0)};Yn.prototype.unbindDocument=function(e){var t=this;(!Object.keys(t.ids).length||e===!0)&&(t.unbindEvt(document,"move").unbindEvt(document,"end"),t.binded=!1)};Yn.prototype.getIdentifier=function(e){var t;return e?(t=e.identifier===void 0?e.pointerId:e.identifier,t===void 0&&(t=this.latest||0)):t=this.index,this.ids[t]===void 0&&(this.ids[t]=this.index,this.index+=1),this.latest=t,this.ids[t]};Yn.prototype.removeIdentifier=function(e){var t={};for(var r in this.ids)if(this.ids[r]===e){t.id=r,t.identifier=this.ids[r],delete this.ids[r];break}return t};Yn.prototype.onmove=function(e){var t=this;return t.onAny("move",e),!1};Yn.prototype.onend=function(e){var t=this;return t.onAny("end",e),!1};Yn.prototype.oncancel=function(e){var t=this;return t.onAny("end",e),!1};Yn.prototype.onAny=function(e,t){var r=this,i,n="processOn"+e.charAt(0).toUpperCase()+e.slice(1);t=Vq(t);var a=function(o,l,u){u.ids.indexOf(l)>=0&&(u[n](o),o._found_=!0)},s=function(o){i=r.getIdentifier(o),B3(r.collections,a.bind(null,o,i)),o._found_||r.removeIdentifier(i)};return B3(t,s),!1};Yn.prototype.destroy=function(){var e=this;e.unbindDocument(!0),e.ids={},e.index=0,e.collections.forEach(function(t){t.destroy()}),e.off()};Yn.prototype.onDestroyed=function(e,t){var r=this;if(r.collections.indexOf(t)<0)return!1;r.collections.splice(r.collections.indexOf(t),1)};var oNe=Yn,z6=new oNe,lNe={create:function(e){return z6.create(e)},factory:z6},Yq=new Map,My=new Map,of=class{constructor(e,t,r,i){this.data=t;let{audio:n,volume:a,delay:s,loop:o}=t;if(!n)throw new Error("Missing property");let l=typeof n=="string"?i.getAudio(n).src:n.data;this.audioPlayer=new Y0({src:l,volume:a,delay:s,loop:o}),My.has(r.uuid)?My.get(r.uuid).push(this):My.set(r.uuid,[this]),Yq.set(e,this)}playByToggle(){this.data.toggle==="stop"?this.audioPlayer.status==="playing"?this.audioPlayer.stop():(this.audioPlayer.stop(),this.audioPlayer.play()):this.data.toggle==="pause"?this.audioPlayer.status==="playing"?this.audioPlayer.pause():this.audioPlayer.play():(this.audioPlayer.stop(),this.audioPlayer.play())}dispose(){this.audioPlayer.stop()}},N3=class{constructor(e){this.data=e}dispatch(){this.data.playAudio?this.pauseAudio(this.data.playAudio):this.data.object?this.pauseAllAudiosFromObject(this.data.object):this.pauseAllAudios()}pauseAudio(e){let t=Yq.get(e);!t||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t.audioPlayer[this.data.interaction](),this.disposeDelay()},this.data.delay)):t.audioPlayer[this.data.interaction]())}pauseAllAudiosFromObject(e){let t=My.get(e);!(t!=null&&t.length)||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t.forEach(r=>r.audioPlayer[this.data.interaction]()),this.disposeDelay()},this.data.delay)):t.forEach(r=>r.audioPlayer[this.data.interaction]()))}pauseAllAudios(){let e=[...My.values()];!e.length||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{e.forEach(t=>{t.forEach(r=>{r.audioPlayer[this.data.interaction]()})}),this.disposeDelay()},this.data.delay)):e.forEach(t=>{t.forEach(r=>{r.audioPlayer[this.data.interaction]()})}))}disposeDelay(){clearTimeout(this.timeoutId),delete this.timeoutId}dispose(){clearTimeout(this.timeoutId),delete this.timeoutId}},qq=class{constructor(e,t,r,i,n){if(this.data=t,this.shared=i,this.condition=n,t.interaction==="play")this.interaction=new of(e,t,r,i);else if(t.interaction==="pause"||t.interaction==="stop")this.interaction=new N3(t);else throw new Error("Missing property")}dispatchBasic(){if(Tn(this.shared,this.condition)===!1)return!1;this.interaction instanceof of?this.interaction.playByToggle():this.interaction.dispatch()}dispatchConditional(){if(Tn(this.shared,this.condition)===!1)return!1;this.interaction instanceof of?this.interaction.audioPlayer.play():this.interaction.dispatch()}dispatchGameControl(e){if(Tn(this.shared,this.condition)===!1)return!1;this.interaction instanceof of&&(e==="start"?this.interaction.audioPlayer.play():this.interaction.audioPlayer.stop())}dispose(){this.interaction.dispose()}},uNe="text/plain",cNe="us-ascii",F6=(e,t)=>t.some(r=>r instanceof RegExp?r.test(e):r===e),hNe=(e,{stripHash:t})=>{let r=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(e);if(!r)throw new Error(`Invalid URL: ${e}`);let{type:i,data:n,hash:a}=r.groups,s=i.split(";");a=t?"":a;let o=!1;s[s.length-1]==="base64"&&(s.pop(),o=!0);let l=(s.shift()||"").toLowerCase(),u=[...s.map(h=>{let[c,d=""]=h.split("=").map(f=>f.trim());return c==="charset"&&(d=d.toLowerCase(),d===cNe)?"":`${c}${d?`=${d}`:""}`}).filter(Boolean)];return o&&u.push("base64"),(u.length>0||l&&l!==uNe)&&u.unshift(l),`data:${u.join(";")},${o?n.trim():n}${a?`#${a}`:""}`};function dNe(e,t){if(t={defaultProtocol:"http:",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,sortQueryParameters:!0,...t},e=e.trim(),/^data:/i.test(e))return hNe(e,t);if(/^view-source:/i.test(e))throw new Error("`view-source:` is not supported as it is a non-standard protocol");let r=e.startsWith("//");!r&&/^\.*\//.test(e)||(e=e.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,t.defaultProtocol));let i=new URL(e);if(t.forceHttp&&t.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(t.forceHttp&&i.protocol==="https:"&&(i.protocol="http:"),t.forceHttps&&i.protocol==="http:"&&(i.protocol="https:"),t.stripAuthentication&&(i.username="",i.password=""),t.stripHash?i.hash="":t.stripTextFragment&&(i.hash=i.hash.replace(/#?:~:text.*?$/i,"")),i.pathname){let a=/\b[a-z][a-z\d+\-.]{1,50}:\/\//g,s=0,o="";for(;;){let u=a.exec(i.pathname);if(!u)break;let h=u[0],c=u.index,d=i.pathname.slice(s,c);o+=d.replace(/\/{2,}/g,"/"),o+=h,s=c+h.length}let l=i.pathname.slice(s,i.pathname.length);o+=l.replace(/\/{2,}/g,"/"),i.pathname=o}if(i.pathname)try{i.pathname=decodeURI(i.pathname)}catch{}if(t.removeDirectoryIndex===!0&&(t.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(t.removeDirectoryIndex)&&t.removeDirectoryIndex.length>0){let a=i.pathname.split("/"),s=a[a.length-1];F6(s,t.removeDirectoryIndex)&&(a=a.slice(0,-1),i.pathname=a.slice(1).join("/")+"/")}if(i.hostname&&(i.hostname=i.hostname.replace(/\.$/,""),t.stripWWW&&/^www\.(?!www\.)[a-z\-\d]{1,63}\.[a-z.\-\d]{2,63}$/.test(i.hostname)&&(i.hostname=i.hostname.replace(/^www\./,""))),Array.isArray(t.removeQueryParameters))for(let a of[...i.searchParams.keys()])F6(a,t.removeQueryParameters)&&i.searchParams.delete(a);if(t.removeQueryParameters===!0&&(i.search=""),t.sortQueryParameters){i.searchParams.sort();try{i.search=decodeURIComponent(i.search)}catch{}}t.removeTrailingSlash&&(i.pathname=i.pathname.replace(/\/$/,""));let n=e;return e=i.toString(),!t.removeSingleSlash&&i.pathname==="/"&&!n.endsWith("/")&&i.hash===""&&(e=e.replace(/\/$/,"")),(t.removeTrailingSlash||i.pathname==="/")&&i.hash===""&&t.removeSingleSlash&&(e=e.replace(/\/$/,"")),r&&!t.normalizeProtocol&&(e=e.replace(/^http:\/\//,"//")),t.stripProtocol&&(e=e.replace(/^(?:https?:)?\/\//,"")),e}var fNe=class{constructor({url:e,context:t},r,i,n){if(this.controlsManager=r,this.shared=i,this.condition=n,!e)throw new Error("Missing property");this.url=e.startsWith("mailto:")?e:dNe(e,{removeTrailingSlash:!1,removeSingleSlash:!1}),this.context=t??"tab"}dispatch(){var e;if(Tn(this.shared,this.condition)===!1)return!1;A$?window.location.assign(this.url):(this.context==="tab"?window.open(this.url,"_blank"):this.context==="window"?window.open(this.url,"_blank",`width=${window.innerWidth}, height=${window.innerHeight}`):window.open(this.url,"_parent"),(e=this.controlsManager.orbitControls)==null||e.onPointerUp(It[0]),FPe())}},Xq=class{constructor(e,t,r,i,n){this.data=e,this.page=t,this.controlsManager=r,this.shared=i,this.condition=n,this.timeoutIdQueue=[],this.dispatchInner=()=>{this.objects.forEach(this.destroyCallback)},this.destroyCallback=a=>{var u,h;this.timeoutIdQueue.shift();let s=this.page.scene.find(a);if(s===void 0)return;let o=this.controlsManager.sharedGameControlGlobals.rapierWorld,l=o?(u=s.dataPatched.physics)==null?void 0:u.fusedBody:!0;if(s.cloner){for(let c of s.cloner.children)l?(c.playModeVisible=!1,c.rigidBody&&((h=s.dataPatched.physics)==null?void 0:h.rigidBody)==="positioned"&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(c.rigidBody.collider(0).handle),o.removeRigidBody(c.rigidBody),c.rigidBody=void 0),c.bvhGeometry&&(c.bvhGeometry=void 0)):this.clone===void 0||this.clone===c?(c.playModeVisible=!1,c.rigidBody&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(c.rigidBody.collider(0).handle),o.removeRigidBody(c.rigidBody),c.rigidBody=void 0)):c.playModeVisible===void 0&&(c.playModeVisible=!0);(l||this.clone===void 0||this.clone===!1)&&(s.visible=!1,s.rigidBody&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(s.rigidBody.collider(0).handle),o.removeRigidBody(s.rigidBody),s.rigidBody=void 0),s.bvhGeometry&&(s.bvhGeometry=void 0))}else s.rigidBody&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(s.rigidBody.collider(0).handle),o.removeRigidBody(s.rigidBody),s.rigidBody=void 0),s.bvhGeometry&&(s.bvhGeometry=void 0),s.visible=!1;o===void 0?this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim=this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.filter(c=>c.bvhGeometry!==void 0):this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim=this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.filter(c=>c.rigidBody!==void 0),s.destroyedInAction=!0,this.controlsManager.requestRender()},this.objects=[...e.objects]}dispatch(e){if(Tn(this.shared,this.condition)===!1)return!1;this.clone=e,this.data.delay?this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,this.data.delay*1e3)):this.dispatchInner()}dispatchFromStart(){if(Tn(this.shared,this.condition)===!1)return!1;this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,this.data.delay*1e3))}dispose(){this.timeoutIdQueue.forEach(e=>window.clearTimeout(e))}},Qq=class{constructor(e,t,r,i,n){this.data=e,this.page=t,this.shared=r,this.eventManager=i,this.condition=n,this.shared=r}dispatch(){if(Tn(this.shared,this.condition)===!1)return!1;clearTimeout(this.timeoutId),delete this.timeoutId,this.timeoutId=window.setTimeout(()=>{var e;this.shared.reset(this.shared.data,!0),Yk(this.page,this.shared,!0),this.eventManager.reset(),(e=this.eventManager.controlsManager.gameControl)==null||e.reset(!0),this.page.switchToPlayCamera(),this.eventManager.controlsManager.requestRender(),delete this.timeoutId},(this.data.delay??0)*1e3)}dispose(){clearTimeout(this.timeoutId),delete this.timeoutId}},Kq={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,timelineChangeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0,rewind:!0},zk={duration:1e3,delay:0,endDelay:0,startOnceDelay:0,pingPongDelayCorrection:0,pingPongEndDelayCorrection:0,easing:"easeOutElastic(1, .5)",round:0},pNe=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],JS={CSS:{},springs:{}};function gl(e,t,r){return Math.min(Math.max(e,t),r)}function Cy(e,t){return e.indexOf(t)>-1}function tT(e,t){return e.apply(null,t)}var kt={arr:function(e){return Array.isArray(e)},obj:function(e){return Cy(Object.prototype.toString.call(e),"Object")},pth:function(e){return kt.obj(e)&&e.hasOwnProperty("totalLength")},svg:function(e){return e instanceof SVGElement},inp:function(e){return e instanceof HTMLInputElement},dom:function(e){return!("isNode"in e)&&(e.nodeType||kt.svg(e))},str:function(e){return typeof e=="string"},fnc:function(e){return typeof e=="function"},und:function(e){return typeof e>"u"},hex:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},rgb:function(e){return/^rgb/.test(e)},hsl:function(e){return/^hsl/.test(e)},col:function(e){return kt.hex(e)||kt.rgb(e)||kt.hsl(e)},key:function(e){return!Kq.hasOwnProperty(e)&&!zk.hasOwnProperty(e)&&e!=="targets"&&e!=="keyframes"}};function Zq(e){var t=/\(([^)]+)\)/.exec(e);return t?t[1].split(",").map(function(r){return parseFloat(r)}):[]}function Jq(e,t){var r=Zq(e),i=gl(kt.und(r[0])?1:r[0],.1,100),n=gl(kt.und(r[1])?100:r[1],.1,100),a=gl(kt.und(r[2])?10:r[2],.1,100),s=gl(kt.und(r[3])?0:r[3],.1,100),o=Math.sqrt(n/i),l=a/(2*Math.sqrt(n*i)),u=l<1?o*Math.sqrt(1-l*l):0,h=1,c=l<1?(l*o+-s)/u:-s+o;function d(m){var p=t?t*m/1e3:m;return l<1?p=Math.exp(-p*l*o)*(h*Math.cos(u*p)+c*Math.sin(u*p)):p=(h+c*p)*Math.exp(-p*o),m===0||m===1?m:1-p}function f(){var m=JS.springs[e];if(m)return m;for(var p=1/6,g=0,v=0;;)if(g+=p,d(g)===1){if(v++,v>=16)break}else v=0;var y=g*p*1e3;return JS.springs[e]=y,y}return t?d:f}function mNe(e){return e===void 0&&(e=10),function(t){return Math.ceil(gl(t,1e-6,1)*e)*(1/e)}}var gNe=function(){var e=11,t=1/(e-1);function r(h,c){return 1-3*c+3*h}function i(h,c){return 3*c-6*h}function n(h){return 3*h}function a(h,c,d){return((r(c,d)*h+i(c,d))*h+n(c))*h}function s(h,c,d){return 3*r(c,d)*h*h+2*i(c,d)*h+n(c)}function o(h,c,d,f,m){var p,g,v=0;do g=c+(d-c)/2,p=a(g,f,m)-h,p>0?d=g:c=g;while(Math.abs(p)>1e-7&&++v<10);return g}function l(h,c,d,f){for(var m=0;m<4;++m){var p=s(c,d,f);if(p===0)return c;var g=a(c,d,f)-h;c-=g/p}return c}function u(h,c,d,f){if(!(0<=h&&h<=1&&0<=d&&d<=1))return;var m=new Float32Array(e);if(h!==c||d!==f)for(var p=0;p<e;++p)m[p]=a(p*t,h,d);function g(v){for(var y=0,x=1,b=e-1;x!==b&&m[x]<=v;++x)y+=t;--x;var _=(v-m[x])/(m[x+1]-m[x]),w=y+_*t,E=s(w,h,d);return E>=.001?l(v,w,h,d):E===0?w:o(v,y,y+t,h,d)}return function(v){return h===c&&d===f||v===0||v===1?v:a(g(v),c,f)}}return u}(),eX=function(){var e={linear:function(){return function(i){return i}}},t={Sine:function(){return function(i){return 1-Math.cos(i*Math.PI/2)}},Circ:function(){return function(i){return 1-Math.sqrt(1-i*i)}},Back:function(){return function(i){return i*i*(3*i-2)}},Bounce:function(){return function(i){for(var n,a=4;i<((n=Math.pow(2,--a))-1)/11;);return 1/Math.pow(4,3-a)-7.5625*Math.pow((n*3-2)/22-i,2)}},Elastic:function(i,n){i===void 0&&(i=1),n===void 0&&(n=.5);var a=gl(i,1,10),s=gl(n,.1,2);return function(o){return o===0||o===1?o:-a*Math.pow(2,10*(o-1))*Math.sin((o-1-s/(Math.PI*2)*Math.asin(1/a))*(Math.PI*2)/s)}}},r=["Quad","Cubic","Quart","Quint","Expo"];return r.forEach(function(i,n){t[i]=function(){return function(a){return Math.pow(a,n+2)}}}),Object.keys(t).forEach(function(i){var n=t[i];e["easeIn"+i]=n,e["easeOut"+i]=function(a,s){return function(o){return 1-n(a,s)(1-o)}},e["easeInOut"+i]=function(a,s){return function(o){return o<.5?n(a,s)(o*2)/2:1-n(a,s)(o*-2+2)/2}}}),e}();function Fk(e,t){if(kt.fnc(e))return e;var r=e.split("(")[0],i=eX[r],n=Zq(e);switch(r){case"spring":return Jq(e,t);case"cubicBezier":return tT(gNe,n);case"steps":return tT(mNe,n);default:return tT(i,n)}}function tX(e){try{var t=document.querySelectorAll(e);return t}catch{return}}function $E(e,t){for(var r=e.length,i=arguments.length>=2?arguments[1]:void 0,n=[],a=0;a<r;a++)if(a in e){var s=e[a];t.call(i,s,a,e)&&n.push(s)}return n}function YE(e){return e.reduce(function(t,r){return t.concat(kt.arr(r)?YE(r):r)},[])}function U6(e){return kt.arr(e)?e:(kt.str(e)&&(e=tX(e)||e),e instanceof NodeList||e instanceof HTMLCollection?[].slice.call(e):[e])}function Uk(e,t){return e.some(function(r){return r===t})}function jk(e){var t={};for(var r in e)t[r]=e[r];return t}function z3(e,t){var r=jk(e);for(var i in e)r[i]=t.hasOwnProperty(i)?t[i]:e[i];return r}function qE(e,t){var r=jk(e);for(var i in t)r[i]=kt.und(e[i])?t[i]:e[i];return r}function vNe(e){var t=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(e);return t?"rgba("+t[1]+",1)":e}function yNe(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,r=e.replace(t,function(o,l,u,h){return l+l+u+u+h+h}),i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(r),n=parseInt(i[1],16),a=parseInt(i[2],16),s=parseInt(i[3],16);return"rgba("+n+","+a+","+s+",1)"}function xNe(e){var t=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(e),r=parseInt(t[1],10)/360,i=parseInt(t[2],10)/100,n=parseInt(t[3],10)/100,a=t[4]||1;function s(d,f,m){return m<0&&(m+=1),m>1&&(m-=1),m<1/6?d+(f-d)*6*m:m<1/2?f:m<2/3?d+(f-d)*(2/3-m)*6:d}var o,l,u;if(i==0)o=l=u=n;else{var h=n<.5?n*(1+i):n+i-n*i,c=2*n-h;o=s(c,h,r+1/3),l=s(c,h,r),u=s(c,h,r-1/3)}return"rgba("+o*255+","+l*255+","+u*255+","+a+")"}function bNe(e){if(kt.rgb(e))return vNe(e);if(kt.hex(e))return yNe(e);if(kt.hsl(e))return xNe(e)}function xc(e){var t=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(e);if(t)return t[1]}function wNe(e){if(Cy(e,"translate")||e==="perspective")return"px";if(Cy(e,"rotate")||Cy(e,"skew"))return"deg"}function F3(e,t){return kt.fnc(e)?e(t.target,t.id,t.total):e}function du(e,t){return e.getAttribute(t)}function Vk(e,t,r){var i=xc(t);if(Uk([r,"deg","rad","turn"],i))return t;var n=JS.CSS[t+r];if(!kt.und(n))return n;var a=100,s=document.createElement(e.tagName),o=e.parentNode&&e.parentNode!==document?e.parentNode:document.body;o.appendChild(s),s.style.position="absolute",s.style.width=a+r;var l=a/s.offsetWidth;o.removeChild(s);var u=l*parseFloat(t);return JS.CSS[t+r]=u,u}function rX(e,t,r){if(t in e.style){var i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),n=e.style[t]||getComputedStyle(e).getPropertyValue(i)||"0";return r?Vk(e,n,r):n}}function Hk(e,t){if(kt.dom(e)&&!kt.inp(e)&&(du(e,t)||kt.svg(e)&&e[t]))return"attribute";if(kt.dom(e)&&Uk(pNe,t))return"transform";if(kt.dom(e)&&t!=="transform"&&rX(e,t))return"css";if(e[t]!=null)return"object"}function iX(e){if(kt.dom(e)){for(var t=e.style.transform||"",r=/(\w+)\(([^)]*)\)/g,i=new Map,n;n=r.exec(t);)i.set(n[1],n[2]);return i}}function _Ne(e,t,r,i){var n=Cy(t,"scale")?1:0+wNe(t),a=iX(e).get(t)||n;return r&&(r.transforms.list.set(t,a),r.transforms.last=t),i?Vk(e,a,i):a}function Gk(e,t,r,i){switch(Hk(e,t)){case"transform":return _Ne(e,t,i,r);case"css":return rX(e,t,r);case"attribute":return du(e,t);default:return e[t]||0}}function Wk(e,t){var r=/^(\*=|\+=|-=)/.exec(e);if(!r)return e;var i=xc(e)||0,n=parseFloat(t),a=parseFloat(e.replace(r[0],""));switch(r[0][0]){case"+":return n+a+i;case"-":return n-a+i;case"*":return n*a+i}}function nX(e,t){if(kt.col(e))return bNe(e);if(/\s/g.test(e))return e;var r=xc(e),i=r?e.substr(0,e.length-r.length):e;return t?i+t:i}function $k(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function SNe(e){return Math.PI*2*du(e,"r")}function ENe(e){return du(e,"width")*2+du(e,"height")*2}function MNe(e){return $k({x:du(e,"x1"),y:du(e,"y1")},{x:du(e,"x2"),y:du(e,"y2")})}function aX(e){for(var t=e.points,r=0,i,n=0;n<t.numberOfItems;n++){var a=t.getItem(n);n>0&&(r+=$k(i,a)),i=a}return r}function CNe(e){var t=e.points;return aX(e)+$k(t.getItem(t.numberOfItems-1),t.getItem(0))}function sX(e){if(e.getTotalLength)return e.getTotalLength();switch(e.tagName.toLowerCase()){case"circle":return SNe(e);case"rect":return ENe(e);case"line":return MNe(e);case"polyline":return aX(e);case"polygon":return CNe(e)}}function ANe(e){var t=sX(e);return e.setAttribute("stroke-dasharray",t),t}function TNe(e){for(var t=e.parentNode;kt.svg(t)&&kt.svg(t.parentNode);)t=t.parentNode;return t}function oX(e,t){var r=t||{},i=r.el||TNe(e),n=i.getBoundingClientRect(),a=du(i,"viewBox"),s=n.width,o=n.height,l=r.viewBox||(a?a.split(" "):[0,0,s,o]);return{el:i,viewBox:l,x:l[0]/1,y:l[1]/1,w:s/l[2],h:o/l[3]}}function PNe(e,t){var r=kt.str(e)?tX(e)[0]:e,i=t||100;return function(n){return{property:n,el:r,svg:oX(r),totalLength:sX(r)*(i/100)}}}function DNe(e,t){function r(o){o===void 0&&(o=0);var l=t+o>=1?t+o:0;return e.el.getPointAtLength(l)}var i=oX(e.el,e.svg),n=r(),a=r(-1),s=r(1);switch(e.property){case"x":return(n.x-i.x)*i.w;case"y":return(n.y-i.y)*i.h;case"angle":return Math.atan2(s.y-a.y,s.x-a.x)*180/Math.PI}}function j6(e,t){var r=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,i=nX(kt.pth(e)?e.totalLength:e,t)+"";return{original:i,numbers:i.match(r)?i.match(r).map(Number):[0],strings:kt.str(e)||t?i.split(r):[]}}function lX(e){var t=e?YE(kt.arr(e)?e.map(U6):U6(e)):[];return $E(t,function(r,i,n){return n.indexOf(r)===i})}function uX(e){var t=lX(e);return t.map(function(r,i){return{target:r,id:i,total:t.length,transforms:{list:iX(r)}}})}function ONe(e,t){var r=jk(t);if(/^spring/.test(r.easing)&&(r.duration=Jq(r.easing)),kt.arr(e)){var i=e.length,n=i===2&&!kt.obj(e[0]);n?e={value:e}:kt.fnc(t.duration)||(r.duration=t.duration/i)}var a=kt.arr(e)?e:[e];return a.map(function(s,o){var l=kt.obj(s)&&!kt.pth(s)?s:{value:s};return kt.und(l.delay)&&(l.delay=o?0:t.delay),kt.und(l.endDelay)&&(l.endDelay=o===a.length-1?t.endDelay:0),l}).map(function(s){return qE(s,r)})}function INe(e){for(var t=$E(YE(e.map(function(a){return Object.keys(a)})),function(a){return kt.key(a)}).reduce(function(a,s){return a.indexOf(s)<0&&a.push(s),a},[]),r={},i=function(a){var s=t[a];r[s]=e.map(function(o){var l={};for(var u in o)kt.key(u)?u==s&&(l.value=o[u]):l[u]=o[u];return l})},n=0;n<t.length;n++)i(n);return r}function RNe(e,t){var r=[],i=t.keyframes;i&&(t=qE(INe(i),t));for(var n in t)kt.key(n)&&r.push({name:n,tweens:ONe(t[n],e)});return r}function kNe(e,t){var r={};for(var i in e){var n=F3(e[i],t);kt.arr(n)&&(n=n.map(function(a){return F3(a,t)}),n.length===1&&(n=n[0])),r[i]=n}return r.duration=parseFloat(r.duration),r.delay=parseFloat(r.delay),r}function LNe(e,t){var r;return e.tweens.map(function(i){var n=kNe(i,t),a=n.value,s=kt.arr(a)?a[1]:a,o=xc(s),l=Gk(t.target,e.name,o,t),u=r?r.to.original:l,h=kt.arr(a)?a[0]:u,c=xc(h)||xc(l),d=o||c;return kt.und(s)&&(s=u),n.from=j6(h,d),n.to=j6(Wk(s,h),d),n.start=r?r.end:0,n.end=n.start+n.delay+n.duration+n.endDelay,n.easing=Fk(n.easing,n.duration),n.isPath=kt.pth(a),n.isColor=kt.col(n.from.original),n.isColor&&(n.round=1),r=n,n})}var cX={css:function(e,t,r){return e.style[t]=r},attribute:function(e,t,r){return e.setAttribute(t,r)},object:function(e,t,r){return e[t]=r},transform:function(e,t,r,i,n){if(i.list.set(t,r),t===i.last||n){var a="";i.list.forEach(function(s,o){a+=o+"("+s+") "}),e.style.transform=a}}};function hX(e,t){var r=uX(e);r.forEach(function(i){for(var n in t){var a=F3(t[n],i),s=i.target,o=xc(a),l=Gk(s,n,o,i),u=o||xc(l),h=Wk(nX(a,u),l),c=Hk(s,n);cX[c](s,n,h,i.transforms,!0)}})}function BNe(e,t){var r=Hk(e.target,t.name);if(r){var i=LNe(t,e),n=i[i.length-1];return{type:r,property:t.name,animatable:e,tweens:i,duration:n.end,delay:i[0].delay,endDelay:n.endDelay}}}function NNe(e,t){return $E(YE(e.map(function(r){return t.map(function(i){return BNe(r,i)})})),function(r){return!kt.und(r)})}function dX(e,t){var r=e.length,i=function(a){return a.timelineOffset?a.timelineOffset:0},n={};return n.duration=r?Math.max.apply(Math,e.map(function(a){let s=a.startOnceDelay??0,o=a.pingPongDelayCorrection??0,l=a.pingPongEndDelayCorrection??0;return i(a)+s+o+l+a.duration*(a.loop??1)})):t.duration,n.delay=r?Math.min.apply(Math,e.map(function(a){let s=a.startOnceDelay??0,o=a.pingPongDelayCorrection??0;return i(a)+s+o+a.delay})):t.delay,n.endDelay=r?n.duration-Math.max.apply(Math,e.map(function(a){let s=a.startOnceDelay??0,o=a.pingPongDelayCorrection??0,l=a.pingPongEndDelayCorrection??0;return i(a)+s+o+a.duration*(a.loop??1)-a.endDelay-l})):t.endDelay,n}var V6=0;function zNe(e){var t=z3(Kq,e),r=z3(zk,e),i=RNe(r,e),n=uX(e.targets),a=NNe(n,i),s=dX(a,r),o=V6;return V6++,qE(t,{id:o,children:[],animatables:n,animations:a,duration:s.duration,delay:s.delay,endDelay:s.endDelay,startOnceDelay:r.startOnceDelay,pingPongDelayCorrection:r.pingPongDelayCorrection,pingPongEndDelayCorrection:r.pingPongEndDelayCorrection})}var Bo=[],H6=[],Qw,FNe=function(){function e(){Qw=requestAnimationFrame(t)}function t(r){var i=Bo.length;if(i){for(var n=0;n<i;){var a=Bo[n];a.paused?(Bo.splice(n,1),i-=1):(a.tick(r),n++)}e()}else Qw=cancelAnimationFrame(Qw)}return e}();function UNe(e){document.hidden?(Bo.forEach(function(t){return t.pause(e.timeStamp)}),H6=Bo.slice(0),Xi.running=Bo=[]):H6.forEach(function(t){return t.play(e.timeStamp)})}typeof document<"u"&&document.addEventListener("visibilitychange",UNe);function Xi(e){e===void 0&&(e={});var t=0,r=0,i=0,n,a,s=0,o=null;function l(w){var E=window.Promise&&new Promise(function(S){return o=S});return w.finished=E,E}var u=zNe(e);l(u);function h(){var w=u.direction;w!=="alternate"&&(u.direction=w!=="normal"?"normal":"reverse"),u.reversed=!u.reversed,a.forEach(function(E){(E.loop===1||E.loop%2===0)&&(E.reversed=u.reversed)})}function c(){u.direction="normal",u.reversed=!1,a.forEach(function(w){return w.reversed=!1})}function d(w){return u.reversed?u.duration-w:w}function f(){t=0,r=d(u.currentTime)*(1/Xi.speed)}function m(w,E,S=!1){E&&(u.reversed?E.seek(E.duration*E.loop-(w-E.timelineOffset-E.pingPongDelayCorrection),S):E.seek(w-E.timelineOffset-E.startOnceDelay-E.pingPongDelayCorrection,S))}function p(w,E=!1){if(u.reversed)for(var S=s;S--;)m(w,a[S],E);else for(var C=0;C<s;C++)m(w,a[C],E)}function g(w){var le,ae,Z,he,ge,xe,ye,Ne,Re,qe;var E=0,S=u.animations,C=S.length;for(u.direction!=="alternate"&&((le=u.parent)==null?void 0:le.direction)==="alternate"?((ae=u.parent)==null?void 0:ae.rewind)===!1&&u.reversePlayback===!0&&u.rewind===!1&&((Z=u.parent)!=null&&Z.reversed&&u.direction==="alternate"?w=u.duration-u.delay+u.endDelay-w:w=u.duration+u.delay-u.endDelay-w):b(!1,(he=u.parent)==null?void 0:he.rewind,u.rewind,(ge=u.parent)==null?void 0:ge.reversePlayback,u.reversePlayback)&&((xe=u.parent)!=null&&xe.reversed&&u.direction==="alternate"?w=u.duration-u.delay+u.endDelay-w:w=u.duration+u.delay-u.endDelay-w);E<C;){var M=S[E],P=M.animatable,I=M.tweens,k=I.length-1,L=I[k];k&&(L=$E(I,function(ke){return w<ke.end})[0]||L);let se;(ye=u.parent)!=null&&ye.reversed&&u.direction==="alternate"?se=gl(w-L.start-L.endDelay,0,L.duration)/L.duration:se=gl(w-L.start-L.delay,0,L.duration)/L.duration;for(var O=isNaN(se)?1:L.easing(se),F=L.to.strings,z=L.round,B=[],V=L.to.numbers.length,R=void 0,H=0;H<V;H++){var W=void 0;let ke,Be;u.direction!=="alternate"?((Ne=u.parent)==null?void 0:Ne.rewind)===!1&&u.reversePlayback===!0&&u.rewind===!1?(ke=L.to.numbers[H],Be=L.from.numbers[H]||0):(Be=L.to.numbers[H],ke=L.from.numbers[H]||0):b(!0,(Re=u.parent)==null?void 0:Re.rewind,u.rewind,(qe=u.parent)==null?void 0:qe.reversePlayback,u.reversePlayback)?(ke=L.to.numbers[H],Be=L.from.numbers[H]||0):(Be=L.to.numbers[H],ke=L.from.numbers[H]||0),L.isPath?W=DNe(L.value,O*Be):W=ke+O*(Be-ke),z&&(L.isColor&&H>2||(W=Math.round(W*z)/z)),B.push(W)}var te=F.length;if(!te)R=B[0];else{R=F[0];for(var G=0;G<te;G++){F[G];var ie=F[G+1],q=B[G];isNaN(q)||(ie?R+=q+ie:R+=q+" ")}}cX[M.type](P.target,M.property,R,P.transforms),M.currentValue=R,E++}}function v(w){u[w]&&!u.passThrough&&u[w](u)}function y(){u.remaining&&u.remaining!==!0&&u.remaining--}let x={0:!1,1:!0,2:!1,3:!0,4:!1,5:!1,6:!1,7:!1,8:!1,9:!0,10:!0,11:!1,12:!1,13:!1,14:!0,15:!0,16:!1,17:!0,18:!0,19:!1,20:!1,21:!1,22:!0,23:!0,24:!1,25:!0,26:!1,27:!0,28:!1,29:!1,30:!1,31:!1};function b(w,E,S,C,M){return x[w<<4|E<<3|S<<2|C<<1|M]}function _(w,E=!1){var I;var S=u.duration;let C=u.delay,M=S-u.endDelay;(I=u.parent)!=null&&I.reversed&&u.direction==="alternate"&&(C=u.endDelay,M=S-u.delay);var P=d(w);if(u.progress=gl(P/S*100,0,100),E||(u.reversePlayback=P<u.currentTime),s&&p(P,E),!u.began&&u.currentTime>=0&&(u.began=!0,v("begin")),!u.loopBegan&&u.currentTime>0&&(u.loopBegan=!0,v("loopBegin")),(u.reversed||P>=0)&&P<=C&&u.currentTime!==0&&(g(0),v("change")),(P>=M&&u.currentTime!==S+u.pingPongDelayCorrection||!S)&&(g(S),v("change")),P>C&&P<M?(u.changeBegan||(u.changeBegan=!0,u.changeCompleted=!1,v("changeBegin")),g(P),v("change")):u.changeBegan?(u.changeCompleted=!0,u.changeBegan=!1,v("change"),s&&v("timelineChangeComplete")):u.began&&P>M&&v("changeComplete"),u.currentTime=gl(P,0,S+u.pingPongDelayCorrection),u.began&&v("update"),w>=S)if(y(),!u.remaining)u.paused=!0,u.completed||(u.completed=!0,v("loopComplete"),v("complete"),!u.passThrough&&"Promise"in window&&(o(),l(u)));else{s?t+=u.duration/Xi.speed:t+=u.duration;for(let k of a)k.setStartTime(0),k.remaining=k.loop;v("loopComplete"),u.loopBegan=!1,u.direction==="alternate"?h():s&&c()}}return u.reset=function(){var w=u.direction;u.passThrough=!1,u.currentTime=0,u.progress=0,u.paused=!0,u.began=!1,u.loopBegan=!1,u.changeBegan=!1,u.completed=!1,u.changeCompleted=!1,u.reversePlayback=!1,u.reversed=w==="reverse",u.remaining=u.loop,a=u.children,s=a.length;for(var E=s;E--;)u.children[E].reset();(u.reversed&&u.loop!==!0||w==="alternate"&&u.loop===1)&&u.remaining++,g(u.reversed?u.duration:0)},u.setStartTime=function(w){t=w},u.set=function(w,E){return hX(w,E),u},u.tick=function(w){i=w,t||(t=i),_((i+(r-t))*Xi.speed)},u.seek=function(w,E=!1){_(w-t,E)},u.pause=function(w){u.paused=!0,s&&(n=w??performance.now())},u.play=function(w){!u.paused||(u.completed&&u.reset(),u.paused=!1,Bo.push(u),s&&n!==void 0&&(t+=(w??performance.now())-n),Qw||FNe())},u.reverse=function(){h(),u.completed=!u.reversed,f()},u.restart=function(){u.reset(),u.play()},u.reset(),u.autoplay&&u.play(),u}function G6(e,t){for(var r=t.length;r--;)Uk(e,t[r].animatable.target)&&t.splice(r,1)}function jNe(e){for(var t=lX(e),r=Bo.length;r--;){var i=Bo[r],n=i.animations,a=i.children;G6(t,n);for(var s=a.length;s--;){var o=a[s],l=o.animations;G6(t,l),!l.length&&!o.children.length&&a.splice(s,1)}!n.length&&!a.length&&i.pause()}}function VNe(e,t){t===void 0&&(t={});var r=t.direction||"normal",i=t.easing?Fk(t.easing):null,n=t.grid,a=t.axis,s=t.from||0,o=s==="first",l=s==="center",u=s==="last",h=kt.arr(e),c=parseFloat(h?e[0]:e),d=h?parseFloat(e[1]):0,f=xc(h?e[1]:e)||0,m=t.start||0+(h?c:0),p=[],g=0;return function(v,y,x){if(o&&(s=0),l&&(s=(x-1)/2),u&&(s=x-1),!p.length){for(var b=0;b<x;b++){if(!n)p.push(Math.abs(s-b));else{var _=l?(n[0]-1)/2:s%n[0],w=l?(n[1]-1)/2:Math.floor(s/n[0]),E=b%n[0],S=Math.floor(b/n[0]),C=_-E,M=w-S,P=Math.sqrt(C*C+M*M);a==="x"&&(P=-C),a==="y"&&(P=-M),p.push(P)}g=Math.max.apply(Math,p)}i&&(p=p.map(function(k){return i(k/g)*g})),r==="reverse"&&(p=p.map(function(k){return a?k<0?k*-1:-k:Math.abs(g-k)}))}var I=h?(d-c)/g:c;return m+I*(Math.round(p[y]*100)/100)+f}}function HNe(e){e===void 0&&(e={});var t=Xi(e);return t.duration=0,t.add=function(r,i){var n=Bo.indexOf(t),a=t.children;n>-1&&Bo.splice(n,1);function s(d){d.passThrough=!0}for(var o=0;o<a.length;o++)s(a[o]);var l=qE(r,z3(zk,e));l.targets=l.targets||e.targets;var u=t.duration;l.autoplay=!1,l.timelineOffset=kt.und(i)?u:Wk(i,u),s(t);var h=Xi(l);s(h),a.push(h),h.parent=t;var c=dX(a,e);return t.delay=c.delay,t.endDelay=c.endDelay,t.duration=c.duration,h.loop===!0&&(t.duration=1/0),t.seek(0),t.reset(),t.autoplay&&t.play(),t},t}Xi.version="3.2.0";Xi.speed=1;Xi.running=Bo;Xi.remove=jNe;Xi.get=Gk;Xi.set=hX;Xi.convertPx=Vk;Xi.path=PNe;Xi.setDashoffset=ANe;Xi.stagger=VNe;Xi.timeline=HNe;Xi.easing=Fk;Xi.penner=eX;Xi.random=function(e,t){return Math.floor(Math.random()*(t-e+1))+e};var fX=Xi,W6=new T,$6=new T,Y6=new Gt;function GNe(e,t,r,i){if(i===0)return r.copy(e);if(i===1)return r.copy(t);let n=e.w*t.w+e.x*t.x+e.y*t.y+e.z*t.z;if(n>=1)return r.copy(e);let a=1-n*n;if(a<=Number.EPSILON){let h=1-i;return r.w=h*e.w+i*t.w,r.x=h*e.x+i*t.x,r.y=h*e.y+i*t.y,r.z=h*e.z+i*t.z,r.normalize(),r}let s=Math.sqrt(a),o=Math.atan2(s,n),l=Math.sin((1-i)*o)/s,u=Math.sin(i*o)/s;return r.w=e.w*l+t.w*u,r.x=e.x*l+t.x*u,r.y=e.y*l+t.y*u,r.z=e.z*l+t.z*u,r}function Gf(e,t,r,i,n){let a=r[e]?r[e]:void 0,s=i[e];if(s==null)return;let o=a??t[e],l=s;if(o!==l)return{update:u=>{let h=bt.lerp(o,l,u);n?t[e]=Math.trunc(h):t[e]=h},start:()=>{t[e]=o},end:()=>{t[e]=l}}}function pX(e,t,r,i,n){let a=r[e]?r[e]:void 0,s=i[e];if(!s)return;let o=t[e],l=[...a??o],u=[...s];if(!(l.length!==u.length||C$(l,u)))return{update:h=>{l.forEach((c,d)=>{let f=bt.lerp(c,u[d],h);t[e][d]=n?Math.trunc(f):f})},start:()=>{Object.assign(t[e],l)},end:()=>{Object.assign(t[e],u)}}}function q6(e,t,r,i){let n=r[e]?r[e]:void 0,a=i[e];if(!a)return;let s=t[e],o=n?new T().fromArray(n):s.clone(),l=new T().fromArray(a);if(!o.equals(l))return{update:u=>{s.lerpVectors(o,l,u)},start:()=>{s.copy(o)},end:()=>{s.copy(l)}}}function WNe(e,t,r,i){let n=r[e]?r[e]:void 0,a=i[e];if(!a)return;let s=t[e],o=n?new ze().fromArray(n):s.clone(),l=new T,u=new Gt,h=new T;o.decompose(l,u,h);let c=new ze().fromArray(a),d=new T,f=new Gt,m=new T;if(c.decompose(d,f,m),!o.equals(c))return{update:p=>{Y6.slerpQuaternions(u,f,p),W6.lerpVectors(l,d,p),$6.lerpVectors(h,m,p),s.compose(W6,Y6,$6)},start:()=>{s.compose(l,u,h)},end:()=>{s.compose(d,f,m)}}}function $Ne(e,t,r,i,n){let a=r[e]?r[e]:void 0,s=i[e];if(!s)return;let o=t[e],l=a?typeof a=="string"?n.getColor(a).clone():new At().setRGB(a.r,a.g,a.b):o.clone(),u=typeof s=="string"?n.getColor(s).clone():new At().setRGB(s.r,s.g,s.b);if(l.equals(u))return;let h=o.clone();return t[e]=h,{update:c=>{h.lerpColors(l,u,c)},start:()=>{h.copy(l)},end:()=>{h.copy(u)}}}function vd(e,t,r,i){if(typeof t[e]=="number")return Gf(e,t,r??{},i);if(Array.isArray(t[e]))return pX(e,t,r??{},i)}function YNe(e,t,r){var s,o,l,u;let i=[],n=e.cameraType==="OrthographicCamera"?(s=t.orthographic)==null?void 0:s.zoom:(o=t.perspective)==null?void 0:o.zoom,a=e.cameraType==="OrthographicCamera"?(l=r.orthographic)==null?void 0:l.zoom:(u=r.perspective)==null?void 0:u.zoom;if(a!==void 0){let h=n??e.zoom,c=a;h!==c&&i.push({update:d=>{e.zoom=bt.lerp(h,c,d),e.updateProjectionMatrix()},start:()=>{e.zoom=h,e.updateProjectionMatrix()},end:()=>{e.zoom=c,e.updateProjectionMatrix()}})}if(r.targetOffset!==void 0){let h=Gf("targetOffset",e,t,r);h&&i.push(h)}return i}function qNe(e,t,r,i){if(r.scaleBaked===void 0)return;let n=t.scaleBaked??e.data.geometry.scaleBaked,a=r.scaleBaked;if(_f.isEqual(n,a))return;let s=[];return s.push({update:o=>{e.updateGeometryInteractions({scaleBaked:[bt.lerp(n[0],a[0],o),bt.lerp(n[1],a[1],o),bt.lerp(n[2],a[2],o)]},i),e.invalidateDownstreamBooleanData()},start:()=>{e.updateGeometryInteractions({scaleBaked:n},i),e.invalidateDownstreamBooleanData()},end:()=>{e.updateGeometryInteractions({scaleBaked:a},i),e.invalidateDownstreamBooleanData()}}),s}function XNe(e,t,r){if(!r.extrusion)return;let i=e.extrusion,n=t.extrusion??{},a=r.extrusion,s=[];return uY.forEach(o=>{let l=vd(o,i,n,a);l&&s.push(l)}),s}function QNe(e,t,r,i){let n=[];if(!("geometry"in r))return n;let a=e.geometry.userData.parameters,s="geometry"in t?t.geometry:{},o=r.geometry;if(e instanceof E1){let l=qNe(e,s,o,i);l&&n.push(...l)}else{let l={};if(Object.assign(l,vc(a,GF)),GF.forEach(u=>{let h=vd(u,l,s,o);h&&n.push(h)}),e instanceof Ik){Object.assign(l,{extrusion:{...a.extrusion}});let u=XNe(l,s,o);u&&n.push(...u)}n.length&&n.push({update:u=>{e.updateGeometryInteractions(l,i),e.updateGeometryGroupsIfNeeded()},start:u=>{e.updateGeometryInteractions(l,i),e.updateGeometryGroupsIfNeeded()},end:u=>{e.updateGeometryInteractions(l,i),e.updateGeometryGroupsIfNeeded()}})}return n}function KNe(e,t,r,i){let n=[];if(r.intensity!==void 0){let a=Gf("intensity",e,t,r);a&&n.push(a)}if(r.color!==void 0){let a=$Ne("color",e,t,r,i);a&&n.push(a)}return n}function ZNe(e,t,r,i){let n=[];if(Array.isArray(e.material)){if(!("materials"in r&&r.materials))return n;let a="materials"in t&&t.materials?t.materials:[],s=r.materials;e.material.forEach((o,l)=>{if(!s[l])return;let u=a[l]??{},h=s[l];typeof u=="string"||typeof h=="string"||n.push(...X6(o,u,h,i))})}else{if(!("material"in r&&r.material))return n;let a="material"in t&&t.material?t.material:{},s=r.material;if(typeof a=="string"||typeof s=="string")return n;n.push(...X6(e.material,a,s,i))}return n}function X6(e,t,r,i){var s;let n=[],a=XS(r,i)||!!t.layers&&XS(t,i);n.push(o4e(e,a));for(let o of e.layers){let l=(s=t.layers)==null?void 0:s.data(o.uuid),u=r.layers.data(o.uuid);if(!u||!(o.visible??!0)||!(u.visible??!0))continue;let h=o.getNames().filter(c=>!sY.some(d=>c.includes(d)));for(let c of h)try{let d=o.getValue(c),f;if(c==="colors")f=a4e(o,l,u,c);else if(Array.isArray(d))c==="steps"&&(f=n4e(o,l,u,c));else if(typeof d=="number")f=JNe(o,l,u,c);else{if(typeof d=="boolean")continue;d instanceof re?f=e4e(o,l,u,c):d instanceof T?f=t4e(o,l,u,c):d instanceof As?f=i4e(o,l,u,c,i):d instanceof At?f=r4e(o,l,u,c,i):"isTexture"in d&&(f=s4e(o,l,u,c))}f&&(Array.isArray(f)?n.push(...f):n.push(f))}catch(d){console.error(`lerpMaterial: unexpected material layer for ${c}`,d)}}return n}function JNe(e,t,r,i){if(!e.hasValue(i)||!(i in r))return;let n=t?t[i]:e.getValue(i),a=r[i];if(n!==a)return{update:s=>{e.setValue(i,bt.lerp(n,a,s))},start:()=>{e.setValue(i,n)},end:()=>{e.setValue(i,a)}}}function e4e(e,t,r,i){if(!e.hasValue(i)||!(i in r))return;let n=e.getValue(i),a=t?new re().fromArray(t[i]):n.clone(),s=new re().fromArray(r[i]);if(!a.equals(s))return{update:o=>{n.lerpVectors(a,s,o)},start:()=>{n.copy(a)},end:()=>{n.copy(s)}}}function t4e(e,t,r,i){if(!e.hasValue(i)||!(i in r))return;let n=e.getValue(i),a=t?new T().fromArray(t[i]):n.clone(),s=new T().fromArray(r[i]);if(!a.equals(s))return{update:o=>{n.lerpVectors(a,s,o)},start:()=>{n.copy(a)},end:()=>{n.copy(s)}}}function r4e(e,t,r,i,n){if(!e.hasValue(i)||!(i in r))return;let a=t?t[i]:void 0,s=r[i],o=e.getValue(i),l=a?typeof a=="string"?n.getColor(a).clone():new At().setRGB(a.r,a.g,a.b):o.clone(),u=typeof s=="string"?n.getColor(s).clone():new At().setRGB(s.r,s.g,s.b);if(l.equals(u))return;let h=o.clone();return{update:c=>{e.getValue(i)!==h&&e.setValue(i,h),h.lerpColors(l,u,c)},start:()=>{h.copy(l)},end:()=>{h.copy(u)}}}function i4e(e,t,r,i,n){if(!e.hasValue(i)||!(i in r))return;let a=t?t[i]:void 0,s=r[i],o=e.getValue(i),l=a?typeof a=="string"?n.getColor(a).clone():new At().setRGB(a.r,a.g,a.b):o.clone(),u=typeof s=="string"?n.getColor(s).clone():new As(s.r,s.g,s.b,s.a);if(l.equals(u))return;let h=o.clone();return{update:c=>{e.getValue(i)!==h&&e.setValue(i,h),h.lerpColors(l,u,c)},start:()=>{h.copy(l)},end:()=>{h.copy(u)}}}function n4e(e,t,r,i="steps"){if(!e.hasValue(i)||!(i in r))return;let n=[],a=e.getValue(i),s=t?t[i]:a,o=r[i];for(let l=0;l<a.length;++l){let u=s[l],h=o[l];u!==h&&n.push({update:c=>{a[l]=bt.lerp(u,h,c)},start:()=>{a[l]=u},end:()=>{a[l]=h}})}return n.length?n:void 0}function a4e(e,t,r,i="colors"){if(!e.hasValue(i)||!(i in r))return;let n=[],a=e.getValue(i),s=t?t[i]:a.map(l=>l.toArray()),o=r[i];for(let l=0;l<a.length;++l){let u=[...s[l]],h=[...o[l]];IS.isEqual(u,h)||n.push({update:c=>{a[l].fromArray(IS.lerp(u,h,c))},start:()=>{a[l].fromArray(u)},end:()=>{a[l].fromArray(h)}})}return n.length?n:void 0}function s4e(e,t,r,i="texture"){if(!e.hasValue(i)||!(i in r))return;let n=e.getNode("mat");if(!n)return;let a=t?t[i]:n,s=r[i],o=[...a.repeat],l=[...a.offset],u=[...s.repeat],h=[...s.offset];if(!Lm.isEqual(o,u)||!Lm.isEqual(l,h))return{update:c=>{n.repeat=Lm.lerp(o,u,c),n.offset=Lm.lerp(l,h,c),n.updateMatrix()},start:()=>{n.repeat=[...o],n.offset=[...l],n.updateMatrix()},end:()=>{n.repeat=[...u],n.offset=[...h],n.updateMatrix()}}}function o4e(e,t){return{update:()=>{e.transparent=t}}}var rT=new T,Q6=new Un;function l4e(e,t,r,i){let n=[],a,s,o,l,u,h,c={slide:(t.pathSnapping??e.updatedPathSnapping??e.dataPatched.pathSnapping).slide,offset:(t.pathSnapping??e.updatedPathSnapping??e.dataPatched.pathSnapping).offset};if(u=Gf("slide",c,t.pathSnapping??e.updatedPathSnapping??e.dataPatched.pathSnapping,r.pathSnapping??e.dataPatched.pathSnapping),u&&n.push(u),h=Gf("offset",c,t.pathSnapping??e.updatedPathSnapping??e.dataPatched.pathSnapping,r.pathSnapping??e.dataPatched.pathSnapping),h&&n.push(h),!u&&!h&&(a=q6("position",e,t,r),a&&n.push(a),s=q6("scale",e,t,r),s&&n.push(s),o=u4e(e,t,r,i),o&&n.push(o),l=WNe("hiddenMatrix",e,t,r),l&&n.push(l)),a||s||o||l||u||h){let d=()=>{var f;e.updateMatrix(),e.hasNonUniformScale&&(e.updateMatrixWorld(),e.updateMatrixWorldSVD()),(f=e.parent)!=null&&f.matrixWorldFusedFalse&&(e.matrixWorld.multiplyMatrices(e.parent.matrixWorldFusedFalse,e.matrix),e.matrixWorldNeedsUpdate=!1),cl(e)&&lu(e.parent)&&e.invalidateDownstreamBooleanData(!0),e.updatePathSnapping(Object.assign({},t.pathSnapping,c))};n.push({update:d,start:d,end:d})}return n}function u4e(e,t,r,i){var u;let n=t!=null&&t.rotation?t.rotation.map(h=>h*bt.DEG2RAD):void 0,a=(u=r.rotation)==null?void 0:u.map(h=>h*bt.DEG2RAD);if(!a)return;let s=n?new T().fromArray(n):new T().setFromEuler(e.rotation),o=new T().fromArray(a);if(s.equals(o))return;let l=rT.subVectors(o,s);if(i&&l.toArray().every(h=>Math.abs(h)<2*Math.PI)){let h=new Gt().setFromEuler(Q6.setFromVector3(s)),c=new Gt().setFromEuler(Q6.setFromVector3(o));return{update:d=>{GNe(h,c,e.quaternion,d)},start:()=>{e.rotation.setFromVector3(s)},end:()=>{e.rotation.setFromVector3(o)}}}else return{update:h=>{rT.lerpVectors(s,o,h),e.rotation.setFromVector3(rT)},start:()=>{e.rotation.setFromVector3(s)},end:()=>{e.rotation.setFromVector3(o)}}}function c4e(e,t,r){let i=[];if(!("cloner"in r)||!e.cloner)return i;let n=e.cloner,a="cloner"in t?t.cloner:{},s=r.cloner;eY.forEach(d=>{let f;d==="count"?f=Gf("count",n.parameters,a,s,!0):f=vd(d,n.parameters,a??{},s),f&&i.push(f)});let o=h4e(n,a,s);o!=null&&o.length&&i.push(...o);let l=d4e(n,a,s);l!=null&&l.length&&i.push(...l);let u=f4e(n,a,s);u!=null&&u.length&&i.push(...u);let h=p4e(n,a,s);h!=null&&h.length&&i.push(...h);let c=m4e(n,a,s);return c!=null&&c.length&&i.push(...c),i.length&&i.push({update:()=>{n.update()}}),i}function h4e(e,t,r){if(e.parameters.type!=="radial")return;let i=t.radial,n=r.radial;if(!n)return;let a=e.parameters.radial,s=[];return tY.forEach(o=>{let l=vd(o,a,i??{},n);l&&s.push(l)}),s}function d4e(e,t,r){if(e.parameters.type!=="linear")return;let i=t.linear,n=r.linear;if(!n)return;let a=[],s=e.parameters.linear;return rY.forEach(o=>{let l=vd(o,s,i??{},n);l&&a.push(l)}),a}function f4e(e,t,r){if(e.parameters.type!=="grid")return;let i=t.grid,n=r.grid;if(!n)return;let a=[],s=e.parameters.grid;return iY.forEach(o=>{let l;o==="count"?l=pX(o,s,i??{},n,!0):l=vd(o,s,i??{},n),l&&a.push(l)}),a}function p4e(e,t,r){if(e.parameters.type!=="toObject")return;let i=t.toObject,n=r.toObject;if(!n)return;let a=[],s=e.parameters.toObject;return nY.forEach(o=>{let l;o==="count"?l=Gf(o,s,i??{},n,!0):l=vd(o,s,i??{},n),l&&a.push(l)}),a}function m4e(e,t,r){if(!e.parameters.randomness)return;let i=t.randomnessObject,n=r.randomnessObject;if(!n)return;let a=[],s=e.parameters.randomnessObject;return aY.forEach(o=>{let l=vd(o,s,i??{},n);l&&a.push(l)}),a}function K6(e,t,r,i,n){let a=[];return e.data.visible&&a.push(...l4e(e,t,r,n)),e.data.visible&&a.push(...c4e(e,t,r)),cl(e)?(e instanceof Qa&&e.data.visible&&a.push(...QNe(e,t,r,i)),e.data.visible&&a.push(...ZNe(e,t,r,i))):Oke(e)?e.data.visible&&a.push(...KNe(e,t,r,i)):Dke(e)&&a.push(...YNe(e,t,r)),a.length?{update:s=>{a.forEach(o=>o.update(s))},start:s=>{a.forEach(o=>{var l;return(l=o.start)==null?void 0:l.call(o,s)})},end:s=>{a.forEach(o=>{var l;return(l=o.end)==null?void 0:l.call(o,s)})}}:void 0}var Z6=new T;function Yk(e,t,r=!1){let i=[];e.traverseChildren(n=>{var l,u,h,c,d;if(r&&((l=n.rigidBody)==null||l.setTranslation(n.position0,!0),(u=n.rigidBody)==null||u.setRotation(n.rotation0,!0),(h=n.rigidBody)==null||h.setLinvel(Z6,!0),(c=n.rigidBody)==null||c.setAngvel(Z6,!0)),!pr.is(n))return;let a=n.uuid,s=n.data;if(delete n.states,n.uuid===_v)return;let o=!1;i.some(f=>{var m;return(m=e.scene.find(a))==null?void 0:m.isDescendantOf(f)})?o=!0:((d=s.physics)==null?void 0:d.fusedBody)===!0&&s.physics.rigidBody==="dynamic"&&i.push(a),n.data=s,n.currentState=null,n.reversibleToState=null,n.currentTransitionEvent=null;for(let f of s.states){let m={...f.data};e.data.globalPhysics.usePhysics===!0&&s.physics&&(s.physics.rigidBody==="dynamic"||o)&&(f.data.position!==void 0&&delete m.position,f.data.rotation!==void 0&&delete m.rotation,f.data.hiddenMatrix!==void 0&&delete m.hiddenMatrix),n.states||(n.states={}),n.states[f.id]=nf.patch(s,m)}v4e(e.scene,n,null,t,s.events.find(f=>f.data.type==="Follow"||f.data.type==="LookAt")!==void 0),g4e(e)})}function g4e(e){e.traverseEntity(t=>{for(let r of t.data.events){let i=[];switch(r.data.type){case"Follow":case"MouseHover":case"Scroll":case"MouseDown":case"MouseUp":case"MousePress":case"KeyUp":case"KeyDown":case"KeyPress":case"Collision":i.push(...r.data.actions);break;case"GameControl":for(let n of Object.values(r.data.gameActions))i.push(...n);break;case"DragDrop":i.push(...r.data.dragDropActions.drag,...r.data.dragDropActions.drop);break;case"Conditional":i.push(...r.data.inActions,...r.data.outActions);break}for(let n of i)if(n.data.type==="Create"&&n.data.hideBase==="Yes"){let a=e.scene.find(n.data.object);a&&(a.visible=!1)}}})}function v4e(e,t,r,i,n=!1){if(t instanceof Qa&&t.removeInteractionGeometry(),t.changeSelectedState(r,{scene:e,shared:i},n),t instanceof Qa&&t.updateGeometryGroupsIfNeeded(),t instanceof _a&&t.updateCameraState(t.dataPatched,{scene:e,shared:i}),t.cloner)for(let a of t.cloner.children)a.playModeVisible=void 0;t.updateVisible()}function mX(e){let t;if(e.easing===5){let{control1:r,control2:i}=e;t=`cubicBezier(
			${r[0]}, ${r[1]}, ${i[0]}, ${i[1]}
		)`}else if(e.easing===6){let{mass:r,stiffness:i,damping:n,velocity:a}=e;t=`spring( ${r}, ${i}, ${n}, ${a} )`}else{let r;switch(e.easing){case 0:r=sh.linear;break;case 1:r=sh.ease;break;case 2:r=sh.easeIn;break;case 3:r=sh.easeOut;break;case 4:r=sh.easeInOut;break;default:r=sh.linear}let[i,n,a,s]=r;t=`cubicBezier( ${i}, ${n}, ${a}, ${s} )`}return{duration:e.duration,easing:t}}function gX(e){let t={delay:0,loop:e.repeat===-1?!0:e.repeat+1};if(e.repeat===0)t.direction="normal",t.rewind=!1;else switch(e.direction){case"pingpong":t.direction="alternate",t.rewind=!1;break;case"pingpong-rewind":t.direction="alternate",t.rewind=!0;break;default:t.direction="normal",t.rewind=!1;break}switch(t.delay=0,t.endDelay=0,t.startOnceDelay=0,t.pingPongDelayCorrection=0,t.pingPongEndDelayCorrection=0,e.delayDirection){case"start-once":t.startOnceDelay=e.delay;break;case"start":t.delay=e.delay;break;case"end":t.endDelay=e.delay;break;case"start-end":case void 0:t.delay=e.delay,t.endDelay=e.delay;break}return t.direction==="alternate"&&(t.delay/=2,t.endDelay/=2,e.delayDirection==="start"?(t.pingPongDelayCorrection=t.delay,typeof t.loop=="number"&&t.loop%2===0&&(t.pingPongEndDelayCorrection=t.delay)):e.delayDirection==="end"?typeof t.loop=="number"&&t.loop%2!==0&&(t.pingPongEndDelayCorrection=t.endDelay):e.delayDirection==="start-end"&&(t.pingPongDelayCorrection=t.delay,t.pingPongEndDelayCorrection=t.endDelay)),t}var y4e={type:"beginState"},x4e={type:"completeState",isfromEntity:!1},J6=class{constructor(e,t,r,i,n,a){if(this.object=e,this.data=i,this.sharedAssets=n,this.allowSlerp=a,this.targets={t:0},this.firstLoop=!0,this._changeBegan=!1,this._changeCompleted=!0,this.onChange=()=>{this.callback&&(this.callback.update(this.targets.t),this.object.dispatchEvent({type:"requestRender"})),this.targets.t===0||this.targets.t===1?this._changeCompleted||(this._changeCompleted=!0,this._changeBegan=!1,this.onChangeComplete()):(this._changeCompleted&&(this._changeCompleted=!1),this._changeBegan||(this._changeBegan=!0,this.onChangeBegin()))},this.onChangeBegin=()=>{this.object.reversibleToState=this.to.id;let s=this.targets.t>.5?this.from.id:this.to.id;this.object.prevState!==this.object.currentState&&(this.object.prevState=this.object.currentState),this.object.currentState=s,this.object.dispatchEvent({type:"beginState",state:s}),this.object.traverseEntity(o=>{o!==this.object&&o instanceof _a&&o.dispatchEvent(y4e)})},this.onChangeComplete=()=>{this.firstLoop&&(this.onFirstLoop(),this.firstLoop=!1),this.object.reversibleToState=this.to.id;let s=this.targets.t<.5?this.from.id:this.to.id;this.object.prevState!==this.object.currentState&&(this.object.prevState=this.object.currentState),this.object.currentState=s,this.object.dispatchEvent({type:"completeState",state:s}),this.object.traverseEntity(o=>{o!==this.object&&o instanceof _a&&o.dispatchEvent(x4e)})},this.onFirstLoop=()=>{this.useCurrentState&&(this.callback=K6(this.object,this.from.data,this.to.data,this.sharedAssets,this.allowSlerp))},t===void 0){let s=Kw(this.object,this.object.currentState===r?this.object.prevState:this.object.currentState);if(!s)throw new Error("Missing property");this.from=s}else{let s=Kw(this.object,t);if(!s)throw new Error("Missing property");this.from=s}if(r===void 0)throw new Error("Missing property");{let s=Kw(this.object,r);if(!s)throw new Error("Missing property");this.to=s}this.useCurrentState=t===void 0||r===void 0,this.params={targets:this.targets,t:1,autoplay:!1,...gX(i),...mX(i),change:this.onChange},this.callback=K6(this.object,t===void 0?{}:this.from.data,r===void 0?{}:this.to.data,this.sharedAssets,this.allowSlerp)}get changeBegan(){return this._changeBegan}get changeCompleted(){return this._changeCompleted}},vX=class extends sa{constructor(e,t,r,i){if(super(),this.data=e,this.page=t,this.shared=r,this.condition=i,this.toggleIsForward=!1,this.timelineNeedsRebuild=!1,this.useToggle=!1,this.onTimelineChangeComplete=()=>{var a;this.data.tweens[0].data.direction!=="normal"&&(this.toggleIsForward=!this.toggleIsForward),this.timelineNeedsRebuild!==!1&&((a=this.timeline)==null||a.pause(),this.buildTimeline({isForward:this.toggleIsForward,isRebuild:!0}),this.timeline.play())},!e.object)throw new Error("Missing property");let n=this.page.scene.find(e.object);if(!n)throw new Error("Missing property");if(!n.states)throw new Error("Missing property");if(this.object=n,e.tweens.length<2)throw new Error("Missing property");this.tweens=Array(this.data.tweens.length-1),this.startOnceDelay=e.tweens[0].data.delayDirection==="start-once"?e.tweens[0].data.delay:0,this.init()}get playing(){return this.tweens.some(e=>e.changeBegan)??!1}init(){this.initialCurrentState=Kw(this.object,this.object.currentState).id,this.toggleIsForward=!1}get currentState(){return this.useToggle?this.initialCurrentState:this.object.currentState}buildTimeline({isForward:e=!0,isRebuild:t=!1}={}){var r,i,n,a;try{let s=gX(this.data.tweens[0].data),o=s.loop;t&&typeof s.loop=="number"&&s.loop--,(r=this.timeline)==null||r.pause(),this.timeline=fX.timeline({autoplay:!1,...s,...o===!0||o>1?{timelineChangeComplete:this.onTimelineChangeComplete}:{}});let l=this.tweens.findIndex(u=>u==null?void 0:u.changeBegan);if(this.timelineNeedsRebuild=l!==-1&&(o===!0||o>1),s.pingPongDelayCorrection&&t===!1&&(this.timelineNeedsRebuild=!0),e){let u=l===-1?0:l;for(let h=u;h<this.data.tweens.length-1;h++){let c=this.data.tweens[h],d=this.data.tweens[h+1],f;h===u&&(this.object.wasMovedByUser===!0||((i=this.object.previousAction)==null?void 0:i.playing)===!0)?(f=void 0,this.object instanceof _a&&(this.object.wasMovedByUser=!1)):f=c.data.state===void 0?this.currentState:c.data.state;let m=new J6(this.object,f,d.data.state===void 0?this.currentState:d.data.state,d.data,this.shared,this.data.allowSlerp??!1);l!==-1&&h===u&&Object.assign(m.params,{startOnceDelay:0}),this.tweens[h]=m,this.timeline.add(m.params,this.timeline.duration+(h===u?s.delay:0)+(h===u&&!t?s.pingPongDelayCorrection:0))}this.timeline.duration+=s.endDelay}else{let u=l===-1?this.data.tweens.length-1:l+1;for(let h=u;h>0;h--){let c=this.data.tweens[h],d=this.data.tweens[h-1],f;h===u&&(this.object.wasMovedByUser===!0||((n=this.object.previousAction)==null?void 0:n.playing)===!0)?(f=void 0,this.object instanceof _a&&(this.object.wasMovedByUser=!1)):f=c.data.state===void 0?this.currentState:c.data.state;let m=new J6(this.object,f,d.data.state===void 0?this.currentState:d.data.state,c.data,this.shared,this.data.allowSlerp??!1);l!==-1&&h===u&&Object.assign(m.params,{startOnceDelay:0}),this.tweens[h-1]=m,this.timeline.add(m.params,this.timeline.duration+(h===u?s.endDelay:0))}this.timeline.duration+=s.delay+(t?0:s.pingPongDelayCorrection)}}catch(s){s instanceof Error&&console.error(s.message)}((a=this.object.previousAction)==null?void 0:a.playing)===!0&&this.object.previousAction.pause(),this.object.previousAction=this}play(){if(Tn(this.shared,this.condition)===!1||this.playing)return!1;clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(()=>{try{this.buildTimeline(),this.timeline.play()}catch(e){e instanceof Error&&console.error(e.message)}},this.startOnceDelay)}pause(){var e;(e=this.timeline)==null||e.pause(),clearTimeout(this.timeoutId),this.tweens=Array(this.data.tweens.length-1),delete this.timeoutId}stop(){this.pause();let e=this.data.tweens[0].data.state===void 0?this.initialCurrentState:this.data.tweens[0].data.state;this.object.changeSelectedState(e,{scene:this.page.scene,shared:this.shared}),this.object.currentState=e}seek(e){var t;this.timeline===void 0&&this.buildTimeline(),(t=this.timeline)==null||t.seek(e*this.timeline.duration,!0)}toggle(e){var t;if(Tn(this.shared,this.condition)===!1)return!1;this.useToggle=!0,clearTimeout(this.timeoutId),this.toggleIsForward=e??!this.toggleIsForward,this.playing?((t=this.timeline)==null||t.pause(),this.buildTimeline({isForward:this.toggleIsForward}),this.timeline.play()):this.timeoutId=window.setTimeout(()=>{var r;(r=this.timeline)==null||r.pause(),this.buildTimeline({isForward:this.toggleIsForward}),this.timeline.play()},this.startOnceDelay)}playFromCurrent(){this.toggle(!0)}reverseFromCurrent(){this.toggle(!1)}dispose(){this.pause()}};function Kw(e,t){var n;let r,i;if(typeof t=="string"?(r=t,i=(n=e.states)==null?void 0:n[r]):t===null&&(r=null,i=e.data),!(r===void 0||i===void 0))return{id:r,data:i}}var b4e={type:"beginState"},ej={type:"completeState",isfromEntity:!1},tj={type:"requestRender"},yX=class extends sa{constructor(e,t,r,i){super(),this.data=e,this.page=t,this.shared=r,this.condition=i,this.toggleIsForward=!1,this.useToggle=!1,this.posStart=new T,this.posEnd=new T,this.qStart=new Gt,this.qEnd=new Gt,this.zoomStart=1,this.zoomEnd=1}init(){}get playing(){return this.animation&&this.animation.began&&!this.animation.completed}buildAnimation(e=!1){if(!this.data.animate)return;let t=this.page.scene.find(this.data.targetCamera);if(!t||!t.visible)throw new ReferenceError("Target camera not founded or not visible");let r={t:0};this.posStart.copy(this.page.activeCamera.position),this.qStart.copy(this.page.activeCamera.quaternion),this.zoomStart=this.page.activeCamera.zoom,this.animation=fX({targets:r,t:1,...mX(this.data),update:()=>{r.t===0&&(this.useToggle&&!this.toggleIsForward?(this.posEnd.copy(this.fromCamera.position),this.qEnd.copy(this.fromCamera.quaternion),this.zoomEnd=this.fromCamera.zoom,this.switchCamera(this.fromCamera.uuid)):(this.posEnd.copy(t.position),this.qEnd.copy(t.quaternion),this.zoomEnd=t.zoom,this.fromCamera=this.page.activeCamera,this.switchCamera(t.uuid)),this.page.activeCamera.dispatchEvent(b4e));let i=this.page.activeCamera;i.position.lerpVectors(this.posStart,this.posEnd,r.t),i.quaternion.slerpQuaternions(this.qStart,this.qEnd,r.t),i.zoom=this.zoomStart+(this.zoomEnd-this.zoomStart)*r.t,i.wasMovedBySwitchCameraAction=!0,i.updateMatrix(),i.updateMatrixWorld(),i.updateProjectionMatrix(),i.dispatchEvent(tj),r.t===1&&i.dispatchEvent(ej)}})}switchCamera(e){let t=this.page.scene.find(e);if(!t||!t.visible)throw new ReferenceError("Target camera not founded or not visible");this.page.switchActiveCamera(t),this.page.activeCamera.dispatchEvent({type:"cameraChange",camera:t})}play(){if(Tn(this.shared,this.condition)===!1)return!1;if(!this.playing&&this.page.activeCamera.uuid!==this.data.targetCamera)try{clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(()=>{var e;delete this.timeoutId,this.data.animate?(this.buildAnimation(),(e=this.animation)==null||e.play()):this.switchCamera(this.data.targetCamera)},this.data.delay*1e3)}catch{}}pause(){var e;(e=this.animation)==null||e.pause(),clearTimeout(this.timeoutId),delete this.timeoutId}toggle(e){var t,r;if(Tn(this.shared,this.condition)===!1)return!1;this.useToggle=!0,clearTimeout(this.timeoutId),this.toggleIsForward=e??!this.toggleIsForward;try{this.playing?((t=this.animation)==null||t.pause(),this.buildAnimation(!0),(r=this.animation)==null||r.play()):this.timeoutId=window.setTimeout(()=>{var i,n;delete this.timeoutId,this.data.animate?((i=this.animation)==null||i.pause(),this.buildAnimation(),(n=this.animation)==null||n.play()):(this.toggleIsForward?(this.fromCamera=this.page.activeCamera,this.switchCamera(this.data.targetCamera)):this.switchCamera(this.fromCamera.uuid),this.page.activeCamera.dispatchEvent(ej),this.page.activeCamera.dispatchEvent(tj))},this.data.delay*1e3)}catch{}}playFromCurrent(){this.toggle(!0)}reverseFromCurrent(){this.toggle(!1)}dispose(){this.pause(),this.toggleIsForward=!1}},xX=class extends sa{constructor(e,t,r,i,n){var u,h,c;super(),this.page=t,this.animationControls=r,this.shared=i,this.condition=n,this.startOnceDelay=0,this.toggleIsForward=!1;let a=e.object,s=t.scene.find(e.object);s&&Array.isArray(s.identity)&&(a=s.identity[0]),this.data={...e,object:a};let o=this.animationControls.clipIdToAction[e.clipId+"/"+a];this.duration=((u=o==null?void 0:o.getClip())==null?void 0:u.duration)??1;let l=((c=(h=o==null?void 0:o.getClip())==null?void 0:h.tracks[0])==null?void 0:c.times.length)??1/0;this.leftFrameTime=this.data.crop[0]/l*this.duration,this.rightFrameTime=this.data.crop[1]/l*this.duration,this.startOnceDelay=e.delay}get playing(){var e;return((e=this.threeAnimAction)==null?void 0:e.isRunning())??!1}play(e=!1){if(Tn(this.shared,this.condition)===!1)return!1;window.clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(()=>{var r;if(this.threeAnimAction=this.animationControls.play(this.data),!this.threeAnimAction)return;this.threeAnimAction.reset(),this.threeAnimAction.time=this.leftFrameTime,this.threeAnimAction._clip.start=this.leftFrameTime,this.threeAnimAction._clip.duration=this.rightFrameTime;let t=this.data.object;Object.entries(this.animationControls.clipIdToAction).forEach(([i,n])=>{let a=i.split("/")[1];this.threeAnimAction!==n&&a===t&&n.isRunning()&&(e?n.fadeOut(.2):n.stop())}),e&&((r=this.threeAnimAction)==null||r.fadeIn(.2))},this.startOnceDelay)}pause(){this.threeAnimAction&&(this.threeAnimAction.paused=!0),window.clearTimeout(this.timeoutId),delete this.timeoutId}stop(){var e;(e=this.threeAnimAction)==null||e.fadeOut(.2)}seek(e){this.threeAnimAction=this.animationControls.play(this.data),this.threeAnimAction&&(this.threeAnimAction.paused=!0,this.threeAnimAction.time=bt.clamp(this.threeAnimAction.time+1/60*e,this.leftFrameTime,this.rightFrameTime-16e-5),this.animationControls.needsUpdate=!0,this.animationControls.requestRender())}toggle(e,t=!1){if(Tn(this.shared,this.condition)===!1)return!1;this.toggleIsForward=e??!this.toggleIsForward,this.threeAnimAction&&(this.threeAnimAction._loopCount=0),this.playing?this.threeAnimAction&&(this.threeAnimAction.timeScale=this.toggleIsForward?1:-1,this.toggleIsForward?(this.threeAnimAction._clip.start=this.leftFrameTime,this.threeAnimAction._clip.duration=this.rightFrameTime):(this.threeAnimAction._clip.start=this.rightFrameTime,this.threeAnimAction._clip.duration=this.leftFrameTime)):this.timeoutId=window.setTimeout(()=>{var r;if(this.threeAnimAction=this.animationControls.play(this.data),this.threeAnimAction){this.toggleIsForward?(this.threeAnimAction.time=this.leftFrameTime,this.threeAnimAction._clip.start=this.leftFrameTime,this.threeAnimAction._clip.duration=this.rightFrameTime):(this.threeAnimAction.time=this.rightFrameTime,this.threeAnimAction._clip.start=this.rightFrameTime,this.threeAnimAction._clip.duration=this.leftFrameTime),this.threeAnimAction.paused=!1,this.threeAnimAction.timeScale=this.toggleIsForward?1:-1;let i=this.data.clipId.split("/")[1];Object.entries(this.animationControls.clipIdToAction).forEach(([n,a])=>{let s=n.split("/")[1];this.threeAnimAction!==a&&s===i&&a.isRunning()&&(t?a.fadeOut(.2):a.stop())}),t&&((r=this.threeAnimAction)==null||r.fadeIn(.2))}},this.startOnceDelay)}playFromCurrent(){this.toggle(!0)}reverseFromCurrent(){this.toggle(!1)}dispose(){var t;let e=(t=this.animationControls.clipIdToAction[this.data.clipId+"/"+this.data.object])==null?void 0:t.getClip();e&&(e.duration=this.duration),this.pause()}},bX=class{constructor(e,t,r,i,n){this.data=e,this.page=t,this.eventManager=r,this.shared=i,this.condition=n,this.timeOutId=-1,this.scene=t.scene}dispatch(){if(Tn(this.shared,this.condition)===!1)return!1;this.data.target!==this.page.uuid&&(window.clearTimeout(this.timeOutId),this.timeOutId=window.setTimeout(()=>{this.play()},this.data.delay*1e3))}dispose(){window.clearTimeout(this.timeOutId)}play(){if(this.scene.children.every(t=>t.uuid!==this.data.target))return;this.data.transition==="fade"&&this.data.duration>0&&this.eventManager.eventContext.renderer.renderFromSceneForSceneTransitionPass(this.scene,this.scene.activeCamera,this.data.duration*1e3),this.eventManager.deactivate(),this.eventManager.controlsManager.deactivate();let e=this.scene.activeCamera;this.scene.updatePage(this.data.target),this.scene.activePage.switchToPlayCamera(),this.scene.activeCamera.copyViewPlaneSize(e),Yk(this.scene.activePage,this.shared),this.eventManager.activate(),this.eventManager.controlsManager.activate(this.eventManager)}},wX=class{constructor(e,t,r,i){this.data=e,this.page=t,this.shared=r,this.condition=i,this.evaluatedCondition=!1}checkConditions(){this.evaluatedCondition=Tn(this.shared,this.condition)}dispatch(){if(this.evaluatedCondition===!1)return!1;let e=this.shared.getVariable(this.data.variableId),t=zY(this.data.expression,this.shared,fl.typeOfVariable(e));t!==void 0&&this.shared.updateVariable(this.data.variableId,typeof t=="string"?{textValue:t}:t)}dispose(){}};function Tn(e,t){if(t===void 0)return!0;if(t.expression.length===0)return!1;let r=zY(t.expression,e,"boolean");return t.negate?!r:!!r}function rs(e,t,r,i,n,a){let s={Audio:[],Video:[],Link:[],Destroy:[],Create:[],Reset:[],Transition:[],SwitchCamera:[],Animation:[],SceneTransition:[],SetVariable:[]},o=l=>({id:u,data:h})=>{try{h.type==="Audio"?uo[e.type].includes("Audio")&&s.Audio.push(new qq(u,h,a,i,l)):h.type==="Video"?uo[e.type].includes("Video")&&s.Video.push(new SX(u,h,a,i,l)):h.type==="Link"?uo[e.type].includes("Link")&&s.Link.push(new fNe(h,n.controlsManager,i,l)):h.type==="Create"?uo[e.type].includes("Create")&&s.Create.push(new EX(h,r,n.controlsManager,i,l)):h.type==="Destroy"?uo[e.type].includes("Destroy")&&s.Destroy.push(new Xq(h,r,n.controlsManager,i,l)):h.type==="Reset"?uo[e.type].includes("Reset")&&s.Reset.push(new Qq(h,r,i,n,l)):h.type==="Transition"?uo[e.type].includes("Transition")&&s.Transition.push(new vX(h,r,i,l)):h.type==="SwitchCamera"?uo[e.type].includes("SwitchCamera")&&s.SwitchCamera.push(new yX(h,r,i,l)):h.type==="SceneTransition"?uo[e.type].includes("SceneTransition")&&s.SceneTransition.push(new bX(h,r,n,i,l)):h.type==="Animation"?uo[e.type].includes("Animation")&&s.Animation.push(new xX(h,r,n.animationControls,i,l)):h.type==="SetVariable"?uo[e.type].includes("SetVariable")&&s.SetVariable.push(new wX(h,r,i,l)):h.type==="Conditional"&&uo[e.type].includes("Conditional")&&(h.ifActions.forEach(o({expression:h.condition,negate:!1})),h.elseActions.forEach(o({expression:h.condition,negate:!0})))}catch{}};return t.forEach(o()),s}function Gn(e){Object.values(e).forEach(t=>{t.forEach(r=>{(r instanceof qq||r instanceof SX||r instanceof xX||r instanceof vX||r instanceof EX||r instanceof Xq||r instanceof yX||r instanceof bX||r instanceof Qq||r instanceof wX)&&r.dispose()})})}function w4e(e,t){let r;if("material"in e){let i=e.material;Array.isArray(i)?r=e.material[0].layers.find(n=>n.uuid===t):r=e.material.layers.find(n=>n.uuid===t)}if(r)return r.color.texture.image.img instanceof HTMLVideoElement?r.color.texture.image.img:void 0}var _X=new Map,Ay=new Map,gg=class{constructor(e,t,r){this.data=t,this.delay=0,this.status="stopped";let{layerId:i,loop:n,volume:a,delay:s}=t;if(this.object=r,i===void 0)throw new Error("Missing property");let o=w4e(r,i);o&&(this.videoElement=o,this.videoElement.loop=n===1/0,this.videoElement.autoplay=!0,a!==void 0&&(this.videoElement.volume=a)),s!==void 0&&(this.delay=s),Ay.has(r.uuid)?Ay.get(r.uuid).push(this):Ay.set(r.uuid,[this]),_X.set(e,this),this.pause()}mute(){!this.videoElement||(this.videoElement.muted=!0)}unMute(){!this.videoElement||(this.videoElement.muted=!1)}play(e){if(!this.videoElement)return;let t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);e?(this.mute(),this.delay+=150):t?(this.mute(),window.setTimeout(()=>{this.unMute()},100)):this.unMute(),this.delayTimerId=window.setTimeout(()=>{if(!this.videoElement)return;let r=this.videoElement.play();r!==void 0&&r.then(i=>{}).catch(i=>{this.play()}),this.clearDelay()},this.delay),this.status="playing"}clearDelay(){this.delayTimerId&&(clearTimeout(this.delayTimerId),delete this.delayTimerId)}pause(){!this.videoElement||(this.videoElement.pause(),this.status="paused")}stop(){!this.videoElement||(this.videoElement.pause(),this.videoElement.currentTime=0,this.status="stopped",this.clearDelay())}playByToggle(){this.data.toggle==="stop"?this.status==="playing"?this.stop():(this.stop(),this.play()):this.data.toggle==="pause"?this.status==="playing"?this.pause():this.play():(this.stop(),this.play())}dispose(){!this.videoElement||(this.stop(),this.videoElement.muted=!0)}},U3=class{constructor(e){this.data=e}dispatch(){this.data.playVideo?this.pauseVideo(this.data.playVideo):this.data.object?this.pauseAllVideosFromObject(this.data.object):this.pauseAllVideos()}pauseVideo(e){let t=_X.get(e);!t||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t[this.data.interaction](),this.disposeDelay()},this.data.delay)):t[this.data.interaction]())}pauseAllVideosFromObject(e){let t=Ay.get(e);!(t!=null&&t.length)||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t.forEach(r=>r[this.data.interaction]()),this.disposeDelay()},this.data.delay)):t.forEach(r=>r[this.data.interaction]()))}pauseAllVideos(){let e=[...Ay.values()];!e.length||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{e.forEach(t=>{t.forEach(r=>{r[this.data.interaction]()})}),this.disposeDelay()},this.data.delay)):e.forEach(t=>{t.forEach(r=>{r[this.data.interaction]()})}))}disposeDelay(){clearTimeout(this.timeoutId),delete this.timeoutId}dispose(){clearTimeout(this.timeoutId),delete this.timeoutId}},SX=class{constructor(e,t,r,i,n){if(this.data=t,this.shared=i,this.condition=n,t.interaction==="play")this.interaction=new gg(e,t,r);else if(t.interaction==="pause"||t.interaction==="stop")this.interaction=new U3(t);else throw new Error("Missing property")}dispatchBasic(){if(Tn(this.shared,this.condition)===!1)return!1;this.interaction instanceof gg?this.interaction.playByToggle():this.interaction.dispatch()}dispatchConditional(){if(Tn(this.shared,this.condition)===!1)return!1;this.interaction instanceof gg?this.interaction.play():this.interaction.dispatch()}dispose(){this.interaction.dispose()}},rj=(()=>{let e,t,r,i;function n(o){!e&&!ij()&&(t==null?void 0:t.sharedGameControlGlobals.createdObjects.length)>0&&(e=requestAnimationFrame(a)),o&&(t=o,i=o.requestRender)}function a(o){let l=r?o-r:0,u=t.sharedGameControlGlobals.createdObjects,h=t.sharedGameControlGlobals.nCreatedPerAction,c=u.length,d=0;for(;d<c;){let f=u[d];f.userData.createdTime===void 0&&(f.userData.createdTime=o),f.userData.lifetime===void 0&&f.userData.quantity===void 0||f.userData.lifetime&&o-f.userData.createdTime<f.userData.lifetime||f.userData.quantity&&h[f.userData.actionId]<=f.userData.quantity?(f.userData.velocity&&(f.position.addScaledVector(f.userData.velocity,l/1e3),f.updateMatrix(),i()),d++):(h[f.userData.actionId]>f.userData.quantity&&h[f.userData.actionId]--,u.splice(d,1),f.removeFromParent(),t.sharedGameControlGlobals.rapierWorld&&f.rigidBody?(t.sharedGameControlGlobals.colliderToEntity.delete(f.rigidBody.collider(0).handle),t.sharedGameControlGlobals.rapierWorld.removeRigidBody(f.rigidBody)):(f.bvhGeometry=void 0,t.sharedGameControlGlobals.entitiesWithTransformAnim=t.sharedGameControlGlobals.entitiesWithTransformAnim.filter(m=>m.bvhGeometry!==void 0)),c--,i())}e=d>0?requestAnimationFrame(a):void 0,r=d>0?o:void 0}function s(){ij()?e&&(cancelAnimationFrame(e),e=void 0,r=void 0):n()}return typeof document<"u"&&document.addEventListener("visibilitychange",s),n})();function ij(){return!!document&&document.hidden}var nj=new Gt,_4e=new T,S4e=new T,EX=class{constructor(e,t,r,i,n){this.data=e,this.page=t,this.controlsManager=r,this.shared=i,this.condition=n,this.intervalId=null,this.timeoutIdQueue=[],this.uniqueId=bt.generateUUID(),this.dispatch=()=>{if(Tn(this.shared,this.condition)===!1)return!1;this.data.delay?this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,this.data.delay*1e3)):this.dispatchInner()},this.dispatchFromStart=()=>{if(Tn(this.shared,this.condition)===!1)return!1;this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,this.data.delay*1e3))},this.dispatchThrottled=CPe(this.dispatch,1e3/this.data.creationSpeed),this.dispatchStart=()=>{this.intervalId===null&&(this.intervalId=window.setInterval(this.dispatch,1e3/this.data.creationSpeed))},this.dispatchStop=()=>{this.intervalId!==null&&(window.clearInterval(this.intervalId),this.intervalId=null)},this.dispatchInner=()=>{this.timeoutIdQueue.shift();let s=new ya(this.object);if(s.playModeVisible=!0,s.expand(),this.data.coordinateSystem!=="world"){let l=this.data.coordinateSystem,u=this.page.scene.find(l);u&&(u.updateMatrixWorldSVD(),s.hiddenMatrix.copy(u.matrixWorldRigid))}s.position.fromArray(this.data.position),s.rotation.fromArray(this.data.rotation),s.updateMatrix(),this.page.add(s);let o=this.controlsManager.sharedGameControlGlobals;o.createdObjects.push(s),o.nCreatedPerAction[this.uniqueId]===void 0?o.nCreatedPerAction[this.uniqueId]=1:o.nCreatedPerAction[this.uniqueId]++,s.updateWorldMatrix(!0,!0),s.traverseObject(this.traverseObjectCB),rj(),this.controlsManager.requestRender()},this.traverseObjectCB=s=>{var h,c,d,f;s.hasNonUniformScale&&s.updateMatrixWorldSVD();let o;if(this.controlsManager.sharedGameControlGlobals.rapierWorld){if(s instanceof ml)if(s.objectForSample){if(s.objectForSample.dataPatched.physics.fusedBody)return;o=s.object}else return s.object.dataPatched.physics.fusedBody===!0&&s.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(s instanceof ya)o=s.object;else if(o=s,(h=o.dataPatched.cloner)==null?void 0:h.hideBase)return!0}else{if(s instanceof ml)return;s instanceof ya?o=s.object:o=s}this.data.destroy==="Time"?s.userData.lifetime=this.data.lifetime*1e3:this.data.destroy==="Quantity"&&(s.userData.quantity=this.data.destroyAfterQuantity,s.userData.actionId=this.uniqueId);let l=new T().fromArray(this.data.velocity),u=o.dataPatched;if(!(u.physics.enabled==="visibility"?!u.visible:!u.physics.enabled)&&(this.controlsManager.sharedGameControlGlobals.rapierWorld?(this.controlsManager.addRigidBody(s,o,{fromCreate:!0,dynamic:this.data.dynamic}),this.data.destroy==="Collision"&&((c=s.rigidBody)==null||c.collider(0).setActiveEvents(1),s.userData.hasCollisionDestroy=!0),s.matrixWorld.decompose(_4e,nj,S4e),l.applyQuaternion(nj),this.data.velocity.some(m=>m!==0)&&this.data.dynamic&&((d=s.rigidBody)==null||d.setLinvel(l.divideScalar(this.controlsManager.pixelsPerMeter),!0))):("geometry"in s.object&&this.controlsManager.addBoundsTree(s),this.data.velocity.some(m=>m!==0)&&this.data.dynamic&&(s.userData.velocity=l)),((f=o.dataPatched.physics)==null?void 0:f.fusedBody)===!0))return!0};let a=this.page.scene.find(this.data.object);if(!a)throw new Error("Missing Property");if(this.object=a,this.data.coordinateSystem!=="world"&&!this.page.scene.find(this.data.coordinateSystem))throw new Error("Missing Property");rj(r)}dispose(){this.intervalId!==null&&(window.clearInterval(this.intervalId),this.intervalId=null),this.timeoutIdQueue.forEach(e=>window.clearTimeout(e)),this.dispatchThrottled.cancel(),this.page.remove(...this.controlsManager.sharedGameControlGlobals.createdObjects),this.controlsManager.sharedGameControlGlobals.createdObjects=[]}},MX=200,iT=.02,nT=.3,E4e=65;new T;var aj=new T,sj=new T,M4e=new T,Ia=new T,os=new T,Zc=new T,aT=new ze,oj=new ze,C4e=new ze;new ze;var tl=new Gt,ju=new Gt,Fl=new Un(0,0,0,"YXZ"),A4e=new T(1,0,0),rl=new T(0,1,0),T4e=new T(0,0,1),lj=new T(1,1,1);new Ds;var P4e=1,D4e=.025,O4e=16e-6,uj=12,I4e=20,Ln=new Lo,fo=new Qi,R4e={type:"requestRender"},k4e={type:"updateMatrix"},cj=Math.PI/6,j3=class extends sa{constructor(e,t,r,i,n,a,s,o,l){var m;super(),this.object=e,this.domElement=t,this.data=r,this.gloabalPhysics=i,this.controlsManager=n,this.cameraFollow=a,this.camera=s,this.page=o,this.sharedAssets=l,this.enableDamping=!0,this.hiddenMatrix0=new ze,this.target0=new T,this.zoom0=1,this.rotForce=1,this.moveForce=1,this.pixelsPerMeter=MX,this.euler0=new Un(0,0,0,"YXZ"),this.position0Cam=new T,this.quat0Cam=new Gt,this.scale0Cam=new T,this.hiddenMatrix0Cam=new ze,this.threshEndTranslate=.01,this.threshEndRotate=1e-8,this.threshEndRotVel=.005,this.collider={type:"capsule",radius:40,segment:new Lo(new T(0,-40,0),new T(0,40,0)),matrix:new ze,position:new T,rotation:new Gt},this.euler=new Un(0,0,0,"YXZ"),this.eulerDelta=new T,this.lastPosition=new T,this.lastCameraQuaternion=new Gt,this.lastCameraPosition=new T,this.PI_2=Math.PI/2,this.prevMouse=new re,this.velocityTarget=new T,this.velocity=new T,this.directionXZ=new T,this.rotVelocityStick=new T,this.rotVelocityTarget=new T,this.rotVelocity=new T,this.rotDirection=new T,this.nonColliderRotOffset=new ze,this.nonColliderPosOffset=new ze,this.firstPointerId=-1,this.rot=new T,this.path=[],this.movementState={moveNegZ:0,movePosZ:0,moveNegX:0,movePosX:0,moveNegY:0,movePosY:0,rotPosX:0,rotNegX:0,rotPosY:0,rotNegY:0,jump:0,run:0},this.vrEulerYOffset=0,this.onObject=!1,this.actionState={},this.keyAssignments=[["moveNegZ","W"],["moveNegX","A"],["movePosZ","S"],["movePosX","D"],["rotPosX","ArrowUp"],["rotPosY","ArrowLeft"],["rotNegX","ArrowDown"],["rotNegY","ArrowRight"],["jump"," "]],this.collisionEnabled=!0,this.offsetMatrix=new ze,this.objectToTarget=new T,this.objectToTarget0=new T,this.objectToCamXZ=new T,this.objectToCamXZ0=new T,this.targetToCamera=new T,this.targetToCamera0=new T,this.cameraPolarAxis0=new T,this.targetPos=new T,this.targetQuat=new Gt,this.lerpFactorPos=new T().setScalar(.3),this.lerpFactorPosStart=.3,this.lerpFactorPosEnd=.3,this.lerpFactorRotStart=.3,this.lerpFactorRotEnd=.3,this.lerpFactorPosCamera=.3,this.lerpFactorRotCamera=.3,this.objXZQuat=new Gt,this.objXZQuatInv=new Gt,this.objXZRotMat=new ze,this.isFirstPerson=!1,this.didHit=!1,this.groundVelocity=new T,this.pushedVelocity=new T,this.groundYRotation=0,this.objectRealQuat=new Gt,this.colliderWorldQuat=new Gt,this.groundNormal=new T,this.groundTilt=new Gt,this.groundTiltInv=new Gt,this.lastHitObj=null,this.isFirstFrame=!0,this.rotationAccumWhenOrientWithCamera=0,this.navMeshPathDest=null,this.position=new T,this.quaternion=new Gt,this.scale=new T,this.initialAction=!0,this.onPointerDown=p=>{p.target!==this.domElement||this.firstPointerId!==-1||(this.firstPointerId=p.pointerId,this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp),this.rotBy!=="keys"&&!Xs&&(!mF||gF>=15.5)&&this.domElement.requestPointerLock(),this.prevMouse.set(p.clientX,p.clientY))},this.onPointerUp=p=>{this.firstPointerId=-1,this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this.onPointerUp),p.pointerType==="mouse"&&this.domElement.ownerDocument.exitPointerLock()},this.onPointerMove=p=>{if(p.pointerId!==this.firstPointerId)return;let g=p.clientX-this.prevMouse.x,v=p.clientY-this.prevMouse.y;this.prevMouse.set(p.clientX,p.clientY),p.pointerType==="mouse"&&this.rotBy!=="keys"&&(mF&&gF<15.5&&!Xs?(this.eulerDelta.y=-g*this.mouseOrbitSensitivity,this.eulerDelta.x=-v*this.mouseOrbitSensitivity):(this.eulerDelta.y=-p.movementX*this.mouseOrbitSensitivity,this.eulerDelta.x=-p.movementY*this.mouseOrbitSensitivity)),p.pointerType!=="mouse"&&this.rotByTouch==="drag"&&(this.eulerDelta.y=-g*this.mouseOrbitSensitivity*5,this.eulerDelta.x=-v*this.mouseOrbitSensitivity*5),this.controlsManager.requestRender()},this.onPointerlockChange=p=>{this.domElement.ownerDocument.pointerLockElement===this.domElement?j3.isLocked=!0:j3.isLocked=!1},this.onPointerlockError=()=>{console.error("SPE.GameControls: Unable to use Pointer Lock API")},this.handleVisibilityChange=()=>{if(document!=null&&document.hidden)for(let p in this.movementState)this.movementState[p]=0},this.onKeyDown=p=>{!(p.target instanceof HTMLInputElement)&&(p.code==="ArrowLeft"||p.code==="ArrowUp"||p.code==="ArrowRight"||p.code==="ArrowDown"||p.code==="Space")&&p.preventDefault();for(let g of this.keyAssignments)if(p.key.toUpperCase()===g[1]||p.key===g[1]){this.movementState[g[0]]=1;break}this.controlsManager.requestRender()},this.onKeyUp=p=>{for(let g of this.keyAssignments)if(p.key.toUpperCase()===g[1]||p.key===g[1]||p.code.slice(3,p.code.length).toUpperCase()===g[1]){this.movementState[g[0]]=0;break}},this.copyVRGamePadValues=(p,g)=>{for(let v=2;v<4;v++){let y=p.axes[v];g===0?v===2?this.movementState.movePosX=y:this.movementState.movePosZ=y:(p.buttons[3].pressed?this.movementState.jump=1:this.movementState.jump=0,v===2?(Math.abs(this.movementState.rotPosY)<.3&&Math.abs(y)>=.3&&(this.vrEulerYOffset+=y<0?1:-1),this.movementState.rotPosY=y):this.moveMode==="fly"&&(this.movementState.moveNegY=y))}},this.sharedGameControlGlobals=n.sharedGameControlGlobals,e===s&&(this.isFirstPerson=!0),this.hiddenMatrix0.copy(this.object.hiddenMatrix),this.object.parent?this.object.hiddenMatrix.copy(this.object.parent.matrixWorld).invert():this.object.hiddenMatrix.identity(),this.object.matrix.copy(this.object.matrixWorld),this.object.matrix.decompose(this.position,this.quaternion,this.scale),this.euler0.setFromQuaternion(this.quaternion,"YXZ");let u=this.euler0.clone(),h=u.y;if(this.objectRealQuat.copy(this.quaternion),u.y=0,this.quaternion.setFromEuler(u),this.objXZQuat.copy(this.quaternion),this.objXZQuatInv.copy(this.objXZQuat).invert(),this.objXZRotMat.makeRotationFromQuaternion(this.quaternion),u.set(0,h,0),this.quaternion.setFromEuler(u),this.rot.setFromEuler(u),this.object.matrixAutoUpdate=!1,(this.isFirstPerson||this.cameraFollow===!0)&&(this.target0.copy(this.camera.getTarget()),this.zoom0=this.camera.zoom),this.cameraFollow===!0){this.position0Cam.copy(this.camera.position),this.quat0Cam.copy(this.camera.quaternion),this.scale0Cam.copy(this.camera.scale),this.hiddenMatrix0Cam.copy(this.camera.hiddenMatrix),this.camera.parent?(this.camera.hiddenMatrix.copy((m=this.camera)==null?void 0:m.parent.matrixWorld),this.camera.matrix.copy(this.camera.matrixWorld)):this.camera.hiddenMatrix.identity(),this.camera.matrix.copy(this.camera.matrixWorld),this.camera.matrix.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.matrixAutoUpdate=!1,this.offsetMatrix.copy(this.object.matrix).invert().multiply(this.camera.matrix);let p=new T(0,0,-1).applyQuaternion(this.camera.quaternion),g=new T().subVectors(this.position,this.camera.position);this.objectToCamXZ.copy(g),this.objectToCamXZ.y=0,this.objectToCamXZ0.copy(this.objectToCamXZ);let v,y;Math.abs(p.y)<1e-6?(g.y=0,p.y=0,y=g.projectOnVector(p)):g.y/p.y>0?y=p.multiplyScalar(g.y/p.y):y=p.multiplyScalar(g.length()),this.targetToCamera0.copy(y).negate(),v=this.camera.position.clone().add(y),this.objectToTarget0.subVectors(v,this.position);let x=new Un().setFromQuaternion(this.camera.quaternion,"YXZ");this.cameraPolarOffset=-x.x,x.x=0,x.z=0,x.y-=Math.PI/2,this.cameraPolarAxis0.set(0,0,-1).applyEuler(x)}if(this.object instanceof _a&&(this.object.matrixAutoUpdate=!1),this.euler.setFromQuaternion(this.quaternion,"YXZ"),this.rotByTouch=r.rotByTouch??"joystick",this.rotBy=r.rotBy??"keys",this.rotationMode=r.rotationMode??"normal",this.moveMode=r.moveMode??"walk",this.collisionEnabled=r.collisionEnabled,this.speedTranslate=(r.speedTranslate??250)*P4e,this.speedOrbit=(r.speedRotate??100)*D4e,this.mouseOrbitSensitivity=(r.speedRotate??100)*O4e,this.keyAssignments=r.keyAssignments.map(p=>{let g=[p[0],p[1]];return g[1]==="▲"?g[1]="ArrowUp":g[1]==="◀"?g[1]="ArrowLeft":g[1]==="▼"?g[1]="ArrowDown":g[1]==="▶"?g[1]="ArrowRight":g[1]==="⇧"?g[1]="Shift":g[1]==="↵"?g[1]="Enter":g[1]==="Space"?g[1]=" ":g[1]==="⌘"?g[1]="Meta":g[1]==="Ctrl"?g[1]="Control":g[1]==="Esc"&&(g[1]="Escape"),g}),r.rotBy==="mouse"){let p;p=this.keyAssignments.findIndex(g=>g[0]==="rotNegX"),p!==-1&&(this.keyAssignments[p][1]=""),p=this.keyAssignments.findIndex(g=>g[0]==="rotPosX"),p!==-1&&(this.keyAssignments[p][1]=""),p=this.keyAssignments.findIndex(g=>g[0]==="rotPosY"),p!==-1&&(this.keyAssignments[p][1]=""),p=this.keyAssignments.findIndex(g=>g[0]==="rotNegY"),p!==-1&&(this.keyAssignments[p][1]="")}this.lerpFactorPosStart=1-.02**(1/((r.delayPos[0]??.3)*60)),this.lerpFactorPosEnd=1-.02**(1/((r.delayPos[1]??.3)*60)),this.lerpFactorPos.setScalar(this.lerpFactorPosStart),this.lerpFactorRotStart=1-.02**(1/((r.delayRot[0]??.3)*60)),this.lerpFactorRotEnd=1-.02**(1/((r.delayRot[1]??.3)*60)),this.lerpFactorPosCamera=1-.02**(1/((r.delayPosCamera??.3)*60)),this.lerpFactorRotCamera=1-.02**(1/((r.delayRotCamera??.3)*60)),this.gravity=(this.gloabalPhysics.gravity??$g.defaultData.gravity)*uj,this.usePhysics=this.gloabalPhysics.usePhysics??$g.defaultData.usePhysics,this.jumpPower=r.jumpPower*I4e,this.resetYPosition=this.position.y+Math.abs(r.resetYPosition)*(this.gravity>0?1:-1),this.alignToGround=r.alignToGround??!1,this.orientMode=r.autoOrientMove?r.orientMode:"none",this.orientWith=r.orientWith??VS.defaultDataThirdPerson.orientWith,this.slopeThresh=E4e*Math.PI/180,r.collider.type==="capsule"?(this.collider.radius=r.collider.radius,this.collider.segment.start.y=r.collider.height/2-r.collider.radius,this.collider.segment.end.y=-this.collider.segment.start.y,this.offset=r.collider.height*iT/this.pixelsPerMeter,this.stepThresh=r.collider.height*nT/this.pixelsPerMeter,this.colliderHeight=r.collider.height):r.collider.type==="sphere"?(this.collider.radius=r.collider.radius,this.collider.segment.start.y=0,this.collider.segment.end.y=0,this.offset=2*r.collider.radius*iT/this.pixelsPerMeter,this.stepThresh=2*r.collider.radius*nT/this.pixelsPerMeter,this.colliderHeight=r.collider.radius*2):(this.offset=r.collider.height*iT/this.pixelsPerMeter,this.stepThresh=r.collider.height*nT/this.pixelsPerMeter,this.colliderHeight=r.collider.height),this.collider.type=r.collider.type;let c=new T().fromArray(r.collider.position),d=new Gt().setFromEuler(new Un().fromArray([...r.collider.rotation,"XYZ"]));this.collider.position.copy(c).multiply(this.scale),this.collider.rotation.copy(d),this.collider.matrix.compose(c,d,lj),r.cameraXAxis!==void 0&&(this.cameraXAxis=r.cameraXAxis,this.cameraYAxis=r.cameraYAxis,this.minPolarAngle=r.cameraRotXLimits[0],this.maxPolarAngle=r.cameraRotXLimits[1],this.minAzimuthAngleRel=r.cameraRotYLimits[0],this.maxAzimuthAngleRel=r.cameraRotYLimits[1]),this.forwardDir=r.forwardDirection??"-z",this.runMultiplier=r.runMultiplier??2;let f=r.navmesh.destinationHelperRadius*2;if(f>0){let p=new Tt;p.push({fi:0,data:{...hs.defaultData("light","phong"),alpha:0},id:"layer1"}),p.push({fi:0,data:{...hs.defaultData("color"),color:r.navmesh.destinationHelperColor,alpha:r.navmesh.destinationHelperColor.a},id:"layer2"});let g=new Mk({layers:p},{scene:this.page.scene,shared:this.sharedAssets});this.navMeshPathDest=new gs(yY.create({parameters:{width:f,height:f/10,hollow:.7}}),g),this.navMeshPathDest.material.userData.opacity0=r.navmesh.destinationHelperColor.a}this.activate()}reset(e=!1){if(this.object.hiddenMatrix.copy(this.hiddenMatrix0),e){this.object.updateMatrix(),this.object.updateMatrixWorld(),this.object.matrix.copy(this.object.matrixWorld),this.object.matrix.decompose(this.position,this.quaternion,this.scale),this.object.parent?this.object.hiddenMatrix.copy(this.object.parent.matrixWorld).invert():this.object.hiddenMatrix.identity();let t=new Un().setFromQuaternion(this.quaternion,"YXZ"),r=t.y;this.objectRealQuat.copy(this.quaternion),t.y=0,this.quaternion.setFromEuler(t),this.objXZQuat.copy(this.quaternion),this.objXZQuatInv.copy(this.objXZQuat).invert(),this.objXZRotMat.makeRotationFromQuaternion(this.quaternion),t.set(0,r,0),this.quaternion.setFromEuler(t),this.rot.setFromEuler(t),this.euler.setFromQuaternion(this.quaternion,"YXZ"),this.velocityTarget.set(0,0,0),this.velocity.set(0,0,0)}else this.object instanceof _a?this.object.matrixAutoUpdate=!0:this.object.updateMatrix();this.cameraFollow===!0&&(this.camera.quaternion.copy(this.quat0Cam),this.camera.position.copy(this.position0Cam),this.camera.scale.copy(this.scale0Cam),this.camera.hiddenMatrix.copy(this.hiddenMatrix0Cam),this.camera.matrixAutoUpdate=!0),this.controlsManager.requestRender()}activate(){this.instantiateActions(),this.domElement.ownerDocument.addEventListener("pointerdown",this.onPointerDown),this.domElement.ownerDocument.addEventListener("keydown",this.onKeyDown),this.domElement.ownerDocument.addEventListener("keyup",this.onKeyUp),this.domElement.ownerDocument.addEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.addEventListener("pointerlockerror",this.onPointerlockError),this.domElement.ownerDocument.addEventListener("visibilitychange",this.handleVisibilityChange)}deactivate(){this.disposeActions(),this.domElement.ownerDocument.removeEventListener("pointerdown",this.onPointerDown),this.domElement.ownerDocument.removeEventListener("keydown",this.onKeyDown),this.domElement.ownerDocument.removeEventListener("keyup",this.onKeyUp),this.domElement.ownerDocument.removeEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.removeEventListener("pointerlockerror",this.onPointerlockError),this.domElement.ownerDocument.removeEventListener("visibilitychange",this.handleVisibilityChange)}dispose(){var e;this.deactivate(),(e=this.navMeshPathDest)!=null&&e.parent&&this.page.remove(this.navMeshPathDest)}instantiateActions(){let e=this.data,t=this.sharedAssets;e.gameActions!==void 0&&(this.actions={},jS.list.forEach(r=>{this.actions[r]=rs({...e,disabled:!1,type:"GameControl"},e.gameActions[r],this.page,t,this.controlsManager.eventManager,this.object)})),this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.dispatchStopEvent("jump"),this.dispatchStartEvent("idle"),this.initialAction&&(this.initialAction=!1),console.log("instantiateActions",this.actions)}disposeActions(){this.initialAction=!1,this.dispatchStopEvent("idle"),this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.dispatchStopEvent("jump"),Gn(this.actions.idle),Gn(this.actions.move),Gn(this.actions.run),Gn(this.actions.jump)}dispatchStartEvent(e){this.actions[e]!==void 0&&(this.actionState[e]||(this.actionState[e]=!0,this.actions[e].Transition.forEach(t=>{t.play()}),this.actions[e].Animation.forEach(t=>{t.play(this.initialAction===!1)}),this.actions[e].Create.forEach(t=>{t.dispatchStart()}),this.actions[e].Audio.forEach(t=>{t.dispatchGameControl("start")})))}dispatchStopEvent(e){this.actions[e]!==void 0&&(!this.actionState[e]||(this.actionState[e]=!1,this.actions[e].Transition.forEach(t=>{t.stop(),t.object.currentState!==null&&t.object.changeSelectedState(null,{scene:this.page.scene,shared:this.sharedAssets})}),this.actions[e].Create.forEach(t=>{t.dispatchStop()}),this.actions[e].Audio.forEach(t=>{t.dispatchGameControl("stop")})))}get colliderWorldPosition(){return Ia.copy(this.collider.position).applyQuaternion(this.objectRealQuat).add(this.position)}update(e,t,r){var o,l,u,h,c,d,f,m,p;if(this.gravity<0?this.position.y<this.resetYPosition:this.position.y>this.resetYPosition)return this.reset(!0),!0;this.sharedGameControlGlobals.gamePads.forEach(this.copyVRGamePadValues);let i=(this.isFirstFrame?16.6:e)/1e3;this.isFirstFrame&&(this.isFirstFrame=!1);let n=i*60,a=!1;if(this.usePhysics&&this.collisionEnabled){let g=os.set(0,(this.velocity.y===0?this.pixelsPerMeter*Math.max(Math.abs(this.gravity)/(10*uj),1)*(this.gravity>0?1:-1):this.velocity.y)*i,0).divideScalar(this.pixelsPerMeter),v=this.sharedGameControlGlobals.rapierWorld.castShape(this.colliderWorldPosition.divideScalar(this.pixelsPerMeter),this.colliderWorldQuat,g,(o=this.object.rigidBody)==null?void 0:o.collider(0).shape,1,!1,16,void 0,void 0,this.object.rigidBody);if(v){this.onObject=!0,this.groundNormal.set(v.normal2.x,v.normal2.y,v.normal2.z).applyQuaternion(this.colliderWorldQuat).negate(),this.alignToGround&&this.groundTiltAdjustment(this.groundNormal),Math.acos(this.groundNormal.y)<this.slopeThresh&&(a=!0),((l=v.collider.parent())==null?void 0:l.bodyType())===0&&Math.acos(this.groundNormal.y)*(180/Math.PI)>45&&(this.onObject=!1);let y=v.collider.parent();this.groundYRotation=0,this.groundVelocity.set(0,0,0);for(let x of this.sharedGameControlGlobals.entitiesWithTransformAnim)if(x.rigidBody===y&&x.userData.isFollowingObj!==this.object.uuid){(x.hasNonUniformScale?x.matrixWorldRigid:x.matrixWorld).decompose(Ia,ju,os),this.groundVelocity.subVectors(Ia,x.prevT),this.object.getWorldPosition(os).add(this.collider.position).sub(Ia),this.groundYRotation=Fl.setFromQuaternion(ju).y-x.prevR.y,Zc.copy(os).applyAxisAngle(rl,this.groundYRotation),this.groundVelocity.add(Zc.sub(os)).divideScalar(i);break}}else this.onObject=!1}if(this.moveMode==="walk"&&this.collisionEnabled&&(this.movementState.jump===1&&this.onObject&&(this.velocityTarget.y=this.jumpPower,this.movementState.jump=0,this.dispatchStopEvent("idle"),this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.dispatchStopEvent("jump"),this.dispatchStartEvent("jump"),this.onObject=!1),this.onObject?this.velocityTarget.y/=2:this.velocityTarget.y+=this.gravity*n),this.moveMode==="fly"&&(this.velocityTarget.y=(this.movementState.movePosY-this.movementState.moveNegY)*this.speedTranslate),this.directionXZ.z=this.movementState.movePosZ-this.movementState.moveNegZ,this.directionXZ.x=this.movementState.movePosX-this.movementState.moveNegX,this.forwardDir==="+z"&&this.directionXZ.multiplyScalar(-1),this.directionXZ.manhattanLength()>0&&(this.path=[]),this.navMeshPathDest){let g=this.navMeshPathDest.material;if(this.moveMode==="walk"&&this.path.length>1){this.navMeshPathDest.position.copy(this.path[this.path.length-1]),this.navMeshPathDest.parent||this.page.add(this.navMeshPathDest);let v=Ia.subVectors(this.path[1],this.position),y=os.subVectors(this.path[1],this.path[0]);v.dot(y)<0?this.path.shift():(this.directionXZ.x=y.x,this.directionXZ.z=y.z),g.opacity=g.userData.opacity0}else g.opacity-=.05*g.userData.opacity0,this.navMeshPathDest.material.opacity<=0&&this.navMeshPathDest.parent&&this.page.remove(this.navMeshPathDest)}this.directionXZ.normalize(),this.movementState.run?this.moveForce=this.runMultiplier:this.moveForce=1,this.velocityTarget.z=this.directionXZ.z*this.speedTranslate*this.moveForce,this.velocityTarget.x=this.directionXZ.x*this.speedTranslate*this.moveForce,(this.moveMode==="walk"?this.velocityTarget.x+this.velocityTarget.z===0:this.velocityTarget.manhattanLength()===0)?this.lerpFactorPos.setScalar(this.lerpFactorPosEnd):this.lerpFactorPos.setScalar(this.lerpFactorPosStart),this.moveMode==="walk"&&(this.lerpFactorPos.y=1),this.didHit===!1&&this.pushedVelocity.manhattanLength()===0||this.usePhysics===!1?(this.velocity.x+=(this.velocityTarget.x-this.velocity.x)*(1-(1-this.lerpFactorPos.x)**n),this.velocity.y+=(this.velocityTarget.y-this.velocity.y)*(1-(1-this.lerpFactorPos.y)**n),this.velocity.z+=(this.velocityTarget.z-this.velocity.z)*(1-(1-this.lerpFactorPos.z)**n)):this.velocity.copy(this.velocityTarget),(this.moveMode==="walk"?this.velocity.x**2+this.velocity.z**2<this.speedTranslate:this.velocity.lengthSq()<this.speedTranslate)?(this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.onObject&&(this.dispatchStopEvent("jump"),this.dispatchStartEvent("idle"))):(this.dispatchStopEvent("idle"),this.onObject&&(this.dispatchStopEvent("jump"),this.movementState.run?(this.dispatchStopEvent("move"),this.dispatchStartEvent("run")):(this.dispatchStopEvent("run"),this.dispatchStartEvent("move"))));let s=M4e.copy(this.velocity);if(this.orientMode!=="none"&&this.isFirstPerson===!1){let g=os.copy(s);g.y=0,s.set(0,s.y,g.length()*(this.forwardDir==="+z"?1:-1))}if(this.directionXZ.manhattanLength()>0&&this.orientMode!=="none")if(this.orientWith==="camera"&&this.path.length<=1){let g=Ia;this.camera.getWorldDirection(g);let v=Zc.copy(rl).multiplyScalar(g.dot(rl));g.sub(v);let y=os.copy(this.directionXZ);y.x*=-1,this.rot.y=g.angleTo(y)*(g.cross(y).y>0?-1:1)+this.rotationAccumWhenOrientWithCamera}else this.rot.y=(this.path.length>1?0:this.euler.y)+Math.atan2(-this.directionXZ.z,this.directionXZ.x)+Math.PI/2*(this.forwardDir==="+z"?1:-1);if(Fl.setFromVector3(this.rot),this.moveMode==="walk"&&(Fl.x=0),s.applyEuler(Fl),a&&(ju.setFromUnitVectors(rl,this.groundNormal),s.applyQuaternion(ju)),r){let g=Fl.set(0,this.vrEulerYOffset*cj,0);r.applyEuler(g),s.x+=r.x,s.z+=r.z,this.nonColliderPosOffset.elements[13]+=r.y*i}if(this.usePhysics===!0){let g=os;this.pushedVelocity.set(0,0,0);for(let v of this.sharedGameControlGlobals.entitiesWithTransformAnim){let y=Zc.setFromMatrixPosition(v.matrixWorld).sub(v.prevT).divideScalar(i).divideScalar(this.pixelsPerMeter),x=v.rigidBody.collider(0).castCollider(y,this.object.rigidBody.collider(0),Ia.copy(s).divideScalar(this.pixelsPerMeter),i,!1);y.multiplyScalar(this.pixelsPerMeter);let b=pr.is(v)?v:v.object;if(x!==null&&this.lastHitObj!==b){let _;v instanceof ya&&(_=v);let w=this.sharedGameControlGlobals.entityToCollisionEvents[b.uuid];if(w)for(let E of w)E.data.target==="character"&&(E.dispatch(_),b.dispatchEvent(H3));this.lastHitObj=b}if(x!==null){this.pushedVelocity.copy(y),g.copy(x.normal1).applyQuaternion(v.quaternion);break}}if(this.pushedVelocity.manhattanLength()!==0){let v=g.dot(s);v<0&&s.addScaledVector(g,-v),s.add(this.pushedVelocity)}else s.add(this.groundVelocity)}if(this.rotDirection.y=Number(this.movementState.rotPosY)-Number(this.movementState.rotNegY),this.rotDirection.x=Number(this.movementState.rotPosX)-Number(this.movementState.rotNegX),this.rotDirection.normalize(),this.rotationMode==="normal"&&(this.movementState.rotPosX||this.movementState.rotNegX)||this.rotationMode==="steer"&&(this.movementState.rotPosX||this.movementState.rotNegX)&&(this.movementState.movePosZ||this.movementState.moveNegZ||this.moveMode==="walk")?this.rotVelocityStick.x=-this.rotDirection.x*this.speedOrbit*this.rotForce:this.rotVelocityStick.x=0,this.rotationMode==="normal"&&(this.movementState.rotPosY||this.movementState.rotNegY)||this.rotationMode==="steer"&&(this.movementState.rotPosY||this.movementState.rotNegY)&&(this.movementState.movePosZ||this.movementState.moveNegZ)?this.rotVelocityStick.y=-this.rotDirection.y*this.speedOrbit*this.rotForce:this.rotVelocityStick.y=0,this.rotVelocityTarget.subVectors(this.eulerDelta.divideScalar(i),this.rotVelocityStick),this.rotVelocityTarget.manhattanLength()===0?this.rotVelocity.lerp(this.rotVelocityTarget,1-(1-this.lerpFactorRotEnd)**n):this.rotVelocity.lerp(this.rotVelocityTarget,1-(1-this.lerpFactorRotStart)**n),this.euler.x+=this.rotVelocity.x*i,this.euler.y+=this.rotVelocity.y*i+this.groundYRotation,this.rotVelocityTarget.y===0&&this.directionXZ.manhattanLength()===0?this.rotationAccumWhenOrientWithCamera=0:(this.cameraFollow===!1||this.cameraYAxis==="Locked")&&(this.rotationAccumWhenOrientWithCamera+=this.rotVelocity.y*i),this.isFirstPerson===!1&&this.orientMode!=="none"&&this.directionXZ.manhattanLength()>0){if(this.orientMode==="radial"){this.objectToCamXZ.copy(this.objectToCamXZ0).applyAxisAngle(rl,this.euler.y-this.euler0.y);let g=os.copy(this.objectToCamXZ).normalize(),v=Zc.copy(s).multiplyScalar(i);v.y=0;let y=v.sub(Ia.copy(g).multiplyScalar(v.dot(g))).cross(g).y;this.euler.y-=Math.atan2(y,this.objectToCamXZ.length())}}else this.rot.y+=this.rotVelocity.y*i+this.groundYRotation,this.rotVelocityTarget.y!==0&&(this.cameraFollow===!1||this.cameraYAxis==="Locked")&&(this.euler.y=this.rot.y);if(this.cameraFollow===!0&&(this.moveMode==="walk"?this.cameraXAxis==="Limit"?this.euler.x=bt.clamp(this.euler.x,-this.maxPolarAngle+this.cameraPolarOffset+1e-6,-this.minPolarAngle+this.cameraPolarOffset-1e-6):this.euler.x=bt.clamp(this.euler.x,-this.PI_2+this.cameraPolarOffset,this.PI_2+this.cameraPolarOffset):this.cameraXAxis==="Limit"&&(this.euler.x=bt.clamp(this.euler.x,-this.PI_2,this.PI_2))),this.moveMode==="fly"?this.rot.x=this.euler.x:this.isFirstPerson&&(t?(Fl.copy(t),Fl.y=0):(Fl.copy(this.euler),Fl.y=0),this.nonColliderRotOffset.makeRotationFromEuler(Fl)),t&&(this.moveMode==="walk"?(this.rot.y=t.y,this.rot.x=0,this.rot.z=0):this.rot.setFromEuler(t),this.rot.y+=this.vrEulerYOffset*cj),tl.setFromAxisAngle(A4e,this.rot.x),ju.setFromAxisAngle(rl,this.rot.y),ju.multiply(tl),tl.setFromAxisAngle(T4e,this.rot.z),ju.multiply(tl),this.quaternion.copy(ju),this.objectRealQuat.multiplyQuaternions(this.quaternion,this.objXZQuat),this.objectRealQuat.multiply(this.objXZQuat),this.colliderWorldQuat.copy(this.objectRealQuat).multiply(this.collider.rotation),this.collisionEnabled)if(this.usePhysics){let g=os.copy(s).multiplyScalar(i/this.pixelsPerMeter),v=null;this.didHit=!1;let y=new T;for(let x=0;x<5;x++){let b=g.length(),_=Zc.copy(g).normalize();if(v=this.sharedGameControlGlobals.rapierWorld.castShape(this.colliderWorldPosition.divideScalar(this.pixelsPerMeter).add(y),this.colliderWorldQuat,_,(u=this.object.rigidBody)==null?void 0:u.collider(0).shape,b,!1,24,void 0,void 0,this.object.rigidBody),v!==null){this.didHit=!0;let w=this.sharedGameControlGlobals.colliderToEntity.get(v.collider.handle);if(w!==this.lastHitObj&&x===0){this.lastHitObj=w;let M=this.sharedGameControlGlobals.entityToCollisionEvents[w==null?void 0:w.uuid];if(M){for(let P of M)if(P.data.target==="character"){let I=((h=this.sharedGameControlGlobals.rapierWorld)==null?void 0:h.getCollider(v.collider.handle))._parent,k;if(w.cloner){for(let L of w.cloner.children)if(L.rigidBody===I){k=L;break}}P.dispatch(k),w.dispatchEvent(H3)}}}let E=aj.set(v.normal2.x,v.normal2.y,v.normal2.z).applyQuaternion(this.colliderWorldQuat),S=sj.copy(_).multiplyScalar(v.toi).dot(E),C=v.toi;if(C===0&&(this.position.y+=this.offset*this.pixelsPerMeter),S>this.offset&&(C=v.toi*(S-this.offset)/S,y.addScaledVector(_,C)),g.copy(_).multiplyScalar(b-C),Math.acos(-E.y)>this.slopeThresh){let M=this.colliderWorldPosition.divideScalar(this.pixelsPerMeter).add(y),P=Zc.copy(v.witness2).applyQuaternion(this.colliderWorldQuat);P.y=0;let I=M.add(P);I.y+=this.stepThresh;let k=this.sharedGameControlGlobals.rapierWorld.castShape(I,this.colliderWorldQuat,g,(c=this.object.rigidBody)==null?void 0:c.collider(0).shape,1,!1,24,void 0,void 0,this.object.rigidBody);k!==null&&k.toi===0&&(E.y=0,E.normalize())}g.addScaledVector(E,-g.dot(E))}else{x===0&&this.directionXZ.manhattanLength()!==0&&(this.lastHitObj=null),y.add(g);break}}this.position.addScaledVector(y,this.pixelsPerMeter),(d=this.object.rigidBody)==null||d.setTranslation(Ia.copy(this.position).divideScalar(this.pixelsPerMeter),!0),(f=this.object.rigidBody)==null||f.setRotation(tl.copy(this.quaternion).premultiply(this.groundTilt).multiply(this.objXZQuat),!0)}else{let g=this.onObject?1:5,v=s.multiplyScalar(i/g);for(let y=0;y<g;y++)this.position.add(v),this.collisionAdjustment(i/g)}else this.position.addScaledVector(s,i);if(this.moveMode==="walk"&&this.onObject&&(this.velocityTarget.y=0,this.velocity.y=0),this.quaternion.premultiply(this.groundTilt).multiply(this.objXZQuat),this.object.matrix.compose(this.position,this.quaternion,this.scale),this.object.matrixWorldNeedsUpdate=!0,this.object.matrix.multiply(this.nonColliderPosOffset).multiply(this.nonColliderRotOffset),this.quaternion.premultiply(this.groundTiltInv).multiply(this.objXZQuatInv),this.cameraFollow===!0){this.updateFollowArms();let g=this.objectToTarget.add(this.position),v=this.targetToCamera.add(g);aT.lookAt(v,g,rl).setPosition(v),aT.decompose(this.targetPos,this.targetQuat,Ia),this.camera.quaternion.slerp(this.targetQuat,1-(1-this.lerpFactorRotCamera)**n),this.camera.position.lerp(this.targetPos,1-(1-this.lerpFactorPosCamera)**n),this.camera.updateMatrix(),this.camera.updateMatrixWorld(),this.cameraYAxis==="Limit"&&this.orientMode==="cartesian"&&(this.euler.y=bt.clamp(this.euler.y,this.minAzimuthAngleRel,this.maxAzimuthAngleRel)),this.euler.x=bt.clamp(this.euler.x,-this.PI_2+(this.cameraPolarOffset<0?this.cameraPolarOffset:0),this.PI_2+(this.cameraPolarOffset>0?this.cameraPolarOffset:0))}return this.eulerDelta.set(0,0,0),this.object.dispatchEvent(k4e),this.path.length<2&&this.lastPosition.distanceToSquared(this.position)<this.threshEndTranslate&&Math.abs(this.rotVelocity.x)<this.threshEndRotVel&&Math.abs(this.rotVelocity.y)<this.threshEndRotVel&&(this.camera===void 0||this.isFirstPerson||this.lastCameraPosition.distanceToSquared(this.camera.position)<this.threshEndTranslate&&8*(1-this.lastCameraQuaternion.dot(this.camera.quaternion))<this.threshEndRotate)&&(this.moveMode==="fly"||this.onObject===!0||this.collisionEnabled===!1)&&(this.navMeshPathDest===null||this.navMeshPathDest.material.opacity<-.04*((p=(m=this.navMeshPathDest)==null?void 0:m.material)==null?void 0:p.userData.opacity0))?!1:(this.camera&&(this.lastCameraPosition.copy(this.camera.position),this.lastCameraQuaternion.copy(this.camera.quaternion)),this.lastPosition.copy(this.position),this.object.dispatchEvent(R4e),!0)}updateFollowArms(){this.objectToTarget.copy(this.objectToTarget0),this.targetToCamera.copy(this.targetToCamera0);let e=tl.setFromAxisAngle(rl,this.cameraYAxis==="Limit"&&this.orientMode!=="radial"?bt.clamp(this.euler.y-this.euler0.y,this.minAzimuthAngleRel,this.maxAzimuthAngleRel):this.euler.y-this.euler0.y);(this.cameraYAxis!=="Locked"||this.orientMode==="radial")&&this.objectToTarget.applyQuaternion(e);let t;this.cameraXAxis==="Limit"?t=bt.clamp(this.euler.x,-this.maxPolarAngle+this.cameraPolarOffset+1e-6,-this.minPolarAngle+this.cameraPolarOffset-1e-6):t=bt.clamp(this.euler.x,-this.PI_2+this.cameraPolarOffset+1e-6,this.PI_2+this.cameraPolarOffset-1e-6);let r=Ia.copy(this.cameraPolarAxis0);(this.cameraYAxis!=="Locked"||this.orientMode==="radial")&&r.applyQuaternion(e);let i=ju.setFromAxisAngle(r,t);this.cameraYAxis!=="Locked"&&this.targetToCamera.applyQuaternion(e),this.cameraXAxis!=="Locked"&&this.targetToCamera.applyQuaternion(i)}groundTiltAdjustment(e){rl.angleTo(e)*180/Math.PI<15||rl.angleTo(e)*180/Math.PI>85?tl.identity():tl.setFromUnitVectors(rl,e),this.groundTilt.slerp(tl,.06),this.groundTiltInv.copy(this.groundTilt).invert()}collisionAdjustment(e){var n;let t=sj.set(0,0,0);this.object.matrix.compose(this.position,this.quaternion,this.scale);let r=aT.multiplyMatrices(this.object.matrix,this.objXZRotMat).multiply(this.collider.matrix).decompose(Ia,tl,os).compose(Ia,tl,lj);this.sharedGameControlGlobals.entitiesWithTransformAnim.forEach(a=>{if(a===this.object||a.isDescendantOf(this.object))return;fo.makeEmpty(),a.updateMatrixWorldSVD();let s=a.matrixWorldRigid,o=oj.copy(s).invert(),l=C4e.copy(oj).multiply(r);Ln.copy(this.collider.segment),Ln.start.applyMatrix4(l),Ln.end.applyMatrix4(l);let u=aj.copy(this.position).applyMatrix4(o);fo.expandByPoint(Ln.start),fo.expandByPoint(Ln.end),fo.min.addScalar(-this.collider.radius),fo.max.addScalar(this.collider.radius),a.bvhGeometry.boundsTree.shapecast({traverseBoundsOrder(h){return h.distanceToPoint(Ln.end)},intersectsBounds:h=>h.intersectsBox(fo),intersectsTriangle:h=>{let c=Ia,d=os,f=h.closestPointToSegment(Ln,c,d);if(f<this.collider.radius){let m=this.collider.radius-f,p=d.sub(c).normalize(),g=Zc.copy(u);g.addScaledVector(p,m);let v=g.applyMatrix4(s).sub(this.position);t.add(v),Ln.start.addScaledVector(p,m),Ln.end.addScaledVector(p,m)}}})}),fo.makeEmpty(),Ln.copy(this.collider.segment),Ln.start.applyMatrix4(r),Ln.end.applyMatrix4(r),fo.expandByPoint(Ln.start),fo.expandByPoint(Ln.end),fo.min.addScalar(-this.collider.radius),fo.max.addScalar(this.collider.radius),(n=this.sharedGameControlGlobals.staticMeshBVH)==null||n.shapecast({traverseBoundsOrder(a){return a.distanceToPoint(Ln.end)},intersectsBounds:a=>a.intersectsBox(fo),intersectsTriangle:a=>{let s=Ia,o=os,l=a.closestPointToSegment(Ln,s,o);if(l<this.collider.radius){let u=this.collider.radius-l,h=o.sub(s).normalize();this.alignToGround&&this.groundTiltAdjustment(h),t.addScaledVector(h,u),Ln.start.addScaledVector(h,u),Ln.end.addScaledVector(h,u)}}}),this.onObject=Math.abs(t.y)>Math.abs(e*this.velocity.y*.25),this.onObject&&this.dispatchStopEvent("jump");let i=Math.max(0,t.length()-1e-5);t.normalize().multiplyScalar(i),this.position.add(t)}},CX=j3;CX.isLocked=!1;var L4e=pd(e7());function nc(e,t){let r=new wt;if(!e.getAttribute("position"))return r.setAttribute("position",new it([],3)),r.setIndex([]),r;let{positions:i,triIndices:n}=HE(e.getAttribute("position"),e.getIndex());return r.setAttribute("position",new it(i,3)),r.setIndex(n),t&&r.applyMatrix4(t),r}var B4e=new ze,N4e=new ze,Ul=[[0,0,0],[0,0,0],[0,0,0]];function AX(e){let t=e.elements;Ul[0][0]=t[0],Ul[0][1]=t[4],Ul[0][2]=t[8],Ul[1][0]=t[1],Ul[1][1]=t[5],Ul[1][2]=t[9],Ul[2][0]=t[2],Ul[2][1]=t[6],Ul[2][2]=t[10];let{u:r,v:i}=(0,L4e.SVD)(Ul),n=B4e.set(r[0][0],r[0][1],r[0][2],0,r[1][0],r[1][1],r[1][2],0,r[2][0],r[2][1],r[2][2],0,0,0,0,1),a=N4e.set(i[0][0],i[0][1],i[0][2],0,i[1][0],i[1][1],i[1][2],0,i[2][0],i[2][1],i[2][2],0,0,0,0,1);return n.multiply(a.transpose())}var z4e=class extends G7{constructor(){super(),this.layers.enable(3),this.layers.enable(8)}setFromCamera(e,t){t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,-1).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):t.isPerspectiveCamera?(this.ray.origin.set(e.x,e.y,-1).unproject(t),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):console.error("Raycaster: Unsupported camera type.")}intersectVisibleObjects(e,t=!0,r=[]){return e.forEach(i=>{i.visible&&this.intersectObject(i,t,r)}),r}createRaycastLineHelper(){let e=new md({color:65280,linewidth:10}),t=new T(this.ray.origin.x,this.ray.origin.y,this.ray.origin.z),r=new T(this.ray.direction.x,this.ray.direction.y,this.ray.direction.z),i=this.camera.far-this.camera.near,n=new T().addVectors(t,r.multiplyScalar(i)),a=new wt;return a.setFromPoints([t,n]),new fS(a,e)}},TX=e=>e instanceof M1||e instanceof mg;function F4e(e,t){return e.distance-t.distance}function PX(e,t,r){if(!(!ic(t)||!t.visible)){cl(t)&&t.raycast(e,r);for(let i of t.children)PX(e,i,r)}}function Zw(e,t,r,i=!1){if(!i&&!r.some(a=>e2(e,a)!==void 0))return[];let n=[];return t.children.forEach(a=>PX(e,a,n)),n.sort(F4e),n}function V3(e){let t=[];if(e.length){let r=e[0].object;ic(r)&&t.push(r);let i=r.parent;for(;i;)TX(i)&&t.push(i),i=i.parent}return t}function e2(e,t){if(cl(t)){if(t.visible){let r=[];return t.raycast(e,r),r.length?r[0]:void 0}}else if(TX(t))return DX(e,t)}function DX(e,t){if(!(!ic(t)||!t.visible)){if(cl(t)){let r=[];if(t.raycast(e,r),r.length)return r[0]}for(let r of t.children){let i=DX(e,r);if(i)return i}}}function U4e(e,t,r){return{x:(e-(r.left+window.scrollX))/r.width*2-1,y:-((t-(r.top+window.scrollY))/r.height)*2+1}}var j4e=class{constructor(e,t,r,i,n,a,s,o){this.renderer=e,this.publish=t,this.scene=r,this.getCamera=i,this.sharedAssets=n,this.requestRender=a,this.isExport=s,this.frame=o,this.raycaster=new z4e,this.raycasterNeedsUpdate=!0,this._useWindowEvents=!1,this._useWindowEvents=t.mouseEventTarget==="window",this.domElement=e.domElement,this.eventElement=this._useWindowEvents?window:e.domElement}get stopRaycast(){return this.publish.stopRaycast}get page(){return this.scene.activePage}set useWindowEvents(e){this._useWindowEvents=e,this.eventElement=e?window:this.renderer.domElement}get useWindowEvents(){return this._useWindowEvents}updateRaycaster(e){var n;if(!this.raycasterNeedsUpdate)return;this.raycasterNeedsUpdate=!1;let{pageX:t,pageY:r}=((n=e.touches)==null?void 0:n.length)>0?e.touches[0]:e,i=this.domElement.getBoundingClientRect();this.raycaster.setFromCamera(U4e(t,r,i),this.getCamera())}},OX=(e=>(e[e.keydown=0]="keydown",e[e.keyup=1]="keyup",e[e.pointerdown=2]="pointerdown",e[e.pointerup=3]="pointerup",e[e.pointermove=4]="pointermove",e[e.wheel=5]="wheel",e[e.scroll=6]="scroll",e))(OX||{}),Pl=class{constructor(e){this.eventContext=e,this.domEventsNeeded=new Set,this.hasVideoAction=!1}connect(){}disconnect(){}},qk=[["start","Start"],["keyDown","KeyDown"],["keyUp","KeyUp"],["mouseDown","MouseDown"],["mouseUp","MouseUp"],["mouseHover","MouseHover"],["collision","Collision"],["lookAt","LookAt"],["follow","Follow"],["scroll","Scroll"]],IX=e=>{var t;return(t=qk.find(([r,i])=>i===e))==null?void 0:t[0]},ax=e=>{var t;return(t=qk.find(([r])=>r===e))==null?void 0:t[1]},V4e=(e,t)=>{let r=IX(e);if(r){let i=new CustomEvent(r,{bubbles:!0});return Object.defineProperty(i,"target",{writable:!1,value:t}),i}},H4e=class extends Pl{constructor(e){super(e),this.objectsPerEvents=new Map,this.splineEvents={},this.onBeginEvent=r=>{var a;if(!r.eventName||!r.target||r.eventName==="Scroll")return;let i=(a=this.splineEvents[IX(r.eventName)])==null?void 0:a[r.target.uuid];if(!i)return;r.eventName==="Scroll"&&r.deltaY!==void 0&&Object.assign(i,{deltaY:r.deltaY});let{domElement:n}=this.eventContext;n.dispatchEvent(i)};let{page:t}=this.eventContext;t.traverseEntity(r=>{var i,n;if((i=r.data)!=null&&i.events.length){for(let[a,s]of qk)if(r.data.events.some(o=>o.data.type===s&&!o.data.disabled)){this.objectsPerEvents.has(a)?(n=this.objectsPerEvents.get(a))==null||n.push(r):this.objectsPerEvents.set(a,[r]);let o={id:r.uuid,name:r.name},l=V4e(s,o),u=this.splineEvents[a];u?u[r.uuid]=l:this.splineEvents[a]={[r.uuid]:l}}}})}connect(){this.objectsPerEvents.forEach(e=>{e.forEach(t=>{t.addEventListener("beginEvent",this.onBeginEvent)})})}disconnect(){this.objectsPerEvents.forEach(e=>{e.forEach(t=>{t.removeEventListener("beginEvent",this.onBeginEvent)})})}},G4e=class{constructor(e,t,r,i,n,a){if(this.id=e,this.data=t,this.object=r,this.entered=!1,this.alreadyPlayedNonTogglingActions=new Set,this.useToggle=t.runMode==="Toggle",(t.type==="KeyDown"||t.type==="KeyUp"||t.type==="KeyPress")&&!t.key)throw new Error("Missing property");this.actions=rs(t,t.actions,i,n,a,r)}disconnect(){Gn(this.actions)}dispatchHeld(e){this.actions.Create.forEach(t=>{e&&t.dispatchThrottled.cancel(),t.dispatchThrottled()})}dispatch(e=!1){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this?(t.object.currentTransitionEvent=this,t.init()):this.data.runMode==="Once"&&this.alreadyPlayedNonTogglingActions.add(t)}),this.useToggle?(this.actions.Transition.forEach(t=>{t.toggle()}),this.actions.Animation.forEach(t=>{t.toggle()}),this.actions.SwitchCamera.forEach(t=>{t.toggle()})):this.data.type==="MousePress"||this.data.type==="KeyPress"?this.entered||(this.entered=!0,this.actions.Transition.forEach(t=>t.playFromCurrent()),this.actions.Animation.forEach(t=>t.playFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.playFromCurrent()),this.actions.Create.forEach(t=>t.dispatchStart())):(this.actions.Transition.some(t=>t.playing)||this.actions.Transition.forEach(t=>{this.alreadyPlayedNonTogglingActions.has(t)===!1&&t.play()}),this.actions.SwitchCamera.some(t=>t.playing)||this.actions.SwitchCamera.forEach(t=>{t.play()}),this.actions.Animation.forEach(t=>{t.play()})),this.actions.Link.forEach(t=>{t.dispatch()}),this.actions.SceneTransition.forEach(t=>{t.dispatch()}),e===!1&&this.actions.Create.forEach(t=>{t.dispatch()}),this.actions.Destroy.forEach(t=>{t.dispatch()}),this.actions.Reset.forEach(t=>{t.dispatch()}),this.actions.Audio.forEach(t=>{t.dispatchBasic()}),this.actions.Video.forEach(t=>{t.dispatchBasic()}),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch())}dispatchRelease(){this.entered&&(this.entered=!1,this.actions.Transition.forEach(e=>e.reverseFromCurrent()),this.actions.Animation.forEach(e=>e.reverseFromCurrent()),this.actions.SwitchCamera.forEach(e=>e.reverseFromCurrent()),this.actions.Create.forEach(e=>e.dispatchStop()))}dispatchUserEvent(e){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),e?(this.actions.Transition.forEach(t=>t.reverseFromCurrent()),this.actions.Animation.forEach(t=>t.reverseFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.reverseFromCurrent())):(this.actions.Transition.forEach(t=>t.playFromCurrent()),this.actions.Animation.forEach(t=>t.playFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.playFromCurrent())),this.actions.Link.forEach(t=>{t.dispatch()}),this.actions.SceneTransition.forEach(t=>{t.dispatch()}),this.actions.Create.forEach(t=>{t.dispatch()}),this.actions.Destroy.forEach(t=>{t.dispatch()}),this.actions.Reset.forEach(t=>{t.dispatch()}),this.actions.Audio.forEach(t=>{t.dispatchBasic()}),this.actions.Video.forEach(t=>{t.dispatchBasic()}),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch())}},W4e=class extends Pl{constructor(e,t,r){super(e),this.useForRaycastProperty=r,this.objectsPerTypes={MouseDown:[],MouseUp:[],MousePress:[],KeyDown:[],KeyUp:[],KeyPress:[]},this.canvasMouseEvents=[],this.eventsPerObjects={MouseDown:{},MouseUp:{},MousePress:{},KeyDown:{},KeyUp:{},KeyPress:{}},this.heldKeys={},this.heldKeysPress={},this._prevObjects=[],this.sceneInterects=null,this.onCanvasRaycast=a=>{if(this.useForRaycastProperty===!0&&this.sceneInterects===null){this.eventContext.updateRaycaster(a);let{raycaster:s,page:o}=this.eventContext,l=Zw(s,o,[],!0);this.sceneInterects=l,l.length&&(this.eventContext.sharedAssets.raycastProperty={x:l[0].point.x,y:l[0].point.y,z:l[0].point.z,objX:l[0].object.matrixWorld.elements[12],objY:l[0].object.matrixWorld.elements[13],objZ:l[0].object.matrixWorld.elements[14]})}},this.onCanvasMouseDown=a=>{(a.target===this.eventContext.domElement||a.target.tagName==="SPLINE-VIEWER")&&this.canvasMouseEvents.forEach(s=>{(s.data.type==="MouseDown"||s.data.type==="MousePress")&&(this.onCanvasRaycast(a),s.dispatch())})},this.onCanvasMouseUp=a=>{(a.target===this.eventContext.domElement||a.target.tagName==="SPLINE-VIEWER")&&this.canvasMouseEvents.forEach(s=>{s.data.type==="MouseUp"?(this.onCanvasRaycast(a),s.dispatch()):s.data.type==="MousePress"&&s.dispatchRelease()})},this.onMouseDown=a=>{It.length>1||(this.eventContext.updateRaycaster(a),this.handleMouseEvent("MouseDown"))},this.onMouseUp=a=>{It.length>1||(this.eventContext.updateRaycaster(a),this.handleMouseEvent("MouseUp"))},this.onMousePressDown=a=>{It.length>1||(this.eventContext.updateRaycaster(a),this.handleMousePressEvent())},this.onMousePressRelease=a=>{It.length>1||(this.eventContext.updateRaycaster(a),this.handleMousePressEvent(!0))},this.onKeyDown=a=>{this.heldKeys[a.key]||(this.handleKeyEvent(a,"KeyDown"),this.handleKeyEventHeld(a,"KeyDown",!0)),this.heldKeys[a.key]=!0},this.onKeyUp=a=>{this.handleKeyEvent(a,"KeyUp"),this.handleKeyEventHeld(a,"KeyUp",!0)},this.onKeyPressDown=a=>{this.heldKeysPress[a.key]?this.handleKeyEventHeld(a,"KeyPress"):(this.handleKeyEvent(a,"KeyPress"),this.handleKeyEventHeld(a,"KeyPress",!0)),this.heldKeysPress[a.key]=!0},this.onKeyPressUp=a=>{this.handleKeyEvent(a,"KeyPress",!0)},this.releaseHeldKey=a=>{delete this.heldKeys[a.key]},this.releaseHeldKeyPress=a=>{delete this.heldKeysPress[a.key]},this._onUserEvent=({eventName:a,target:s,reverse:o})=>{var u,h,c,d;if(!a||!s)return;let l=ax(a);l&&(l==="MouseDown"||l==="MouseUp"||l==="MousePress"?(s.dispatchEvent({type:"beginEvent",eventName:l}),(h=(u=this.eventsPerObjects[l])==null?void 0:u[s.uuid])==null||h.forEach(f=>{f.dispatchUserEvent(o)})):(l==="KeyDown"||l==="KeyUp"||l==="KeyPress")&&(s.dispatchEvent({type:"beginEvent",eventName:l}),(d=(c=this.eventsPerObjects[l])==null?void 0:c[s.uuid])==null||d.forEach(f=>{f.dispatchUserEvent()})))};let{page:i,sharedAssets:n}=this.eventContext;i.traverseEntity(a=>{var o,l;if(!((o=a.data)!=null&&o.events.length))return;let s=["MouseDown","MouseUp","MousePress","KeyDown","KeyUp","KeyPress"];for(let u of s){let h=this.eventsPerObjects[u];a.data.events.filter(({data:c})=>c.type===u&&c.disabled!==!0).forEach(({id:c,data:d})=>{try{let f=new G4e(c,d,a,i,n,t);f.actions.Video.length&&(this.hasVideoAction=!0),(d.type==="MouseDown"||d.type==="MouseUp"||d.type==="MousePress")&&(d.mode==="Canvas"||d.mode==="Window")?this.canvasMouseEvents.push(f):h[a.uuid]?h[a.uuid].push(f):h[a.uuid]=[f]}catch{}}),(l=h[a.uuid])!=null&&l.length&&this.objectsPerTypes[u].push(a)}})}connect(){var t,r,i,n,a,s;let{domElement:e}=this.eventContext;this.heldKeys={},this.heldKeysPress={},this.domEventsNeeded.clear(),e.addEventListener("pointerdown",this.onCanvasMouseDown),e.addEventListener("pointerup",this.onCanvasMouseUp),((t=this.objectsPerTypes.MouseDown)!=null&&t.length||this.useForRaycastProperty)&&(this.domEventsNeeded.add("pointerdown"),e.addEventListener("pointerdown",this.onMouseDown)),(r=this.objectsPerTypes.MouseUp)!=null&&r.length&&(this.domEventsNeeded.add("pointerup"),e.addEventListener("pointerup",this.onMouseUp)),(i=this.objectsPerTypes.MousePress)!=null&&i.length&&(this.domEventsNeeded.add("pointerdown"),e.addEventListener("pointerdown",this.onMousePressDown),this.domEventsNeeded.add("pointerup"),e.addEventListener("pointerup",this.onMousePressRelease)),(n=this.objectsPerTypes.KeyDown)!=null&&n.length&&(this.domEventsNeeded.add("keydown"),document.addEventListener("keydown",this.onKeyDown),document.addEventListener("keyup",this.releaseHeldKey)),(a=this.objectsPerTypes.KeyUp)!=null&&a.length&&(this.domEventsNeeded.add("keyup"),document.addEventListener("keyup",this.onKeyUp)),(s=this.objectsPerTypes.KeyPress)!=null&&s.length&&(this.domEventsNeeded.add("keydown"),document.addEventListener("keydown",this.onKeyPressDown),document.addEventListener("keyup",this.releaseHeldKeyPress),this.domEventsNeeded.add("keyup"),document.addEventListener("keyup",this.onKeyPressUp)),Object.entries(this.objectsPerTypes).forEach(([o,l])=>{l.forEach(u=>{u.addEventListener("userEvent",this._onUserEvent)})})}disconnect(){let{domElement:e}=this.eventContext;this.domEventsNeeded.clear(),this.heldKeys={},this.heldKeysPress={},e.removeEventListener("pointerdown",this.onCanvasMouseDown),e.removeEventListener("pointerup",this.onCanvasMouseUp),e.removeEventListener("pointerdown",this.onMouseDown),e.removeEventListener("pointerdown",this.onMousePressDown),e.removeEventListener("pointerup",this.onMouseUp),e.removeEventListener("pointerup",this.onMousePressRelease),document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp),document.removeEventListener("keydown",this.onKeyPressDown),document.removeEventListener("keyup",this.onKeyPressUp),document.removeEventListener("keyup",this.releaseHeldKey),Object.values(this.eventsPerObjects).forEach(t=>{Object.values(t).forEach(r=>{r.forEach(i=>{i.disconnect()})})}),this.canvasMouseEvents.forEach(t=>{t.disconnect()}),Object.entries(this.objectsPerTypes).forEach(([t,r])=>{r.forEach(i=>{i.removeEventListener("userEvent",this._onUserEvent)})})}handleMouseEvent(e){let{stopRaycast:t,raycaster:r,page:i}=this.eventContext,n=this.objectsPerTypes[e];if(!(!n.length&&!this.useForRaycastProperty)){if(t||this.useForRaycastProperty){let a;this.sceneInterects===null?a=Zw(r,i,n,this.useForRaycastProperty):(a=this.sceneInterects,this.sceneInterects=null),this.useForRaycastProperty&&a.length&&(this.eventContext.sharedAssets.raycastProperty={x:a[0].point.x,y:a[0].point.y,z:a[0].point.z,objX:a[0].object.matrixWorld.elements[12],objY:a[0].object.matrixWorld.elements[13],objZ:a[0].object.matrixWorld.elements[14]}),t&&V3(a).forEach(s=>{this.eventsPerObjects[e][s.uuid]&&this.handleObjectMouseEventDispatch(s,e)})}t||n.forEach(a=>{e2(r,a)&&this.handleObjectMouseEventDispatch(a,e)})}}handleMousePressEvent(e=!1){let t="MousePress",r=this.objectsPerTypes[t],i=[];if(r.length){if(!e){let{stopRaycast:n,raycaster:a,page:s}=this.eventContext;if(n){let o=Zw(a,s,r);i=V3(o)}else r.forEach(o=>{e2(a,o)&&i.push(o)})}this._prevObjects.length&&this._prevObjects.forEach(n=>{i.includes(n)||this.handleObjectMouseEventDispatchRelease(n,t)}),i.length&&i.forEach(n=>{this.handleObjectMouseEventDispatch(n,t)}),this._prevObjects=i}}handleObjectMouseEventDispatch(e,t){var r,i;e.dispatchEvent({type:"beginEvent",eventName:t}),(i=(r=this.eventsPerObjects[t])==null?void 0:r[e.uuid])==null||i.forEach(n=>{n.dispatch()})}handleObjectMouseEventDispatchRelease(e,t){var r,i;e.dispatchEvent({type:"beginEvent",eventName:t}),(i=(r=this.eventsPerObjects[t])==null?void 0:r[e.uuid])==null||i.forEach(n=>{n.dispatchRelease()})}handleKeyEvent(e,t,r=!1){this.objectsPerTypes[t].forEach(i=>{let n=this.eventsPerObjects[t][i.uuid];n.some(({data:a})=>"key"in a&&a.key===e.key)&&i.dispatchEvent({type:"beginEvent",eventName:t}),n.forEach(a=>{"key"in a.data&&a.data.key===e.key&&(r?a.dispatchRelease():a.dispatch(!0))})})}handleKeyEventHeld(e,t,r=!1){this.objectsPerTypes[t].forEach(i=>{this.eventsPerObjects[t][i.uuid].forEach(n=>{"key"in n.data&&n.data.key===e.key&&n.dispatchHeld(r)})})}},$4e=new T,Y4e=new T,RX=class{constructor(e,t,r,i,n){this.actionsIn=rs(e,e.inActions,r,i,n,t),this.actionsOut=rs(e,e.outActions,r,i,n,t)}disconnect(){Gn(this.actionsIn),Gn(this.actionsOut)}},q4e=class extends RX{constructor(e,t,r,i,n,a){super(t,r,i,n,a),this.id=e,this.data=t,this.object=r,this.stage="out",this.objects=[],this.onUpdateMatrix=()=>{for(let d of this.objects)if(!d.visible)return;let u=$4e.setFromMatrixPosition(this.objects[0].matrixWorld),h=Y4e.setFromMatrixPosition(this.objects[1].matrixWorld),c=u.distanceTo(h)<=this.distance?"in":"out";if(this.stage!==c){this.stage=c;let d=c==="in"?this.actionsIn:this.actionsOut;d.Audio.forEach(f=>f.dispatchConditional()),d.Video.forEach(f=>f.dispatchConditional()),d.Link.forEach(f=>f.dispatch()),d.Create.forEach(f=>f.dispatch()),d.Destroy.forEach(f=>f.dispatch()),d.Reset.forEach(f=>f.dispatch()),d.Transition.forEach(f=>{f.object.currentTransitionEvent!==this&&(f.object.currentTransitionEvent=this),f.init()}),d.Transition.forEach(f=>f.play()),d.Animation.forEach(f=>f.play()),d.SwitchCamera.forEach(f=>f.play()),d.SceneTransition.forEach(f=>f.dispatch()),d.SetVariable.forEach(f=>f.checkConditions()),d.SetVariable.forEach(f=>f.dispatch())}};let{distance:s,fromObject:o,toObject:l}=t.condition;this.distance=s;for(let u of[o,l]){if(!u)throw new Error("Missing property");let h=i.find(u);if(!h)throw new Error("Missing property");this.objects.push(h)}}connect(){window.setTimeout(()=>{this.objects.forEach(e=>{e.addEventListener("updateMatrix",this.onUpdateMatrix)}),this.onUpdateMatrix()},0)}disconnect(){super.disconnect(),this.stage="out",this.objects.forEach(e=>{e.removeEventListener("updateMatrix",this.onUpdateMatrix)})}},X4e=class extends RX{constructor(e,t,r,i,n,a){var l;super(t,r,i,n,a),this.id=e,this.data=t,this.object=r,this.onBegin=({target:u,state:h})=>{this.toState!==h&&(this.actionsOut.Audio.forEach(c=>c.dispatchConditional()),this.actionsOut.Video.forEach(c=>c.dispatchConditional()),this.actionsOut.Link.forEach(c=>c.dispatch()),this.actionsOut.Create.forEach(c=>c.dispatch()),this.actionsOut.Destroy.forEach(c=>c.dispatch()),this.actionsOut.Reset.forEach(c=>c.dispatch()),this.actionsIn.Transition.forEach(c=>c.pause()),this.object.currentTransitionEvent=this,this.actionsOut.Transition.forEach(c=>c.play()),this.actionsOut.Animation.forEach(c=>c.play()),this.actionsIn.SwitchCamera.forEach(c=>c.pause()),this.actionsOut.SwitchCamera.forEach(c=>c.play()),this.actionsOut.SceneTransition.forEach(c=>c.dispatch()),this.actionsOut.SetVariable.forEach(c=>c.checkConditions()),this.actionsOut.SetVariable.forEach(c=>c.dispatch()))},this.onComplete=({target:u,state:h})=>{this.toState===h&&(this.actionsIn.Audio.forEach(c=>c.dispatchConditional()),this.actionsIn.Video.forEach(c=>c.dispatchConditional()),this.actionsIn.Link.forEach(c=>c.dispatch()),this.actionsIn.Create.forEach(c=>c.dispatch()),this.actionsIn.Destroy.forEach(c=>c.dispatch()),this.actionsIn.Reset.forEach(c=>c.dispatch()),this.actionsOut.Transition.forEach(c=>c.pause()),this.actionsOut.Transition.forEach(c=>c.pause()),this.object.currentTransitionEvent=this,this.actionsIn.Transition.forEach(c=>c.play()),this.actionsIn.Animation.forEach(c=>c.play()),this.actionsOut.SwitchCamera.forEach(c=>c.pause()),this.actionsIn.SwitchCamera.forEach(c=>c.play()),this.actionsIn.SceneTransition.forEach(c=>c.dispatch()),this.actionsIn.SetVariable.forEach(c=>c.checkConditions()),this.actionsIn.SetVariable.forEach(c=>c.dispatch()))};let{condition:s}=t;if(!s.object)throw new Error("Missing property");let o=i.find(s.object);if(!o)throw new Error("Missing property");if(this.toObject=o,s.state&&!((l=this.toObject.states)!=null&&l[s.state]))throw new Error("Missing property");this.toState=s.state}connect(){(this.actionsOut.Audio.length||this.actionsOut.Video.length||this.actionsOut.Create.length||this.actionsOut.Destroy.length||this.actionsOut.Transition.length||this.actionsOut.Animation.length||this.actionsOut.SwitchCamera.length||this.actionsOut.SceneTransition.length||this.actionsOut.SetVariable.length)&&this.toObject.addEventListener("beginState",this.onBegin),(this.actionsIn.Audio.length||this.actionsIn.Video.length||this.actionsOut.Create.length||this.actionsIn.Destroy.length||this.actionsIn.Transition.length||this.actionsIn.Animation.length||this.actionsIn.SwitchCamera.length||this.actionsIn.SceneTransition.length||this.actionsIn.SetVariable.length)&&this.toObject.addEventListener("completeState",this.onComplete)}disconnect(){super.disconnect(),(this.actionsOut.Audio.length||this.actionsOut.Video.length||this.actionsOut.Create.length||this.actionsOut.Destroy.length||this.actionsOut.Transition.length||this.actionsOut.Animation.length||this.actionsOut.SwitchCamera.length||this.actionsOut.SceneTransition.length||this.actionsOut.SetVariable.length)&&this.toObject.removeEventListener("beginState",this.onBegin),(this.actionsIn.Audio.length||this.actionsIn.Video.length||this.actionsOut.Create.length||this.actionsIn.Destroy.length||this.actionsIn.Transition.length||this.actionsIn.Animation.length||this.actionsIn.SwitchCamera.length||this.actionsIn.SceneTransition.length||this.actionsIn.SetVariable.length)&&this.toObject.removeEventListener("completeState",this.onComplete)}},Q4e=class extends Pl{constructor(e,t){super(e),this.eventsPerConditions={Comparison:[],Distance:[],State:[]},this.hasVideoAction=!1;let{page:r,sharedAssets:i}=this.eventContext;r.traverseEntity(n=>{var a;if((a=n.data)!=null&&a.events.length){for(let{id:s,data:o}of n.data.events)if(!o.disabled&&o.type==="Conditional")try{let l;o.condition.type==="Comparison"||(o.condition.type==="Distance"?l=new q4e(s,o,n,r,i,t):o.condition.type==="State"&&(l=new X4e(s,o,n,r,i,t))),l&&(this.eventsPerConditions[o.condition.type].push(l),(l.actionsIn.Video.length||l.actionsOut.Video.length)&&(this.hasVideoAction=!0))}catch{}}})}connect(){super.connect(),Object.values(this.eventsPerConditions).forEach(e=>e.forEach(t=>t.connect()))}disconnect(){super.disconnect(),Object.values(this.eventsPerConditions).forEach(e=>e.forEach(t=>t.disconnect()))}},y0=new T,Jc=new T,Dd=new T,hj=new Vs,K4e=.01,Lr=new T,bn=new T,dj=new T,lf=new Gt,sT=new Un,Z4e=new ze,oT=new Hn,qp=new T,jl=new T,Xp=.2;function lT(e,t){!t||(t[0]<t[1]&&(e.x=Math.min(Math.max(e.x,t[0]),t[1])),t[2]<t[3]&&(e.y=Math.min(Math.max(e.y,t[2]),t[3])),t[4]<t[5]&&(e.z=Math.min(Math.max(e.z,t[4]),t[5])))}var J4e=function(){let e=new ze;return(t,r,i)=>{let n=t.obj;e.copy(n.hiddenMatrix),n.parent!==null&&e.premultiply(n.parent.matrixWorld),e.invert(),n.position.copy(r),t.reference==="global"&&lT(n.position,t.limits),n.position.applyMatrix4(e),t.reference==="parent"?lT(n.position,t.limits):t.reference==="local"&&(lf.copy(t.quat0).invert(),n.position.sub(t.position0),n.position.applyQuaternion(lf),lT(n.position,t.limits),lf.invert(),n.position.applyQuaternion(lf),n.position.add(t.position0)),e.multiply(i??n.matrixWorld).decompose(Lr,n.quaternion,bn),n.updateMatrix(),n.hasNonUniformScale&&(n.updateMatrixWorld(),n.updateMatrixWorldSVD()),n instanceof Os&&lu(n.parent)&&n.invalidateDownstreamBooleanData(!0)}}(),eze=class{constructor(e,t,r,i,n,a){this.object=e,this.data=t,this.dropDestIds=[],this.activeIdx=null,this.wasDragEventTriggered=!1,this.resetDampingFactor=this.data.resetSpeed===0?1:8/this.data.resetSpeed+1,this.snapDampingFactor=this.data.snapSpeed===0?1:8/this.data.snapSpeed+1,this.actionsDrag=rs(t,t.dragDropActions.drag,r,i,n,this.object),this.actionsDrop=rs(t,t.dragDropActions.drop,r,i,n,this.object);let s=[];this.data.objects.forEach(o=>{let l=r.find(o);!l||l.data.visible!==!1&&(s.push(l),a[l.uuid]&&a[l.uuid].forEach(u=>{let h=r.find(u);!h||h.data.visible!==!1&&s.push(h)}))}),this.data.dropDestinations.forEach(o=>{let l=r.find(o);!l||l.data.visible!==!1&&(this.dropDestIds.push(l.uuid),a[l.uuid]&&a[l.uuid].forEach(u=>{let h=r.find(u);!h||h.data.visible!==!1&&this.dropDestIds.push(h.uuid)}))}),this.dragItems=s.map(o=>(this.data.planeMode==="locked"&&(o.userData.lockedPlane=!0),o.userData.worldPosition0=new T().setFromMatrixPosition(o.matrixWorld),{obj:o,fromPosition:new T().setFromMatrixPosition(o.matrixWorld),pointStart:new T,pointEnd:new T,paused:!0,currentDampingFactor:this.data.dampingFactor,reset:!1,position0:new T().copy(o.position),quat0:new Gt().copy(o.quaternion),snapped:!1,orientationMatrix:new ze,limits:this.data.limits,reference:this.data.referenceFrame}))}get activeDragItem(){return this.activeIdx!==null?this.dragItems[this.activeIdx]:null}dispose(){Gn(this.actionsDrag),Gn(this.actionsDrop),this.dragItems.forEach(e=>{e.fromPosition.copy(e.obj.userData.worldPosition0),e.pointStart.copy(e.fromPosition),e.pointEnd.copy(e.pointStart),e.obj.recursiveBBoxNeedsUpdate=!0,e.obj.userData.lockedPlane=void 0,e.obj.position.copy(e.position0),e.obj.quaternion.copy(e.quat0),e.obj.updateMatrix()})}},tze=class extends Pl{constructor(e,t){super(e),this.eventManager=t,this.events=[],this.lastDropDestination=null,this.dragTimeout=null,this.onPointerDown=i=>{var o;if(It.length>1)return;this.eventContext.updateRaycaster(i);let{raycaster:n,page:a}=this.eventContext,s=a.raycastWithClones(n);if(this.lastDropDestination=null,s.length===0){this.activeEvent=null;return}for(let l of this.events){let u=0;for(let{obj:h,pointEnd:c,pointStart:d}of l.dragItems){if(h===s[0].object||h===s[0].object.object||pr.is(h)&&h.isAncestorOf(s[0].object.uuid)){if(l.activeIdx=u,l.activeDragItem.reset=!1,l.activeDragItem.currentDampingFactor=l.data.dampingFactor,l.activeDragItem.snapped=!1,l.data.cursor==="hand"&&this.setCursor("grabbing"),this.eventManager.controlsManager.usePhysics){l.activeDragItem.obj.rigidBody&&l.activeDragItem.obj.rigidBody.setBodyType(2,!0);let f=l.activeDragItem.obj;h.hasNonUniformScale&&h.updateMatrixWorldSVD(),(f.hasNonUniformScale?f.matrixWorldRigid:f.matrixWorld).decompose(Lr,lf,bn),sT.setFromQuaternion(lf),f.prevR===void 0?(f.prevR=sT.clone(),f.prevT=Lr.clone()):(f.prevR.copy(sT),f.prevT.copy(Lr)),this.eventManager.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.push(l.activeDragItem.obj)}this.calcPlaneIntersectPos(h,d,l.data.plane,l.data.referenceFrame),c.copy(d),(this.eventManager.controlsManager.usePhysics&&((o=h.data.physics)==null?void 0:o.rigidBody)==="dynamic"||l.data.drop===!1||l.data.resetOnSnapFail===!1)&&l.activeDragItem.fromPosition.setFromMatrixPosition(l.activeDragItem.obj.matrixWorld),this.activeEvent=l,this.eventManager.controlsManager.orbitControls&&(this.eventManager.controlsManager.orbitControls.enabled=!1);return}u++}}this.activeEvent=null},this.onPointerMove=i=>{var o,l,u,h;if(It.length>1)return;this.eventContext.updateRaycaster(i);let{raycaster:n,page:a}=this.eventContext,s=a.raycastWithClones(n);if(It.length===0){let c=!1;for(let d of this.events){for(let{obj:f}of d.dragItems)if(f===((o=s[0])==null?void 0:o.object)||f===((u=(l=s[0])==null?void 0:l.object)==null?void 0:u.object)||pr.is(f)&&f.isAncestorOf((h=s[0])==null?void 0:h.object.uuid)){switch(c=!0,d.data.cursor){case"hand":this.setCursor("grab");break;case"move":this.setCursor("move");break}break}if(c)break}c||this.setCursor("default");return}if(this.activeEvent&&this.activeEvent.activeDragItem){let c=this.activeEvent.activeDragItem;c.snapped=!1;let d;if(this.activeEvent.data.drop&&(d=s.filter(f=>c.obj!==f.object&&!c.obj.isAncestorOf(f.object.uuid)&&!(f.object instanceof M1)&&(this.activeEvent.data.dropOn==="all"||this.activeEvent.dropDestIds.some(m=>m===f.object.uuid||a.scene.find(m).isAncestorOf(f.object.uuid))))[0]),d){let f=dj.copy(d.face.normal).applyMatrix3(oT.getNormalMatrix(d.object.matrixWorld));if(this.activeEvent.data.snapTo==="center")c.fromPosition.setFromMatrixPosition(d.object.matrixWorld);else if(this.activeEvent.data.snapTo==="surface"){if(c.fromPosition.copy(d.point),this.activeEvent.data.snapSurfaceMode==="bbox"){Lr.copy(f).applyMatrix3(oT.setFromMatrix4(c.obj.matrixWorld).transpose());let m=c.obj;Lr.x>Xp?bn.x=-m.recursiveBBox.min.x:Lr.x<-Xp&&(bn.x=-m.recursiveBBox.max.x),Lr.y>Xp?bn.y=-m.recursiveBBox.min.y:Lr.y<-Xp&&(bn.y=-m.recursiveBBox.max.y),Lr.z>Xp?bn.z=-m.recursiveBBox.min.z:Lr.z<-Xp&&(bn.z=-m.recursiveBBox.max.z),bn.applyMatrix3(oT.invert())}else bn.copy(f).multiplyScalar(this.activeEvent.data.snapSurfaceOffset);c.fromPosition.add(bn)}this.activeEvent.data.autoOrient&&(Lr.set(0,1,0).cross(f),Lr.length()<1e-4&&Lr.set(-1,0,0).cross(f),bn.crossVectors(dj,Lr),c.orientationMatrix.makeBasis(Lr,bn,f)),c.pointStart.copy(c.fromPosition),c.pointEnd.copy(c.pointStart),c.currentDampingFactor=this.activeEvent.snapDampingFactor,c.snapped=!0,this.lastDropDestination!==d.object&&(this.lastDropDestination=d.object,this.activeEvent.actionsDrop.Transition.forEach(m=>{m.play()}),this.activeEvent.actionsDrop.Animation.forEach(m=>{m.play()}),this.activeEvent.actionsDrop.Audio.forEach(m=>{m.dispatchGameControl("start")}),this.activeEvent.actionsDrop.Create.forEach(m=>{m.dispatchThrottled()}))}else c.orientationMatrix.makeRotationFromQuaternion(c.quat0),this.lastDropDestination=null,c.currentDampingFactor=this.activeEvent.data.dampingFactor,this.calcPlaneIntersectPos(c.obj,c.pointEnd,this.activeEvent.data.plane,this.activeEvent.data.referenceFrame),this.activeEvent.actionsDrop.Transition.forEach(f=>{f.stop(),f.object.currentState!==null&&f.object.changeSelectedState(null,{scene:this.eventContext.page.scene,shared:this.eventContext.sharedAssets})}),this.activeEvent.actionsDrop.Animation.forEach(f=>{f.stop()}),this.activeEvent.actionsDrop.Audio.forEach(f=>{f.dispatchGameControl("stop")});this.activeEvent.actionsDrag.Create.forEach(f=>{f.dispatchThrottled()}),this.activeEvent.actionsDrag.SetVariable.forEach(f=>f.checkConditions()),this.activeEvent.actionsDrag.SetVariable.forEach(f=>f.dispatch()),this.activeEvent.wasDragEventTriggered===!1&&(this.activeEvent.wasDragEventTriggered=!0,this.activeEvent.actionsDrag.Transition.forEach(f=>{f.play()}),this.activeEvent.actionsDrag.Animation.forEach(f=>{f.play()}),this.activeEvent.actionsDrag.Audio.forEach(f=>{f.dispatchGameControl("start")})),this.dragTimeout&&window.clearTimeout(this.dragTimeout),this.dragTimeout=window.setTimeout(()=>{!this.activeEvent||(this.activeEvent.wasDragEventTriggered=!1,this.activeEvent.actionsDrag.Audio.forEach(f=>{f.dispatchGameControl("stop")}),this.activeEvent.actionsDrag.Transition.forEach(f=>{f.stop(),f.object.currentState!==null&&f.object.changeSelectedState(null,{scene:this.eventContext.page.scene,shared:this.eventContext.sharedAssets})}),this.activeEvent.actionsDrag.Animation.forEach(f=>{f.stop()}))},500),this.updateDragItem(c),c.obj.dispatchEvent({type:"requestRender"})}},this.onPointerUp=i=>{var n;if(this.activeEvent&&this.activeEvent.activeDragItem){this.activeEvent.data.cursor==="hand"&&this.setCursor("grab");let a=((n=this.activeEvent.activeDragItem.obj.data.physics)==null?void 0:n.rigidBody)==="dynamic";this.activeEvent.activeDragItem.snapped===!1&&this.activeEvent.data.drop&&this.activeEvent.data.resetOnSnapFail&&(this.eventManager.controlsManager.usePhysics===!1||!a)&&(this.activeEvent.activeDragItem.reset=this.activeEvent.data.resetOnSnapFail,this.activeEvent.activeDragItem.paused=!1,this.activeEvent.activeDragItem.currentDampingFactor=this.activeEvent.resetDampingFactor),this.eventManager.controlsManager.usePhysics&&a&&(this.eventManager.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.pop(),this.activeEvent.activeDragItem.obj.rigidBody.setBodyType(0,!0),this.activeEvent.activeDragItem.paused=!0),this.activeEvent.wasDragEventTriggered===!0&&(this.activeEvent.wasDragEventTriggered=!1,this.activeEvent.actionsDrag.Transition.forEach(s=>{s.stop(),s.object.currentState!==null&&s.object.changeSelectedState(null,{scene:this.eventContext.page.scene,shared:this.eventContext.sharedAssets})}),this.activeEvent.actionsDrag.Animation.forEach(s=>{s.stop()}),this.activeEvent.actionsDrag.Audio.forEach(s=>{s.dispatchGameControl("stop")}),this.activeEvent.actionsDrop.SetVariable.forEach(s=>s.checkConditions()),this.activeEvent.actionsDrop.SetVariable.forEach(s=>s.dispatch())),this.eventManager.controlsManager.orbitControls&&(this.eventManager.controlsManager.orbitControls.enabled=!0)}};let r={};e.page.traverseEntity(i=>{i.component&&(r[i.component.uuid]?r[i.component.uuid].push(i.uuid):r[i.component.uuid]=[i.uuid])}),e.page.traverseEntity(i=>{var n;(n=i.data)==null||n.events.filter(a=>a.data.type==="DragDrop"&&!a.data.disabled).forEach(a=>{this.events.push(new eze(i,a.data,e.page,e.sharedAssets,t,r))})})}connect(){if(!this.events.length)return;this.domEventsNeeded.clear(),this.domEventsNeeded.add("pointerdown");let e=this.eventContext.domElement;e.addEventListener("pointerdown",this.onPointerDown),e.addEventListener("pointermove",this.onPointerMove),e.addEventListener("pointerup",this.onPointerUp),this.domEventsNeeded.add("pointermove")}disconnect(){if(!this.events.length)return;this.domEventsNeeded.clear();let e=this.eventContext.domElement;e.removeEventListener("pointerdown",this.onPointerDown),e.removeEventListener("pointermove",this.onPointerMove),e.removeEventListener("pointerup",this.onPointerUp),this.events.forEach(t=>t.dispose())}setCursor(e){this.eventContext.domElement.style.cursor=e}onAnimationFrameDamping(){for(let e of this.events)for(let t of e.dragItems)t.paused||this.updateDragItem(t,!0)}calcPlaneIntersectPos(e,t,r,i){let{getCamera:n,raycaster:a}=this.eventContext;n().getWorldDirection(Jc),Jc.negate();let s=lf.identity();switch(i==="parent"?Z4e.multiplyMatrices(e.parent.matrixWorld,e.hiddenMatrix).decompose(Lr,s,bn):i==="local"&&e.matrixWorld.decompose(Lr,s,bn),r){case"x":Lr.set(1,0,0).applyQuaternion(s),qp.copy(Jc).cross(Lr),jl.copy(Lr).cross(qp);break;case"y":Lr.set(0,1,0).applyQuaternion(s),qp.copy(Jc).cross(Lr),jl.copy(Lr).cross(qp);break;case"z":Lr.set(0,0,1).applyQuaternion(s),qp.copy(Jc).cross(Lr),jl.copy(Lr).cross(qp);break;case"xy":jl.set(0,0,1).applyQuaternion(s);break;case"yz":jl.set(1,0,0).applyQuaternion(s);break;case"xz":jl.set(0,1,0).applyQuaternion(s);break;case"adaptive":Jc.angleTo(bn.set(0,1,0))>Math.PI/6?(Lr.crossVectors(bn.set(0,1,0),Jc),jl.crossVectors(Lr,bn)):jl.set(0,1,0);break;default:jl.copy(Jc);break}Dd.setFromMatrixPosition(e.matrixWorld);let o=e.userData.lockedPlane?e.userData.worldPosition0:Dd;if(hj.setFromNormalAndCoplanarPoint(jl,o),!!a.ray.intersectPlane(hj,t)&&(r==="x"||r==="y"||r==="z")){let l=bn.subVectors(t,o).dot(Lr);t.copy(o).addScaledVector(Lr,l)}}updateDragItem(e,t=!1){var r,i;Dd.setFromMatrixPosition(e.obj.matrixWorld),e.reset==="current"?y0.subVectors(e.fromPosition,Dd).divideScalar(e.currentDampingFactor):e.reset==="original"?(y0.subVectors(e.obj.userData.worldPosition0,Dd).divideScalar(e.currentDampingFactor),e.fromPosition.copy(e.obj.userData.worldPosition0),e.pointStart.copy(e.fromPosition),e.pointEnd.copy(e.pointStart)):y0.subVectors(e.pointEnd,e.pointStart).add(e.fromPosition).sub(Dd).divideScalar(e.currentDampingFactor),e.paused=e.currentDampingFactor>1?y0.length()<K4e:!0,(this.activeEvent&&this.activeEvent.data.dampingFactor===1||t)&&J4e(e,y0.add(Dd),(r=this.activeEvent)!=null&&r.data.drop&&((i=this.activeEvent)!=null&&i.data.autoOrient)?e.orientationMatrix:null),e.obj.dispatchEvent({type:"beginEvent",eventName:"DragDrop"}),this.eventManager.requestRender()}},Qp=new T,uT=new T,Vu=new T,Hu=new T,fj=new Vs,rze=.01,ize={type:"requestRender"},nze=function(){let e=new T,t=new T;return(r,i,n)=>n>0?(e.subVectors(r,i),e.length()<=n?r:t.copy(i).add(e.normalize().multiplyScalar(n))):i}(),pj=function(){let e=new ze;return(t,r)=>{t.position.copy(r),t.parent!==null&&(e.copy(t.parent.matrixWorld).invert(),t.position.applyMatrix4(e)),e.copy(t.hiddenMatrix).invert(),t.position.applyMatrix4(e),t.updateMatrix(),t.hasNonUniformScale&&(t.updateMatrixWorld(),t.updateMatrixWorldSVD()),t instanceof Os&&lu(t.parent)&&t.invalidateDownstreamBooleanData(!0)}}(),aze=class{constructor(e,t,r,i,n){this.data=e,this.object=t,this.paused=!1,this.currentDampingFactor=1,this.snapComplete=!1,this.isReset=!1,this.worldPosition0=new T,this.timeoutId=null,this.delayFinished=!0,this.wasOutside=!1,this.data={...LD.defaultData,...e,...e.resetOnPointerLeave===void 0&&{resetOnPointerLeave:!1}},e.target===void 0||e.target==="cursor"||(this.target=r.find(e.target)),this.data.dampingFactor&&(this.currentDampingFactor=this.data.dampingFactor),this.resetDampingFactor=80/this.data.resetSpeed+1,this.object.getWorldPosition(this.worldPosition0),this.actions=rs(e,e.actions,r,i,n,t)}},sze=class extends Pl{constructor(e,t){super(e),this.events=[],this.pairOfEventListeners=[],this.onMouseMove=i=>{if(!(It.length>1)){this.eventContext.updateRaycaster(i);for(let n of this.events)n.target===void 0&&this.updateSingleEvent(n)}},this.onMouseEnter=i=>{for(let n of this.events)n.target===void 0&&(n.isReset=!1,n.currentDampingFactor=n.data.dampingFactor)},this.onMouseLeave=i=>{for(let n of this.events)n.target===void 0&&(n.data.resetOnPointerLeave&&(n.isReset=!0,n.currentDampingFactor=n.resetDampingFactor),this.updateSingleEvent(n))},this.onTargetChange=i=>()=>{this.updateSingleEvent(i)};let{page:r}=this.eventContext;r.traverseEntity(i=>{var a,s;let n=(a=i.data)==null?void 0:a.events.find(o=>o.data.type==="Follow"&&!o.data.disabled);n&&(!r.data.globalPhysics.usePhysics||((s=i.dataPatched.physics)==null?void 0:s.rigidBody)!=="dynamic")&&this.events.push(new aze(n.data,i,r,e.sharedAssets,t))})}connect(){if(!this.events.length)return;let{domElement:e,eventElement:t}=this.eventContext;this.domEventsNeeded.clear(),Xs&&(this.domEventsNeeded.add("pointerdown"),e.addEventListener("pointerdown",this.onMouseMove)),this.domEventsNeeded.add("pointermove"),t.addEventListener("pointermove",this.onMouseMove),this.eventContext.useWindowEvents||(e.addEventListener("pointerenter",this.onMouseEnter),e.addEventListener("pointerleave",this.onMouseLeave));for(let r of this.events)if(r.target!==void 0){let i=r.target,n=this.onTargetChange(r);this.pairOfEventListeners.push([i,n]),i.addEventListener("requestRender",n)}}disconnect(){if(!this.events.length)return;let{domElement:e,eventElement:t}=this.eventContext;this.domEventsNeeded.clear(),Xs&&e.removeEventListener("pointerdown",this.onMouseMove),t.removeEventListener("pointermove",this.onMouseMove),e.removeEventListener("pointerenter",this.onMouseEnter),e.removeEventListener("pointerleave",this.onMouseLeave);for(let[r,i]of this.pairOfEventListeners)r.removeEventListener("requestRender",i);for(let r of this.events)r.paused=!0,r.isReset=!1,Gn(r.actions)}onAnimationFrameDamping(){for(let e of this.events)e.paused||this.updateSingleEvent(e,!0)}updateSingleEvent(e,t=!1){var s;this.events.forEach(o=>{o.actions.Create.forEach(l=>{l.dispatchThrottled()})});let{plane:r,limitDistance:i,limitDistanceEnabled:n}=e.data;if(e.object.getWorldPosition(Vu),e.isReset)Hu.copy(e.worldPosition0);else if(e.target)e.target.getWorldPosition(Hu);else{let{getCamera:o,raycaster:l}=this.eventContext;if(r==="custom"?(o().getWorldDirection(uT),uT.negate(),Qp.copy(uT)):r==="xy"?Qp.set(0,0,1):r==="xz"?Qp.set(0,1,0):r==="yz"&&Qp.set(1,0,0),fj.setFromNormalAndCoplanarPoint(Qp,Vu),!l.ray.intersectPlane(fj,Hu))return}if(!e.isReset){if(Hu.distanceTo(e.worldPosition0)>i&&n&&e.target)if(e.snapComplete=!1,e.data.snapDelay&&(e.delayFinished=!1,typeof window<"u"&&e.timeoutId!==null&&(window.clearTimeout(e.timeoutId),e.timeoutId=null)),e.wasOutside=!0,e.data.resetAfterDistanceLimit)Hu.copy(e.worldPosition0),e.currentDampingFactor=e.resetDampingFactor;else return;else if(e.wasOutside&&(e.data.snapDelay&&typeof window<"u"&&(e.timeoutId=window.setTimeout(()=>{e.delayFinished=!0,e.paused=!1,this.updateSingleEvent(e)},e.data.snapDelay*1e3)),e.currentDampingFactor=e.data.dampingFactor,e.wasOutside=!1),e.delayFinished===!1)return}e.data.enabledTranslation[0]===!1&&(Hu.x=Vu.x),e.data.enabledTranslation[1]===!1&&(Hu.y=Vu.y),e.data.enabledTranslation[2]===!1&&(Hu.z=Vu.z);let a=nze(Vu,Hu,e.wasOutside?0:e.data.maxDelta);if(e.currentDampingFactor>1){let o=Qp.subVectors(a,Vu).divideScalar(e.currentDampingFactor);Vu.add(o),t&&pj(e.object,Vu),e.paused=o.length()<rze}else pj(e.object,a),e.paused=!0;(s=e.object)==null||s.dispatchEvent({type:"beginEvent",eventName:"Follow"}),e.object.dispatchEvent(ize)}},x0=new T,ow=new T,b0=new ze,Kp=new Gt,eh=new Gt,w0=new T,_0=new T,Od=new T,Gu=new T,cT=new Vs,oze=1e-6,lze={type:"requestRender"},uze={type:"changeRotation"},mj=function(){let e=new ze;return function(t,r){t.parent!==null?e.multiplyMatrices(t.parent.matrixWorld,t.hiddenMatrix):e.copy(t.hiddenMatrix),r.premultiply(AX(e).invert()),t.rotation.setFromRotationMatrix(r),t.updateMatrix(),t instanceof Os&&lu(t.parent)&&t.invalidateDownstreamBooleanData(!0)}}(),cze=class{constructor(e,t,r){this.object=t,this.paused=!1,this.currentDampingFactor=1,this.isReset=!1,this.worldQuaternion0=new Gt,this.timeoutId=null,this.delayFinished=!0,this.wasOutside=!1,this.data={...BD.defaultData,...e,...e.resetOnPointerLeave===void 0&&{resetOnPointerLeave:!1}},e.target===void 0||e.target==="cursor"||(this.target=r.find(e.target)),this.data.dampingFactor&&(this.currentDampingFactor=this.data.dampingFactor),this.object.getWorldQuaternion(this.worldQuaternion0),this.resetDampingFactor=80/this.data.resetSpeed+1}},hze=class extends Pl{constructor(e){super(e),this.events=[],this.pairOfEventListeners=[],this.pairOfUserEventListeners=[],this.onMouseMove=r=>{if(!(It.length>1)){this._lastMouseEvent=r,this.eventContext.updateRaycaster(r);for(let i of this.events)i.target===void 0&&this.updateSingleEvent(i)}},this.onMouseEnter=r=>{for(let i of this.events)i.target===void 0&&(i.isReset=!1,i.currentDampingFactor=i.data.dampingFactor)},this.onMouseLeave=r=>{for(let i of this.events)i.target===void 0&&(i.data.resetOnPointerLeave&&(i.isReset=!0,i.currentDampingFactor=i.resetDampingFactor),this.updateSingleEvent(i))},this.onScroll=r=>{if(this._lastMouseEvent){let i=new PointerEvent("pointermove",{clientX:this._lastMouseEvent.clientX,clientY:this._lastMouseEvent.clientY,bubbles:!0,cancelable:!0,view:window});this.eventContext.eventElement.dispatchEvent(i)}},this.onTargetChange=r=>()=>{this.updateSingleEvent(r)},this.createUserEventListener=r=>({eventName:i,target:n})=>{if(!i||!n)return;let a=ax(i);a&&a==="LookAt"&&this.updateSingleEvent(r)};let{page:t}=this.eventContext;t.traverseEntity(r=>{var n,a;let i=(n=r.data)==null?void 0:n.events.find(s=>s.data.type==="LookAt"&&!s.data.disabled);i&&(!t.data.globalPhysics.usePhysics||((a=r.dataPatched.physics)==null?void 0:a.rigidBody)!=="dynamic")&&this.events.push(new cze(i.data,r,t))})}connect(){if(!this.events.length)return;let{domElement:e,eventElement:t}=this.eventContext;this.domEventsNeeded.clear(),Xs&&(this.domEventsNeeded.add("pointerdown"),e.addEventListener("pointerdown",this.onMouseMove)),this.domEventsNeeded.add("pointermove"),t.addEventListener("pointermove",this.onMouseMove),this.eventContext.useWindowEvents?t.addEventListener("scroll",this.onScroll):(e.addEventListener("pointerenter",this.onMouseEnter),e.addEventListener("pointerleave",this.onMouseLeave));for(let r of this.events){if(r.target!==void 0){let a=this.onTargetChange(r),s=r.target;this.pairOfEventListeners.push([s,a]),s.addEventListener("requestRender",a)}let i=this.createUserEventListener(r),n=r.object;this.pairOfUserEventListeners.push([n,i]),n.addEventListener("userEvent",i)}}disconnect(){if(!this.events.length)return;let{domElement:e,eventElement:t}=this.eventContext;this.domEventsNeeded.clear(),Xs&&e.removeEventListener("pointerdown",this.onMouseMove),t.removeEventListener("pointermove",this.onMouseMove),e.removeEventListener("pointerenter",this.onMouseEnter),e.removeEventListener("pointerleave",this.onMouseLeave),t.removeEventListener("scroll",this.onScroll);for(let[r,i]of this.pairOfEventListeners)r.removeEventListener("requestRender",i);for(let[r,i]of this.pairOfUserEventListeners)r.removeEventListener("userEvent",i);for(let r of this.events)r.paused=!0,r.isReset=!1}onAnimationFrameDamping(){for(let e of this.events)e.paused||this.updateSingleEvent(e)}updateSingleEvent(e){var d;let{tilt:t,axis:r,distance:i,plane:n,limitDistance:a,enabledRotation:s,limitDistanceEnabled:o}=e.data,{getCamera:l,raycaster:u}=this.eventContext,{object:h,target:c}=e;if(h.getWorldPosition(w0),!e.isReset)if(e.target)e.target.getWorldPosition(_0);else{if(n==="custom"?(l().getWorldDirection(ow),ow.negate(),cT.setFromNormalAndCoplanarPoint(ow,w0)):(n==="xy"?x0.set(0,0,1):n==="xz"?x0.set(0,1,0):n==="yz"&&x0.set(1,0,0),cT.setFromNormalAndCoplanarPoint(x0,w0)),!u.ray.intersectPlane(cT,_0))return;i>0&&(n==="custom"||n===void 0)&&_0.addScaledVector(ow,i)}if(e.isReset||(c?t==="target"?Od.copy(c.up).applyMatrix4(b0.extractRotation(c.matrixWorld)).normalize():s.some(f=>f===!1)?(r==="x"?(Gu.set(0,0,1),s[2]===!1&&Gu.set(0,1,0)):r==="y"?(Gu.set(1,0,0),s[0]===!1&&Gu.set(0,0,1)):(Gu.set(0,1,0),s[1]===!1&&Gu.set(1,0,0)),Od.copy(Gu).applyQuaternion(e.worldQuaternion0).normalize()):Od.set(0,1,0):n==="custom"?Od.set(0,1,0):Od.copy(x0)),e.isReset)eh.copy(e.worldQuaternion0);else if(w0.distanceTo(_0)>a&&o&&c)if(e.data.snapDelay&&(e.delayFinished=!1,typeof window<"u"&&e.timeoutId!==null&&(window.clearTimeout(e.timeoutId),e.timeoutId=null)),e.wasOutside=!0,e.data.resetAfterDistanceLimit)eh.copy(e.worldQuaternion0),e.currentDampingFactor=e.resetDampingFactor;else return;else{if(e.wasOutside&&(e.data.snapDelay&&typeof window<"u"&&(e.timeoutId=window.setTimeout(()=>{e.delayFinished=!0,e.paused=!1,this.updateSingleEvent(e)},e.data.snapDelay*1e3)),e.currentDampingFactor=e.data.dampingFactor,e.wasOutside=!1),e.delayFinished===!1)return;dze(b0,_0,w0,Od,r,Gu),eh.setFromRotationMatrix(b0),Kp.setFromUnitVectors(Gu.applyQuaternion(eh),Od),s.some(f=>f===!1)&&t!=="target"&&eh.premultiply(Kp).normalize()}e.currentDampingFactor>1?(h.updateWorldMatrix(!0,!1),Kp.setFromRotationMatrix(AX(h.matrixWorld)),Kp.slerp(eh,1/e.currentDampingFactor),mj(h,b0.makeRotationFromQuaternion(Kp)),e.paused=8*(1-Kp.dot(eh))<oze):(mj(h,b0.makeRotationFromQuaternion(eh)),e.paused=!0),(d=e.object)==null||d.dispatchEvent({type:"beginEvent",eventName:"LookAt"}),h.dispatchEvent(lze),h.dispatchEvent(uze)}},po=new T,xn=new T,ji=new T;function dze(e,t,r,i,n,a){let s=e.elements;ji.subVectors(t,r),ji.lengthSq()===0&&(ji.z=1),ji.normalize(),xn.crossVectors(i,ji),xn.lengthSq()===0&&(Math.abs(i.z)===1?ji.x+=1e-4:ji.z+=1e-4,ji.normalize(),xn.crossVectors(i,ji)),xn.normalize(),po.crossVectors(ji,xn),n==="x"?a.z===1?[xn,po,ji]=[ji,xn,po]:(xn.negate(),[xn,ji]=[ji,xn]):n==="y"?a.x===1?[xn,po,ji]=[po,ji,xn]:(xn.negate(),[po,ji]=[ji,po]):a.x===1&&(xn.negate(),[xn,po]=[po,xn]),s[0]=xn.x,s[4]=po.x,s[8]=ji.x,s[1]=xn.y,s[5]=po.y,s[9]=ji.y,s[2]=xn.z,s[6]=po.z,s[10]=ji.z}var fze=class{constructor(e,t,r,i,n,a){this.id=e,this.data=t,this.object=r,this.entered=!1,this.actions=rs(t,t.actions,i,n,a,r)}disconnect(){Gn(this.actions)}dispatchEnter(){this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),this.entered||(this.entered=!0,this.actions.Transition.forEach(e=>e.playFromCurrent()),this.actions.Animation.forEach(e=>e.play()),this.actions.Create.forEach(e=>e.dispatch()),this.actions.Destroy.forEach(e=>e.dispatch()),this.actions.SwitchCamera.forEach(e=>e.playFromCurrent()),this.actions.SceneTransition.forEach(e=>e.dispatch()),this.actions.SetVariable.forEach(e=>e.checkConditions()),this.actions.SetVariable.forEach(e=>e.dispatch()))}dispatchLeave(){this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),this.entered&&(this.entered=!1,this.actions.Transition.forEach(e=>e.reverseFromCurrent()),this.actions.SwitchCamera.forEach(e=>e.reverseFromCurrent()))}dispatchUserEvent(e){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),e?(this.actions.Transition.forEach(t=>t.reverseFromCurrent()),this.actions.Animation.forEach(t=>t.reverseFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.reverseFromCurrent())):(this.actions.Transition.forEach(t=>t.playFromCurrent()),this.actions.Animation.forEach(t=>t.playFromCurrent()),this.actions.Create.forEach(t=>t.dispatch()),this.actions.Destroy.forEach(t=>t.dispatch()),this.actions.SwitchCamera.forEach(t=>t.playFromCurrent())),this.actions.SceneTransition.forEach(t=>t.dispatch()),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch())}},pze=class extends Pl{constructor(e,t){super(e),this.eventsPerObjects={},this.objects=[],this._prevObjects=[],this.onMouseDown=n=>{It.length>1||(this.eventContext.updateRaycaster(n),this.handleMouseHoverEvent())},this.onMouseUp=n=>{It.length>1||this.handleMouseHoverEvent(!0)},this.onMouseMove=n=>{It.length>1||(this.eventContext.updateRaycaster(n),this.handleMouseHoverEvent())},this.onUserEvent=({eventName:n,target:a,reverse:s})=>{var l;if(!n||!a)return;let o=ax(n);o&&o==="MouseHover"&&(a.dispatchEvent({type:"beginEvent",eventName:"MouseHover"}),(l=this.eventsPerObjects[a.uuid])==null||l.forEach(u=>u.dispatchUserEvent(s)))};let{page:r,sharedAssets:i}=this.eventContext;r.traverseEntity(n=>{var a,s;if(!(!n.visible||!((a=n.data)!=null&&a.events.length))){for(let{id:o,data:l}of n.data.events)if(!l.disabled&&l.type==="MouseHover")try{let u=new fze(o,l,n,r,i,t);this.eventsPerObjects[n.uuid]?this.eventsPerObjects[n.uuid].push(u):this.eventsPerObjects[n.uuid]=[u]}catch{}(s=this.eventsPerObjects[n.uuid])!=null&&s.length&&this.objects.push(n)}})}connect(){if(!this.objects.length)return;let{domElement:e}=this.eventContext;this.domEventsNeeded.clear(),Xs&&(this.domEventsNeeded.add("pointerdown"),e.addEventListener("pointerdown",this.onMouseDown),this.domEventsNeeded.add("pointerup"),e.addEventListener("pointerup",this.onMouseUp)),this.domEventsNeeded.add("pointermove"),e.addEventListener("pointermove",this.onMouseMove),this.objects.forEach(t=>{t.addEventListener("userEvent",this.onUserEvent)})}disconnect(){if(!this.objects.length)return;let{domElement:e}=this.eventContext;this.domEventsNeeded.clear(),Xs&&(e.removeEventListener("pointerdown",this.onMouseDown),e.removeEventListener("pointerup",this.onMouseUp)),e.removeEventListener("pointermove",this.onMouseMove),Object.values(this.eventsPerObjects).forEach(t=>{t.forEach(r=>{r.disconnect()})}),this.objects.forEach(t=>{t.removeEventListener("userEvent",this.onUserEvent)})}handleMouseHoverEvent(e=!1){let t=[];if(!e){let{stopRaycast:r,raycaster:i,page:n}=this.eventContext;if(r){let a=Zw(i,n,this.objects);t=V3(a)}else this.objects.forEach(a=>{e2(i,a)&&t.push(a)})}this._prevObjects.length&&this._prevObjects.forEach(r=>{var i;t.includes(r)||(r.dispatchEvent({type:"beginEvent",eventName:"MouseHover"}),(i=this.eventsPerObjects[r.uuid])==null||i.forEach(n=>n.dispatchLeave()))}),t.length&&t.forEach(r=>{var i;r.dispatchEvent({type:"beginEvent",eventName:"MouseHover"}),(i=this.eventsPerObjects[r.uuid])==null||i.forEach(n=>n.dispatchEnter())}),this._prevObjects=t}},mze=class{constructor(e,t,r,i,n,a){this.id=e,this.data=t,this.object=r,this.scrollCounter=0,this.actions=rs(t,t.actions,i,n,a,r)}connect(){this.scrollCounter=0}disconnect(){Gn(this.actions)}dispatch(e){this.actions.Transition.forEach(i=>{i.object.currentTransitionEvent!==this&&(i.object.currentTransitionEvent=this,i.init())});let t=e>0?1:-1;this.scrollCounter+=t,this.scrollCounter=Math.min(Math.max(this.scrollCounter,0),this.data.steps);let r=this.scrollCounter/this.data.steps;this.actions.Transition.forEach(i=>i.seek(r)),this.actions.Animation.forEach(i=>i.seek(t)),this.actions.Create.forEach(i=>i.dispatchThrottled()),this.actions.SetVariable.forEach(i=>i.checkConditions()),this.actions.SetVariable.forEach(i=>i.dispatch())}dispatchUserEvent(e){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),e?(this.actions.Transition.forEach(t=>t.reverseFromCurrent()),this.actions.Animation.forEach(t=>t.reverseFromCurrent())):(this.actions.Transition.forEach(t=>{t.playFromCurrent()}),this.actions.Animation.forEach(t=>{t.playFromCurrent()})),this.actions.Create.forEach(t=>t.dispatchThrottled()),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch())}},gze=class{constructor(e,t,r,i,n,a,s){this.id=e,this.data=t,this.object=r,this.domElement=a,this.eventManager=s,this.scrollStart=0,this.scrollEnd=0,this.actions=rs(t,t.actions,i,n,s,r)}computeScrollBounds(){let e=this.domElement.getBoundingClientRect(),t=document.body,r=document.documentElement,i=window.pageYOffset||r.scrollTop||t.scrollTop,n=r.clientTop||t.clientTop||0,a=Math.round(e.top+i-n);if(this.data.startFrom==="enter"){let s=window.innerHeight,o=e.height,l=this.data.enterAnchor,u=l==="top"?s:l==="bottom"?s-o:s-o*.5;this.scrollStart=a-u}else this.scrollStart=0;this.scrollStart+=this.data.startOffset??0,this.scrollEnd=this.scrollStart+(this.data.endAfter??400),this.box=e,this.computeScroll({x:window.scrollX,y:window.scrollY})}connect(){this.computeScrollBounds()}disconnect(){Gn(this.actions)}handleResize(){this.computeScrollBounds()}get isInvalidBox(){return this.box===void 0||this.box.width===0&&this.box.height===0&&this.box.top===0&&this.box.bottom===0}computeScroll({x:e,y:t}){this.actions.Transition.forEach(n=>{n.object.currentTransitionEvent!==this&&(n.object.currentTransitionEvent=this,n.init())});let r=this.scrollEnd-this.scrollStart,i=Math.min(1,Math.max(0,(t-this.scrollStart)/r));this.actions.Transition.forEach(n=>n.seek(i)),this.actions.Animation.forEach(n=>n.seek(i)),this.actions.Create.forEach(n=>n.dispatchThrottled()),this.actions.SetVariable.forEach(n=>n.checkConditions()),this.actions.SetVariable.forEach(n=>n.dispatch())}dispatch(e){this.isInvalidBox&&this.computeScrollBounds(),this.computeScroll(e)}dispatchUserEvent(e){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),e?(this.actions.Transition.forEach(t=>t.reverseFromCurrent()),this.actions.Animation.forEach(t=>t.reverseFromCurrent())):(this.actions.Transition.forEach(t=>{t.playFromCurrent()}),this.actions.Animation.forEach(t=>{t.playFromCurrent()})),this.actions.Create.forEach(t=>t.dispatchThrottled()),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch())}},vze=class extends Pl{constructor(e,t){super(e),this.wheelEventsPerObject=new Map,this.scrollEventsPerObject=new Map,this.isInview=!0,this.handleResize=()=>{[...this.scrollEventsPerObject.entries()].forEach(([s,o])=>{o.forEach(l=>l.handleResize())})},this.onScroll=s=>{if(!this.isInview)return;let o={y:window.scrollY,x:window.scrollX};[...this.scrollEventsPerObject.entries()].forEach(([l,u])=>{l.dispatchEvent({type:"beginEvent",eventName:"Scroll",scroll:o}),u.forEach(h=>h.dispatch(o))})},this.onWheel=s=>{!this.isInview||s.ctrlKey||[...this.wheelEventsPerObject.entries()].forEach(([o,l])=>{o.dispatchEvent({type:"beginEvent",eventName:"Scroll",deltaY:s.deltaY}),l.forEach(u=>u.dispatch(s.deltaY))})},this.onUserEvent=({eventName:s,target:o,reverse:l})=>{var h;if(!s||!o)return;let u=ax(s);u&&u==="Scroll"&&(o.dispatchEvent({type:"beginEvent",eventName:"Scroll"}),(h=this.wheelEventsPerObject.get(o))==null||h.forEach(c=>{c.dispatchUserEvent(l)}))};let{page:r,sharedAssets:i,domElement:n,isExport:a}=this.eventContext;r.traverseEntity(s=>{var o,l,u;if((o=s.data)!=null&&o.events.length){for(let{id:h,data:c}of s.data.events)if(!c.disabled&&c.type==="Scroll")if(c.trigger==="load"||!a){let d=new mze(h,c,s,r,i,t);this.wheelEventsPerObject.has(s)?(l=this.wheelEventsPerObject.get(s))==null||l.push(d):this.wheelEventsPerObject.set(s,[d])}else{let d=new gze(h,c,s,r,i,n,t);this.scrollEventsPerObject.has(s)?(u=this.scrollEventsPerObject.get(s))==null||u.push(d):this.scrollEventsPerObject.set(s,[d])}}}),this.intersectionObserver=new IntersectionObserver(s=>{let o=s[0];o&&(this.isInview=o.isIntersecting)},{root:null})}connect(){this.intersectionObserver.observe(this.eventContext.domElement),[...this.wheelEventsPerObject.entries()].forEach(([e,t])=>{t.forEach(r=>r.connect()),e.addEventListener("userEvent",this.onUserEvent)}),[...this.scrollEventsPerObject.entries()].forEach(([e,t])=>{t.forEach(r=>r.connect()),e.addEventListener("userEvent",this.onUserEvent)}),[...this.wheelEventsPerObject.values()].some(e=>e.length)&&(this.domEventsNeeded.add("wheel"),window.addEventListener("wheel",this.onWheel)),[...this.scrollEventsPerObject.values()].some(e=>e.length)&&(this.domEventsNeeded.add("scroll"),window.addEventListener("scroll",this.onScroll),window.addEventListener("resize",this.handleResize))}disconnect(){window.removeEventListener("wheel",this.onWheel),window.removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.handleResize),this.intersectionObserver.unobserve(this.eventContext.domElement),this.domEventsNeeded.clear(),[...this.wheelEventsPerObject.entries()].forEach(([e,t])=>{t.forEach(r=>r.disconnect()),e.removeEventListener("userEvent",this.onUserEvent)}),[...this.scrollEventsPerObject.entries()].forEach(([e,t])=>{t.forEach(r=>r.disconnect()),e.removeEventListener("userEvent",this.onUserEvent)})}},yze=class{constructor(e,t,r,i,n,a){this.id=e,this.data=t,this.object=r,this.actions=rs(t,t.actions,i,n,a,r)}disconnect(){Gn(this.actions)}dispatch(){this.actions.Transition.forEach(e=>{e.play()}),this.actions.Animation.forEach(e=>{e.play()}),this.actions.SwitchCamera.forEach(e=>{e.play()}),this.actions.SceneTransition.forEach(e=>{e.dispatch()}),this.actions.SetVariable.forEach(e=>e.checkConditions()),this.actions.SetVariable.forEach(e=>e.dispatch()),this.actions.Create.forEach(e=>{e.dispatchFromStart()}),this.actions.Destroy.forEach(e=>{e.dispatchFromStart()})}dispatchAfter(e){this.actions.Audio.forEach(t=>{(t.interaction.data.triggerAfter??"any")===e&&(t.interaction instanceof of?t.interaction.audioPlayer.play():t.interaction instanceof N3&&t.interaction.dispatch())}),this.actions.Video.forEach(t=>{let r=t.interaction.data.triggerAfter??"autoplay";r===e&&(t.interaction instanceof gg?t.interaction.play(r==="autoplay"):t.interaction instanceof U3&&t.interaction.dispatch())})}dispatchUserEvent(e){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),e?(this.actions.Transition.forEach(t=>t.reverseFromCurrent()),this.actions.Animation.forEach(t=>t.reverseFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.reverseFromCurrent())):(this.actions.Transition.forEach(t=>t.playFromCurrent()),this.actions.Animation.forEach(t=>t.playFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.playFromCurrent())),this.actions.SceneTransition.forEach(t=>t.dispatch()),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.Create.forEach(t=>{t.dispatch()}),this.actions.Destroy.forEach(t=>{t.dispatch()}),this.actions.Audio.forEach(t=>{t.interaction instanceof of?t.interaction.audioPlayer.play():t.interaction instanceof N3&&t.interaction.dispatch()}),this.actions.Video.forEach(t=>{t.interaction instanceof gg?t.interaction.play():t.interaction instanceof U3&&t.interaction.dispatch()})}},xze=class extends Pl{constructor(e,t){super(e),this.eventManager=t,this.eventsPerObject=new Map,this.eventsAfterPerObject=new Map,this.onMouseDown=()=>{[...this.eventsAfterPerObject.entries()].forEach(([r,i])=>{r.dispatchEvent({type:"beginEvent",eventName:"Start"}),i.forEach(n=>{n.dispatchAfter("mouseDown")})})},this.onKeyDown=()=>{[...this.eventsAfterPerObject.entries()].forEach(([r,i])=>{r.dispatchEvent({type:"beginEvent",eventName:"Start"}),i.forEach(n=>{n.dispatchAfter("keyDown")})})},this.onAny=()=>{let{domElement:r,isExport:i}=this.eventContext;(i?document:r).removeEventListener("pointerdown",this.onAny),document.removeEventListener("keydown",this.onAny),[...this.eventsAfterPerObject.entries()].forEach(([n,a])=>{n.dispatchEvent({type:"beginEvent",eventName:"Start"}),a.forEach(s=>{s.dispatchAfter("any")})})},this.onSceneTransitionAudioVideoPlay=()=>{[...this.eventsAfterPerObject.entries()].forEach(([r,i])=>{r.dispatchEvent({type:"beginEvent",eventName:"Start"}),i.forEach(n=>{n.actions.Audio.forEach(a=>{a.interaction instanceof of&&a.interaction.audioPlayer.play()}),n.actions.Video.forEach(a=>{let s=a.interaction.data.triggerAfter??"autoplay";a.interaction instanceof gg&&a.interaction.play(s==="autoplay")})})})},this.onPlay=()=>{[...this.eventsAfterPerObject.entries()].forEach(([r,i])=>{r.dispatchEvent({type:"beginEvent",eventName:"Start"}),i.forEach(n=>{n.dispatchAfter("autoplay")})})},this.onUserEvent=({eventName:r,target:i,reverse:n})=>{var s,o;if(!r||!i)return;let a=ax(r);a&&a==="Start"&&(i.dispatchEvent({type:"beginEvent",eventName:"Start"}),(s=this.eventsPerObject.get(i))==null||s.forEach(l=>{l.dispatchUserEvent(n)}),(o=this.eventsAfterPerObject.get(i))==null||o.forEach(l=>{l.dispatchUserEvent(n)}))}}connect(){let{sharedAssets:e,page:t}=this.eventContext;if(t.traverseEntity(r=>{var i,n,a,s;if((i=r.data)!=null&&i.events.length)for(let{id:o,data:l}of r.data.events){if(l.disabled||l.type!=="Start")continue;let u=new yze(o,l,r,t,e,this.eventManager);(u.actions.Transition.length||u.actions.Animation.length||u.actions.SwitchCamera.length||u.actions.Create.length||u.actions.Destroy.length||u.actions.SceneTransition.length||u.actions.SetVariable.length)&&(this.eventsPerObject.has(r)?(n=this.eventsPerObject.get(r))==null||n.push(u):this.eventsPerObject.set(r,[u])),u.actions.Audio.length&&(this.eventsAfterPerObject.has(r)?(a=this.eventsAfterPerObject.get(r))==null||a.push(u):this.eventsAfterPerObject.set(r,[u])),u.actions.Video.length&&(this.hasVideoAction=!0,this.eventsAfterPerObject.has(r)?(s=this.eventsAfterPerObject.get(r))==null||s.push(u):this.eventsAfterPerObject.set(r,[u]))}}),[...this.eventsAfterPerObject.values()].some(r=>r.length)){if(this.eventManager.activateCount===0){let{domElement:r,isExport:i}=this.eventContext,n=i?document:r;n.addEventListener("pointerdown",this.onMouseDown,{once:!0}),n.addEventListener("mousedown",this.onMouseDown,{once:!0}),document.addEventListener("keydown",this.onKeyDown,{once:!0}),n.addEventListener("pointerdown",this.onAny),n.addEventListener("mousedown",this.onAny),document.addEventListener("keydown",this.onAny),[...this.eventsAfterPerObject.entries()].forEach(([a,s])=>{a.addEventListener("userEvent",this.onUserEvent)})}else this.onSceneTransitionAudioVideoPlay();this.onPlay()}[...this.eventsPerObject.entries()].forEach(([r,i])=>{r.dispatchEvent({type:"beginEvent",eventName:"Start"}),i.forEach(n=>n.dispatch()),r.addEventListener("userEvent",this.onUserEvent)})}disconnect(){if([...this.eventsAfterPerObject.values()].some(e=>e.length)){let{domElement:e,isExport:t}=this.eventContext,r=t?document:e;r.removeEventListener("pointerdown",this.onMouseDown),r.removeEventListener("mousedown",this.onMouseDown),document.removeEventListener("keydown",this.onKeyDown),r.removeEventListener("pointerdown",this.onAny),r.removeEventListener("mousedown",this.onAny),document.removeEventListener("keydown",this.onAny),[...this.eventsAfterPerObject.entries()].forEach(([i,n])=>{i.removeEventListener("userEvent",this.onUserEvent),n.forEach(a=>a.disconnect())})}[...this.eventsPerObject.entries()].forEach(([e,t])=>{e.removeEventListener("userEvent",this.onUserEvent),t.forEach(r=>r.disconnect())}),this.eventsPerObject.clear(),this.eventsAfterPerObject.clear()}},bze=class{constructor(e,t,r,i,n,a){this.id=e,this.data=t,this.object=r,this.disabled=!1,this.alreadyPlayedNonTogglingActions=new Set,this.actions=rs(t,t.actions,i,n,a,r),this.target=t.target,this.useToggle=t.runMode==="Toggle"}disconnect(){Gn(this.actions)}dispatch(e){this.disabled||(this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this?(t.object.currentTransitionEvent=this,t.init()):this.data.runMode==="Once"&&this.alreadyPlayedNonTogglingActions.add(t)}),this.object.dispatchEvent({type:"beginEvent",eventName:"Collision"}),this.useToggle?(this.actions.Transition.forEach(t=>{t.toggle()}),this.actions.Animation.forEach(t=>{t.toggle()})):(this.actions.Transition.forEach(t=>{this.alreadyPlayedNonTogglingActions.has(t)===!1&&t.play()}),this.actions.Animation.forEach(t=>{t.play()})),this.actions.Reset.forEach(t=>{t.dispatch()}),this.actions.Link.forEach(t=>{t.dispatch()}),this.actions.Reset.forEach(t=>{t.dispatch()}),this.actions.Create.forEach(t=>{t.dispatch()}),this.actions.Destroy.forEach(t=>{t.dispatch(e??!1)}),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.Audio.forEach(t=>{t.dispatchBasic()}),this.actions.Video.forEach(t=>{t.dispatchBasic()}))}},wze=class extends Pl{constructor(e,t,r,i,n){super(e),this.sharedVariables=t,this.eventManager=r,this.needsMouse=i,this.needsRaycast=n,this.dynamicVars=[],this.variablesToWatch=[],this.prevMouseProperty=null,this.prevRaycastProperty=null,this.pauseTime=0,this.events=[],this.onFrame=a=>{this.rafId=window.requestAnimationFrame(this.onFrame);let s=new Date,o=[],l=[];for(let c=0;c<this.propertiesToWatch.length;c++){let{objectId:d,property:f,prevValue:m}=this.propertiesToWatch[c],p=this.eventContext.scene.find(d),g=zD.propertyPaths[f];if(g[0]==="width"||g[0]==="height"||g[0]==="depth")p=p.geometry.userData.parameters[g[0]];else for(let v=0;v<g.length;v++)p=p[g[v]];m!==p&&(m!==null&&l.push({objId:d,property:f}),this.propertiesToWatch[c].prevValue=p)}for(let c=0;c<this.variablesToWatch.length;c++){let{id:d,prevValue:f}=this.variablesToWatch[c],m=this.shared.getVariable(d);m!==f&&(o.push(d),this.variablesToWatch[c].prevValue=m)}for(let c=0;c<this.dynamicVars.length;c++){let{id:d,expectedTime:f,last:m,data:p,timerSeconds:g,startValue:v}=this.dynamicVars[c],y=1e3;if((p.dynamicVariableType==="timer"||p.dynamicVariableType==="stopwatch")&&p.format==="number3decimal"?y=1:p.dynamicVariableType==="counter"?y=p.updateInterval:p.dynamicVariableType==="random"&&(y=p.isStatic?1/0:p.updateInterval),f===-1){this.dynamicVars[c].last=a,this.dynamicVars[c].expectedTime=a+y;continue}if(a>=f){if(p.dynamicVariableType==="random"){let x=p.min+Math.random()*(p.max-p.min),b=p.decimals;x=Math.round(x*Math.pow(10,b))/Math.pow(10,b),this.shared.updateVariable(d,x),o.push(d),this.eventManager.requestRender()}else if(p.dynamicVariableType==="counter"){if(p.increment===0)continue;let x=this.shared.getVariable(d);if(p.hasEnd&&(p.increment<0?x<=p.endValue:x>=p.endValue))continue;let b=this.shared.getVariable(d)+p.increment;p.hasEnd&&(b=p.increment>0?Math.min(b,p.endValue):Math.max(b,p.endValue),p.repeat&&b===p.endValue&&(b=v)),this.shared.updateVariable(d,b),o.push(d),this.eventManager.requestRender()}else if(p.dynamicVariableType==="time")this.shared.updateVariable(d,ZU(s,p)),o.push(d),this.eventManager.requestRender();else{let x=fl.isTextValue(p.endValue)?gj(p.endValue.textValue):p.endValue;if(p.hasEnd&&(p.dynamicVariableType==="timer"?g<=x:g>=x)||p.dynamicVariableType==="timer"&&g===0)continue;let b=g+(a-m)/1e3*(p.dynamicVariableType==="timer"?-1:1);b=Math.max(b,0),p.hasEnd&&(b=p.dynamicVariableType==="timer"?Math.max(b,x):Math.min(b,x),p.repeat&&Math.abs(b-x)<(p.format==="number3decimal"?1e-4:.1)&&(b=v)),this.dynamicVars[c].timerSeconds=b,this.shared.updateVariable(d,Kl.getFormattedTimerTime(b,p)),o.push(d),this.eventManager.requestRender()}this.dynamicVars[c].last=a,this.dynamicVars[c].expectedTime+=y}}this.needsMouse&&this.shared.mouseProperty!==this.prevMouseProperty&&(this.prevMouseProperty=this.shared.mouseProperty,this.events.forEach(c=>{c.data.variableId==="mouseProperty"&&(c.dispatch(),this.eventManager.requestRender())}));let u=!1;this.shared.mouseProperty!==this.prevMouseProperty&&(this.prevMouseProperty=this.shared.mouseProperty,u=!0);let h=!1;this.shared.raycastProperty!==this.prevRaycastProperty&&(this.prevRaycastProperty=this.shared.raycastProperty,h=!0),this.events.forEach(c=>{(o.includes(c.data.variableId)||l.find(d=>d.objId===c.data.objectId&&d.property===c.data.property)||c.data.variableId==="mouseProperty"&&u||c.data.variableId==="raycastProperty"&&h)&&(c.dispatch(),this.eventManager.requestRender())})},this.onBlur=()=>{this.pause()},this.onFocus=()=>{this.resume()},e.page.traverseEntity(a=>{var s;(s=a.data)==null||s.events.filter(o=>o.data.type==="VariableChange"&&!o.data.disabled).forEach(o=>{this.events.push(new _ze(a.uuid,o.data,a,e.page,e.sharedAssets,r))})}),this.propertiesToWatch=this.events.filter(a=>a.data.variableId==="objectProperty"&&a.data.objectId!==null).map(a=>({objectId:a.data.objectId,property:a.data.property,prevValue:null})),this.shared=e.sharedAssets,this.sharedVariables.forEach(({id:a,data:s})=>{if(!("dynamicVariableType"in s)){this.events.find(l=>l.data.variableId===a)&&this.variablesToWatch.push({id:a,prevValue:this.shared.getVariable(a)});return}let o;if(s.dynamicVariableType==="timer"||s.dynamicVariableType==="stopwatch"){let l;if(fl.isTextValue(s.value)&&Array.isArray(s.value.textValue)){let u=s.value.textValue;u.length===3?l=u[2]+u[1]*60+u[0]*3600:l=u[1]+u[0]*60}else l=s.value;o=l,this.dynamicVars.push({id:a,last:-1,expectedTime:-1,data:s,timerSeconds:l,startValue:o})}else{if(s.dynamicVariableType==="time"&&this.shared.updateVariable(a,ZU(new Date,s)),s.dynamicVariableType==="counter"&&(o=fl.isTextValue(s.value)?gj(s.value.textValue):s.value),s.dynamicVariableType==="random"){o=s.min+Math.random()*(s.max-s.min);let l=s.decimals;o=Math.round(o*Math.pow(10,l))/Math.pow(10,l),this.shared.updateVariable(a,o)}this.dynamicVars.push({id:a,last:-1,expectedTime:-1,data:s,startValue:o})}})}pause(){this.pauseTime=Date.now()}resume(){let e=Date.now()-this.pauseTime;for(let t=0;t<this.dynamicVars.length;t++)this.dynamicVars[t].last+=e,this.dynamicVars[t].expectedTime+=e}connect(){this.rafId=window.requestAnimationFrame(this.onFrame),window.addEventListener("blur",this.onBlur),window.addEventListener("focus",this.onFocus)}disconnect(){window.removeEventListener("blur",this.onBlur),window.removeEventListener("focus",this.onFocus),this.rafId&&(window.cancelAnimationFrame(this.rafId),this.rafId=void 0),this.events.forEach(e=>e.dispose())}},_ze=class{constructor(e,t,r,i,n,a){this.id=e,this.data=t,this.object=r,this.actions=rs(t,t.actions,i,n,a,r)}dispatch(){let e=this.actions;e.Audio.forEach(t=>t.dispatchConditional()),e.Video.forEach(t=>t.dispatchConditional()),e.Create.forEach(t=>t.dispatch()),e.Destroy.forEach(t=>t.dispatch()),e.Reset.forEach(t=>t.dispatch()),e.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this),t.init()}),e.Transition.forEach(t=>t.play()),e.Animation.forEach(t=>t.play()),e.SwitchCamera.forEach(t=>t.play()),e.SceneTransition.forEach(t=>t.dispatch()),e.SetVariable.forEach(t=>t.checkConditions()),e.SetVariable.forEach(t=>t.dispatch())}dispose(){Gn(this.actions)}};function gj(e){return e.length===3?e[2]+e[1]*60+e[0]*3600:e[1]+e[0]*60}var Sze="https://unpkg.com/@splinetool/runtime@0.9.457/build/",Eze="https://unpkg.com/@splinetool/navmesh-wasm@0.9.457/build/",Mze=`
(async function() {
	const [wasmImport, wasmBinary] = await Promise.all([
		import('${Sze}' + 'navmesh.js'),
		fetch('${Eze}' + 'navmesh.wasm').then((res) => res.arrayBuffer()),
	]);
	const wasmModule = wasmImport.default;
	self.module = await wasmModule({ wasmBinary });
	postMessage('ready');
})();
`,Cze=`
(async function() {
	const [wasmImport, wasmBinary] = await Promise.all([
		import(self.location.origin + '/_libraries/navmesh.js'),
		fetch(self.location.origin + '/_libraries/navmesh.wasm').then((res) => res.arrayBuffer()),
	]);
	const wasmModule = wasmImport.default;
	self.module = await wasmModule({ wasmBinary });
	postMessage('ready');
})();
`,Aze=`

onmessage = function(messageEvent) {
	const meshData = messageEvent.data;
	const positions = meshData[0];
	const offset = meshData[1];
	const indices = meshData[2];
	const indicesLength = meshData[3];
	const parameters = meshData[4];

	const module = self.module;
	const rc = new module.rcConfig();
	rc.cs = parameters.cs;
	rc.ch = parameters.ch;
	rc.borderSize = parameters.borderSize ? parameters.borderSize : 0;
	rc.tileSize = parameters.tileSize ? parameters.tileSize : 0;
	rc.walkableSlopeAngle = parameters.walkableSlopeAngle;
	rc.walkableHeight = parameters.walkableHeight;
	rc.walkableClimb = parameters.walkableClimb;
	rc.walkableRadius = parameters.walkableRadius;
	rc.maxEdgeLen = parameters.maxEdgeLen;
	rc.maxSimplificationError = parameters.maxSimplificationError;
	rc.minRegionArea = parameters.minRegionArea;
	rc.mergeRegionArea = parameters.mergeRegionArea;
	rc.maxVertsPerPoly = parameters.maxVertsPerPoly;
	rc.detailSampleDist = parameters.detailSampleDist;
	rc.detailSampleMaxError = parameters.detailSampleMaxError;

	if (!self.navMesh) {
		self.navMesh = new module.NavMesh();
	}
	self.navMesh.build(positions, offset, indices, indicesLength, rc);

	const navmeshData = navMesh.getNavmeshData();
	const arrView = new Uint8Array(module.HEAPU8.buffer, navmeshData.dataPointer, navmeshData.size);
	const ret = new Uint8Array(navmeshData.size);
	ret.set(arrView);
	navMesh.freeNavmeshData(navmeshData);

	postMessage(ret);
}
`,Tze=.001,Pze={cs:6,ch:2,walkableSlopeAngle:90,walkableHeight:20,walkableClimb:5,walkableRadius:0,maxEdgeLen:12,maxSimplificationError:1.3,minRegionArea:8,mergeRegionArea:20,maxVertsPerPoly:6,detailSampleDist:6,detailSampleMaxError:1},kX,or,Kn;VPe.then(e=>{kX=e,or=new e.Vec3,Kn=new e.Vec3});var Dze=new T,Oze=class{constructor(e=!1,t=!1){this.usePhysics=e,this.isExport=t,this.onPointerDown=r=>{if(It.length!==1)return;let{raycaster:i,page:n}=this.eventContext;this.eventContext.updateRaycaster(r);let a=n.raycastWithClones(i);if(a.length!==0){if(this.gameControl){let s=Dze.copy(this.gameControl.colliderWorldPosition);s.y-=this.gameControl.colliderHeight/2,this.gameControl.path=this.computePath(s,a[0].point)}this.eventContext.requestRender()}},this.traverseWithPhysics=(r,i)=>n=>{var d,f,m,p,g,v,y;let a;if(n instanceof ml)if(n.objectForSample){if(n.objectForSample.dataPatched.physics.fusedBody)return;a=n.object}else return n.object.dataPatched.physics.fusedBody===!0&&n.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(n instanceof ya)a=n.object;else if(a=n,((d=a.dataPatched.cloner)==null?void 0:d.disabled)===!1&&((f=a.dataPatched.cloner)==null?void 0:f.hideBase)&&((m=a.dataPatched.physics)==null?void 0:m.fusedBody)!==!0)return!0;if(i&&!a.userData.navmesh)return;let s=a.dataPatched;if(!s.visible&&((p=s.physics)==null?void 0:p.enabled)!==!0)return!0;n.updateMatrixWorldSVD();let o=t2(s),l=a.userData.hasDestroy,u=a.userData.hasDrag,h=!1,c=!1;for(let x of s.events)x.data.disabled!==!0&&(x.data.type==="GameControl"?h=!0:x.data.type==="Follow"&&(c=!0));if(h||o||c||l||u)return!0;if(this.usePhysics&&((g=s.physics)==null?void 0:g.rigidBody)==="dynamic"){if(this.usePhysics&&((v=s.physics)!=null&&v.fusedBody))return!0}else if("geometry"in n&&n.geometry&&r.push(nc(n.geometry,n.matrixWorld)),this.usePhysics&&((y=s.physics)==null?void 0:y.fusedBody))return n.traverseObject((x,b)=>{var E,S;if(b===0)return;let _;if(x instanceof ml)if(x.objectForSample){if(x.objectForSample.dataPatched.physics.fusedBody)return;_=x.object}else return x.object.dataPatched.physics.fusedBody===!0&&x.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(x instanceof ya)_=x.object;else if(_=x,(E=x.dataPatched.cloner)==null?void 0:E.hideBase)return!0;let w=_.dataPatched;if(!w.visible&&((S=w.physics)==null?void 0:S.enabled)!==!0)return!0;"geometry"in x&&x.geometry&&r.push(nc(x.geometry,x.matrixWorld))}),!0},this.traverseNoPhysics=(r,i)=>n=>{let a;if(n instanceof ml)return;n instanceof ya?a=n.object:a=n;let s=a.dataPatched;if(s.physics.enabled==="visibility"?!s.visible:!s.physics.enabled)return!0;if(i&&!a.userData.navmesh)return;let o=n.geometry,l=a.userData.hasDestroy===!0,u=a.userData.hasDrag===!0;if(t2(s)||l||u||a.dataPatched.events.some(h=>h.data.disabled!==!0&&h.data.type==="GameControl"))return!0;o&&r.push(nc(o,n.matrixWorld))},this.navmeshWasm=kX,this.navMesh=new this.navmeshWasm.NavMesh,this._workerURL=URL.createObjectURL(new Blob([(t?Mze:Cze)+Aze])),this._worker=new Worker(this._workerURL)}init(e,t,r){this.gameControl=t,this.eventContext=r,this.resolution=e.ch,this.setDefaultQueryExtent(new T().setScalar(e.ch*e.walkableRadius*1.2)),this._worker.onmessage=()=>{this.createNavMesh(r.page,e,i=>{this.buildFromNavmeshData(i.data)})},this.eventContext.renderer.domElement.addEventListener("pointerdown",this.onPointerDown)}createNavMesh(e,t,r){t.objects.forEach(l=>{var h;let u=e.scene.find(l);u.traverseEntity(c=>{c.userData.navmesh=!0}),(h=u.cloner)==null||h.traverseObject(c=>{c.userData.navmesh=!0})});let i=[],n=(this.usePhysics?this.traverseWithPhysics:this.traverseNoPhysics)(i,t.zones==="custom");if(e.traverseChildren(n),t.objects.forEach(l=>{var h;let u=e.scene.find(l);u.traverseEntity(c=>{c.userData.navmesh=void 0}),(h=u.cloner)==null||h.traverseObject(c=>{c.userData.navmesh=void 0})}),i.length===0)return!1;let a=af(i),{positions:s,triIndices:o}=HE(a.getAttribute("position"),a.getIndex());return this._worker.postMessage([s,s.length/3,o,o.length,{...Pze,...t}]),this._worker.onmessage=r,!0}createDebugNavGeometry(){let e,t,r=this.navMesh.getDebugNavMesh(),i=r.getTriangleCount(),n=new Uint32Array(i*3),a=new Float32Array(i*3*3);for(e=0;e<i*3;e++)n[e]=e;for(e=0;e<i;e++)for(t=0;t<3;t++){let o=r.getTriangle(e).getPoint(t);a[e*9+t*3+0]=o.x,a[e*9+t*3+1]=o.y,a[e*9+t*3+2]=o.z}let s=new wt;return s.setIndex(new Bt(n,1)),s.setAttribute("position",new Bt(a,3)),s}getClosestPoint(e){return or.x=e.x,or.y=e.y,or.z=e.z,this.navMesh.getClosestPoint(or)}getClosestPointToRef(e,t){or.x=e.x,or.y=e.y,or.z=e.z;let r=this.navMesh.getClosestPoint(or);t.set(r.x,r.y,r.z)}getRandomPointAround(e,t){return or.x=e.x,or.y=e.y,or.z=e.z,this.navMesh.getRandomPointAround(or,t)}getRandomPointAroundToRef(e,t,r){or.x=e.x,or.y=e.y,or.z=e.z;let i=this.navMesh.getRandomPointAround(or,t);r.set(i.x,i.y,i.z)}moveAlong(e,t){return or.x=e.x,or.y=e.y,or.z=e.z,Kn.x=t.x,Kn.y=t.y,Kn.z=t.z,this.navMesh.moveAlong(or,Kn)}moveAlongToRef(e,t,r){return or.x=e.x,or.y=e.y,or.z=e.z,Kn.x=t.x,Kn.y=t.y,Kn.z=t.z,this.navMesh.moveAlong(or,Kn)}computePath(e,t){let r=this.getClosestPoint(t);Kn.x=r.x,Kn.y=r.y,Kn.z=r.z,this.getClosestPoint(e);let i=this.navMesh.computePath(or,Kn),n=i.getPointCount(),a=[];for(let s=0;s<n;s++){let o=i.getPoint(s);a.push(new T(o.x,o.y,o.z))}return a}createCrowd(e,t){return new Ize(this,e,t)}setDefaultQueryExtent(e){or.x=e.x,or.y=e.y,or.z=e.z,this.navMesh.setDefaultQueryExtent(or)}getDefaultQueryExtent(){return this.navMesh.getDefaultQueryExtent()}buildFromNavmeshData(e){let t=e.length*e.BYTES_PER_ELEMENT,r=this.navmeshWasm._malloc(t),i=new Uint8Array(this.navmeshWasm.HEAPU8.buffer,r,t);i.set(e);let n=new this.navmeshWasm.NavmeshData;n.dataPointer=i.byteOffset,n.size=e.length,this.navMesh.buildFromNavmeshData(n),this.navmeshWasm._free(i.byteOffset)}getNavmeshData(){let e=this.navMesh.getNavmeshData(),t=new Uint8Array(this.navmeshWasm.HEAPU8.buffer,e.dataPointer,e.size),r=new Uint8Array(e.size);return r.set(t),this.navMesh.freeNavmeshData(e),r}getDefaultQueryExtentToRef(e){let t=this.navMesh.getDefaultQueryExtent();e.set(t.x,t.y,t.z)}dispose(){var e;this.navMesh.destroy(),this._worker.terminate(),URL.revokeObjectURL(this._workerURL),(e=this.eventContext)==null||e.renderer.domElement.removeEventListener("pointerdown",this.onPointerDown)}addCylinderObstacle(e,t,r){return or.x=e.x,or.y=e.y,or.z=e.z,this.navMesh.addCylinderObstacle(or,t,r)}addBoxObstacle(e,t,r){return or.x=e.x,or.y=e.y,or.z=e.z,Kn.x=t.x,Kn.y=t.y,Kn.z=t.z,this.navMesh.addBoxObstacle(or,Kn,r)}removeObstacle(e){this.navMesh.removeObstacle(e)}isSupported(){return this.navmeshWasm!==void 0}},Ize=class{constructor(e,t,r){this.navmeshWasmWrapper=e,this.transforms=[],this.agents=new Array,this.reachRadii=new Array,this._agentDestinationArmed=new Array,this._agentDestination=new Array,this.crowd=new this.navmeshWasmWrapper.navmeshWasm.Crowd(t,r,this.navmeshWasmWrapper.navMesh.getNavMesh())}onReachTarget(e,t){}addAgent(e,t,r){let i=new this.navmeshWasmWrapper.navmeshWasm.dtCrowdAgentParams;i.radius=t.radius,i.height=t.height,i.maxAcceleration=t.maxAcceleration,i.maxSpeed=t.maxSpeed,i.collisionQueryRange=t.collisionQueryRange,i.pathOptimizationRange=t.pathOptimizationRange,i.separationWeight=t.separationWeight,i.updateFlags=7,i.obstacleAvoidanceType=0,i.queryFilterType=0,i.userData=0;let n=this.crowd.addAgent(new this.navmeshWasmWrapper.navmeshWasm.Vec3(e.x,e.y,e.z),i);return this.transforms.push(r),this.agents.push(n),this.reachRadii.push(t.reachRadius?t.reachRadius:t.radius),this._agentDestinationArmed.push(!1),this._agentDestination.push(new T(0,0,0)),n}getAgentPosition(e){return this.crowd.getAgentPosition(e)}getAgentPositionToRef(e,t){let r=this.crowd.getAgentPosition(e);t.set(r.x,r.y,r.z)}getAgentVelocity(e){return this.crowd.getAgentVelocity(e)}getAgentVelocityToRef(e,t){let r=this.crowd.getAgentVelocity(e);t.set(r.x,r.y,r.z)}getAgentNextTargetPath(e){return this.crowd.getAgentNextTargetPath(e)}getAgentNextTargetPathToRef(e,t){let r=this.crowd.getAgentNextTargetPath(e);t.set(r.x,r.y,r.z)}getAgentState(e){return this.crowd.getAgentState(e)}overOffmeshConnection(e){return this.crowd.overOffmeshConnection(e)}agentGoto(e,t){this.crowd.agentGoto(e,new this.navmeshWasmWrapper.navmeshWasm.Vec3(t.x,t.y,t.z));let r=this.agents.indexOf(e);r>-1&&(this._agentDestinationArmed[r]=!0,this._agentDestination[r].set(t.x,t.y,t.z))}agentTeleport(e,t){this.crowd.agentTeleport(e,new this.navmeshWasmWrapper.navmeshWasm.Vec3(t.x,t.y,t.z))}updateAgentParameters(e,t){let r=this.crowd.getAgentParameters(e);t.radius!==void 0&&(r.radius=t.radius),t.height!==void 0&&(r.height=t.height),t.maxAcceleration!==void 0&&(r.maxAcceleration=t.maxAcceleration),t.maxSpeed!==void 0&&(r.maxSpeed=t.maxSpeed),t.collisionQueryRange!==void 0&&(r.collisionQueryRange=t.collisionQueryRange),t.pathOptimizationRange!==void 0&&(r.pathOptimizationRange=t.pathOptimizationRange),t.separationWeight!==void 0&&(r.separationWeight=t.separationWeight),this.crowd.setAgentParameters(e,r)}removeAgent(e){this.crowd.removeAgent(e);let t=this.agents.indexOf(e);t>-1&&(this.agents.splice(t,1),this.transforms.splice(t,1),this.reachRadii.splice(t,1),this._agentDestinationArmed.splice(t,1),this._agentDestination.splice(t,1))}getAgents(){return this.agents}update(e){if(this.navmeshWasmWrapper.navMesh.update(),e<=Tze)return;let t=1/60,r=10;{let i=Math.floor(e/t);i>r&&(i=r),i<1&&(i=1);let n=e/i;for(let a=0;a<i;a++)this.crowd.update(n)}for(let i=0;i<this.agents.length;i++){let n=this.agents[i],a=this.getAgentPosition(n);if(this.transforms[i].copy(a),this._agentDestinationArmed[i]){let s=a.x-this._agentDestination[i].x,o=a.z-this._agentDestination[i].z,l=this.reachRadii[i],u=this._agentDestination[i].y-this.reachRadii[i],h=this._agentDestination[i].y+this.reachRadii[i],c=s*s+o*o;a.y>u&&a.y<h&&c<l*l&&(this.onReachTarget(n,this._agentDestination[i]),this._agentDestinationArmed[i]=!1)}}}setDefaultQueryExtent(e){let t=new this.navmeshWasmWrapper.navmeshWasm.Vec3(e.x,e.y,e.z);this.crowd.setDefaultQueryExtent(t)}getDefaultQueryExtent(){return this.crowd.getDefaultQueryExtent()}getDefaultQueryExtentToRef(e){let t=this.crowd.getDefaultQueryExtent();e.set(t.x,t.y,t.z)}getCorners(e){let t,r=this.crowd.getCorners(e),i=r.getPointCount(),n=[];for(t=0;t<i;t++){let a=r.getPoint(t);n.push(new T(a.x,a.y,a.z))}return n}dispose(){this.crowd.destroy()}};function Rze(e){let t=!1;return e.scene.objects.forEach(r=>{r.data.type==="Page"&&!t&&r.data.publish.gameControlObject&&y1.traverseModuleInstances(e,r.id,(i,n,a)=>{for(let s of a)s.data.type==="GameControl"&&s.data.navmesh.enabled&&(t=!0)})}),t}var kze={type:"change"},vj={type:"changeZoom"},Lze={type:"changePan"},Zp={type:"start"},Jp={type:"end",changed:!0},Bze={type:"end",changed:!1},hT=new Gt,yj=new re,Nze=2*Math.PI,zze=1e-8,Fze=.01,dT=new T,lw=new re,fT=new T,uw=new Gt,xj=new ze,Uze={type:"requestRender"},LX=class extends sa{constructor(e,t,r={isPlayMode:!1,isExport:!1}){super(),this.object=e,this.domElement=t,this.options=r,this.enabled=!0,this.useKeyEvents=!0,this.enableDamping=!1,this.enableZoom=!0,this.enableRotate=!0,this.enablePan=!0,this.autoRotate=!1,this.rotationLimitsMode=0,this.panLimitsMode=0,this.rotationSoftLimit=2,this.panSoftLimit=2,this.hoverRotatePanMode=0,this.zoomLimitsEnabled=!1,this.mouseButtons=[0,5],this.mouseButtonsPlay=[3,4,5],this.touches=[null,oo.DOLLY_ROTATE,oo.PAN],this.offset=new T,this.eye=new T,this.lastPosition=new T,this.lastQuaternion=new Gt,this.current=new re,this.overShoot=new re,this.overRatio=new re,this.spherical=new A5,this.sphericalDelta=new A5,this.panOffset=new T,this.panLeftV=new T,this.panUpV=new T,this.panV=new T,this.rotateStart=new re,this.rotateEnd=new re,this.rotateDelta=new re,this.panStart=new re,this.panEnd=new re,this.panDelta=new re,this.dollyStart=new re,this.dollyEnd=new re,this.dollyDelta=new re,this.rotationRangeFactor=new re,this.panRangeFactor=new re,this.state=-1,this.zoomChanged=!1,this.isPointerDown=!1,this.isThetaFlipped=!1,this.prevScale=0,this.scale=1,this.gesture=!1,this.timer=-1,this.timerHover=-1,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPhi=0,this.maxPhi=Math.PI,this.minTheta=-1/0,this.maxTheta=1/0,this.minH=0,this.maxH=Math.PI,this.minV=-1/0,this.maxV=1/0,this.autoRotateClockwise=!0,this.isPanOverShoot=!1,this.isRotateOverShoot=!1,this.resetHoverEffectOnPointerLeave=!1,this.hasChange=!1,this.useWindowEvents=!1,this.isTouchZoom=!0,this.autoRotateSpeed=2,this.dampingFactor=.125,this.zoomSpeed=2,this.rotateSpeed=1,this.panSpeed=1,this.hoverRotatePanStrength=.1,this.thetaIsFree=!1,this.phiIsFree=!1,this.needsUpdate=!0,this.onCameraChange=i=>{this.object.removeEventListener("beginState",this.onBeginState),this.object.removeEventListener("completeState",this.onCompleteState),this.object.removeEventListener("cameraChange",this.onCameraChange),this.object=i.camera,this.object.addEventListener("beginState",this.onBeginState),this.object.addEventListener("completeState",this.onCompleteState),this.object.addEventListener("cameraChange",this.onCameraChange)},this.update=()=>{this.object.updateWorldMatrix(!0,!1),this.object.matrixWorld.decompose(fT,uw,dT),this.offset.copy(fT).sub(this.target),this.spherical.setFromVector3(this.offset),this.object.isUpVectorFlipped&&(this.spherical.phi*=-1,this.spherical.theta-=Math.PI),this.autoRotate&&this.state===-1&&this.rotateLeft((this.autoRotateClockwise===!0?1:-1)*this.getAutoRotationAngle()),this.rotationLimitsMode!==0&&this.applyLimits(this.sphericalDelta,this.rotationLimitsMode,this.rotationSoftLimit,this.maxTheta,this.minTheta,this.maxPhi,this.minPhi,this.rotationRangeFactor),this.rotationLimitsMode!==2&&(this.spherical.phi+=this.sphericalDelta.phi),(this.rotationLimitsMode!==1||this.autoRotate===!0)&&(this.spherical.theta+=this.sphericalDelta.theta),this.spherical.radius*=this.scale,this.zoomLimitsEnabled&&(this.spherical.radius=Math.max(this.minDistance,Math.min(this.maxDistance,this.spherical.radius))),this.panLimitsMode!==0&&(this.target.applyQuaternion(hT.copy(uw).invert()),this.panOffset.applyQuaternion(hT),this.applyLimits(this.panOffset,this.panLimitsMode,this.panSoftLimit,this.maxH,this.minH,this.maxV,this.minV,this.panRangeFactor),this.target.applyQuaternion(uw),this.panOffset.applyQuaternion(uw)),this.panLimitsMode===2&&(this.panOffset.y=0),this.panLimitsMode===1&&(this.panOffset.x=0),this.state===-1&&!this.gesture?(this.panOffset.multiplyScalar(1-this.dampingFactor),this.target.add(this.panOffset)):(this.target.add(this.panOffset),this.panOffset.set(0,0,0)),this.offset.setFromSpherical(this.spherical),fT.copy(this.target).add(this.offset),this.object.position.copy(this.target).add(this.offset),this.object.parent&&(xj.copy(this.object.parent.matrixWorld).invert(),this.object.position.applyMatrix4(xj));let i=this.spherical.phi%Nze;return this.eye.copy(this.offset).normalize(),this.object.up.copy(Xr.DEFAULT_UP).applyAxisAngle(this.eye,this.object.angleOffsetFromUp),i>0&&i>Math.PI||i<0&&i>-Math.PI?(this.object.up.negate(),this.object.lookAt(this.target),this.object.isUpVectorFlipped=!0):(this.object.lookAt(this.target),this.object.isUpVectorFlipped=!1),this.state===-1||this.enableDamping===!0?(this.sphericalDelta.theta*=1-this.dampingFactor,this.sphericalDelta.phi*=1-this.dampingFactor):this.sphericalDelta.set(0,0,0),this.scale=1,this.zoomChanged||this.lastPosition.distanceToSquared(this.object.position)>Fze||8*(1-this.lastQuaternion.dot(this.object.quaternion))>zze?(this.dispatchEvent(kze),this.object.dispatchEvent(Uze),this.lastPosition.copy(this.object.position),this.lastQuaternion.copy(this.object.quaternion),this.zoomChanged=!1,!0):(this.isPanOverShoot=!1,this.isRotateOverShoot=!1,this.object.wasMovedBySwitchCameraAction=!1,this.sphericalDelta.set(0,0,0),this.panOffset.set(0,0,0),!1)},this.onPointerDown=i=>{this.enabled!==!1&&(i.pointerType==="touch"||i.pointerType==="pen"&&Xs?this.onPointerDownTouch(i):this.onPointerDownMouse(i),this.state!==-1&&(this.isPointerDown=!0,this.dispatchEvent(Zp),this.domElement.addEventListener("pointermove",this.onPointerMove),this.domElement.addEventListener("pointerup",this.onPointerUp),i.stopPropagation(),i.pointerType==="touch"||i.pointerType==="pen"&&Xs||this.domElement.setPointerCapture(i.pointerId)))},this.onPointerLeave=i=>{this.resetHoverEffectOnPointerLeave&&!this.useWindowEvents?(this.hoverRotatePanMode===1?(this.sphericalDelta.theta=-this.spherical.theta,this.sphericalDelta.phi=-this.spherical.phi,dT.subVectors(this.position0,this.target0),this.spherical.setFromVector3(dT),this.sphericalDelta.theta+=this.spherical.theta,this.sphericalDelta.phi+=this.spherical.phi,this.sphericalDelta.theta/=8,this.sphericalDelta.phi/=8):this.hoverRotatePanMode===2&&this.panOffset.subVectors(this.target0,this.target).divideScalar(8),this.update()):this.pointerLeaveEvent=i},this.onPointerEnter=i=>{this.resetHoverEffectOnPointerLeave||this.pointerLeaveEvent===void 0?lw.set(i.clientX-this.domElement.clientWidth/2,i.clientY-this.domElement.clientHeight/2):lw.set(i.clientX-this.pointerLeaveEvent.clientX,i.clientY-this.pointerLeaveEvent.clientY),this.hoverRotatePanMode===1?(this.rotateDelta.copy(lw).multiplyScalar(this.rotateSpeed*this.hoverRotatePanStrength).rotateAround(yj,-this.object.angleOffsetFromUp),this.rotateLeft(2*Math.PI*this.rotateDelta.x/this.domElement.clientHeight),this.rotateUp(2*Math.PI*this.rotateDelta.y/this.domElement.clientHeight),this.rotateStart.set(i.clientX,i.clientY)):this.hoverRotatePanMode===2&&(this.panDelta.copy(lw).multiplyScalar(this.panSpeed*this.hoverRotatePanStrength),this.pan(this.panDelta.x,this.panDelta.y),this.panStart.set(i.clientX,i.clientY)),this.update()},this.onPointerMove=i=>{this.enabled!==!1&&(this.checkRaycastLock()||(i.pointerType==="touch"||i.pointerType==="pen"&&Xs?this.onPointerMoveTouch(i):this.onPointerMoveMouse(i),i.stopPropagation()))},this.onPointerUp=i=>{this.isPointerDown=!1,It.length===0&&(this.domElement.removeEventListener("pointermove",this.onPointerMove),this.domElement.removeEventListener("pointerup",this.onPointerUp)),It.length>1&&i.preventDefault(),this.hasChange?this.dispatchEvent(Jp):this.dispatchEvent(Bze),this.state=-1,i&&(i.stopPropagation(),i.pointerType==="touch"||i.pointerType==="pen"&&Xs||this.domElement.releasePointerCapture(i.pointerId))},this.onPointerDownMouse=i=>{let n;switch(this.useKeyEvents?n=this.mouseButtons[i.button]:n=this.mouseButtonsPlay[i.button],n){case 0:if(i.altKey===!0&&!i.shiftKey&&!Ab(i)){if(this.enableRotate===!1)return;this.handleMouseDownRotate(i),this.state=0}else if(this.key===" "){if(this.enablePan===!1)return;this.handleMouseDownPan(i),this.state=2}break;case 4:if(this.enablePan===!1)return;this.handleMouseDownPan(i),this.state=2;break;case 3:if(Ab(i)||i.shiftKey){if(this.enablePan===!1)return;this.handleMouseDownPan(i),this.state=2}else{if(this.enableRotate===!1)return;this.handleMouseDownRotate(i),this.state=0}break;case 5:if(Ab(i)||i.shiftKey){if(this.enableRotate===!1)return;this.handleMouseDownRotate(i),this.state=0}else{if(this.enablePan===!1)return;this.handleMouseDownPan(i),this.state=2}break;default:this.state=-1}},this.onPointerMoveMouse=i=>{switch(this.state){case 0:if(this.enableRotate===!1)return;this.handleMouseMoveRotate(i);break;case 1:if(this.enableZoom===!1)return;this.handleMouseMoveDolly(i);break;case 2:if(this.enablePan===!1)return;this.handleMouseMovePan(i);break}this.object.wasMovedByUser=!0},this.onPointerDownTouch=i=>{switch(It.length>1&&i.preventDefault(),this.touches[It.length-1]){case oo.ROTATE:if(this.enableRotate===!1){this.state=-1;return}this.handleTouchStartRotate(),this.state=3;break;case oo.PAN:if(this.enablePan===!1){this.state=-1;return}this.handleTouchStartPan(),this.state=4;break;case oo.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this.handleTouchStartDollyPan(),this.state=5;break;case oo.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this.handleTouchStartDollyRotate(),this.state=6;break;default:this.state=-1}},this.onPointerMoveTouch=i=>{switch(It.length>1&&i.preventDefault(),this.state){case 3:if(this.enableRotate===!1)return;this.handleTouchMoveRotate(i),this.update();break;case 4:if(this.enablePan===!1)return;this.handleTouchMovePan(i),this.update();break;case 5:if(this.enableZoom===!1&&this.enablePan===!1)return;this.handleTouchMoveDollyPan(i),this.update();break;case 6:if(this.enableZoom===!1&&this.enableRotate===!1)return;this.handleTouchMoveDollyRotate(i),this.update();break;default:this.state=-1}this.object.wasMovedByUser=!0},this.dispatchEndDebounced=JR(()=>this.dispatchEvent(Jp),33),this.onMouseWheel=i=>{this.enabled===!1||this.enableZoom===!1&&this.enablePan===!1||this.checkRaycastLock()||(!this.options.isExport&&this.domElement.clientHeight===document.body.clientHeight&&this.domElement.clientWidth===document.body.clientWidth&&i.preventDefault(),this.dispatchEvent(Zp),this.handleMouseWheel(i),this.dispatchEndDebounced(),this.object.wasMovedByUser=!0)},this.onGesture=i=>{if(i.preventDefault(),this.enabled!==!1&&!this.checkRaycastLock()&&!A$)if(i.type==="gesturechange"){if(this.enableZoom===!1||this.isTouchZoom===!1)return;this.dispatchEvent(Zp),i.scale>this.prevScale?this.dollyIn(this.getZoomScale()):i.scale<this.prevScale&&this.dollyOut(this.getZoomScale()),this.prevScale=i.scale,this.update(),this.object.wasMovedByUser=!0}else this.dispatchEvent(Jp)},this.onContextMenu=i=>{i.preventDefault()},this.onTouchEnd=i=>{i.preventDefault()},this.onKeyDown=i=>{this.enabled!==!1&&(this.key=i.key,i.key===" "&&this.dispatchEvent(Zp))},this.onKeyUp=i=>{this.enabled!==!1&&(this.key=void 0,this.state!==-1&&i.key==="Alt"&&this.onPointerUp(It[0]),i.key===" "&&this.dispatchEvent(Jp))},this.onPointerHover=i=>{i.pointerType!=="mouse"||this.enabled===!1||this.state!==-1||this.hoverRotatePanMode===2&&this.isPanOverShoot||this.hoverRotatePanMode===1&&this.isRotateOverShoot||(this.isPointerDown=!0,this.hoverRotatePanMode===2?this.handleMouseMovePan(i,this.hoverRotatePanStrength):this.hoverRotatePanMode===1&&this.handleMouseMoveRotate(i,this.hoverRotatePanStrength))},this.onBeginState=()=>{this.enabled=!1,this.needsUpdate=!1},this.onCompleteState=i=>{i.isfromEntity&&this.options.isPlayMode||(this.enabled=!0,this.needsUpdate=!0,this.object.updateUp(),this.object.getTarget(this.target))},this.target=this.object.getTarget(),this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.quat0=this.object.quaternion.clone(),this.isUpVectorFlipped0=this.object.isUpVectorFlipped,this.offset.copy(this.object.position).sub(this.target),this.spherical.setFromVector3(this.offset),this.object.isUpVectorFlipped&&(this.spherical.phi*=-1,this.spherical.theta-=Math.PI),this.addEventListenersToCamera()}dispatchEvent(e){e.type==="start"?this.hasChange=!1:this.hasChange=!0,super.dispatchEvent(e)}addEventListenersToCamera(){this.object.addEventListener("beginState",this.onBeginState),this.object.addEventListener("completeState",this.onCompleteState),this.object.addEventListener("cameraChange",this.onCameraChange)}removeEventListenersFromCamera(){this.object.removeEventListener("beginState",this.onBeginState),this.object.removeEventListener("completeState",this.onCompleteState),this.object.removeEventListener("cameraChange",this.onCameraChange)}updateUseWindowEvents(e){if(window.removeEventListener("pointermove",this.onPointerHover),this.domElement.removeEventListener("pointermove",this.onPointerHover),this.useWindowEvents=e,this.hoverRotatePanMode!==0&&(this.useWindowEvents?window.addEventListener("pointermove",this.onPointerHover):this.domElement.addEventListener("pointermove",this.onPointerHover)),this.domElement.removeEventListener("pointerleave",this.onPointerLeave),this.domElement.removeEventListener("pointerenter",this.onPointerEnter),window.removeEventListener("pointerleave",this.onPointerLeave),window.removeEventListener("pointerenter",this.onPointerEnter),this.hoverRotatePanMode!==0&&!this.useWindowEvents){let t=this.useWindowEvents?window:this.domElement;t.addEventListener("pointerleave",this.onPointerLeave),t.addEventListener("pointerenter",this.onPointerEnter)}}fromJSON(e,t){this.setEnableDampingSpeed(e.enableDamping),this.enablePan=e.enablePan,this.enableZoom=e.enableZoom,this.enableRotate=e.enableRotate,this.rotationLimitsMode=e.rotationLimitsMode,this.thetaIsFree=e.rotationHorizontalOffset.min===e.rotationHorizontalOffset.max&&e.rotationHorizontalOffset.min===Math.PI,this.phiIsFree=e.rotationVerticalOffset.min===e.rotationVerticalOffset.max&&e.rotationVerticalOffset.min===Math.PI,this.panLimitsMode=e.panLimitsMode,this.panSoftLimit=e.panSoftLimit,this.rotationSoftLimit=e.rotationSoftLimit,this.hoverRotatePanMode=e.hoverRotatePanMode,this.useWindowEvents=t==="window",this.hoverRotatePanMode!==0&&(this.useWindowEvents?window.addEventListener("pointermove",this.onPointerHover):this.domElement.addEventListener("pointermove",this.onPointerHover));let r=e.hoverRotatePanStrength/100;this.hoverRotatePanStrength=r**2,this.zoomLimitsEnabled=e.zoomLimitsEnabled,this.minZoom=e.zoomLimits.min,this.maxZoom=Math.max(e.zoomLimits.min,e.zoomLimits.max),this.minDistance=1e3/e.zoomLimits.max,this.maxDistance=Math.max(this.minDistance,1e3/e.zoomLimits.min),this.autoRotate=e.autoRotate,this.autoRotateSpeed=e.autoRotateSpeed,this.autoRotateClockwise=e.autoRotateClockwise;let i=this.object.getTarget().applyQuaternion(hT.copy(this.object.quaternion).invert());this.minV=-e.panVerticalOffset.min+i.y,this.maxV=e.panVerticalOffset.max+i.y,this.minH=-e.panHorizontalOffset.min+i.x,this.maxH=e.panHorizontalOffset.max+i.x,this.panRangeFactor.set(this.maxH-this.minH,this.maxV-this.minV).divideScalar(2),this.rotationRangeFactor.setScalar(Math.PI).divideScalar(4),this.minPhi=Vl(this.spherical.phi-e.rotationVerticalOffset.min),this.maxPhi=Vl(this.spherical.phi+e.rotationVerticalOffset.max),this.minTheta=Vl(Vl(this.spherical.theta)-e.rotationHorizontalOffset.min),this.maxTheta=Vl(Vl(this.spherical.theta)+e.rotationHorizontalOffset.max),this.isThetaFlipped=this.minTheta>this.maxTheta,e.orbitTouches===1&&(this.touches[0]=oo.ROTATE),e.panTouches===1&&(this.touches[0]=oo.PAN),e.orbitTouches===2&&(this.touches[1]=oo.DOLLY_ROTATE),e.panTouches===2&&(this.touches[1]=oo.DOLLY_PAN),e.orbitTouches===3&&(this.touches[2]=oo.ROTATE),e.panTouches===3&&(this.touches[2]=oo.PAN),this.isTouchZoom=e.isTouchZoom,this.resetHoverEffectOnPointerLeave=e.resetHoverEffectOnPointerLeave??!1}connect(){if(this.domElement.addEventListener("contextmenu",this.onContextMenu),this.domElement.addEventListener("pointerdown",this.onPointerDown),this.domElement.addEventListener("wheel",this.onMouseWheel),window.addEventListener("keydown",this.onKeyDown,!1),window.addEventListener("keyup",this.onKeyUp,!1),this.domElement.addEventListener("gesturestart",this.onGesture),this.domElement.addEventListener("gesturechange",this.onGesture),this.domElement.addEventListener("gestureend",this.onGesture),this.domElement.addEventListener("touchend",this.onTouchEnd),this.hoverRotatePanMode!==0&&!this.useWindowEvents){let e=this.useWindowEvents?window:this.domElement;e.addEventListener("pointerleave",this.onPointerLeave),e.addEventListener("pointerenter",this.onPointerEnter)}this.pointerLeaveEvent=void 0}dispose(){this.removeEventListenersFromCamera(),this.domElement.removeEventListener("contextmenu",this.onContextMenu),this.domElement.removeEventListener("pointerdown",this.onPointerDown),this.domElement.removeEventListener("wheel",this.onMouseWheel),window.removeEventListener("keydown",this.onKeyDown,!1),window.removeEventListener("keyup",this.onKeyUp,!1),this.domElement.removeEventListener("pointermove",this.onPointerHover),window.removeEventListener("pointermove",this.onPointerHover),this.domElement.removeEventListener("gesturestart",this.onGesture),this.domElement.removeEventListener("gesturechange",this.onGesture),this.domElement.removeEventListener("gestureend",this.onGesture),this.domElement.removeEventListener("touchend",this.onTouchEnd),this.domElement.removeEventListener("pointerleave",this.onPointerLeave),this.domElement.removeEventListener("pointerenter",this.onPointerEnter),window.removeEventListener("pointerleave",this.onPointerLeave),window.removeEventListener("pointerenter",this.onPointerEnter),this.domElement.removeEventListener("pointermove",this.onPointerMove),this.domElement.removeEventListener("pointerup",this.onPointerUp)}applyLimits(e,t,r,i,n,a,s,o){this.overShoot.set(0,0);let l,u,h;e instanceof T?(l=e.x,u=e.y,this.current.set(this.target.x,this.target.y),h=!0):(l=e.theta,u=e.phi,this.current.set(Vl(this.spherical.theta),Vl(this.spherical.phi)),h=!1),r===0&&(this.current.x+=l,this.current.y+=u),(t===3||t===2)&&(!h&&this.isThetaFlipped?this.current.x>i&&this.current.x<0?this.overShoot.x=i-this.current.x:this.current.x<n&&this.current.x>0&&(this.overShoot.x=n-this.current.x):this.current.x>i?this.overShoot.x=i-this.current.x:this.current.x<n&&(this.overShoot.x=n-this.current.x)),(t===3||t===1)&&(this.current.y>a?this.overShoot.y=a-this.current.y:this.current.y<s&&(this.overShoot.y=s-this.current.y)),h||(this.overShoot.x=Vl(this.overShoot.x),this.overShoot.y=Vl(this.overShoot.y)),r!==0?(this.overRatio.copy(this.overShoot).divide(o),this.overRatio.x=Math.min(Math.abs(this.overRatio.x),1),this.overRatio.y=Math.min(Math.abs(this.overRatio.y),1),r===1&&(this.overRatio.x=bj(Math.abs(this.overRatio.x)),this.overRatio.y=bj(Math.abs(this.overRatio.y))),this.isPointerDown||r===1?r===2&&(this.overRatio.x>.9&&!this.thetaIsFree||this.overRatio.y>.9&&!this.phiIsFree)?this.isPointerDown=!1:(l*this.overShoot.x<0&&!this.thetaIsFree&&(l*=1-this.overRatio.x),u*this.overShoot.y<0&&!this.phiIsFree&&(u*=1-this.overRatio.y)):r===2&&(!h&&(this.overRatio.x>.002&&!this.thetaIsFree||this.overRatio.y>.002&&!this.phiIsFree)||h&&(Math.abs(this.overShoot.x)>2||Math.abs(this.overShoot.y)>2)?(this.thetaIsFree||(l=this.overShoot.x*.05),this.phiIsFree||(u=this.overShoot.y*.05),h?this.isPanOverShoot=!0:this.isRotateOverShoot=!0):h?this.isPanOverShoot=!1:this.isRotateOverShoot=!1)):(l+=this.overShoot.x,u+=this.overShoot.y),e instanceof T?(e.x=l,e.y=u):(this.thetaIsFree||(e.theta=l),this.phiIsFree||(e.phi=u))}setEnableDampingSpeed(e){this.enableDamping=e,this.rotateSpeed=e===!0?.2:1}stopDamping(){this.sphericalDelta.theta=0,this.sphericalDelta.phi=0}getAutoRotationAngle(){return 2*Math.PI/60/60*this.autoRotateSpeed}getZoomScale(){return Math.pow(.95,this.zoomSpeed)}rotateLeft(e){this.sphericalDelta.theta-=e}rotateUp(e){this.sphericalDelta.phi-=e}panLeft(e,t){this.panLeftV.setFromMatrixColumn(t,0),this.panLeftV.multiplyScalar(-e),this.panOffset.add(this.panLeftV)}panUp(e,t){this.panUpV.setFromMatrixColumn(t,1),this.panUpV.multiplyScalar(e),this.panOffset.add(this.panUpV)}pan(e,t){let r=this.domElement;if(r&&this.object.isPerspectiveCamera){let i=this.object.position;this.panV.copy(i).sub(this.target);let n=this.panV.length();n*=Math.tan(this.object.fov/2*Math.PI/180),this.panLeft(2*e*n/r.clientHeight,this.object.matrixWorld),this.panUp(2*t*n/r.clientHeight,this.object.matrixWorld)}else r&&this.object.isOrthographicCamera&&(this.panLeft(e*(this.object.right-this.object.left)/this.object.zoom/r.clientWidth,this.object.matrixWorld),this.panUp(t*(this.object.top-this.object.bottom)/this.object.zoom/r.clientHeight,this.object.matrixWorld));this.dispatchEvent(Lze)}dollyOut(e){this.object.isPerspectiveCamera?this.scale/=e:this.object.isOrthographicCamera&&(this.object.zoom*=e,this.zoomLimitsEnabled&&(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom))),this.object.updateProjectionMatrix(),this.zoomChanged=!0),this.dispatchEvent(vj)}dollyIn(e){this.object.isPerspectiveCamera?this.scale*=e:this.object.isOrthographicCamera&&(this.object.zoom/=e,this.zoomLimitsEnabled&&(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom))),this.object.updateProjectionMatrix(),this.zoomChanged=!0),this.dispatchEvent(vj)}zoomOut(e=this.getZoomScale()){this.dispatchEvent(Zp),this.dollyOut(e),this.dispatchEvent(Jp)}zoomIn(e=this.getZoomScale()){this.dispatchEvent(Zp),this.dollyIn(e),this.dispatchEvent(Jp)}handleMouseDownRotate(e){this.rotateStart.set(e.clientX,e.clientY)}handleMouseDownDolly(e){this.dollyStart.set(e.clientX,e.clientY)}handleMouseDownPan(e){this.panStart.set(e.clientX,e.clientY)}handleMouseMoveRotate(e,t=1){e.movementX!==void 0?this.rotateDelta.set(e.movementX,e.movementY):(this.rotateEnd.set(e.clientX,e.clientY),this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart),this.rotateStart.copy(this.rotateEnd)),this.rotateDelta.multiplyScalar(this.rotateSpeed*t).rotateAround(yj,-this.object.angleOffsetFromUp);let r=this.domElement,i=this.useWindowEvents?window.innerHeight:r.clientHeight,n=2*Math.PI*this.rotateDelta.x/i,a=2*Math.PI*this.rotateDelta.y/i;this.rotateLeft(n),this.rotateUp(a),this.update()}handleMouseMoveDolly(e){this.dollyEnd.set(e.clientX,e.clientY),this.dollyDelta.subVectors(this.dollyEnd,this.dollyStart),this.dollyDelta.y>0?this.dollyOut(this.getZoomScale()):this.dollyDelta.y<0&&this.dollyIn(this.getZoomScale()),this.dollyStart.copy(this.dollyEnd),this.update()}handleMouseMovePan(e,t=1){e.movementX!==void 0?this.panDelta.set(e.movementX,e.movementY):(this.panEnd.set(e.clientX,e.clientY),this.panDelta.subVectors(this.panEnd,this.panStart),this.panStart.copy(this.panEnd)),this.panDelta.multiplyScalar(this.panSpeed*t),this.pan(this.panDelta.x,this.panDelta.y),this.update()}handleMouseWheel(e){if(NPe===!1&&Ab(e)===!1&&jze(e)===!0){if(this.enablePan===!1)return;this.gesture?(this.panDelta.set(-e.deltaX,-e.deltaY).multiplyScalar(this.panSpeed),this.panDelta.x=Math.min(Math.abs(this.panDelta.x),100)*(this.panDelta.x<0?-1:1),this.panDelta.y=Math.min(Math.abs(this.panDelta.y),100)*(this.panDelta.y<0?-1:1),e.altKey?this.pan(0,this.panDelta.y):e.shiftKey?this.pan(this.panDelta.x,0):this.pan(this.panDelta.x,this.panDelta.y),this.update()):(this.gesture=!0,this.isPointerDown=!0),window.clearTimeout(this.timer),this.timer=window.setTimeout(()=>{this.gesture=!1,this.isPointerDown=!1},30)}else{if(this.enableZoom===!1)return;e.deltaY===0?e.deltaX<0?this.dollyIn(this.getZoomScale()):e.deltaX>0&&this.dollyOut(this.getZoomScale()):e.deltaY<0?this.dollyIn(this.getZoomScale()):e.deltaY>0&&this.dollyOut(this.getZoomScale()),this.update(),this.gesture=!1,this.isPointerDown=!1}}handleTouchStartRotate(){if(It.length===2){let e=.5*(It[0].pageX+It[1].pageX),t=.5*(It[0].pageY+It[1].pageY);this.rotateStart.set(e,t)}else this.rotateStart.set(It[0].pageX,It[0].pageY)}handleTouchStartPan(){if(It.length===2){let e=.5*(It[0].pageX+It[1].pageX),t=.5*(It[0].pageY+It[1].pageY);this.panStart.set(e,t)}else this.panStart.set(It[0].pageX,It[0].pageY)}handleTouchStartDolly(){let e=It[0].pageX-It[1].pageX,t=It[0].pageY-It[1].pageY,r=Math.sqrt(e*e+t*t);this.dollyStart.set(0,r)}handleTouchStartDollyPan(){this.enableZoom&&this.isTouchZoom===!0&&this.handleTouchStartDolly(),this.enablePan&&this.handleTouchStartPan()}handleTouchStartDollyRotate(){this.enableZoom&&this.isTouchZoom===!0&&this.handleTouchStartDolly(),this.enableRotate&&this.handleTouchStartRotate()}handleTouchMoveRotate(e){if(It.length===2){let r=cA(e),i=.5*(e.pageX+r.x),n=.5*(e.pageY+r.y);this.rotateEnd.set(i,n)}else{if(e.pointerId!==It[0].pointerId)return;this.rotateEnd.set(e.pageX,e.pageY)}this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart).multiplyScalar(this.rotateSpeed);let t=this.domElement;t&&(this.rotateLeft(2*Math.PI*this.rotateDelta.x/t.clientHeight),this.rotateUp(2*Math.PI*this.rotateDelta.y/t.clientHeight)),this.rotateStart.copy(this.rotateEnd)}handleTouchMovePan(e){if(It.length===2){let t=cA(e),r=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);this.panEnd.set(r,i)}else{if(e.pointerId!==It[0].pointerId)return;this.panEnd.set(e.pageX,e.pageY)}this.panDelta.subVectors(this.panEnd,this.panStart).multiplyScalar(this.panSpeed),this.pan(this.panDelta.x,this.panDelta.y),this.panStart.copy(this.panEnd)}handleTouchMoveDolly(e){let t=cA(e),r=e.pageX-t.x,i=e.pageY-t.y,n=Math.sqrt(r*r+i*i);this.dollyEnd.set(0,n),this.dollyDelta.set(0,Math.pow(this.dollyEnd.y/this.dollyStart.y,this.zoomSpeed)),this.dollyOut(this.dollyDelta.y),this.dollyStart.copy(this.dollyEnd)}handleTouchMoveDollyPan(e){this.enableZoom&&this.isTouchZoom===!0&&this.handleTouchMoveDolly(e),this.enablePan&&this.handleTouchMovePan(e)}handleTouchMoveDollyRotate(e){this.enableZoom&&this.isTouchZoom===!0&&this.handleTouchMoveDolly(e),this.enableRotate&&this.handleTouchMoveRotate(e)}checkRaycastLock(){var e;if(this.object.data.raycastLock){if(this.options.isPlayMode)return!1;{let t=(e=this.options)==null?void 0:e.showCameraLock;return t&&t(),!0}}else return!1}};function Vl(e){let t=Math.PI*2;for(;e<=-Math.PI;)e+=t;for(;e>Math.PI;)e-=t;return e}function bj(e){return 1-Math.pow(1-e,4)}function jze(e){return e.wheelDeltaY===0||e.deltaY===0?BE&&e.shiftKey&&Math.abs(e.wheelDeltaX)>=120?!1:e.wheelDeltaX?e.wheelDeltaX===-3*e.deltaX:e.deltaMode===0:e.wheelDeltaY?e.wheelDeltaY===-3*e.deltaY:e.deltaMode===0}var wj=class{constructor(e,t,r,i,n,a){this.id=e,this.data=t,this.object=r,this.page=i,this.currentIntersectedObjects=[],this.disabled=!1,this.alreadyPlayedNonTogglingActions=new Set,this.actions=rs(t,t.actions,i,n,a,r),this.target=t.target,this.useToggle=t.runMode==="Toggle",this.triggeringObjects=t.triggeringObjects.map(s=>i.scene.find(s))}isValidTriggeringObject(e){return this.target==="all"?!0:this.triggeringObjects.some(t=>t===e||t.isAncestorOf(e.uuid)||e.isAncestorOf(t.uuid))}disconnect(){Gn(this.actions)}dispatch(){this.disabled||this.object.destroyedInAction||(this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this?(e.object.currentTransitionEvent=this,e.init()):this.data.runMode==="Once"&&this.alreadyPlayedNonTogglingActions.add(e)}),this.object.dispatchEvent({type:"beginEvent",eventName:"Trigger"}),this.useToggle?(this.actions.Transition.forEach(e=>{e.toggle()}),this.actions.SwitchCamera.forEach(e=>{e.toggle()})):(this.actions.Transition.forEach(e=>{this.alreadyPlayedNonTogglingActions.has(e)===!1&&e.play()}),this.actions.SwitchCamera.forEach(e=>{e.play()})),this.actions.Link.forEach(e=>{e.dispatch()}),this.actions.Reset.forEach(e=>{e.dispatch()}),this.actions.Create.forEach(e=>{e.dispatch()}),this.actions.Destroy.forEach(e=>{e.dispatch(!1)}),this.actions.Audio.forEach(e=>{e.dispatchBasic()}),this.actions.Video.forEach(e=>{e.dispatchBasic()}),this.actions.SceneTransition.forEach(e=>{e.dispatch()}),this.actions.SetVariable.forEach(e=>e.checkConditions()),this.actions.SetVariable.forEach(e=>e.dispatch()))}},br;GPe.then(e=>br=e);var nn=new T,il=new Gt,th=new T,pT=new Un(0,0,0,"YXZ"),_j=new Un(0,0,0,"XYZ"),nl=new T,mT=new T,gT=new T(1,1,1),em=new Gt,cw=new ze,Sj=new ze,Vze={type:"updateMatrix"},Ej=new Gt,vT=new Ds,H3={type:"beginEvent",eventName:"Collision"},Hze={type:"beginEvent",eventName:"Trigger"};function Gze(e){if(y1.physicsEnabled(e.scene.objects))return!0;let t=!1;return e.scene.objects.traverse((r,i)=>{if(i.events){if(Array.isArray(i.events)){for(let n of i.events)if(n.data.disabled!==!0&&n.data.type==="GameControl"&&n.data.collisionEnabled){t=!0;break}}else for(let n of Object.values(i.events))if(n.disabled!==!0&&n.type==="GameControl"&&n.collisionEnabled){t=!0;break}}}),t}var t2=e=>e.states.some(t=>t.data.position!==void 0||t.data.rotation!==void 0||t.data.hiddenMatrix!==void 0||t.data.cloner!==void 0||t.data.pathSnapping!==void 0),Wze=class{constructor(e){this.eventContext=e,this.isEnabled=!1,this.gameControl=null,this.joysticks=[],this.joystickToGameControls=[],this.sharedGameControlGlobals={entitiesWithTransformAnim:[],entityToCollisionEvents:{},colliderToEntity:new Map,triggers:[],gamePads:[],createdObjects:[],nCreatedPerAction:{}},this.sensorToTriggerEvent={},this.eventManager=void 0,this.needsCollisionDetection=!1,this.initializationCounter=-1,this.rigidBodyToMesh=new Map,this.nActiveRigidBodies=0,this.collisionEvents=[],this.isExport=!1,this.processRigidBody=t=>{if(t.bodyType()!==br.RigidBodyType.Dynamic)return;t.isSleeping()||this.nActiveRigidBodies++;let[r,i,n]=this.rigidBodyToMesh.get(t.handle);if(nn.copy(t.translation()).multiplyScalar(this.pixelsPerMeter),il.copy(t.rotation()),r.matrixWorld.compose(nn,il,i),r.hasNonUniformScale&&r.matrixWorld.multiply(r.shearScale),r.dispatchEvent(Vze),n){let a=r.cloner;if(a&&a.objectForSample===void 0){a.matrixWorld.copy(r.matrixWorld);for(let s of a.children)s.updateMatrixWorld(!0)}for(let s of r.children)s.updateMatrixWorld(!0)}},this.accumulator=0,this.handleCollisionEvents=(t,r,i)=>{var s,o,l,u;if(i===!1)return;let n,a;if(this.sensorToTriggerEvent[t]?(n=this.sensorToTriggerEvent[t],a=this.sharedGameControlGlobals.colliderToEntity.get(r)):this.sensorToTriggerEvent[r]&&(n=this.sensorToTriggerEvent[r],a=this.sharedGameControlGlobals.colliderToEntity.get(t)),n&&a&&n.isValidTriggeringObject(a)){n.dispatch();return}for(let h=this.sharedGameControlGlobals.createdObjects.length-1;h>=0;h--){let c=this.sharedGameControlGlobals.createdObjects[h];if(c.userData.hasCollisionDestroy&&(((s=c.rigidBody)==null?void 0:s.collider(0).handle)===t||((o=c.rigidBody)==null?void 0:o.collider(0).handle)===r)){this.sharedGameControlGlobals.createdObjects.splice(h,1),c.removeFromParent(),requestAnimationFrame(()=>{var d;return(d=this.sharedGameControlGlobals.rapierWorld)==null?void 0:d.removeRigidBody(c.rigidBody)});break}}if(((l=this.gameControl)==null?void 0:l.object)===this.sharedGameControlGlobals.colliderToEntity.get(t)){let h=this.sharedGameControlGlobals.colliderToEntity.get(r),c=this.sharedGameControlGlobals.entityToCollisionEvents[h.uuid];if(c===void 0)return;for(let d of c)d.data.target==="character"&&this.dispatchCollisionEvent(d,h,r)}else if(((u=this.gameControl)==null?void 0:u.object)===this.sharedGameControlGlobals.colliderToEntity.get(r)){let h=this.sharedGameControlGlobals.colliderToEntity.get(t),c=this.sharedGameControlGlobals.entityToCollisionEvents[h.uuid];if(c===void 0)return;for(let d of c)d.data.target==="character"&&this.dispatchCollisionEvent(d,h,t)}else{let h=this.sharedGameControlGlobals.colliderToEntity.get(t),c=this.sharedGameControlGlobals.entityToCollisionEvents[h.uuid];if(c!==void 0)for(let m of c)m.data.target==="scene"&&this.dispatchCollisionEvent(m,h,t);let d=this.sharedGameControlGlobals.colliderToEntity.get(r),f=this.sharedGameControlGlobals.entityToCollisionEvents[d==null?void 0:d.uuid];if(f!==void 0)for(let m of f)m.data.target==="scene"&&this.dispatchCollisionEvent(m,d,r)}},this.isExport=e.isExport,this.sharedAssets=e.sharedAssets,this.renderer=e.renderer,this.requestRender=e.requestRender,this.domElement=this.renderer.domElement,this.pixelsPerMeter=MX,this.gravity=this.page.data.globalPhysics.gravity}get page(){return this.eventContext.page}attachVRControllers(e){e.forEach(t=>{t.addEventListener("connected",r=>{"gamepad"in r.data&&"axes"in r.data.gamepad&&this.sharedGameControlGlobals.gamePads.push(r.data.gamepad)})})}markIsDestroyTarget(){this.page.traverseVisibleEntity(e=>{var r,i;let t=e.dataPatched;for(let n of t.events){if(n.data.disabled===!0)continue;let a=(i=(r=n.data.actions)==null?void 0:r.find(s=>s.data.type==="Destroy"))==null?void 0:i.data;if(a)for(let s of a.objects){let o=this.page.scene.find(s);o&&(o.userData.hasDestroy=!0)}}})}markIsDragObject(){this.page.traverseVisibleEntity(e=>{let t=e.dataPatched;for(let r of t.events)if(!(r.data.disabled===!0||r.data.type!=="DragDrop"))for(let i of r.data.objects){let n=this.page.scene.find(i);n&&(n.userData.hasDrag=!0)}})}initBVH(){let e=[];if(this.page.traverseChildren(t=>{var o,l;let r;if(t instanceof ml)return;t instanceof ya?r=t.object:r=t;let i=r.dataPatched;if(((o=i.physics)==null?void 0:o.enabled)==="visibility"?!i.visible:!((l=i.physics)!=null&&l.enabled))return!0;let n=t.geometry,a=r.userData.hasDestroy===!0,s=r.userData.hasDrag===!0;if(t2(i)||a||s||r.dataPatched.events.some(u=>u.data.disabled!==!0&&u.data.type==="GameControl"))return t.updateMatrixWorldSVD(),this.addBoundsTree(t),!0;n&&e.push(nc(n,t.matrixWorld))}),e.length>0){let t=af(e,!1);this.sharedGameControlGlobals.staticMeshBVH=new Sy(t)}}addRigidBody(e,t,r){let i=[],n="geometry"in e?e.geometry:void 0,a=t.dataPatched;if((n==null?void 0:n.getAttribute("position"))!==void 0&&i.push(nc(n,e.shearScale)),a.physics.fusedBody){let s=this.gatherChildrenGeom(e,i);e.traverseObject(s),e.children.forEach(l=>l.updateMatrixWorld(!0));let o=e.cloner;o&&o.objectForSample===void 0&&a.physics.rigidBody==="dynamic"&&(o.traverseObject(s),o.children.forEach(l=>l.updateMatrixWorld(!0)))}if(i.length>0){let s,o=!r.fromCreate&&a.physics.rigidBody==="dynamic"||r.fromCreate&&r.dynamic;o?(s=br.RigidBodyDesc.dynamic(),s.setLinearDamping(a.physics.damping).setAngularDamping(a.physics.damping).setAdditionalMass(1e-9).setGravityScale(a.physics.gravityScale).enabledRotations(...a.physics.enabledRotation).enabledTranslations(...a.physics.enabledTranslation)):(r.hasTransformAnim||r.hasFollow||r.hasDrag)&&!r.fromCreate?(s=br.RigidBodyDesc.kinematicPositionBased(),this.sharedGameControlGlobals.entitiesWithTransformAnim.push(e)):s=br.RigidBodyDesc.fixed();let l=af(i);(e.hasNonUniformScale?e.matrixWorldRigid:e.matrixWorld).decompose(nn,il,th),e.position0=nn.clone().divideScalar(this.pixelsPerMeter),e.rotation0=il.clone(),nn.divideScalar(this.pixelsPerMeter),s.setTranslation(nn.x,nn.y,nn.z).setRotation(il),n?l==null||l.scale(1/this.pixelsPerMeter,1/this.pixelsPerMeter,1/this.pixelsPerMeter):l==null||l.scale(th.x/this.pixelsPerMeter,th.y/this.pixelsPerMeter,th.z/this.pixelsPerMeter);let u=this.sharedGameControlGlobals.rapierWorld.createRigidBody(s);o&&this.rigidBodyToMesh.set(u.handle,[e,th.clone(),a.physics.fusedBody]);let h=!(a.geometry===void 0||a.geometry.type==="SubdivGeometry"||a.geometry.type==="NonParametricGeometry"||a.geometry.type==="BooleanGeometry"||a.geometry.type==="VectorGeometry"||a.geometry.type==="StarGeometry"||a.geometry.type==="RectangleGeometry"||a.geometry.type==="EllipseGeometry"||a.geometry.type==="TriangleGeometry"||a.geometry.type==="TorusGeometry"||a.geometry.type==="HelixGeometry");try{this.addCollider(u,a.physics,l,t,h)}catch{try{this.addCollider(u,a.physics,l,t,!1)}catch(c){console.error(c)}}e.rigidBody=u}}addBoundsTree(e){var r;let t=[];if(((r=e.geometry)==null?void 0:r.getAttribute("position"))!==void 0&&t.push(nc(e.geometry,e.shearScale)),e.traverseObject(this.gatherChildrenGeom(e,t)),e.children.forEach(i=>i.updateMatrixWorld(!0)),t.length>0){let i=af(t,!1);e.bvhGeometry=i,e.bvhGeometry.boundsTree=new Sy(i),this.sharedGameControlGlobals.entitiesWithTransformAnim.push(e)}}addCollider(e,t,r,i,n=!0){var o,l;if((r==null?void 0:r.getAttribute("position").count)===0||((o=r==null?void 0:r.getIndex())==null?void 0:o.count)===0)return;let a;r&&(t.colliderType==="trimesh"?a=br.ColliderDesc.trimesh(r.getAttribute("position").array,r.getIndex().array):a=br.ColliderDesc.convexMesh(r.getAttribute("position").array,n?r.getIndex().array:void 0)),a.setFrictionCombineRule(br.CoefficientCombineRule.Average).setRestitutionCombineRule(br.CoefficientCombineRule.Average).setDensity(t.density).setFriction(t.friction).setRestitution(t.restitution);let s=this.sharedGameControlGlobals.rapierWorld.createCollider(a,e);this.sharedGameControlGlobals.colliderToEntity.set(s.handle,i),(l=this.sharedGameControlGlobals.entityToCollisionEvents[i.uuid])!=null&&l.some(u=>u.target==="scene")&&s.setActiveEvents(br.ActiveEvents.COLLISION_EVENTS)}gatherChildrenGeom(e,t){return(r,i)=>{var o;if(i===0)return;let n;if(r instanceof ml)if(r.objectForSample){if(r.objectForSample.dataPatched.physics.fusedBody)return;n=r.object}else return r.object.dataPatched.physics.fusedBody===!0&&r.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(r instanceof ya)n=r.object;else if(n=r,(o=n.dataPatched.cloner)==null?void 0:o.hideBase)return!0;let a=n.dataPatched;if(a.physics.enabled==="visibility"?!a.visible:!a.physics.enabled)return!0;i===1?e.hasNonUniformScale?r.matrixWorld.multiplyMatrices(e.shearScale,r.hiddenMatrix):r.matrixWorld.copy(r.hiddenMatrix):r.matrixWorld.multiplyMatrices(r.parent.matrixWorld,r.hiddenMatrix),r.matrixWorld.multiply(r.matrix);let s=r.geometry;(s==null?void 0:s.getAttribute("position"))!==void 0&&t.push(nc(s,r.matrixWorld))}}activate(e){var d,f;if(this.isEnabled)return;this.isEnabled=!0,this.eventManager=e,this.usePhysics=this.page.data.globalPhysics.usePhysics;let t=this.page.playCamera,r=!1,i=5,n=8,a=9,s="drag",o=this.page.data.publish.gameControlObject,l=o!==null?this.page.find(o):null,u=null;if(l)for(let m of l.data.events){if(m.data.disabled||m.data.type!=="GameControl")break;let p=l;for(;this.usePhysics&&((d=p=p.parent)==null?void 0:d.parent)!==null&&!((f=p.data.physics)!=null&&f.fusedBody););m.data.collisionEnabled&&(this.needsCollisionDetection=!0),u===null&&(u=m.data)}if(this.page.traverseEntity(m=>{for(let p of m.dataPatched.events)if(p.data.disabled===!1&&p.data.type==="Trigger")return this.needsCollisionDetection=!0,!0}),l&&u){r=r||u.camera===t.uuid||l.uuid===t.uuid;let m=new CX(l,this.renderer.domElement,u,this.eventContext.page.data.globalPhysics,this,l.uuid!==t.uuid&&u.camera===t.uuid,t,this.page,this.sharedAssets);this.gameControl=m,i=u.joystickPosLoc,n=u.joystickRotLoc,a=u.jumpTouchButtonLoc,s=u.rotByTouch,Xs&&u.touchControl&&(this.joystickToGameControls[i]="pos",u.moveMode==="walk"&&(this.joystickToGameControls[a]="jmp"),s==="joystick"&&(this.joystickToGameControls[n]="rot"))}if(this.gameControl&&this.gameControl.data.navmesh.enabled){let m=this.gameControl.data;if(!this.navigationMeshWrapper){this.navigationMeshWrapper=new Oze(this.usePhysics,this.isExport);let p;m.collider.type==="sphere"?p=m.collider.radius*2:p=m.collider.height,p=Math.floor(p/m.navmesh.ch-1),this.navigationMeshWrapper.init({...m.navmesh,walkableHeight:p},this.gameControl,this.eventContext)}}if(r===!1){let{enableRotate:m,enablePan:p,enableZoom:g,autoRotate:v,hoverRotatePanMode:y}=this.eventManager.publish.orbitControls;(m||p||g||v||y!==0)&&(this.orbitControls=new LX(t,this.renderer.domElement,{isExport:this.isExport,isPlayMode:!0}),this.orbitControls.addEventListener("change",this.requestRender),this.orbitControls.addEventListener("end",this.requestRender),this.orbitControls.addEventListener("start",this.requestRender),this.orbitControls.fromJSON(this.eventManager.publish.orbitControls,this.eventManager.publish.mouseEventTarget),this.orbitControls.useKeyEvents=!1,this.orbitControls.addEventListenersToCamera(),this.orbitControls.connect(),this.orbitControls.update())}let h=this.renderer.domElement.width/this.renderer.getPixelRatio(),c=this.renderer.domElement.height/this.renderer.getPixelRatio();this.joystickToGameControls.forEach((m,p)=>{let g=document.body.appendChild(document.createElement("div")),[v,y,x]=this.eventManager.eventContext.publish.joystickSizeAndXYOffset[p],b=(h-5*v)/4+v,_={},w=m==="jmp",E=w?0:v;p<10?(p<5?_.top=E/2:_.bottom=E/2,_.left=E/2+p%5*b):p===10?(_.left=E/2,_.top=c/2):(_.right=E/2,_.top=c/2),_.top?_.top-=y[1]:_.bottom+=y[1],_.left?_.left+=y[0]:_.right-=y[0];for(let M in _)_[M]+="px";if(w){let M=g.appendChild(document.createElement("div"));Object.assign(M.style,_,{position:"absolute",width:v+"px",height:v+"px",backgroundColor:`rgba(255,255,255,${x==="show"?.4:0})`,zIndex:"9999",borderRadius:v+"px",border:x==="show"?"solid 2px rgba(0, 0, 0, .1)":"none",display:"flex",alignItems:"center",justifyContent:"center",touchAction:"none"});let P=v/16*16*.4;x==="show"&&(M.innerHTML=`
						<svg width="${P}" height="${v*.4}" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
							<path d="M2 10L8 4L14 10" stroke="black" stroke-opacity="40%" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
						</svg>
					`),M.addEventListener("pointerdown",()=>{this.gameControl.movementState.jump=1,this.requestRender()}),M.addEventListener("touchend",I=>I.preventDefault()),this.joysticks[p]=[void 0,g];return}let S={zone:g,mode:"static",position:_,size:v};x==="hide"&&(S.restOpacity=0);let C=lNe.create(S);C.on("move",(M,P)=>{let I=this.gameControl;m==="pos"?P.force<.2?I.moveForce=0:(I.movementState.movePosZ=Math.sin(-P.angle.radian),I.movementState.movePosX=Math.cos(-P.angle.radian),P.force>1.2?I.movementState.run=1:I.movementState.run=0,P.force<.3?I.moveForce=(P.force-.2)/.1:I.moveForce=1):m==="rot"&&(P.force<.2?I.rotForce=0:(I.movementState.rotPosX=P.vector.y,I.movementState.rotPosY=-P.vector.x,P.force<.3?I.rotForce=(P.force-.2)/.1:I.rotForce=1)),this.requestRender()}),C.on("end",(M,P)=>{let I=this.gameControl;m==="pos"?(I.movementState.movePosZ=0,I.movementState.movePosX=0,I.moveForce=1):m==="rot"&&(I.movementState.rotPosX=0,I.movementState.rotPosY=0,I.rotForce=1)}),this.joysticks[p]=[C,g]}),this.markIsDestroyTarget(),this.markIsDragObject(),this.rebuildBVH(),this.initializationCounter++,window.setTimeout(()=>{this.collisionEvents.forEach(m=>m.disabled=!1)},80)}initPhysics(){var s;(s=this.sharedGameControlGlobals.rapierWorld)==null||s.free(),this.sharedGameControlGlobals.rapierWorld=new br.World(new br.Vector3(0,this.gravity,0)),this.events=new br.EventQueue(!0);let e=[],t=[];if(this.page.traverseChildren(o=>{var v,y,x,b;let l;if(o instanceof ml)if(o.objectForSample){if(o.objectForSample.dataPatched.physics.fusedBody)return;l=o.object}else return o.object.dataPatched.physics.fusedBody===!0&&o.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(o instanceof ya)l=o.object;else if(l=o,((v=l.dataPatched.cloner)==null?void 0:v.disabled)===!1&&((y=l.dataPatched.cloner)==null?void 0:y.hideBase)&&((x=l.dataPatched.physics)==null?void 0:x.fusedBody)!==!0)return!0;let u=l.dataPatched,h;for(let _ of u.events)_.data.disabled!==!0&&_.data.type==="GameControl"&&(h=_.data);if(!u.physics||(u.physics.enabled==="visibility"?!u.visible:!u.physics.enabled))return!0;o.updateMatrixWorldSVD();let c=t2(u),d=!1,f=l.userData.hasDestroy,m=l.userData.hasDrag,p=!1;for(let _ of u.events)if(_.data.disabled!==!0){if(_.data.type==="Collision"){d=!0;let w=new bze(_.id,_.data,l,this.page,this.sharedAssets,this.eventManager);w.disabled=!0,this.collisionEvents.push(w),this.sharedGameControlGlobals.entityToCollisionEvents[l.uuid]&&this.sharedGameControlGlobals.entityToCollisionEvents[l.uuid].every(E=>E.id!==_.id)?this.sharedGameControlGlobals.entityToCollisionEvents[l.uuid].push(w):this.sharedGameControlGlobals.entityToCollisionEvents[l.uuid]=[w]}else if(_.data.type==="Follow"){p=!0;let w=_.data.target;o.traverseVisible(E=>{E.userData.isFollowingObj=w})}}u.physics.rigidBody==="dynamic"&&u.physics.fusedBody===!1&&(o.matrixWorldFusedFalse=o.matrixWorld.clone());let g=o.geometry;if(h!==void 0){let _=br.RigidBodyDesc.kinematicPositionBased();(o.hasNonUniformScale?o.matrixWorldRigid:o.matrixWorld).decompose(nn,il,th),o.position0=nn.clone().divideScalar(this.pixelsPerMeter),o.rotation0=il.clone(),nn.divideScalar(this.pixelsPerMeter),_.setTranslation(nn.x,nn.y,nn.z).setRotation(il);let w=this.sharedGameControlGlobals.rapierWorld.createRigidBody(_);o.rigidBody=w;let E;h.collider.type==="sphere"?E=br.ColliderDesc.ball(h.collider.radius/this.pixelsPerMeter):h.collider.type==="capsule"?E=br.ColliderDesc.capsule((h.collider.height/2-h.collider.radius)/this.pixelsPerMeter,h.collider.radius/this.pixelsPerMeter):E=br.ColliderDesc.cuboid(h.collider.width/this.pixelsPerMeter/2,h.collider.height/this.pixelsPerMeter/2,h.collider.depth/this.pixelsPerMeter/2),E.setFrictionCombineRule(br.CoefficientCombineRule.Average).setRestitutionCombineRule(br.CoefficientCombineRule.Average).setDensity(u.physics.density).setFriction(u.physics.friction).setRestitution(u.physics.restitution);let S=this.sharedGameControlGlobals.rapierWorld.createCollider(E,w);this.sharedGameControlGlobals.colliderToEntity.set(S.handle,l),nn.fromArray(h.collider.position).multiply(th.setFromMatrixScale(l.matrixWorld)).divideScalar(this.pixelsPerMeter),S.setTranslationWrtParent(nn);let C=new Gt().setFromEuler(new Un().setFromVector3(new T().fromArray(h.collider.rotation)));S.setRotationWrtParent(C),S.setActiveEvents(br.ActiveEvents.COLLISION_EVENTS),this.generateSensorColliderDescs(l,!0)}else u.physics.rigidBody==="dynamic"||c||p||f||m||d?(this.addRigidBody(o,l,{hasFollow:p,hasTransformAnim:c,hasDrag:m}),this.generateSensorColliderDescs(l,u.physics.fusedBody)):(g&&e.push(nc(g,o.matrixWorld)),u.physics.fusedBody&&o.traverseObject((_,w)=>{var M;if(w===0)return;let E;if(_ instanceof ml)if(_.objectForSample){if(_.objectForSample.dataPatched.physics.fusedBody)return;E=_.object}else return _.object.dataPatched.physics.fusedBody===!0&&_.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(_ instanceof ya)E=_.object;else if(E=_,(M=E.dataPatched.cloner)==null?void 0:M.hideBase)return!0;let S=E.dataPatched;if(S.physics.enabled==="visibility"?!S.visible:!S.physics.enabled)return!0;let C=_.geometry;(C==null?void 0:C.getAttribute("position"))!==void 0&&e.push(nc(C,_.matrixWorld))}),this.generateSensorColliderDescs(l,u.physics.fusedBody,t));if(((b=u.physics)==null?void 0:b.fusedBody)===!0||h)return!0}),e.length===0)return;let r=af(e);r.scale(1/this.pixelsPerMeter,1/this.pixelsPerMeter,1/this.pixelsPerMeter);let i=br.RigidBodyDesc.fixed(),n=this.sharedGameControlGlobals.rapierWorld.createRigidBody(i),a=br.ColliderDesc.trimesh(r.getAttribute("position").array,r.getIndex().array).setFrictionCombineRule(br.CoefficientCombineRule.Multiply).setRestitutionCombineRule(br.CoefficientCombineRule.Multiply).setFriction(1).setRestitution(1);this.sharedGameControlGlobals.rapierWorld.createCollider(a,n);for(let[o,l]of t){let u=this.sharedGameControlGlobals.rapierWorld.createCollider(o,n);this.sensorToTriggerEvent[u.handle]=l}}updatePositions(){return this.nActiveRigidBodies=0,this.sharedGameControlGlobals.rapierWorld.forEachRigidBody(this.processRigidBody),this.nActiveRigidBodies>0}rebuildBVH(){this.usePhysics?this.initPhysics():(this.page.traverseEntity(e=>{for(let t of e.dataPatched.events)if(t.data.type==="Trigger"&&t.data.disabled!==!0){let r=new wj(t.id,t.data,e,this.page,this.sharedAssets,this.eventManager),i=new ze().compose(nl.fromArray(t.data.position),em.setFromEuler(_j.fromArray(t.data.rotation)),gT);if(t.data.triggerZone==="box"){let n=new Qi;n.min.fromArray(t.data.size).multiplyScalar(-.5),n.max.fromArray(t.data.size).multiplyScalar(.5),this.sharedGameControlGlobals.triggers.push([n,i,e,r])}else this.sharedGameControlGlobals.triggers.push([t.data.radius,i,e,r])}}),this.needsCollisionDetection&&this.initBVH())}disconnectEvents(){this.collisionEvents.forEach(e=>e.disconnect()),this.sharedGameControlGlobals.triggers.forEach(e=>e[3].disconnect()),this.sharedGameControlGlobals.triggers.length=0}deactivate(){var e,t,r,i;if(this.isEnabled){this.isEnabled=!1,this.page.traverse(n=>{let a=n;a.matrixWorldFusedFalse&&(a.matrixWorldFusedFalse=void 0),a.rigidBody&&(a.rigidBody=void 0),a.position0&&(a.position0=void 0),a.rotation0&&(a.rotation0=void 0)}),(e=this.sharedGameControlGlobals.rapierWorld)==null||e.free(),this.sharedGameControlGlobals.rapierWorld=void 0,this.sharedGameControlGlobals.staticMeshBVH=void 0,this.accumulator=0,this.sharedGameControlGlobals.entitiesWithTransformAnim=[],this.disconnectEvents(),(t=this.gameControl)==null||t.reset(),(r=this.gameControl)==null||r.dispose(),this.gameControl=null,this.initializationCounter=-1,this.joysticks.forEach(([n,a])=>{n==null||n.destroy(),a.remove()}),this.joystickToGameControls=[],this.joysticks=[],this.orbitControls&&(this.orbitControls.dispose(),this.orbitControls=void 0),(i=this.navigationMeshWrapper)==null||i.dispose(),this.navigationMeshWrapper=void 0;for(let n of Object.values(this.sharedGameControlGlobals.entityToCollisionEvents))n.forEach(a=>a.disconnect());this.sharedGameControlGlobals.entityToCollisionEvents={},this.page.updateMatrixWorld(!0)}}update(e,t,r){if(!this.isEnabled)return!0;let i=!0;if(this.orbitControls!==void 0&&this.orbitControls.needsUpdate&&(i=!this.orbitControls.update()),this.initializationCounter>=0&&this.initializationCounter<2?(this.initializationCounter++,i=!1):this.initializationCounter===2&&this.gameControl&&(i=!this.gameControl.update(e,t,r)&&i),this.usePhysics===!1&&this.checkTrigger(),this.usePhysics){let n=.016666666666666666;if(e===0)i=this.stepPhysics()&&i;else{let a=e/1e3;a<n&&a>n*.55&&(a=n),this.accumulator+=a;let s=performance.now(),o=0,l=6;for(;this.accumulator>=n&&o<l&&(i=this.stepPhysics()&&i,this.accumulator-=n,o++,!(performance.now()-s>n*1e3)););this.accumulator=this.accumulator%n}}return i}stepPhysics(){var e;for(let t of this.sharedGameControlGlobals.entitiesWithTransformAnim){(t.hasNonUniformScale?t.matrixWorldRigid:t.matrixWorld).decompose(nn,il,th),pT.setFromQuaternion(il);let r=t;r.prevR===void 0?(r.prevR=pT.clone(),r.prevT=nn.clone()):(r.prevR.copy(pT),r.prevT.copy(nn)),t.rigidBody&&(t.rigidBody.setNextKinematicTranslation(nn.divideScalar(this.pixelsPerMeter)),t.rigidBody.setNextKinematicRotation(il))}return this.sharedGameControlGlobals.rapierWorld.step(this.events),(e=this.events)==null||e.drainCollisionEvents(this.handleCollisionEvents),!this.updatePositions()}dispatchCollisionEvent(e,t,r){var a;let i=((a=this.sharedGameControlGlobals.rapierWorld)==null?void 0:a.getCollider(r))._parent,n;if(t.cloner){for(let s of t.cloner.children)if(s.rigidBody===i){n=s;break}}e.dispatch(n),t.dispatchEvent(H3)}updateUseWindowEvents(e){var t;(t=this.orbitControls)==null||t.updateUseWindowEvents(e)}generateSensorColliderDescs(e,t,r){let i=Sj.copy(e.matrixWorld).invert();e.traverseEntity((n,a)=>{if(t===!1&&a===1)return!0;for(let s of n.dataPatched.events)if(s.data.type==="Trigger"&&s.data.disabled!==!0){let o=new wj(s.id,s.data,n,this.page,this.sharedAssets,this.eventManager),l;if(s.data.triggerZone==="box"?l=br.ColliderDesc.cuboid(...s.data.size.map(u=>u/(2*this.pixelsPerMeter))):l=br.ColliderDesc.ball(s.data.radius/this.pixelsPerMeter),l.setDensity(0).setSensor(!0).setActiveEvents(br.ActiveEvents.COLLISION_EVENTS),nl.fromArray(s.data.position),em.setFromEuler(_j.fromArray(s.data.rotation)),cw.compose(nl,em,gT).premultiply(n.matrixWorld),r?(cw.decompose(nl,em,mT),l.setActiveCollisionTypes(br.ActiveCollisionTypes.KINEMATIC_FIXED|br.ActiveCollisionTypes.DYNAMIC_FIXED)):(cw.premultiply(i).decompose(nl,em,mT),e.rigidBody.bodyType()===br.RigidBodyType.Dynamic||(e.rigidBody.bodyType()===br.RigidBodyType.Fixed?l.setActiveCollisionTypes(br.ActiveCollisionTypes.KINEMATIC_FIXED|br.ActiveCollisionTypes.DYNAMIC_FIXED):l.setActiveCollisionTypes(br.ActiveCollisionTypes.KINEMATIC_KINEMATIC|br.ActiveCollisionTypes.DYNAMIC_KINEMATIC))),nl.divideScalar(this.pixelsPerMeter),l.setTranslation(nl.x,nl.y,nl.z),l.setRotation(em),r)r.push([l,o]);else{let u=this.sharedGameControlGlobals.rapierWorld.createCollider(l,e.rigidBody);this.sensorToTriggerEvent[u.handle]=o}}})}checkTrigger(){let e;for(let t=0;t<this.sharedGameControlGlobals.triggers.length;t++){let[r,i,n,a]=this.sharedGameControlGlobals.triggers[t];for(let s=0;s<this.sharedGameControlGlobals.entitiesWithTransformAnim.length;s++){let o=this.sharedGameControlGlobals.entitiesWithTransformAnim[s];if(n===o||a.isValidTriggeringObject(pr.is(o)?o:o.object)===!1)continue;let l=Sj.copy(n.matrixWorld).decompose(nl,Ej,mT).compose(nl,Ej,gT).multiply(i),u=cw.copy(o.matrixWorld).invert().multiply(l);r instanceof Qi?e=o.bvhGeometry.boundsTree.intersectsBox(r,u):(vT.radius=r,vT.center.setFromMatrixPosition(u),e=o.bvhGeometry.boundsTree.intersectsSphere(vT)),e?a.currentIntersectedObjects.indexOf(o)===-1&&(a.currentIntersectedObjects.push(o),a.dispatch(),n.dispatchEvent(Hze)):a.currentIntersectedObjects=a.currentIntersectedObjects.filter(h=>h!==o)}}}};function $ze(e){let t=this._clip.duration,r=this._clip.start??0,i=this.loop,n=this.time+e,a=this._loopCount,s=i===yR;if(e===0)return a===-1?n:s&&(a&1)===1?t-(n-r):n;if(i===o7){a===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(n>=t)n=t;else if(n<0)n=0;else{this.time=n;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=n,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(a===-1&&(e>=0?(a=0,this._setEndings(!0,this.repetitions===0,s)):this._setEndings(this.repetitions===0,!0,s)),n>=t||n<r){let o=Math.floor((n-r)/(t-r));n-=(t-r)*o,a+=Math.abs(o);let l=this.repetitions-a;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,s||(n=e>0?t:r,this.repetitions===1&&(n=t)),this.time=n,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){let u=e<0;this._setEndings(u,!u,s)}else this._setEndings(!1,!1,s);this._loopCount=a,this.time=n,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=n;if(s&&(a&1)===1)return t-(n-r)}return n}var Mj=!1,Yze=class{constructor(e,t,r,i){this.scene=e,this.requestRender=t,this.updateDisplayProgress=r,this.animationInspectorState=i,this.clipIdToAction={},this.activeClip=null,this.needsUpdate=!1,this.addClip=n=>{n.data.type==="Empty"&&n.data.animations&&n.data.animations.forEach((a,s)=>{let o=a[0]+"/";if(Array.isArray(n.identity)?o+=n.identity[0]:o+=n.uuid,this.clipIdToAction[o])return;let l=gD.parse(JSON.parse(a[2]));n.animations[s]=l;let u=this.mixer.clipAction(l,n);Mj===!1&&(Object.getPrototypeOf(u)._updateTime=$ze,Mj=!0),u.clampWhenFinished=!0,this.clipIdToAction[o]=u})},this.mixer=new l_e(e),this.scene.traverseEntity(this.addClip)}deleteClip(e,t){let r=this.scene.find(t);if(!r)return;let i=r.animations.find(a=>a.uuid===e);if(!i)return;let n=this.clipIdToAction[e];!n||(n.stop(),this.mixer.uncacheClip(i),delete this.clipIdToAction[e],r.animations=r.animations.filter(a=>a.uuid!==e))}get isPlaying(){return Object.values(this.clipIdToAction).some(e=>e.isRunning())}playFromInspector(e){this.mixer.stopAllAction();let t=this.clipIdToAction[e];!t||(t.play(),this.activeClip=t.getClip(),this.requestRender())}onExitPlayMode(){Object.values(this.clipIdToAction).forEach(e=>{e.repetitions=1/0,e.loop=l7}),this.mixer.stopAllAction(),this.requestRender()}play(e){let t=e.clipId+"/"+e.object,r=this.clipIdToAction[t];if(r)return e&&(e.repeat>=0&&(r.repetitions=e.repeat+1),e.direction==="pingpong"&&e.repeat!==0&&(r.loop=yR)),r.play(),r.paused=!1,this.requestRender(),r}resumeFromInspector(e){let t=this.clipIdToAction[e];!t||(t.play(),t.paused=!1,this.requestRender())}pauseFromInspector(e){let t=this.clipIdToAction[e];!t||(t.paused=!0)}stop(){this.mixer.stopAllAction(),this.requestRender()}update(e){var t;if(this.needsUpdate)this.needsUpdate=!1;else if(this.isPlaying===!1||(t=this.animationInspectorState)!=null&&t.isScrubbing)return;this.mixer.update(e/1e3),this.activeClip&&this.updateDisplayProgress(Math.round(this.mixer.time/this.activeClip.duration*this.maxFrames%this.maxFrames)),this.requestRender()}get maxFrames(){var e,t;return((t=(e=this.activeClip)==null?void 0:e.tracks[0])==null?void 0:t.times.length)??0}setProgressFromInspector(e,t){if(!this.clipIdToAction[t])return;this.activeClip!==this.clipIdToAction[t].getClip()&&this.playFromInspector(t);let r=this.clipIdToAction[t].paused;this.clipIdToAction[t].paused=!1,this.mixer.setTime(Math.min(this.maxFrames?e/this.maxFrames:0,.9999)*this.activeClip.duration),this.requestRender(),r&&(this.clipIdToAction[t].paused=!0)}},yT=new WeakMap,qze=class extends IR{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,r,i){let n=new vD(this.manager);n.setPath(this.path),n.setResponseType("arraybuffer"),n.setRequestHeader(this.requestHeader),n.setWithCredentials(this.withCredentials),n.load(e,a=>{this.decodeDracoFile(a,t).catch(i)},r,i)}decodeDracoFile(e,t,r,i){let n={attributeIDs:r||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!r};return this.decodeGeometry(e,n).then(t)}decodeGeometry(e,t){let r=JSON.stringify(t);if(yT.has(e)){let o=yT.get(e);if(o.key===r)return o.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let i,n=this.workerNextTaskID++,a=e.byteLength,s=this._getWorker(n,a).then(o=>(i=o,new Promise((l,u)=>{i._callbacks[n]={resolve:l,reject:u},i.postMessage({type:"decode",id:n,taskConfig:t,buffer:e},[e])}))).then(o=>this._createGeometry(o.geometry));return s.catch(()=>!0).then(()=>{i&&n&&this._releaseTask(i,n)}),yT.set(e,{key:r,promise:s}),s}_createGeometry(e){let t=new wt;e.index&&t.setIndex(new Bt(e.index.array,1));for(let r=0;r<e.attributes.length;r++){let i=e.attributes[r],n=i.name,a=i.array,s=i.itemSize;t.setAttribute(n,new Bt(a,s))}return t}_loadLibrary(e,t){let r=new vD(this.manager);return r.setPath(this.decoderPath),r.setResponseType(t),r.setWithCredentials(this.withCredentials),new Promise((i,n)=>{r.load(e,i,void 0,n)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;let e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(r=>{let i=r[0];e||(this.decoderConfig.wasmBinary=r[1]);let n=Xze.toString(),a=["/* draco decoder */",i,"","/* worker */",n.substring(n.indexOf("{")+1,n.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([a]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){let i=new Worker(this.workerSourceURL);i._callbacks={},i._taskCosts={},i._taskLoad=0,i.postMessage({type:"init",decoderConfig:this.decoderConfig}),i.onmessage=function(n){let a=n.data;switch(a.type){case"decode":i._callbacks[a.id].resolve(a);break;case"error":i._callbacks[a.id].reject(a);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+a.type+'"')}},this.workerPool.push(i)}else this.workerPool.sort(function(i,n){return i._taskLoad>n._taskLoad?-1:1});let r=this.workerPool[this.workerPool.length-1];return r._taskCosts[e]=t,r._taskLoad+=t,r})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this.workerSourceURL!==""&&URL.revokeObjectURL(this.workerSourceURL),this}};function Xze(){let e,t;onmessage=function(s){let o=s.data;switch(o.type){case"init":e=o.decoderConfig,t=new Promise(function(h){e.onModuleLoaded=function(c){h({draco:c})},DracoDecoderModule(e)});break;case"decode":let l=o.buffer,u=o.taskConfig;t.then(h=>{let c=h.draco,d=new c.Decoder,f=new c.DecoderBuffer;f.Init(new Int8Array(l),l.byteLength);try{let m=r(c,d,f,u),p=m.attributes.map(g=>g.array.buffer);m.index&&p.push(m.index.array.buffer),self.postMessage({type:"decode",id:o.id,geometry:m},p)}catch(m){console.error(m),self.postMessage({type:"error",id:o.id,error:m.message})}finally{c.destroy(f),c.destroy(d)}});break}};function r(s,o,l,u){let h=u.attributeIDs,c=u.attributeTypes,d,f,m=o.GetEncodedGeometryType(l);if(m===s.TRIANGULAR_MESH)d=new s.Mesh,f=o.DecodeBufferToMesh(l,d);else if(m===s.POINT_CLOUD)d=new s.PointCloud,f=o.DecodeBufferToPointCloud(l,d);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!f.ok()||d.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+f.error_msg());let p={index:null,attributes:[]};for(let g in h){let v=self[c[g]],y,x;if(u.useUniqueIDs)x=h[g],y=o.GetAttributeByUniqueId(d,x);else{if(x=o.GetAttributeId(d,s[h[g]]),x===-1)continue;y=o.GetAttribute(d,x)}p.attributes.push(n(s,o,d,g,v,y))}return m===s.TRIANGULAR_MESH&&(p.index=i(s,o,d)),s.destroy(d),p}function i(s,o,l){let u=l.num_faces()*3,h=u*4,c=s._malloc(h);o.GetTrianglesUInt32Array(l,h,c);let d=new Uint32Array(s.HEAPF32.buffer,c,u).slice();return s._free(c),{array:d,itemSize:1}}function n(s,o,l,u,h,c){let d=c.num_components(),f=l.num_points()*d,m=f*h.BYTES_PER_ELEMENT,p=a(s,h),g=s._malloc(m);o.GetAttributeDataArrayForAllPoints(l,c,p,m,g);let v=new h(s.HEAPF32.buffer,g,f).slice();return s._free(g),{name:u,array:v,itemSize:d}}function a(s,o){switch(o){case Float32Array:return s.DT_FLOAT32;case Int8Array:return s.DT_INT8;case Int16Array:return s.DT_INT16;case Int32Array:return s.DT_INT32;case Uint8Array:return s.DT_UINT8;case Uint16Array:return s.DT_UINT16;case Uint32Array:return s.DT_UINT32}}}var Ph;function Qze(){return Ph||(Ph=new qze,Ph.setDecoderPath("https://www.gstatic.com/draco/versioned/decoders/1.5.2/").preload()),Ph.decoderPending}async function Kze(e){if(Ph){let t={attributeIDs:Ph.defaultAttributeIDs,attributeTypes:Ph.defaultAttributeTypes,useUniqueIDs:!1},r;try{r=await Ph.decodeGeometry(new Int8Array(e).buffer,t)}catch(i){console.error(i)}if(r)return{index:r.index?{array:r.index.array}:void 0,attributes:Object.entries(r.attributes).map(([i,n])=>({name:i,itemSize:n.itemSize,array:n.array}))}}return null}async function Zze(e,t){let[r,i]=j$(RD.deserialize(new Uint8Array(e)));dY(r);let n=[];r.scene.objects.traverse((a,s)=>{s.type==="Mesh"&&s.geometry.type==="NonParametricGeometry"&&s.geometry.data.draco!==void 0&&n.push(s)}),n.length&&await Qze();for(let a of n){let s=await Kze(An(a.geometry.data.draco));if(s){s.index&&(a.geometry.data.index={array:s.index.array,itemSize:1,normalized:!1,type:"Uint32Array"});let o={};s.attributes.forEach(({name:l,array:u,itemSize:h})=>{o[l]={array:u,itemSize:h,type:"Float32Array",normalized:!1}}),a.geometry.data.attributes=o,a.geometry.data.draco=void 0}}return t&&t(r),i.result().data}var Jze=class{constructor(e,t,r,i,n,a,s){this.id=e,this.data=t,this.dataEvent=r,this.object=i,this.stage=!1,this.actions=rs(r,t.actions,n,a,s,i)}disconnect(){Gn(this.actions)}dispatchIn(){this.actions.Audio.forEach(e=>e.dispatchBasic()),this.actions.Video.forEach(e=>e.dispatchBasic()),this.actions.Create.forEach(e=>e.dispatch()),this.actions.Destroy.forEach(e=>e.dispatch()),this.actions.Reset.forEach(e=>e.dispatch()),this.actions.Link.forEach(e=>e.dispatch()),this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),this.actions.Transition.forEach(e=>e.toggle()),this.actions.Animation.forEach(e=>e.play()),this.actions.SwitchCamera.forEach(e=>e.play()),this.actions.SceneTransition.forEach(e=>e.dispatch()),this.actions.SetVariable.forEach(e=>e.checkConditions()),this.actions.SetVariable.forEach(e=>e.dispatch())}dispatchOut(){this.actions.Transition.forEach(e=>{e.toggle()})}},e5e=class extends Pl{constructor(e,t){super(e),this.eventManager=t,this.breakpoints=[],this.helperResize=(r,i)=>{this.breakpoints.forEach(n=>{let a=ND.deviceToSize(n.data.size),s=n.dataEvent.orientation==="horizontal"?r:i,o;switch(n.data.operator){case"<":o=s<a[0];break;case">":o=s>a[0];break;case"<>":o=s>a[0]&&s<a[1];break}n.stage!==o&&(n.stage=o,n.stage?n.dispatchIn():n.dispatchOut())})},this.onResize=()=>{let{innerWidth:r,innerHeight:i}=window;this.helperResize(r,i)},this.onResizeObserver=new ResizeObserver(r=>{for(let i of r){let{width:n,height:a}=i.contentRect;this.helperResize(n,a)}})}connect(){let{page:e,sharedAssets:t,domElement:r,isExport:i,frame:n}=this.eventContext;i?window.addEventListener("resize",this.onResize):n.preset==="fullscreen"?this.onResizeObserver.observe(r):window.addEventListener("resize",this.onResize),e.traverseEntity(a=>{var s;if(!(!a.visible||!((s=a.data)!=null&&s.events.length)))for(let{data:o}of a.data.events)o.disabled||o.type==="Resize"&&o.breakpoints.forEach(({data:l,id:u})=>{try{let h=new Jze(u,l,o,a,e,t,this.eventManager);this.breakpoints.push(h)}catch{}})})}disconnect(){let{isExport:e,frame:t}=this.eventContext;e?window.removeEventListener("resize",this.onResize):t.preset==="fullscreen"?this.onResizeObserver.disconnect():window.removeEventListener("resize",this.onResize),this.breakpoints.forEach(r=>{r.disconnect()}),this.breakpoints=[]}},Cj=Object.keys(OX).filter(e=>isNaN(Number(e))),t5e=class{constructor(e,t,r,i,n){this.publish=e,this.controlsManager=t,this.animationControls=r,this.eventContext=i,this.sharedVariables=n,this.isEnabled=!1,this.activateCount=0,this.onResetRaycaster=()=>{this.eventContext.raycasterNeedsUpdate=!0},this.onTouchMovePreventScroll=a=>{(a.touches.length>1||this.preventTouchScroll)&&a.preventDefault()},this.onMouseWheelPreventScroll=a=>{this.preventScroll&&a.preventDefault()},this.onMouseMove=a=>{this.eventContext.sharedAssets.mouseProperty={x:a.clientX,y:a.clientY,pressed:a.buttons>0}},this.onMouseDown=a=>{this.eventContext.sharedAssets.mouseProperty={x:a.clientX,y:a.clientY,pressed:!0}},this.onMouseUp=a=>{this.eventContext.sharedAssets.mouseProperty={x:a.clientX,y:a.clientY,pressed:!1}},this.stopRaycast=e.stopRaycast,this.preventScroll=e.preventScroll,this.preventTouchScroll=e.preventTouchScroll,this.hideCursor=e.hideCursor,this.requestRender=i.requestRender}activate(){if(this.isEnabled)return;this.isEnabled=!0;let{needsMouse:e,needsRaycast:t}=this.checkForMouseAndRaycastPropertiesInExpressions();e&&(this.eventContext.domElement.addEventListener("pointermove",this.onMouseMove),this.eventContext.domElement.addEventListener("pointerdown",this.onMouseDown)),this.handlers={Spline:new H4e(this.eventContext),DynamicVariable:new wze(this.eventContext,this.sharedVariables,this,e,t),Conditional:new Q4e(this.eventContext,this),Start:new xze(this.eventContext,this),Basic:new W4e(this.eventContext,this,t),MouseHover:new pze(this.eventContext,this),Scroll:new vze(this.eventContext,this),Follow:new sze(this.eventContext,this),DragDrop:new tze(this.eventContext,this),LookAt:new hze(this.eventContext),Resize:new e5e(this.eventContext,this)};let{page:r,domElement:i,eventElement:n}=this.eventContext;this.hideCursor&&(i.style.cursor="none"),r.traverseEntity(a=>{a.addEventListener("requestRender",this.requestRender)}),Object.values(this.handlers).forEach(a=>a.connect()),Cj.forEach(a=>{(Object.values(this.handlers).some(s=>s.domEventsNeeded.has(a))||a==="pointerdown"&&this.controlsManager.navigationMeshWrapper)&&(i.addEventListener(a,this.onResetRaycaster),n.addEventListener(a,this.onResetRaycaster))}),i.addEventListener("wheel",this.onMouseWheelPreventScroll),i.addEventListener("touchmove",this.onTouchMovePreventScroll),this.activateCount++}deactivate(){var r;if(!this.isEnabled)return;this.isEnabled=!1,this.eventContext.domElement.removeEventListener("pointermove",this.onMouseMove),this.eventContext.domElement.removeEventListener("pointerdown",this.onMouseDown),this.eventContext.domElement.removeEventListener("pointerup",this.onMouseUp),this.eventContext.sharedAssets.mouseProperty=null,this.eventContext.sharedAssets.raycastProperty=null;let{page:e,domElement:t}=this.eventContext;t.style.cursor="",Object.values(this.handlers).forEach(i=>i.disconnect()),(r=this.controlsManager.gameControl)==null||r.disposeActions(),this.controlsManager.disconnectEvents(),e.traverseEntity(i=>{i.removeEventListener("requestRender",this.requestRender),i.destroyedInAction=!1}),Cj.forEach(i=>{t.removeEventListener(i,this.onResetRaycaster)}),t.removeEventListener("touchmove",this.onTouchMovePreventScroll),t.removeEventListener("wheel",this.onMouseWheelPreventScroll),this.animationControls.onExitPlayMode()}get isPaused(){return this.isEnabled}pause(){this.deactivate()}resume(){this.activate()}reset(){this.deactivate(),this.activate(),this.controlsManager.page.updateMatrixWorld(!0),this.controlsManager.rebuildBVH()}updateUseWindowEvents(e){let t=this.isEnabled;t&&this.deactivate(),this.eventContext.useWindowEvents=e,t&&this.activate()}checkForMouseAndRaycastPropertiesInExpressions(){let e=!1,t=!1;function r(i){for(let n of i)if(n.data.type==="Conditional"||n.data.type==="SetVariable"){for(let a of n.data.type==="Conditional"?n.data.condition:n.data.expression)if("id"in a&&Array.isArray(a.id)&&(a.id[0]==="mouse"&&(e=!0),a.id[0]==="raycast"&&(t=!0)),e&&t)return}}return this.eventContext.page.traverseEntity(i=>{var n;if((n=i.data)!=null&&n.events.length){for(let a of i.data.events)if(!a.data.disabled){if(a.data.type==="VariableChange"&&(a.data.variableId==="mouseProperty"&&(e=!0),a.data.variableId==="raycastProperty"&&(t=!0),e&&t))return!0;if(a.data.type==="Conditional")for(let s of["inActions","outActions"])r(a.data[s]);else if(a.data.type==="DragDrop")for(let s of["drag","drop"])r(a.data.dragDropActions[s]);else if(a.data.type==="GameControl")for(let s of["idle","move","jump","run"])r(a.data.gameActions[s]);else if(a.data.type==="Resize")for(let s of a.data.breakpoints)r(s.data.actions);else a.data.type==="LookAt"||r(a.data.actions);if(e&&t)return!0}}}),{needsMouse:e,needsRaycast:t}}},r5e=class{constructor(e,t,r,i,n){this._aspect=1,this.enableResponsive=!1,this._renderer=e,this._camera=t,this._frameSize=new re().copy(r),this._editorSize=new re().copy(i),this._aspect=t.aspect,this._fov=n??t.fov}set frameSize(e){this._frameSize.copy(e)}updateRenderer(){!this._renderer||this._renderer.setSize(this._frameSize.x,this._frameSize.y)}updateViewport(){if(!this._renderer||!this._camera||this._camera.cameraType!=="PerspectiveCamera")return;let e=this._frameSize.x,t=this._frameSize.y,r=this._editorSize.y;this._aspect=e/t,t<=r&&(this._camera.zoom*=r/t),this._renderer.setViewport(0,0,e,t)}updateCamera(e=!0){if(this._camera)if(this._camera.cameraType==="PerspectiveCamera"){let t=this._frameSize.y,r=this._editorSize.y,i=this._fov;if(e&&t>r){let n=i5e(t,1080,2160,1,15)/100;i*=t/r,i*=1-n}this._camera.aspect=this._aspect,this._camera.fov=i,this._camera.updateProjectionMatrix()}else this._camera.setViewplaneSize(this._frameSize.x,this._frameSize.y,this.enableResponsive)}setCamera(e){this._camera=e,this._aspect=e.aspect,this._fov=e.fov}revert(){let e=window.innerWidth,t=window.innerHeight;this._renderer&&(this._renderer.setViewport(0,0,e,t),this._renderer.setSize(e,t)),this._camera&&(this._camera.aspect=e/t,this._camera.fov=this._fov,this._camera.setViewplaneSize(e,t,this.enableResponsive),this._camera.updateProjectionMatrix())}};function i5e(e,t,r,i,n){return(e-t)/(r-t)*(n-i)+i}var n5e=class{get sharedAssets(){return this.shared}constructor(e,t={}){this.shared=new Ck(e.shared,t),this.scene=new Lk(e.scene,this.sharedAssets),this.shared.setEntityOpContext({scene:this.scene,shared:this.shared})}reset(e,t){this.scene.clearScene(),this.sharedAssets.reset(e.shared),this.scene.resetAfterClear(e.scene,this.sharedAssets)}resetPersonalCameraFromDocumentData(){for(let e of this.scene.children)e instanceof qh&&e.personalCamera.updateState(e.data.camera,{scene:this.scene,shared:this.shared})}dispose(){this.scene.dispose(),this.shared.dispose()}gc(){this.shared.geometryCache.startGc(),this.shared.geometryCache2.startGc(),this.scene.traverseEntity(e=>{e instanceof Qa&&e.markGeometryAsReachable(this.shared)}),this.shared.geometryCache.endGc(),this.shared.geometryCache2.endGc()}},a5e=class{constructor({x:e=10,y:t=10}){this._startTime=0;let r=document.getElementById("spe-perfs");r?this.element=r:(this.element=document.createElement("div"),document.body.appendChild(this.element),this.element.style.position="absolute",this.element.style.zIndex="10000",this.element.style.fontFamily="monospace",this.element.style.background="black",this.element.style.color="white",this.element.style.padding="10px",this.element.style.opacity="0.5",this.element.style.fontSize="11px",this.element.setAttribute("id","spe-perfs")),this.element.style.left=`${e}px`,this.element.style.top=`${t}px`}dispose(){var e;(e=this.element.parentElement)==null||e.removeChild(this.element)}start(){this._startTime=performance.now()}end(){let e=performance.now()-this._startTime;this.element.innerHTML=e.toFixed(3)+" ms"}};function s5e(e){let t;if(e.index)for(let r=0;r<e.index.array.length;r+=3)t=e.index.array[r],e.index.array[r]=e.index.array[r+2],e.index.array[r+2]=t}function Ty(e){return e instanceof E1?"SubdivObject":e.geometry.type==="NonParametricGeometry"?"NonParametric":"Mesh"}function o5e(e,t){let r={};return e.traverseEntity(i=>{var l;if(!i.visible||!(i instanceof Os)||i.type!=="Mesh"||Array.isArray(i.material)||i.states&&Object.keys(i.states).length)return;let n=i.parent;for(;n;){if(n instanceof Os&&i.states&&Object.keys(i.states).length)return;n=n.parent}let a=i.material.uuid,s=t.shared.materials[a];if(s){if(!wa.isMergable(s))return}else{let u=(l=t.scene.objects.get(i.uuid))==null?void 0:l.data;if(u&&"material"in u&&typeof u.material!="string"){if(!wa.isMergable(u.material))return;a=wa.getHash(u.material)}}r[a]||(r[a]={});let o=r[a][Ty(i)];if(o){if(o.push(i),i.cloner)for(let u of i.cloner.children)o.push(u)}else if(r[a][Ty(i)]=[i],i.cloner)for(let u of i.cloner.children)r[a][Ty(i)].push(u)}),r}function l5e(e){let t=0;return Object.values(e).forEach(r=>{Object.values(r).forEach(i=>{let n=i.length;n>t&&(t=n)})}),t}function u5e(e,t){let r=o5e(t,e),i=l5e(r),n=new Array(i),a=0,s=new Array(i),o=0,l=new Array(i),u=0,h=new Array(i),c=0;for(let[d,f]of Object.entries(r))for(let m of Object.values(f)){if(o=0,u=0,m.forEach(g=>{g instanceof Os&&(s[o++]=g.geometry.clone(),l[u++]=g)}),u<2)continue;for(let g=0;g<u;g++)l[g].updateWorldMatrix(!0,!1),s[g].applyMatrix4(l[g].matrixWorld),l[g].matrixWorld.determinant()<0&&s5e(s[g]);let p=af(s.slice(0,o),!1);if(p){let g;switch(d){case"SubdivObject":{console.warn("Turning subdiv object into mesh"),g=new gs(p,l[0].material);break}default:{g=new gs(p,l[0].material);break}}g.castShadow=l[0].castShadow,g.receiveShadow=l[0].receiveShadow,t.add(g);let v=y=>{c=0;for(let x of y)x.children&&v(x.children),x instanceof Os&&(Array.isArray(x.material)||r[x.material.uuid]&&r[x.material.uuid][Ty(x)]&&r[x.material.uuid][Ty(x)].length>1||(h[c++]=x));for(let x=0;x<c;x++)t.attach(h[x])};for(let y=0;y<u;y++){let x=l[y];v(x.children),n[a++]=x}}}for(let d=0;d<a;d++)n[d].removeFromParent()}var c5e=pd(Xge(),1),h5e=new re;function d5e(e){let t="The Spline Runtime only accepts .splinecode files that are generated from Spline export panel.";e.endsWith(".spline")?console.warn(t+" The .spline files are only meant to be used by the Editor."):e.endsWith(".splinecode")||console.warn(t)}var f5e=class{constructor(e,{renderOnDemand:t,renderMode:r="auto"}={}){this._viewportMode=1,this._viewportWidth=window.innerWidth,this._viewportHeight=window.innerHeight,this._proxyObjectCache=new Map,this._isPaused=!1,this._renderRequested=!1,this._skipRender=!1,this.time=performance.now(),this.dt=0,this.currentTAAFrame=0,this.disposed=!1,this._requestRenderAutoMode=()=>{this._skipRender=!1},this.requestRender=()=>{this._renderRequested=!0},this.render=i=>{var n,a,s,o,l,u,h,c,d,f,m,p;if(this.time=i,this._lastTime&&(this.dt=this.time-this._lastTime),this._lastTime=this.time,(n=this._perfs)==null||n.start(),!this._renderer){(a=this._perfs)==null||a.end();return}if(!this._isPaused&&(this.renderMode==="manual"&&!this._renderRequested||this.renderMode==="auto"&&this._skipRender)){(s=this._perfs)==null||s.end();return}if(this._renderRequested=!1,this._skipRender=!0,this._controls&&(this._skipRender=this._controls.update(this.dt)),this._eventManager&&((o=this._eventManager.handlers)!=null&&o.Start.hasVideoAction||(l=this._eventManager.handlers)!=null&&l.Basic.hasVideoAction||(u=this._eventManager.handlers)!=null&&u.Conditional.hasVideoAction)&&(this._skipRender=!1),(h=this._animationControls)==null||h.update(this.dt),this._skipRender?(this.currentTAAFrame++,this.currentTAAFrame<32?this._skipRender=!1:this.currentTAAFrame=0):this.currentTAAFrame=0,this._scene&&this._scene.activeCamera!==this._camera&&(this._camera=this._scene.activeCamera),(c=this._eventManager)!=null&&c.isEnabled&&(((d=this._eventManager.handlers)==null?void 0:d.Follow).onAnimationFrameDamping(),((f=this._eventManager.handlers)==null?void 0:f.LookAt).onAnimationFrameDamping(),((m=this._eventManager.handlers)==null?void 0:m.DragDrop).onAnimationFrameDamping()),this._scene&&this._camera){if(this._scene.pathConstraints.applyConstraints(this._scene),this._renderer.sceneTransitionTimeRemaining>0){this._renderer.sceneTransitionTimeRemaining-=this.dt;let g=1-this._renderer.sceneTransitionTimeRemaining/this._renderer.sceneTransitionDuration;this._renderer.pipeline.sceneTransitionPass.uniforms.mixRatio.value=g,this._skipRender=!1}else this._renderer.pipeline.sceneTransitionFromTexture=null;this._renderer.renderSplineScene(this._scene,this._camera)}this.canvas.dispatchEvent(this._renderedEvent),(p=this._perfs)==null||p.end()},this._resize=()=>{var i,n,a,s,o,l,u,h,c,d;if(this._renderer){if(this._viewportMode===1&&this._frameView&&(this._frameView.frameSize=h5e.set(this._viewportWidth,this._viewportHeight)),this._renderer.setSize(this._viewportWidth,this._viewportHeight,!1),this._camera=(i=this._scene)==null?void 0:i.activeCamera,(u=this._scene)==null||u.updateViewPlaneSize(((a=(n=this._frameView)==null?void 0:n.frameSize)==null?void 0:a.x)??this._viewportWidth,((o=(s=this._frameView)==null?void 0:s.frameSize)==null?void 0:o.y)??this._viewportHeight,((l=this._frameView)==null?void 0:l.enableResponsive)??!1),this._camera){let f=Object.values(((h=this._data)==null?void 0:h.frames)??{})[0].preset??"fullscreen";(c=this._frameView)==null||c.setCamera(this._camera),(d=this._frameView)==null||d.updateCamera(f!=="fullscreen"),this._camera.cameraType==="PerspectiveCamera"&&(this._camera.aspect=this._viewportWidth/this._viewportHeight),this._camera.updateProjectionMatrix()}this._requestRenderAutoMode()}},this._debouncedResize=JR(this._resize,10),this.canvas=e,this.renderMode=t?"auto":r,this._renderedEvent=new CustomEvent("rendered",{bubbles:!0}),Object.defineProperty(this._renderedEvent,"target",{writable:!1,value:this}),window.location.search.includes("perfs")&&(this._perfs=new a5e({x:10,y:10})),UPe(e)}async load(e,t){d5e(e),this.disposed=!1;let r=await(await fetch(e,t)).arrayBuffer();await this.start(r)}async start(e,{interactive:t=!0}={}){var s,o,l;if(this.disposed)return;let r=await Zze(e);this._data=r,r.version&&(0,c5e.default)(r.version,"0.9.457")>0&&console.warn("Your .splinecode file is more recent than the library. Please upgrade @splinetool/runtime to the latest version."),await Promise.all([g6(r)&&bIe(),uke(r)&&vIe(),y1.physicsEnabled(r.scene.objects)&&WPe(),d6(r)&&QRe(),Rze(r)&&HPe()].filter(Boolean)),(s=this._eventManager)==null||s.deactivate(),(o=this._controls)==null||o.deactivate(),(l=this._scene)==null||l.dispose();let i=new n5e(r);if(i.resetPersonalCameraFromDocumentData(),this._scene=i.scene,this._sharedAssetsManager=i.sharedAssets,this._camera=this._scene.activeCamera,window.location.search.includes("merge-geometries")){let u=performance.now();u5e(r,i.scene);let h=performance.now();console.log("Merged geometries in ",h-u," ms")}g6(r)&&this._scene.traverse(u=>{lu(u)&&u.recomputeBoolean()}),this._sharedAssetsManager.setRequestRender(()=>{var u;this._requestRenderAutoMode(),(u=this._scene)==null||u.traverse(h=>{h instanceof ml&&h.pendingMediaLoad&&h.update()})});let n=Object.keys(r.shared.fonts).map(u=>this._sharedAssetsManager.getFont(u).loadingPromise);Promise.all(n).then(()=>{i.scene.markNeedsUpdateRendererDirty(),this._requestRenderAutoMode()}),d6(r)&&Gze(r)&&await Promise.all(n),this._scene.rewriteEventsBeforeGoToPlayMode(),Yk(this._scene.activePage,this._sharedAssetsManager),this._renderer||(this._renderer=new zBe({canvas:this.canvas,antialias:!1,alpha:!0,stencil:!1,depth:!1,powerPreference:"high-performance"}),this._renderer.hdTransmission=r.scene.publish.hdTransmission===!0,this._renderer.setPixelRatio(window.devicePixelRatio),this._renderer.pipeline.addEventListener("smaaloaded",this._requestRenderAutoMode)),r.scene.blueNoiseTextureData!==void 0&&this._renderer.pipeline.updateBlueNoiseTexture(r.scene.blueNoiseTextureData);let a=Object.values(r.frames)[0];if(this._frameView?this._frameView.setCamera(this._camera):(a.preset==="fullscreen"?(this._viewportMode=1,this.canvas.style.display="block",this.canvas.parentElement&&(this._viewportWidth=this.canvas.parentElement.clientWidth||300,this.canvas.style.width="100%"),this.canvas.parentElement&&(this._viewportHeight=this.canvas.parentElement.clientHeight||150,this.canvas.style.height="100%")):(this._viewportMode=2,this._viewportWidth=a.size[0],this._viewportHeight=a.size[1],this.canvas.style.width=`${this._viewportWidth}px`,this.canvas.style.height=`${this._viewportHeight}px`),this._renderer.setSize(this._viewportWidth,this._viewportHeight,!1),this._frameView=new r5e(this._renderer,this._camera,new re(this._viewportWidth,this._viewportHeight),new re(window.innerWidth,window.innerHeight)),this._frameView.enableResponsive=(a.allowResponsive??!1)&&a.preset==="fullscreen"),t){let u=new j4e(this._renderer,this.data.scene.publish,this._scene,()=>this._scene.activeCamera,this._sharedAssetsManager,this._requestRenderAutoMode,!0,a);this._scene.updateMatrixWorld(!0),this._controls=new Wze(u),this._animationControls=new Yze(this._scene,this._requestRenderAutoMode),this._eventManager=new t5e(r.scene.publish,this._controls,this._animationControls,u,r.shared.variables),this._eventManager.activate(),this._controls.activate(this._eventManager)}this._resize(),this.dt===0&&(this.render(performance.now()),setTimeout(()=>{var u;(u=this._renderer)==null||u.setAnimationLoop(this.render)},0)),this._resizeObserverTimeout=setTimeout(()=>{!this._resizeObserver&&this.canvas.parentElement&&(this._resizeObserver=new ResizeObserver(()=>{this._viewportWidth=this.canvas.clientWidth,this._viewportHeight=this.canvas.clientHeight,this._debouncedResize()}),this._resizeObserver.observe(this.canvas.parentElement))},300)}findObjectById(e){var r;let t=(r=this._scene)==null?void 0:r.getObjectByProperty("uuid",e);return this._createProxyObject(t)}findObjectByName(e){var r;let t=(r=this._scene)==null?void 0:r.getObjectByName(e);return this._createProxyObject(t)}getAllObjects(){var t;let e=[];return(t=this._scene)==null||t.traverseEntity(r=>{if(r.uuid!==_v&&!this._scene.isInvisibleObjects(r)&&!(r instanceof qh)){let i=this._createProxyObject(r);i&&e.push(i)}}),e}getSplineEvents(){var e,t;return((t=(e=this._eventManager)==null?void 0:e.handlers)==null?void 0:t.Spline).splineEvents}emitEvent(e,t){var r;(r=this.findObjectById(t)||this.findObjectByName(t))==null||r.emitEvent(e)}emitEventReverse(e,t){var r;(r=this.findObjectById(t)||this.findObjectByName(t))==null||r.emitEventReverse(e)}addEventListener(e,t){this.canvas.addEventListener(e,t)}removeEventListener(e,t){this.canvas.removeEventListener(e,t)}setZoom(e){var t,r;((t=this._controls)==null?void 0:t.orbitControls)instanceof LX&&((r=this._controls)==null||r.orbitControls.zoomOut(e))}get eventManager(){return this._eventManager}get controls(){return this._controls}setSize(e,t){this._viewportWidth=e,this._viewportHeight=t,this._viewportMode=2,this._resize()}setBackgroundColor(e){var s;let{r:t,g:r,b:i,a:n}={r:0,g:0,b:0,a:1},a=new As(t,r,i,n);try{a.setStyle(e)}catch{console.error("This is not a valid css color",e)}(s=this._scene)==null||s.activePage.setBackgroundColor(a),this._requestRenderAutoMode()}dispose(){var e,t,r,i,n,a,s;this.disposed=!0,(e=this._eventManager)==null||e.deactivate(),(t=this._scene)==null||t.dispose(),(r=this._sharedAssetsManager)==null||r.dispose(),this._proxyObjectCache.forEach(o=>{N5.unsubscribe(o)}),(i=this._renderer)==null||i.setAnimationLoop(null),(n=this._renderer)==null||n.dispose(),this._renderer=void 0,(a=this._sharedAssetsManager)==null||a.dispose(),this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=void 0),this._resizeObserverTimeout!==void 0&&clearTimeout(this._resizeObserverTimeout),this.canvas.style.width="",this.canvas.style.height="",this.canvas.removeAttribute("width"),this.canvas.removeAttribute("height"),this._frameView&&(this._frameView=void 0),(s=this._controls)==null||s.deactivate(),jPe(this.canvas)}get isStopped(){return this._isPaused}stop(){var e,t,r;this._isPaused||((e=this._renderer)==null||e.setAnimationLoop(null),this._isPaused=!0,(t=this._eventManager)==null||t.pause(),(r=this._controls)!=null&&r.orbitControls&&(this._controls.orbitControls.enabled=!1))}play(){var e,t,r;!this._isPaused||(this._isPaused=!1,(e=this._eventManager)==null||e.resume(),(t=this._controls)!=null&&t.orbitControls&&(this._controls.orbitControls.enabled=!0),(r=this._renderer)==null||r.setAnimationLoop(this.render))}setGlobalEvents(e){var t;(t=this._eventManager)==null||t.updateUseWindowEvents(e)}get data(){return this._data}_createProxyObject(e){var n;if(e==null)return;if(this._proxyObjectCache.has(e.uuid))return this._proxyObjectCache.get(e.uuid);let t;e.traverseAncestors(a=>{a instanceof qh&&(t=a.name)});let r={name:e.name,uuid:e.uuid,visible:e.visible,intensity:e.intensity,position:e.position,rotation:e.rotation,scale:e.scale,type:e.data.type,page:t,parentUuid:e.parent instanceof qh||e instanceof Lk||(n=e.parent)==null?void 0:n.uuid,emitEvent(a){e.dispatchEvent({type:"userEvent",eventName:a})},emitEventReverse(a){e.dispatchEvent({type:"userEvent",eventName:a,reverse:!0})}},i=N5(r,(a,s)=>{var o;typeof e[a]!="object"&&((o=Object.getOwnPropertyDescriptor(e,a))!=null&&o.writable)&&(e[a]=s),this._requestRenderAutoMode(),e.updateMatrix()});return this._proxyObjectCache.set(e.uuid,i),i}},hw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},G3={},p5e={get exports(){return G3},set exports(e){G3=e}},S0={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Aj;function m5e(){if(Aj)return S0;Aj=1;var e=jn,t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,n=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function s(o,l,u){var h,c={},d=null,f=null;u!==void 0&&(d=""+u),l.key!==void 0&&(d=""+l.key),l.ref!==void 0&&(f=l.ref);for(h in l)i.call(l,h)&&!a.hasOwnProperty(h)&&(c[h]=l[h]);if(o&&o.defaultProps)for(h in l=o.defaultProps,l)c[h]===void 0&&(c[h]=l[h]);return{$$typeof:t,type:o,key:d,ref:f,props:c,_owner:n.current}}return S0.Fragment=r,S0.jsx=s,S0.jsxs=s,S0}(function(e){e.exports=m5e()})(p5e);const W3=G3.jsx;var g5e="Expected a function",Tj=0/0,v5e="[object Symbol]",y5e=/^\s+|\s+$/g,x5e=/^[-+]0x[0-9a-f]+$/i,b5e=/^0b[01]+$/i,w5e=/^0o[0-7]+$/i,_5e=parseInt,S5e=typeof hw=="object"&&hw&&hw.Object===Object&&hw,E5e=typeof self=="object"&&self&&self.Object===Object&&self,M5e=S5e||E5e||Function("return this")(),C5e=Object.prototype,A5e=C5e.toString,T5e=Math.max,P5e=Math.min,xT=function(){return M5e.Date.now()};function D5e(e,t,r){var i,n,a,s,o,l,u=0,h=!1,c=!1,d=!0;if(typeof e!="function")throw new TypeError(g5e);t=Pj(t)||0,$3(r)&&(h=!!r.leading,c="maxWait"in r,a=c?T5e(Pj(r.maxWait)||0,t):a,d="trailing"in r?!!r.trailing:d);function f(w){var E=i,S=n;return i=n=void 0,u=w,s=e.apply(S,E),s}function m(w){return u=w,o=setTimeout(v,t),h?f(w):s}function p(w){var E=w-l,S=w-u,C=t-E;return c?P5e(C,a-S):C}function g(w){var E=w-l,S=w-u;return l===void 0||E>=t||E<0||c&&S>=a}function v(){var w=xT();if(g(w))return y(w);o=setTimeout(v,p(w))}function y(w){return o=void 0,d&&i?f(w):(i=n=void 0,s)}function x(){o!==void 0&&clearTimeout(o),u=0,i=l=n=o=void 0}function b(){return o===void 0?s:y(xT())}function _(){var w=xT(),E=g(w);if(i=arguments,n=this,l=w,E){if(o===void 0)return m(l);if(c)return o=setTimeout(v,t),f(l)}return o===void 0&&(o=setTimeout(v,t)),s}return _.cancel=x,_.flush=b,_}function $3(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function O5e(e){return!!e&&typeof e=="object"}function I5e(e){return typeof e=="symbol"||O5e(e)&&A5e.call(e)==v5e}function Pj(e){if(typeof e=="number")return e;if(I5e(e))return Tj;if($3(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=$3(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(y5e,"");var r=b5e.test(e);return r||w5e.test(e)?_5e(e.slice(2),r?2:8):x5e.test(e)?Tj:+e}var R5e=D5e;function k5e(e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}const L5e=[],B5e={width:"100%",height:"100%"},N5e=X.forwardRef(function({className:e,children:t,debounceTime:r=300,ignoreDimensions:i=L5e,parentSizeStyles:n,enableDebounceLeadingCall:a=!0,resizeObserverPolyfill:s,...o},l){const u=X.useRef(null),h=X.useRef(0),[c,d]=X.useState({width:0,height:0,top:0,left:0}),f=X.useMemo(()=>{const m=Array.isArray(i)?i:[i];return R5e(p=>{d(g=>Object.keys(g).filter(v=>g[v]!==p[v]).every(v=>m.includes(v))?g:p)},r,{leading:a})},[r,a,i]);return X.useEffect(()=>{const m=s||window.ResizeObserver,p=new m(g=>{g.forEach(v=>{const{left:y,top:x,width:b,height:_}=(v==null?void 0:v.contentRect)??{};h.current=window.requestAnimationFrame(()=>{f({width:b,height:_,top:x,left:y})})})});return u.current&&p.observe(u.current),()=>{window.cancelAnimationFrame(h.current),p.disconnect(),f.cancel()}},[f,s]),W3("div",{style:{...B5e,...n},ref:k5e([l,u]),className:e,...o,children:t({...c,ref:u.current,resize:f})})}),BX=X.forwardRef(({scene:e,style:t,onMouseDown:r,onMouseUp:i,onMouseHover:n,onKeyDown:a,onKeyUp:s,onStart:o,onLookAt:l,onFollow:u,onWheel:h,onLoad:c,renderOnDemand:d=!0,...f},m)=>{const p=X.useRef(null),[g,v]=X.useState(!0);return X.useEffect(()=>{v(!0);let y;const x=[{name:"mouseDown",cb:r},{name:"mouseUp",cb:i},{name:"mouseHover",cb:n},{name:"keyDown",cb:a},{name:"keyUp",cb:s},{name:"start",cb:o},{name:"lookAt",cb:l},{name:"follow",cb:u},{name:"scroll",cb:h}];if(p.current){y=new f5e(p.current,{renderOnDemand:d});async function b(){await y.load(e);for(let _ of x)_.cb&&y.addEventListener(_.name,_.cb);v(!1),c==null||c(y)}b()}return()=>{for(let b of x)b.cb&&y.removeEventListener(b.name,b.cb);y.dispose()}},[e]),W3(N5e,{ref:m,parentSizeStyles:t,debounceTime:50,...f,children:()=>W3("canvas",{ref:p,style:{display:g?"none":"block"}})})}),z5e="/assets/meme-9b7742ec.jpg";function F5e(e){return typeof e=="string"}function U5e(e,t,r){return e===void 0||F5e(e)?t:Ee({},t,{ownerState:Ee({},t.ownerState,r)})}function NX(e,t=[]){if(e===void 0)return{};const r={};return Object.keys(e).filter(i=>i.match(/^on[A-Z]/)&&typeof e[i]=="function"&&!t.includes(i)).forEach(i=>{r[i]=e[i]}),r}function j5e(e,t,r){return typeof e=="function"?e(t,r):e}function Dj(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(r=>!(r.match(/^on[A-Z]/)&&typeof e[r]=="function")).forEach(r=>{t[r]=e[r]}),t}function V5e(e){const{getSlotProps:t,additionalProps:r,externalSlotProps:i,externalForwardedProps:n,className:a}=e;if(!t){const f=fr(n==null?void 0:n.className,i==null?void 0:i.className,a,r==null?void 0:r.className),m=Ee({},r==null?void 0:r.style,n==null?void 0:n.style,i==null?void 0:i.style),p=Ee({},r,n,i);return f.length>0&&(p.className=f),Object.keys(m).length>0&&(p.style=m),{props:p,internalRef:void 0}}const s=NX(Ee({},n,i)),o=Dj(i),l=Dj(n),u=t(s),h=fr(u==null?void 0:u.className,r==null?void 0:r.className,a,n==null?void 0:n.className,i==null?void 0:i.className),c=Ee({},u==null?void 0:u.style,r==null?void 0:r.style,n==null?void 0:n.style,i==null?void 0:i.style),d=Ee({},u,r,l,o);return h.length>0&&(d.className=h),Object.keys(c).length>0&&(d.style=c),{props:d,internalRef:u.ref}}const H5e=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function Oj(e){var t;const{elementType:r,externalSlotProps:i,ownerState:n,skipResolvingSlotProps:a=!1}=e,s=Er(e,H5e),o=a?{}:j5e(i,n),{props:l,internalRef:u}=V5e(Ee({},s,{externalSlotProps:o})),h=Kh(u,o==null?void 0:o.ref,(t=e.additionalProps)==null?void 0:t.ref);return U5e(r,Ee({},l,{ref:h}),n)}function G5e(e){const t=pc(e);return t.body===e?N2(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}function Py(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function Ij(e){return parseInt(N2(e).getComputedStyle(e).paddingRight,10)||0}function W5e(e){const r=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(e.tagName)!==-1,i=e.tagName==="INPUT"&&e.getAttribute("type")==="hidden";return r||i}function Rj(e,t,r,i,n){const a=[t,r,...i];[].forEach.call(e.children,s=>{const o=a.indexOf(s)===-1,l=!W5e(s);o&&l&&Py(s,n)})}function bT(e,t){let r=-1;return e.some((i,n)=>t(i)?(r=n,!0):!1),r}function $5e(e,t){const r=[],i=e.container;if(!t.disableScrollLock){if(G5e(i)){const s=uie(pc(i));r.push({value:i.style.paddingRight,property:"padding-right",el:i}),i.style.paddingRight=`${Ij(i)+s}px`;const o=pc(i).querySelectorAll(".mui-fixed");[].forEach.call(o,l=>{r.push({value:l.style.paddingRight,property:"padding-right",el:l}),l.style.paddingRight=`${Ij(l)+s}px`})}let a;if(i.parentNode instanceof DocumentFragment)a=pc(i).body;else{const s=i.parentElement,o=N2(i);a=(s==null?void 0:s.nodeName)==="HTML"&&o.getComputedStyle(s).overflowY==="scroll"?s:i}r.push({value:a.style.overflow,property:"overflow",el:a},{value:a.style.overflowX,property:"overflow-x",el:a},{value:a.style.overflowY,property:"overflow-y",el:a}),a.style.overflow="hidden"}return()=>{r.forEach(({value:a,el:s,property:o})=>{a?s.style.setProperty(o,a):s.style.removeProperty(o)})}}function Y5e(e){const t=[];return[].forEach.call(e.children,r=>{r.getAttribute("aria-hidden")==="true"&&t.push(r)}),t}class q5e{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(t,r){let i=this.modals.indexOf(t);if(i!==-1)return i;i=this.modals.length,this.modals.push(t),t.modalRef&&Py(t.modalRef,!1);const n=Y5e(r);Rj(r,t.mount,t.modalRef,n,!0);const a=bT(this.containers,s=>s.container===r);return a!==-1?(this.containers[a].modals.push(t),i):(this.containers.push({modals:[t],container:r,restore:null,hiddenSiblings:n}),i)}mount(t,r){const i=bT(this.containers,a=>a.modals.indexOf(t)!==-1),n=this.containers[i];n.restore||(n.restore=$5e(n,r))}remove(t,r=!0){const i=this.modals.indexOf(t);if(i===-1)return i;const n=bT(this.containers,s=>s.modals.indexOf(t)!==-1),a=this.containers[n];if(a.modals.splice(a.modals.indexOf(t),1),this.modals.splice(i,1),a.modals.length===0)a.restore&&a.restore(),t.modalRef&&Py(t.modalRef,r),Rj(a.container,t.mount,t.modalRef,a.hiddenSiblings,!1),this.containers.splice(n,1);else{const s=a.modals[a.modals.length-1];s.modalRef&&Py(s.modalRef,!1)}return i}isTopModal(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}}function X5e(e){return typeof e=="function"?e():e}function Q5e(e){return e?e.props.hasOwnProperty("in"):!1}const K5e=new q5e;function Z5e(e){const{container:t,disableEscapeKeyDown:r=!1,disableScrollLock:i=!1,manager:n=K5e,closeAfterTransition:a=!1,onTransitionEnter:s,onTransitionExited:o,children:l,onClose:u,open:h,rootRef:c}=e,d=X.useRef({}),f=X.useRef(null),m=X.useRef(null),p=Kh(m,c),[g,v]=X.useState(!h),y=Q5e(l);let x=!0;(e["aria-hidden"]==="false"||e["aria-hidden"]===!1)&&(x=!1);const b=()=>pc(f.current),_=()=>(d.current.modalRef=m.current,d.current.mount=f.current,d.current),w=()=>{n.mount(_(),{disableScrollLock:i}),m.current&&(m.current.scrollTop=0)},E=Jd(()=>{const F=X5e(t)||b().body;n.add(_(),F),m.current&&w()}),S=X.useCallback(()=>n.isTopModal(_()),[n]),C=Jd(F=>{f.current=F,F&&(h&&S()?w():m.current&&Py(m.current,x))}),M=X.useCallback(()=>{n.remove(_(),x)},[x,n]);X.useEffect(()=>()=>{M()},[M]),X.useEffect(()=>{h?E():(!y||!a)&&M()},[h,M,y,a,E]);const P=F=>z=>{var B;(B=F.onKeyDown)==null||B.call(F,z),!(z.key!=="Escape"||!S())&&(r||(z.stopPropagation(),u&&u(z,"escapeKeyDown")))},I=F=>z=>{var B;(B=F.onClick)==null||B.call(F,z),z.target===z.currentTarget&&u&&u(z,"backdropClick")};return{getRootProps:(F={})=>{const z=NX(e);delete z.onTransitionEnter,delete z.onTransitionExited;const B=Ee({},z,F);return Ee({role:"presentation"},B,{onKeyDown:P(B),ref:p})},getBackdropProps:(F={})=>{const z=F;return Ee({"aria-hidden":!0},z,{onClick:I(z),open:h})},getTransitionProps:()=>{const F=()=>{v(!1),s&&s()},z=()=>{v(!0),o&&o(),a&&M()};return{onEnter:bP(F,l==null?void 0:l.props.onEnter),onExited:bP(z,l==null?void 0:l.props.onExited)}},rootRef:p,portalRef:C,isTopModal:S,exited:g,hasTransition:y}}const J5e=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function eFe(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?e.contentEditable==="true"||(e.nodeName==="AUDIO"||e.nodeName==="VIDEO"||e.nodeName==="DETAILS")&&e.getAttribute("tabindex")===null?0:e.tabIndex:t}function tFe(e){if(e.tagName!=="INPUT"||e.type!=="radio"||!e.name)return!1;const t=i=>e.ownerDocument.querySelector(`input[type="radio"]${i}`);let r=t(`[name="${e.name}"]:checked`);return r||(r=t(`[name="${e.name}"]`)),r!==e}function rFe(e){return!(e.disabled||e.tagName==="INPUT"&&e.type==="hidden"||tFe(e))}function iFe(e){const t=[],r=[];return Array.from(e.querySelectorAll(J5e)).forEach((i,n)=>{const a=eFe(i);a===-1||!rFe(i)||(a===0?t.push(i):r.push({documentOrder:n,tabIndex:a,node:i}))}),r.sort((i,n)=>i.tabIndex===n.tabIndex?i.documentOrder-n.documentOrder:i.tabIndex-n.tabIndex).map(i=>i.node).concat(t)}function nFe(){return!0}function aFe(e){const{children:t,disableAutoFocus:r=!1,disableEnforceFocus:i=!1,disableRestoreFocus:n=!1,getTabbable:a=iFe,isEnabled:s=nFe,open:o}=e,l=X.useRef(!1),u=X.useRef(null),h=X.useRef(null),c=X.useRef(null),d=X.useRef(null),f=X.useRef(!1),m=X.useRef(null),p=Kh(t.ref,m),g=X.useRef(null);X.useEffect(()=>{!o||!m.current||(f.current=!r)},[r,o]),X.useEffect(()=>{if(!o||!m.current)return;const x=pc(m.current);return m.current.contains(x.activeElement)||(m.current.hasAttribute("tabIndex")||m.current.setAttribute("tabIndex","-1"),f.current&&m.current.focus()),()=>{n||(c.current&&c.current.focus&&(l.current=!0,c.current.focus()),c.current=null)}},[o]),X.useEffect(()=>{if(!o||!m.current)return;const x=pc(m.current),b=E=>{g.current=E,!(i||!s()||E.key!=="Tab")&&x.activeElement===m.current&&E.shiftKey&&(l.current=!0,h.current&&h.current.focus())},_=()=>{const E=m.current;if(E===null)return;if(!x.hasFocus()||!s()||l.current){l.current=!1;return}if(E.contains(x.activeElement)||i&&x.activeElement!==u.current&&x.activeElement!==h.current)return;if(x.activeElement!==d.current)d.current=null;else if(d.current!==null)return;if(!f.current)return;let S=[];if((x.activeElement===u.current||x.activeElement===h.current)&&(S=a(m.current)),S.length>0){var C,M;const P=!!((C=g.current)!=null&&C.shiftKey&&((M=g.current)==null?void 0:M.key)==="Tab"),I=S[0],k=S[S.length-1];typeof I!="string"&&typeof k!="string"&&(P?k.focus():I.focus())}else E.focus()};x.addEventListener("focusin",_),x.addEventListener("keydown",b,!0);const w=setInterval(()=>{x.activeElement&&x.activeElement.tagName==="BODY"&&_()},50);return()=>{clearInterval(w),x.removeEventListener("focusin",_),x.removeEventListener("keydown",b,!0)}},[r,i,n,s,o,a]);const v=x=>{c.current===null&&(c.current=x.relatedTarget),f.current=!0,d.current=x.target;const b=t.props.onFocus;b&&b(x)},y=x=>{c.current===null&&(c.current=x.relatedTarget),f.current=!0};return ct(X.Fragment,{children:[Q("div",{tabIndex:o?0:-1,onFocus:y,ref:u,"data-testid":"sentinelStart"}),X.cloneElement(t,{ref:p,onFocus:v}),Q("div",{tabIndex:o?0:-1,onFocus:y,ref:h,"data-testid":"sentinelEnd"})]})}function sFe(e){return typeof e=="function"?e():e}const oFe=X.forwardRef(function(t,r){const{children:i,container:n,disablePortal:a=!1}=t,[s,o]=X.useState(null),l=Kh(X.isValidElement(i)?i.ref:null,r);if(T_(()=>{a||o(sFe(n)||document.body)},[n,a]),T_(()=>{if(s&&!a)return A_(r,s),()=>{A_(r,null)}},[r,s,a]),a){if(X.isValidElement(i)){const u={ref:l};return X.cloneElement(i,u)}return Q(X.Fragment,{children:i})}return Q(X.Fragment,{children:s&&qO.createPortal(i,s)})}),lFe=e=>e.scrollTop;function kj(e,t){var r,i;const{timeout:n,easing:a,style:s={}}=e;return{duration:(r=s.transitionDuration)!=null?r:typeof n=="number"?n:n[t.mode]||0,easing:(i=s.transitionTimingFunction)!=null?i:typeof a=="object"?a[t.mode]:a,delay:s.transitionDelay}}const uFe=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],cFe={entering:{opacity:1},entered:{opacity:1}},hFe=X.forwardRef(function(t,r){const i=yI(),n={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{addEndListener:a,appear:s=!0,children:o,easing:l,in:u,onEnter:h,onEntered:c,onEntering:d,onExit:f,onExited:m,onExiting:p,style:g,timeout:v=n,TransitionComponent:y=Qse}=t,x=Er(t,uFe),b=X.useRef(null),_=Kh(b,o.ref,r),w=L=>O=>{if(L){const F=b.current;O===void 0?L(F):L(F,O)}},E=w(d),S=w((L,O)=>{lFe(L);const F=kj({style:g,timeout:v,easing:l},{mode:"enter"});L.style.webkitTransition=i.transitions.create("opacity",F),L.style.transition=i.transitions.create("opacity",F),h&&h(L,O)}),C=w(c),M=w(p),P=w(L=>{const O=kj({style:g,timeout:v,easing:l},{mode:"exit"});L.style.webkitTransition=i.transitions.create("opacity",O),L.style.transition=i.transitions.create("opacity",O),f&&f(L)}),I=w(m);return Q(y,Ee({appear:s,in:u,nodeRef:b,onEnter:S,onEntered:C,onEntering:E,onExit:P,onExited:I,onExiting:M,addEndListener:L=>{a&&a(b.current,L)},timeout:v},x,{children:(L,O)=>X.cloneElement(o,Ee({style:Ee({opacity:0,visibility:L==="exited"&&!u?"hidden":void 0},cFe[L],g,o.props.style),ref:_},O))}))}),zX=hFe;function dFe(e){return Zi("MuiBackdrop",e)}fn("MuiBackdrop",["root","invisible"]);const fFe=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],pFe=e=>{const{classes:t,invisible:r}=e;return dn({root:["root",r&&"invisible"]},dFe,t)},mFe=nr("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.invisible&&t.invisible]}})(({ownerState:e})=>Ee({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},e.invisible&&{backgroundColor:"transparent"})),gFe=X.forwardRef(function(t,r){var i,n,a;const s=pn({props:t,name:"MuiBackdrop"}),{children:o,className:l,component:u="div",components:h={},componentsProps:c={},invisible:d=!1,open:f,slotProps:m={},slots:p={},TransitionComponent:g=zX,transitionDuration:v}=s,y=Er(s,fFe),x=Ee({},s,{component:u,invisible:d}),b=pFe(x),_=(i=m.root)!=null?i:c.root;return Q(g,Ee({in:f,timeout:v},y,{children:Q(mFe,Ee({"aria-hidden":!0},_,{as:(n=(a=p.root)!=null?a:h.Root)!=null?n:u,className:fr(b.root,l,_==null?void 0:_.className),ownerState:Ee({},x,_==null?void 0:_.ownerState),classes:b,ref:r,children:o}))}))}),FX=gFe;function vFe(e){return Zi("MuiModal",e)}fn("MuiModal",["root","hidden","backdrop"]);const yFe=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","container","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onBackdropClick","onClose","onTransitionEnter","onTransitionExited","open","slotProps","slots","theme"],xFe=e=>{const{open:t,exited:r,classes:i}=e;return dn({root:["root",!t&&r&&"hidden"],backdrop:["backdrop"]},vFe,i)},bFe=nr("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,!r.open&&r.exited&&t.hidden]}})(({theme:e,ownerState:t})=>Ee({position:"fixed",zIndex:(e.vars||e).zIndex.modal,right:0,bottom:0,top:0,left:0},!t.open&&t.exited&&{visibility:"hidden"})),wFe=nr(FX,{name:"MuiModal",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})({zIndex:-1}),_Fe=X.forwardRef(function(t,r){var i,n,a,s,o,l;const u=pn({name:"MuiModal",props:t}),{BackdropComponent:h=wFe,BackdropProps:c,className:d,closeAfterTransition:f=!1,children:m,container:p,component:g,components:v={},componentsProps:y={},disableAutoFocus:x=!1,disableEnforceFocus:b=!1,disableEscapeKeyDown:_=!1,disablePortal:w=!1,disableRestoreFocus:E=!1,disableScrollLock:S=!1,hideBackdrop:C=!1,keepMounted:M=!1,onBackdropClick:P,open:I,slotProps:k,slots:L}=u,O=Er(u,yFe),F=Ee({},u,{closeAfterTransition:f,disableAutoFocus:x,disableEnforceFocus:b,disableEscapeKeyDown:_,disablePortal:w,disableRestoreFocus:E,disableScrollLock:S,hideBackdrop:C,keepMounted:M}),{getRootProps:z,getBackdropProps:B,getTransitionProps:V,portalRef:R,isTopModal:H,exited:W,hasTransition:te}=Z5e(Ee({},F,{rootRef:r})),G=Ee({},F,{exited:W}),ie=xFe(G),q={};if(m.props.tabIndex===void 0&&(q.tabIndex="-1"),te){const{onEnter:ye,onExited:Ne}=V();q.onEnter=ye,q.onExited=Ne}const le=(i=(n=L==null?void 0:L.root)!=null?n:v.Root)!=null?i:bFe,ae=(a=(s=L==null?void 0:L.backdrop)!=null?s:v.Backdrop)!=null?a:h,Z=(o=k==null?void 0:k.root)!=null?o:y.root,he=(l=k==null?void 0:k.backdrop)!=null?l:y.backdrop,ge=Oj({elementType:le,externalSlotProps:Z,externalForwardedProps:O,getSlotProps:z,additionalProps:{ref:r,as:g},ownerState:G,className:fr(d,Z==null?void 0:Z.className,ie==null?void 0:ie.root,!G.open&&G.exited&&(ie==null?void 0:ie.hidden))}),xe=Oj({elementType:ae,externalSlotProps:he,additionalProps:c,getSlotProps:ye=>B(Ee({},ye,{onClick:Ne=>{P&&P(Ne),ye!=null&&ye.onClick&&ye.onClick(Ne)}})),className:fr(he==null?void 0:he.className,c==null?void 0:c.className,ie==null?void 0:ie.backdrop),ownerState:G});return!M&&!I&&(!te||W)?null:Q(oFe,{ref:R,container:p,disablePortal:w,children:ct(le,Ee({},ge,{children:[!C&&h?Q(ae,Ee({},xe)):null,Q(aFe,{disableEnforceFocus:b,disableAutoFocus:x,disableRestoreFocus:E,isEnabled:H,open:I,children:X.cloneElement(m,q)})]}))})}),SFe=_Fe;function EFe(e){return Zi("MuiPaper",e)}fn("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const MFe=["className","component","elevation","square","variant"],CFe=e=>{const{square:t,elevation:r,variant:i,classes:n}=e,a={root:["root",i,!t&&"rounded",i==="elevation"&&`elevation${r}`]};return dn(a,EFe,n)},AFe=nr("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],!r.square&&t.rounded,r.variant==="elevation"&&t[`elevation${r.elevation}`]]}})(({theme:e,ownerState:t})=>{var r;return Ee({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,transition:e.transitions.create("box-shadow")},!t.square&&{borderRadius:e.shape.borderRadius},t.variant==="outlined"&&{border:`1px solid ${(e.vars||e).palette.divider}`},t.variant==="elevation"&&Ee({boxShadow:(e.vars||e).shadows[t.elevation]},!e.vars&&e.palette.mode==="dark"&&{backgroundImage:`linear-gradient(${uu("#fff",UN(t.elevation))}, ${uu("#fff",UN(t.elevation))})`},e.vars&&{backgroundImage:(r=e.vars.overlays)==null?void 0:r[t.elevation]}))}),TFe=X.forwardRef(function(t,r){const i=pn({props:t,name:"MuiPaper"}),{className:n,component:a="div",elevation:s=1,square:o=!1,variant:l="elevation"}=i,u=Er(i,MFe),h=Ee({},i,{component:a,elevation:s,square:o,variant:l}),c=CFe(h);return Q(AFe,Ee({as:a,ownerState:h,className:fr(c.root,n),ref:r},u))}),UX=TFe;function PFe(e){return Zi("MuiDialog",e)}const DFe=fn("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),wT=DFe,OFe=X.createContext({}),jX=OFe,IFe=["aria-describedby","aria-labelledby","BackdropComponent","BackdropProps","children","className","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClose","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps"],RFe=nr(FX,{name:"MuiDialog",slot:"Backdrop",overrides:(e,t)=>t.backdrop})({zIndex:-1}),kFe=e=>{const{classes:t,scroll:r,maxWidth:i,fullWidth:n,fullScreen:a}=e,s={root:["root"],container:["container",`scroll${zt(r)}`],paper:["paper",`paperScroll${zt(r)}`,`paperWidth${zt(String(i))}`,n&&"paperFullWidth",a&&"paperFullScreen"]};return dn(s,PFe,t)},LFe=nr(SFe,{name:"MuiDialog",slot:"Root",overridesResolver:(e,t)=>t.root})({"@media print":{position:"absolute !important"}}),BFe=nr("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.container,t[`scroll${zt(r.scroll)}`]]}})(({ownerState:e})=>Ee({height:"100%","@media print":{height:"auto"},outline:0},e.scroll==="paper"&&{display:"flex",justifyContent:"center",alignItems:"center"},e.scroll==="body"&&{overflowY:"auto",overflowX:"hidden",textAlign:"center","&:after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}})),NFe=nr(UX,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.paper,t[`scrollPaper${zt(r.scroll)}`],t[`paperWidth${zt(String(r.maxWidth))}`],r.fullWidth&&t.paperFullWidth,r.fullScreen&&t.paperFullScreen]}})(({theme:e,ownerState:t})=>Ee({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},t.scroll==="paper"&&{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},t.scroll==="body"&&{display:"inline-block",verticalAlign:"middle",textAlign:"left"},!t.maxWidth&&{maxWidth:"calc(100% - 64px)"},t.maxWidth==="xs"&&{maxWidth:e.breakpoints.unit==="px"?Math.max(e.breakpoints.values.xs,444):`max(${e.breakpoints.values.xs}${e.breakpoints.unit}, 444px)`,[`&.${wT.paperScrollBody}`]:{[e.breakpoints.down(Math.max(e.breakpoints.values.xs,444)+32*2)]:{maxWidth:"calc(100% - 64px)"}}},t.maxWidth&&t.maxWidth!=="xs"&&{maxWidth:`${e.breakpoints.values[t.maxWidth]}${e.breakpoints.unit}`,[`&.${wT.paperScrollBody}`]:{[e.breakpoints.down(e.breakpoints.values[t.maxWidth]+32*2)]:{maxWidth:"calc(100% - 64px)"}}},t.fullWidth&&{width:"calc(100% - 64px)"},t.fullScreen&&{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${wT.paperScrollBody}`]:{margin:0,maxWidth:"100%"}})),zFe=X.forwardRef(function(t,r){const i=pn({props:t,name:"MuiDialog"}),n=yI(),a={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{"aria-describedby":s,"aria-labelledby":o,BackdropComponent:l,BackdropProps:u,children:h,className:c,disableEscapeKeyDown:d=!1,fullScreen:f=!1,fullWidth:m=!1,maxWidth:p="sm",onBackdropClick:g,onClose:v,open:y,PaperComponent:x=UX,PaperProps:b={},scroll:_="paper",TransitionComponent:w=zX,transitionDuration:E=a,TransitionProps:S}=i,C=Er(i,IFe),M=Ee({},i,{disableEscapeKeyDown:d,fullScreen:f,fullWidth:m,maxWidth:p,scroll:_}),P=kFe(M),I=X.useRef(),k=z=>{I.current=z.target===z.currentTarget},L=z=>{I.current&&(I.current=null,g&&g(z),v&&v(z,"backdropClick"))},O=BH(o),F=X.useMemo(()=>({titleId:O}),[O]);return Q(LFe,Ee({className:fr(P.root,c),closeAfterTransition:!0,components:{Backdrop:RFe},componentsProps:{backdrop:Ee({transitionDuration:E,as:l},u)},disableEscapeKeyDown:d,onClose:v,open:y,ref:r,onClick:L,ownerState:M},C,{children:Q(w,Ee({appear:!0,in:y,timeout:E,role:"presentation"},S,{children:Q(BFe,{className:fr(P.container),onMouseDown:k,ownerState:M,children:Q(NFe,Ee({as:x,elevation:24,role:"dialog","aria-describedby":s,"aria-labelledby":O},b,{className:fr(P.paper,b.className),ownerState:M,children:Q(jX.Provider,{value:F,children:h})}))})}))}))}),FFe=zFe;function UFe(e){return Zi("MuiDialogTitle",e)}const jFe=fn("MuiDialogTitle",["root"]),VFe=jFe,HFe=["className","id"],GFe=e=>{const{classes:t}=e;return dn({root:["root"]},UFe,t)},WFe=nr(O_,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),$Fe=X.forwardRef(function(t,r){const i=pn({props:t,name:"MuiDialogTitle"}),{className:n,id:a}=i,s=Er(i,HFe),o=i,l=GFe(o),{titleId:u=a}=X.useContext(jX);return Q(WFe,Ee({component:"h2",className:fr(l.root,n),ownerState:o,ref:r,variant:"h6",id:a??u},s))}),YFe=$Fe;function qFe(e){return Zi("MuiDialogContent",e)}fn("MuiDialogContent",["root","dividers"]);const XFe=["className","dividers"],QFe=e=>{const{classes:t,dividers:r}=e;return dn({root:["root",r&&"dividers"]},qFe,t)},KFe=nr("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.dividers&&t.dividers]}})(({theme:e,ownerState:t})=>Ee({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px"},t.dividers?{padding:"16px 24px",borderTop:`1px solid ${(e.vars||e).palette.divider}`,borderBottom:`1px solid ${(e.vars||e).palette.divider}`}:{[`.${VFe.root} + &`]:{paddingTop:0}})),ZFe=X.forwardRef(function(t,r){const i=pn({props:t,name:"MuiDialogContent"}),{className:n,dividers:a=!1}=i,s=Er(i,XFe),o=Ee({},i,{dividers:a}),l=QFe(o);return Q(KFe,Ee({className:fr(l.root,n),ownerState:o,ref:r},s))}),JFe=ZFe;function eUe(e){return Zi("MuiDialogActions",e)}fn("MuiDialogActions",["root","spacing"]);const tUe=["className","disableSpacing"],rUe=e=>{const{classes:t,disableSpacing:r}=e;return dn({root:["root",!r&&"spacing"]},eUe,t)},iUe=nr("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,!r.disableSpacing&&t.spacing]}})(({ownerState:e})=>Ee({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!e.disableSpacing&&{"& > :not(:first-of-type)":{marginLeft:8}})),nUe=X.forwardRef(function(t,r){const i=pn({props:t,name:"MuiDialogActions"}),{className:n,disableSpacing:a=!1}=i,s=Er(i,tUe),o=Ee({},i,{disableSpacing:a}),l=rUe(o);return Q(iUe,Ee({className:fr(l.root,n),ownerState:o,ref:r},s))}),aUe=nUe;function sUe(e){return Zi("MuiIconButton",e)}const oUe=fn("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),lUe=oUe,uUe=["edge","children","className","color","disabled","disableFocusRipple","size"],cUe=e=>{const{classes:t,disabled:r,color:i,edge:n,size:a}=e,s={root:["root",r&&"disabled",i!=="default"&&`color${zt(i)}`,n&&`edge${zt(n)}`,`size${zt(a)}`]};return dn(s,sUe,t)},hUe=nr(_I,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.color!=="default"&&t[`color${zt(r.color)}`],r.edge&&t[`edge${zt(r.edge)}`],t[`size${zt(r.size)}`]]}})(({theme:e,ownerState:t})=>Ee({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest})},!t.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:uu(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},t.edge==="start"&&{marginLeft:t.size==="small"?-3:-12},t.edge==="end"&&{marginRight:t.size==="small"?-3:-12}),({theme:e,ownerState:t})=>{var r;const i=(r=(e.vars||e).palette)==null?void 0:r[t.color];return Ee({},t.color==="inherit"&&{color:"inherit"},t.color!=="inherit"&&t.color!=="default"&&Ee({color:i==null?void 0:i.main},!t.disableRipple&&{"&:hover":Ee({},i&&{backgroundColor:e.vars?`rgba(${i.mainChannel} / ${e.vars.palette.action.hoverOpacity})`:uu(i.main,e.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),t.size==="small"&&{padding:5,fontSize:e.typography.pxToRem(18)},t.size==="large"&&{padding:12,fontSize:e.typography.pxToRem(28)},{[`&.${lUe.disabled}`]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled}})}),dUe=X.forwardRef(function(t,r){const i=pn({props:t,name:"MuiIconButton"}),{edge:n=!1,children:a,className:s,color:o="default",disabled:l=!1,disableFocusRipple:u=!1,size:h="medium"}=i,c=Er(i,uUe),d=Ee({},i,{edge:n,color:o,disabled:l,disableFocusRipple:u,size:h}),f=cUe(d);return Q(hUe,Ee({className:fr(f.root,s),centerRipple:!0,focusRipple:!u,disabled:l,ref:r,ownerState:d},c,{children:a}))}),fUe=dUe;var Xk={},VX={exports:{}};(function(e){function t(r){return r&&r.__esModule?r:{default:r}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(VX);var pUe=VX.exports,_T={};function mUe(e){return Zi("MuiSvgIcon",e)}fn("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const gUe=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],vUe=e=>{const{color:t,fontSize:r,classes:i}=e,n={root:["root",t!=="inherit"&&`color${zt(t)}`,`fontSize${zt(r)}`]};return dn(n,mUe,i)},yUe=nr("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.color!=="inherit"&&t[`color${zt(r.color)}`],t[`fontSize${zt(r.fontSize)}`]]}})(({theme:e,ownerState:t})=>{var r,i,n,a,s,o,l,u,h,c,d,f,m;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:t.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(r=e.transitions)==null||(i=r.create)==null?void 0:i.call(r,"fill",{duration:(n=e.transitions)==null||(n=n.duration)==null?void 0:n.shorter}),fontSize:{inherit:"inherit",small:((a=e.typography)==null||(s=a.pxToRem)==null?void 0:s.call(a,20))||"1.25rem",medium:((o=e.typography)==null||(l=o.pxToRem)==null?void 0:l.call(o,24))||"1.5rem",large:((u=e.typography)==null||(h=u.pxToRem)==null?void 0:h.call(u,35))||"2.1875rem"}[t.fontSize],color:(c=(d=(e.vars||e).palette)==null||(d=d[t.color])==null?void 0:d.main)!=null?c:{action:(f=(e.vars||e).palette)==null||(f=f.action)==null?void 0:f.active,disabled:(m=(e.vars||e).palette)==null||(m=m.action)==null?void 0:m.disabled,inherit:void 0}[t.color]}}),HX=X.forwardRef(function(t,r){const i=pn({props:t,name:"MuiSvgIcon"}),{children:n,className:a,color:s="inherit",component:o="svg",fontSize:l="medium",htmlColor:u,inheritViewBox:h=!1,titleAccess:c,viewBox:d="0 0 24 24"}=i,f=Er(i,gUe),m=X.isValidElement(n)&&n.type==="svg",p=Ee({},i,{color:s,component:o,fontSize:l,instanceFontSize:t.fontSize,inheritViewBox:h,viewBox:d,hasSvgAsChild:m}),g={};h||(g.viewBox=d);const v=vUe(p);return ct(yUe,Ee({as:o,className:fr(v.root,a),focusable:"false",color:u,"aria-hidden":c?void 0:!0,role:c?"img":void 0,ref:r},g,f,m&&n.props,{ownerState:p,children:[m?n.props.children:n,c?Q("title",{children:c}):null]}))});HX.muiName="SvgIcon";const Lj=HX;function xUe(e,t){function r(i,n){return Q(Lj,Ee({"data-testid":`${t}Icon`,ref:n},i,{children:e}))}return r.muiName=Lj.muiName,X.memo(X.forwardRef(r))}const bUe={configure:e=>{eI.configure(e)}},wUe=Object.freeze(Object.defineProperty({__proto__:null,capitalize:zt,createChainedFunction:bP,createSvgIcon:xUe,debounce:Qre,deprecatedPropType:Kre,isMuiElement:Zre,ownerDocument:pc,ownerWindow:N2,requirePropFactory:Jre,setRef:A_,unstable_ClassNameGenerator:bUe,unstable_useEnhancedEffect:T_,unstable_useId:BH,unsupportedProp:rie,useControlled:NH,useEventCallback:Jd,useForkRef:Kh,useIsFocusVisible:zH},Symbol.toStringTag,{value:"Module"})),_Ue=Z3(wUe);var Bj;function SUe(){return Bj||(Bj=1,function(e){"use client";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.createSvgIcon}});var t=_Ue}(_T)),_T}const EUe=Z3(zJ);var MUe=pUe;Object.defineProperty(Xk,"__esModule",{value:!0});var GX=Xk.default=void 0,CUe=MUe(SUe()),AUe=EUe,TUe=(0,CUe.default)((0,AUe.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");GX=Xk.default=TUe;const PUe=nr(FFe)(({theme:e})=>({"& .MuiDialogContent-root":{padding:e.spacing(2)},"& .MuiDialogActions-root":{padding:e.spacing(1)}}));function DUe({userName:e,formData:t}){const[r,i]=X.useState(!1),n=()=>{t.name===""||t.email===""||t.message===""?(i(!1),console.log("this was run")):i(!0)},a=()=>{i(!1)};return ct("div",{children:[Q(V_,{onClick:n,type:"submit",children:"Send!"}),ct(PUe,{onClose:a,"aria-labelledby":"customized-dialog-title",open:r,children:[Q(YFe,{sx:{m:0,p:2},id:"customized-dialog-title",children:"Thank you for sending me a message!"}),Q(fUe,{"aria-label":"close",onClick:a,sx:{position:"absolute",right:8,top:8,color:s=>s.palette.grey[500]},children:Q(GX,{})}),Q(JFe,{dividers:!0,children:ct(O_,{gutterBottom:!0,children:[Q("div",{style:{},children:Q("img",{src:z5e,alt:"",style:{width:"100%",height:"15rem"}})}),"Just Kidding!",Q("br",{}),Q("strong",{children:e}),", Shine✨!"]})}),Q(aUe,{children:Q(V_,{autoFocus:!0,onClick:a,children:"Hahaha"})})]})]})}function OUe({username:e,useremail:t,msg:r}){const[i,n]=X.useState({name:"",email:"",message:""}),a=l=>{const{name:u,value:h,email:c,message:d}=l.target;n(f=>({...f,[u]:h}))},s=l=>{l.preventDefault(),console.log("your form was successfully submitted"),console.log(i),o()};function o(){var l={name:i.name,email:i.email,message:i.message};const u="service_gbeqyjq",h="template_cehrdzh";emailjs.send(u,h,l).then(c=>{console.log(c),console.log("Your message sent successfully!!")}).catch(c=>console.log(c))}return ct("form",{className:"form",onSubmit:s,id:"contact-form",children:[Q("input",{type:"text",name:"name",placeholder:"Your Name",ref:e,required:!0,onChange:a}),Q("input",{type:"email",name:"email",id:"",placeholder:"you@somewhere.smth",ref:t,onChange:a,required:!0}),Q("textarea",{name:"message",id:"",cols:"30",rows:"13",placeholder:"Your message",ref:r,onChange:a,required:!0}),Q("div",{className:"btn",children:Q(DUe,{userName:i.name,formData:i})})]})}function IUe(){const e=X.useRef(null),t=X.useRef(null),r=X.useRef(null),i=X.useRef(null),n=X.useRef(null),a=X.useRef(null),s=X.useRef(null),o=X.useRef(null);return X.useEffect(()=>{Ii(e,1,0,"play",-200,100),Ii(e,2,0,"play",100,0,1,1),Ii(t,3,-150),Ii(r,3,150),Ii(i,3,-50),HW(n),Ii(a,1,50),Ii(s,1.2,-50),Ii(o,1.3,0,"play",100)}),Q(ad,{children:ct("div",{className:"background",children:[Q(SI,{}),ct("div",{className:"container",children:[ct("div",{className:"fell",children:[Q("br",{}),ct("h2",{ref:e,children:["I FELL FROM ",Q("span",{className:"colorful",children:"HEAVEN"})]}),Q(BX,{scene:"https://prod.spline.design/VPOrxeUHegxoZgU4/scene.splinecode"})]}),ct("div",{className:"mars",children:[Q("h2",{style:{textAlign:"center",marginBottom:"1rem"},children:Q("span",{className:"colorful ",children:"My Whereabouts"})}),ct("small",{ref:t,className:"small",children:["End of 2002, when I was dropped on earth and ever since want to go back. My friend, I'm stuck in between",Q("span",{className:"colorful",children:" Venus and Mars"})," ",Q("span",{style:{fontSize:"1.1rem"},children:"😑"})]}),ct("small",{ref:i,className:"small",children:[" ","But hey, there is an even easier way to get in touch with me"]})]}),Q("br",{}),ct("div",{className:"touch",children:[ct("div",{className:"contact div",children:[Q("p",{ref:t,children:Q("span",{className:"colorful",children:"Say Helloo!"})}),Q("br",{}),Q("div",{className:"inputs ",children:Q(OUe,{username:a,useremail:s,msg:o})})]}),ct("div",{className:"map",children:[Q("p",{ref:r,children:Q("span",{className:"colorful",children:"Exact Location"})}),Q("div",{className:"mapDiv",children:Q(Rge,{})})]})]}),Q("br",{}),ct("p",{style:{textAlign:"center",marginTop:"1rem"},children:["Made with"," ",Q("span",{ref:n,style:{display:"inline-block",color:"white"},children:"🤍"})," ","in 2023"]}),Q("div",{className:"spacer"})]})]})})}function ST({text:e,subtext:t,onClick:r,refs:i}){return ct("p",{onClick:r,ref:i,children:[e," ",Q("br",{}),Q("sub",{style:{fontSize:"1.2rem",marginLeft:"1rem",color:"black",textShadow:"none"},children:t})]})}function RUe({onClick:e}){const{t}=z1(),r=X.useRef(null),i=X.useRef(null),n=X.useRef(null);return X.useEffect(()=>{Ii(r,1,0,"restart",-50),Ii(i,1,0,"restart",50),Ii(n,1,0,"restart",-50)},[]),ct("div",{className:"flex container text-wrapper ",style:{direction:"ltr"},children:[Q(hf,{to:"/pages/what",className:"link",children:Q(ST,{text:t("HOME_PAGE.WHAT.TITLE"),subtext:t("HOME_PAGE.WHAT.SUB_TITLE"),onClick:e,refs:r})}),Q(hf,{to:"/pages/whome",className:"link",children:Q(ST,{text:t("HOME_PAGE.WHO.TITLE"),subtext:t("HOME_PAGE.WHO.SUB_TITLE"),onClick:e,refs:i})}),Q(hf,{to:"/pages/where",className:"link",children:Q(ST,{text:t("HOME_PAGE.WHERE.TITLE"),subtext:t("HOME_PAGE.WHERE.SUB_TITLE"),onClick:e,refs:n})})]})}function kUe(e){return Zi("MuiToggleButton",e)}const LUe=fn("MuiToggleButton",["root","disabled","selected","standard","primary","secondary","sizeSmall","sizeMedium","sizeLarge"]),Nj=LUe,BUe=["children","className","color","disabled","disableFocusRipple","fullWidth","onChange","onClick","selected","size","value"],NUe=e=>{const{classes:t,fullWidth:r,selected:i,disabled:n,size:a,color:s}=e,o={root:["root",i&&"selected",n&&"disabled",r&&"fullWidth",`size${zt(a)}`,s]};return dn(o,kUe,t)},zUe=nr(_I,{name:"MuiToggleButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`size${zt(r.size)}`]]}})(({theme:e,ownerState:t})=>{let r=t.color==="standard"?e.palette.text.primary:e.palette[t.color].main,i;return e.vars&&(r=t.color==="standard"?e.vars.palette.text.primary:e.vars.palette[t.color].main,i=t.color==="standard"?e.vars.palette.text.primaryChannel:e.vars.palette[t.color].mainChannel),Ee({},e.typography.button,{borderRadius:(e.vars||e).shape.borderRadius,padding:11,border:`1px solid ${(e.vars||e).palette.divider}`,color:(e.vars||e).palette.action.active},t.fullWidth&&{width:"100%"},{[`&.${Nj.disabled}`]:{color:(e.vars||e).palette.action.disabled,border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`},"&:hover":{textDecoration:"none",backgroundColor:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:uu(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Nj.selected}`]:{color:r,backgroundColor:e.vars?`rgba(${i} / ${e.vars.palette.action.selectedOpacity})`:uu(r,e.palette.action.selectedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${i} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:uu(r,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${i} / ${e.vars.palette.action.selectedOpacity})`:uu(r,e.palette.action.selectedOpacity)}}}},t.size==="small"&&{padding:7,fontSize:e.typography.pxToRem(13)},t.size==="large"&&{padding:15,fontSize:e.typography.pxToRem(15)})}),FUe=X.forwardRef(function(t,r){const i=pn({props:t,name:"MuiToggleButton"}),{children:n,className:a,color:s="standard",disabled:o=!1,disableFocusRipple:l=!1,fullWidth:u=!1,onChange:h,onClick:c,selected:d,size:f="medium",value:m}=i,p=Er(i,BUe),g=Ee({},i,{color:s,disabled:o,disableFocusRipple:l,fullWidth:u,size:f}),v=NUe(g),y=x=>{c&&(c(x,m),x.defaultPrevented)||h&&h(x,m)};return Q(zUe,Ee({className:fr(v.root,a),disabled:o,focusRipple:!l,ref:r,onClick:y,onChange:h,value:m,ownerState:g,"aria-pressed":d},p,{children:n}))}),zj=FUe;function UUe(e,t){return t===void 0||e===void 0?!1:Array.isArray(t)?t.indexOf(e)>=0:e===t}function jUe(e){return Zi("MuiToggleButtonGroup",e)}const VUe=fn("MuiToggleButtonGroup",["root","selected","vertical","disabled","grouped","groupedHorizontal","groupedVertical"]),Wu=VUe,HUe=["children","className","color","disabled","exclusive","fullWidth","onChange","orientation","size","value"],GUe=e=>{const{classes:t,orientation:r,fullWidth:i,disabled:n}=e,a={root:["root",r==="vertical"&&"vertical",i&&"fullWidth"],grouped:["grouped",`grouped${zt(r)}`,n&&"disabled"]};return dn(a,jUe,t)},WUe=nr("div",{name:"MuiToggleButtonGroup",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{[`& .${Wu.grouped}`]:t.grouped},{[`& .${Wu.grouped}`]:t[`grouped${zt(r.orientation)}`]},t.root,r.orientation==="vertical"&&t.vertical,r.fullWidth&&t.fullWidth]}})(({ownerState:e,theme:t})=>Ee({display:"inline-flex",borderRadius:(t.vars||t).shape.borderRadius},e.orientation==="vertical"&&{flexDirection:"column"},e.fullWidth&&{width:"100%"},{[`& .${Wu.grouped}`]:Ee({},e.orientation==="horizontal"?{"&:not(:first-of-type)":{marginLeft:-1,borderLeft:"1px solid transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0},"&:not(:last-of-type)":{borderTopRightRadius:0,borderBottomRightRadius:0},[`&.${Wu.selected} + .${Wu.grouped}.${Wu.selected}`]:{borderLeft:0,marginLeft:0}}:{"&:not(:first-of-type)":{marginTop:-1,borderTop:"1px solid transparent",borderTopLeftRadius:0,borderTopRightRadius:0},"&:not(:last-of-type)":{borderBottomLeftRadius:0,borderBottomRightRadius:0},[`&.${Wu.selected} + .${Wu.grouped}.${Wu.selected}`]:{borderTop:0,marginTop:0}})})),$Ue=X.forwardRef(function(t,r){const i=pn({props:t,name:"MuiToggleButtonGroup"}),{children:n,className:a,color:s="standard",disabled:o=!1,exclusive:l=!1,fullWidth:u=!1,onChange:h,orientation:c="horizontal",size:d="medium",value:f}=i,m=Er(i,HUe),p=Ee({},i,{disabled:o,fullWidth:u,orientation:c,size:d}),g=GUe(p),v=(x,b)=>{if(!h)return;const _=f&&f.indexOf(b);let w;f&&_>=0?(w=f.slice(),w.splice(_,1)):w=f?f.concat(b):[b],h(x,w)},y=(x,b)=>{h&&h(x,f===b?null:b)};return Q(WUe,Ee({role:"group",className:fr(g.root,a),ref:r,ownerState:p},m,{children:X.Children.map(n,x=>X.isValidElement(x)?X.cloneElement(x,{className:fr(g.grouped,x.props.className),onChange:l?y:v,selected:x.props.selected===void 0?UUe(x.props.value,f):x.props.selected,size:x.props.size||d,fullWidth:u,color:x.props.color||s,disabled:x.props.disabled||o}):null)}))}),YUe=$Ue;function qUe(){const{i18n:e}=z1(),t=localStorage.getItem("language"),[r,i]=X.useState(t||"en"),n=a=>{e.changeLanguage(a),i(a),localStorage.setItem("language",a)};return X.useEffect(()=>{const a=document.body;r==="fa"?a.classList.add("fa-font"):a.classList.remove("fa-font")},[r]),Q("div",{children:ct(YUe,{value:r,exclusive:!0,onChange:(a,s)=>{n(s)},"aria-label":"Language",color:"primary",size:"small",children:[Q(zj,{value:"en",children:"🇺🇸"}),Q(zj,{value:"fa",children:"🇦🇫"})]})})}function XUe(){const e=X.useRef();function t(i){const n=i.findObjectById("e12b4707-7b84-4470-94c3-71fd766a03b6");e.current=n}function r(){e.current.scale.y=50.3,e.current.scale.z=50.3,e.current.scale.x=50.3,e.current.rotation.z=0,e.current.rotation.x=0,e.current.rotation.y=0,setTimeout(()=>{e.current.rotation.x+=-31,e.current.scale.y+=10,e.current.scale.z+=10,e.current.scale.x+=10},200),e.current.rotation.x+=31,e.current.scale.y-=10,e.current.scale.z-=10,e.current.scale.x-=10}return ct(ad,{children:[Q("div",{className:"toggle",children:ct("div",{className:"container bar",children:[Q(qUe,{}),Q(mG,{})]})}),Q("div",{className:"wrapper",children:Q(BX,{scene:"https://prod.spline.design/479RT2NzHx8EkjTt/scene.splinecode",onLoad:t,className:"spline-iframe"})}),Q(RUe,{onClick:()=>r()})]})}function QUe(e){return Zi("MuiCircularProgress",e)}fn("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const KUe=["className","color","disableShrink","size","style","thickness","value","variant"];let XE=e=>e,Fj,Uj,jj,Vj;const rh=44,ZUe=ud(Fj||(Fj=XE`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),JUe=ud(Uj||(Uj=XE`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),e6e=e=>{const{classes:t,variant:r,color:i,disableShrink:n}=e,a={root:["root",r,`color${zt(i)}`],svg:["svg"],circle:["circle",`circle${zt(r)}`,n&&"circleDisableShrink"]};return dn(a,QUe,t)},t6e=nr("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],t[`color${zt(r.color)}`]]}})(({ownerState:e,theme:t})=>Ee({display:"inline-block"},e.variant==="determinate"&&{transition:t.transitions.create("transform")},e.color!=="inherit"&&{color:(t.vars||t).palette[e.color].main}),({ownerState:e})=>e.variant==="indeterminate"&&av(jj||(jj=XE`
      animation: ${0} 1.4s linear infinite;
    `),ZUe)),r6e=nr("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(e,t)=>t.svg})({display:"block"}),i6e=nr("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.circle,t[`circle${zt(r.variant)}`],r.disableShrink&&t.circleDisableShrink]}})(({ownerState:e,theme:t})=>Ee({stroke:"currentColor"},e.variant==="determinate"&&{transition:t.transitions.create("stroke-dashoffset")},e.variant==="indeterminate"&&{strokeDasharray:"80px, 200px",strokeDashoffset:0}),({ownerState:e})=>e.variant==="indeterminate"&&!e.disableShrink&&av(Vj||(Vj=XE`
      animation: ${0} 1.4s ease-in-out infinite;
    `),JUe)),n6e=X.forwardRef(function(t,r){const i=pn({props:t,name:"MuiCircularProgress"}),{className:n,color:a="primary",disableShrink:s=!1,size:o=40,style:l,thickness:u=3.6,value:h=0,variant:c="indeterminate"}=i,d=Er(i,KUe),f=Ee({},i,{color:a,disableShrink:s,size:o,thickness:u,value:h,variant:c}),m=e6e(f),p={},g={},v={};if(c==="determinate"){const y=2*Math.PI*((rh-u)/2);p.strokeDasharray=y.toFixed(3),v["aria-valuenow"]=Math.round(h),p.strokeDashoffset=`${((100-h)/100*y).toFixed(3)}px`,g.transform="rotate(-90deg)"}return Q(t6e,Ee({className:fr(m.root,n),style:Ee({width:o,height:o},g,l),ownerState:f,ref:r,role:"progressbar"},v,d,{children:Q(r6e,{className:m.svg,ownerState:f,viewBox:`${rh/2} ${rh/2} ${rh} ${rh}`,children:Q(i6e,{className:m.circle,style:p,ownerState:f,cx:rh,cy:rh,r:(rh-u)/2,fill:"none",strokeWidth:u})})}))}),a6e=n6e;function s6e(){const[e,t]=X.useState(!0);window.onload=()=>{t(!1)};let r=localStorage.getItem("isDark");return X.useEffect(()=>{const i=document.body;r==="true"?i.classList.add("dark-mode"):i.classList.remove("dark-mode")},[]),Q(ad,{children:e?Q("div",{className:"center",children:Q(a6e,{})}):ct(Bre,{children:[ct(Dre,{children:[Q(O0,{path:"/pages/whome",element:Q(hce,{})}),Q(O0,{path:"/pages/what",element:Q(Oge,{})}),Q(O0,{exact:!0,path:"/pages/where",element:Q(IUe,{})}),Q(O0,{exact:!0,path:"/",element:Q(XUe,{})})]}),Q(Yre,{})]})})}const o6e={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){console&&console[e]&&console[e].apply(console,t)}};class r2{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(t,r)}init(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=r.prefix||"i18next:",this.logger=t||o6e,this.options=r,this.debug=r.debug}log(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return this.forward(r,"log","",!0)}warn(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return this.forward(r,"warn","",!0)}error(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return this.forward(r,"error","")}deprecate(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return this.forward(r,"warn","WARNING DEPRECATED: ",!0)}forward(t,r,i,n){return n&&!this.debug?null:(typeof t[0]=="string"&&(t[0]=`${i}${this.prefix} ${t[0]}`),this.logger[r](t))}create(t){return new r2(this.logger,{prefix:`${this.prefix}:${t}:`,...this.options})}clone(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new r2(this.logger,t)}}var fu=new r2;class QE{constructor(){this.observers={}}on(t,r){return t.split(" ").forEach(i=>{this.observers[i]=this.observers[i]||[],this.observers[i].push(r)}),this}off(t,r){if(this.observers[t]){if(!r){delete this.observers[t];return}this.observers[t]=this.observers[t].filter(i=>i!==r)}}emit(t){for(var r=arguments.length,i=new Array(r>1?r-1:0),n=1;n<r;n++)i[n-1]=arguments[n];this.observers[t]&&[].concat(this.observers[t]).forEach(s=>{s(...i)}),this.observers["*"]&&[].concat(this.observers["*"]).forEach(s=>{s.apply(s,[t,...i])})}}function E0(){let e,t;const r=new Promise((i,n)=>{e=i,t=n});return r.resolve=e,r.reject=t,r}function Hj(e){return e==null?"":""+e}function l6e(e,t,r){e.forEach(i=>{t[i]&&(r[i]=t[i])})}function Qk(e,t,r){function i(s){return s&&s.indexOf("###")>-1?s.replace(/###/g,"."):s}function n(){return!e||typeof e=="string"}const a=typeof t!="string"?[].concat(t):t.split(".");for(;a.length>1;){if(n())return{};const s=i(a.shift());!e[s]&&r&&(e[s]=new r),Object.prototype.hasOwnProperty.call(e,s)?e=e[s]:e={}}return n()?{}:{obj:e,k:i(a.shift())}}function Gj(e,t,r){const{obj:i,k:n}=Qk(e,t,Object);i[n]=r}function u6e(e,t,r,i){const{obj:n,k:a}=Qk(e,t,Object);n[a]=n[a]||[],i&&(n[a]=n[a].concat(r)),i||n[a].push(r)}function i2(e,t){const{obj:r,k:i}=Qk(e,t);if(r)return r[i]}function c6e(e,t,r){const i=i2(e,r);return i!==void 0?i:i2(t,r)}function WX(e,t,r){for(const i in t)i!=="__proto__"&&i!=="constructor"&&(i in e?typeof e[i]=="string"||e[i]instanceof String||typeof t[i]=="string"||t[i]instanceof String?r&&(e[i]=t[i]):WX(e[i],t[i],r):e[i]=t[i]);return e}function tm(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var h6e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function d6e(e){return typeof e=="string"?e.replace(/[&<>"'\/]/g,t=>h6e[t]):e}const f6e=[" ",",","?","!",";"];function p6e(e,t,r){t=t||"",r=r||"";const i=f6e.filter(s=>t.indexOf(s)<0&&r.indexOf(s)<0);if(i.length===0)return!0;const n=new RegExp(`(${i.map(s=>s==="?"?"\\?":s).join("|")})`);let a=!n.test(e);if(!a){const s=e.indexOf(r);s>0&&!n.test(e.substring(0,s))&&(a=!0)}return a}function n2(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!e)return;if(e[t])return e[t];const i=t.split(r);let n=e;for(let a=0;a<i.length;++a){if(!n||typeof n[i[a]]=="string"&&a+1<i.length)return;if(n[i[a]]===void 0){let s=2,o=i.slice(a,a+s).join(r),l=n[o];for(;l===void 0&&i.length>a+s;)s++,o=i.slice(a,a+s).join(r),l=n[o];if(l===void 0)return;if(l===null)return null;if(t.endsWith(o)){if(typeof l=="string")return l;if(o&&typeof l[o]=="string")return l[o]}const u=i.slice(a+s).join(r);return u?n2(l,u,r):void 0}n=n[i[a]]}return n}function a2(e){return e&&e.indexOf("_")>0?e.replace("_","-"):e}class Wj extends QE{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=t||{},this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}removeNamespaces(t){const r=this.options.ns.indexOf(t);r>-1&&this.options.ns.splice(r,1)}getResource(t,r,i){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const a=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,s=n.ignoreJSONStructure!==void 0?n.ignoreJSONStructure:this.options.ignoreJSONStructure;let o=[t,r];i&&typeof i!="string"&&(o=o.concat(i)),i&&typeof i=="string"&&(o=o.concat(a?i.split(a):i)),t.indexOf(".")>-1&&(o=t.split("."));const l=i2(this.data,o);return l||!s||typeof i!="string"?l:n2(this.data&&this.data[t]&&this.data[t][r],i,a)}addResource(t,r,i,n){let a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const s=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator;let o=[t,r];i&&(o=o.concat(s?i.split(s):i)),t.indexOf(".")>-1&&(o=t.split("."),n=r,r=o[1]),this.addNamespaces(r),Gj(this.data,o,n),a.silent||this.emit("added",t,r,i,n)}addResources(t,r,i){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const a in i)(typeof i[a]=="string"||Object.prototype.toString.apply(i[a])==="[object Array]")&&this.addResource(t,r,a,i[a],{silent:!0});n.silent||this.emit("added",t,r,i)}addResourceBundle(t,r,i,n,a){let s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1},o=[t,r];t.indexOf(".")>-1&&(o=t.split("."),n=i,i=r,r=o[1]),this.addNamespaces(r);let l=i2(this.data,o)||{};n?WX(l,i,a):l={...l,...i},Gj(this.data,o,l),s.silent||this.emit("added",t,r,i)}removeResourceBundle(t,r){this.hasResourceBundle(t,r)&&delete this.data[t][r],this.removeNamespaces(r),this.emit("removed",t,r)}hasResourceBundle(t,r){return this.getResource(t,r)!==void 0}getResourceBundle(t,r){return r||(r=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(t,r)}:this.getResource(t,r)}getDataByLanguage(t){return this.data[t]}hasLanguageSomeTranslations(t){const r=this.getDataByLanguage(t);return!!(r&&Object.keys(r)||[]).find(n=>r[n]&&Object.keys(r[n]).length>0)}toJSON(){return this.data}}var $X={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,r,i,n){return e.forEach(a=>{this.processors[a]&&(t=this.processors[a].process(t,r,i,n))}),t}};const $j={};class s2 extends QE{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),l6e(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,this),this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=fu.create("translator")}changeLanguage(t){t&&(this.language=t)}exists(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(t==null)return!1;const i=this.resolve(t,r);return i&&i.res!==void 0}extractFromKey(t,r){let i=r.nsSeparator!==void 0?r.nsSeparator:this.options.nsSeparator;i===void 0&&(i=":");const n=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator;let a=r.ns||this.options.defaultNS||[];const s=i&&t.indexOf(i)>-1,o=!this.options.userDefinedKeySeparator&&!r.keySeparator&&!this.options.userDefinedNsSeparator&&!r.nsSeparator&&!p6e(t,i,n);if(s&&!o){const l=t.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:t,namespaces:a};const u=t.split(i);(i!==n||i===n&&this.options.ns.indexOf(u[0])>-1)&&(a=u.shift()),t=u.join(n)}return typeof a=="string"&&(a=[a]),{key:t,namespaces:a}}translate(t,r,i){if(typeof r!="object"&&this.options.overloadTranslationOptionHandler&&(r=this.options.overloadTranslationOptionHandler(arguments)),typeof r=="object"&&(r={...r}),r||(r={}),t==null)return"";Array.isArray(t)||(t=[String(t)]);const n=r.returnDetails!==void 0?r.returnDetails:this.options.returnDetails,a=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,{key:s,namespaces:o}=this.extractFromKey(t[t.length-1],r),l=o[o.length-1],u=r.lng||this.language,h=r.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(u&&u.toLowerCase()==="cimode"){if(h){const b=r.nsSeparator||this.options.nsSeparator;return n?{res:`${l}${b}${s}`,usedKey:s,exactUsedKey:s,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(r)}:`${l}${b}${s}`}return n?{res:s,usedKey:s,exactUsedKey:s,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(r)}:s}const c=this.resolve(t,r);let d=c&&c.res;const f=c&&c.usedKey||s,m=c&&c.exactUsedKey||s,p=Object.prototype.toString.apply(d),g=["[object Number]","[object Function]","[object RegExp]"],v=r.joinArrays!==void 0?r.joinArrays:this.options.joinArrays,y=!this.i18nFormat||this.i18nFormat.handleAsObject;if(y&&d&&(typeof d!="string"&&typeof d!="boolean"&&typeof d!="number")&&g.indexOf(p)<0&&!(typeof v=="string"&&p==="[object Array]")){if(!r.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const b=this.options.returnedObjectHandler?this.options.returnedObjectHandler(f,d,{...r,ns:o}):`key '${s} (${this.language})' returned an object instead of string.`;return n?(c.res=b,c.usedParams=this.getUsedParamsDetails(r),c):b}if(a){const b=p==="[object Array]",_=b?[]:{},w=b?m:f;for(const E in d)if(Object.prototype.hasOwnProperty.call(d,E)){const S=`${w}${a}${E}`;_[E]=this.translate(S,{...r,joinArrays:!1,ns:o}),_[E]===S&&(_[E]=d[E])}d=_}}else if(y&&typeof v=="string"&&p==="[object Array]")d=d.join(v),d&&(d=this.extendTranslation(d,t,r,i));else{let b=!1,_=!1;const w=r.count!==void 0&&typeof r.count!="string",E=s2.hasDefaultValue(r),S=w?this.pluralResolver.getSuffix(u,r.count,r):"",C=r.ordinal&&w?this.pluralResolver.getSuffix(u,r.count,{ordinal:!1}):"",M=r[`defaultValue${S}`]||r[`defaultValue${C}`]||r.defaultValue;!this.isValidLookup(d)&&E&&(b=!0,d=M),this.isValidLookup(d)||(_=!0,d=s);const I=(r.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&_?void 0:d,k=E&&M!==d&&this.options.updateMissing;if(_||b||k){if(this.logger.log(k?"updateKey":"missingKey",u,l,s,k?M:d),a){const z=this.resolve(s,{...r,keySeparator:!1});z&&z.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let L=[];const O=this.languageUtils.getFallbackCodes(this.options.fallbackLng,r.lng||this.language);if(this.options.saveMissingTo==="fallback"&&O&&O[0])for(let z=0;z<O.length;z++)L.push(O[z]);else this.options.saveMissingTo==="all"?L=this.languageUtils.toResolveHierarchy(r.lng||this.language):L.push(r.lng||this.language);const F=(z,B,V)=>{const R=E&&V!==d?V:I;this.options.missingKeyHandler?this.options.missingKeyHandler(z,l,B,R,k,r):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(z,l,B,R,k,r),this.emit("missingKey",z,l,B,d)};this.options.saveMissing&&(this.options.saveMissingPlurals&&w?L.forEach(z=>{this.pluralResolver.getSuffixes(z,r).forEach(B=>{F([z],s+B,r[`defaultValue${B}`]||M)})}):F(L,s,M))}d=this.extendTranslation(d,t,r,c,i),_&&d===s&&this.options.appendNamespaceToMissingKey&&(d=`${l}:${s}`),(_||b)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?d=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}:${s}`:s,b?d:void 0):d=this.options.parseMissingKeyHandler(d))}return n?(c.res=d,c.usedParams=this.getUsedParamsDetails(r),c):d}extendTranslation(t,r,i,n,a){var s=this;if(this.i18nFormat&&this.i18nFormat.parse)t=this.i18nFormat.parse(t,{...this.options.interpolation.defaultVariables,...i},i.lng||this.language||n.usedLng,n.usedNS,n.usedKey,{resolved:n});else if(!i.skipInterpolation){i.interpolation&&this.interpolator.init({...i,interpolation:{...this.options.interpolation,...i.interpolation}});const u=typeof t=="string"&&(i&&i.interpolation&&i.interpolation.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let h;if(u){const d=t.match(this.interpolator.nestingRegexp);h=d&&d.length}let c=i.replace&&typeof i.replace!="string"?i.replace:i;if(this.options.interpolation.defaultVariables&&(c={...this.options.interpolation.defaultVariables,...c}),t=this.interpolator.interpolate(t,c,i.lng||this.language,i),u){const d=t.match(this.interpolator.nestingRegexp),f=d&&d.length;h<f&&(i.nest=!1)}!i.lng&&this.options.compatibilityAPI!=="v1"&&n&&n.res&&(i.lng=n.usedLng),i.nest!==!1&&(t=this.interpolator.nest(t,function(){for(var d=arguments.length,f=new Array(d),m=0;m<d;m++)f[m]=arguments[m];return a&&a[0]===f[0]&&!i.context?(s.logger.warn(`It seems you are nesting recursively key: ${f[0]} in key: ${r[0]}`),null):s.translate(...f,r)},i)),i.interpolation&&this.interpolator.reset()}const o=i.postProcess||this.options.postProcess,l=typeof o=="string"?[o]:o;return t!=null&&l&&l.length&&i.applyPostProcessor!==!1&&(t=$X.handle(l,t,r,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...n,usedParams:this.getUsedParamsDetails(i)},...i}:i,this)),t}resolve(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i,n,a,s,o;return typeof t=="string"&&(t=[t]),t.forEach(l=>{if(this.isValidLookup(i))return;const u=this.extractFromKey(l,r),h=u.key;n=h;let c=u.namespaces;this.options.fallbackNS&&(c=c.concat(this.options.fallbackNS));const d=r.count!==void 0&&typeof r.count!="string",f=d&&!r.ordinal&&r.count===0&&this.pluralResolver.shouldUseIntlApi(),m=r.context!==void 0&&(typeof r.context=="string"||typeof r.context=="number")&&r.context!=="",p=r.lngs?r.lngs:this.languageUtils.toResolveHierarchy(r.lng||this.language,r.fallbackLng);c.forEach(g=>{this.isValidLookup(i)||(o=g,!$j[`${p[0]}-${g}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(o)&&($j[`${p[0]}-${g}`]=!0,this.logger.warn(`key "${n}" for languages "${p.join(", ")}" won't get resolved as namespace "${o}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),p.forEach(v=>{if(this.isValidLookup(i))return;s=v;const y=[h];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(y,h,v,g,r);else{let b;d&&(b=this.pluralResolver.getSuffix(v,r.count,r));const _=`${this.options.pluralSeparator}zero`,w=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(d&&(y.push(h+b),r.ordinal&&b.indexOf(w)===0&&y.push(h+b.replace(w,this.options.pluralSeparator)),f&&y.push(h+_)),m){const E=`${h}${this.options.contextSeparator}${r.context}`;y.push(E),d&&(y.push(E+b),r.ordinal&&b.indexOf(w)===0&&y.push(E+b.replace(w,this.options.pluralSeparator)),f&&y.push(E+_))}}let x;for(;x=y.pop();)this.isValidLookup(i)||(a=x,i=this.getResource(v,g,x,r))}))})}),{res:i,usedKey:n,exactUsedKey:a,usedLng:s,usedNS:o}}isValidLookup(t){return t!==void 0&&!(!this.options.returnNull&&t===null)&&!(!this.options.returnEmptyString&&t==="")}getResource(t,r,i){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(t,r,i,n):this.resourceStore.getResource(t,r,i,n)}getUsedParamsDetails(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],i=t.replace&&typeof t.replace!="string";let n=i?t.replace:t;if(i&&typeof t.count<"u"&&(n.count=t.count),this.options.interpolation.defaultVariables&&(n={...this.options.interpolation.defaultVariables,...n}),!i){n={...n};for(const a of r)delete n[a]}return n}static hasDefaultValue(t){const r="defaultValue";for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i)&&r===i.substring(0,r.length)&&t[i]!==void 0)return!0;return!1}}function ET(e){return e.charAt(0).toUpperCase()+e.slice(1)}class Yj{constructor(t){this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=fu.create("languageUtils")}getScriptPartFromCode(t){if(t=a2(t),!t||t.indexOf("-")<0)return null;const r=t.split("-");return r.length===2||(r.pop(),r[r.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(r.join("-"))}getLanguagePartFromCode(t){if(t=a2(t),!t||t.indexOf("-")<0)return t;const r=t.split("-");return this.formatLanguageCode(r[0])}formatLanguageCode(t){if(typeof t=="string"&&t.indexOf("-")>-1){const r=["hans","hant","latn","cyrl","cans","mong","arab"];let i=t.split("-");return this.options.lowerCaseLng?i=i.map(n=>n.toLowerCase()):i.length===2?(i[0]=i[0].toLowerCase(),i[1]=i[1].toUpperCase(),r.indexOf(i[1].toLowerCase())>-1&&(i[1]=ET(i[1].toLowerCase()))):i.length===3&&(i[0]=i[0].toLowerCase(),i[1].length===2&&(i[1]=i[1].toUpperCase()),i[0]!=="sgn"&&i[2].length===2&&(i[2]=i[2].toUpperCase()),r.indexOf(i[1].toLowerCase())>-1&&(i[1]=ET(i[1].toLowerCase())),r.indexOf(i[2].toLowerCase())>-1&&(i[2]=ET(i[2].toLowerCase()))),i.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}isSupportedCode(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}getBestMatchFromCodes(t){if(!t)return null;let r;return t.forEach(i=>{if(r)return;const n=this.formatLanguageCode(i);(!this.options.supportedLngs||this.isSupportedCode(n))&&(r=n)}),!r&&this.options.supportedLngs&&t.forEach(i=>{if(r)return;const n=this.getLanguagePartFromCode(i);if(this.isSupportedCode(n))return r=n;r=this.options.supportedLngs.find(a=>{if(a===n)return a;if(!(a.indexOf("-")<0&&n.indexOf("-")<0)&&a.indexOf(n)===0)return a})}),r||(r=this.getFallbackCodes(this.options.fallbackLng)[0]),r}getFallbackCodes(t,r){if(!t)return[];if(typeof t=="function"&&(t=t(r)),typeof t=="string"&&(t=[t]),Object.prototype.toString.apply(t)==="[object Array]")return t;if(!r)return t.default||[];let i=t[r];return i||(i=t[this.getScriptPartFromCode(r)]),i||(i=t[this.formatLanguageCode(r)]),i||(i=t[this.getLanguagePartFromCode(r)]),i||(i=t.default),i||[]}toResolveHierarchy(t,r){const i=this.getFallbackCodes(r||this.options.fallbackLng||[],t),n=[],a=s=>{s&&(this.isSupportedCode(s)?n.push(s):this.logger.warn(`rejecting language code not found in supportedLngs: ${s}`))};return typeof t=="string"&&(t.indexOf("-")>-1||t.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&a(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&a(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&a(this.getLanguagePartFromCode(t))):typeof t=="string"&&a(this.formatLanguageCode(t)),i.forEach(s=>{n.indexOf(s)<0&&a(this.formatLanguageCode(s))}),n}}let m6e=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],g6e={1:function(e){return+(e>1)},2:function(e){return+(e!=1)},3:function(e){return 0},4:function(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},5:function(e){return e==0?0:e==1?1:e==2?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5},6:function(e){return e==1?0:e>=2&&e<=4?1:2},7:function(e){return e==1?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},8:function(e){return e==1?0:e==2?1:e!=8&&e!=11?2:3},9:function(e){return+(e>=2)},10:function(e){return e==1?0:e==2?1:e<7?2:e<11?3:4},11:function(e){return e==1||e==11?0:e==2||e==12?1:e>2&&e<20?2:3},12:function(e){return+(e%10!=1||e%100==11)},13:function(e){return+(e!==0)},14:function(e){return e==1?0:e==2?1:e==3?2:3},15:function(e){return e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2},16:function(e){return e%10==1&&e%100!=11?0:e!==0?1:2},17:function(e){return e==1||e%10==1&&e%100!=11?0:1},18:function(e){return e==0?0:e==1?1:2},19:function(e){return e==1?0:e==0||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3},20:function(e){return e==1?0:e==0||e%100>0&&e%100<20?1:2},21:function(e){return e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0},22:function(e){return e==1?0:e==2?1:(e<0||e>10)&&e%10==0?2:3}};const v6e=["v1","v2","v3"],y6e=["v4"],qj={zero:0,one:1,two:2,few:3,many:4,other:5};function x6e(){const e={};return m6e.forEach(t=>{t.lngs.forEach(r=>{e[r]={numbers:t.nr,plurals:g6e[t.fc]}})}),e}class b6e{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=t,this.options=r,this.logger=fu.create("pluralResolver"),(!this.options.compatibilityJSON||y6e.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=x6e()}addRule(t,r){this.rules[t]=r}getRule(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(a2(t),{type:r.ordinal?"ordinal":"cardinal"})}catch{return}return this.rules[t]||this.rules[this.languageUtils.getLanguagePartFromCode(t)]}needsPlural(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=this.getRule(t,r);return this.shouldUseIntlApi()?i&&i.resolvedOptions().pluralCategories.length>1:i&&i.numbers.length>1}getPluralFormsOfKey(t,r){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(t,i).map(n=>`${r}${n}`)}getSuffixes(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=this.getRule(t,r);return i?this.shouldUseIntlApi()?i.resolvedOptions().pluralCategories.sort((n,a)=>qj[n]-qj[a]).map(n=>`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${n}`):i.numbers.map(n=>this.getSuffix(t,n,r)):[]}getSuffix(t,r){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const n=this.getRule(t,i);return n?this.shouldUseIntlApi()?`${this.options.prepend}${i.ordinal?`ordinal${this.options.prepend}`:""}${n.select(r)}`:this.getSuffixRetroCompatible(n,r):(this.logger.warn(`no plural rule found for: ${t}`),"")}getSuffixRetroCompatible(t,r){const i=t.noAbs?t.plurals(r):t.plurals(Math.abs(r));let n=t.numbers[i];this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1&&(n===2?n="plural":n===1&&(n=""));const a=()=>this.options.prepend&&n.toString()?this.options.prepend+n.toString():n.toString();return this.options.compatibilityJSON==="v1"?n===1?"":typeof n=="number"?`_plural_${n.toString()}`:a():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1?a():this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString()}shouldUseIntlApi(){return!v6e.includes(this.options.compatibilityJSON)}}function Xj(e,t,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,a=c6e(e,t,r);return!a&&n&&typeof r=="string"&&(a=n2(e,r,i),a===void 0&&(a=n2(t,r,i))),a}class w6e{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=fu.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||(r=>r),this.init(t)}init(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};t.interpolation||(t.interpolation={escapeValue:!0});const r=t.interpolation;this.escape=r.escape!==void 0?r.escape:d6e,this.escapeValue=r.escapeValue!==void 0?r.escapeValue:!0,this.useRawValueToEscape=r.useRawValueToEscape!==void 0?r.useRawValueToEscape:!1,this.prefix=r.prefix?tm(r.prefix):r.prefixEscaped||"{{",this.suffix=r.suffix?tm(r.suffix):r.suffixEscaped||"}}",this.formatSeparator=r.formatSeparator?r.formatSeparator:r.formatSeparator||",",this.unescapePrefix=r.unescapeSuffix?"":r.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":r.unescapeSuffix||"",this.nestingPrefix=r.nestingPrefix?tm(r.nestingPrefix):r.nestingPrefixEscaped||tm("$t("),this.nestingSuffix=r.nestingSuffix?tm(r.nestingSuffix):r.nestingSuffixEscaped||tm(")"),this.nestingOptionsSeparator=r.nestingOptionsSeparator?r.nestingOptionsSeparator:r.nestingOptionsSeparator||",",this.maxReplaces=r.maxReplaces?r.maxReplaces:1e3,this.alwaysFormat=r.alwaysFormat!==void 0?r.alwaysFormat:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const t=`${this.prefix}(.+?)${this.suffix}`;this.regexp=new RegExp(t,"g");const r=`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`;this.regexpUnescape=new RegExp(r,"g");const i=`${this.nestingPrefix}(.+?)${this.nestingSuffix}`;this.nestingRegexp=new RegExp(i,"g")}interpolate(t,r,i,n){let a,s,o;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function u(m){return m.replace(/\$/g,"$$$$")}const h=m=>{if(m.indexOf(this.formatSeparator)<0){const y=Xj(r,l,m,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(y,void 0,i,{...n,...r,interpolationkey:m}):y}const p=m.split(this.formatSeparator),g=p.shift().trim(),v=p.join(this.formatSeparator).trim();return this.format(Xj(r,l,g,this.options.keySeparator,this.options.ignoreJSONStructure),v,i,{...n,...r,interpolationkey:g})};this.resetRegExp();const c=n&&n.missingInterpolationHandler||this.options.missingInterpolationHandler,d=n&&n.interpolation&&n.interpolation.skipOnVariables!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:m=>u(m)},{regex:this.regexp,safeValue:m=>this.escapeValue?u(this.escape(m)):u(m)}].forEach(m=>{for(o=0;a=m.regex.exec(t);){const p=a[1].trim();if(s=h(p),s===void 0)if(typeof c=="function"){const v=c(t,a,n);s=typeof v=="string"?v:""}else if(n&&Object.prototype.hasOwnProperty.call(n,p))s="";else if(d){s=a[0];continue}else this.logger.warn(`missed to pass in variable ${p} for interpolating ${t}`),s="";else typeof s!="string"&&!this.useRawValueToEscape&&(s=Hj(s));const g=m.safeValue(s);if(t=t.replace(a[0],g),d?(m.regex.lastIndex+=s.length,m.regex.lastIndex-=a[0].length):m.regex.lastIndex=0,o++,o>=this.maxReplaces)break}}),t}nest(t,r){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n,a,s;function o(l,u){const h=this.nestingOptionsSeparator;if(l.indexOf(h)<0)return l;const c=l.split(new RegExp(`${h}[ ]*{`));let d=`{${c[1]}`;l=c[0],d=this.interpolate(d,s);const f=d.match(/'/g),m=d.match(/"/g);(f&&f.length%2===0&&!m||m.length%2!==0)&&(d=d.replace(/'/g,'"'));try{s=JSON.parse(d),u&&(s={...u,...s})}catch(p){return this.logger.warn(`failed parsing options string in nesting for key ${l}`,p),`${l}${h}${d}`}return delete s.defaultValue,l}for(;n=this.nestingRegexp.exec(t);){let l=[];s={...i},s=s.replace&&typeof s.replace!="string"?s.replace:s,s.applyPostProcessor=!1,delete s.defaultValue;let u=!1;if(n[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(n[1])){const h=n[1].split(this.formatSeparator).map(c=>c.trim());n[1]=h.shift(),l=h,u=!0}if(a=r(o.call(this,n[1].trim(),s),s),a&&n[0]===t&&typeof a!="string")return a;typeof a!="string"&&(a=Hj(a)),a||(this.logger.warn(`missed to resolve ${n[1]} for nesting ${t}`),a=""),u&&(a=l.reduce((h,c)=>this.format(h,c,i.lng,{...i,interpolationkey:n[1].trim()}),a.trim())),t=t.replace(n[0],a),this.regexp.lastIndex=0}return t}}function _6e(e){let t=e.toLowerCase().trim();const r={};if(e.indexOf("(")>-1){const i=e.split("(");t=i[0].toLowerCase().trim();const n=i[1].substring(0,i[1].length-1);t==="currency"&&n.indexOf(":")<0?r.currency||(r.currency=n.trim()):t==="relativetime"&&n.indexOf(":")<0?r.range||(r.range=n.trim()):n.split(";").forEach(s=>{if(!s)return;const[o,...l]=s.split(":"),u=l.join(":").trim().replace(/^'+|'+$/g,"");r[o.trim()]||(r[o.trim()]=u),u==="false"&&(r[o.trim()]=!1),u==="true"&&(r[o.trim()]=!0),isNaN(u)||(r[o.trim()]=parseInt(u,10))})}return{formatName:t,formatOptions:r}}function rm(e){const t={};return function(i,n,a){const s=n+JSON.stringify(a);let o=t[s];return o||(o=e(a2(n),a),t[s]=o),o(i)}}class S6e{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=fu.create("formatter"),this.options=t,this.formats={number:rm((r,i)=>{const n=new Intl.NumberFormat(r,{...i});return a=>n.format(a)}),currency:rm((r,i)=>{const n=new Intl.NumberFormat(r,{...i,style:"currency"});return a=>n.format(a)}),datetime:rm((r,i)=>{const n=new Intl.DateTimeFormat(r,{...i});return a=>n.format(a)}),relativetime:rm((r,i)=>{const n=new Intl.RelativeTimeFormat(r,{...i});return a=>n.format(a,i.range||"day")}),list:rm((r,i)=>{const n=new Intl.ListFormat(r,{...i});return a=>n.format(a)})},this.init(t)}init(t){const i=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}}).interpolation;this.formatSeparator=i.formatSeparator?i.formatSeparator:i.formatSeparator||","}add(t,r){this.formats[t.toLowerCase().trim()]=r}addCached(t,r){this.formats[t.toLowerCase().trim()]=rm(r)}format(t,r,i){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return r.split(this.formatSeparator).reduce((o,l)=>{const{formatName:u,formatOptions:h}=_6e(l);if(this.formats[u]){let c=o;try{const d=n&&n.formatParams&&n.formatParams[n.interpolationkey]||{},f=d.locale||d.lng||n.locale||n.lng||i;c=this.formats[u](o,f,{...h,...n,...d})}catch(d){this.logger.warn(d)}return c}else this.logger.warn(`there was no format function for ${u}`);return o},t)}}function E6e(e,t){e.pending[t]!==void 0&&(delete e.pending[t],e.pendingCount--)}class M6e extends QE{constructor(t,r,i){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=t,this.store=r,this.services=i,this.languageUtils=i.languageUtils,this.options=n,this.logger=fu.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=n.maxParallelReads||10,this.readingCalls=0,this.maxRetries=n.maxRetries>=0?n.maxRetries:5,this.retryTimeout=n.retryTimeout>=1?n.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(i,n.backend,n)}queueLoad(t,r,i,n){const a={},s={},o={},l={};return t.forEach(u=>{let h=!0;r.forEach(c=>{const d=`${u}|${c}`;!i.reload&&this.store.hasResourceBundle(u,c)?this.state[d]=2:this.state[d]<0||(this.state[d]===1?s[d]===void 0&&(s[d]=!0):(this.state[d]=1,h=!1,s[d]===void 0&&(s[d]=!0),a[d]===void 0&&(a[d]=!0),l[c]===void 0&&(l[c]=!0)))}),h||(o[u]=!0)}),(Object.keys(a).length||Object.keys(s).length)&&this.queue.push({pending:s,pendingCount:Object.keys(s).length,loaded:{},errors:[],callback:n}),{toLoad:Object.keys(a),pending:Object.keys(s),toLoadLanguages:Object.keys(o),toLoadNamespaces:Object.keys(l)}}loaded(t,r,i){const n=t.split("|"),a=n[0],s=n[1];r&&this.emit("failedLoading",a,s,r),i&&this.store.addResourceBundle(a,s,i),this.state[t]=r?-1:2;const o={};this.queue.forEach(l=>{u6e(l.loaded,[a],s),E6e(l,t),r&&l.errors.push(r),l.pendingCount===0&&!l.done&&(Object.keys(l.loaded).forEach(u=>{o[u]||(o[u]={});const h=l.loaded[u];h.length&&h.forEach(c=>{o[u][c]===void 0&&(o[u][c]=!0)})}),l.done=!0,l.errors.length?l.callback(l.errors):l.callback())}),this.emit("loaded",o),this.queue=this.queue.filter(l=>!l.done)}read(t,r,i){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,s=arguments.length>5?arguments[5]:void 0;if(!t.length)return s(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:t,ns:r,fcName:i,tried:n,wait:a,callback:s});return}this.readingCalls++;const o=(u,h)=>{if(this.readingCalls--,this.waitingReads.length>0){const c=this.waitingReads.shift();this.read(c.lng,c.ns,c.fcName,c.tried,c.wait,c.callback)}if(u&&h&&n<this.maxRetries){setTimeout(()=>{this.read.call(this,t,r,i,n+1,a*2,s)},a);return}s(u,h)},l=this.backend[i].bind(this.backend);if(l.length===2){try{const u=l(t,r);u&&typeof u.then=="function"?u.then(h=>o(null,h)).catch(o):o(null,u)}catch(u){o(u)}return}return l(t,r,o)}prepareLoading(t,r){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),n&&n();typeof t=="string"&&(t=this.languageUtils.toResolveHierarchy(t)),typeof r=="string"&&(r=[r]);const a=this.queueLoad(t,r,i,n);if(!a.toLoad.length)return a.pending.length||n(),null;a.toLoad.forEach(s=>{this.loadOne(s)})}load(t,r,i){this.prepareLoading(t,r,{},i)}reload(t,r,i){this.prepareLoading(t,r,{reload:!0},i)}loadOne(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const i=t.split("|"),n=i[0],a=i[1];this.read(n,a,"read",void 0,void 0,(s,o)=>{s&&this.logger.warn(`${r}loading namespace ${a} for language ${n} failed`,s),!s&&o&&this.logger.log(`${r}loaded namespace ${a} for language ${n}`,o),this.loaded(t,s,o)})}saveMissing(t,r,i,n,a){let s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(r)){this.logger.warn(`did not save key "${i}" as the namespace "${r}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(i==null||i==="")){if(this.backend&&this.backend.create){const l={...s,isUpdate:a},u=this.backend.create.bind(this.backend);if(u.length<6)try{let h;u.length===5?h=u(t,r,i,n,l):h=u(t,r,i,n),h&&typeof h.then=="function"?h.then(c=>o(null,c)).catch(o):o(null,h)}catch(h){o(h)}else u(t,r,i,n,o,l)}!t||!t[0]||this.store.addResource(t[0],r,i,n)}}}function Qj(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(t){let r={};if(typeof t[1]=="object"&&(r=t[1]),typeof t[1]=="string"&&(r.defaultValue=t[1]),typeof t[2]=="string"&&(r.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const i=t[3]||t[2];Object.keys(i).forEach(n=>{r[n]=i[n]})}return r},interpolation:{escapeValue:!0,format:(e,t,r,i)=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function Kj(e){return typeof e.ns=="string"&&(e.ns=[e.ns]),typeof e.fallbackLng=="string"&&(e.fallbackLng=[e.fallbackLng]),typeof e.fallbackNS=="string"&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e}function dw(){}function C6e(e){Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach(r=>{typeof e[r]=="function"&&(e[r]=e[r].bind(e))})}class A1 extends QE{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;if(super(),this.options=Kj(t),this.services={},this.logger=fu,this.modules={external:[]},C6e(this),r&&!this.isInitialized&&!t.isClone){if(!this.options.initImmediate)return this.init(t,r),this;setTimeout(()=>{this.init(t,r)},0)}}init(){var t=this;let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;typeof r=="function"&&(i=r,r={}),!r.defaultNS&&r.defaultNS!==!1&&r.ns&&(typeof r.ns=="string"?r.defaultNS=r.ns:r.ns.indexOf("translation")<0&&(r.defaultNS=r.ns[0]));const n=Qj();this.options={...n,...this.options,...Kj(r)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...n.interpolation,...this.options.interpolation}),r.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=r.keySeparator),r.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=r.nsSeparator);function a(h){return h?typeof h=="function"?new h:h:null}if(!this.options.isClone){this.modules.logger?fu.init(a(this.modules.logger),this.options):fu.init(null,this.options);let h;this.modules.formatter?h=this.modules.formatter:typeof Intl<"u"&&(h=S6e);const c=new Yj(this.options);this.store=new Wj(this.options.resources,this.options);const d=this.services;d.logger=fu,d.resourceStore=this.store,d.languageUtils=c,d.pluralResolver=new b6e(c,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),h&&(!this.options.interpolation.format||this.options.interpolation.format===n.interpolation.format)&&(d.formatter=a(h),d.formatter.init(d,this.options),this.options.interpolation.format=d.formatter.format.bind(d.formatter)),d.interpolator=new w6e(this.options),d.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},d.backendConnector=new M6e(a(this.modules.backend),d.resourceStore,d,this.options),d.backendConnector.on("*",function(f){for(var m=arguments.length,p=new Array(m>1?m-1:0),g=1;g<m;g++)p[g-1]=arguments[g];t.emit(f,...p)}),this.modules.languageDetector&&(d.languageDetector=a(this.modules.languageDetector),d.languageDetector.init&&d.languageDetector.init(d,this.options.detection,this.options)),this.modules.i18nFormat&&(d.i18nFormat=a(this.modules.i18nFormat),d.i18nFormat.init&&d.i18nFormat.init(this)),this.translator=new s2(this.services,this.options),this.translator.on("*",function(f){for(var m=arguments.length,p=new Array(m>1?m-1:0),g=1;g<m;g++)p[g-1]=arguments[g];t.emit(f,...p)}),this.modules.external.forEach(f=>{f.init&&f.init(this)})}if(this.format=this.options.interpolation.format,i||(i=dw),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const h=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);h.length>0&&h[0]!=="dev"&&(this.options.lng=h[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(h=>{this[h]=function(){return t.store[h](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(h=>{this[h]=function(){return t.store[h](...arguments),t}});const l=E0(),u=()=>{const h=(c,d)=>{this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),l.resolve(d),i(c,d)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return h(null,this.t.bind(this));this.changeLanguage(this.options.lng,h)};return this.options.resources||!this.options.initImmediate?u():setTimeout(u,0),l}loadResources(t){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:dw;const n=typeof t=="string"?t:this.language;if(typeof t=="function"&&(i=t),!this.options.resources||this.options.partialBundledLanguages){if(n&&n.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return i();const a=[],s=o=>{if(!o||o==="cimode")return;this.services.languageUtils.toResolveHierarchy(o).forEach(u=>{u!=="cimode"&&a.indexOf(u)<0&&a.push(u)})};n?s(n):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(l=>s(l)),this.options.preload&&this.options.preload.forEach(o=>s(o)),this.services.backendConnector.load(a,this.options.ns,o=>{!o&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),i(o)})}else i(null)}reloadResources(t,r,i){const n=E0();return t||(t=this.languages),r||(r=this.options.ns),i||(i=dw),this.services.backendConnector.reload(t,r,a=>{n.resolve(),i(a)}),n}use(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return t.type==="backend"&&(this.modules.backend=t),(t.type==="logger"||t.log&&t.warn&&t.error)&&(this.modules.logger=t),t.type==="languageDetector"&&(this.modules.languageDetector=t),t.type==="i18nFormat"&&(this.modules.i18nFormat=t),t.type==="postProcessor"&&$X.addPostProcessor(t),t.type==="formatter"&&(this.modules.formatter=t),t.type==="3rdParty"&&this.modules.external.push(t),this}setResolvedLanguage(t){if(!(!t||!this.languages)&&!(["cimode","dev"].indexOf(t)>-1))for(let r=0;r<this.languages.length;r++){const i=this.languages[r];if(!(["cimode","dev"].indexOf(i)>-1)&&this.store.hasLanguageSomeTranslations(i)){this.resolvedLanguage=i;break}}}changeLanguage(t,r){var i=this;this.isLanguageChangingTo=t;const n=E0();this.emit("languageChanging",t);const a=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},s=(l,u)=>{u?(a(u),this.translator.changeLanguage(u),this.isLanguageChangingTo=void 0,this.emit("languageChanged",u),this.logger.log("languageChanged",u)):this.isLanguageChangingTo=void 0,n.resolve(function(){return i.t(...arguments)}),r&&r(l,function(){return i.t(...arguments)})},o=l=>{!t&&!l&&this.services.languageDetector&&(l=[]);const u=typeof l=="string"?l:this.services.languageUtils.getBestMatchFromCodes(l);u&&(this.language||a(u),this.translator.language||this.translator.changeLanguage(u),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(u)),this.loadResources(u,h=>{s(h,u)})};return!t&&this.services.languageDetector&&!this.services.languageDetector.async?o(this.services.languageDetector.detect()):!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(o):this.services.languageDetector.detect(o):o(t),n}getFixedT(t,r,i){var n=this;const a=function(s,o){let l;if(typeof o!="object"){for(var u=arguments.length,h=new Array(u>2?u-2:0),c=2;c<u;c++)h[c-2]=arguments[c];l=n.options.overloadTranslationOptionHandler([s,o].concat(h))}else l={...o};l.lng=l.lng||a.lng,l.lngs=l.lngs||a.lngs,l.ns=l.ns||a.ns,l.keyPrefix=l.keyPrefix||i||a.keyPrefix;const d=n.options.keySeparator||".";let f;return l.keyPrefix&&Array.isArray(s)?f=s.map(m=>`${l.keyPrefix}${d}${m}`):f=l.keyPrefix?`${l.keyPrefix}${d}${s}`:s,n.t(f,l)};return typeof t=="string"?a.lng=t:a.lngs=t,a.ns=r,a.keyPrefix=i,a}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(t){this.options.defaultNS=t}hasLoadedNamespace(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const i=r.lng||this.resolvedLanguage||this.languages[0],n=this.options?this.options.fallbackLng:!1,a=this.languages[this.languages.length-1];if(i.toLowerCase()==="cimode")return!0;const s=(o,l)=>{const u=this.services.backendConnector.state[`${o}|${l}`];return u===-1||u===2};if(r.precheck){const o=r.precheck(this,s);if(o!==void 0)return o}return!!(this.hasResourceBundle(i,t)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||s(i,t)&&(!n||s(a,t)))}loadNamespaces(t,r){const i=E0();return this.options.ns?(typeof t=="string"&&(t=[t]),t.forEach(n=>{this.options.ns.indexOf(n)<0&&this.options.ns.push(n)}),this.loadResources(n=>{i.resolve(),r&&r(n)}),i):(r&&r(),Promise.resolve())}loadLanguages(t,r){const i=E0();typeof t=="string"&&(t=[t]);const n=this.options.preload||[],a=t.filter(s=>n.indexOf(s)<0);return a.length?(this.options.preload=n.concat(a),this.loadResources(s=>{i.resolve(),r&&r(s)}),i):(r&&r(),Promise.resolve())}dir(t){if(t||(t=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!t)return"rtl";const r=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],i=this.services&&this.services.languageUtils||new Yj(Qj());return r.indexOf(i.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;return new A1(t,r)}cloneInstance(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:dw;const i=t.forkResourceStore;i&&delete t.forkResourceStore;const n={...this.options,...t,isClone:!0},a=new A1(n);return(t.debug!==void 0||t.prefix!==void 0)&&(a.logger=a.logger.clone(t)),["store","services","language"].forEach(o=>{a[o]=this[o]}),a.services={...this.services},a.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},i&&(a.store=new Wj(this.store.data,n),a.services.resourceStore=a.store),a.translator=new s2(a.services,n),a.translator.on("*",function(o){for(var l=arguments.length,u=new Array(l>1?l-1:0),h=1;h<l;h++)u[h-1]=arguments[h];a.emit(o,...u)}),a.init(n,r),a.translator.options=n,a.translator.backendConnector.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},a}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Ma=A1.createInstance();Ma.createInstance=A1.createInstance;Ma.createInstance;Ma.dir;Ma.init;Ma.loadResources;Ma.reloadResources;Ma.use;Ma.changeLanguage;Ma.getFixedT;Ma.t;Ma.exists;Ma.setDefaultNamespace;Ma.hasLoadedNamespace;Ma.loadNamespaces;Ma.loadLanguages;function Y3(e){"@babel/helpers - typeof";return Y3=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Y3(e)}var YX=[],A6e=YX.forEach,T6e=YX.slice;function q3(e){return A6e.call(T6e.call(arguments,1),function(t){if(t)for(var r in t)e[r]===void 0&&(e[r]=t[r])}),e}function qX(){return typeof XMLHttpRequest=="function"||(typeof XMLHttpRequest>"u"?"undefined":Y3(XMLHttpRequest))==="object"}function P6e(e){return!!e&&typeof e.then=="function"}function D6e(e){return P6e(e)?e:Promise.resolve(e)}function O6e(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var X3={exports:{}},fw={exports:{}},Zj;function I6e(){return Zj||(Zj=1,function(e,t){var r=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof zm<"u"&&zm,i=function(){function a(){this.fetch=!1,this.DOMException=r.DOMException}return a.prototype=r,new a}();(function(a){(function(s){var o=typeof a<"u"&&a||typeof self<"u"&&self||typeof o<"u"&&o,l={searchParams:"URLSearchParams"in o,iterable:"Symbol"in o&&"iterator"in Symbol,blob:"FileReader"in o&&"Blob"in o&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in o,arrayBuffer:"ArrayBuffer"in o};function u(O){return O&&DataView.prototype.isPrototypeOf(O)}if(l.arrayBuffer)var h=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],c=ArrayBuffer.isView||function(O){return O&&h.indexOf(Object.prototype.toString.call(O))>-1};function d(O){if(typeof O!="string"&&(O=String(O)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(O)||O==="")throw new TypeError('Invalid character in header field name: "'+O+'"');return O.toLowerCase()}function f(O){return typeof O!="string"&&(O=String(O)),O}function m(O){var F={next:function(){var z=O.shift();return{done:z===void 0,value:z}}};return l.iterable&&(F[Symbol.iterator]=function(){return F}),F}function p(O){this.map={},O instanceof p?O.forEach(function(F,z){this.append(z,F)},this):Array.isArray(O)?O.forEach(function(F){this.append(F[0],F[1])},this):O&&Object.getOwnPropertyNames(O).forEach(function(F){this.append(F,O[F])},this)}p.prototype.append=function(O,F){O=d(O),F=f(F);var z=this.map[O];this.map[O]=z?z+", "+F:F},p.prototype.delete=function(O){delete this.map[d(O)]},p.prototype.get=function(O){return O=d(O),this.has(O)?this.map[O]:null},p.prototype.has=function(O){return this.map.hasOwnProperty(d(O))},p.prototype.set=function(O,F){this.map[d(O)]=f(F)},p.prototype.forEach=function(O,F){for(var z in this.map)this.map.hasOwnProperty(z)&&O.call(F,this.map[z],z,this)},p.prototype.keys=function(){var O=[];return this.forEach(function(F,z){O.push(z)}),m(O)},p.prototype.values=function(){var O=[];return this.forEach(function(F){O.push(F)}),m(O)},p.prototype.entries=function(){var O=[];return this.forEach(function(F,z){O.push([z,F])}),m(O)},l.iterable&&(p.prototype[Symbol.iterator]=p.prototype.entries);function g(O){if(O.bodyUsed)return Promise.reject(new TypeError("Already read"));O.bodyUsed=!0}function v(O){return new Promise(function(F,z){O.onload=function(){F(O.result)},O.onerror=function(){z(O.error)}})}function y(O){var F=new FileReader,z=v(F);return F.readAsArrayBuffer(O),z}function x(O){var F=new FileReader,z=v(F);return F.readAsText(O),z}function b(O){for(var F=new Uint8Array(O),z=new Array(F.length),B=0;B<F.length;B++)z[B]=String.fromCharCode(F[B]);return z.join("")}function _(O){if(O.slice)return O.slice(0);var F=new Uint8Array(O.byteLength);return F.set(new Uint8Array(O)),F.buffer}function w(){return this.bodyUsed=!1,this._initBody=function(O){this.bodyUsed=this.bodyUsed,this._bodyInit=O,O?typeof O=="string"?this._bodyText=O:l.blob&&Blob.prototype.isPrototypeOf(O)?this._bodyBlob=O:l.formData&&FormData.prototype.isPrototypeOf(O)?this._bodyFormData=O:l.searchParams&&URLSearchParams.prototype.isPrototypeOf(O)?this._bodyText=O.toString():l.arrayBuffer&&l.blob&&u(O)?(this._bodyArrayBuffer=_(O.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):l.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(O)||c(O))?this._bodyArrayBuffer=_(O):this._bodyText=O=Object.prototype.toString.call(O):this._bodyText="",this.headers.get("content-type")||(typeof O=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):l.searchParams&&URLSearchParams.prototype.isPrototypeOf(O)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},l.blob&&(this.blob=function(){var O=g(this);if(O)return O;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var O=g(this);return O||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else return this.blob().then(y)}),this.text=function(){var O=g(this);if(O)return O;if(this._bodyBlob)return x(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(b(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},l.formData&&(this.formData=function(){return this.text().then(M)}),this.json=function(){return this.text().then(JSON.parse)},this}var E=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function S(O){var F=O.toUpperCase();return E.indexOf(F)>-1?F:O}function C(O,F){if(!(this instanceof C))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');F=F||{};var z=F.body;if(O instanceof C){if(O.bodyUsed)throw new TypeError("Already read");this.url=O.url,this.credentials=O.credentials,F.headers||(this.headers=new p(O.headers)),this.method=O.method,this.mode=O.mode,this.signal=O.signal,!z&&O._bodyInit!=null&&(z=O._bodyInit,O.bodyUsed=!0)}else this.url=String(O);if(this.credentials=F.credentials||this.credentials||"same-origin",(F.headers||!this.headers)&&(this.headers=new p(F.headers)),this.method=S(F.method||this.method||"GET"),this.mode=F.mode||this.mode||null,this.signal=F.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&z)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(z),(this.method==="GET"||this.method==="HEAD")&&(F.cache==="no-store"||F.cache==="no-cache")){var B=/([?&])_=[^&]*/;if(B.test(this.url))this.url=this.url.replace(B,"$1_="+new Date().getTime());else{var V=/\?/;this.url+=(V.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}C.prototype.clone=function(){return new C(this,{body:this._bodyInit})};function M(O){var F=new FormData;return O.trim().split("&").forEach(function(z){if(z){var B=z.split("="),V=B.shift().replace(/\+/g," "),R=B.join("=").replace(/\+/g," ");F.append(decodeURIComponent(V),decodeURIComponent(R))}}),F}function P(O){var F=new p,z=O.replace(/\r?\n[\t ]+/g," ");return z.split("\r").map(function(B){return B.indexOf(`
`)===0?B.substr(1,B.length):B}).forEach(function(B){var V=B.split(":"),R=V.shift().trim();if(R){var H=V.join(":").trim();F.append(R,H)}}),F}w.call(C.prototype);function I(O,F){if(!(this instanceof I))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');F||(F={}),this.type="default",this.status=F.status===void 0?200:F.status,this.ok=this.status>=200&&this.status<300,this.statusText=F.statusText===void 0?"":""+F.statusText,this.headers=new p(F.headers),this.url=F.url||"",this._initBody(O)}w.call(I.prototype),I.prototype.clone=function(){return new I(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},I.error=function(){var O=new I(null,{status:0,statusText:""});return O.type="error",O};var k=[301,302,303,307,308];I.redirect=function(O,F){if(k.indexOf(F)===-1)throw new RangeError("Invalid status code");return new I(null,{status:F,headers:{location:O}})},s.DOMException=o.DOMException;try{new s.DOMException}catch{s.DOMException=function(F,z){this.message=F,this.name=z;var B=Error(F);this.stack=B.stack},s.DOMException.prototype=Object.create(Error.prototype),s.DOMException.prototype.constructor=s.DOMException}function L(O,F){return new Promise(function(z,B){var V=new C(O,F);if(V.signal&&V.signal.aborted)return B(new s.DOMException("Aborted","AbortError"));var R=new XMLHttpRequest;function H(){R.abort()}R.onload=function(){var te={status:R.status,statusText:R.statusText,headers:P(R.getAllResponseHeaders()||"")};te.url="responseURL"in R?R.responseURL:te.headers.get("X-Request-URL");var G="response"in R?R.response:R.responseText;setTimeout(function(){z(new I(G,te))},0)},R.onerror=function(){setTimeout(function(){B(new TypeError("Network request failed"))},0)},R.ontimeout=function(){setTimeout(function(){B(new TypeError("Network request failed"))},0)},R.onabort=function(){setTimeout(function(){B(new s.DOMException("Aborted","AbortError"))},0)};function W(te){try{return te===""&&o.location.href?o.location.href:te}catch{return te}}R.open(V.method,W(V.url),!0),V.credentials==="include"?R.withCredentials=!0:V.credentials==="omit"&&(R.withCredentials=!1),"responseType"in R&&(l.blob?R.responseType="blob":l.arrayBuffer&&V.headers.get("Content-Type")&&V.headers.get("Content-Type").indexOf("application/octet-stream")!==-1&&(R.responseType="arraybuffer")),F&&typeof F.headers=="object"&&!(F.headers instanceof p)?Object.getOwnPropertyNames(F.headers).forEach(function(te){R.setRequestHeader(te,f(F.headers[te]))}):V.headers.forEach(function(te,G){R.setRequestHeader(G,te)}),V.signal&&(V.signal.addEventListener("abort",H),R.onreadystatechange=function(){R.readyState===4&&V.signal.removeEventListener("abort",H)}),R.send(typeof V._bodyInit>"u"?null:V._bodyInit)})}return L.polyfill=!0,o.fetch||(o.fetch=L,o.Headers=p,o.Request=C,o.Response=I),s.Headers=p,s.Request=C,s.Response=I,s.fetch=L,s})({})})(i),i.fetch.ponyfill=!0,delete i.fetch.polyfill;var n=r.fetch?r:i;t=n.fetch,t.default=n.fetch,t.fetch=n.fetch,t.Headers=n.Headers,t.Request=n.Request,t.Response=n.Response,e.exports=t}(fw,fw.exports)),fw.exports}(function(e,t){var r;if(typeof fetch=="function"&&(typeof zm<"u"&&zm.fetch?r=zm.fetch:typeof window<"u"&&window.fetch?r=window.fetch:r=fetch),typeof O6e<"u"&&(typeof window>"u"||typeof window.document>"u")){var i=r||I6e();i.default&&(i=i.default),t.default=i,e.exports=t.default}})(X3,X3.exports);var XX=X3.exports;const QX=K3(XX),Jj=oV({__proto__:null,default:QX},[XX]);function o2(e){"@babel/helpers - typeof";return o2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o2(e)}var bc;typeof fetch=="function"&&(typeof global<"u"&&global.fetch?bc=global.fetch:typeof window<"u"&&window.fetch?bc=window.fetch:bc=fetch);var T1;qX()&&(typeof global<"u"&&global.XMLHttpRequest?T1=global.XMLHttpRequest:typeof window<"u"&&window.XMLHttpRequest&&(T1=window.XMLHttpRequest));var l2;typeof ActiveXObject=="function"&&(typeof global<"u"&&global.ActiveXObject?l2=global.ActiveXObject:typeof window<"u"&&window.ActiveXObject&&(l2=window.ActiveXObject));!bc&&Jj&&!T1&&!l2&&(bc=QX||Jj);typeof bc!="function"&&(bc=void 0);var Q3=function(t,r){if(r&&o2(r)==="object"){var i="";for(var n in r)i+="&"+encodeURIComponent(n)+"="+encodeURIComponent(r[n]);if(!i)return t;t=t+(t.indexOf("?")!==-1?"&":"?")+i.slice(1)}return t},eV=function(t,r,i){var n=function(s){if(!s.ok)return i(s.statusText||"Error",{status:s.status});s.text().then(function(o){i(null,{status:s.status,data:o})}).catch(i)};typeof fetch=="function"?fetch(t,r).then(n).catch(i):bc(t,r).then(n).catch(i)},tV=!1,R6e=function(t,r,i,n){t.queryStringParams&&(r=Q3(r,t.queryStringParams));var a=q3({},typeof t.customHeaders=="function"?t.customHeaders():t.customHeaders);typeof window>"u"&&typeof global<"u"&&typeof global.process<"u"&&global.process.versions&&global.process.versions.node&&(a["User-Agent"]="i18next-http-backend (node/".concat(global.process.version,"; ").concat(global.process.platform," ").concat(global.process.arch,")")),i&&(a["Content-Type"]="application/json");var s=typeof t.requestOptions=="function"?t.requestOptions(i):t.requestOptions,o=q3({method:i?"POST":"GET",body:i?t.stringify(i):void 0,headers:a},tV?{}:s);try{eV(r,o,n)}catch(l){if(!s||Object.keys(s).length===0||!l.message||l.message.indexOf("not implemented")<0)return n(l);try{Object.keys(s).forEach(function(u){delete o[u]}),eV(r,o,n),tV=!0}catch(u){n(u)}}},k6e=function(t,r,i,n){i&&o2(i)==="object"&&(i=Q3("",i).slice(1)),t.queryStringParams&&(r=Q3(r,t.queryStringParams));try{var a;T1?a=new T1:a=new l2("MSXML2.XMLHTTP.3.0"),a.open(i?"POST":"GET",r,1),t.crossDomain||a.setRequestHeader("X-Requested-With","XMLHttpRequest"),a.withCredentials=!!t.withCredentials,i&&a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.overrideMimeType&&a.overrideMimeType("application/json");var s=t.customHeaders;if(s=typeof s=="function"?s():s,s)for(var o in s)a.setRequestHeader(o,s[o]);a.onreadystatechange=function(){a.readyState>3&&n(a.status>=400?a.statusText:null,{status:a.status,data:a.responseText})},a.send(i)}catch(l){console&&console.log(l)}},L6e=function(t,r,i,n){if(typeof i=="function"&&(n=i,i=void 0),n=n||function(){},bc&&r.indexOf("file:")!==0)return R6e(t,r,i,n);if(qX()||typeof ActiveXObject=="function")return k6e(t,r,i,n);n(new Error("No fetch and no xhr implementation found!"))};function P1(e){"@babel/helpers - typeof";return P1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P1(e)}function B6e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rV(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,KX(i.key),i)}}function N6e(e,t,r){return t&&rV(e.prototype,t),r&&rV(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function z6e(e,t,r){return t=KX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KX(e){var t=F6e(e,"string");return P1(t)==="symbol"?t:String(t)}function F6e(e,t){if(P1(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(P1(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var U6e=function(){return{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",parse:function(r){return JSON.parse(r)},stringify:JSON.stringify,parsePayload:function(r,i,n){return z6e({},i,n||"")},parseLoadPayload:function(r,i){},request:L6e,reloadInterval:typeof window<"u"?!1:60*60*1e3,customHeaders:{},queryStringParams:{},crossDomain:!1,withCredentials:!1,overrideMimeType:!1,requestOptions:{mode:"cors",credentials:"same-origin",cache:"default"}}},ZX=function(){function e(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};B6e(this,e),this.services=t,this.options=r,this.allOptions=i,this.type="backend",this.init(t,r,i)}return N6e(e,[{key:"init",value:function(r){var i=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=r,this.options=q3(n,this.options||{},U6e()),this.allOptions=a,this.services&&this.options.reloadInterval&&setInterval(function(){return i.reload()},this.options.reloadInterval)}},{key:"readMulti",value:function(r,i,n){this._readAny(r,r,i,i,n)}},{key:"read",value:function(r,i,n){this._readAny([r],r,[i],i,n)}},{key:"_readAny",value:function(r,i,n,a,s){var o=this,l=this.options.loadPath;typeof this.options.loadPath=="function"&&(l=this.options.loadPath(r,n)),l=D6e(l),l.then(function(u){if(!u)return s(null,{});var h=o.services.interpolator.interpolate(u,{lng:r.join("+"),ns:n.join("+")});o.loadUrl(h,s,i,a)})}},{key:"loadUrl",value:function(r,i,n,a){var s=this,o=typeof n=="string"?[n]:n,l=typeof a=="string"?[a]:a,u=this.options.parseLoadPayload(o,l);this.options.request(this.options,r,u,function(h,c){if(c&&(c.status>=500&&c.status<600||!c.status))return i("failed loading "+r+"; status code: "+c.status,!0);if(c&&c.status>=400&&c.status<500)return i("failed loading "+r+"; status code: "+c.status,!1);if(!c&&h&&h.message&&h.message.indexOf("Failed to fetch")>-1)return i("failed loading "+r+": "+h.message,!0);if(h)return i(h,!1);var d,f;try{typeof c.data=="string"?d=s.options.parse(c.data,n,a):d=c.data}catch{f="failed parsing "+r+" to json"}if(f)return i(f,!1);i(null,d)})}},{key:"create",value:function(r,i,n,a,s){var o=this;if(this.options.addPath){typeof r=="string"&&(r=[r]);var l=this.options.parsePayload(i,n,a),u=0,h=[],c=[];r.forEach(function(d){var f=o.options.addPath;typeof o.options.addPath=="function"&&(f=o.options.addPath(d,i));var m=o.services.interpolator.interpolate(f,{lng:d,ns:i});o.options.request(o.options,m,l,function(p,g){u+=1,h.push(p),c.push(g),u===r.length&&typeof s=="function"&&s(h,c)})})}}},{key:"reload",value:function(){var r=this,i=this.services,n=i.backendConnector,a=i.languageUtils,s=i.logger,o=n.language;if(!(o&&o.toLowerCase()==="cimode")){var l=[],u=function(c){var d=a.toResolveHierarchy(c);d.forEach(function(f){l.indexOf(f)<0&&l.push(f)})};u(o),this.allOptions.preload&&this.allOptions.preload.forEach(function(h){return u(h)}),l.forEach(function(h){r.allOptions.ns.forEach(function(c){n.read(h,c,"read",null,null,function(d,f){d&&s.warn("loading namespace ".concat(c," for language ").concat(h," failed"),d),!d&&f&&s.log("loaded namespace ".concat(c," for language ").concat(h),f),n.loaded("".concat(h,"|").concat(c),d,f)})})})}}}]),e}();ZX.type="backend";var JX=[],j6e=JX.forEach,V6e=JX.slice;function H6e(e){return j6e.call(V6e.call(arguments,1),function(t){if(t)for(var r in t)e[r]===void 0&&(e[r]=t[r])}),e}var iV=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,G6e=function(t,r,i){var n=i||{};n.path=n.path||"/";var a=encodeURIComponent(r),s="".concat(t,"=").concat(a);if(n.maxAge>0){var o=n.maxAge-0;if(Number.isNaN(o))throw new Error("maxAge should be a Number");s+="; Max-Age=".concat(Math.floor(o))}if(n.domain){if(!iV.test(n.domain))throw new TypeError("option domain is invalid");s+="; Domain=".concat(n.domain)}if(n.path){if(!iV.test(n.path))throw new TypeError("option path is invalid");s+="; Path=".concat(n.path)}if(n.expires){if(typeof n.expires.toUTCString!="function")throw new TypeError("option expires is invalid");s+="; Expires=".concat(n.expires.toUTCString())}if(n.httpOnly&&(s+="; HttpOnly"),n.secure&&(s+="; Secure"),n.sameSite){var l=typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite;switch(l){case!0:s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"strict":s+="; SameSite=Strict";break;case"none":s+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return s},nV={create:function(t,r,i,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};i&&(a.expires=new Date,a.expires.setTime(a.expires.getTime()+i*60*1e3)),n&&(a.domain=n),document.cookie=G6e(t,encodeURIComponent(r),a)},read:function(t){for(var r="".concat(t,"="),i=document.cookie.split(";"),n=0;n<i.length;n++){for(var a=i[n];a.charAt(0)===" ";)a=a.substring(1,a.length);if(a.indexOf(r)===0)return a.substring(r.length,a.length)}return null},remove:function(t){this.create(t,"",-1)}},W6e={name:"cookie",lookup:function(t){var r;if(t.lookupCookie&&typeof document<"u"){var i=nV.read(t.lookupCookie);i&&(r=i)}return r},cacheUserLanguage:function(t,r){r.lookupCookie&&typeof document<"u"&&nV.create(r.lookupCookie,t,r.cookieMinutes,r.cookieDomain,r.cookieOptions)}},$6e={name:"querystring",lookup:function(t){var r;if(typeof window<"u"){var i=window.location.search;!window.location.search&&window.location.hash&&window.location.hash.indexOf("?")>-1&&(i=window.location.hash.substring(window.location.hash.indexOf("?")));for(var n=i.substring(1),a=n.split("&"),s=0;s<a.length;s++){var o=a[s].indexOf("=");if(o>0){var l=a[s].substring(0,o);l===t.lookupQuerystring&&(r=a[s].substring(o+1))}}}return r}},M0=null,aV=function(){if(M0!==null)return M0;try{M0=window!=="undefined"&&window.localStorage!==null;var t="i18next.translate.boo";window.localStorage.setItem(t,"foo"),window.localStorage.removeItem(t)}catch{M0=!1}return M0},Y6e={name:"localStorage",lookup:function(t){var r;if(t.lookupLocalStorage&&aV()){var i=window.localStorage.getItem(t.lookupLocalStorage);i&&(r=i)}return r},cacheUserLanguage:function(t,r){r.lookupLocalStorage&&aV()&&window.localStorage.setItem(r.lookupLocalStorage,t)}},C0=null,sV=function(){if(C0!==null)return C0;try{C0=window!=="undefined"&&window.sessionStorage!==null;var t="i18next.translate.boo";window.sessionStorage.setItem(t,"foo"),window.sessionStorage.removeItem(t)}catch{C0=!1}return C0},q6e={name:"sessionStorage",lookup:function(t){var r;if(t.lookupSessionStorage&&sV()){var i=window.sessionStorage.getItem(t.lookupSessionStorage);i&&(r=i)}return r},cacheUserLanguage:function(t,r){r.lookupSessionStorage&&sV()&&window.sessionStorage.setItem(r.lookupSessionStorage,t)}},X6e={name:"navigator",lookup:function(t){var r=[];if(typeof navigator<"u"){if(navigator.languages)for(var i=0;i<navigator.languages.length;i++)r.push(navigator.languages[i]);navigator.userLanguage&&r.push(navigator.userLanguage),navigator.language&&r.push(navigator.language)}return r.length>0?r:void 0}},Q6e={name:"htmlTag",lookup:function(t){var r,i=t.htmlTag||(typeof document<"u"?document.documentElement:null);return i&&typeof i.getAttribute=="function"&&(r=i.getAttribute("lang")),r}},K6e={name:"path",lookup:function(t){var r;if(typeof window<"u"){var i=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(i instanceof Array)if(typeof t.lookupFromPathIndex=="number"){if(typeof i[t.lookupFromPathIndex]!="string")return;r=i[t.lookupFromPathIndex].replace("/","")}else r=i[0].replace("/","")}return r}},Z6e={name:"subdomain",lookup:function(t){var r=typeof t.lookupFromSubdomainIndex=="number"?t.lookupFromSubdomainIndex+1:1,i=typeof window<"u"&&window.location&&window.location.hostname&&window.location.hostname.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(i)return i[r]}};function J6e(){return{order:["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:function(t){return t}}}var eQ=function(){function e(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};vr(this,e),this.type="languageDetector",this.detectors={},this.init(t,r)}return yr(e,[{key:"init",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=r||{languageUtils:{}},this.options=H6e(i,this.options||{},J6e()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=function(a){return a.replace("-","_")}),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=n,this.addDetector(W6e),this.addDetector($6e),this.addDetector(Y6e),this.addDetector(q6e),this.addDetector(X6e),this.addDetector(Q6e),this.addDetector(K6e),this.addDetector(Z6e)}},{key:"addDetector",value:function(r){this.detectors[r.name]=r}},{key:"detect",value:function(r){var i=this;r||(r=this.options.order);var n=[];return r.forEach(function(a){if(i.detectors[a]){var s=i.detectors[a].lookup(i.options);s&&typeof s=="string"&&(s=[s]),s&&(n=n.concat(s))}}),n=n.map(function(a){return i.options.convertDetectedLanguage(a)}),this.services.languageUtils.getBestMatchFromCodes?n:n.length>0?n[0]:null}},{key:"cacheUserLanguage",value:function(r,i){var n=this;i||(i=this.options.caches),i&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(r)>-1||i.forEach(function(a){n.detectors[a]&&n.detectors[a].cacheUserLanguage(r,n.options)}))}}]),e}();eQ.type="languageDetector";Ma.use(ZX).use(eQ).use(Joe).init({fallbackLng:"en",debug:!0,interpolation:{escapeValue:!1}});const eje=document.getElementById("root"),tje=wH(eje);tje.render(Q(X.StrictMode,{children:Q(X.Suspense,{fallback:"loading",children:Q(s6e,{})})}))});export default rje();
